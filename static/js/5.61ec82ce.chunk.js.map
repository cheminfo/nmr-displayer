{"version":3,"sources":["../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/iterableToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js","component/highlight/index.js","demo/test/TestHighlight.jsx"],"names":["_toConsumableArray","arr","_arrayWithoutHoles","Array","isArray","arrayLikeToArray","_iterableToArray","iter","Symbol","iterator","Object","from","unsupportedIterableToArray","_nonIterableSpread","TypeError","TYPES","PEAK","INTEGRAL","RANGE","ZONE","EXCLUSION_ZONE","highlightContext","createContext","highlightReducer","state","action","type","payload","convertedHighlights","newState","highlights","value","highlighted","keys","highlightedPermanently","Error","emptyState","HighlightProvider","props","useReducer","highlight","dispatch","contextValue","useMemo","Provider","children","useHighlightData","useContext","useHighlight","context","newHighlights","push","String","useEffect","isActive","some","key","includes","isActivePermanently","show","useCallback","hide","add","id","remove","click","e","preventDefault","stopPropagation","onHover","onMouseEnter","onMouseLeave","onClick","tableOne","tableTwo","mainDiv","css","tableDiv","table","th","td","TestHighlight","HighlightTable","data","map","datum","Tr","style","backgroundColor","join"],"mappings":"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","file":"static/js/5.61ec82ce.chunk.js","sourcesContent":["import arrayWithoutHoles from \"@babel/runtime/helpers/esm/arrayWithoutHoles\";\nimport iterableToArray from \"@babel/runtime/helpers/esm/iterableToArray\";\nimport unsupportedIterableToArray from \"@babel/runtime/helpers/esm/unsupportedIterableToArray\";\nimport nonIterableSpread from \"@babel/runtime/helpers/esm/nonIterableSpread\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}","import arrayLikeToArray from \"@babel/runtime/helpers/esm/arrayLikeToArray\";\nexport default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}","export default function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import {\n  createContext,\n  useReducer,\n  useMemo,\n  useContext,\n  useCallback,\n  useEffect,\n} from 'react';\n\nexport const TYPES = {\n  PEAK: 'PEAK',\n  INTEGRAL: 'INTEGRAL',\n  RANGE: 'RANGE',\n  ZONE: 'ZONE',\n  EXCLUSION_ZONE: 'EXCLUSION_ZONE',\n};\n\nconst highlightContext = createContext();\n\nfunction highlightReducer(state, action) {\n  switch (action.type) {\n    case 'SHOW': {\n      const { convertedHighlights, type } = action.payload;\n      const newState = {\n        ...state,\n        highlights: { ...state.highlights },\n        type,\n      };\n      for (const value of convertedHighlights) {\n        if (!(value in newState.highlights)) {\n          newState.highlights[value] = 1;\n        }\n      }\n      newState.highlighted = Object.keys(newState.highlights);\n\n      return newState;\n    }\n    case 'HIDE': {\n      const { convertedHighlights } = action.payload;\n\n      const newState = {\n        ...state,\n        highlights: { ...state.highlights },\n        type: null,\n      };\n      for (const value of convertedHighlights) {\n        if (value in newState.highlights) {\n          delete newState.highlights[value];\n        }\n      }\n      newState.highlighted = Object.keys(newState.highlights);\n      return newState;\n    }\n    case 'SET_PERMANENT': {\n      const newState = {\n        ...state,\n        // allow just one permanent highlights group at same time\n        highlightedPermanently: action.payload,\n      };\n\n      return newState;\n    }\n    case 'UNSET_PERMANENT': {\n      const newState = {\n        ...state,\n        highlightedPermanently: [],\n      };\n\n      return newState;\n    }\n    default: {\n      throw new Error(`unknown action type: ${action.type}`);\n    }\n  }\n}\n\nconst emptyState = {\n  highlights: {},\n  highlighted: [],\n  highlightedPermanently: [],\n  type: null,\n};\n\nexport function HighlightProvider(props) {\n  const [highlight, dispatch] = useReducer(highlightReducer, emptyState);\n  const contextValue = useMemo(() => ({ highlight, dispatch }), [highlight]);\n  return (\n    <highlightContext.Provider value={contextValue}>\n      {props.children}\n    </highlightContext.Provider>\n  );\n}\n\nexport function useHighlightData() {\n  return useContext(highlightContext);\n}\n\nexport function useHighlight(highlights, type = null) {\n  if (!Array.isArray(highlights)) {\n    throw new Error('highlights must be an array');\n  }\n\n  const context = useHighlightData();\n\n  const convertedHighlights = useMemo(() => {\n    const newHighlights = [];\n    for (const highlight of highlights) {\n      if (typeof highlight !== 'string' && typeof highlight !== 'number') {\n        throw new Error(`highlight key must be a string or number`);\n      }\n      if (highlight !== '') {\n        newHighlights.push(String(highlight));\n      }\n    }\n    return newHighlights;\n  }, [highlights]);\n\n  useEffect(() => {\n    // if deletion of component then also delete its highlight information -> componentWillUnmount\n    return () => {\n      context.dispatch({\n        type: 'HIDE',\n        payload: { convertedHighlights },\n      });\n      context.dispatch({\n        type: 'UNSET_PERMANENT',\n      });\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  const isActive = useMemo(() => {\n    return context.highlight.highlighted.some((key) =>\n      convertedHighlights.includes(key),\n    );\n  }, [context.highlight.highlighted, convertedHighlights]);\n\n  const isActivePermanently = useMemo(() => {\n    return context.highlight.highlightedPermanently.some((key) =>\n      convertedHighlights.includes(key),\n    );\n  }, [context.highlight.highlightedPermanently, convertedHighlights]);\n\n  const show = useCallback(() => {\n    context.dispatch({\n      type: 'SHOW',\n      payload: {\n        convertedHighlights,\n        type,\n      },\n    });\n  }, [context, convertedHighlights, type]);\n\n  const hide = useCallback(() => {\n    context.dispatch({\n      type: 'HIDE',\n      payload: {\n        convertedHighlights,\n      },\n    });\n  }, [context, convertedHighlights]);\n\n  const add = useCallback(\n    (id) => {\n      context.dispatch({\n        type: 'SHOW',\n        payload: { convertedHighlights: [], id },\n      });\n    },\n    [context],\n  );\n\n  const remove = useCallback(\n    (id) => {\n      context.dispatch({\n        type: 'HIDE',\n        payload: { convertedHighlights: [], id },\n      });\n    },\n    [context],\n  );\n\n  const click = useCallback(\n    (e) => {\n      if (e) {\n        e.preventDefault();\n        e.stopPropagation();\n      }\n\n      if (!isActivePermanently) {\n        context.dispatch({\n          type: 'SET_PERMANENT',\n          payload: convertedHighlights,\n        });\n      } else {\n        context.dispatch({\n          type: 'UNSET_PERMANENT',\n        });\n      }\n    },\n    [context, convertedHighlights, isActivePermanently],\n  );\n\n  const onHover = {\n    onMouseEnter: show,\n    onMouseLeave: hide,\n  };\n\n  const onClick = {\n    onClick: click,\n  };\n\n  return {\n    isActive,\n    show,\n    hide,\n    onHover,\n    onClick,\n    isActivePermanently,\n    click,\n    add,\n    remove,\n  };\n}\n","/** @jsxImportSource @emotion/react */\n\nimport { css } from '@emotion/react';\n\nimport { HighlightProvider, useHighlight } from '../../component/highlight';\n\nconst tableOne = [\n  { id: 'A', highlight: [1, 2] },\n  { id: 'B', highlight: [0] },\n  { id: 'C', highlight: [] },\n  { id: 'D', highlight: [3, 4] },\n  { id: 'E', highlight: [1, 2, 3] },\n  { id: 'F', highlight: [2, 4] },\n];\n\nconst tableTwo = [\n  { id: '1', highlight: ['F'] },\n  { id: '2', highlight: ['E'] },\n  { id: '3', highlight: ['A', 'B'] },\n  { id: '4', highlight: ['B', 'C', 'F'] },\n  { id: '5', highlight: [] },\n];\n\nconst mainDiv = css`\n  display: flex;\n  padding: 20px;\n`;\n\nconst tableDiv = css`\n  padding: 20px;\n`;\n\nconst table = css`\n  border: 1px solid black;\n`;\n\nconst th = css`\n  padding: 5px;\n  font-weight: 600;\n`;\n\nconst td = css`\n  padding: 5px;\n`;\n\nexport default function TestHighlight() {\n  return (\n    <HighlightProvider>\n      <div css={mainDiv}>\n        <div css={tableDiv}>\n          <HighlightTable data={tableOne} />\n        </div>\n        <div css={tableDiv}>\n          <HighlightTable data={tableTwo} />\n        </div>\n      </div>\n    </HighlightProvider>\n  );\n}\n\nfunction HighlightTable(props) {\n  return (\n    <table css={table}>\n      <thead>\n        <tr>\n          <th css={th}>ID</th>\n          <th css={th}>Highlight ids</th>\n        </tr>\n      </thead>\n      <tbody>\n        {props.data.map((datum) => (\n          <Tr key={datum.id} value={datum} />\n        ))}\n      </tbody>\n    </table>\n  );\n}\n\nfunction Tr(props) {\n  const { value } = props;\n\n  const highlight = useHighlight([value.id, ...value.highlight]);\n\n  return (\n    <tr\n      key={value.id}\n      style={{\n        backgroundColor: highlight.isActive ? 'red' : 'transparent',\n      }}\n      {...highlight.onHover}\n    >\n      <td css={td}>{value.id}</td>\n      <td css={td}>{value.highlight.join(', ')}</td>\n    </tr>\n  );\n}\n"],"sourceRoot":""}