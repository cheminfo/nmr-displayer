(this.webpackJsonpnmrium=this.webpackJsonpnmrium||[]).push([[1],{189:function(e,t,n){"use strict";n.d(t,"b",(function(){return l})),n.d(t,"a",(function(){return HighlightProvider})),n.d(t,"d",(function(){return useHighlightData})),n.d(t,"c",(function(){return useHighlight}));var a=n(42),i=n(46),r=n(6),o=n(1),c=n(3),l={PEAK:"PEAK",INTEGRAL:"INTEGRAL",RANGE:"RANGE",ZONE:"ZONE",EXCLUSION_ZONE:"EXCLUSION_ZONE"},s=Object(o.createContext)();function highlightReducer(e,t){switch(t.type){case"SHOW":var n,a=t.payload,o=a.convertedHighlights,c=a.type,l=Object(r.a)(Object(r.a)({},e),{},{highlights:Object(r.a)({},e.highlights),type:c}),s=Object(i.a)(o);try{for(s.s();!(n=s.n()).done;){var u=n.value;u in l.highlights||(l.highlights[u]=1)}}catch(g){s.e(g)}finally{s.f()}return l.highlighted=Object.keys(l.highlights),l;case"HIDE":var d,b=t.payload.convertedHighlights,f=Object(r.a)(Object(r.a)({},e),{},{highlights:Object(r.a)({},e.highlights),type:null}),p=Object(i.a)(b);try{for(p.s();!(d=p.n()).done;){var h=d.value;h in f.highlights&&delete f.highlights[h]}}catch(g){p.e(g)}finally{p.f()}return f.highlighted=Object.keys(f.highlights),f;case"SET_PERMANENT":return Object(r.a)(Object(r.a)({},e),{},{highlightedPermanently:t.payload});case"UNSET_PERMANENT":return Object(r.a)(Object(r.a)({},e),{},{highlightedPermanently:[]});default:throw new Error("unknown action type: ".concat(t.type))}}var u={highlights:{},highlighted:[],highlightedPermanently:[],type:null};function HighlightProvider(e){var t=Object(o.useReducer)(highlightReducer,u),n=Object(a.a)(t,2),i=n[0],r=n[1],l=Object(o.useMemo)((function(){return{highlight:i,dispatch:r}}),[i]);return Object(c.jsx)(s.Provider,{value:l,children:e.children})}function useHighlightData(){return Object(o.useContext)(s)}function useHighlight(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!Array.isArray(e))throw new Error("highlights must be an array");var n=useHighlightData(),a=Object(o.useMemo)((function(){var t,n=[],a=Object(i.a)(e);try{for(a.s();!(t=a.n()).done;){var r=t.value;if("string"!==typeof r&&"number"!==typeof r)throw new Error("highlight key must be a string or number");""!==r&&n.push(String(r))}}catch(o){a.e(o)}finally{a.f()}return n}),[e]);Object(o.useEffect)((function(){return function(){n.dispatch({type:"HIDE",payload:{convertedHighlights:a}}),n.dispatch({type:"UNSET_PERMANENT"})}}),[]);var r=Object(o.useMemo)((function(){return n.highlight.highlighted.some((function(e){return a.includes(e)}))}),[n.highlight.highlighted,a]),c=Object(o.useMemo)((function(){return n.highlight.highlightedPermanently.some((function(e){return a.includes(e)}))}),[n.highlight.highlightedPermanently,a]),l=Object(o.useCallback)((function(){n.dispatch({type:"SHOW",payload:{convertedHighlights:a,type:t}})}),[n,a,t]),s=Object(o.useCallback)((function(){n.dispatch({type:"HIDE",payload:{convertedHighlights:a}})}),[n,a]),u=Object(o.useCallback)((function(e){n.dispatch({type:"SHOW",payload:{convertedHighlights:[],id:e}})}),[n]),d=Object(o.useCallback)((function(e){n.dispatch({type:"HIDE",payload:{convertedHighlights:[],id:e}})}),[n]),b=Object(o.useCallback)((function(e){e&&(e.preventDefault(),e.stopPropagation()),c?n.dispatch({type:"UNSET_PERMANENT"}):n.dispatch({type:"SET_PERMANENT",payload:a})}),[n,a,c]),f={onMouseEnter:l,onMouseLeave:s},p={onClick:b};return{isActive:r,show:l,hide:s,onHover:f,onClick:p,isActivePermanently:c,click:b,add:u,remove:d}}},212:function(e,t,n){"use strict";n.d(t,"h",(function(){return exportAsSVG})),n.d(t,"d",(function(){return exportAsJSON})),n.d(t,"f",(function(){return exportAsNMRE})),n.d(t,"g",(function(){return exportAsPng})),n.d(t,"b",(function(){return copyPNGToClipboard})),n.d(t,"c",(function(){return copyTextToClipboard})),n.d(t,"a",(function(){return copyHTMLToClipboard})),n.d(t,"e",(function(){return exportAsMatrix}));var a=n(91),i=n(62),r=n.n(i),o=n(89),c=n(615),l=n(219),s=n.n(l);function copyFormattedHtml(e){var t=document.createElement("div");t.innerHTML=e,t.style.position="fixed",t.style.pointerEvents="none",t.style.opacity=0;var n=Array.prototype.slice.call(document.styleSheets).filter((function(e){return!e.disabled}));document.body.appendChild(t),window.getSelection().removeAllRanges();var a=document.createRange();a.selectNode(t),window.getSelection().addRange(a),document.execCommand("copy");for(var i=0;i<n.length;i++)n[i].disabled=!0;document.execCommand("copy");for(var r=0;r<n.length;r++)n[r].disabled=!1;document.body.removeChild(t)}function copyHTMLToClipboard(e){return _copyHTMLToClipboard.apply(this,arguments)}function _copyHTMLToClipboard(){return(_copyHTMLToClipboard=Object(o.a)(r.a.mark((function _callee3(e){return r.a.wrap((function _callee3$(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,copyFormattedHtml(e),t.abrupt("return",!0);case 5:return t.prev=5,t.t0=t.catch(0),t.abrupt("return",!1);case 8:case"end":return t.stop()}}),_callee3,null,[[0,5]])})))).apply(this,arguments)}function copyTextToClipboard(e){return _copyTextToClipboard.apply(this,arguments)}function _copyTextToClipboard(){return(_copyTextToClipboard=Object(o.a)(r.a.mark((function _callee4(e){return r.a.wrap((function _callee4$(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,navigator.clipboard.writeText(e);case 3:return t.abrupt("return",!0);case 6:return t.prev=6,t.t0=t.catch(0),t.abrupt("return",!1);case 9:case"end":return t.stop()}}),_callee4,null,[[0,6]])})))).apply(this,arguments)}function exportAsJSON(e){return _exportAsJSON.apply(this,arguments)}function _exportAsJSON(){return(_exportAsJSON=Object(o.a)(r.a.mark((function _callee5(e){var t,n,a,i,o,l,u,d=arguments;return r.a.wrap((function _callee5$(r){for(;;)switch(r.prev=r.next){case 0:if(t=d.length>1&&void 0!==d[1]?d[1]:"experiment",n=d.length>2&&void 0!==d[2]?d[2]:0,a=d.length>3&&void 0!==d[3]&&d[3],i=JSON.stringify(e,(function(e,t){return ArrayBuffer.isView(t)?Array.from(t):t}),n),a){r.next=9;break}o=new Blob([i],{type:"text/plain"}),Object(c.saveAs)(o,"".concat(t,".nmrium")),r.next=21;break;case 9:return r.prev=9,(l=new s.a).file("".concat(t,".nmrium"),i),r.next=14,l.generateAsync({type:"blob",compression:"DEFLATE",compressionOptions:{level:9}});case 14:u=r.sent,Object(c.saveAs)(u,"".concat(t,".nmrium")),r.next=21;break;case 18:r.prev=18,r.t0=r.catch(9),console.log(r.t0);case 21:case"end":return r.stop()}}),_callee5,null,[[9,18]])})))).apply(this,arguments)}function exportAsMatrix(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"experiment",a=(t.from,t.to,t.nbPoints,JSON.stringify(e,(function(e,t){return ArrayBuffer.isView(t)?Array.from(t):t}),2)),i=new Blob([a],{type:"text/plain"});Object(c.saveAs)(i,"".concat(n,".tsv"))}function exportAsNMRE(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"experiment";e.generateAsync({type:"blob"}).then((function(e){Object(c.saveAs)(e,"".concat(t,".zip"))}))}function exportAsSVG(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"experiment",t=arguments.length>1?arguments[1]:void 0,n=getBlob(t),a=n.blob;Object(c.saveAs)(a,"".concat(e,".svg"))}function exportAsPng(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"experiment",t=arguments.length>1?arguments[1]:void 0,n=getBlob(t),a=n.blob,i=n.width,l=n.height;try{var s=document.createElement("canvas");s.width=i,s.height=l;var u=s.getContext("2d");u.fillStyle="white",u.fillRect(0,0,s.width,s.height);var d=new Image,b=URL.createObjectURL(a);d.onload=Object(o.a)(r.a.mark((function _callee(){var t;return r.a.wrap((function _callee$(n){for(;;)switch(n.prev=n.next){case 0:u.drawImage(d,0,0),t=s.toDataURL("image/png",1),Object(c.saveAs)(t,"".concat(e,".png")),URL.revokeObjectURL(t);case 4:case"end":return n.stop()}}),_callee)}))),d.src=b}catch(f){console.log(f)}}function copyDataURLCliboard(e){var t=document.createElement("img");t.src=e,t.style.position="fixed",t.style.pointerEvents="none",t.style.opacity=0,document.body.appendChild(t);var n=document.createRange();n.selectNode(t),window.getSelection().addRange(n),document.execCommand("Copy"),document.body.removeChild(t)}function copyBlobToCliboard(e){e.toBlob((function(e){var t=new ClipboardItem(Object(a.a)({},e.type,e));navigator.clipboard.write([t]).then((function(){console.log("experiment copied.")}),(function(e){console.log(e)}))}))}function copyPNGToClipboard(e){var t=getBlob(e),n=t.blob,a=t.width,i=t.height;try{var c=document.createElement("canvas");c.width=a,c.height=i;var l=c.getContext("2d");l.fillStyle="white",l.fillRect(0,0,c.width,c.height);var s=new Image,u=URL.createObjectURL(n);s.onload=Object(o.a)(r.a.mark((function _callee2(){var e;return r.a.wrap((function _callee2$(t){for(;;)switch(t.prev=t.next){case 0:l.drawImage(s,0,0),e=c.toDataURL("image/png",1),navigator.clipboard.write?copyBlobToCliboard(c):copyDataURLCliboard(e),URL.revokeObjectURL(e);case 4:case"end":return t.stop()}}),_callee2)}))),s.src=u}catch(d){d instanceof ReferenceError&&alert("Your browser does not support this feature, please use Google Chrome"),console.log(d)}}function getBlob(e){var t=document.getElementById(e).cloneNode(!0),n=t.getAttribute("width").replace("px",""),a=t.getAttribute("height").replace("px","");t.querySelectorAll('[data-no-export="true"]').forEach((function(e){return e.remove()}));var i='<svg class="nmr-svg"  viewBox=\'0 0 '.concat(n," ").concat(a,"' width=\"").concat(n,'"  height="').concat(a,'"  version="1.1" xmlns="http://www.w3.org/2000/svg">'),r="".concat(i+"<style>.grid line,.grid path{stroke:none;} .peaks-text{fill:#730000} .x path{stroke-width:1px} .x text{\n    font-size: 12px;\n    font-weight: bold;\n  } \n \n  .nmr-svg,.contours{\n    background-color:white;\n    fill:white;\n  }\n  \n\n  \n  </style>"+t.innerHTML,"</svg>");return{blob:new Blob([r],{type:"image/svg+xml"}),width:n,height:a}}},222:function(e,t,n){"use strict";var a={};n.r(a),n.d(a,"id",(function(){return ha})),n.d(a,"name",(function(){return ga})),n.d(a,"apply",(function(){return apply})),n.d(a,"isApplicable",(function(){return isApplicable})),n.d(a,"reduce",(function(){return reduce}));var i={};n.r(i),n.d(i,"id",(function(){return ma})),n.d(i,"name",(function(){return ja})),n.d(i,"apply",(function(){return autoPhaseCorrection_apply})),n.d(i,"isApplicable",(function(){return autoPhaseCorrection_isApplicable})),n.d(i,"reduce",(function(){return autoPhaseCorrection_reduce}));var r={};n.r(r),n.d(r,"id",(function(){return Ca})),n.d(r,"name",(function(){return Da})),n.d(r,"baselineAlgorithms",(function(){return Sa})),n.d(r,"apply",(function(){return baselineCorrection_apply})),n.d(r,"isApplicable",(function(){return baselineCorrection_isApplicable})),n.d(r,"reduce",(function(){return baselineCorrection_reduce}));var o={};n.r(o),n.d(o,"id",(function(){return Ta})),n.d(o,"name",(function(){return Ma})),n.d(o,"apply",(function(){return centerMean_apply})),n.d(o,"isApplicable",(function(){return centerMean_isApplicable})),n.d(o,"reduce",(function(){return centerMean_reduce}));var c={};n.r(c),n.d(c,"id",(function(){return Aa})),n.d(c,"name",(function(){return Ea})),n.d(c,"apply",(function(){return digitalFilter_apply})),n.d(c,"isApplicable",(function(){return digitalFilter_isApplicable})),n.d(c,"reduce",(function(){return digitalFilter_reduce}));var l={};n.r(l),n.d(l,"id",(function(){return Pa})),n.d(l,"name",(function(){return Ia})),n.d(l,"apply",(function(){return equallySpaced_apply})),n.d(l,"isApplicable",(function(){return equallySpaced_isApplicable})),n.d(l,"reduce",(function(){return equallySpaced_reduce}));var s={};n.r(s),n.d(s,"id",(function(){return Fa})),n.d(s,"name",(function(){return _a})),n.d(s,"apply",(function(){return fft_apply})),n.d(s,"isApplicable",(function(){return fft_isApplicable})),n.d(s,"reduce",(function(){return fft_reduce}));var u={};n.r(u),n.d(u,"id",(function(){return Ra})),n.d(u,"name",(function(){return Na})),n.d(u,"apply",(function(){return fromTo_apply})),n.d(u,"isApplicable",(function(){return fromTo_isApplicable})),n.d(u,"reduce",(function(){return fromTo_reduce}));var d={};n.r(d),n.d(d,"id",(function(){return La})),n.d(d,"name",(function(){return za})),n.d(d,"apply",(function(){return lineBroadening_apply})),n.d(d,"isApplicable",(function(){return lineBroadening_isApplicable})),n.d(d,"reduce",(function(){return lineBroadening_reduce}));var b={};n.r(b),n.d(b,"id",(function(){return Ha})),n.d(b,"name",(function(){return Ba})),n.d(b,"apply",(function(){return pareto_apply})),n.d(b,"isApplicable",(function(){return pareto_isApplicable})),n.d(b,"reduce",(function(){return pareto_reduce}));var f={};n.r(f),n.d(f,"id",(function(){return Xa})),n.d(f,"name",(function(){return Va})),n.d(f,"apply",(function(){return phaseCorrection_apply})),n.d(f,"isApplicable",(function(){return phaseCorrection_isApplicable})),n.d(f,"reduce",(function(){return phaseCorrection_reduce}));var p={};n.r(p),n.d(p,"id",(function(){return Ya})),n.d(p,"name",(function(){return Za})),n.d(p,"apply",(function(){return shiftX_apply})),n.d(p,"isApplicable",(function(){return shiftX_isApplicable})),n.d(p,"reduce",(function(){return shiftX_reduce}));var h={};n.r(h),n.d(h,"id",(function(){return Ua})),n.d(h,"name",(function(){return Ka})),n.d(h,"apply",(function(){return standardDeviation_apply})),n.d(h,"isApplicable",(function(){return standardDeviation_isApplicable})),n.d(h,"reduce",(function(){return standardDeviation_reduce}));var g={};n.r(g),n.d(g,"id",(function(){return Wa})),n.d(g,"name",(function(){return Ga})),n.d(g,"apply",(function(){return zeroFilling_apply})),n.d(g,"isApplicable",(function(){return zeroFilling_isApplicable})),n.d(g,"reduce",(function(){return zeroFilling_reduce}));var m={};n.r(m),n.d(m,"id",(function(){return qa})),n.d(m,"name",(function(){return Ja})),n.d(m,"apply",(function(){return filter2d_shiftX_apply})),n.d(m,"isApplicable",(function(){return filter2d_shiftX_isApplicable})),n.d(m,"reduce",(function(){return filter2d_shiftX_reduce}));var j={};n.r(j),n.d(j,"id",(function(){return $a})),n.d(j,"name",(function(){return Qa})),n.d(j,"apply",(function(){return shiftY_apply})),n.d(j,"isApplicable",(function(){return shiftY_isApplicable})),n.d(j,"reduce",(function(){return shiftY_reduce}));var v=n(6),O=n(42),x=n(15),y=n(12),k=n(183),C=n.n(k),D=n(1),S=n(536),w=n.n(S),T=n(537),M=n(775),A=n(776);function checkModifierKeyActivated(e){for(var t=0,n=["Alt","AltGraph","CapsLock","Control","Meta","NumLocK","ScrollLock","Shift","OS"];t<n.length;t++){var a=n[t];if(e.getModifierState(a))return!0}return!1}var E=n(786),P=n(787),I=n(255),F=n.n(I),_=n(203),R=n.n(_),N=n(3),L=Object(D.createContext)(),z={step:"initial",brush:{start:null,end:null}},H=[];function BrushTracker(e){var t=e.children,n=e.className,a=e.style,i=e.onBrush,r=e.onZoom,o=e.onDoubleClick,c=e.onClick,l=e.noPropagation,s=Object(D.useReducer)(reducer,z),u=Object(O.a)(s,2),d=u[0],b=u[1],f=Object(D.useState)(),p=Object(O.a)(f,2),h=p[0],g=p[1],m=Object(D.useCallback)((function(e){return 0===e.button&&(l&&e.stopPropagation(),b({type:"DOWN",shiftKey:e.shiftKey,altKey:e.altKey,screenX:e.screenX,screenY:e.screenY,clientX:e.clientX,clientY:e.clientY,boundingRect:e.currentTarget.getBoundingClientRect()}),g(e.timeStamp)),!1}),[l]),j=Object(D.useCallback)((function(e){e.persist();var t=e.timeStamp,n=e.currentTarget.getBoundingClientRect(),a=e.clientX-n.x,i=e.clientY-n.y,r=F()((function(){t-h<=150&&1===H.length&&c(Object(v.a)(Object(v.a)({},e),{},{x:a,y:i})),H=[]}),200);H.push(r),r(),H.length>1&&(R()(H,(function(e){return e.cancel()})),H=[],o(Object(v.a)(Object(v.a)({},e),{},{x:a,y:i})))}),[h,c,o]),x=Object(D.useCallback)((function(e){var t=e.currentTarget.getBoundingClientRect(),n=e.clientX-t.x,a=e.clientY-t.y,i=e.deltaY,o=e.deltaX,c=e.shiftKey,l=e.deltaMode;r({deltaY:i||o,shiftKey:c,deltaMode:l,x:n,y:a})}),[r]);Object(D.useEffect)((function(){var e=d.step,t=d.startX,n=d.endX;"end"===e&&Math.abs(t-n)>5&&(i(d),b({type:"DONE"}))}),[i,d]);var y=Object(D.useCallback)((function(e){b({type:"MOVE",screenX:e.screenX,screenY:e.screenY,clientX:e.clientX,clientY:e.clientY})}),[]),k=Object(D.useCallback)((function(e){return b({type:"UP",clientX:e.clientX,clientY:e.clientY}),!1}),[]);return Object(N.jsx)(L.Provider,{value:d,children:Object(N.jsx)("div",{className:n,style:a,onMouseDown:m,onMouseUp:k,onMouseMove:y,onClick:j,onWheel:x,children:t})})}function reducer(e,t){switch(t.type){case"UP":if("brushing"===e.step||"start"===e.step){var n=t.clientX,a=t.clientY;return Object(v.a)(Object(v.a)({},e),{},{endX:n-e.boundingRect.x,endY:a-e.boundingRect.y,step:"start"===e.step?"initial":"end"})}return e;case"DOWN":if("initial"===e.step||"end"===e.step){var i=t.screenX,r=t.screenY,o=t.clientX,c=t.clientY,l=t.boundingRect,s=t.shiftKey,u=t.altKey,d=o-l.x,b=c-l.y;return Object(v.a)(Object(v.a)({},e),{},{shiftKey:s,altKey:u,startX:d,startY:b,startScreenX:i,startScreenY:r,startClientX:o,startClientY:c,boundingRect:l,step:"start"})}return e;case"MOVE":if("start"===e.step||"brushing"===e.step){var f=t.clientX,p=t.clientY;return Object(v.a)(Object(v.a)({},e),{},{step:"brushing",endX:f-e.boundingRect.x,endY:p-e.boundingRect.y})}return e;case"DONE":if("end"===e.step)return Object(v.a)(Object(v.a)({},e),{},{step:"initial"});break;default:return e}}BrushTracker.defaultProps={onBrush:function onBrush(){return null},onZoom:function onZoom(){return null},onDoubleClick:function onDoubleClick(){return null},onClick:function onClick(){return null}};var B=Object(D.createContext)(),X=B.Provider;function MouseTracker(e){var t=e.children,n=e.className,a=e.style,i=e.noPropagation,r=Object(D.useState)(null),o=Object(O.a)(r,2),c=o[0],l=o[1],s=Object(D.useCallback)((function(e){var t=e.currentTarget.getBoundingClientRect(),n=e.clientX-t.x,a=e.clientY-t.y;l({x:n,y:a}),i&&e.stopPropagation()}),[i]),u=Object(D.useCallback)((function(e){l(null),i&&e.stopPropagation()}),[i]);return Object(N.jsx)(X,{value:c,children:Object(N.jsx)("div",{className:n,style:a,onMouseMove:s,onMouseLeave:u,children:t})})}var V=Object(D.createContext)(),Y=V.Provider;function useChartData(){return Object(D.useContext)(V)}var Z=Object(D.createContext)(),U=Z.Provider;function useDispatch(){return Object(D.useContext)(Z)}var K=Object(D.createContext)(),W=K.Provider;function usePreferences(){return Object(D.useContext)(K)}var G=Object(D.createContext)(),q=G.Provider;function useScale(){return Object(D.useContext)(G)}var J={TOP_LEFT:"top left",TOP_CENTER:"top center",TOP_RIGHT:"top right",MIDDLE_LEFT:"middle left",MIDDLE:"middle",MIDDLE_RIGHT:"middle right",BOTTOM_LEFT:"bottom left",BOTTOM_CENTER:"bottom center",BOTTOM_RIGHT:"bottom right"},$="info",Q="success",ee="error",te="progress_indicator",ne="fade",ae="scale",ie=Object(D.createContext)(),re=ie.Provider,oe=function useModal(){return Object(D.useContext)(ie)},ce={outerContainer:{position:"fixed",top:0,right:0,bottom:0,left:0,backgroundColor:"rgba(255,255,255,0.8)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1},innerContainer:{boxSizing:"initial",backgroundColor:"#fff",boxShadow:"0 0 0 0, 0 8px 16px rgba(0,0,0,.30)",display:"flex",flexDirection:"column",minWidth:"300px",minHeight:"140px",justifyContent:"space-between",borderRadius:"5px"}},le=function Modal(e){var t=e.children,n=e.open,a=e.onClose,i=e.style,r=Object(D.useCallback)((function(e){a(e)}),[a]);return Object(D.useEffect)((function(){!1===n&&r()}),[r,n]),n&&Object(N.jsx)("div",{style:ce.outerContainer,onClick:r,children:Object(N.jsx)("div",{style:Object(v.a)(Object(v.a)({},ce.innerContainer),i),onClick:function onClick(e){e.preventDefault(),e.stopPropagation()},children:t})})};le.defaultProps={onClose:function onClose(){return null},open:!1};var se,ue,de=le,be=n(91),fe=n(4),pe=n(432),he=n(785),ge=n(182),me=n(788),je=(se={},Object(be.a)(se,ne,{transition:"opacity ".concat(250,"ms ease"),opacity:0}),Object(be.a)(se,ae,{transform:"scale(1)",transition:"all ".concat(250,"ms ease-in-out")}),se),ve=(ue={},Object(be.a)(ue,ne,{entering:{opacity:0},entered:{opacity:1}}),Object(be.a)(ue,ae,{entering:{transform:"scale(0)"},entered:{transform:"scale(1)"},exiting:{transform:"scale(0)"},exited:{transform:"scale(1)"}}),ue),Oe=function Transtion(e){var t=e.children,n=e.type,a=e.transitionStyles,i=Object(ge.a)(e,["children","type","transitionStyles"]),r=Object(D.useRef)(null);return Object(N.jsx)(me.a,Object(v.a)(Object(v.a)({nodeRef:r},i),{},{timeout:250,children:function children(e){return Object(N.jsx)("div",{ref:r,style:Object(v.a)(Object(v.a)(Object(v.a)({},je[n]),a[n][e]),a.default),children:t})}}))};Oe.defaultProps={transitionStyles:ve};var xe=Oe;var ye,ke=function Wrapper_Wrapper(e){var t=e.children,n=e.options.position,a=Object(ge.a)(e,["children","options"]),i=Object(D.useMemo)((function(){return function getStyles(e,t){var n=Object(v.a)({position:"fixed",display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",pointerEvents:"none",overflow:"visible"},t.containerStyle?{top:"".concat(t.containerStyle.top,"px"),left:"".concat(t.containerStyle.left,"px"),height:"".concat(t.containerStyle.height,"px"),width:"".concat(t.containerStyle.width,"px")}:{width:"100%",height:"100%"});switch(e){case J.TOP_LEFT:return Object(v.a)(Object(v.a)({},n),{},{justifyContent:"flex-start",alignItems:"flex-start"});case J.TOP_CENTER:return Object(v.a)(Object(v.a)({},n),{},{justifyContent:"flex-start"});case J.TOP_RIGHT:return Object(v.a)(Object(v.a)({},n),{},{justifyContent:"flex-start",alignItems:"flex-end"});case J.MIDDLE_LEFT:return Object(v.a)(Object(v.a)({},n),{},{justifyContent:"center",alignItems:"flex-start"});case J.MIDDLE:return Object(v.a)(Object(v.a)({},n),{},{justifyContent:"center"});case J.MIDDLE_RIGHT:return Object(v.a)(Object(v.a)({},n),{},{justifyContent:"center",alignItems:"flex-end"});case J.BOTTOM_LEFT:return Object(v.a)(Object(v.a)({},n),{},{justifyContent:"flex-end",alignItems:"flex-start"});case J.BOTTOM_CENTER:return Object(v.a)(Object(v.a)({},n),{},{justifyContent:"flex-end"});case J.BOTTOM_RIGHT:return Object(v.a)(Object(v.a)({},n),{},{justifyContent:"flex-end",alignItems:"flex-end"});default:return n}}(n,a)}),[n,a]);return t.length>0&&Object(N.jsx)("div",Object(v.a)(Object(v.a)({style:i},a),{},{children:t}))},Ce=n(5),De=Object(y.css)(ye||(ye=Object(x.a)(["\n  display: flex;\n  flex-direction: column;\n  border-top: 10px solid #ed0000;\n  flex: 1;\n  border-radius: 5px;\n\n  .message {\n    font-weight: bold;\n    font-size: 14px;\n    text-align: center;\n    color: #af0000;\n    text-align: center;\n    padding: 35px;\n    flex: 1;\n  }\n  .buttons-container {\n    display: flex;\n    align-items: flex-end;\n    justify-content: flex-end;\n    padding: 5px;\n    border-top: 1px solid #efefef;\n\n    button:first-of-type {\n      border-radius: 5px 0 0 5px;\n      border-weight: 0 1px 0 0;\n    }\n    button:last-child {\n      border-radius: 0px 5px 5px 0px;\n      border-weight: 0 0 0 1px;\n    }\n    button {\n      border: 1px solid #dcdcdc;\n      background-color: white;\n      display: inline-block;\n      cursor: pointer;\n      color: #363636;\n      font-weight: bold;\n      padding: 6px 24px;\n      text-decoration: none;\n    }\n    button:hover {\n      background: -webkit-gradient(\n        linear,\n        left top,\n        left bottom,\n        color-stop(0.05, #f6f6f6),\n        color-stop(1, #ffffff)\n      );\n      background: -moz-linear-gradient(top, #f6f6f6 5%, #ffffff 100%);\n      background: -webkit-linear-gradient(top, #f6f6f6 5%, #ffffff 100%);\n      background: -o-linear-gradient(top, #f6f6f6 5%, #ffffff 100%);\n      background: -ms-linear-gradient(top, #f6f6f6 5%, #ffffff 100%);\n      background: linear-gradient(to bottom, #f6f6f6 5%, #ffffff 100%);\n      filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#f6f6f6', endColorstr='#ffffff',GradientType=0);\n      background-color: #f6f6f6;\n    }\n  }\n"]))),Se=function ConfirmationDialog(e){var t=e.style,n=e.buttons,a=e.onClose,i=e.message,r=Object(D.useCallback)((function(e,t){var n=t.handler;(void 0===n?function(){return null}:n)(e),a()}),[a]);return Object(Ce.c)("div",{style:t,css:De,children:[Object(Ce.b)("p",{className:"message",children:i}),Object(Ce.b)("div",{className:"buttons-container",children:n.map((function(e){return Object(Ce.b)("button",{type:"button",onClick:function onClick(t){return r(t,e)},style:e.style&&e.style,children:e.text},e.text)}))})]})};Se.defaultProps={buttons:[],style:{}};var we,Te,Me=Se,Ae=(we={},Object(be.a)(we,ne,{entering:{opacity:0},entered:{opacity:1}}),Object(be.a)(we,ae,{entering:{transform:"scale(0)"},entered:{transform:"scale(1)"},exiting:{transform:"scale(0)"},exited:{transform:"scale(0)"}}),we);function Provider(e){var t=e.children,n=e.style,a=e.offset,i=e.position,r=e.transition,o=e.wrapperRef,c=Object(D.useRef)(),l=Object(D.useState)(),s=Object(O.a)(l,2),u=s[0],d=s[1];Object(D.useEffect)((function(){c.current=document.createElement("div");var e=c.current;return o&&o.appendChild(e),function(){e&&o&&o.removeChild(e)}}),[o]);var b=function remove(){d(null)},f=Object(D.useMemo)((function(){return o?o.getBoundingClientRect():{top:0,left:0,width:window.innerWidth,height:window.innerHeight}}),[o]),p=Object(D.useCallback)((function(){b()}),[]),h=Object(D.useCallback)((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={component:e,options:Object(v.a)({isBackgroundBlur:!0,enableResizing:!1},t),close:function(){return b()}};return d(n),n.options.onOpen&&n.options.onOpen(),n}),[]),g=Object(D.useCallback)((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{enableResizing:!1},n={component:Object(Ce.b)(Me,Object(v.a)({},e)),options:Object(v.a)({isBackgroundBlur:!0},t),close:function(){return b()}};return d(n),n.options.onOpen&&n.options.onOpen(),n}),[]);Object(D.useEffect)((function(){var e=function keyHandler(e){["Escape","Esc"].includes(e.key)&&p()};return document.addEventListener("keydown",e,!1),function(){return document.removeEventListener("keydown",e,!1)}}),[p]);var m=Object(y.css)(Te||(Te=Object(x.a)(["\n    position: absolute;\n    left: 0;\n    top: 0;\n    bottom: 0;\n    right: 0;\n    z-index: 0;\n\n    .handle {\n      cursor: move;\n    }\n\n    .rnd-container {\n      box-sizing: initial;\n      background-color: #fff;\n      box-shadow: 0 0 0 0, 0 8px 16px rgba(0, 0, 0, 0.3);\n      borderradius: 5px;\n    }\n  "]))),j=u&&u.options.isBackgroundBlur?{backgroundColor:"rgba(255,255,255,0.8)"}:{pointerEvents:"none"};return Object(Ce.c)(re,{value:{show:h,close:function close(){p()},modal:u,showConfirmDialog:g},children:[t,c.current&&Object(fe.createPortal)(Object(Ce.b)(D.Fragment,{children:u?Object(Ce.b)("div",{css:m,style:Object(v.a)({},j),children:Object(Ce.b)(he.a,{appear:!0,options:{position:u.options.position?u.options.position:i},containerStyle:f,component:ke,children:Object(Ce.b)(xe,{type:u.options.transition?u.options.transition:r,transitionStyles:Object(v.a)(Object(v.a)({},Ae),{},{default:{width:u.options.width?"".concat(u.options.width,"px"):"auto"},height:u.options.height?"".concat(u.options.height,"px"):"auto"}),children:Object(Ce.b)(pe.a,{default:{width:u.options.width?u.options.width:"auto",height:u.options.height?u.options.height:"auto",x:0,y:0},className:"rnd-container",style:Object(v.a)(Object(v.a)({},n),{},{margin:a,pointerEvents:"all",position:"none",userSelect:"none"}),enableResizing:u.options.enableResizing,dragHandleClassName:"handle",enableUserSelectHack:!1,children:u.options&&Object(D.cloneElement)(u.component,Object(v.a)(Object(v.a)({},u.options),{},{onClose:p,style:{cursor:"default"}}))})},u.id)},J[u.options.transition?u.options.transition:r])}):null}),c.current)]})}Provider.defaultProps={offset:"10px",position:J.CENTER,transition:ae,wrapperRef:null,style:{}};var Ee,Pe=Provider,Ie=Object(D.createContext)({open:function open(){return null}}),Fe=Ie.Provider;function useLoader(){return Object(D.useContext)(Ie)}var _e=Object(y.css)(Ee||(Ee=Object(x.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background-color: rgba(255, 255, 255, 0.25);\n  height: 100%;\n  flex-direction: column;\n  user-select: none;\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  outline: 10px dashed rgba(0, 0, 0, 0.3);\n  outline-offset: -10px;\n  padding-left: 20px;\n  padding-right: 20px;\n\n  p {\n    padding: 15px 30px;\n    background-color:rgba(0, 0, 0, 0.5);\n    border-radius: 39px;\n    color: white;\n    font-size: x-large;\n    font-weight: bold;\n\n  }\n}\n"])));var Re,Ne=function NoData(e){var t=e.isEmpty,n=void 0===t||t,a=e.emptyText,i=void 0===a?"Drag and drop here a JCAMP-DX, zipped Bruker folder, Jeol jdf or NMRium file":a,r=useLoader(),o=Object(D.useCallback)((function(){r.open()}),[r]);return n?Object(Ce.b)("div",{css:_e,onClick:o,children:Object(Ce.b)("p",{children:i})}):null},Le=Object(y.css)(Re||(Re=Object(x.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background-color: rgba(255, 255, 255, 0.25);\n  height: 100%;\n  flex-direction: column;\n  user-select: none;\n  position: absolute;\n  width: 100%;\n\n  svg {\n    animation-duration: 0.5s;\n    animation-name: spinAnimation;\n    animation-iteration-count: infinite;\n    animation-fill-mode: forwards;\n    animation-direction: inherit;\n    animation-timing-function: linear;\n    animation-duration: 1s;\n    width: 100px;\n    height: 100px;\n  }\n\n  @keyframes spinAnimation {\n    from {\n      transform: rotate(0deg);\n    }\n\n    to {\n      transform: rotate(360deg);\n    }\n  }\n"])));function DefaultSpinnerComponent(){return Object(Ce.c)("div",{css:Le,children:[Object(Ce.b)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 841.9 595.3",children:Object(Ce.c)("g",{fill:"#61DAFB",children:[Object(Ce.b)("path",{d:"M666.3 296.5c0-32.5-40.7-63.3-103.1-82.4 14.4-63.6 8-114.2-20.2-130.4-6.5-3.8-14.1-5.6-22.4-5.6v22.3c4.6 0 8.3.9 11.4 2.6 13.6 7.8 19.5 37.5 14.9 75.7-1.1 9.4-2.9 19.3-5.1 29.4-19.6-4.8-41-8.5-63.5-10.9-13.5-18.5-27.5-35.3-41.6-50 32.6-30.3 63.2-46.9 84-46.9V78c-27.5 0-63.5 19.6-99.9 53.6-36.4-33.8-72.4-53.2-99.9-53.2v22.3c20.7 0 51.4 16.5 84 46.6-14 14.7-28 31.4-41.3 49.9-22.6 2.4-44 6.1-63.6 11-2.3-10-4-19.7-5.2-29-4.7-38.2 1.1-67.9 14.6-75.8 3-1.8 6.9-2.6 11.5-2.6V78.5c-8.4 0-16 1.8-22.6 5.6-28.1 16.2-34.4 66.7-19.9 130.1-62.2 19.2-102.7 49.9-102.7 82.3 0 32.5 40.7 63.3 103.1 82.4-14.4 63.6-8 114.2 20.2 130.4 6.5 3.8 14.1 5.6 22.5 5.6 27.5 0 63.5-19.6 99.9-53.6 36.4 33.8 72.4 53.2 99.9 53.2 8.4 0 16-1.8 22.6-5.6 28.1-16.2 34.4-66.7 19.9-130.1 62-19.1 102.5-49.9 102.5-82.3zm-130.2-66.7c-3.7 12.9-8.3 26.2-13.5 39.5-4.1-8-8.4-16-13.1-24-4.6-8-9.5-15.8-14.4-23.4 14.2 2.1 27.9 4.7 41 7.9zm-45.8 106.5c-7.8 13.5-15.8 26.3-24.1 38.2-14.9 1.3-30 2-45.2 2-15.1 0-30.2-.7-45-1.9-8.3-11.9-16.4-24.6-24.2-38-7.6-13.1-14.5-26.4-20.8-39.8 6.2-13.4 13.2-26.8 20.7-39.9 7.8-13.5 15.8-26.3 24.1-38.2 14.9-1.3 30-2 45.2-2 15.1 0 30.2.7 45 1.9 8.3 11.9 16.4 24.6 24.2 38 7.6 13.1 14.5 26.4 20.8 39.8-6.3 13.4-13.2 26.8-20.7 39.9zm32.3-13c5.4 13.4 10 26.8 13.8 39.8-13.1 3.2-26.9 5.9-41.2 8 4.9-7.7 9.8-15.6 14.4-23.7 4.6-8 8.9-16.1 13-24.1zM421.2 430c-9.3-9.6-18.6-20.3-27.8-32 9 .4 18.2.7 27.5.7 9.4 0 18.7-.2 27.8-.7-9 11.7-18.3 22.4-27.5 32zm-74.4-58.9c-14.2-2.1-27.9-4.7-41-7.9 3.7-12.9 8.3-26.2 13.5-39.5 4.1 8 8.4 16 13.1 24 4.7 8 9.5 15.8 14.4 23.4zM420.7 163c9.3 9.6 18.6 20.3 27.8 32-9-.4-18.2-.7-27.5-.7-9.4 0-18.7.2-27.8.7 9-11.7 18.3-22.4 27.5-32zm-74 58.9c-4.9 7.7-9.8 15.6-14.4 23.7-4.6 8-8.9 16-13 24-5.4-13.4-10-26.8-13.8-39.8 13.1-3.1 26.9-5.8 41.2-7.9zm-90.5 125.2c-35.4-15.1-58.3-34.9-58.3-50.6 0-15.7 22.9-35.6 58.3-50.6 8.6-3.7 18-7 27.7-10.1 5.7 19.6 13.2 40 22.5 60.9-9.2 20.8-16.6 41.1-22.2 60.6-9.9-3.1-19.3-6.5-28-10.2zM310 490c-13.6-7.8-19.5-37.5-14.9-75.7 1.1-9.4 2.9-19.3 5.1-29.4 19.6 4.8 41 8.5 63.5 10.9 13.5 18.5 27.5 35.3 41.6 50-32.6 30.3-63.2 46.9-84 46.9-4.5-.1-8.3-1-11.3-2.7zm237.2-76.2c4.7 38.2-1.1 67.9-14.6 75.8-3 1.8-6.9 2.6-11.5 2.6-20.7 0-51.4-16.5-84-46.6 14-14.7 28-31.4 41.3-49.9 22.6-2.4 44-6.1 63.6-11 2.3 10.1 4.1 19.8 5.2 29.1zm38.5-66.7c-8.6 3.7-18 7-27.7 10.1-5.7-19.6-13.2-40-22.5-60.9 9.2-20.8 16.6-41.1 22.2-60.6 9.9 3.1 19.3 6.5 28.1 10.2 35.4 15.1 58.3 34.9 58.3 50.6-.1 15.7-23 35.6-58.4 50.6zM320.8 78.4z"}),Object(Ce.b)("path",{d:"M520.5 78.1z"})]})}),Object(Ce.b)("p",{children:"Loading ..."})]})}function defaultGetSpinner(){return Object(N.jsx)(DefaultSpinnerComponent,{})}var ze=Object(D.createContext)(defaultGetSpinner),He=ze.Provider;var Be=function Spinner(e){var t=e.isLoading,n=void 0===t||t,a=e.emptyText,i=void 0===a?void 0:a,r=useChartData().data,o=Object(D.useState)(!1),c=Object(O.a)(o,2),l=c[0],s=c[1];Object(D.useEffect)((function(){var e=null;return n||(e=setTimeout((function(){s(!0)}),500)),function(){clearTimeout(e)}}),[n]);var u=Object(D.useContext)(ze);return Object(N.jsxs)(D.Fragment,{children:[n&&u(),l&&!n&&Object(N.jsx)(Ne,{isEmpty:r&&0===r.length,emptyText:i})]})},Xe=n(187),Ve=n(427),Ye=n(765),Ze=n(88),Ue=Object(D.createContext)(),Ke=Ue.Provider;function useGlobal(){return Object(D.useContext)(Ue)}var We={position:"fixed",top:0,left:0,pointerEvents:"none",backgroundColor:"gray",padding:"3px",borderRadius:"2px",color:"white",whiteSpace:"nowrap",fontSize:"10px",fontFamily:"tahoma",textShadow:"none"};function ToolTip(e){var t=e.style,n=e.className,a=e.popupPlacement,i=void 0===a?"right":a,r=e.children,o=e.title,c=e.offset,l=void 0===c?{x:0,y:0}:c,s=Object(D.useRef)(),u=Object(D.useRef)(),d=Object(D.useState)({x:0,y:0}),b=Object(O.a)(d,2),f=b[0],p=b[1],h=Object(D.useState)(!1),g=Object(O.a)(h,2),m=g[0],j=g[1],x=useGlobal().elementsWraperRef;Object(D.useLayoutEffect)((function(){if(m){var e=function getPopupPlacement(){var e,t,n=s.current.getBoundingClientRect(),a=u.current.getBoundingClientRect();switch(i){case"left":e=-a.width,t=n.height/2-n.height/2*a.height/n.height;break;case"right":e=n.width,t=n.height/2-n.height/2*a.height/n.height;break;case"top":e=n.width/2-n.width/2*a.width/n.width,t=-n.height;break;case"bottom":e=n.width/2-n.width/2*a.width/n.width,t=n.height;break;default:e=0,t=0}return{x:e+n.x,y:t+n.y}}();p(e)}}),[i,m]);var y=Object(D.useCallback)((function(){j(!0)}),[]),k=Object(D.useCallback)((function(){j(!1)}),[]);return Object(N.jsxs)(D.Fragment,{children:[Object(N.jsx)("div",{style:Object(v.a)({position:"relative",height:"100%",display:"flex",justifyContent:"center",alignItems:"center"},t.mainContainer),ref:s,onMouseOver:y,onMouseOut:k,children:r}),m&&Object(fe.createPortal)(Object(N.jsx)("div",{ref:u,style:Object(v.a)(Object(v.a)({},We),{},{transform:"translate(".concat(f.x+l.x,"px,").concat(f.y+l.y,"px)"),zIndex:999999999},t.popup),className:n,children:Object(N.jsx)("span",{style:{pointerEvents:"none"},children:o})}),x)]})}ToolTip.defaultProps={style:{popup:{},mainContainer:{}}};var Ge,qe=Object(D.memo)(ToolTip),Je=Object(y.css)(Ge||(Ge=Object(x.a)(["\n  background-color: transparent;\n  border: none;\n  height: 100%;\n  display:flex,\n  justify-content:center;\n  align-items:center;\n\n  svg {\n    fill: #ca0000;\n    font-size: 16px;\n  }\n"])));function CloseButton(e){var t=e.onClick,n=e.popupTitle,a=e.popupPlacement,i=e.className;return Object(Ce.b)("div",{className:i,children:Object(Ce.b)(qe,{title:n,popupPlacement:a,children:Object(Ce.b)("button",{css:Je,type:"button",onClick:t,children:Object(Ce.b)(Ze.G,{})})})})}CloseButton.defaultProps={onClick:function onClick(){return null},popupTitle:"Close",popupPlacement:"left",className:""};var $e,Qe,et=Object(D.memo)(CloseButton),tt=Object(y.css)($e||($e=Object(x.a)(["\n  display: flex;\n  flex-direction: column;\n  width: 900px;\n  height: 400px;\n  padding: 5px;\n  button:focus {\n    outline: none;\n  }\n  .header {\n    height: 24px;\n    border-bottom: 1px solid #f0f0f0;\n    display: flex;\n    span {\n      color: #464646;\n      font-size: 15px;\n      flex: 1;\n    }\n\n    button {\n      background-color: transparent;\n      border: none;\n      svg {\n        height: 16px;\n      }\n    }\n  }\n  .container {\n    overflow-y: auto;\n    background-color: white;\n    padding-top: 10px;\n\n    .row {\n      outline: none;\n      display: flex !important;\n      flex-direction: row;\n      margin: 0;\n      div {\n        flex: 4;\n      }\n      .multiplicity {\n        flex: 2;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n      }\n    }\n\n    .row:nth-child(odd) {\n      background: #fafafa;\n    }\n  }\n"]))),nt=Object(y.css)(Qe||(Qe=Object(x.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-direction: column;\n  user-select: none;\n  width: 900px;\n  height: 400px;\n\n  svg {\n    animation-duration: 0.5s;\n    animation-name: spinAnimation;\n    animation-iteration-count: infinite;\n    animation-fill-mode: forwards;\n    animation-direction: inherit;\n    animation-timing-function: linear;\n    animation-duration: 1s;\n    width: 100px;\n    height: 100px;\n  }\n\n  @keyframes spinAnimation {\n    from {\n      transform: rotate(0deg);\n    }\n\n    to {\n      transform: rotate(360deg);\n    }\n  }\n"])));function MultipletAnalysisModal(e){var t=e.data,n=e.activeSpectrum,a=e.scaleX,i=e.startX,r=e.endX,o=e.onClose,c=Object(D.useState)(),l=Object(O.a)(c,2),s=l[0],u=l[1],d=Object(D.useState)(!1),b=Object(O.a)(d,2),f=b[0],p=b[1],h=Object(D.useState)(!1),g=Object(O.a)(h,2),m=g[0],j=g[1];return Object(D.useEffect)((function(){setTimeout((function(){p(!0)}),400)}),[]),Object(D.useEffect)((function(){if(n&&i&&r&&f){var e=t[n.index],o=e.data,c=o.x,l=o.y,s=e.info,d=a().invert(i),b=a().invert(r),p=Object(Xe.j)(c,{from:d,to:b}),h=p.fromIndex,g=p.toIndex,m={x:c.slice(h,g),y:l.slice(h,g)};try{var v=Object(Ve.a)(m,{frequency:s.originFrequency,takeBestPartMultiplet:!0,symmetrizeEachStep:!0,debug:!0});j(!0),u(v)}catch(O){console.log(O)}}}),[i,r,t,a,n,f]),m?Object(Ce.c)("div",{css:tt,children:[Object(Ce.c)("div",{className:"header handle",children:[Object(Ce.b)("span",{children:"Analyse Multiplet"}),Object(Ce.b)(et,{onClick:o})]}),Object(Ce.b)("div",{className:"container",children:s&&s.debug&&s.debug.steps.map((function(e,t){var n,a;return Object(Ce.c)("div",{className:"row",children:[Object(Ce.b)(Ye.a,{chart:{series:{type:"line",data:e.multiplet}},style:{height:200,width:400,overflow:"auto"}}),Object(Ce.b)("div",{className:"multiplicity",children:Object(Ce.b)("p",{children:s.j[t]?"".concat(null===(n=s.j[t])||void 0===n?void 0:n.multiplicity,": ").concat(null===(a=s.j[t])||void 0===a?void 0:a.coupling.toFixed(3)," Hz"):""})}),Object(Ce.b)(Ye.a,{chart:{series:{type:"line",data:e.errorFunction}},style:{height:200,width:400,overflow:"auto"}})]},t)}))})]}):Object(Ce.c)("div",{css:nt,children:[Object(Ce.b)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 841.9 595.3",children:Object(Ce.c)("g",{fill:"#61DAFB",children:[Object(Ce.b)("path",{d:"M666.3 296.5c0-32.5-40.7-63.3-103.1-82.4 14.4-63.6 8-114.2-20.2-130.4-6.5-3.8-14.1-5.6-22.4-5.6v22.3c4.6 0 8.3.9 11.4 2.6 13.6 7.8 19.5 37.5 14.9 75.7-1.1 9.4-2.9 19.3-5.1 29.4-19.6-4.8-41-8.5-63.5-10.9-13.5-18.5-27.5-35.3-41.6-50 32.6-30.3 63.2-46.9 84-46.9V78c-27.5 0-63.5 19.6-99.9 53.6-36.4-33.8-72.4-53.2-99.9-53.2v22.3c20.7 0 51.4 16.5 84 46.6-14 14.7-28 31.4-41.3 49.9-22.6 2.4-44 6.1-63.6 11-2.3-10-4-19.7-5.2-29-4.7-38.2 1.1-67.9 14.6-75.8 3-1.8 6.9-2.6 11.5-2.6V78.5c-8.4 0-16 1.8-22.6 5.6-28.1 16.2-34.4 66.7-19.9 130.1-62.2 19.2-102.7 49.9-102.7 82.3 0 32.5 40.7 63.3 103.1 82.4-14.4 63.6-8 114.2 20.2 130.4 6.5 3.8 14.1 5.6 22.5 5.6 27.5 0 63.5-19.6 99.9-53.6 36.4 33.8 72.4 53.2 99.9 53.2 8.4 0 16-1.8 22.6-5.6 28.1-16.2 34.4-66.7 19.9-130.1 62-19.1 102.5-49.9 102.5-82.3zm-130.2-66.7c-3.7 12.9-8.3 26.2-13.5 39.5-4.1-8-8.4-16-13.1-24-4.6-8-9.5-15.8-14.4-23.4 14.2 2.1 27.9 4.7 41 7.9zm-45.8 106.5c-7.8 13.5-15.8 26.3-24.1 38.2-14.9 1.3-30 2-45.2 2-15.1 0-30.2-.7-45-1.9-8.3-11.9-16.4-24.6-24.2-38-7.6-13.1-14.5-26.4-20.8-39.8 6.2-13.4 13.2-26.8 20.7-39.9 7.8-13.5 15.8-26.3 24.1-38.2 14.9-1.3 30-2 45.2-2 15.1 0 30.2.7 45 1.9 8.3 11.9 16.4 24.6 24.2 38 7.6 13.1 14.5 26.4 20.8 39.8-6.3 13.4-13.2 26.8-20.7 39.9zm32.3-13c5.4 13.4 10 26.8 13.8 39.8-13.1 3.2-26.9 5.9-41.2 8 4.9-7.7 9.8-15.6 14.4-23.7 4.6-8 8.9-16.1 13-24.1zM421.2 430c-9.3-9.6-18.6-20.3-27.8-32 9 .4 18.2.7 27.5.7 9.4 0 18.7-.2 27.8-.7-9 11.7-18.3 22.4-27.5 32zm-74.4-58.9c-14.2-2.1-27.9-4.7-41-7.9 3.7-12.9 8.3-26.2 13.5-39.5 4.1 8 8.4 16 13.1 24 4.7 8 9.5 15.8 14.4 23.4zM420.7 163c9.3 9.6 18.6 20.3 27.8 32-9-.4-18.2-.7-27.5-.7-9.4 0-18.7.2-27.8.7 9-11.7 18.3-22.4 27.5-32zm-74 58.9c-4.9 7.7-9.8 15.6-14.4 23.7-4.6 8-8.9 16-13 24-5.4-13.4-10-26.8-13.8-39.8 13.1-3.1 26.9-5.8 41.2-7.9zm-90.5 125.2c-35.4-15.1-58.3-34.9-58.3-50.6 0-15.7 22.9-35.6 58.3-50.6 8.6-3.7 18-7 27.7-10.1 5.7 19.6 13.2 40 22.5 60.9-9.2 20.8-16.6 41.1-22.2 60.6-9.9-3.1-19.3-6.5-28-10.2zM310 490c-13.6-7.8-19.5-37.5-14.9-75.7 1.1-9.4 2.9-19.3 5.1-29.4 19.6 4.8 41 8.5 63.5 10.9 13.5 18.5 27.5 35.3 41.6 50-32.6 30.3-63.2 46.9-84 46.9-4.5-.1-8.3-1-11.3-2.7zm237.2-76.2c4.7 38.2-1.1 67.9-14.6 75.8-3 1.8-6.9 2.6-11.5 2.6-20.7 0-51.4-16.5-84-46.6 14-14.7 28-31.4 41.3-49.9 22.6-2.4 44-6.1 63.6-11 2.3 10.1 4.1 19.8 5.2 29.1zm38.5-66.7c-8.6 3.7-18 7-27.7 10.1-5.7-19.6-13.2-40-22.5-60.9 9.2-20.8 16.6-41.1 22.2-60.6 9.9 3.1 19.3 6.5 28.1 10.2 35.4 15.1 58.3 34.9 58.3 50.6-.1 15.7-23 35.6-58.4 50.6zM320.8 78.4z"}),Object(Ce.b)("path",{d:"M520.5 78.1z"})]})}),Object(Ce.b)("p",{children:"Analyse Multiplet in progress. Please wait ..."})]})}MultipletAnalysisModal.defaultProps={onClose:function onClose(){return null}};var at=MultipletAnalysisModal,it=n(206),rt=n(86),ot=n(87),ct={controllers:{mws:{low:2,high:20}},formatting:{nucleus:[{key:"1H",name:"1H",value:"0.00"},{key:"13C",name:"13C",value:"0.00"},{key:"15N",name:"15N",value:"0.00"},{key:"19F",name:"19F",value:"0.00"},{key:"29Si",name:"29Si",value:"0.00"},{key:"31P",name:"31P",value:"0.00"}]}},lt=n(239),st=n.n(lt);function useStateWithLocalStorage(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=Object(D.useState)(localStorage.getItem(e)||"{}"),a=Object(O.a)(n,2),i=a[0],r=a[1];Object(D.useEffect)((function(){localStorage.setItem(e,i)}),[e,i]);var o=Object(D.useCallback)((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=JSON.parse(i);t?st()(n,t,e):n=Object(v.a)(Object(v.a)({},n),e),r(JSON.stringify(n))}),[i]);return[t?C()(JSON.parse(i),t,{}):JSON.parse(i),o]}var ut=function getLocalStorage(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=localStorage.getItem(e);return n&&t?JSON.parse(n):n},dt=function getValue(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return C()(e,t,n)},bt={lowStep:ct.controllers.mws.low,highStep:ct.controllers.mws.high,speedThreshold:3},ft=function(){function Spectrum1DZoomHelper(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(rt.a)(this,Spectrum1DZoomHelper),this.scale=e,this.speedThreshold=t.speedThreshold||bt.speedThreshold,this.slowZoomStep=t.slowZoomStep||bt.lowStep,this.fastZoomStep=t.fastZoomStep||bt.highStep}return Object(ot.a)(Spectrum1DZoomHelper,[{key:"wheel",value:function wheel(e,t){var n=1===Math.abs(e).toString().length?Math.abs(e):Math.abs(e)/100,a=ut("nmr-general-settings"),i=dt(a,"general.controllers.mws.low"),r=dt(a,"general.controllers.mws.high"),o=i?.01*i:.01*this.slowZoomStep,c=r?.05*r:.05*this.fastZoomStep,l=n<=this.speedThreshold?o:c,s=-1===Math.sign(e)?this.scale+l:this.scale-l;this.scale=s>=0||0===s?s:0}},{key:"getScale",value:function getScale(){return this.scale}},{key:"setScale",value:function setScale(e){this.scale=e}}]),Spectrum1DZoomHelper}(),pt={},ht=new ft(.5),gt="HORIZONTAL",mt="VERTICAL",jt="STEP_HROZENTAL";function initZoom1DHandler(e){e.forEach((function(e){pt[e.id]||1!==e.info.dimension||(pt[e.id]=new ft)}))}function Zoom_wheel(e,t,n){var a=n.data,i=n.activeSpectrum,r=n.activeTab,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;i||o?pt[o||i.id].wheel(e,t):a.forEach((function(n){1===n.info.dimension&&r===n.info.nucleus&&pt[n.id].wheel(e,t)}))}function getScaleByID(e){return Object(be.a)({},e,pt[e].getScale(e))}function getScale(e){var t=e.data,n=e.activeTab;return t.reduce((function(e,t){return 1===t.info.dimension&&n===t.info.nucleus&&(e[t.id]=pt[t.id].getScale()),e}),{})}function setScale(e){if("number"===typeof e)Object.keys(pt).forEach((function(t){pt[t].setScale(e)}));else{if("object"!==typeof e)throw Error("scale must be number or Object");Object.keys(e).forEach((function(t){pt[t].setScale(e[t])}))}}function setZoom(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=e.height,i=e.margin,r=e.activeSpectrum;t&&setScale(t);var o=getScale(e);if(e.zoomFactor={scale:o},null===r&&null===n)e.yDomains=Object.keys(e.yDomains).reduce((function(t,n){var r=Object(it.f)(e.originDomain.yDomains[n],[a-i.bottom,i.top]),c=Object(O.a)(e.originDomain.yDomains[n],2),l=c[0],s=c[1],u=Math.max(Math.abs(s),Math.abs(l))===s?0:l,d=it.h.translate(0,(Math.sign(u),r(u))).scale(o[n]).translate(0,-r(0)).rescaleY(r).domain();return t[n]=d,t}),{});else{var c=n||r.id,l=Object(it.f)(e.originDomain.yDomains[c],[a-i.bottom,i.top]),s=it.h.translate(0,l(0)).scale(o[c]).translate(0,-l(0)),u=s.rescaleY(l).domain();e.yDomains=Object(v.a)(Object(v.a)({},e.yDomains),{},Object(be.a)({},c,u))}}function setZoom1D(e,t,n,a){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,r=e.originDomain,o=e.tabActiveSpectrum,c=e.activeTab,l=o[c.split(",")[a]].id;i&&setScale(i);var s=getScaleByID(l);e.zoomFactor={scale:s};var u=Object(it.f)(r.yDomains[l],[t-n,n]),d=it.h.translate(0,u(0)).scale(s[l]).translate(0,-u(0)),b=d.rescaleY(u).domain();e.yDomains[l]=b}function setIntegralZoom(e,t){if(t.activeSpectrum){var n=t.height,a=t.margin;if(t.originIntegralYDomain[t.activeSpectrum.id]){var i=Object(it.f)(t.originIntegralYDomain[t.activeSpectrum.id],[n-a.bottom,a.top]),r=e<.1?.05:e,o=it.h.translate(0,i(0)).scale(r).translate(0,-i(0)).rescaleY(i).domain();t.integralZoomFactor={scale:e};var c=t.activeSpectrum;t.integralsYDomains[c.id]=o}}}var vt=n(194);function getXScale(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=e.width,a=e.margin,i=e.xDomains,r=e.xDomain,o=e.mode,c="RTL"===o?[n-a.right,a.left]:[a.left,n-a.right];return Object(it.f)(t?i[t]:r,c)}function getYScale(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=e.height,a=e.margin,i=e.verticalAlign,r=e.yDomain,o=e.yDomains,c=i.flag&&!i.stacked?(n-30)/2:n-a.bottom-30,l=[];return l=null===t||void 0===o[t]?[0,r[1]]:[0,o[t][1]],Object(it.f)(l,[c,a.top])}var Ot="SET_SCALE",xt={scaleX:null,scaleY:null};function scaleReducer(e,t){switch(t.type){case"SET_X_SCALE":return Object(vt.b)(e,(function(e){e.scaleX=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return getXScale(t,e)}}));case"SET_Y_SCALE":return Object(vt.b)(e,(function(e){e.scaleY=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return getYScale(t,e)}}));case Ot:return Object(vt.b)(e,(function(e){e.scaleX=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return getXScale(t.payload,e)},e.scaleY=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return getYScale(t.payload,e)}}));default:return e}}var yt="INITIATE",kt="LOAD_JSON_FILE",Ct="LOAD_JCAMP_FILE",Dt="LOAD_NMREDATA_FILE",St="LOAD_MOL_FILE",wt="LOAD_ZIP_FILE",Tt="LOAD_JDF_FILE",Mt="ADD_PEAK",At="ADD_PEAKS",Et="DELETE_PEAK_NOTATION",Pt="SHIFT_SPECTRUM",It="SET_X_DOMAIN",Ft="SET_Y_DOMAIN",_t="SET_ORIGINAL_DOMAIN",Rt="SET_WIDTH",Nt="SET_DIMENSIONS",Lt="SET_SELECTED_TOOL",zt="SET_SELECTED_FILTER",Ht="CHANGE_SPECTRUM_SETTING",Bt="FULL_ZOOM_OUT",Xt="CHANGE_VISIBILITY",Vt="CHANGE_PEAKS_MARKERS_VISIBILITY",Yt="CHANGE_ACTIVE_SPECTRUM",Zt="CHANGE_SPECTRUM_COLOR",Ut="ADD_INTEGRAL",Kt="DELETE_INTEGRAL",Wt="TOGGLE_REAL_IMAGINARY_VISIBILITY",Gt="SET_ZOOM_FACTOR",qt="ADD_MOLECULE",Jt="SET_MOLECULE",$t="DELETE_MOLECULE",Qt="SET_CORRELATION",en="SET_CORRELATIONS",tn="SET_CORRELATIONS_MF",nn="SET_CORRELATIONS_TOLERANCE",an="DELETE_SPECTRA",rn="CHANGE_SPECTRUM_DISPLAY_VIEW_MODE",cn="RESIZE_INTEGRAL",ln="BRUSH_END",sn="RESET_X_DOMAIN",un="CHANGE_INTEGRAL_ZOOM",dn="ENABLE_FILTER",bn="DELETE_FILTER",fn="DELETE_SPECTRA_FILTER",pn="APPLY_ZERO_FILLING_FILTER",hn="APPLY_FFT_FILTER",gn="CALCULATE_MANUAL_PHASE_CORRECTION_FILTER",mn="APPLY_MANUAL_PHASE_CORRECTION_FILTER",jn="APPLY_AUTO_PHASE_CORRECTION_FILTER",vn="APPLY_ABSOLUTE_FILTER",On="SET_VERTICAL_INDICATOR_X_POSITION",xn="AUTO_PEAK_PICKING",yn="AUTO_RANGES_DETECTION",kn="AUTO_ZONES_DETECTION",Cn="DELETE_RANGE",Dn="SET_SELECTED_OPTIONS_PANEL",Sn="SET_LOADING_FLAG",wn="RESET_SELECTED_TOOL",Tn="SET_SPECTRUMS_VERTICAL_AlIGN",Mn="CHANGE_INTEGRAL_DATA",An="SET_ACTIVE_TAB",En="CHANGE_INTEGRAL_SUM",Pn="ADD_BASE_LINE_ZONE",In="DELETE_BASE_LINE_ZONE",Fn="APPLY_BASE_LINE_CORRECTION_FILTER",_n="SET_KEY_PREFERENCES",Rn="APPLY_KEY_PREFERENCES",Nn="RESIZE_RANGE",Ln="CHANGE_RANGE_SUM",zn="ADD_RANGE",Hn="SET_2D_LEVEL",Bn="ADD_2D_ZONE",Xn="DELETE_2D_ZONE",Vn="ADD_MISSING_PROJECTION",Yn="SET_FILTER_SNAPSHOT",Zn="CHANGE_RANGE_RELATIVE",Un="CHANGE_RANGE_SIGNAL_VALUE",Kn="CHANGE_RANGE_SIGNAL_KIND",Wn="SAVE_EDITED_RANGE",Gn="UNLINK_RANGE",qn="SET_DIAID_RANGE",Jn="CHANGE_INTEGRAL_RELATIVE",$n="ANALYZE_SPECTRA",Qn="DELETE_ANALYZE_SPECTRA_RANGE",ea="RESIZE_ANALYZE_SPECTRA_RANGE",ta="SET_ANALYZE_SPECTRA_COLUMNS",na="FILTER_SPECTRA_COLUMN",aa="ALIGN_SPECTRA",ia="CHANGE_ZONE_SIGNAL_VALUE",ra="CHANGE_ZONE_SIGNAL_KIND",oa="UNLINK_ZONE",ca="SET_DIAID_ZONE",la="PREDICT_SPECTRA",sa="SET_SPECTRA_SAME_TOP",ua="RESET_SPECTRA_SCALE",da="SET_MOUSE_OVER_DISPLAYER",ba="APPLY_MULTIPLE_SPECTRA_FILTER",fa="ADD_EXCLUSION_ZONE",pa="DELETE_EXCLUSION_ZONE",ha="absolute",ga="Absolute";function apply(e){if(!isApplicable(e))throw new Error("absolute not applicable on this data");e.data.re=Object(Xe.c)(e.data),e.data.im=new Float64Array(0),e.info=Object(v.a)(Object(v.a)({},e.info),{},{isComplex:!1})}function isApplicable(e){return!(!e.info.isComplex||e.info.isFid)}function reduce(){return{once:!1,reduce:null}}var ma="autoPhaseCorrection",ja="Automatic phase correction",va={magnitudeMode:!1,minRegSize:30,maxDistanceToJoin:256};function autoPhaseCorrection_apply(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!autoPhaseCorrection_isApplicable(e))throw new Error("phaseCorrection not applicable on this data");return t=Object.assign({},va,t),Object(Xe.d)(e.data,t)}function autoPhaseCorrection_isApplicable(e){return!(!e.info.isComplex||e.info.isFid)}function autoPhaseCorrection_reduce(e,t){var n=Object.assign({},e);for(var a in n)n[a]+=t[a];return{once:!0,reduce:n}}var Oa=n(768),xa=n(428),ya=n(599),ka=n(429),Ca="baselineCorrection",Da="Baseline correction",Sa={airpls:"airPLS",polynomial:"Polynomial"};function baselineCorrection_apply(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!baselineCorrection_isApplicable(e))throw new Error("baselineCorrection not applicable on this data");var n,a=t.algorithm,i=t.zones,r=e.data,o=r.x,c=r.re;switch(a){case"airpls":n=Object(Oa.a)(o,c,t).corrected;break;case"polynomial":var l=Object(xa.a)({x:o,y:c},{numberOfPoints:4096,zones:i});if(0===i.length){var s=Object(ya.a)(l.x,l.y,t),u=s.regression;n=new Float64Array(o.length);for(var d=0;d<c.length;d++)n[d]=c[d]-u.predict(o[d])}else{var b=new ka.a(o,c,t.degree);n=new Float64Array(o.length);for(var f=0;f<c.length;f++)n[f]=c[f]-b.predict(o[f])}break;default:throw new Error("baselineCorrection: algorithm unknown: ".concat(a))}Object.assign(e.data,{re:n})}function baselineCorrection_isApplicable(e){return!e.info.isFid}function baselineCorrection_reduce(){return{once:!1,reduce:null}}var wa=n(383),Ta="centerMean",Ma="Center Mean";function centerMean_apply(e){var t;if(!centerMean_isApplicable(e))throw new Error("Center Mean is not applicable on this data");for(var n=e.data.re.slice(0),a=null===(t=e.data.im)||void 0===t?void 0:t.slice(0),i=Object(wa.mean)(n),r=Object(wa.mean)(a||[]),o=0;o<n.length;o++)n[o]-=i,a&&(a[o]-=r);e.data.re=n,a&&(e.data.im=a)}function centerMean_isApplicable(e){return!(!e.info.isComplex||e.info.isFid)}function centerMean_reduce(){return{once:!1,reduce:null}}var Aa="digitalFilter",Ea="Digital Filter";function digitalFilter_apply(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!digitalFilter_isApplicable(e))throw new Error("Digital Filter is not applicable on this data");var n=t.digitalFilterValue,a=void 0===n?0:n,i=new Float64Array(e.data.re),r=new Float64Array(e.data.im),o=Math.floor(a),c=0;o+=0;var l=new Float64Array(i.length),s=new Float64Array(r.length);l.set(i.slice(o)),l.set(i.slice(c,o),i.length-o),s.set(r.slice(o)),s.set(r.slice(c,o),r.length-o),e.data.re=l,e.data.im=s}function digitalFilter_isApplicable(e){return!(!e.info.isComplex||!e.info.isFid)}function digitalFilter_reduce(){return{once:!0,reduce:void 0}}var Pa="equallySpaced",Ia="Equally Spaced";function equallySpaced_apply(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!equallySpaced_isApplicable(e))throw new Error("Equally Spaced is not applicable on this data");var n=t.from,a=t.to,i=t.numberOfPoints,r=t.exclusions,o=e.data,c=o.x,l=o.re,s=o.im,u=Object(xa.a)({x:c,y:l},{from:n,to:a,numberOfPoints:i,exclusions:r});if(e.data.x=u.x,e.data.re=u.y,s){var d=Object(xa.a)({x:c,y:l},{from:n,to:a,numberOfPoints:i,exclusions:r});e.data.im=d.y}}function equallySpaced_isApplicable(e){return!(!e.info.isComplex||e.info.isFid)}function equallySpaced_reduce(){return{once:!1,reduce:null}}var Fa="fft",_a="FFT";function fft_apply(e){if(!fft_isApplicable(e))throw new Error("fft not applicable on this data");var t=e.filters.some((function(e){return"digitalFilter"===e.name&&e.flag}));if(Object.assign(e.data,Object(Xe.e)(e.data,{applyZeroShift:!0})),t){var n=e.info.digitalFilter,a=(n-Math.floor(n))*Math.PI*2;Object.assign(e.data,Object(Xe.f)(e.data,0,a))}e.data.x=function generateXAxis(e){for(var t=e.info,n=parseFloat(t.baseFrequency),a=parseFloat(t.frequencyOffset),i=parseFloat(t.spectralWidth),r=a/n,o=.5*i,c=e.data.x.length,l=r-o,s=i/(c-1),u=new Array(c),d=0;d<c;d++)u[d]=l,l+=s;return u}(e),e.info=Object(v.a)(Object(v.a)({},e.info),{},{isFid:!1})}function fft_isApplicable(e){return!(!e.info.isComplex||!e.info.isFid)}function fft_reduce(){return{once:!0,reduce:void 0}}var Ra="fromTo",Na="From/To";function fromTo_apply(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!fromTo_isApplicable(e))throw new Error("From/To filter not applicable on this data");var n=e.data,a=n.x,i=n.re,r=n.im,o=t.from,c=t.to,l=Object(Xe.j)(a,{from:o,to:c}),s=l.fromIndex,u=l.toIndex;e.data.x=a.slice(s,u),e.data.re=i.slice(s,u),r&&(e.data.im=r.slice(s,u))}function fromTo_isApplicable(e){return!(!e.info.isComplex||e.info.isFid)}function fromTo_reduce(e,t){return{once:!0,reduce:t}}var La="lineBroadening",za="Line broadening";function lineBroadening_apply(e,t){if(!lineBroadening_isApplicable(e))throw new Error("lineBroadening not applicable on this data");var n,a=e.info.digitalFilter;n=a>0?Math.floor(a):0;for(var i=e.data.re,r=e.data.im,o=e.data.x,c=i.length,l=new Float64Array(c),s=new Float64Array(c),u=(o[c-1]-o[0])/(c-1),d=-t*Math.exp(1),b=Math.exp(d*u),f=Math.exp(d*o[0]),p=0;p<c-n;p++)l[p]=i[p]*f,s[p]=r[p]*f,f*=b;f=Math.exp(d*o[0]);for(var h=c;h>c-n;h--)l[h]=i[h]*f,s[h]=r[h]*f,f*=b;e.data=Object(v.a)(Object(v.a)({},e.data),{re:l,im:s})}function lineBroadening_isApplicable(e){return!(!e.info.isComplex||!e.info.isFid)}function lineBroadening_reduce(e,t){return{once:!0,reduce:e+t}}var Ha="pareto",Ba="Pareto";function pareto_apply(e){var t;if(!pareto_isApplicable(e))throw new Error("Pareto is not applicable on this data");var n=e.data.re.slice(0),a=null===(t=e.data.im)||void 0===t?void 0:t.slice(0);e.data.re=Object(Xe.m)(n),a&&(e.data.im=Object(Xe.m)(a))}function pareto_isApplicable(e){return!(!e.info.isComplex||e.info.isFid)}function pareto_reduce(){return{once:!1,reduce:null}}var Xa="phaseCorrection",Va="Phase correction";function phaseCorrection_apply(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!phaseCorrection_isApplicable(e))throw new Error("phaseCorrection not applicable on this data");var n=t.ph0,a=t.ph1;n*=Math.PI/180,a*=Math.PI/180,Object.assign(e.data,Object(Xe.f)(e.data,n,a))}function phaseCorrection_isApplicable(e){return!(!e.info.isComplex||e.info.isFid)}function phaseCorrection_reduce(e,t){var n=Object.assign({},e);for(var a in n)n[a]+=t[a];return{once:!0,reduce:n}}var Ya="shiftX",Za="Shift X";function shiftX_apply(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;e.data.x=e.data.x.map((function(e){return e+t}))}function shiftX_isApplicable(){return!0}function shiftX_reduce(e,t){return{once:!0,reduce:e+t}}var Ua="standardDeviation",Ka="Standard Deviation";function standardDeviation_apply(e){var t;if(!standardDeviation_isApplicable(e))throw new Error("Standard Deviation is not applicable on this data");for(var n=e.data.re.slice(0),a=null===(t=e.data.im)||void 0===t?void 0:t.slice(0),i=Object(wa.standardDeviation)(n),r=Object(wa.standardDeviation)(a||[]),o=0;o<n.length;o++)n[o]/=i,a&&(a[o]/=r);e.data.re=n,a&&(e.data.im=a)}function standardDeviation_isApplicable(e){return!(!e.info.isComplex||e.info.isFid)}function standardDeviation_reduce(){return{once:!1,reduce:null}}var Wa="zeroFilling",Ga="Zero Filling";function zeroFilling_apply(e,t){if(!zeroFilling_isApplicable(e))throw new Error("zeroFilling not applicable on this data");var n,a=e.filters.some((function(e){return"digitalFilter"===e.name&&e.flag})),i=e.info.digitalFilter;n=i>0&&a?Math.floor(i):0;var r=e.data,o=r.re,c=r.im,l=r.x,s=new Float64Array(t),u=new Float64Array(t),d=new Float64Array(t),b=Math.min(t,o.length);s.set(o.slice(0,b-n)),u.set(c.slice(0,b-n)),d.set(l.slice(0,b-n));for(var f=l[1]-l[0],p=l[b-n-1],h=b-n;h<t;h++)p+=f,d[h]=p;n>0&&n<t&&(s.set(o.slice(o.length-n),t-n),u.set(c.slice(o.length-n),t-n)),e.data=Object(v.a)(Object(v.a)({},e.data),{re:s,im:u,x:d})}function zeroFilling_isApplicable(e){return!(!e.info.isComplex||!e.info.isFid)}function zeroFilling_reduce(e,t){return{once:!0,reduce:t}}var qa="shift2DX",Ja="Shift 2D X";function filter2d_shiftX_apply(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;e.data.minX+=t,e.data.maxX+=t}function filter2d_shiftX_isApplicable(){return!0}function filter2d_shiftX_reduce(e,t){return{once:!0,reduce:e+t}}var $a="shift2DY",Qa="Shift 2D Y";function shiftY_apply(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;e.data.minY+=t,e.data.maxY+=t}function shiftY_isApplicable(){return!0}function shiftY_reduce(e,t){return{once:!0,reduce:e+t}}var ei={absolute:a,baselineCorrection:r,lineBroadening:d,fft:s,phaseCorrection:f,autoPhaseCorrection:i,shiftX:p,zeroFilling:g,digitalFilter:c,fromTo:u,equallySpaced:l,standardDeviation:h,centerMean:o,pareto:b,shift2DX:m,shift2DY:j},ti={zoom:{id:"zoom",label:"Zoom",hasOptionPanel:!1,isFilter:!1},peakPicking:{id:"peakPicking",label:"Peaks Picking",hasOptionPanel:!0,isFilter:!1},integral:{id:"integral",label:"integral Tool",hasOptionPanel:!1,isFilter:!1},zone2D:{id:"zone2D",label:"Zone Tool",hasOptionPanel:!0,isFilter:!1},slicingTool:{id:"slicingTool",label:"Slicing Tool",hasOptionPanel:!1,isFilter:!1},HMove:{id:"HMove",label:"Move spectrum horizontally",hasOptionPanel:!1,isFilter:!1},equalizerTool:{id:"equalizerTool",label:"Equalizer Tool",hasOptionPanel:!1,isFilter:!1},rangesPicking:{id:"rangesPicking",label:"Ranges Picking ( Press r )",hasOptionPanel:!0,isFilter:!1},zeroFilling:{id:ei.zeroFilling.id,label:ei.zeroFilling.name,hasOptionPanel:!0,isFilter:!0},phaseCorrection:{id:ei.phaseCorrection.id,label:"".concat(ei.phaseCorrection.name," ( Press a )"),hasOptionPanel:!0,isFilter:!0},baseLineCorrection:{id:"baseLineCorrection",label:"baseline correction ( Press b )",hasOptionPanel:!0,isFilter:!0},generalSelector:{id:"generalSelector",label:"range general selecttor",hasOptionPanel:!1,isFilter:!1},editRange:{id:"editRange",label:"edit range",hasOptionPanel:!1,isFilter:!1},multipleSpectraAnalysis:{id:"multipleSpectraAnalysis",label:"Multiple Spectra Analysis",hasOptionPanel:!1,isFilter:!1},exclusionZones:{id:"exclusionZones",label:"Exclusion Zones",hasOptionPanel:!1,isFilter:!1}},ni={transformOrigin:"top left",position:"absolute",top:"0px",left:"0px",zoom:"100%"},ai=[ti.zoom.id,ti.zeroFilling.id,ti.peakPicking.id,ti.integral.id,ti.phaseCorrection.id,ti.baseLineCorrection.id,ti.rangesPicking.id,ti.zone2D.id,ti.slicingTool.id,ti.editRange.id,ti.multipleSpectraAnalysis.id,ti.exclusionZones.id],ii=1,ri=2,oi=3;function BrushXY(e){var t=e.brushType,n=e.dimensionBorder,a=e.width,i=e.height,r=useChartData(),o=r.width,c=r.height,l=r.selectedTool,s=Object(D.useContext)(L),u=s.startX,d=s.endX,b=s.startY,f=s.endY,p=s.step;if(!ai.includes(l)||"brushing"!==p||!n||n.startX&&u<n.startX||n.startY&&b<n.startY||(n.endX&&1===Math.sign(d-u)?d>n.endX:d<n.startX)&&(n.endX&&1===Math.sign(f-b)?f>n.endY:f<n.startY))return null;o=a||o,c=i||c,d=n.endX&&d>n.endX?n.endX:n.startX&&d<n.startX?n.startX:d,f=n.endY&&f>n.endY?n.endY:n.startY&&f<n.startY?n.startY:f;var h=t===ii||t===oi?(d-u)/o:1;u=t===ii||t===oi?u:0;var g=t===ri||t===oi?(f-b)/c:1;return b=t===ri||t===oi?b:0,Object(N.jsx)("div",{style:Object(v.a)(Object(v.a)({},ni),{},{transform:"translate(".concat(u,"px, ").concat(b,"px) scale(").concat(h,",").concat(g,")"),willChange:"transform"}),children:Object(N.jsx)("svg",{width:o,height:c,children:Object(N.jsx)("rect",{x:"0",y:"0",width:o,height:c,fill:"gray",opacity:"0.2"})})})}BrushXY.defaultProps={brushType:oi,dimensionBorder:{startX:0,startY:0},width:null,height:null};var ci=BrushXY,li={line:{stroke:"black",strokeOpacity:"1",shapeRendering:"crispEdges",strokeWidth:"1",willChange:"transform"}},si=[ti.zoom.id,ti.equalizerTool.id,ti.baseLineCorrection.id,ti.zone2D.id,ti.slicingTool.id,ti.integral.id,ti.rangesPicking.id,ti.editRange.id,ti.multipleSpectraAnalysis.id,ti.exclusionZones.id];var ui=function CrossLinePointer(){var e=useChartData(),t=e.height,n=e.width,a=e.margin,i=e.selectedTool,r=Object(D.useContext)(B),o=Object(D.useContext)(L);return!si.includes(i)||"brushing"===o.step||!r||r.x>n-a.right||r.y>t-a.bottom||!n||!t?null:Object(N.jsx)("div",{style:{willChange:"transform",cursor:"crosshair",transform:"translate(".concat(-n+r.x,"px, ").concat(-t+r.y,"px)"),position:"absolute",top:0,left:0,pointerEvents:"none",overflow:"visible",width:2*n,height:2*t},children:Object(N.jsxs)("svg",{width:2*n,height:2*t,children:[Object(N.jsx)("line",{style:li.line,x1:n,y1:"0",x2:n,y2:2*t},"vertical_line"),Object(N.jsx)("line",{style:li.line,x1:"0",y1:t,x2:2*n,y2:t},"horizontal_line")]})},"crossLine")},di=n(600),bi=new(n.n(di).a),fi={on:function on(e,t){return bi.on(e,t)},once:function once(e,t){return bi.once(e,t)},off:function off(e,t){return bi.off(e,t)},emit:function emit(e,t){return bi.emit(e,t)}};Object.freeze(fi);var pi=fi;function DeleteButton(e){var t=e.x,n=e.y,a=e.onDelete,i=e.fill;return Object(N.jsxs)("svg",{className:"delete-button",x:t,y:n,onClick:a,"data-no-export":"true",children:[Object(N.jsx)("rect",{rx:"5",width:"16",height:"16",fill:i}),Object(N.jsx)("line",{x1:"5",x2:"10",y1:"8",y2:"8",stroke:"white",strokeWidth:"2"})]})}DeleteButton.defaultProps={onDelete:function onDelete(){return null},fill:"#c81121",x:"initial",y:"initial"};var hi,gi=DeleteButton,mi=Object(y.css)(hi||(hi=Object(x.a)(["\n  pointer-events: bounding-box;\n  user-select: 'none';\n  -webkit-user-select: none; /* Chrome all / Safari all */\n  -moz-user-select: none; /* Firefox all */\n\n  .zone-area {\n    height: 100%;\n    fill: #b8b8b857;\n    cursor: pointer;\n  }\n  .delete-button {\n    display: none;\n    cursor: pointer;\n  }\n  :hover .delete-button {\n    display: block;\n  }\n"])));var ji=function BaseLineZones(){var e=useChartData().baseLineZones,t=useScale().scaleX,n=useDispatch(),a=Object(D.useCallback)((function(e){n({type:In,id:e})}),[n]);return e&&Array.isArray(e)&&e.length>0&&Object(Ce.b)("g",{children:e.map((function(e){return Object(Ce.c)("g",{transform:"translate(".concat(t()(e.to),",0)"),css:mi,children:[Object(Ce.b)(gi,{x:-20,y:10,onDelete:function onDelete(){return a(e.id)}}),Object(Ce.b)("rect",{x:"0",width:"".concat(t()(e.from)-t()(e.to)),className:"zone-area"})]},e.id)}))})},vi=n(189);var Oi,xi=function ExclusionZonesWrapper(e){var t=function Wrapper(t){var n=useChartData(),a=n.exclusionZones,i=n.activeTab;return Object(N.jsx)(e,Object(v.a)(Object(v.a)({},t),{},{exclusionZones:a[i]?a[i]:null}))};return function(e){return Object(N.jsx)(t,Object(v.a)({},e))}},yi=Object(y.css)(Oi||(Oi=Object(x.a)(["\n  pointer-events: bounding-box;\n  user-select: 'none';\n  -webkit-user-select: none; /* Chrome all / Safari all */\n  -moz-user-select: none; /* Firefox all */\n\n  .zone-area {\n    height: 100%;\n    fill: #dddddd;\n    cursor: pointer;\n  }\n  .zone-area.active {\n    fill: #ff6f0057;\n  }\n"]))),ki=function ExclusionZone(e){var t=e.zone,n=useScale().scaleX,a=Object(vi.c)([t.id],vi.b.EXCLUSION_ZONE);return Object(Ce.b)("g",Object(v.a)(Object(v.a)({transform:"translate(".concat(n()(t.to),",0)"),css:yi},a.onHover),{},{children:Object(Ce.b)("rect",{x:"0",width:"".concat(n()(t.from)-n()(t.to)),className:"zone-area ".concat(a.isActive&&"active")})}),t.id)};var Ci=xi((function ExclusionZones(e){var t=e.exclusionZones;return t?Object(Ce.b)("g",{className:"exclusionZones",children:t.map((function(e){return Object(Ce.b)(ki,{zone:e},e.id)}))}):null})),Di={showAbsolute:!1,absoluteFormat:"0.00",showRelative:!0,relativeFormat:"0.00",color:"#000000",strokeWidth:1},Si={showFrom:!1,fromFormat:"0.00",showTo:!1,toFormat:"0.00",showAbsolute:!1,absoluteFormat:"0.00",showRelative:!0,relativeFormat:"0.00"},wi={showPeakNumber:!0,peakNumberFormat:"0",showPeakIndex:!1,peakIndexFormat:"0.00",showDeltaPPM:!0,deltaPPMFormat:"0.00",showDeltaHz:!1,deltaHzFormat:"0.00",showPeakWidth:!1,peakWidthFormat:"00.0000",showIntensity:!0,intensityFormat:"0.00"},Ti=n(366),Mi=n.n(Ti);var Ai,Ei,Pi=function Resizable(e){var t=e.from,n=e.to,a=e.onDrag,i=void 0===a?function(){return null}:a,r=e.onDrop,o=useChartData(),c=o.height,l=o.margin,s=o.mode,u=Object(D.useState)(!1),d=Object(O.a)(u,2),b=d[0],f=d[1],p=Object(D.useState)(!1),h=Object(O.a)(p,2),g=h[0],m=h[1],j=Object(D.useState)(!0),v=Object(O.a)(j,2),x=v[0],y=v[1],k=Object(D.useRef)(null),C=Object(D.useRef)(null),S=useScale().scaleX,w=Object(D.useCallback)((function(e){e.preventDefault(),e.stopPropagation(),f(!0)}),[]),T=Object(D.useCallback)((function(e){i({from:S().invert(e.layerX)})}),[i,S]),M=Object(D.useCallback)((function(e){e.preventDefault(),e.stopPropagation(),f(!1);var a="RTL"===s?[S().invert(e.layerX),n]:[n,S().invert(e.layerX)];r(a[1]>a[0]?{from:a[0],to:a[1]}:{from:t,to:n})}),[t,s,r,S,n]),A=Object(D.useCallback)((function(e){e.preventDefault(),e.stopPropagation(),m(!0)}),[]),E=Object(D.useCallback)((function(e){i({to:S().invert(e.layerX)})}),[i,S]),P=Object(D.useCallback)((function(e){e.preventDefault(),e.stopPropagation(),m(!1);var a="RTL"===s?[t,S().invert(e.layerX)]:[S().invert(e.layerX),t];r(a[1]>a[0]?{from:a[0],to:a[1]}:{from:t,to:n})}),[t,s,r,S,n]),I=Object(D.useCallback)((function(e){e.shiftKey&&y(!1)}),[]),F=Object(D.useCallback)((function(){y(!0)}),[]),_=Object(D.useCallback)((function(e){var t=e.target,n=e.shiftKey;t.style.cursor=n?"crosshair":"ew-resize"}),[]);return Object(Ce.c)(D.Fragment,{children:[Object(Ce.b)(Mi.a,{axis:"x",defaultPosition:{x:S()(t),y:0},position:{x:S()(t),y:0},scale:1,handle:".handle",onStart:w,onDrag:T,onStop:M,nodeRef:k,children:Object(Ce.b)("rect",{ref:k,className:x?"handle":"",width:b?1:6,fill:"red",height:c+l.top,style:{fillOpacity:b?1:0},onMouseDownCapture:I,onMouseUpCapture:F,onMouseEnter:_})}),Object(Ce.b)(Mi.a,{axis:"x",defaultPosition:{x:S()(n),y:0},position:{x:S()(n),y:0},handle:".handle",scale:1,onStart:A,onDrag:E,onStop:P,nodeRef:C,children:Object(Ce.b)("rect",{ref:C,className:x?"handle":"",width:g?1:6,fill:"red",height:c+l.top,style:{fillOpacity:g?1:0},onMouseDownCapture:I,onMouseUpCapture:F,onMouseEnter:_})})]})},Ii=Object(y.css)(Ai||(Ai=Object(x.a)(["\n  pointer-events: bounding-box;\n  @-moz-document url-prefix() {\n    pointer-events: fill;\n  }\n  // // disabled because Resizable component appears now when hovering over it\n  // :hover .target {\n  //   visibility: visible !important;\n  //   cursor: pointer;\n  // }\n  .highlight {\n    fill: transparent;\n  }\n  .target {\n    visibility: hidden;\n  }\n"]))),Fi=Object(y.css)(Ei||(Ei=Object(x.a)(["\n  pointer-events: bounding-box;\n\n  @-moz-document url-prefix() {\n    pointer-events: fill;\n  }\n  fill: #ff6f0057;\n\n  .target {\n    visibility: visible;\n  }\n"])));var _i=function IntegralResizable(e){var t=e.integralData,n=useChartData(),a=n.height,i=n.margin,r=useScale().scaleX,o=Object(D.useState)(t),c=Object(O.a)(o,2),l=c[0],s=l.id,u=l.integral,d=l.from,b=l.to,f=c[1],p=Object(vi.c)([s],vi.b.INTEGRAL),h=useDispatch(),g=Object(D.useCallback)((function(e){h({type:cn,data:Object(v.a)(Object(v.a)({},t),e)})}),[h,t]),m=Object(D.useCallback)((function(){p.show()}),[p]),j=Object(D.useCallback)((function(){p.hide()}),[p]),x=Object(D.useCallback)((function(e){f((function(t){return Object(v.a)(Object(v.a)({},t),e)}))}),[]),y=d?r()(d):0,k=b?r()(b):0;return Object(Ce.b)(D.Fragment,{children:Object(Ce.c)("g",{css:p.isActive?Fi:Ii,onMouseEnter:m,onMouseLeave:j,children:[Object(Ce.b)("rect",{"data-no-export":"true",x:"".concat(k),y:"0",width:"".concat(y-k),height:a-i.bottom,className:"highlight"}),Object(Ce.b)("text",{x:k,y:a-i.bottom+30,fill:"black",style:{fontSize:"12px",fontWeight:"bold"},children:void 0!==u?u.toFixed(2):""}),Object(Ce.b)(Pi,{from:t.from,to:t.to,onDrag:x,onDrop:g,"data-no-export":"true"})]})})};var Ri=function Integral(e){var t=e.integralData,n=e.x,a=e.y,i=e.xDomain,r=e.isActive,o=e.spectrumID,c=e.scaleY,l=e.scaleX,s=t.from,u=t.to,d=usePreferences(),b=Object(D.useMemo)((function(){var e=dt(d,"formatting.panels.integrals")||{},t=e.color,n=void 0===t?Di.color:t,a=e.strokeWidth;return{color:n,strokeWidth:void 0===a?Di.strokeWidth:a}}),[d]),f=Object(D.useMemo)((function(){return Object(Xe.o)({x:n,y:a},{from:s,to:u,reverse:!0})}),[s,u,n,a]),p=Object(D.useCallback)((function(){if(f&&c){var e=Object(Xe.s)(f,{from:i[0],to:i[1],nbPoints:200,optimize:!0}),t="M ".concat(l()(e.x[0])," ").concat(c(e.y[0]));return t+=e.x.slice(1).reduce((function(t,n,a){return t+=" L ".concat(l()(n)," ").concat(c(e.y[a+1]))}),"")}return""}),[f,l,c,i]);return Object(N.jsxs)(D.Fragment,{children:[Object(N.jsx)("path",{className:"line",stroke:b.color,strokeWidth:b.strokeWidth,fill:"none",style:{transformOrigin:"center top",opacity:r?1:.2},d:p()}),Object(N.jsx)(_i,{spectrumID:o,integralData:t,scaleY:c})]})};var Ni=function IntegralsSeries(){var e=useChartData(),t=e.xDomain,n=e.activeSpectrum,a=e.data,i=e.height,r=e.margin,o=e.verticalAlign,c=e.integralsYDomains,l=e.displayerKey,s=useScale().scaleX,u=Object(D.useMemo)((function(){return n&&c[n.id]?function getIntegralYScale(e,t){var n=e.height,a=e.margin,i=e.verticalAlign,r=e.integralsYDomains,o=i.flag&&!i.stacked?n/2:n;return Object(it.f)(r[t],[o-(a.bottom+.3*o),a.top])}({height:i,margin:r,verticalAlign:o,integralsYDomains:c},n.id):null}),[n,i,c,r,o]),d=Object(D.useMemo)((function(){var e=function IsActive(e){return null===n||e===n.id};return a&&a[0]&&a.filter((function(e){return!0===e.display.isVisible&&!0===e.display.isVisibleInDomain})).map((function(n){return n.integrals&&n.integrals.values&&n.integrals.values.map((function(a){return Object(N.jsx)(Ri,{spectrumID:n.id,integralData:a,x:n.data.x,y:n.data.y,isActive:e(n.id),xDomain:t,scaleY:u,scaleX:s},a.id)}))}))}),[n,a,s,u,t]);return Object(N.jsx)("g",{clipPath:"url(#".concat(l,"clip-chart-1d)"),children:d})};var Li=function Line(e){var t=e.data,n=e.id,a=e.display,i=e.index,r=useChartData(),o=r.xDomain,c=r.activeSpectrum,l=r.verticalAlign,s=usePreferences(),u=useScale(),d=u.scaleX,b=u.scaleY,f=Object(D.useMemo)((function(){return null===c||n===c.id}),[c,n]),p=Object(D.useMemo)((function(){return l.flag&&l.stacked?i*l.value:0}),[i,l.flag,l.stacked,l.value]),h=Object(D.useMemo)((function(){var e=d(),a=b(n);if((null===t||void 0===t?void 0:t.x)&&(null===t||void 0===t?void 0:t.y)&&e(0)){var i=Object(Xe.s)({x:t.x,y:t.y},{from:o[0],to:o[1]}),r="M ".concat(e(i.x[0])," ").concat(a(i.y[0])," ");return r+=i.x.slice(1).reduce((function(t,n,r){return t+=" L ".concat(e(n)," ").concat(a(i.y[r+1]))}),"")}return""}),[n,d,b,t,o]);return Object(N.jsx)("path",{className:"line",stroke:a.color,fill:"none",style:{opacity:f?1:C()(s,"controllers.dimmedSpectraTransparency",.1)},d:h,transform:"translate(0,-".concat(p,")")},n)};var zi=function LinesSeries(){var e=useChartData(),t=e.data,n=e.tempData,a=e.displayerKey,i=n||t;return Object(N.jsx)("g",{clipPath:"url(#".concat(a,"clip-chart-1d)"),children:i&&i.filter((function(e){return!0===e.display.isVisible&&!0===e.display.isVisibleInDomain})).map((function(e,t){return Object(N.jsx)(Li,Object(v.a)(Object(v.a)({},e),{},{index:t}),e.id)}))})},Hi=n(186),Bi=n(601),Xi=n.n(Bi);function useFormatNumberByNucleus(e){var t=usePreferences(),n=C()(t,"formatting.nucleusByKey",{ppm:"0.0",hz:"0.0"}),a=function formatFun(e){return function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"ppm",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return i+Xi()(Number(t)).format(C()(n,"".concat(e.toLowerCase(),".").concat(a),"0.0"))+r}};if(e){if("string"===typeof e)return a(e);if(Array.isArray(e))return e.map((function(e){return a(e)}));throw Error("nuclus must be string or array of string")}}function getNumberOfDecimals(e){var t=(e=String(e).trim()).lastIndexOf(".");return t>0?e.substr(t).split("").length-1:0}var Vi,Yi=function FormatNumber(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return n+Xi()(e).format(t)+a},Zi=Object(y.css)(Vi||(Vi=Object(x.a)(["\n  user-select: 'none';\n  -webkit-user-select: none; /* Chrome all / Safari all */\n  -moz-user-select: none; /* Firefox all */\n\n  text,\n  input {\n    -webkit-user-select: none; /* Safari 3.1+ */\n    -moz-user-select: none; /* Firefox 2+ */\n    -ms-user-select: none; /* IE 10+ */\n    user-select: none; /* Standard syntax */\n  }\n\n  input[type='number']::-webkit-outer-spin-button,\n  input[type='number']::-webkit-inner-spin-button {\n    -webkit-appearance: none;\n    margin: 0;\n  }\n\n  input[type='number'] {\n    -moz-appearance: textfield;\n  }\n\n  .notification-input {\n    width: calc(100% - 10px) !important;\n    user-select: 'none';\n    -webkit-user-select: none; /* Chrome all / Safari all */\n    -moz-user-select: none; /* Firefox all */\n  }\n\n  .notification-input-normal {\n    opacity: 1;\n    left: 4px;\n    position: absolute;\n    font-size: 10px;\n    outline: none;\n    user-select: 'none';\n    -webkit-user-select: none; /* Chrome all / Safari all */\n    -moz-user-select: none; /* Firefox all */\n    background-color: transparent;\n  }\n\n  .notification-input-normal input:focus {\n    outline: none;\n    background-color: white;\n  }\n\n  .input-over {\n    background-color: white;\n    outline: none;\n  }\n\n  .notification-label {\n    display: none;\n  }\n\n  .notification-group-over {\n    z-index: 9999999999;\n  }\n\n  .notification-group {\n    z-index: 1;\n  }\n\n  .notifcate-selected {\n    opacity: 0;\n  }\n\n  input[type='number']::-webkit-inner-spin-button,\n  input[type='number']::-webkit-outer-spin-button {\n    -webkit-appearance: none;\n    margin: 0;\n  }\n"])));var Ui=function PeakNotation(e){var t=e.id,n=e.x,a=e.y,i=e.sign,r=e.value,o=e.color,c=e.isActive,l=e.nucleus,s=Object(D.useRef)(),u=Object(D.useState)(!1),d=Object(O.a)(u,2),b=d[0],f=d[1],p=Object(D.useState)(r),h=Object(O.a)(p,2),g=h[0],m=h[1],j=Object(D.useState)({width:0,height:0}),v=Object(O.a)(j,2),x=v[0],k=v[1],C=useFormatNumberByNucleus(l),S=Object(vi.c)([t],vi.b.PEAK),w=useDispatch(),T=Object(D.useCallback)((function(e){return w({type:Pt,shiftValue:e.shiftValue})}),[w]);Object(D.useLayoutEffect)((function(){var e=s.current.getBBox();k({width:e.width,height:e.height})}),[b]),Object(D.useEffect)((function(){m(r)}),[r]);var M=Object(D.useCallback)((function(e){if("Enter"===e.key){var n=parseFloat(e.target.value),a=parseFloat(r),i=parseFloat(e.target.value)-parseFloat(r);T({id:t,value:n,oldValue:a,shiftValue:i}),e.target.blur(),f(!1)}else 27===e.keyCode&&(m(r),e.target.blur(),f(!1))}),[r,T,t]),A=Object(D.useCallback)((function(e){m(e.target.value)}),[]),E=Object(D.useCallback)((function(e){return e.preventDefault(),e.stopPropagation(),f(!0),!1}),[]),P=Object(D.useCallback)((function(){S.show()}),[S]),I=Object(D.useCallback)((function(){S.hide()}),[S]),F=Object(D.useMemo)((function(){return b?r:C(r)}),[C,b,r]),_=Object(D.useMemo)((function(){return b?g:C(g)}),[g,C,b]);return Object(Ce.c)(D.Fragment,{children:[Object(Ce.b)(y.Global,{styles:Zi}),Object(Ce.c)("g",{id:t,style:{outline:"none"},transform:"translate(".concat(n,", ").concat(a,")"),onMouseEnter:P,onMouseLeave:I,children:[Object(Ce.b)("line",{x1:"0",x2:"0",y1:-1===i?10:0,y2:-1===i?28:-18,stroke:o,strokeWidth:S.isActive?"7px":"1px"}),Object(Ce.b)("text",{ref:s,className:"peaks-text",x:"0",y:-1===i?28:-12,dy:"0",dx:"0.35em",fill:"transparent",fontSize:"10px",fontWeight:"100",style:{position:"absolute"},children:F}),Object(Ce.b)("foreignObject",{x:"0",y:-1===i?16:-22,dy:"0.1em",dx:"0.35em",width:x.width+20,height:"40px","data-no-export":"true",children:Object(Ce.b)("div",{style:{width:x.width+20,height:"100%",paddingRight:5},xmlns:"http://www.w3.org/1999/xhtml",children:Object(Ce.b)("input",{onClick:E,className:b?"notification-input input-over":"notification-input-normal",style:{width:"inherit",border:b?"1px solid ".concat(o):"0",opacity:c?1:.2,userSelect:"none",color:o},value:_,onKeyDown:M,onChange:A,type:"number",disabled:!c})})})]})]})};var Ki,Wi,Gi=function PeaksNotations(){var e=useChartData(),t=e.data,n=e.activeSpectrum,a=e.verticalAlign,i=e.displayerKey,r=useScale(),o=r.scaleX,c=r.scaleY,l=Object(D.useMemo)((function(){var e=function getVerticalAlign(e){var n=t.findIndex((function(t){return t.id===e}));return a.flag&&a.stacked?(n+1)*a.value:0};return t&&function reSortData(){var e=Object(Hi.a)(t);return n?e.sort((function(e,t){return e.id===n.id?1:t.id===n.id?-1:0})):e}().filter((function(e){return!0===e.display.isVisible&&!0===e.display.isVisibleInDomain})).map((function(t){return t.peaks&&t.peaks.values&&t.display.isPeaksMarkersVisible&&Object(N.jsx)("g",{transform:"translate(0,-".concat(e(t.id),")"),children:t.peaks.values.map((function(e){var a=e.delta,i=e.intensity,r=e.id;return Object(N.jsx)(Ui,{x:o()(a),y:c(t.id)(i)-5,sign:Math.sign(i),id:r,spectrumID:t.id,value:a,color:"#730000",nucleus:t.info.nucleus,isActive:null!=n&&n.id===t.id},r)}))},t.id)}))}),[t,a.flag,a.stacked,a.value,n,o,c]);return Object(N.jsx)("g",{className:"peaks",clipPath:"url(#".concat(i,"clip-chart-1d)"),children:l})},qi=n(2),Ji=n.n(qi),$i=Object(y.css)(Ki||(Ki=Object(x.a)(["\n  user-select: none;\n\n  path,\n  line {\n    fill: none;\n    stroke: black;\n    stroke-width: 1;\n    shape-rendering: crispEdges;\n    user-select: none;\n  }\n"]))),Qi=Object(y.css)(Wi||(Wi=Object(x.a)(["\n  user-select: none;\n\n  line {\n    stroke: rgb(104, 104, 104);\n    stroke-opacity: 0.2;\n    shape-rendering: crispEdges;\n    stroke-dasharray: 3;\n    stroke-width: 1;\n    user-select: none;\n  }\n\n  path {\n    stroke-width: 0;\n  }\n"])));function XAxis(e){var t=e.label,n=e.show,a=e.showGrid,i=e.mode,r=useChartData(),o=r.xDomain,c=r.height,l=r.width,s=r.margin,u=useScale().scaleX,d=Object(D.useRef)(),b=Object(D.useRef)();t=t||("RTL"===i?"\u03b4 [ppm]":"time [s]"),Object(D.useEffect)((function(){var e=it.a().ticks(8).tickFormat(it.d("0")),t=it.a().ticks(50).tickSize(-(c-s.top-s.bottom)).tickFormat("");n&&u&&(it.g(d.current).call(e.scale(u().domain(o))),it.g(b.current).call(t.scale(u().domain(o))))}),[c,s.bottom,s.top,u,n,o]);var f=Object(D.useMemo)((function(){return n&&!0===n&&Object(Ce.b)("g",{className:"x",css:$i,transform:"translate(0,".concat(c-s.bottom,")"),ref:d,children:Object(Ce.b)("text",{fill:"#000",x:l-10,y:"30",dy:"0.70em",textAnchor:"end",children:t})})}),[c,t,s.bottom,n,l]),p=Object(D.useMemo)((function(){return a&&!0===a&&Object(Ce.b)("g",{css:Qi,className:"grid",ref:b,transform:"translate(0,".concat(c-s.bottom,")")})}),[a,c,s.bottom]);return l&&c&&u?Object(Ce.c)(Ce.a,{children:[f,p]}):null}XAxis.propTypes={showGrid:Ji.a.bool,show:Ji.a.bool,label:Ji.a.string},XAxis.defaultProps={showGrid:!1,show:!0,label:""};var er=XAxis;var tr,nr,ar=function MultiAnalysisWrapper(e){var t=function Wrapper(t){var n=useChartData(),a=n.activeTab,i=n.spectraAnalysis,r=n.displayerKey,o=t.forwardedRef,c=Object(ge.a)(t,["forwardedRef"]);return Object(N.jsx)(e,Object(v.a)(Object(v.a)({},c),{},{activeTab:a,spectraAnalysis:i,displayerKey:r,ref:o}))};return Object(D.forwardRef)((function(e,n){return Object(N.jsx)(t,Object(v.a)(Object(v.a)({},e),{},{forwardedRef:n}))}))},ir=Object(y.css)(tr||(tr=Object(x.a)(["\n  pointer-events: bounding-box;\n  @-moz-document url-prefix() {\n    pointer-events: fill;\n  }\n  user-select: 'none';\n  -webkit-user-select: none; /* Chrome all / Safari all */\n  -moz-user-select: none; /* Firefox all */\n\n  .delete-button {\n    visibility: hidden;\n  }\n"]))),rr=Object(y.css)(nr||(nr=Object(x.a)(["\n  pointer-events: bounding-box;\n\n  @-moz-document url-prefix() {\n    pointer-events: fill;\n  }\n  .range-area {\n    height: 100%;\n    fill: #ff6f0057;\n  }\n  .delete-button {\n    visibility: visible;\n    cursor: pointer;\n  }\n"])));var or=function AnalysisRange(e){var t=e.rangeData,n=e.columnKey,a=t.from,i=t.to,r=Object(vi.c)([n]),o=useScale().scaleX,c=useDispatch(),l=Object(D.useCallback)((function(){c({type:Qn,colKey:n})}),[n,c]),s=Object(D.useCallback)((function(e){c({type:ea,payload:Object(v.a)(Object(v.a)(Object(v.a)({},t),e),{},{columnKey:n})})}),[n,c,t]);return Object(Ce.c)("g",Object(v.a)(Object(v.a)({},r.onHover),{},{css:r.isActive?rr:ir,children:[Object(Ce.c)("g",{transform:"translate(".concat(o()(i),",25)"),children:[Object(Ce.b)("rect",{x:"0",width:o()(a)-o()(i),height:"6",className:"range-area",fill:"green"}),Object(Ce.b)("text",{textAnchor:"middle",x:(o()(a)-o()(i))/2,y:"-5",fontSize:"12",fill:"red",fontWeight:"bolder",fillOpacity:r.isActive?1:.6,children:n})]}),Object(Ce.b)(Pi,{from:t.from,to:t.to,onDrop:s}),Object(Ce.b)(gi,{x:o()(i)-20,y:10,onDelete:l})]}))};function MultiAnalysisRanges(e){var t=e.activeTab,n=e.spectraAnalysis,a=e.displayerKey,i=Object(D.useMemo)((function(){return(n[t]||{options:{columns:{}}}).options.columns}),[t,n]),r=Object(D.useMemo)((function(){return Object.keys(i).map((function(e){return e}),[])}),[i]);return r&&0!==r.length?Object(N.jsx)("g",{clipPath:"url(#".concat(a,"clip-chart-1d)"),children:r.map((function(e){return Object(N.jsx)(or,{columnKey:e,rangeData:i[e]},e)}))}):null}var cr=ar(Object(D.memo)(MultiAnalysisRanges));var lr=function RangesWrapper(e){var t=function Wrapper(t){var n=useChartData(),a=n.data,i=n.activeSpectrum,r=n.xDomain,o=n.activeTab,c=n.molecules,l=n.tabActiveSpectrum,s=n.displayerKey,u=n.selectedTool,d=usePreferences(),b=Object(D.useMemo)((function(){return a&&i&&i.id?a.find((function(e){return e.id===i.id}))||{ranges:{},x:[],y:[],info:{}}:{}}),[i,a]),f=b.ranges,p=void 0===f?{}:f,h=b.x,g=void 0===h?[]:h,m=b.y,j=void 0===m?[]:m,O=b.info,x=void 0===O?{}:O,y=Object(D.useMemo)((function(){return l&&Object.keys(l).length>0?Object.keys(l):null}),[l]),k=t.forwardedRef,C=Object(ge.a)(t,["forwardedRef"]);return Object(N.jsx)(e,Object(v.a)(Object(v.a)({},C),{},{ranges:p,x:g,y:j,info:x,xDomain:r,preferences:d,activeTab:o,molecules:c,nucleus:y,displayerKey:s,selectedTool:u,ref:k}))};return Object(D.memo)(Object(D.forwardRef)((function(e,n){return Object(N.jsx)(t,Object(v.a)(Object(v.a)({},e),{},{forwardedRef:n}))})))},sr=[{key:"signal",label:"Signal",value:"signal"},{key:"reference",label:"Reference",value:"reference"},{key:"solvent",label:"Solvent",value:"solvent"},{key:"impurity",label:"Impurity",value:"impurity"},{key:"standard",label:"Standard",value:"standard"},{key:"p1",label:"P1",value:"p1"},{key:"p2",label:"P2",value:"p2"},{key:"p3",label:"P3",value:"p3"}],ur=["signal"],dr="signal",br="mixed",fr=function getPubIntegral(e){return function getDiaIDs(e){return[].concat(e.diaID||[],e.signal?e.signal.map((function(e){return e.diaID||[]})).flat():[])}(e).length},pr=function setPubIntegral(e){e.pubIntegral=fr(e),0===e.pubIntegral&&delete e.pubIntegral},hr=function resetDiaIDs(e){delete e.diaID,e.signal.forEach((function(e){delete e.diaID})),delete e.pubIntegral},gr=function unlink(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"both",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};switch(t){case"both":hr(e);break;case"range":delete e.diaID;break;case"signal":delete e.signal[n.signalIndex].diaID}return pr(e),e},mr=function checkRangeKind(e){return e.kind===dr},jr=function unlinkInAssignmentData(e,t){var n=t.reduce((function(e,t){return e.push(t.id),t.signal&&(e=e.concat(t.signal.map((function(e){return e.id}),[]))),e}),[]);e.dispatch({type:"REMOVE_ALL",payload:{id:n,axis:"x"}})},vr=Object(D.createContext)();function assignmentReducer(e,t){switch(t.type){case"ADD":var n=Object(v.a)(Object(v.a)({},e),{},{assignment:Object(v.a)({},e.assignment)});return void 0===n.assignment[t.payload.id[0]]&&(n.assignment[t.payload.id[0]]={}),void 0===n.assignment[t.payload.id[0]][t.payload.axis]&&(n.assignment[t.payload.id[0]][t.payload.axis]=[]),n.assignment[t.payload.id[0]][t.payload.axis].includes(t.payload.id[1])||n.assignment[t.payload.id[0]][t.payload.axis].push(t.payload.id[1]),n;case"REMOVE":var a=Object(v.a)(Object(v.a)({},e),{},{assignment:Object(v.a)({},e.assignment)});return void 0!==a.assignment[t.payload.id[0]]&&void 0!==a.assignment[t.payload.id[0]][t.payload.axis]&&(a.assignment[t.payload.id[0]][t.payload.axis]=a.assignment[t.payload.id[0]][t.payload.axis].filter((function(e){return e!==t.payload.id[1]})),0===a.assignment[t.payload.id[0]][t.payload.axis].length&&delete a.assignment[t.payload.id[0]][t.payload.axis],0===Object.keys(a.assignment[t.payload.id[0]]).length&&delete a.assignment[t.payload.id[0]]),a;case"REMOVE_ALL":var i=Object(v.a)(Object(v.a)({},e),{},{assignment:Object(v.a)({},e.assignment)});return t.payload.id.forEach((function(e){void 0!==i.assignment[e]&&void 0!==i.assignment[e][t.payload.axis]&&(delete i.assignment[e][t.payload.axis],0===Object.keys(i.assignment[e]).length&&delete i.assignment[e])})),i;case"SET_IS_ACTIVE":return Object(v.a)(Object(v.a)({},e),{},{isActive:void 0!==t.payload.id&&void 0!==t.payload.axis,activeID:t.payload.id,activeAxis:t.payload.axis});case"SET_IS_ON_HOVER":return Object(v.a)(Object(v.a)({},e),{},{isOnHover:void 0!==t.payload.id,onHoverID:t.payload.id,onHoverAxis:t.payload.axis});case"DELETE_RECORD":var r=Object(v.a)(Object(v.a)({},e),{},{assignment:Object(v.a)({},e.assignment)});return delete r.assignment[t.payload.id],r.isActive&&r.activeID===t.payload.id&&(r.isActive=!1,r.activeID=void 0,r.activeAxis=void 0),r.isOnHover&&r.onHoverID===t.payload.id&&(r.isOnHover=!1,r.onHoverID=void 0,r.onHoverAxis=void 0),r;default:throw new Error("unknown action type: ".concat(t.type))}}var Or={assignment:{},isActive:!1,activeID:void 0,activeAxis:void 0,isOnHover:!1,onHoverID:void 0,onHoverAxis:void 0};function AssignmentProvider(e){var t=e.spectraData,n=Object(D.useReducer)(assignmentReducer,Or),a=Object(O.a)(n,2),i=a[0],r=a[1],o=Object(D.useMemo)((function(){return{assignment:i,dispatch:r}}),[i]);return Object(D.useEffect)((function(){t&&t.forEach((function(e){1===e.info.dimension?e.ranges.values.forEach((function(e){return function initAssignmentDataRanges(e,t){t.dispatch({type:"DELETE_RECORD",payload:{id:e.id}}),(e.diaID||[]).forEach((function(n){return t.dispatch({type:"ADD",payload:{id:[e.id,n],axis:"x"}})})),e.signal.forEach((function(e){return(e.diaID||[]).forEach((function(n){return t.dispatch({type:"ADD",payload:{id:[e.id,n],axis:"x"}})}))}))}(e,o)})):2===e.info.dimension&&e.zones.values.forEach((function(e){return function initAssignmentDataZones(e,t){t.dispatch({type:"DELETE_RECORD",payload:{id:e.id}}),(e.y.diaID||[]).forEach((function(n){return t.dispatch({type:"ADD",payload:{id:[e.id,n],axis:"y"}})})),(e.x.diaID||[]).forEach((function(n){return t.dispatch({type:"ADD",payload:{id:[e.id,n],axis:"x"}})})),e.signal.forEach((function(e){(e.x.diaID||[]).forEach((function(n){return t.dispatch({type:"ADD",payload:{id:[e.id,n],axis:"x"}})})),(e.y.diaID||[]).forEach((function(n){return t.dispatch({type:"ADD",payload:{id:[e.id,n],axis:"y"}})}))}))}(e,o)}))}))}),[t]),Object(N.jsx)(vr.Provider,{value:o,children:e.children})}function useAssignmentData(){return Object(D.useContext)(vr)}function useAssignment(e){var t=useAssignmentData();if("string"!==typeof e&&"number"!==typeof e||""===e)throw new Error("assignment key must be a non-empty string or number");var n=String(e),a=Object(D.useMemo)((function(){return t.assignment.isActive&&t.assignment.activeID===n}),[t.assignment.activeID,t.assignment.isActive,n]),i=Object(D.useMemo)((function(){return a?t.assignment.activeAxis:void 0}),[t.assignment.activeAxis,a]),r=Object(D.useMemo)((function(){return t.assignment.assignment[n]?t.assignment.assignment[n]:[]}),[t.assignment.assignment,n]),o=Object(D.useMemo)((function(){return t.assignment.isOnHover&&t.assignment.onHoverID===n}),[t.assignment.isOnHover,t.assignment.onHoverID,n]),c=Object(D.useMemo)((function(){return o?t.assignment.onHoverAxis:void 0}),[t.assignment.onHoverAxis,o]),l=Object(D.useCallback)((function(e){t.dispatch({type:"ADD",payload:{id:[n,e],axis:i}})}),[i,t,n]),s=Object(D.useCallback)((function(e){t.dispatch({type:"REMOVE",payload:{id:[n,e],axis:i}})}),[i,t,n]),u=Object(D.useCallback)((function(e){t.dispatch({type:"REMOVE_ALL",payload:{id:[n],axis:e}})}),[t,n]),d=Object(D.useCallback)((function(e){void 0!==r[i]&&r[i].includes(e)?s(e):l(e)}),[i,l,r,s]),b=Object(D.useCallback)((function(){t.dispatch({type:"DELETE_RECORD",payload:{id:n}})}),[t,n]),f=Object(D.useCallback)((function(e){t.dispatch({type:"SET_IS_ACTIVE",payload:{id:a?void 0:n,axis:a||void 0===n?void 0:e}})}),[t,n,a]),p=Object(D.useCallback)((function(e,a){"enter"===e?t.dispatch({type:"SET_IS_ON_HOVER",payload:{id:n,axis:void 0!==n?a:void 0}}):"leave"===e&&t.dispatch({type:"SET_IS_ON_HOVER",payload:{}})}),[t,n]),h=Object(D.useCallback)((function(e){return p("enter",e)}),[p]),g=Object(D.useCallback)((function(e){return p("leave",e)}),[p]);return{id:n,isActive:a,activeAxis:i,assigned:r,add:l,remove:s,removeAll:u,toggle:d,deleteRecord:b,onClick:f,isOnHover:o,onHoverAxis:c,onMouseEnter:h,onMouseLeave:g}}var xr=[{label:"massive (m)",value:"m",multiplicity:null},{label:"singlet (s)",value:"s",multiplicity:1},{label:"doublet (d)",value:"d",multiplicity:2},{label:"triplet (t)",value:"t",multiplicity:3},{label:"quartet (q)",value:"q",multiplicity:4},{label:"quintet (i)",value:"i",multiplicity:5},{label:"sextet (x)",value:"x",multiplicity:6},{label:"septet (p)",value:"p",multiplicity:7},{label:"octet (o)",value:"o",multiplicity:8},{label:"nonet (n)",value:"n",multiplicity:9}];function checkMultiplet(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(void 0===e||0===e.length)return!1;var n=xr.find((function(t){return t.value===e||t.label===e}));return n&&!t.includes(n.value)&&!t.includes(n.label)}function checkMultiplicity(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return void 0!==e&&0!==e.length&&!e.split("").find((function(e){return!checkMultiplet(e,t)}))}function translateMultiplet(e){return 1===e.length?xr.find((function(t){return t.value===e})).label:xr.find((function(t){return t.label===e})).value}function hasCouplingConstant(e){return e.length>1&&(e=translateMultiplet(e)),checkMultiplicity(e,["m","s"])}var yr=["red","green","blue","magenta"];var kr=function LevelNode(e){var t=e.signal,n=e.startY,a=e.levelHeight,i=useScale().scaleX;return Object(N.jsx)("line",{x1:i()(t.delta),y1:n,x2:i()(t.delta),y2:n+a,stroke:yr[0]},"startLevelNode_".concat(t.id))};var Cr=function StringNode(e){var t=e.signal,n=e.startY,a=e.levelHeight,i=e.fontSize,r=e.showLabels,o=useScale().scaleX;return Object(N.jsx)("text",{textAnchor:"middle",x:o()(t.delta),y:n+a/2,fontSize:i,lengthAdjust:"spacing",fill:"black",visibility:r?"visible":"hidden",children:t.multiplicity},"multiplicityString_".concat(t.id))};var Dr=function TreeNodes(e){var t=e.nodesData,n=e.levelHeight,a=e.startY,i=e.signalID,r=e.labelOptions,o=e.showLabels,c=useScale().scaleX,l=Object(D.useCallback)((function(e){var t=e.startX,l=e._startX,s=e.ratio,u=e.multiplicityIndex,d=e.color,b=2*u+2,f=a+b*n,p=a+(b+1)*n;return Object(N.jsxs)("g",{children:[Object(N.jsx)("text",{textAnchor:"middle",x:c()(l)+r.distance,y:p+n/3*2,fontSize:r.fontSize,fill:d,visibility:o?"visible":"hidden",children:s}),Object(N.jsx)("line",{x1:c()(t),y1:f,x2:c()(l),y2:p,stroke:d}),Object(N.jsx)("line",{x1:c()(l),y1:p,x2:c()(l),y2:p+n,stroke:d})]},"treeNode_".concat(i,"_").concat(t,"_").concat(l,"_").concat(s))}),[i,r.distance,r.fontSize,c,o,a,n]);return t&&t.map((function(e){return l(e)}))},Sr=function createTreeNodes(e,t){return function buildTreeNodesData(n,a,i,r){if(n>=e.multiplicity.length)return i;var o=yr[n%yr.length],c=a.findIndex((function(e){return e===n})),l=C()(t,"info.originFrequency",0),s=c>=0&&l>0?e.j[c].coupling/l:null;if(s){var u=function getPascal(e,t){if(void 0===e||0===e||void 0===t)return[1];for(var n=2*t+1,a=[],i=0;i<n-1;i++)a.push(1);for(var r=0;r<e-1;r++){for(var o=a.slice(),c=1;c<n;c++){for(var l=0;l<a.length-1;l++)o[l+c]+=a[l];o.push(1)}a=o.slice()}return a}(function getMultiplicityNumber(e){var t=xr.find((function(t){return e===t.label||e===t.value}));return t?t.multiplicity:null}(e.multiplicity.charAt(n)),.5),d=u.length%2===0?r-u.length/2*s+s/2:r-(u.length/2-.5)*s;u.forEach((function(e,t){t>0&&(d+=s),i.push({startX:r,_startX:d,ratio:e,multiplicityIndex:n,color:o}),buildTreeNodesData(n+1,a,i,d)}))}else i.push({startX:r,_startX:r,ratio:1,multiplicityIndex:n,color:o}),buildTreeNodesData(n+1,a,i,r);return i}},wr={cursor:"default",opacity:.6,strokeWidth:1};var Tr,Mr,Ar=function MultiplicityTree(e){var t=e.rangeFrom,n=e.rangeTo,a=e.signal,i=e.labelOptions,r=void 0===i?{distance:10,fontSize:11}:i,o=useScale(),c=o.scaleX,l=o.scaleY,s=useChartData(),u=s.data,d=s.activeSpectrum,b=s.selectedTool,f=s.width,p=useAssignment(a.id),h=Object(vi.c)([p.id].concat(p.assigned.x||[])),g=Object(D.useMemo)((function(){return C()(u,"".concat(d.index),null)}),[d,u]),m=Object(D.useState)({x1:a.delta,x2:a.delta}),j=Object(O.a)(m,2),x=j[0],y=j[1],k=Object(D.useState)({width:0,height:0,levelHeight:0}),S=Object(O.a)(k,2),w=S[0],T=S[1],M=Object(D.useState)(!1),A=Object(O.a)(M,2),E=A[0],P=A[1],I=Object(D.useState)(!1),F=Object(O.a)(I,2),_=F[0],R=F[1];Object(D.useEffect)((function(){var e=!checkMultiplicity(a.multiplicity,["m"]),t=e?Math.abs(c()(x.x1)-c()(x.x2)):Math.abs(c()(x.x1)-c()(x.x2))+r.distance,n=e?t/3:t/2,i=e?n/(a.multiplicity.length+2):n/(2*a.multiplicity.length+2);T({width:t,height:n,levelHeight:i}),P(e)}),[r.distance,c,a.multiplicity,x.x1,x.x2]),Object(D.useEffect)((function(){w.width/f>=.1?R(!0):R(!1)}),[w.width,f]);var N=Object(D.useMemo)((function(){var e;return g.data.x.forEach((function(a,i){a>=t&&a<=n&&(!e||g.data.y[i]>e)&&(e=g.data.y[i])})),l(g.id)(e)-w.height-30}),[g.data.x,g.data.y,g.id,l,w.height,t,n]),L=Object(D.useMemo)((function(){return Sr(a,g)(0,a.multiplicity.split("").map((function(e,t){return hasCouplingConstant(e)?t:void 0})).filter((function(e){return void 0!==e})),[],a.delta)}),[a,g]);Object(D.useEffect)((function(){if(E)y({x1:t,x2:n});else{var e={x1:a.delta,x2:a.delta};L.forEach((function(t){t.startX<e.x1&&(e.x1=t.startX),t.startX>e.x2&&(e.x2=t.startX),t._startX<e.x1&&(e.x1=t._startX),t._startX>e.x2&&(e.x2=t._startX)})),y(e)}}),[E,t,n,a.delta,a.multiplicity,L]);var z=Object(D.useMemo)((function(){var e=w.levelHeight,i=N,o=i,l=N+e;if(o=l,o+=e,E){var s=c()(t),u=c()(n),d="M ".concat(s," ").concat(o+e," ").concat(s," ").concat(o," ").concat(c()(a.delta)," ").concat(o," ").concat(u," ").concat(o," ").concat(u," ").concat(o+e);return Object(Ce.c)("g",{children:[Object(Ce.b)(Cr,{signal:a,startY:i,levelHeight:e,fontSize:r.fontSize,showLabels:_}),Object(Ce.b)(kr,{signal:a,startY:l,levelHeight:e}),Object(Ce.b)("path",{d:d,stroke:"blue",fill:"none"})]})}return Object(Ce.c)("g",{children:[Object(Ce.b)(Cr,{signal:a,startY:i,levelHeight:e,fontSize:r.fontSize,showLabels:_}),Object(Ce.b)(kr,{signal:a,startY:l,levelHeight:e}),Object(Ce.b)(Dr,{nodesData:L,signalID:L,showLabels:_,startY:N,labelOptions:r,levelHeight:e})]})}),[w,N,E,a,r,_,L,c,t,n]);return Object(Ce.b)("g",{css:h.isActive||p.isActive?Object(v.a)(Object(v.a)({},wr),{},{opacity:1,strokeWidth:1.5}):wr,onMouseEnter:function onMouseEnter(){p.onMouseEnter("x"),h.show()},onMouseLeave:function onMouseLeave(){p.onMouseLeave("x"),h.hide()},onClick:b&&b===ti.editRange.id?null:function(e){e.shiftKey&&(e.stopPropagation(),p.onClick("x"))},children:z})},Er=Object(y.css)(Tr||(Tr=Object(x.a)(["\n  pointer-events: bounding-box;\n  @-moz-document url-prefix() {\n    pointer-events: fill;\n  }\n  user-select: 'none';\n  -webkit-user-select: none; /* Chrome all / Safari all */\n  -moz-user-select: none; /* Firefox all */\n\n  // // disabled because Resizable component appears now when hovering over it\n  // :hover .range-area {\n  //   height: 100%;\n  //   fill: #ff6f0057;\n  //   cursor: pointer;\n  // }\n\n  .delete-button {\n    visibility: hidden;\n  }\n"]))),Pr=Object(y.css)(Mr||(Mr=Object(x.a)(["\n  pointer-events: bounding-box;\n\n  @-moz-document url-prefix() {\n    pointer-events: fill;\n  }\n  .range-area {\n    height: 100%;\n    fill: #ff6f0057;\n  }\n  .delete-button {\n    visibility: visible;\n    cursor: pointer;\n  }\n"])));var Ir=function Range(e){var t=e.rangeData,n=e.showMultiplicityTrees,a=e.selectedTool,i=t.id,r=t.from,o=t.to,c=t.integral,l=t.signal,s=useAssignment(i),u=Object(vi.c)([s.id].concat(s.assigned.x||[]),vi.b.RANGE),d=Object(D.useState)({from:r,to:o}),b=Object(O.a)(d,2),f=b[0],p=b[1],h=useScale().scaleX,g=useDispatch(),m=Object(D.useState)(!1),j=Object(O.a)(m,2),x=j[0],y=j[1],k=Object(D.useState)(!1),C=Object(O.a)(k,2),S=C[0],w=C[1];Object(D.useEffect)((function(){a&&a===ti.editRange.id?w(!0):w(!1)}),[a]),Object(D.useEffect)((function(){y(!mr(t))}),[t]);var T=Object(D.useCallback)((function(e){g({type:Nn,data:Object(v.a)(Object(v.a)({},t),e)})}),[g,t]),M=Object(D.useCallback)((function(){s.onMouseEnter("x"),u.show()}),[s,u]),A=Object(D.useCallback)((function(){s.onMouseLeave("x"),u.hide()}),[s,u]),E=Object(D.useCallback)((function(e){a===ti.rangesPicking.id&&e.shiftKey&&!S&&s.onClick("x")}),[s,S,a]),P=Object(D.useCallback)((function(e){p((function(t){return Object(v.a)(Object(v.a)({},t),e)}))}),[]),I=f.from,F=f.to;return Object(Ce.c)("g",{style:{outline:"none"},css:S||u.isActive||s.isActive?Pr:Er,onMouseEnter:M,onMouseLeave:A,onClick:E,children:[Object(Ce.c)("g",{transform:"translate(".concat(h()(F),",10)"),children:[Object(Ce.b)("rect",{x:"0",width:Math.abs(h()(I)-h()(F)),height:"6",className:"range-area",fill:"green",fillOpacity:!x||u.isActive||s.isActive?1:.4}),Object(Ce.b)("text",{textAnchor:"middle",x:Math.abs(h()(I)-h()(F))/2,y:"20",fontSize:"10",fill:"red",fillOpacity:!x||u.isActive||s.isActive?1:.6,children:void 0!==c?c.toFixed(2):""})]}),Object(Ce.b)(Pi,{from:t.from,to:t.to,onDrop:T,onDrag:P}),n&&l&&l.length>0?l.map((function(e){return Object(Ce.b)(Ar,{rangeFrom:I,rangeTo:F,signal:e},l.id)})):null]},i)};function Ranges(e){var t=e.ranges,n=e.displayerKey,a=e.selectedTool,i=Object(D.useState)(!1),r=Object(O.a)(i,2),o=r[0],c=r[1];return Object(D.useEffect)((function(){pi.on("showMultiplicityTrees",(function(e){c(e)}))}),[]),Object(N.jsx)("g",{clipPath:"url(#".concat(n,"clip-chart-1d)"),children:t&&t.values&&t.values.map((function(e){return Object(N.jsx)(Ir,{rangeData:e,selectedTool:a,showMultiplicityTrees:o},e.id)}))})}var Fr=lr(Object(D.memo)(Ranges));var _r=function Chart1D(e){var t=e.mode,n=e.width,a=e.height,i=e.margin,r=e.displayerKey;return Object(N.jsxs)("svg",{viewBox:"0 0 ".concat(n," ").concat(a),width:n,height:a,id:"nmrSVG",children:[Object(N.jsx)("defs",{children:Object(N.jsx)("clipPath",{id:"".concat(r,"clip-chart-1d"),children:Object(N.jsx)("rect",{width:"".concat(n-i.left-i.right),height:"".concat(a),x:"".concat(i.left),y:"".concat(0)})})}),Object(N.jsx)(zi,{}),Object(N.jsx)(Ni,{}),Object(N.jsx)(Gi,{}),Object(N.jsx)(Fr,{}),Object(N.jsx)(cr,{}),Object(N.jsx)(ji,{}),Object(N.jsx)(Ci,{}),Object(N.jsx)("g",{className:"container",style:{pointerEvents:"none"},children:Object(N.jsx)(er,{showGrid:!0,mode:t})})]})},Rr=n(602),Nr=n(384),Lr=Object(D.createContext)(),zr=Lr.Provider;function useHelp(){var e=Object(D.useContext)(Lr),t=Object(D.useCallback)((function(t){var n=t.target.getAttribute("data-helpid");n&&(t.target.style.cursor="help",e.dispatch({type:"SHOW",id:n}),e.show(n,{delay:t.ctrlKey?0:null}))}),[e]),n=Object(D.useCallback)((function(){e.dispatch({type:"HIDE"}),e.clear()}),[e]);return{show:t,hide:n,onHover:{onMouseEnter:t,onMouseLeave:n}}}var Hr,Br=n(62),Xr=n.n(Br),Vr=n(89),Yr=function groupBy(e,t){return e.reduce((function(e,n){var a=t(n);return e[a]||(e[a]=[]),e[a].push(n),e}),{})},Zr={helpText:null,helpObject:null};function helpReducer(e,t){switch(t.type){case"SHOW":var n=e.data[t.id].text;return Object(v.a)(Object(v.a)({},e),{},{helpText:n});case"HIDE":return Object(v.a)(Object(v.a)({},e),{},{helpText:null});default:throw new Error("unknown action type: ".concat(t.type))}}var Ur=(Hr={},Object(be.a)(Hr,ne,{entering:{opacity:0},entered:{opacity:1}}),Object(be.a)(Hr,ae,{entering:{transform:"scale(0)"},entered:{transform:"scale(1)"},exiting:{transform:"scale(0)"},exited:{transform:"scale(0)"}}),Hr),Kr={innerContainer:{display:"flex",flexDirection:"column",width:"100%",height:"100%",borderRadius:"5px",padding:"10px"},outerContainer:{boxSizing:"initial",backgroundColor:"rgba(255, 255, 255, 1)",boxShadow:"0px 0px 0px 0px, rgba(0, 0, 0, 0.1) 0px 3px 5px",pointerEvents:"all"},closeButton:{border:"none",color:"red",backgroundColor:"transparent",outline:"none"}},Wr=null;function Provider_Provider(e){var t=e.children,n=e.data,a=e.offset,i=e.position,r=e.timeout,o=e.delay,c=e.type,l=e.transition,s=e.containerStyle,u=e.wrapperRef,d=e.multiple,b=e.preventAutoHelp,f=Object(D.useRef)(),p=Object(D.useRef)([]),h=Object(D.useState)([]),g=Object(O.a)(h,2),m=g[0],j=g[1];Object(D.useEffect)((function(){f.current=document.createElement("div");var e=f.current;u&&u.appendChild(e);var t=p.current;return function(){t.forEach(clearTimeout),u&&u.removeChild(e)}}),[u]);var x=Object(D.useCallback)((function(e){j((function(t){var n=t.length,a=t.filter((function(t){return t.id!==e.id}));return n>a.length&&e.options.onClose&&e.options.onClose(),a}))}),[]),y=Object(D.useCallback)(function(){var e=Object(Vr.a)(Xr.a.mark((function _callee(e){var t,n,a,l,s,u=arguments;return Xr.a.wrap((function _callee$(f){for(;;)switch(f.prev=f.next){case 0:if(t=u.length>1&&void 0!==u[1]?u[1]:{delay:null},m.some((function(t){return t.helpid===e}))){f.next=15;break}return f.prev=2,n=Math.random().toString(36).substr(2,9),a=Object(v.a)({position:t.position||i,timeout:r,type:c},t),(l={helpid:e,id:n,options:a}).close=function(){return x(l)},s=function startModal(){if(l.options.timeout){var e=setTimeout((function(){x(l),p.current.splice(p.current.indexOf(e),1)}),l.options.timeout);p.current.push(e)}j((function(e){return d?e.concat(l):[l]})),l.options.onOpen&&l.options.onOpen()},0===t.delay?s():b||(Wr=setTimeout((function(){s()}),t.delay>0?t.delay:o)),f.abrupt("return",l);case 12:f.prev=12,f.t0=f.catch(2),console.log(f.t0);case 15:case"end":return f.stop()}}),_callee,null,[[2,12]])})));return function(t){return e.apply(this,arguments)}}(),[o,m,d,i,b,x,r,c]),k=Object(D.useCallback)((function(){clearTimeout(Wr)}),[]),C=Object(D.useMemo)((function(){return u?u.getBoundingClientRect():{top:0,left:0,width:window.innerWidth,height:window.innerHeight}}),[u]),S=Object(D.useReducer)(helpReducer,Object(v.a)(Object(v.a)({},Zr),{},{data:n})),w=Object(O.a)(S,2),T=w[0],M=w[1],A=Yr(m,(function(e){return e.options&&e.options.position}));return Object(N.jsxs)(zr,{value:{helpState:T,dispatch:M,show:y,clear:k},children:[t,f.current&&Object(fe.createPortal)(Object(N.jsx)(D.Fragment,{children:Object.keys(J).map((function(e){var t=J[e];return Object(N.jsx)(he.a,{appear:!0,options:{position:i,containerStyle:s},containerStyle:C,component:ke,children:A[t]?A[t].map((function(e){return Object(N.jsx)(xe,{type:l,transitionStyles:Object(v.a)(Object(v.a)({},Ur),{},{default:{width:"400px",height:"400px"}}),children:Object(N.jsx)(pe.a,{style:Object(v.a)({margin:a},Kr.outerContainer),default:{x:0,y:0,width:400,height:400},children:Object(N.jsxs)("div",{style:Kr.innerContainer,children:[Object(N.jsx)("div",{children:Object(N.jsx)("button",{type:"button",onClick:function onClick(){return x(e)},style:Kr.closeButton,children:Object(N.jsx)(Ze.G,{})})}),n[e.helpid].filePath&&Object(N.jsx)("div",{style:{cursor:"default",width:"100%",height:"100%"},children:Object(N.jsx)("iframe",{title:"Tool User Manual",src:n[e.helpid].filePath,frameBorder:"0",scrolling:"auto",style:{width:"100%",height:"100%"}})})]})})},e.id)})):null},t)}))}),f.current)]})}Provider_Provider.defaultProps={offset:"10px",position:J.TOP_RIGHT,timeout:0,delay:2e3,transition:ae,containerStyle:{zIndex:100},wrapperRef:null,multiple:!1,preventAutoHelp:!1};var Gr=Object(D.memo)(Provider_Provider);var qr,Jr,$r=function FooterWarpper(e){var t=function Wrapper(t){var n=useChartData(),a=n.margin,i=n.width,r=n.height,o=n.activeSpectrum,c=n.data,l=n.activeTab,s=t.forwardedRef,u=Object(ge.a)(t,["forwardedRef"]);return Object(N.jsx)(e,Object(v.a)(Object(v.a)({},u),{},{data:c,activeSpectrum:o,activeTab:l,margin:a,width:i,height:r,ref:s}))};return Object(D.forwardRef)((function(e,n){return Object(N.jsx)(t,Object(v.a)(Object(v.a)({},e),{},{forwardedRef:n}))}))},Qr=Object(y.css)(qr||(qr=Object(x.a)(["\n  display: flex;\n  flex-firection: row;\n  align-items: center;\n  pointer-events: bounding-box;\n  user-select: 'none';\n  -webkit-user-select: none; /* Chrome all / Safari all */\n  -moz-user-select: none; /* Firefox all */\n  background-color: #f7f7f7;\n  height: 30px;\n  padding: 6px;\n  color: #8d0018;\n  position: absolute;\n  width: 100%;\n  bottom: 0;\n\n  .help {\n    font-size: 6px;\n    color: black;\n  }\n\n  div {\n    margin: 0px 10px;\n    display: inline-block;\n\n    .label {\n      font-size: 12px;\n      color: #4d4d4d;\n      font-weight: bold;\n    }\n    .value {\n      font-weight: bold;\n      font-size: 14px;\n      display: inline-block;\n    }\n    .unit {\n      font-weight: bold;\n      font-size: 10px;\n    }\n    .xvalue {\n      min-width: 50px;\n    }\n    .yvalue {\n      min-width: 80px;\n    }\n  }\n\n  .separator {\n    border-left: 2px solid gray;\n    margin: 0 20px;\n    width: 1px;\n    height: 100%;\n  }\n"]))),eo=Object(y.css)(Jr||(Jr=Object(x.a)(["\n  pointer-events: bounding-box;\n  user-select: 'none';\n  -webkit-user-select: none; /* Chrome all / Safari all */\n  -moz-user-select: none; /* Firefox all */\n  background-color: #f7f7f7;\n  height: 30px;\n  padding: 6px;\n  color: #8d0018;\n  position: absolute;\n  width: 100%;\n  bottom: 0;\n  span {\n    font-size: 10px;\n    color: black;\n    display: inline-block;\n    text-overflow: ellipsis;\n    width: 100%;\n    white-space: nowrap;\n    overflow: hidden;\n  }\n"])));function FooterBanner(e){var t=e.margin,n=e.width,a=e.height,i=e.activeSpectrum,r=e.data,o=e.activeTab,c=Object(D.useContext)(B),l=Object(D.useContext)(L),s=l.startX,u=l.endX,d=l.step,b=useScale().scaleX,f=function useHelptData(){return Object(D.useContext)(Lr).helpState}().helpText,p=(i?r[i.index].info:{}).originFrequency,h=useFormatNumberByNucleus(o),g=Object(D.useCallback)((function(e){if(i){var t=Object(Xe.i)(r[i.index].data.x,b().invert(e));return r[i.index].data.y[t]}return 1}),[i,r,b]);return f?Object(Ce.b)("div",{css:eo,children:Object(Ce.b)("span",{className:"help",children:f})}):!c||c.y<t.top||c.x<t.left||c.x>n-t.right||c.y>a-t.bottom?Object(Ce.b)("div",{css:Qr}):Object(Ce.c)("div",{css:Qr,children:[Object(Ce.b)(Rr.a,{}),Object(Ce.c)("div",{children:[Object(Ce.b)("span",{className:"label",children:" X :"}),Object(Ce.b)("span",{className:"value",children:h(b().invert(c.x))}),Object(Ce.b)("span",{className:"unit",children:"ppm"})]}),i&&p&&Object(Ce.c)("div",{children:[Object(Ce.b)("span",{className:"label",children:" X :"}),Object(Ce.b)("span",{className:"value xvalue",children:h(b().invert(c.x)*p,"hz")}),Object(Ce.b)("span",{className:"unit",children:"Hz"})]}),"brushing"===d&&Object(Ce.c)("div",{children:[Object(Ce.b)("span",{className:"label",children:" \u0394ppm :"}),Object(Ce.b)("span",{className:"value",children:(b().invert(s)-b().invert(u)).toPrecision(6)})]}),i&&Object(Ce.c)(D.Fragment,{children:[p&&"brushing"===d&&Object(Ce.c)("div",{children:[Object(Ce.b)("span",{className:"label",children:" \u0394Hz :"}),Object(Ce.b)("span",{className:"value",children:((b().invert(s)-b().invert(u))*p).toPrecision(5)})]}),"brushing"===d&&Object(Ce.c)("div",{children:[Object(Ce.b)("span",{className:"label",children:" ratio :"}),Object(Ce.c)("span",{className:"value",children:[(g(s)/(g(u)||Number.MIN_VALUE)*100).toFixed(2),"%"]})]})]}),i&&Object(Ce.c)(D.Fragment,{children:[Object(Ce.b)("div",{className:"separator"}),Object(Ce.b)(Nr.b,{}),Object(Ce.c)("div",{children:[Object(Ce.b)("span",{className:"label",children:" Y :"}),Object(Ce.b)("span",{className:"value yvalue",children:h(g(c.x))})]})]})]})}var to=$r(Object(D.memo)(FooterBanner)),no={container:{position:"absolute",left:"10px",top:"10px"},value:{width:"67px",display:"inline-block",margin:"0 5px",fontSize:"12px"},colorIndicator:{width:"10px",height:"1px",borderBottom:"2px solid",display:"inline-block",marginBottom:"3px"},name:{fontSize:"12px"}};function YTracker(e){var t=e.datum,n=useScale().scaleX,a=Object(D.useContext)(B);if(!n||!a)return null;var i=Object(Xe.i)(t.x,n().invert(a.x));return Object(N.jsx)("span",{style:no.value,children:t.y[i]})}var ao=function SpectraTracker(){var e=useChartData(),t=e.data,n=e.activeTab,a=Object(D.useState)(!1),i=Object(O.a)(a,2),r=i[0],o=i[1];Object(D.useEffect)((function(){return pi.on("showYSpectraTrackers",(function(e){o(e)})),function(){return pi.off("showYSpectraTrackers")}}),[]);var c=Object(D.useMemo)((function(){return r&&t.map((function(e){return e.display.isVisible&&e.display.isVisibleInDomain&&e.info.nucleus===n&&Object(N.jsxs)("div",{style:{display:"block"},children:[Object(N.jsx)("span",{style:Object(v.a)(Object(v.a)({},no.colorIndicator),{},{borderColor:e.display.color})}),Object(N.jsx)(YTracker,{datum:e.data}),Object(N.jsx)("span",{style:no.value,children:e.display.name})]},e.id)}),[])}),[n,t,r]);return r?Object(N.jsx)("div",{style:no.container,children:c}):null},io=n(204),ro=10,oo="#1f1f1f",co=1,lo=0,so=1;var uo=function PeakPointer(){var e=useChartData(),t=e.height,n=e.width,a=e.margin,i=e.activeSpectrum,r=e.data,o=e.mode,c=e.selectedTool,l=e.verticalAlign,s=useScale(),u=s.scaleX,d=s.scaleY,b=Object(D.useContext)(B),f=Object(D.useContext)(L),p=Object(D.useState)(),h=Object(O.a)(p,2),g=h[0],m=h[1];return Object(D.useEffect)((function(){var e=function getClosePeak(e,t){if(i&&b&&c===ti.peakPicking.id){var n=[u().invert(t.x-e),u().invert(t.x+e)].sort((function(e,t){return e-t})),a=r.find((function(e){return e.id===i.id})),o=a.data.x.findIndex((function(e){return e>=n[1]}))-1,s=a.data.x.findIndex((function(e){return e>=n[0]})),f=a.data.y.slice(s,o);if(f&&f.length>0){var p=Object(io.a)(f),h=f.findIndex((function(e){return e===p})),g=a.data.x[s+h];return{x:u()(g),y:d(i.id)(p)-(i&&l.flag&&l.stacked?(i.index+1)*l.value:0),xIndex:s+h}}}return null}(10,b);m(e)}),[i,r,o,b,u,d,c,l]),c!==ti.peakPicking.id||!g||!i||"brushing"===f.step||!b||b.y<a.top||b.left<a.left||b.x>n-a.right||b.y>t-a.bottom?null:Object(N.jsx)("div",{style:{cursor:"crosshair",transform:"translate(".concat(g.x,"px, ").concat(g.y,"px)"),transformOrigin:"top left",position:"absolute",top:-(ro+so),left:-(ro+so),pointerEvents:"none",overflow:"visible"},children:Object(N.jsxs)("svg",{width:2*ro+2*so,height:2*ro+2*so,children:[Object(N.jsx)("circle",{cx:ro+so,cy:ro+so,r:ro,stroke:oo,strokeWidth:co,fillOpacity:lo}),Object(N.jsx)("line",{x1:ro+so,y1:so,x2:ro+so,y2:2*ro+so,stroke:oo,strokeWidth:co}),Object(N.jsx)("line",{x1:so,y1:ro+so,x2:2*ro+so,y2:ro+so,stroke:oo,strokeWidth:co})]})},"peakPointer")},bo={transformOrigin:"top left",position:"absolute",top:"0px",left:"0px",width:1,backgroundColor:"red"};var fo=function VerticalIndicator(){var e=useChartData(),t=e.height,n=e.selectedTool,a=e.pivot,i=useScale().scaleX;return ti.phaseCorrection.id!==n?null:Object(N.jsx)("div",{style:Object(v.a)(Object(v.a)({},bo),{},{transform:"translate(".concat(i()(a),"px, 0px)"),height:t})})},po={cursor:"crosshair",transformOrigin:"bottom right",position:"absolute",top:"-18px",left:"-30px",pointerEvents:"none",overflow:"visible",userSelect:"none"};var ho=function XLabelPointer(){var e=useChartData(),t=e.height,n=e.width,a=e.margin,i=e.data,r=e.activeSpectrum,o=useScale().scaleX,c=Object(D.useContext)(B),l=Object(D.useContext)(L),s=Object(D.useMemo)((function(){return r?i.find((function(e){return e.id===r.id})):null}),[r,i]),u=useFormatNumberByNucleus(s&&s.info.nucleus),d=Object(D.useCallback)((function(e){if(s){var t=o().invert(e);return u(t)}}),[s,u,o]);return!r||"brushing"===l.step||!c||c.y<a.top||c.x<a.left||c.x>n-a.right||c.y>t-a.bottom?null:Object(N.jsx)("div",{style:Object(v.a)(Object(v.a)({},po),{},{transform:"translate(".concat(c.x,"px, ").concat(c.y,"px)")}),children:Object(N.jsx)("span",{children:d(c.x)})},"xLabelPointer")};var go=function Viewer1D(e){var t=e.emptyText,n=void 0===t?void 0:t,a=usePreferences().display.general,i=useChartData(),r=i.selectedTool,o=i.isLoading,c=i.data,l=i.mode,s=i.width,u=i.height,d=i.margin,b=i.activeSpectrum,f=i.xDomain,p=i.xDomains,h=i.yDomain,g=i.yDomains,m=i.verticalAlign,j=i.displayerKey,x=useDispatch(),y=oe(),k=Object(D.useReducer)(scaleReducer,xt),C=Object(O.a)(k,2),S=C[0],w=C[1];Object(D.useEffect)((function(){f.length>0&&h.length>0&&s&&u&&w({type:Ot,payload:{yDomain:h,yDomains:g,xDomain:f,xDomains:p,margin:d,height:u,width:s,verticalAlign:m,mode:l}})}),[u,d,l,m,s,f,p,h,g]);var T=Object(D.useCallback)((function(e){if(e.altKey)switch(r){case ti.rangesPicking.id:a.disableMultipletAnalysis||y.show(Object(N.jsx)(at,Object(v.a)({data:c,activeSpectrum:b,scaleX:S.scaleX},e)),{onClose:function onClose(){y.close()}})}else if(e.shiftKey)switch(r){case ti.integral.id:x(Object(v.a)({type:Ut},e));break;case ti.rangesPicking.id:x(Object(v.a)({type:zn},e));break;case ti.multipleSpectraAnalysis.id:x(Object(v.a)({type:$n},e));break;case ti.peakPicking.id:x(Object(v.a)({type:At},e));break;case ti.baseLineCorrection.id:x({type:Pn,zone:{from:e.startX,to:e.endX}});break;case ti.exclusionZones.id:x({type:fa,payload:{from:e.startX,to:e.endX}});break;default:!function propagateEvent(){var t=e.startX,n=e.endX,a=S.scaleX().invert(t),i=S.scaleX().invert(n);pi.emit("brushEnd",Object(v.a)(Object(v.a)({},e),{},{range:[a,i].sort()}))}()}else null!=r&&x(Object(v.a)({type:ln},e))}),[S,r,a,y,c,b,x]),M=Object(D.useCallback)((function(){x({type:Bt,zoomType:jt})}),[x]),A=Object(D.useCallback)((function(e){switch(r){case ti.integral.id:x(Object(v.a)({type:un},e));break;default:return void x(Object(v.a)({type:Gt},e))}}),[x,r]),I=Object(D.useCallback)((function(e){if(e.shiftKey)switch(r){case ti.peakPicking.id:x({type:Mt,mouseCoordinates:e})}else switch(r){case ti.phaseCorrection.id:x({type:On,position:e.x});break;case"editRange":e.shiftKey&&function propagateEvent(){var t=S.scaleX().invert(e.x);pi.emit("mouseClick",Object(v.a)(Object(v.a)({},e),{},{xPPM:t}))}()}}),[x,S,r]),F=Object(E.a)((function(){return Object(N.jsxs)(D.Fragment,{children:[Object(N.jsx)(Be,{isLoading:o,emptyText:n}),S.scaleX&&S.scaleY&&c&&c.length>0&&Object(N.jsx)(BrushTracker,{onBrush:T,onDoubleClick:M,onClick:I,onZoom:A,style:{width:"100%",height:"100%",margin:"auto",position:"relative",overflow:"hidden"},children:Object(N.jsxs)(MouseTracker,{style:{width:"100%",height:"100%",position:"absolute"},children:[Object(N.jsx)(ao,{}),Object(N.jsx)(ui,{}),Object(N.jsx)(ci,{brushType:ii}),Object(N.jsx)(ho,{}),Object(N.jsx)(uo,{}),Object(N.jsx)(fo,{}),Object(N.jsx)(to,{}),Object(N.jsx)(_r,{width:s,height:u,margin:d,mode:l,displayerKey:j})]})})]})}),[]),_=Object(O.a)(F,2),R=_[0],L=_[1],z=L.width,H=L.height,B=Object(D.useState)(),X=Object(O.a)(B,2),V=X[0],Y=X[1];return Object(P.a)((function(){return Y({width:z,height:H})}),400,[z,H]),Object(D.useEffect)((function(){V&&isFinite(V.width)&&isFinite(V.height)&&x(Object(v.a)({type:Nt},V))}),[x,V]),Object(N.jsx)(q,{value:S,children:R})};var mo={TOP_1D:"TOP_1D",LEFT_1D:"LEFT_1D",CENTER_2D:"CENTER_2D"};function getLayoutID(e,t){for(var n=0,a=Object.keys(e);n<a.length;n++){var i=a[n];if(t.startX>=e[i].startX&&t.startX<=e[i].endX&&t.startY>=e[i].startY&&t.startY<=e[i].endY)return i}return null}function get2DXScale(e){var t=e.width,n=e.margin,a=e.xDomain;return Object(it.f)(a,[t-n.right,n.left])}function get2DYScale(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.height,a=e.margin,i=e.yDomain;return Object(it.f)(i,t?[n-a.bottom,a.top]:[a.top,n-a.bottom])}function get1DYScale(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10;return Object(it.f)(e,[t-n,n])}function ContoursPaths(e){var t=e.id,n=e.sign,a=e.color,i=useChartData(),r=i.margin,o=i.width,c=i.height,l=i.xDomain,s=i.yDomain,u=i.contours,d=i.activeSpectrum,b=usePreferences(),f=Object(D.useMemo)((function(){return null===d||t===d.id}),[d,t]);var p=Object(D.useMemo)((function(){return C()(u,"".concat(t,".").concat(n),[])}),[u,n,t]);return Object(N.jsx)("path",{fill:"none",stroke:a,strokeWidth:"1",style:{opacity:f?1:C()(b,"controllers.dimmedSpectraTransparency",.1)},d:function buildContourPath(e){for(var t=get2DXScale({margin:r,width:o,xDomain:l}),n=get2DYScale({margin:r,height:c,yDomain:s}),a="",i=0;i<e.length;i++)if(e[i].lines){var u=e[i].lines;if(u.length<1e6)for(var d=0;d<u.length;d+=4)a+="M".concat(t(u[d])," ").concat(n(u[d+1])," "),a+="L".concat(t(u[d+2])," ").concat(n(u[d+3])," ")}else{a+="M".concat(t(e[i][0].x)," ").concat(n(e[i][0].y)," ");for(var b=1;b<e[i].length;b++)a+="L".concat(t(e[i][b].x)," ").concat(n(e[i][b].y)," ")}return a||(a="M0 0 "),a+="Z"}(p)})}function Contours(e){var t=e.data,n=e.displayerKey;return Object(N.jsx)("g",{clipPath:"url(#".concat(n,"clip-chart-2d)"),className:"contours",children:t.filter((function(e){return 2===e.info.dimension})).map((function(e,t){return Object(N.jsxs)("g",{children:[e.display.isPositiveVisible&&Object(N.jsx)(ContoursPaths,{id:e.id,sign:"positive",color:e.display.positiveColor}),e.display.isNegativeVisible&&Object(N.jsx)(ContoursPaths,{id:e.id,sign:"negative",color:e.display.negativeColor})]},"".concat(e.id+t))}))})}var jo,vo=function ContoursWrapper(e){var t=function Wrapper(t){var n=useChartData(),a=n.data,i=n.displayerKey,r=t.forwardedRef,o=Object(ge.a)(t,["forwardedRef"]);return Object(N.jsx)(e,Object(v.a)(Object(v.a)({},o),{},{data:a,displayerKey:i,ref:r}))};return function(e){return Object(N.jsx)(t,Object(v.a)({},e))}}(Object(D.memo)(Contours)),Oo={DM_1D:"1D",DM_2D:"2D"},xo={top:100,right:50,bottom:70,left:100},yo={top:10,right:10,bottom:70,left:10},ko=Object(y.css)(jo||(jo=Object(x.a)(["\n  stroke: lightgrey;\n  opacity: 0.7;\n"])));var Co=function IndicationLines(e){var t=e.axis,n=e.show,a=useChartData(),i=a.data,r=a.activeTab,o=a.margin,c=a.width,l=a.height,s=a.xDomain,u=a.yDomain,d=a.displayerMode,b=Object(D.useState)([]),f=Object(O.a)(b,2),p=f[0],h=f[1],g=get2DXScale({margin:o,width:c,xDomain:s}),m=get2DYScale({margin:o,height:l,yDomain:u});Object(D.useEffect)((function(){var e=r.split(",");if(d===Oo.DM_2D&&2===e.length){var n="X"===t?e[0]:"Y"===t?e[1]:null;if(null!==n){var a=i.filter((function(e){return 1===e.info.dimension&&!0===e.display.isVisible&&e.info.nucleus===n&&"1d"===e.info.experiment})).map((function(e){return e.ranges.values})).flat().map((function(e){return e.signal.filter((function(e){return ur.some((function(t){return e.kind===t}))})).map((function(e){return e.delta}))})).flat();h(a)}else h([])}else h([])}),[r,t,i,d]);var j=Object(D.useMemo)((function(){if(!0===n&&p.length>0)return p.map((function(e,n){return"X"===t?Object(Ce.b)("line",{css:ko,x1:g(e),x2:g(e),y1:m(u[0]),y2:m(u[1])},"indicationLine".concat(t).concat(n)):"Y"===t?Object(Ce.b)("line",{css:ko,x1:g(s[0]),x2:g(s[1]),y1:m(e),y2:m(e)},"indicationLine".concat(t).concat(n)):null}))}),[t,p,g,m,n,s,u]);return Object(Ce.b)("g",{children:j})};function Left1DChart(e){var t=e.margin,n=e.data,a=useChartData(),i=a.height,r=a.margin,o=a.yDomain,c=a.yDomains,l=a.displayerKey,s=r.left,u=Object(D.useMemo)((function(){if(n){var e=get2DYScale({height:i,yDomain:[o[0],o[1]],margin:r}),a=get1DYScale(c[n.id],s,t),l=n.data,u=l.x,d=l.y,b=Object(Xe.s)({x:u,y:d},{from:o[0],to:o[1]}),f=b.x.length-1,p=b.y.length-1,h="M  ".concat(a(b.y[p])," ").concat(e(f)," ");return h+=b.x.slice(0,f).reduceRight((function(t,n,i){return t+=" L  ".concat(a(b.y[i])," ").concat(e(n))}),"")}return null}),[s,r,t,i,n,o,c]),d=i-r.bottom-r.top;return d&&s?Object(N.jsxs)("svg",{viewBox:"0 0 ".concat(s," ").concat(d+r.top),width:s,height:d+r.top,children:[Object(N.jsx)("defs",{children:Object(N.jsx)("clipPath",{id:"".concat(l,"clip-left"),children:Object(N.jsx)("rect",{width:s,height:d,x:"0",y:r.top})})}),Object(N.jsx)("g",{clipPath:"url(#".concat(l,"clip-left)"),children:Object(N.jsx)("path",{className:"line",stroke:"black",fill:"none",d:u})})]}):null}Left1DChart.defaultProps={margin:10};var Do=Object(D.memo)(Left1DChart);function Top1DChart(e){var t=e.margin,n=e.data,a=useChartData(),i=a.width,r=a.margin,o=a.xDomain,c=a.yDomains,l=a.displayerKey,s=r.top,u=Object(D.useMemo)((function(){if(n){var e=get2DXScale({width:i,xDomain:o,margin:r}),a=get1DYScale(c[n.id],s,t),l=n.data,u=l.x,d=l.y,b=Object(Xe.s)({x:u,y:d},{from:o[0],to:o[1]}),f="M ".concat(e(b.x[0])," ").concat(a(b.y[0])," ");return f+=b.x.slice(1).reduce((function(t,n,i){return t+=" L ".concat(e(n)," ").concat(a(b.y[i+1]))}),"")}return null}),[s,t,r,n,i,o,c]);return i&&s?Object(N.jsxs)("svg",{viewBox:"0 0 ".concat(i," ").concat(s),width:i,height:s,children:[Object(N.jsx)("defs",{children:Object(N.jsx)("clipPath",{id:"".concat(l,"clip-top"),children:Object(N.jsx)("rect",{width:i-r.left-r.right,height:s,x:r.left,y:"".concat(0)})})}),Object(N.jsx)("g",{clipPath:"url(#".concat(l,"clip-top)"),children:Object(N.jsx)("path",{className:"line",stroke:"red",fill:"none",strokeWidth:"1px",d:u})})]}):null}Top1DChart.defaultProps={margin:10};var So,wo=Object(D.memo)(Top1DChart),To=Object(y.css)(So||(So=Object(x.a)(["\n  user-select: none;\n\n  path,\n  line {\n    fill: none;\n    stroke: black;\n    stroke-width: 1;\n    shape-rendering: crispEdges;\n    user-select: none;\n  }\n"])));function XAxis_XAxis(e){var t=e.show,n=e.label,a=e.margin,i=useChartData(),r=i.xDomain,o=i.height,c=i.width,l=i.margin,s=i.tabActiveSpectrum,u=i.activeTab,d=Object(D.useRef)();Object(D.useEffect)((function(){var e=it.a().ticks(8).tickFormat(it.d("0"));if(t){var n=get2DXScale({width:c,margin:l,xDomain:r});it.g(d.current).call(e.scale(n))}}),[u,o,l,l.bottom,l.left,l.right,l.top,t,s,c,r]);var b=Object(D.useMemo)((function(){return t&&!0===t&&Object(Ce.b)("g",{className:"x",css:To,transform:"translate(0,".concat(o-(l.bottom+a.bottom),")"),ref:d,children:Object(Ce.b)("text",{fill:"#000",x:c-60,y:"20",dy:"0.71em",textAnchor:"end",children:n})})}),[o,n,l.bottom,a.bottom,t,c]);return c&&o?b:null}XAxis_XAxis.propTypes={margin:Ji.a.shape({top:Ji.a.number.isRequired,right:Ji.a.number.isRequired,bottom:Ji.a.number.isRequired,left:Ji.a.number.isRequired}),show:Ji.a.bool,label:Ji.a.string},XAxis_XAxis.defaultProps={show:!0,label:"\u03b4 [ppm]",margin:{right:100,top:0,left:0,bottom:0}};var Mo,Ao=Object(D.memo)(XAxis_XAxis),Eo=Object(y.css)(Mo||(Mo=Object(x.a)(["\n  user-select: 'none';\n  -webkit-user-select: none; /* Chrome all / Safari all */\n  -moz-user-select: none; /* Firefox all */\n\n  path,\n  line {\n    fill: none;\n    stroke: black;\n    stroke-width: 1;\n    shape-rendering: crispEdges;\n    user-select: 'none';\n    -webkit-user-select: none; /* Chrome all / Safari all */\n    -moz-user-select: none; /* Firefox all */\n  }\n"])));function YAxis(e){var t=e.show,n=e.label,a=e.margin,i=Object(D.useRef)(),r=useChartData(),o=r.yDomain,c=r.width,l=r.height,s=r.activeTab,u=r.tabActiveSpectrum,d=r.margin;Object(D.useEffect)((function(){var e=it.b().ticks(8).tickFormat(it.d("0"));if(t&&o){var n=get2DYScale({height:l,yDomain:o,margin:d});it.g(i.current).call(e.scale(n))}}),[t,o,s,u,l,d]);var b=Object(D.useMemo)((function(){return t&&!0===t&&Object(Ce.b)(D.Fragment,{children:Object(Ce.b)("g",{className:"y",css:Eo,transform:"translate(".concat(c-a.right,")"),ref:i,children:Object(Ce.b)("text",{fill:"#000",x:-a.top,y:-(a.right-5),dy:"0.71em",transform:"rotate(-90)",textAnchor:"end",children:n})})})}),[n,a.right,a.top,t,c]);return c&&l?b:null}YAxis.defaultProps={show:!0,label:"",margin:{right:50,top:0,bottom:0,left:0}};var Po=Object(D.memo)(YAxis);var Io,Fo=function ZonesWrapper(e){var t=function Wrapper(t){var n=useChartData(),a=n.data,i=n.activeSpectrum,r=n.xDomain,o=n.yDomain,c=n.activeTab,l=n.tabActiveSpectrum,s=n.displayerKey,u=usePreferences(),d=Object(D.useMemo)((function(){return a&&i&&i.id?a.find((function(e){return e.id===i.id}))||{zones:{},info:{},display:{}}:{}}),[i,a]),b=d.zones,f=void 0===b?{}:b,p=d.info,h=void 0===p?{}:p,g=d.display,m=void 0===g?{}:g,j=Object(D.useMemo)((function(){return l&&Object.keys(l).length>0?Object.keys(l):null}),[l]),O=t.forwardedRef,x=Object(ge.a)(t,["forwardedRef"]);return Object(N.jsx)(e,Object(v.a)(Object(v.a)({},x),{},{zones:f,display:m,info:h,xDomain:r,yDomain:o,preferences:u,activeTab:c,nucleus:j,displayerKey:s,ref:O}))};return Object(D.memo)(Object(D.forwardRef)((function(e,n){return Object(N.jsx)(t,Object(v.a)(Object(v.a)({},e),{},{forwardedRef:n}))})))},_o=function getPubIntegral(e,t){return function getDiaIDs(e,t){return[].concat(e[t].diaID||[],e.signal?e.signal.map((function(e){return e[t].diaID||[]})).flat():[])}(e,t).length},Ro=function setPubIntegral(e,t){e[t].pubIntegral=_o(e,t),0===e[t].pubIntegral&&delete e[t].pubIntegral},No=function resetDiaIDs(e,t){return delete e[t].diaID,delete e.pubIntegral,e.signal.forEach((function(e){delete e[t].diaID})),e},Lo=function unlink(e,t,n,a){return void 0!==t&&void 0!==a?(!0===t?delete e[a].diaID:void 0!==n&&delete e.signal[n][a].diaID,Ro(e,a)):void 0!==a?(No(e,a),Ro(e,a)):["x","y"].forEach((function(t){No(e,t),Ro(e,t)})),e},zo=function unlinkInAssignmentData(e,t,n){var a=t.reduce((function(e,t){return e.push(t.id),t.signal&&e.concat(t.signal.map((function(e){return e.id}),[])),e}),[]);n?e.dispatch({type:"REMOVE_ALL",payload:{id:a,axis:n}}):(e.dispatch({type:"REMOVE_ALL",payload:{id:a,axis:"x"}}),e.dispatch({type:"REMOVE_ALL",payload:{id:a,axis:"y"}}))},Ho=function buildID(e,t){return"".concat(e).concat("___").concat(t)},Bo=Object(y.css)(Io||(Io=Object(x.a)(["\n  stroke: green;\n  stroke-width: 2;\n  opacity: 0.5;\n"])));var Xo=function SignalDeltaLine(e){var t=e.delta,n=e.axis,a=e.show,i=useChartData(),r=i.margin,o=i.width,c=i.height,l=i.xDomain,s=i.yDomain,u=get2DXScale({margin:r,width:o,xDomain:l}),d=get2DYScale({margin:r,height:c,yDomain:s}),b=Object(D.useMemo)((function(){return!0===a?"X"===n?Object(Ce.b)("line",{css:Bo,x1:u(t),x2:u(t),y1:d(s[0]),y2:d(s[1])},"signalLine_".concat(t,"_X")):"Y"===n?Object(Ce.b)("line",{css:Bo,x1:u(l[0]),x2:u(l[1]),y1:d(t),y2:d(t)},"signalLine_".concat(t,"_Y")):null:null}),[n,t,u,d,a,l,s]);return Object(Ce.b)("g",{children:b})};var Vo,Yo,Zo=function SignalCrosshair(e){var t=e.signal,n=Object(D.useMemo)((function(){return[Ho(t.id,"Crosshair"),Ho(t.id,"Crosshair_X")]}),[t.id]),a=Object(D.useMemo)((function(){return[Ho(t.id,"Crosshair"),Ho(t.id,"Crosshair_Y")]}),[t.id]),i=Object(vi.c)(n),r=Object(vi.c)(a);return Object(Ce.c)("g",{children:[Object(Ce.b)(Xo,{delta:t.x.delta,axis:"X",show:i.isActive}),Object(Ce.b)(Xo,{delta:t.y.delta,axis:"Y",show:r.isActive})]})},Uo=Object(D.memo)((function(e){var t=e.signal,n=e.isVisible,a=useChartData(),i=a.margin,r=a.width,o=a.height,c=a.xDomain,l=a.yDomain,s=get2DXScale({margin:i,width:r,xDomain:c}),u=get2DYScale({margin:i,height:o,yDomain:l}),d=Object(D.useCallback)((function(e){return[e].concat(Ho(e,"X"),Ho(e,"Y"))}),[]),b=useAssignment(t.id),f=Object(vi.c)(d(b.id)),p=Object(vi.d)(),h=Object(D.useState)(!1),g=Object(O.a)(h,2),m=g[0],j=g[1];return Object(D.useEffect)((function(){p.highlight.highlighted.some((function(e){return d(t.id).includes(e)}))||b.isActive?j(!0):j(!1)}),[b.isActive,d,p.highlight.highlighted,t.id]),t?Object(Ce.c)("g",{className:"zone-signal",onMouseEnter:function onMouseEnter(){b.onMouseEnter(),f.show()},onMouseLeave:function onMouseLeave(){b.onMouseLeave(),f.hide()},children:[n.signals&&Object(Ce.c)("g",{children:[Object(Ce.b)("circle",{cx:s(t.x.delta),cy:u(t.y.delta),r:m?6:4,fill:m?"green":"darkgreen"},t.id),Object(Ce.b)(Zo,{signal:t})]}),Object(Ce.b)("g",{className:"zone-signal-peak",children:n.peaks&&t.peak.map((function(e,n){return Object(Ce.b)("circle",{cx:s(e.x),cy:u(e.y),r:2,fill:"black"},"".concat(t.id+n))}))})]}):null})),Ko=Object(y.css)(Vo||(Vo=Object(x.a)(["\n  pointer-events: bounding-box;\n  @-moz-document url-prefix() {\n    pointer-events: fill;\n  }\n  user-select: 'none';\n  -webkit-user-select: none; /* Chrome all / Safari all */\n  -moz-user-select: none; /* Firefox all */\n\n  // // disabled because Resizable component appears now when hovering over it\n  // :hover .range-area {\n  //   height: 100%;\n  //   fill: #ff6f0057;\n  //   cursor: pointer;\n  // }\n\n  .delete-button {\n    visibility: hidden;\n  }\n"]))),Wo=Object(y.css)(Yo||(Yo=Object(x.a)(["\n  pointer-events: bounding-box;\n\n  @-moz-document url-prefix() {\n    pointer-events: fill;\n  }\n  .Integral-area {\n    // height: 100%;\n    fill: #ff6f0057;\n  }\n  .delete-button {\n    visibility: visible;\n    cursor: pointer;\n  }\n"]))),Go=function Zone(e){var t=e.zoneData,n=e.isVisible,a=t.x,i=t.y,r=t.id,o=t.signal,c=useAssignment(r),l=Object(vi.c)([c.id],vi.b.ZONE),s=useChartData(),u=s.margin,d=s.width,b=s.height,f=s.xDomain,p=s.yDomain,h=get2DXScale({margin:u,width:d,xDomain:f}),g=get2DYScale({margin:u,height:b,yDomain:p}),m=a.from,j=a.to,v=i.from,x=i.to,y=Object(D.useState)(!1),k=Object(O.a)(y,2),C=k[0],S=k[1];return Object(D.useEffect)((function(){S(!function checkZoneKind(e){return e.kind===dr}(t))}),[t]),Object(Ce.c)("g",{css:l.isActive||c.isActive?Wo:Ko,onMouseEnter:function onMouseEnter(){c.onMouseEnter(),l.show()},onMouseLeave:function onMouseLeave(){c.onMouseLeave(),l.hide()},children:[n.zones&&Object(Ce.b)("g",{transform:"translate(".concat(h(j),",").concat(g(v),")"),children:Object(Ce.b)("rect",{x:"0",width:h(m)-h(j),height:g(x)-g(v),className:"Integral-area",fill:"#0000000f",stroke:C?"#343a40":"darkgreen",strokeWidth:C?"0":"1"})}),o.map((function(e,t){return Object(Ce.b)(Uo,{signal:e,isVisible:n},"".concat(r+t))}))]},r)};Go.defaultProps={onDelete:function onDelete(){return null}};var qo=Go,Jo=Fo((function Zones(e){var t=e.zones,n=e.display,a=e.displayerKey,i=Object(D.useState)({zones:!0,signals:!0,peaks:!0}),r=Object(O.a)(i,2),o=r[0],c=r[1];return Object(D.useEffect)((function(){pi.on("onZonesVisibilityChange",(function(e){var t=e.key;c((function(e){return Object(v.a)(Object(v.a)({},e),{},Object(be.a)({},t,!e[t]))}))}))}),[]),Object(N.jsx)("g",{clipPath:"url(#".concat(a,"clip-chart-2d)"),className:"2D-Zones",children:n.isVisible&&t.values.map((function(e){return Object(N.jsx)("g",{className:"zone",children:Object(N.jsx)(qo,{zoneData:e,isVisible:o})},e.id)}))})}));function Chart2D(e){var t=e.data,n=useChartData(),a=n.width,i=n.height,r=n.margin,o=n.displayerKey;return Object(D.useMemo)((function(){return Object(N.jsxs)("svg",{viewBox:"0 0 ".concat(a," ").concat(i),width:a,height:i,id:"nmrSVG",children:[Object(N.jsx)("defs",{children:Object(N.jsx)("clipPath",{id:"".concat(o,"clip-chart-2d"),children:Object(N.jsx)("rect",{width:a-r.left-r.right,height:i-r.top-r.bottom,x:r.left,y:r.top})})}),Object(N.jsx)("rect",{width:a-r.left-r.right,height:i-r.top-r.bottom,x:r.left,y:r.top,stroke:"black",strokeWidth:"1",fill:"transparent"}),t&&t[0]&&Object(N.jsx)(wo,{data:t[0]}),t&&t[1]&&Object(N.jsx)(Do,{data:t[1]}),Object(N.jsx)(vo,{}),Object(N.jsx)(Jo,{}),Object(N.jsx)(Co,{axis:"X",show:!0}),Object(N.jsx)(Co,{axis:"Y",show:!0}),Object(N.jsxs)("g",{className:"container",style:{pointerEvents:"none"},children:[Object(N.jsx)(Ao,{}),Object(N.jsx)(Po,{})]})]})}),[a,i,o,r.left,r.right,r.top,r.bottom,t])}Chart2D.defaultProps={onDimensionChange:function onDimensionChange(){return null}},Chart2D.propsTypes={onDimensionChange:Ji.a.func.isRequired};var $o,Qo=Chart2D,ec=n(245),tc=Object(y.css)($o||($o=Object(x.a)(["\n  display: flex;\n  flex-firection: row;\n  align-items: center;\n  pointer-events: bounding-box;\n  user-select: 'none';\n  -webkit-user-select: none; /* Chrome all / Safari all */\n  -moz-user-select: none; /* Firefox all */\n  background-color: #f7f7f7;\n  height: 30px;\n  padding: 6px;\n  color: #8d0018;\n  position: absolute;\n  width: 100%;\n  bottom: 0;\n  div {\n    margin: 0px 10px;\n    display: inline-block;\n\n    .label {\n      font-size: 12px;\n      color: #4d4d4d;\n      font-weight: bold;\n    }\n    .value {\n      font-weight: bold;\n      font-size: 14px;\n    }\n    .unit {\n      font-weight: bold;\n      font-size: 10px;\n    }\n  }\n"])));var nc=function FooterBanner_FooterBanner(e){var t=e.layout,n=e.data1D,a=Object(D.useContext)(B),i=Object(D.useContext)(L),r=i.startX,o=i.endX,c=i.startY,l=i.endY,s=i.step,u=useChartData(),d=u.margin,b=u.width,f=u.height,p=u.activeSpectrum,h=u.xDomain,g=u.yDomain,m=u.yDomains,j=u.activeTab,v=u.data,x=u.selectedTool,y=a&&getLayoutID(t,{startX:a.x,startY:a.y}),k=j.split(","),C=useFormatNumberByNucleus(k),S=Object(O.a)(C,2),w=S[0],T=S[1],M=Object(D.useMemo)((function(){if(!n||0===n.length)return get2DXScale({width:b,margin:d,xDomain:h});if(x!==ti.slicingTool.id)switch(y){case mo.TOP_1D:case mo.CENTER_2D:return get2DXScale({width:b,margin:d,xDomain:h});case mo.LEFT_1D:return get2DYScale({height:f,margin:d,yDomain:g});default:return null}return null}),[n,f,d,x,y,b,h,g]),A=Object(D.useMemo)((function(){if(!n||0===n.length)return get2DYScale({height:f,margin:d,yDomain:g});if(x!==ti.slicingTool.id)switch(y){case mo.CENTER_2D:return get2DYScale({height:f,margin:d,yDomain:g});case mo.TOP_1D:return n[0]?get1DYScale(m[n[0].id],d.top):null;case mo.LEFT_1D:return n[1]?get1DYScale(m[n[1].id],d.left):null;default:return null}return null}),[n,f,d,x,y,g,m]);if(!p||!a||a.y<10||a.x<10||a.x>b-d.right||a.y>f-d.bottom)return Object(Ce.b)("div",{css:tc});var E=function getRealYValue(e){var t=null;if(y===mo.TOP_1D?t=0:y===mo.LEFT_1D&&(t=1),null!=t&&null!=M){var a=Object(Xe.i)(n[t].data.x,M.invert(e));return n[t].data.y[a]}return 1},P=function getXValue(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(null!=M)switch(y){case mo.CENTER_2D:case mo.TOP_1D:return M.invert(e||a.x);case mo.LEFT_1D:return M.invert(e||a.y);default:return 0}return 0},I=function getYValue(){if(null!=A)switch(y){case mo.CENTER_2D:case mo.TOP_1D:return A.invert(a.y);case mo.LEFT_1D:return A.invert(a.x);default:return 0}return 0},F=function getLabel(e,t,n){return y===mo.CENTER_2D?Object(Ce.c)(D.Fragment,{children:[e," ( ",Object(Ce.b)(ec.a,{mf:n})," )"]}):t};return Object(Ce.c)("div",{css:tc,children:[Object(Ce.c)("div",{children:[Object(Ce.c)("span",{className:"label",children:[F("F2","X",k[0])," :"]}),Object(Ce.b)("span",{className:"value",children:w(P())}),Object(Ce.b)("span",{className:"unit",children:"ppm"})]}),Object(Ce.c)("div",{children:[Object(Ce.c)("span",{className:"label",children:[F("F1","Y",k[1])," :"]}),Object(Ce.b)("span",{className:"value",children:T(I())}),Object(Ce.b)("span",{className:"unit",children:"ppm"})]}),Object(Ce.c)("div",{children:[Object(Ce.b)("span",{className:"label",children:"Intensity :"}),Object(Ce.b)("span",{className:"value",children:function getZValue(){if(y===mo.CENTER_2D){var e=v[p.index].data,t=e.maxX,n=e.maxY,a=e.minX,i=e.minY,r=e.z,o=(t-a)/(r[0].length-1),c=(n-i)/(r.length-1),l=Math.floor((P()-a)/o),s=Math.floor((I()-i)/c);return l<0||l>=r[0].length||(s<0||s>=r.length)?0:r[s][l]}return 0}()})]}),"brushing"===s&&Object(Ce.c)("div",{children:[Object(Ce.b)("span",{className:"label",children:" \u0394ppm :"}),Object(Ce.b)("span",{className:"value",children:function getDeltaX(){switch(y){case mo.TOP_1D:return(P(r)-P(o)).toPrecision(6);case mo.LEFT_1D:return(P(c)-P(l)).toPrecision(6);default:return 0}}()})]}),"brushing"===s&&Object(Ce.c)("div",{children:[Object(Ce.b)("span",{className:"label",children:" ratio :"}),Object(Ce.c)("span",{className:"value",children:[function getRation(){switch(y){case mo.TOP_1D:return(E(r)/(E(o)||Number.MIN_VALUE)*100).toFixed(2);case mo.LEFT_1D:return(E(c)/(E(l)||Number.MIN_VALUE)*100).toFixed(2);default:return 0}}(),"%"]})]})]})},ac={cursor:"crosshair",transformOrigin:"bottom right",position:"absolute",top:"-18px",left:"-88px",fontWeight:"bold",pointerEvents:"none",overflow:"visible",userSelect:"none",width:"85px",textAlign:"right"};var ic=function XYLabelPointer(e){var t=e.layout,n=e.data1D,a=Object(D.useContext)(B),i=Object(D.useContext)(L).step,r=useChartData(),o=r.margin,c=r.width,l=r.height,s=r.activeSpectrum,u=r.xDomain,d=r.yDomain,b=r.yDomains,f=r.activeTab,p=a&&getLayoutID(t,{startX:a.x,startY:a.y}),h=useFormatNumberByNucleus(f.split(",")),g=Object(O.a)(h,2),m=g[0],j=g[1],x=Object(D.useMemo)((function(){if(!n||0===n.length)return get2DXScale({width:c,margin:o,xDomain:u});switch(p){case mo.TOP_1D:case mo.CENTER_2D:return get2DXScale({width:c,margin:o,xDomain:u});case mo.LEFT_1D:return get2DYScale({height:l,margin:o,yDomain:d});default:return null}}),[n,l,o,p,c,u,d]),y=Object(D.useMemo)((function(){if(!n||0===n.length)return get2DYScale({height:l,margin:o,yDomain:d});switch(p){case mo.CENTER_2D:return get2DYScale({height:l,margin:o,yDomain:d});case mo.TOP_1D:return n[0]?get1DYScale(b[n[0].id],o.top):null;case mo.LEFT_1D:return n[1]?get1DYScale(b[n[1].id],o.left):null;default:return null}}),[n,l,o,p,d,b]);return!s||"brushing"===i||!a||a.y<o.top||a.x<o.left||a.x>c-o.right||a.y>l-o.bottom?null:Object(N.jsxs)("div",{style:Object(v.a)(Object(v.a)({},ac),{},{transform:"translate(".concat(a.x,"px, ").concat(a.y,"px)")}),children:[Object(N.jsx)("span",{children:j(function getYValue(){switch(p){case mo.CENTER_2D:case mo.TOP_1D:return y.invert(a.y);case mo.LEFT_1D:return y.invert(a.x);default:return 0}}())}),Object(N.jsx)("span",{style:{color:"gray"},children:","}),Object(N.jsx)("span",{style:{color:"red"},children:m(function getXValue(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;switch(p){case mo.CENTER_2D:case mo.TOP_1D:return x.invert(e||a.x);case mo.LEFT_1D:return x.invert(e||a.y);default:return 0}}())})]},"xLabelPointer")},rc=n(46);function generateID(){for(var e="",t=0;t<8;t++)e+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()));return e}function applyFilter(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=!1,i=Object(rc.a)(n);try{for(i.s();!(t=i.n()).done;){var r=t.value,o={name:r.name,label:ei[r.name].name,value:r.options},c=lookupForFilter(e,r.name);if(c){var l=ei[r.name].reduce(c.value,o.value);l.once?(a||(a=!0),null!=l.reduce&&void 0!==l.reduce&&replaceFilter(e,c.id,l.reduce)):addFilter(e,o,!Object.prototype.hasOwnProperty.call(r,"isDeleteAllow")||r.isDeleteAllow)}else addFilter(e,o,!Object.prototype.hasOwnProperty.call(r,"isDeleteAllow")||r.isDeleteAllow)}}catch(b){i.e(b)}finally{i.f()}if(a)1===n.length&&isLastFilter(e,n[0].name)?ei[n[0].name].apply(e,n[0].options):reapplyFilters(e);else{var s,u=Object(rc.a)(n);try{for(u.s();!(s=u.n()).done;){var d=s.value;ei[d.name].apply(e,d.options)}}catch(b){u.e(b)}finally{u.f()}}}function isLastFilter(e,t){var n=e.filters.findIndex((function(e){return e.name===t}));return e.filters.length===n+1}function lookupForFilter(e,t){return e.filters.find((function(e){return e.name===t}))}function reapplyFilters(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=t||e.filters;FiltersManager_enableFilter(e,null,null,n)}function FiltersManager_enableFilter(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;e.filters=e.filters.slice(0),t&&(e.filters=e.filters.map((function(e){return Object(v.a)(Object(v.a)({},e),{},{flag:e.id===t?n:e.flag})}),[])),e.data=Object(v.a)(Object(v.a)({},e.data),e.originalData),e.info=Object(v.a)(Object(v.a)({},e.info),e.originalInfo);var i=a||e.filters;for(var r in i){var o=e.filters[r];if(e.filters[r]=Object(v.a)(Object(v.a)({},e.filters[r]),{},{error:null}),o.flag)try{ei[o.name].apply(e,o.value)}catch(c){e.filters[r]=Object(v.a)(Object(v.a)({},e.filters[r]),{},{error:c.message})}}}function deleteFilter(e,t){for(var n in e.filters=e.filters.slice(0),e.filters=e.filters.filter((function(e){return e.id!==t})),e.data=Object(v.a)(Object(v.a)({},e.data),e.originalData),e.info=Object(v.a)(Object(v.a)({},e.info),e.originalInfo),e.filters){var a=e.filters[n];if(e.filters[n]=Object(v.a)(Object(v.a)({},e.filters[n]),{},{error:null}),a.flag)try{ei[a.name].apply(e,a.value)}catch(i){e.filters[n]=Object(v.a)(Object(v.a)({},e.filters[n]),{},{error:i.message})}}}function addFilter(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=generateID();e.filters=e.filters.slice(0),delete t.isSnapshot,e.filters.push(Object(v.a)(Object(v.a)({},t),{},{id:a,flag:!0,isDeleteAllow:n}))}function replaceFilter(e,t,n){e.filters=e.filters.slice(0);var a=e.filters.findIndex((function(e){return e.id===t}));delete e.filters[a].isSnapshot,e.filters[a]=Object(v.a)(Object(v.a)({},e.filters[a]),{},{value:n})}var oc=["#C10020","#007D34","#803E75","#FF6800","#B32851","#7F180D","#232C16","#A6BDD7","#CEA262","#817066","#FF8E00","#F6768E","#00538A","#FF7A5C","#53377A","#FFB300","#F4C800","#93AA00","#593315","#F13A13"],cc={cosy:{positiveColor:"darkblue",negativeColor:"blue"},roesy:{positiveColor:"#e75480",negativeColor:"yellow"},noesy:{positiveColor:"#e75480",negativeColor:"yellow"},tocsy:{positiveColor:"green",negativeColor:"yellow"},hsqc:{positiveColor:"black",negativeColor:"yellow"},hmbc:{positiveColor:"darkviolet",negativeColor:"yellow"}},lc=function percentToHex(e){var t=Math.max(0,Math.min(100,e)),n=Math.round(t/100*255).toString(16);return 100===t?"":n.padStart(2,"0")},sc=function adjustAlpha(e,t){return e+lc(t)},uc=function getColor(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100,a=oc.filter((function(e){return!t.includes(e)}));if(a.length>0&&!e)return a[0]+lc(n);var i=-.25,r=String("#".concat(Math.random().toString(16).slice(2,8).toUpperCase())).replace(/[^0-9a-f]/gi,"");r.length<6&&(r=r[0]+r[0]+r[1]+r[1]+r[2]+r[2]);var o,c,l="#";for(c=0;c<3;c++)o=parseInt(r.substr(2*c,2),16),o=Math.round(Math.min(Math.max(0,o+o*i),255)).toString(16),l+="00".concat(o).substr(o.length);return l+lc(n)},dc=uc,bc=n(209),fc={minMaxRatio:.05,realTopDetection:!0,maxCriteria:!0,smoothY:!1,nH:100,compile:!0,frequencyCluster:16,clean:!0,keepPeaks:!0,sgOptions:{windowSize:7,polynomial:3}};var pc=function detectSignal(e,t,n,a,i){var r=Object(Xe.j)(e,{from:n,to:a}),o=r.fromIndex,c=r.toIndex,l={x:e.slice(o,c),y:t.slice(o,c)},s=Object(Ve.a)(l,{frequency:i,takeBestPartMultiplet:!0,symmetrizeEachStep:!0});return{multiplicity:s.j.map((function(e){return e.multiplicity})).join(""),kind:"signal",delta:s.chemShift,j:s.j}},hc=[];function initiateDatum1D(e){var t,n={};return n.shiftX=e.shiftX||0,n.id=e.id||generateID(),n.source=Object.assign({jcampURL:null,file:{binary:null,name:"",extension:""}},e.source),n.display=Object.assign(Object(v.a)(Object(v.a)({name:(null===(t=e.display)||void 0===t?void 0:t.name)?e.display.name:generateID(),color:"black"},function Datum1D_getColor(e){if(void 0===e.display||void 0===e.display.color){var t=dc(!1,hc);return hc.push(t),{color:t}}return{}}(e)),{},{isVisible:!0,isPeaksMarkersVisible:!0,isRealSpectrumVisible:!0,isVisibleInDomain:!0}),e.display),n.info=Object.assign({nucleus:"1H",isFid:!1,isComplex:!1,dimension:1},e.info),n.originalInfo=n.info,n.meta=Object.assign({},e.meta),n.data=Object.assign({x:[],re:[],im:[],y:[]},e.data),n.originalData=n.data,n.peaks=Object.assign({values:[],options:{}},e.peaks),n.integrals=Object.assign({values:[],options:{sum:100}},e.integrals),n.filters=Object.assign([],e.filters),n.ranges=Object.assign({values:[],options:{sum:100}},e.ranges),reapplyFilters(n),function preprocessing(e){e.info.isFid&&-1===e.filters.findIndex((function(e){return e.name===ei.digitalFilter.id}))&&applyFilter(e,[{name:ei.digitalFilter.id,options:{digitalFilterValue:e.info.digitalFilter},isDeleteAllow:!1}])}(n),n.data.y=n.data.re,n}function lookupPeak(e,t){var n=t.from,a=t.to,i=e.x.findIndex((function(e){return e>=n})),r=e.x.findIndex((function(e){return e>=a}))-1;i>r&&(r=i=r);var o=e.re.slice(i,r);if(o&&o.length>0){var c=Object(io.a)(o),l=o.findIndex((function(e){return e===c}));return{x:e.x[i+l],y:c,xIndex:i+l}}return null}function updateIntegralIntegrals(e){void 0===e.options.sum&&(e.options=Object(v.a)(Object(v.a)({},e.options),{},{sum:100}));e.values=updateRelatives(e.values,e.options.sum,"integral",(function countingCondition(e){return e.kind&&ur.includes(e.kind)}))}function updateRelatives(e,t,n,a){var i=e.reduce((function(e,t){return a&&!0===a(t)?e+=Math.abs(t.absolute):e}),0),r=i>0?t/i:0;return e.map((function(e){return Object(v.a)(Object(v.a)({},e),{},Object(be.a)({},n,e.absolute*r))}))}function updateIntegralRanges(e){void 0===e.ranges.options.sum&&(e.ranges.options.sum=100);e.ranges.values=updateRelatives(e.ranges.values,e.ranges.options.sum,"integral",(function countingCondition(e){return e.signal&&function checkSignalKinds(e,t){return!e.signal.some((function(e){return void 0===e.kind||!t.includes(e.kind)}))}(e,ur)}))}function mapRanges(e,t){var n=t.data,a=n.x,i=n.re,r=getShiftX(t),o=(a[a.length-1]-a[0])/1e4;return e.reduce((function(e,n){var c,l=Object(rc.a)(t.ranges.values);try{for(l.s();!(c=l.n()).done;){var s=c.value,u=s.from,d=s.to;if(Math.abs(n.from-u)<o&&Math.abs(n.to-d)<o)return e}}catch(p){l.e(p)}finally{l.f()}var b=Object(Xe.p)({x:a,y:i},{from:n.from,to:n.to,reverse:!0}),f=n.signal.map((function(e){return Object(v.a)({kind:"signal",id:generateID(),originDelta:e.delta-r},e)}));return e.push(Object(v.a)(Object(v.a)({kind:n.signal[0].kind||dr,originFrom:n.from-r,originTo:n.to-r},n),{},{id:generateID(),absolute:b,signal:f})),e}),[])}function detectRanges(e,t){t.impurities={solvent:e.info.solvent};var n=function autoRangesDetection(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Object(Xe.h)(e.data.re),a=e.data,i=a.re,r=a.x,o=e.info,c=o.originFrequency,l=o.nucleus,s=t.windowFromIndex,u=t.windowToIndex,d=t.peakPicking,b=Object(v.a)(Object(v.a)({},fc),d),f={frequency:c,nucleus:l,noiseLevel:3*n};return void 0!==s&&void 0!==u&&(r=r.slice(s,u),i=i.slice(s,u)),Object(bc.f)({x:r,y:i},{peakPicking:b,ranges:f})}(e,t);e.ranges.values=e.ranges.values.concat(mapRanges(n,e)),updateIntegralRanges(e)}function updateXShift(e){var t=getShiftX(e);!function updatePeaksXShift(e,t){e.peaks.values=e.peaks.values.map((function(e){return Object(v.a)(Object(v.a)({},e),{},{delta:e.originDelta+t})}))}(e,t),function updateRangesXShift(e,t){e.ranges.values=e.ranges.values.map((function(e){return Object(v.a)(Object(v.a)({},e),{},{from:e.originFrom+t,to:e.originTo+t,signal:(null===e||void 0===e?void 0:e.signal)&&e.signal.map((function(e){return Object(v.a)(Object(v.a)({},e),{},{delta:e.originDelta+t})}))})}))}(e,t),function updateIntegralXShift(e,t){e.integrals.values=e.integrals.values.map((function(e){return Object(v.a)(Object(v.a)({},e),{},{from:e.originFrom+t,to:e.originTo+t})}))}(e,t)}function getShiftX(e){var t=(null===e||void 0===e?void 0:e.filters)&&(null===e||void 0===e?void 0:e.filters.find((function(e){return e.name===ei.shiftX.id})));return(null===t||void 0===t?void 0:t.flag)?t.value:0}var gc=n(766),mc={positive:{contourLevels:[0,21],numberOfLayers:10},negative:{contourLevels:[0,21],numberOfLayers:10}},jc=function(){function Processing2D(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:mc,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{positive:10,negative:10};Object(rt.a)(this,Processing2D),this.options=t;var a=n.positive,i=n.negative;this.currentLevelPositive=a,this.currentLevelNegative=i;var r=getRange(e.minX,e.maxX,e.z[0].length),o=getRange(e.minY,e.maxY,e.z.length);this.conrec=new gc.a(e.z,{xs:r,ys:o,swapAxes:!1}),this.median=e.noise,this.minMax=e}return Object(ot.a)(Processing2D,[{key:"getLevel",value:function getLevel(){return{levelPositive:this.currentLevelPositive,levelNegative:this.currentLevelNegative}}},{key:"setLevel",value:function setLevel(e,t){this.currentLevelPositive=e,this.currentLevelNegative=t}},{key:"setOptions",value:function setOptions(e){var t=e.positive.contourLevels,n=e.negative.contourLevels;this.currentLevelPositive>=t[1]?this.currentLevelPositive=t[1]:this.currentLevelPositive<=t[0]&&(this.currentLevelPositive=t[0]),this.currentLevelNegative>=n[1]?this.currentLevelNegative=n[1]:this.currentLevelNegative<=n[0]&&(this.currentLevelNegative=n[0]),this.options=e}},{key:"wheel",value:function wheel(e){var t=Math.sign(e),n=this.options.positive.contourLevels,a=this.options.negative.contourLevels;(this.currentLevelPositive>n[0]&&-1===t||this.currentLevelPositive<n[1]&&1===t)&&(this.currentLevelPositive+=t),(this.currentLevelNegative>a[0]&&-1===t||this.currentLevelNegative<a[1]&&1===t)&&(this.currentLevelNegative+=t)}},{key:"shiftWheel",value:function shiftWheel(e){var t=Math.sign(e),n=Object(O.a)(this.options.positive.contourLevels,2),a=n[0],i=n[1];if(!(this.currentLevelPositive===a&&-1===t||this.currentLevelPositive>=i&&1===t))return this.currentLevelPositive+=t,[]}},{key:"drawContours",value:function drawContours(){var e=this.currentLevelPositive/2+1,t=this.currentLevelNegative/2+1,n=this.options,a=n.positive.numberOfLayers,i=n.negative.numberOfLayers;return{positive:this.getContours(e,{nbLevels:a}),negative:this.getContours(t,{negative:!0,nbLevels:i})}}},{key:"getContours",value:function getContours(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.negative,a=void 0!==n&&n,i=t.timeout,r=void 0===i?2e3:i,o=t.nbLevels,c=void 0===o?10:o,l=Math.max(Math.abs(this.minMax.maxZ),Math.abs(this.minMax.minZ)),s=getRange(1*this.median*Math.pow(2,e),l,c,2);a&&(s=s.map((function(e){return-e})));var u=[];try{u=this.conrec.drawContour({contourDrawer:"basic",levels:s,timeout:r})}catch(d){throw console.log(d),d}return u}}]),Processing2D}();function getRange(e,t,n,a){if(a){var i=[];i[0]=0;for(var r=1;r<=n;r++)i[r]=i[r-1]+(a-1)/Math.pow(a,r);for(var o=i[n],c=new Array(n),l=0;l<n;l++)c[l]=(t-e)*(1-i[l+1]/o)+e;return c}var s=(t-e)/(n-1);return function Processing2D_range(e,t,n){for(var a=[],i=e;i<t;i+=n)a.push(i);return a}(e,t+s/2,s)}var vc=[];function initiateDatum2D(e){var t={};return t.id=e.id||generateID(),t.source=Object.assign({jcamp:null,jcampURL:null,original:[]},e.source),t.display=Object.assign(Object(v.a)(Object(v.a)({name:e.display.name||generateID(),positiveColor:"red",negativeColor:"blue"},function Datum2D_getColor(e){if(void 0===e.display||void 0===e.display.negativeColor||void 0===e.display.positiveColor){var t=function get2DColor(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(!cc[e]){var n=uc(!1,t);return{positiveColor:n,negativeColor:sc(n,50)}}return cc[e]}(e.info.experiment,vc);return vc.push(t.positiveColor),t}return{}}(e)),{},{isPositiveVisible:!0,isNegativeVisible:!0,isVisible:!0,contourOptions:mc,dimension:2}),e.display),t.info=Object.assign({nucleus:["1H","1H"],isFid:!1,isComplex:!1},e.info),t.originalInfo=t.info,t.meta=Object.assign({},e.meta),t.data=Object.assign({z:[],minX:0,minY:0,maxX:0,maxY:0},e.data),t.originalData=t.data,t.filters=Object.assign([],e.filters),t.zones=Object.assign({values:[],options:{}},e.zones),t.processingController=new jc(t.data,t.display.contourOptions),reapplyFilters(t),t}function getShift(e){var t={xShift:0,yShift:0};return(null===e||void 0===e?void 0:e.filters)&&(t=e.filters.reduce((function(e,t){return t.name===ei.shift2DX.id&&(e.xShift=(null===t||void 0===t?void 0:t.flag)?t.value:0),t.name===ei.shift2DY.id&&(e.yShift=(null===t||void 0===t?void 0:t.flag)?t.value:0),e}),{xShift:0,yShift:0})),t}function updateShift(e){var t=getShift(e);!function updateZonesShift(e,t){var n=t.xShift,a=t.yShift;e.zones.values=e.zones.values.map((function(e){var t;return Object(v.a)(Object(v.a)({},e),{},{signal:null===(t=e.signal)||void 0===t?void 0:t.map((function(e){return Object(v.a)(Object(v.a)({},e),{},{x:Object(v.a)(Object(v.a)({},e.x),{},{delta:e.x.originDelta+n}),y:Object(v.a)(Object(v.a)({},e.y),{},{delta:e.y.originDelta+a})})}))})}))}(e,{xShift:t.xShift,yShift:t.yShift})}function Datum2D_getMissingProjection(e,t){var n=e.info.nucleus.indexOf(t);-1===n&&(n=0);var a={nucleus:e.info.nucleus[n],isFid:!1,isComplex:!1,dimension:1},i=0===n?e.data.minX:e.data.minY,r=0===n?e.data.maxX:e.data.maxY,o=0===n?e.data.z.length:e.data.z[0].length,c=new Float64Array(o);if(1===n)for(var l=0;l<e.data.z.length;l++)for(var s=0;s<e.data.z[0].length;s++)c[l]+=e.data.z[l][s];else for(var u=0;u<e.data.z[0].length;u++)for(var d=0;d<e.data.z.length;d++)c[u]+=e.data.z[d][u];return initiateDatum1D({info:a,data:{x:Object(Xe.t)({from:i,to:r},o),re:c}})}function getDetectionZones(e,t){var n={};return n=t.selectedZone?function getSubMatrix(e,t){var n=t.fromX,a=t.toX,i=t.fromY,r=t.toY,o=e.data,c=(o.maxX-o.minX)/(o.z[0].length-1),l=(o.maxY-o.minY)/(o.z.length-1),s=Math.floor((n-o.minX)/c),u=Math.floor((i-o.minY)/l),d=Math.floor((a-o.minX)/c),b=Math.floor((r-o.minY)/l);if(s>d){var f=[d,s];s=f[0],d=f[1]}if(u>b){var p=[b,u];u=p[0],b=p[1]}for(var h={z:[],maxX:o.minX+d*c,minX:o.minX+s*c,maxY:o.minY+b*l,minY:o.minY+u*l},g=Number.MIN_SAFE_INTEGER,m=Number.MAX_SAFE_INTEGER,j=d-s+1,v=u;v<b;v++){for(var O=new Float32Array(j),x=s,y=0;y<j;y++)O[y]=o.z[v][x++];var k,C=Object(rc.a)(O);try{for(C.s();!(k=C.n()).done;){var D=k.value;g<D&&(g=D),m>D&&(m=D)}}catch(S){C.e(S)}finally{C.f()}h.z.push(Array.from(O))}return h.minZ=m,h.maxZ=g,h}(e,t.selectedZone):e.data,t.info=e.info,function autoZonesDetection(e,t){var n=t.thresholdFactor,a=t.clean,i=t.maxPercentCutOff,r=t.enhanceSymmetry,o=t.convolutionByFFT,c=t.info,l=c.nucleus,s=c.originFrequency,u=l[0]===l[1];return Object(bc.g)(e,{isHomoNuclear:u,nucleus:l,observeFrequencies:s,thresholdFactor:n,clean:a,maxPercentCutOff:i,enhanceSymmetry:r,convolutionByFFT:o})}(n,t)}function detectZones(e,t){var n=getDetectionZones(e,t),a=getShift(e),i=a.xShift,r=a.yShift,o=e.data,c=o.minX,l=o.maxX,s=o.minY,u=o.maxY,d=Math.abs(l-c)/1e4,b=Math.abs(u-s)/1e4,f=n.reduce((function(t,n){var a,o=Object(O.a)(n.fromTo,2),c=o[0],l=o[1],s=Object(rc.a)(e.zones.values);try{for(s.s();!(a=s.n()).done;){var u=a.value,f=u.x,p=u.y;if(Math.abs(c.from-f.from)<d&&Math.abs(c.to-f.to)<d&&Math.abs(l.from-p.from)<b&&Math.abs(l.to-p.to)<b)return t}}catch(h){s.e(h)}finally{s.f()}return t.push({id:generateID(),x:{from:c.from,to:c.to},y:{from:l.from,to:l.to},signal:[{id:generateID(),peak:n.peaks,x:{originDelta:n.shiftX-i,delta:n.shiftX,diaID:[]},y:{originDelta:n.shiftY-r,delta:n.shiftY,diaID:[]},kind:"signal"}],kind:dr}),t}),[]);e.zones.values=e.zones.values.concat(f)}function SliceScale_getYScale(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10;return Object(it.f)(Object(it.c)(t),[e-n,n])}function HorizontalSliceChart(e){var t=e.margin,n=e.data,a=useChartData(),i=a.width,r=a.margin,o=a.xDomain,c=a.displayerKey,l=r.top,s=Object(D.useMemo)((function(){if(n){var e=n.x,a=n.re,c=get2DXScale({margin:r,width:i,xDomain:o}),s=SliceScale_getYScale(l,a,t),u=Object(Xe.s)({x:e,y:a},{from:o[0],to:o[1]}),d="M ".concat(c(u.x[0])," ").concat(s(u.y[0])," ");return d+=u.x.slice(1).reduce((function(e,t,n){return e+=" L ".concat(c(t)," ").concat(s(u.y[n+1]))}),"")}return null}),[n,l,t,r,i,o]);return i&&l?Object(N.jsxs)("svg",{viewBox:"0 0 ".concat(i," ").concat(l),width:i,height:l,children:[Object(N.jsx)("defs",{children:Object(N.jsx)("clipPath",{id:"".concat(c,"clip-top"),children:Object(N.jsx)("rect",{width:i-r.left-r.right,height:l,x:r.left,y:"".concat(0)})})}),Object(N.jsxs)("g",{clipPath:"url(#".concat(c,"clip-top)"),children:[Object(N.jsx)("rect",{width:i-r.left-r.right,height:l,x:r.left,y:"".concat(0),fillOpacity:"0"}),Object(N.jsx)("path",{className:"line",stroke:"red",fill:"none",d:s})]})]}):null}HorizontalSliceChart.defaultProps={margin:10};var Oc=Object(D.memo)(HorizontalSliceChart);function VerticalSliceChart(e){var t=e.margin,n=e.data,a=useChartData(),i=a.height,r=a.margin,o=a.yDomain,c=a.displayerKey,l=r.left,s=Object(D.useMemo)((function(){if(n){var e=n.x,a=n.re,c=get2DYScale({height:i,margin:r,yDomain:o}),s=SliceScale_getYScale(l,a,t),u=Object(Xe.s)({x:e,y:a},{from:o[0],to:o[1]}),d=u.x.length-1,b=u.y.length-1,f="M  ".concat(s(u.y[b])," ").concat(c(d)," ");return f+=u.x.slice(0,d).reduceRight((function(e,t,n){return e+=" L  ".concat(s(u.y[n])," ").concat(c(t))}),"")}return null}),[n,l,r,t,i,o]),u=i-r.bottom-r.top;return u&&l?Object(N.jsxs)("svg",{viewBox:"0 0 ".concat(l," ").concat(u+r.top),width:l,height:u+r.top,children:[Object(N.jsx)("defs",{children:Object(N.jsx)("clipPath",{id:"".concat(c,"clip-left"),children:Object(N.jsx)("rect",{width:l,height:u,x:"0",y:r.top})})}),Object(N.jsx)("g",{clipPath:"url(#".concat(c,"clip-left)"),children:Object(N.jsx)("path",{className:"line",stroke:"red",fill:"none",d:s})})]}):null}VerticalSliceChart.defaultProps={margin:10};var xc=Object(D.memo)(VerticalSliceChart);function SlicingView(){var e=useChartData(),t=e.width,n=e.height,a=e.margin,i=e.activeSpectrum,r=e.data,o=e.xDomain,c=e.yDomain,l=function useMouseTracker(){return Object(D.useContext)(B)}(),s=Object(D.useMemo)((function(){if(l&&i.id){var e=l.x,s=l.y,u=get2DXScale({margin:a,width:t,xDomain:o}),d=get2DYScale({margin:a,height:n,yDomain:c}),b=function getSlice(e,t){var n=e.data,a=(n.maxX-n.minX)/(n.z[0].length-1),i=(n.maxY-n.minY)/(n.z.length-1),r=Math.floor((t.x-n.minX)/a),o=Math.floor((t.y-n.minY)/i);if(!(r<0||r>=n.z[0].length)&&!(o<0||o>=n.z.length)){for(var c={nucleus:e.info.nucleus[0],isFid:!1,isComplex:!1,dimension:1},l={x:Object(Xe.t)({from:e.data.minX,to:e.data.maxX},e.data.z[0].length),re:new Float64Array(e.data.z[0].length)},s=0;s<e.data.z[0].length;s++)l.re[s]+=e.data.z[o][s];for(var u={nucleus:e.info.nucleus[1],isFid:!1,isComplex:!1,dimension:1},d={x:Object(Xe.t)({from:e.data.minY,to:e.data.maxY},e.data.z.length),re:new Float64Array(e.data.z.length)},b=e.data.z.length-1,f=0;f<e.data.z.length;f++)d.re[f]+=e.data.z[b--][r];return{horizontal:initiateDatum1D({info:c,data:l}),vertical:initiateDatum1D({info:u,data:d})}}}(r[i.index],{x:u.invert(e),y:d.invert(s)});return Object(N.jsxs)("svg",{viewBox:"0 0 ".concat(t," ").concat(n),width:t,height:n,style:{position:"absolute",backgroundColor:"rgba(255,255,255,0.8)"},children:[b&&b.horizontal&&Object(N.jsx)(Oc,{data:b.horizontal.data}),b&&b.vertical&&Object(N.jsx)(xc,{data:b.vertical.data})]})}return null}),[l,i.id,i.index,a,t,o,n,c,r]);return l?s:null}SlicingView.defaultProps={onDimensionChange:function onDimensionChange(){return null}},SlicingView.propsTypes={onDimensionChange:Ji.a.func.isRequired};var yc=SlicingView;var kc,Cc=function Viewer2D(e){var t=e.emptyText,n=void 0===t?void 0:t,a=useChartData(),i=a.selectedTool,r=a.isLoading,o=a.data,c=a.margin,l=a.tabActiveSpectrum,s=a.activeTab,u=useDispatch(),d=Object(D.useMemo)((function(){return s.split(",").reduce((function(e,t){if(l[t]&&l[t].id){var n=l[t].id,a=o.find((function(e){return e.id===n&&!e.info.isFid}));a&&e.push(a)}else e.push(null);return e}),[])}),[s,o,l]),b=function get2DDimensionLayout(e){var t=e.width,n=e.height,a=e.margin;return{CENTER_2D:{startX:a.left,startY:a.top,endX:t-a.right,endY:n-a.bottom},TOP_1D:{startX:a.left,startY:0,endX:t-a.right,endY:a.top},LEFT_1D:{startX:0,startY:a.top,endX:a.left,endY:n-a.bottom}}}(a),f=Object(D.useCallback)((function(e){if(getLayoutID(b,e))if(e.altKey)i;else if(e.shiftKey)switch(i){case ti.zone2D.id:u(Object(v.a)({type:Bn},e))}else if(null!=i)return u(Object(v.a)(Object(v.a)({type:ln},e),{},{trackID:getLayoutID(b,e)}))}),[i,u,b]),p=Object(D.useCallback)((function(e){var t=e.x,n=e.y,a=getLayoutID(b,{startX:t,startY:n});a&&u({type:Bt,trackID:a})}),[b,u]),h=function handleZoom(e){var t=e.x,n=e.y,a=getLayoutID(b,{startX:t,startY:n});a&&u("CENTER_2D"===a?Object(v.a)({type:Hn},e):Object(v.a)(Object(v.a)({type:Gt},e),{},{trackID:a}))},g=Object(D.useCallback)((function(e){e.x,e.y}),[i]),m=Object(E.a)((function(){return Object(N.jsxs)(D.Fragment,{children:[Object(N.jsx)(Be,{isLoading:r,emptyText:n}),o&&o.length>0&&Object(N.jsx)(BrushTracker,{onBrush:f,onDoubleClick:p,onClick:g,onZoom:h,style:{width:"100%",height:"100%",margin:"auto",position:"relative",overflow:"hidden"},children:Object(N.jsxs)(MouseTracker,{style:{width:"100%",height:"100%",position:"absolute"},children:[i&&i===ti.slicingTool.id&&Object(N.jsx)(yc,{}),Object(N.jsx)(ui,{}),d&&Object(N.jsx)(ic,{data1D:d,layout:b}),Object(N.jsx)(ci,{brushType:oi,dimensionBorder:b.CENTER_2D}),Object(N.jsxs)(N.Fragment,{children:[d&&d[0]&&Object(N.jsx)(ci,{brushType:ii,dimensionBorder:b.TOP_1D,height:c.top}),d&&d[1]&&Object(N.jsx)(ci,{brushType:ri,dimensionBorder:b.LEFT_1D,width:c.left})]}),d&&Object(N.jsx)(nc,{data1D:d,layout:b}),Object(N.jsx)(Qo,{data:d})]})})]})}),[]),j=Object(O.a)(m,2),x=j[0],y=j[1],k=y.width,C=y.height,S=Object(D.useState)(),w=Object(O.a)(S,2),T=w[0],M=w[1];return Object(P.a)((function(){return M({width:k,height:C})}),400,[k,C]),Object(D.useEffect)((function(){T&&isFinite(T.width)&&isFinite(T.height)&&u(Object(v.a)({type:Nt},T))}),[u,T]),x},Dc=n(47),Sc=n(90),wc={container:{margin:"25px"},header:{backgroundColor:"#ffffff",padding:"20px",borderRadius:"10px",fontSize:"30px",textAlign:"center"},body:{whiteSpace:"pre-wrap",backgroundColor:"white",padding:"20px",borderRadius:"10px",color:"red"}},Tc=function(e){Object(Dc.a)(ErrorBoundary,e);var t=Object(Sc.a)(ErrorBoundary);function ErrorBoundary(e){var n;return Object(rt.a)(this,ErrorBoundary),(n=t.call(this,e)).state={error:null,errorInfo:null},n}return Object(ot.a)(ErrorBoundary,[{key:"componentDidCatch",value:function componentDidCatch(e,t){this.setState({error:e,errorInfo:t})}},{key:"render",value:function render(){return this.state.errorInfo?Object(N.jsxs)("div",{style:wc.container,children:[Object(N.jsx)("p",{style:wc.header,children:"Something went wrong."}),Object(N.jsxs)("details",{style:wc.body,children:[this.state.error,Object(N.jsx)("br",{}),this.state.errorInfo.componentStack]})]}):this.props.children}}]),ErrorBoundary}(D.Component),Mc=Object(D.createContext)(),Ac=Mc.Provider,Ec=function useAlert(){return Object(D.useContext)(Mc)},Pc=Object(y.css)(kc||(kc=Object(x.a)(["\n  width: 40px;\n  height: 40px;\n  margin: 0 auto;\n  :after {\n    content: ' ';\n    display: block;\n    width: 30px;\n    height: 30px;\n    margin-top: 10px;\n    border-radius: 50%;\n    border: 4px solid;\n    border-color: #fff transparent #fff transparent;\n    animation: ring-animation 1s linear infinite;\n  }\n  @keyframes ring-animation {\n    0% {\n      transform: rotate(0deg);\n    }\n    100% {\n      transform: rotate(360deg);\n    }\n  }\n"]))),Ic=function ProgressIndicator(){return Object(Ce.b)("div",{css:Pc})};function Alert_Provider_Provider(e){var t=e.children,n=e.wrapperRef,a=e.offset,i=e.position,r=e.timeout,o=e.type,c=e.transition,l=Object(ge.a)(e,["children","wrapperRef","offset","position","timeout","type","transition"]),s=Object(D.useRef)(null),u=Object(D.useRef)(null),d=Object(D.useRef)([]),b=Object(D.useState)([]),f=Object(O.a)(b,2),p=f[0],h=f[1];Object(D.useEffect)((function(){s.current=document.createElement("div");var e=s.current,t=d.current;return n&&n.appendChild(e),function(){e&&n&&(t.forEach(clearTimeout),n.removeChild(e))}}),[n]);var g=Object(D.useCallback)((function(e){h((function(t){var n=t.length,a=t.filter((function(t){return t.id!==e.id}));return n>a.length&&e.options.onClose&&e.options.onClose(),a}))}),[]),m=Object(D.useCallback)((function(){u.current.alerts.forEach(g)}),[g]),j=Object(D.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Math.random().toString(36).substr(2,9),a=Object(v.a)({position:t.position||i,timeout:r,type:o,backgroundColor:"black",color:"white"},t),c={id:n,message:e,options:a,close:function(){return g(c)}};if(c.options.timeout){var l=setTimeout((function(){g(c),d.current.splice(d.current.indexOf(l),1)}),c.options.timeout);d.current.push(l)}return h((function(e){return e.concat(c)})),c.options.onOpen&&c.options.onOpen(),c}),[i,g,r,o]),x=Object(D.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.type=Q,t=Object(v.a)({backgroundColor:"#28ba62",color:"white"},t),j(e,t)}),[j]),y=Object(D.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.type=ee,t=Object(v.a)({backgroundColor:"#cf3c4f",color:"white"},t),j(e,t)}),[j]),k=Object(D.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.type=$,t.color="#28ba62",j(e,t)}),[j]),C=Object(D.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Process in progress",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.type=te,t.timeout=0,t.backgroundColor="#232323",new Promise((function(n){var a=j(e,t);setTimeout((function(){n((function(){return g(a)}))}),500)}))}),[g,j]),S=Object(D.useCallback)((function(e){g(e)}),[g]),w=Yr(p,(function(e){return e.options.position})),T=Object(D.useMemo)((function(){return n?n.getBoundingClientRect():{top:0,left:0,width:window.innerWidth,height:window.innerHeight}}),[n]);return Object(N.jsxs)(Ac,{value:{alerts:p,show:j,remove:g,removeAll:m,success:x,error:y,info:k,showLoading:C},children:[t,s.current&&Object(fe.createPortal)(Object(N.jsx)(D.Fragment,{children:Object.keys(J).map((function(e){var t=J[e];return Object(N.jsx)(he.a,Object(v.a)(Object(v.a)({appear:!0,options:{position:t,zIndex:999999},component:ke,containerStyle:T},l),{},{children:w[t]?w[t].map((function(e){return Object(N.jsx)(xe,{type:c,children:Object(N.jsxs)("div",{style:{margin:a,padding:"25px",borderRadius:"10px",pointerEvents:"all",backgroundColor:e.options.backgroundColor,color:e.options.color,minHeight:"60px",position:"relative"},children:[Object(N.jsx)("button",{style:{position:"absolute",right:"5px",top:"5px",border:"none",backgroundColor:"transparent",color:"white"},type:"button",onClick:function onClick(){return S(e)},children:Object(N.jsx)(Ze.G,{})}),Object(N.jsx)("span",{children:e.message}),e.options.type===te&&Object(N.jsx)(Ic,{})]},e.id)},e.id)})):null}),t)}))}),s.current)]})}Alert_Provider_Provider.defaultProps={offset:"5px",position:J.BOTTOM_CENTER,transition:ne,wrapperRef:null,timeout:3e3};var Fc=Alert_Provider_Provider,_c=n(761);function fromBruker(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.dependentVariables,a=e.info,i=e.meta,r=getData(n[0].components);r.im&&(a.isComplex=!0),Array.isArray(a.nucleus)&&(a.nucleus=a.nucleus[0]);var o=initiateDatum1D(Object(v.a)(Object(v.a)({},t),{},{info:a,meta:i,data:r}));return o}function fromCSD(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.dimensions[0],a=e.dependentVariables,i=n.quantityName,r=n.count,o=n.increment.magnitude,c=n.originOffset.magnitude,l=n.coordinatesOffset.magnitude,s=a[0].components[0],u=[],d=[],b=s.length-1;b>0;b-=2)u.push(s[b-1]),d.push(s[b]);var f,p,h={};switch(i){case"frequency":p=0+l/c*1e6,f=o/c*1e6,h.re=u,h.im=d;break;case"time":p=c,f=o,h.re=u.reverse(),h.im=d.reverse().map((function(e){return-e}))}for(var g=[],m=0;m<r;m++)g.push(p+m*f);h.x=g;var j=initiateDatum1D(Object(v.a)(Object(v.a)({},t),{},{data:h}));return j}function getData(e){var t=e[0]&&e[0].data&&e[0].data.x?e[0].data.x:[],n=e[0]&&e[0].data&&e[0].data.y?e[0].data.y:[],a=e[1]&&e[1].data&&e[1].data.y?e[1].data.y:null;return t[0]>t[1]&&(t.reverse(),n.reverse(),a&&a.reverse()),{x:t,re:n,im:a}}function Data2DManager_fromBruker(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.dependentVariables,a=e.meta,i=n[0].components,r=initiateDatum2D(Object(v.a)(Object(v.a)({},t),{},{meta:a,data:i}));return r}function Data2DManager_fromCSD(e){var t=initiateDatum2D({});return t}function addJcampFromURL(e,t,n){return fetch(t).then((function(e){return e.arrayBuffer()})).then((function(t){addJcamp(e,t,n)}))}function addJcamp(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=Object(_c.b)(t,{noContour:!0,xy:!0,keepRecordsRegExp:/.*/,profiling:!0});if(0!==a.length){var i,r=Object(rc.a)(a);try{for(r.s();!(i=r.n()).done;){var o=i.value,c=o.dependentVariables;c[0].components&&(c[0].components.length>0||c[0].components.z.length)&&addJcampSS(e,o,n)}}catch(l){r.e(l)}finally{r.f()}}}function addJcampSS(e,t,n){var a=t.info.dimension;1===a&&e.push(function fromParsedJcamp(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.dependentVariables,a=e.info,i=e.meta,r=getData(n[0].components);return Array.isArray(a.nucleus)&&(a.nucleus=a.nucleus[0]),initiateDatum1D(Object(v.a)(Object(v.a)({},t),{},{info:a,meta:i,data:r}))}(t,n)),2===a&&e.push(function Data2DManager_fromParsedJcamp(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.dependentVariables,a=e.info,i=e.meta,r=n[0].components;return initiateDatum2D(Object(v.a)(Object(v.a)({},t),{},{info:a,meta:i,data:r}))}(t,n))}function addData(e,t){var n=t.info.dimension;1===n&&e.push(initiateDatum1D(t)),2===n&&e.push(initiateDatum2D(t))}function addJDF(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=Object(_c.c)(t,{}),i=a.description,r=i.metadata;delete i.metadata,i.acquisitionMode=0,i.experiment=1===i.dimension?"1d":"2d",i.type="NMR SPECTRUM",i.nucleus=i.nucleus[0],i.numberOfPoints=i.numberOfPoints[0],i.acquisitionTime=i.acquisitionTime[0],i.baseFrequency=i.baseFrequency[0],i.frequencyOffset=i.frequencyOffset[0],i.spectralWidthClipped=a.application.spectralWidthClipped,1===i.dimension&&a.dependentVariables&&e.push(fromCSD(a,Object(v.a)(Object(v.a)({},n),{},{display:Object(v.a)({},n.display),info:i,meta:r}))),2===i.dimension&&i.isFt&&e.push(Data2DManager_fromCSD(a,Object(v.a)(Object(v.a)({},n),{},{display:Object(v.a)({},n.display),info:i})))}function fromJSON(){return _fromJSON.apply(this,arguments)}function _fromJSON(){return(_fromJSON=Object(Vr.a)(Xr.a.mark((function _callee(){var e,t,n,a,i,r,o=arguments;return Xr.a.wrap((function _callee$(c){for(;;)switch(c.prev=c.next){case 0:e=o.length>0&&void 0!==o[0]?o[0]:[],t=[],n=[],a=Object(rc.a)(e);try{for(a.s();!(i=a.n()).done;)null!=(r=i.value).source.jcampURL?n.push(addJcampFromURL(t,r.source.jcampURL,r)):addData(t,r)}catch(l){a.e(l)}finally{a.f()}return c.next=7,Promise.all(n);case 7:return c.abrupt("return",t);case 8:case"end":return c.stop()}}),_callee)})))).apply(this,arguments)}function addBruker(e,t){return _addBruker.apply(this,arguments)}function _addBruker(){return(_addBruker=Object(Vr.a)(Xr.a.mark((function _callee2(e,t){var n,a,i,r,o,c,l,s;return Xr.a.wrap((function _callee2$(u){for(;;)switch(u.prev=u.next){case 0:return n=[],u.next=3,Object(_c.a)(t,{xy:!0,noContours:!0});case 3:a=u.sent,i=a,r=Object(rc.a)(i);try{for(r.s();!(o=r.n()).done;)c=o.value,l=c.info,s=c.dependentVariables,1===l.dimension?s[0].components&&n.push(fromBruker(c,Object(v.a)(Object(v.a)({},e),{},{display:Object(v.a)({},e.display)}))):2===l.dimension&&l.isFt&&n.push(Data2DManager_fromBruker(c,Object(v.a)(Object(v.a)({},e),{},{info:l,display:Object(v.a)({},e.display)})))}catch(d){r.e(d)}finally{r.f()}return u.abrupt("return",n);case 8:case"end":return u.stop()}}),_callee2)})))).apply(this,arguments)}function SpectraManager_toJSON(e){var t=e||{data:[],molecules:[],preferences:{},correlations:{},multipleAnalysis:{},exclusionZones:{}},n=t.data,a=t.molecules,i=t.preferences,r=t.correlations,o=t.multipleAnalysis,c=t.exclusionZones;return{spectra:n.map((function(e){return 1===e.info.dimension?function toJSON(e){return Object(v.a)(Object(v.a)({id:e.id,source:{jcampURL:e.source.jcampURL},display:e.display},!e.source.jcampURL&&{data:e.originalData,info:e.originalInfo,meta:e.meta}),{},{peaks:e.peaks,integrals:e.integrals,ranges:e.ranges,filters:e.filters})}(e):function Datum2D_toJSON(e){return Object(v.a)(Object(v.a)({id:e.id,source:{jcampURL:e.source.jcampURL}},!e.source.jcampURL&&{data:e.originalData,info:e.originalInfo,meta:e.meta}),{},{zones:e.zones,filters:e.filters,display:e.display})}(e)})),molecules:a,preferences:i,correlations:r,multipleAnalysis:o,exclusionZones:c}}var Rc=n(212),Nc=n(219),Lc=n.n(Nc),zc=n(244),Hc=n(200),Bc=n.n(Hc);function getToFix(e){Array.isArray(e)||(e=[e]);var t,n=[],a=Object(rc.a)(e);try{for(a.s();!(t=a.n()).done;){var i=t.value;n.push(chooseDecimal(i))}}catch(r){a.e(r)}finally{a.f()}return n}function chooseDecimal(e){switch(e.toUpperCase()){case"1H":return 2;case"13C":default:return 1}}function get1DSignals(e,t){var n,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=a.prefix,r=a.nmrRecord,o="",c=[],l=0,s=Object(rc.a)(e);try{var u=function _loop(){var e=n.value;if(e.info.dimension>1)return"continue";var a=e.ranges.values||[],s=e.info.nucleus,u=1,d="";c.forEach((function(e){e===s&&u++})),c.push(s),u>1&&(d="#".concat(u)),o+="".concat(i,"1D_").concat(s.toUpperCase()).concat(d,">"),e.info.frequency&&(o+="\nLarmor=".concat(Number(e.info.frequency).toFixed(2),"\\")),o+="\nSpectrum_Jcamp=file:./jcamp_folder/1d/".concat(e.display.name,"\\"),e.source.jcamp&&r.file("jcamp_folder/1d/".concat(e.display.name),e.source.jcamp);var b,f=getToFix(s)[0],p=Object(rc.a)(a);try{for(p.s();!(b=p.n()).done;){var h,g=b.value,m=g.signal,j=Object(rc.a)(m);try{for(j.s();!(h=j.n()).done;){var v=h.value,O=v.multiplicity;if(O&&"m"!==O||"1H"!==s){if(!v.delta)continue;o+="\n".concat(Number(v.delta).toFixed(f))}else o+="\n".concat(Number(g.from).toFixed(f),"-").concat(Number(g.to).toFixed(f));var x="";if(v.diaID&&v.diaID.length>0&&(v.diaID.forEach((function(e,n,a){var i=", ";n===a.length-1&&(i="");var r=t.byDiaID[e].label||e;x+="(".concat(r,")").concat(i)})),o+=", L=".concat(x)),"1H"===s){v.multiplicity&&(o+=", S=".concat(v.multiplicity));var y=v.j;if(Array.isArray(y)&&y.length)for(var k=", J=",C=0;C<y.length;C++){if(o+="".concat(k).concat(Number(y[C].coupling).toFixed(3)),y[C].diaID){var D=y[C].diaID;if(Array.isArray(D)||(D=[D]),!D.length)continue;var S=t[D[0]].label||String(D[0]);o+="(".concat(S,")")}k=", "}g.integral?o+=", E=".concat(Number(g.integral).toFixed(f)):g.pubIntegral?o+=", E=".concat(g.putIntegral.toFixed(f)):void 0!==g.signal[0].nbAtoms&&(o+=", E=".concat(g.signal[0].nbAtoms))}}}catch(w){j.e(w)}finally{j.f()}m.length&&(o+="\\")}}catch(w){p.e(w)}finally{p.f()}o+="\n",l++};for(s.s();!(n=s.n()).done;)u()}catch(d){s.e(d)}finally{s.f()}return l>0&&r.folder("jcamp_folder/1d"),o}function getCouplingObserved(e){switch(e.toLowerCase()){case"hsqc":case"cosy":return"1J";case"hmbc":default:return"NJ"}}var Xc=Array.isArray;function get2DSignals(e,t){var n,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=a.prefix,r=a.nmrRecord,o=t.byDiaID,c="",l=[],s=0,u=Object(rc.a)(e);try{for(u.s();!(n=u.n()).done;){var d=n.value;if(!(d.info.dimension<2)){var b=d.info,f=b.nucleus,p=b.experiment,h=b.pulseSequence;p&&(i="\n> 2D ".concat(p," <NMREDATA_2D_")),l.push(f);var g=getCouplingObserved(p);f&&(c+="".concat(i).concat(f[1],"_").concat(g,"_").concat(f[0],">"));var m=getToFix(f);c+="\nLarmor=".concat(Number(d.info.baseFrequency[0]).toFixed(2),"\\"),c+="\nSpectrum_Jcamp=file:./jcamp_folder/2d/".concat(d.display.name,"\\"),d.source.jcamp&&r.file("jcamp_folder/2d/".concat(d.display.name),d.source.jcamp),p&&(c+="\nCorType=".concat(p," \\")),h&&(c+="\nPulseProgram=".concat(h," \\"));var j,v=d.zones.values||[],O=Object(rc.a)(v);try{for(O.s();!(j=O.n()).done;){var x,y=j.value,k=y.signal,C=Object(rc.a)(k);try{for(C.s();!(x=C.n()).done;){var D=x.value,S=D.x,w=D.y,T=D.peak,M=getAssignment(S,o,m[0]),A=getAssignment(w,o,m[1]),E=Math.max.apply(Math,Object(Hi.a)(T.map((function(e){return e.z}))));c+="\n".concat(M,"/").concat(A,", I=").concat(E.toFixed(2),"\\")}}catch(P){C.e(P)}finally{C.f()}}}catch(P){O.e(P)}finally{O.f()}s++}}}catch(P){u.e(P)}finally{u.f()}return s>0&&r.folder("jcamp_folder/2d"),c}function getAssignment(e,t,n){var a=e.diaID,i=e.delta;if(a){if(Xc(a)||(a=[a]),a.length<1)return Number(i).toFixed(n);var r=a.map((function(e){return t[e].label})).join(",");return a.length>1?"(".concat(r,")"):r}return Number(i).toFixed(n)}function flat2DSignals(e){for(var t=[],n=0;n<e.length;n++){var a=e[n],i=a.x,r=a.y;t.push(i,r)}return t}function getLabels(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=n.groupedDiaIDs,i=n.molecule,r=Object(zc.g)(i,{toLabel:"H",maxLength:1}),o={},c={},l=Object(rc.a)(e);try{for(l.s();!(t=l.n()).done;){var s,u=t.value,d=u.info,b=d.dimension,f=d.nucleus,p=getToFix(f),h=b>1?["zones",flat2DSignals]:["ranges",function(e){return e||[]}],g=Object(O.a)(h,2),m=g[0],j=g[1],v=u[m].values||[],x=Object(rc.a)(v);try{for(x.s();!(s=x.n()).done;)for(var y=s.value,k=j(y.signal),C=0;C<k.length;C++){var D,S=k[C].diaID||[],w=Object(rc.a)(S);try{var T=function _loop(){var e=D.value,t=Number(k[C].delta).toFixed(p[C%b]),n=a.find((function(t){return t.oclID===e})),l={atom:n.atoms[0],molecule:i,connections:r,atomLabel:n.atomLabel};o[e]={atoms:n.atoms.map((function(e){return e+1})),shift:t,label:createLabel(l)};var s,u=Object(rc.a)(n.atoms);try{for(u.s();!(s=u.n()).done;){var d=s.value;l.atom=d,c[d]={shift:t,diaID:e,label:createLabel(l)}}}catch(f){u.e(f)}finally{u.f()}};for(w.s();!(D=w.n()).done;)T()}catch(M){w.e(M)}finally{w.f()}}}catch(M){x.e(M)}finally{x.f()}}}catch(M){l.e(M)}finally{l.f()}return{byAssignNumber:c,byDiaID:o}}function createLabel(e){var t=e.atom,n=e.molecule,a=e.atomLabel,i=e.connections,r="";if("C"!==a){var o=i[t].find((function(e){return e&&e.length>1})),c="".concat(a).concat(o[0]+1),l="".concat(n.getAtomLabel(o[1])).concat(o[1]+1);r="".concat(c).concat(l)}else r="".concat(a).concat(t+1);return r}var Vc={solvent:"SOLVENT",temperature:"TEMPERATURE",assignment:"ASSIGNMENT",j:"J",signals:"SIGNALS",id:"ID"};function toNmredata(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e||{data:[],molecules:[]},a=n.data,i=n.molecules,r=t.id,o=t.prefix,c=void 0===o?"\n> <NMREDATA_":o,l=t.filename,s=void 0===l?"nmredata":l,u="",d=new Lc.a,b=Hc.Molecule.fromMolfile(i[0].molfile);b.addImplicitHydrogens();var f=Object(zc.f)(b),p={prefix:c,molecule:b,groupedDiaIDs:f,nmrRecord:d};u+=b.toMolfile();var h=getLabels(a,p);return u+="".concat(c,"VERSION>\n1.1\\\n"),u+=putTag(a,"temperature",{prefix:c}),u+=putTag(a,"solvent",{prefix:c}),r&&(u+="".concat(c+Vc.id,">\nid\\\n")),u+=formatAssignments(h.byDiaID,p),u+=get1DSignals(a,h,p),u+=get2DSignals(a,h,p),u+="\n$$$$\n",d.file("".concat(s,".sdf"),u),d}function formatAssignments(e,t){var n=t.prefix,a="".concat(n+Vc.assignment,">\n");for(var i in e){var r=e[i].atoms;a+="".concat(e[i].label,", ").concat(e[i].shift);var o,c=Object(rc.a)(r);try{for(c.s();!(o=c.n()).done;){var l=o.value;a+=", ".concat(l)}}catch(s){c.e(s)}finally{c.f()}a+="\\\n"}return a}function putTag(e,t){var n,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=a.prefix,r="",o=Object(rc.a)(e);try{for(o.s();!(n=o.n()).done;){var c=n.value;if(c.info[t]){r+="".concat(i+Vc[t],">\n").concat(String(c.info[t]),"\\\n");break}}}catch(l){o.e(l)}finally{o.f()}return r}function useExport(){var e=Ec(),t=useChartData();return{saveToClipboardHandler:Object(D.useCallback)(Object(Vr.a)(Xr.a.mark((function _callee(){var n;return Xr.a.wrap((function _callee$(a){for(;;)switch(a.prev=a.next){case 0:if(!(t.data.length>0)){a.next=5;break}return a.next=3,e.showLoading("Exporting as numrium process in progress");case 3:n=a.sent,setTimeout((function(){Object(Rc.b)("nmrSVG"),n(),e.success("Image copied to clipboard")}),0);case 5:case"end":return a.stop()}}),_callee)}))),[e,t]),saveAsJSONHandler:Object(D.useCallback)(Object(Vr.a)(Xr.a.mark((function _callee3(){var n,a,i,r=arguments;return Xr.a.wrap((function _callee3$(o){for(;;)switch(o.prev=o.next){case 0:if(n=r.length>0&&void 0!==r[0]?r[0]:0,a=!(r.length>1&&void 0!==r[1])||r[1],!(t.data.length>0)){o.next=7;break}return o.next=5,e.showLoading("Exporting as numrium process in progress");case 5:i=o.sent,setTimeout(Object(Vr.a)(Xr.a.mark((function _callee2(){var e,r,o,c;return Xr.a.wrap((function _callee2$(l){for(;;)switch(l.prev=l.next){case 0:return o=null===(e=t.data[0])||void 0===e||null===(r=e.display)||void 0===r?void 0:r.name,c=SpectraManager_toJSON(t),l.next=4,Object(Rc.d)(c,o,n,a);case 4:i();case 5:case"end":return l.stop()}}),_callee2)}))),0);case 7:case"end":return o.stop()}}),_callee3)}))),[e,t]),saveAsNMREHandler:Object(D.useCallback)(Object(Vr.a)(Xr.a.mark((function _callee4(){var n;return Xr.a.wrap((function _callee4$(a){for(;;)switch(a.prev=a.next){case 0:if(!(t.data.length>0)){a.next=5;break}return a.next=3,e.showLoading("Exporting as NMRE process in progress");case 3:n=a.sent,setTimeout((function(){var e,a,i=null===(e=t.data[0])||void 0===e||null===(a=e.display)||void 0===a?void 0:a.name,r=toNmredata(t);Object(Rc.f)(r,i),n()}),0);case 5:case"end":return a.stop()}}),_callee4)}))),[e,t]),saveAsSVGHandler:Object(D.useCallback)(Object(Vr.a)(Xr.a.mark((function _callee5(){var n;return Xr.a.wrap((function _callee5$(a){for(;;)switch(a.prev=a.next){case 0:if(!(t.data.length>0)){a.next=5;break}return a.next=3,e.showLoading("Exporting as SVG process in progress");case 3:n=a.sent,setTimeout((function(){var e,a,i=null===(e=t.data[0])||void 0===e||null===(a=e.display)||void 0===a?void 0:a.name;Object(Rc.h)(i,"nmrSVG"),n()}),0);case 5:case"end":return a.stop()}}),_callee5)}))),[e,t.data]),saveAsPNGHandler:Object(D.useCallback)(Object(Vr.a)(Xr.a.mark((function _callee6(){var n;return Xr.a.wrap((function _callee6$(a){for(;;)switch(a.prev=a.next){case 0:if(!(t.data.length>0)){a.next=5;break}return a.next=3,e.showLoading("Exporting as PNG process in progress");case 3:n=a.sent,setTimeout((function(){var e,a,i=null===(e=t.data[0])||void 0===e||null===(a=e.display)||void 0===a?void 0:a.name;Object(Rc.g)(i,"nmrSVG"),n()}),0);case 5:case"end":return a.stop()}}),_callee6)}))),[e,t.data])}}function useToolsFunctions(){var e=useDispatch(),t=Ec(),n=Object(D.useState)(!1),a=Object(O.a)(n,2),i=a[0],r=a[1],o=Object(D.useRef)({clicks:[]});return{handleChangeOption:Object(D.useCallback)((function(n){[ti.peakPicking.id,ti.integral.id,ti.zone2D.id].includes(n)&&t.show("Press Shift + Left Mouse button to select zone for integral and peak picking"),e({type:Lt,selectedTool:n})}),[t,e]),handleFullZoomOut:Object(D.useCallback)((function(){0===o.current.clicks.length&&e({type:Bt,zoomType:gt});var t=F()((function(){o.current.clicks=[]}),500);o.current.clicks.push(t),t(),o.current.clicks.length>1&&(R()(o.current.clicks,(function(e){return e.cancel()})),o.current.clicks=[],e({type:Bt}))}),[e,o]),changeDisplayViewModeHandler:Object(D.useCallback)((function(){e({type:rn})}),[e]),changeSpectrumViewHandler:Object(D.useCallback)((function(){e({type:Wt,isRealSpectrumVisible:!i}),r(!i)}),[e,i]),alignSpectrumsVerticallyHandler:Object(D.useCallback)((function(){e({type:Tn})}),[e]),isRealSpectrumShown:i}}var Yc=function KeysListenerTracker(){var e=useChartData(),t=e.keysPreferences,n=e.displayerMode,a=e.overDisplayer,i=e.data,r=useDispatch(),o=Ec(),c=useLoader(),l=useToolsFunctions(),s=l.handleChangeOption,u=l.handleFullZoomOut,d=l.alignSpectrumsVerticallyHandler,b=l.changeDisplayViewModeHandler,f=useExport(),p=f.saveToClipboardHandler,h=f.saveAsJSONHandler,g=Object(vi.d)().highlight,m=useAssignmentData(),j=Object(D.useMemo)((function(){return n===Oo.DM_1D&&i&&i.length>0}),[i,n]),v=Object(D.useMemo)((function(){return n===Oo.DM_2D&&i&&i.length>0}),[i,n]),x=Object(D.useCallback)((function(e,t){switch(e){case vi.b.INTEGRAL:r({type:Kt,integralID:t.activeKey});break;case vi.b.PEAK:r({type:Et,data:{id:t.activeKey}});break;case vi.b.RANGE:r({type:Cn,payload:{id:t.activeKey,assignmentData:m}});break;case vi.b.ZONE:r({type:Xn,payload:{id:t.activeKey,assignmentData:m}});break;case vi.b.EXCLUSION_ZONE:r({type:pa,payload:{id:t.activeKey}})}}),[m,r]),y=Object(D.useCallback)((function(e,n){i&&i.length>0&&n>=1&&n<=9&&(e.shiftKey?(r({type:_n,keyCode:n}),o.show("Configuration Reset, press '".concat(n,"' again to reload it."))):checkModifierKeyActivated(e)||(t&&t[n]?r({type:Rn,keyCode:n}):(r({type:_n,keyCode:n}),o.show("Configuration saved, press '".concat(n,"' again to reload it.")))))}),[o,i,r,t]),k=Object(D.useCallback)((function(e){if(!e.shiftKey&&!e.metaKey)switch(e.key){case"f":u();break;case"z":case"Escape":s(ti.zoom.id);break;case"r":j&&s(ti.rangesPicking.id);break;case"b":j&&s(ti.baseLineCorrection.id);break;case"p":j&&s(ti.peakPicking.id);break;case"i":var t=v?ti.zone2D.id:j?ti.integral.id:"";s(t);break;case"a":j&&s(ti.phaseCorrection.id)}if(!e.shiftKey&&!e.metaKey&&!e.ctrlKey)switch(e.key){case"c":j&&d();break;case"s":j&&b()}if(!e.shiftKey&&(e.metaKey||e.ctrlKey))switch(e.key){case"c":p(),e.preventDefault();break;case"s":h(),e.preventDefault();break;case"o":c.open(),e.preventDefault()}if(e.shiftKey&&(e.metaKey||e.ctrlKey))switch(e.key){case"S":h(2,!1),e.preventDefault()}}),[d,j,v,b,s,u,c,h,p]),C=Object(D.useCallback)((function(e){var t=Object(O.a)(g.highlighted,1)[0],n=g.type;if(!["input","textarea"].includes(e.target.localName)&&a){var i=Number(e.code.substr(e.code.length-1))||0;i>0?y(e,i):["Backspace"].includes(e.key)&&n?x(n,{activeKey:t}):k(e)}}),[x,g,y,a,k]);return Object(D.useEffect)((function(){return document.addEventListener("keydown",C,!0),function(){return document.removeEventListener("keydown",C,!0)}}),[C]),null},Zc="";var Uc,Kc=function getHelpList(){return{zoomIn:{text:"Zoom Tool",filePath:"".concat(Zc,"/help/zoom-and-scale")},peakPicking:{text:"peak picking tool",filePath:"".concat(Zc,"/help/peaks")},integralPicking:{text:"integral tool",filePath:"".concat(Zc,"/help/integrations")},fullScreen:{text:"Full Screen mode",filePath:"".concat(Zc,"/help/general")},loadSpectrum:{text:"load spectrums",filePath:"".concat(Zc,"/help/loading-a-spectrum")}}},Wc=Object(y.css)(Uc||(Uc=Object(x.a)(["\n  width: 100%;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  .manual-header {\n    .title {\n      text-align: center;\n      padding: 10px 0 10px 0px;\n      margin: 0px;\n      color: #000000;\n      place-items: normal;\n      text-transform: none;\n      background-color: #fafafa;\n    }\n\n    .close-bt {\n      border: none;\n      color: red;\n      background-color: transparent;\n      outline: none;\n      position: absolute;\n      right: 15px;\n      top: 10px;\n    }\n  }\n  .main-content {\n    width: 100%;\n    height: 100%;\n    border: none;\n    padding-left: 5px;\n  }\n\n  .inner-container {\n    padding: 5px;\n    width: 100%;\n    height: 100%;\n  }\n\n  .tab-content {\n    width: 100%;\n  }\n"])));var Gc,qc=function UserManualModal(e){var t=e.onClose,n=Kc().loadSpectrum.filePath;return Object(Ce.c)("div",{css:Wc,children:[Object(Ce.c)("div",{className:"manual-header handle",children:[Object(Ce.b)("h6",{className:"title",children:"User Manual"}),Object(Ce.b)(et,{onClick:t,className:"close-bt"})]}),Object(Ce.b)("div",{className:"main-content",children:Object(Ce.b)("div",{className:"inner-container",children:Object(Ce.b)("iframe",{title:"General User Manual ",src:n,frameBorder:"0",scrolling:"auto",style:{width:"100%",height:"100%"}})})})]})},Jc=Object(y.css)(Gc||(Gc=Object(x.a)(["\n  border-radius: 50%;\n  width: 16px;\n  height: 16px;\n  background-color: transparent;\n  border: none;\n  padding: 0;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n\n  :hover {\n    background-color: red;\n    border-radius: 50%;\n\n    .icon {\n      color: white;\n    }\n  }\n\n  .icon {\n    color: #252525;\n    width: 8px;\n  }\n"])));var $c,Qc=function DeleteButton_DeleteButton(e){var t=e.onDelete,n=e.className,a=void 0===n?"delete":n;return Object(Ce.b)("button",{css:Jc,className:a,type:"button",onClick:t,children:Object(Ce.b)(Ze.G,{className:"icon"})})},el=function styles(e){return Object(y.css)($c||($c=Object(x.a)(["\n  position: relative;\n\n  .delete {\n    position: absolute;\n    top: 2px;\n    left: 2px;\n  }\n\n  ","\n"])),e)};function Tab(e){var t=e.tabid,n=e.tablabel,a=e.activeTab,i=e.onClick,r=e.canDelete,o=e.onDelete,c=e.tabstyles,l="tab-list-item";a===t&&(l+=" tab-list-active");var s=Object(D.useCallback)((function(e){i(Object(v.a)(Object(v.a)({},e),{},{tablabel:n,tabid:t}))}),[i,n,t]),u=Object(D.useCallback)((function(e){e.stopPropagation(),o(Object(v.a)(Object(v.a)({},e),{},{tablabel:n,tabid:t}))}),[o,n,t]);return Object(Ce.c)("li",{className:l,onClick:s,css:el(c),children:[r&&Object(Ce.b)(Qc,{onDelete:u}),n]})}var tl,nl,al=Object(D.memo)(Tab),il="TOP",rl="LEFT",ol=Object(y.css)(tl||(tl=Object(x.a)(["\n  height: 100%;\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n\n  .tab-list {\n    border-bottom: 1px solid #ccc;\n    padding-left: 0;\n    margin: 0;\n  }\n\n  .tab-list li:first-of-type {\n    margin-left: 5px;\n  }\n\n  .tab-list li:hover {\n    background-color: #f7f7f7;\n  }\n\n  .tab-list-item {\n    display: inline-block;\n    list-style: none;\n    margin-bottom: -1px;\n    padding: 0.5rem 2rem;\n  }\n\n  .tab-list-active {\n    background-color: white;\n    border: solid #ccc;\n    border-width: 1px 1px 0 1px;\n  }\n\n  .tab-content {\n    height: 100%;\n    overflow: auto;\n  }\n"]))),cl=Object(y.css)(nl||(nl=Object(x.a)(["\n  display: flex;\n  height: 100%;\n  width: 100%;\n  .tab-list {\n    border-right: 1px solid #ccc;\n    padding-left: 0;\n    margin: 0;\n  }\n\n  .tab-list li:hover {\n    background-color: #f7f7f7;\n  }\n\n  .tab-list li:first-of-type {\n    margin-top: 10px;\n  }\n\n  .tab-list-item {\n    display: block;\n    list-style: none;\n    margin-right: -1px;\n    padding: 0.5rem 0.75rem;\n  }\n\n  .tab-list-active {\n    background-color: white;\n    border: solid #ccc;\n    border-width: 1px 0px 1px 1px;\n  }\n\n  .tab-content {\n    height: 100%;\n    overflow: auto;\n  }\n"])));function Tabs(e){var t=e.children,n=e.onClick,a=e.defaultTabID,i=e.position,r=e.canDelete,o=e.onDelete,c=Object(D.useState)(),l=Object(O.a)(c,2),s=l[0],u=l[1];Object(D.useEffect)((function(){u(a)}),[a]);var d=Object(D.useCallback)((function(e){var t=e.tablabel,a=e.tabid;n({tablabel:t,tabid:a}),u(a)}),[n]),b=Object(D.useMemo)((function(){return D.Children.map(t,(function(e){var t=e.props,n=t.tablabel,a=t.tabid,i=t.candelete,c=t.tabstyles,l=i?"true"===i.toLowerCase():r;return Object(Ce.b)(al,{activeTab:s,tablabel:n,onClick:d,tabid:a,canDelete:l,onDelete:o,tabstyles:c},a)}))}),[s,r,t,d,o]),f=Object(D.useMemo)((function(){return D.Children.map(t,(function(e){var t=e.props,n=t.tabid,a=t.style;return n!==s?Object(D.cloneElement)(e,{style:{display:"none"}}):Object(D.cloneElement)(e,{style:Object(v.a)({display:"block"},a)})}))}),[s,t]),p=Object(D.useMemo)((function(){switch(i){case il:return ol;case rl:return cl;default:return ol}}),[i]);return Object(Ce.c)("div",{className:"tabs",css:p,children:[Object(Ce.b)("ol",{className:"tab-list",children:b}),Object(Ce.b)("div",{className:"tab-content",children:f})]})}Tabs.defaultProps={onClick:function onClick(){return null},onDelete:function onDelete(){return null},position:"TOP",canDelete:!1};var ll=Object(D.memo)(Tabs),sl=n(190),ul=Object(D.forwardRef)((function FormikForm(e,t){var n=e.initialValues,a=e.onSubmit,i=e.validationSchema,r=e.children;return Object(N.jsx)(sl.d,{innerRef:t,initialValues:n,onSubmit:a,validationSchema:i,children:function children(){return Object(N.jsx)(N.Fragment,{children:r})}})}));ul.defaultProps={initialValues:{},onSubmit:function onSubmit(){return null},validationSchema:null};var dl=ul,bl=n(192),fl=n.n(bl),pl="INIT_PREFERENCES",hl="SET_PREFERENCES",gl="SET_PANELS_PREFERENCES",ml={basePreferences:{},display:{general:{disableMultipletAnalysis:!1,hideSetSumFromMolecule:!1},panels:{hideSpectraPanel:!1,hideInformationPanel:!1,hidePeaksPanel:!1,hideIntegralsPanel:!1,hideRangesPanel:!1,hideStructuresPanel:!1,hideFiltersPanel:!1,hideZonesPanel:!1,hideSummaryPanel:!1,hideMultipleSpectraAnalysisPanel:!1},toolBarButtons:{hideZoomTool:!1,hideZoomOutTool:!1,hideImport:!1,hideExportAs:!1,hideSpectraStackAlignments:!1,hideSpectraCenterAlignments:!1,hideRealImaginary:!1,hidePeakTool:!1,hideIntegralTool:!1,hideAutoRangesTool:!1,hideZeroFillingTool:!1,hidePhaseCorrectionTool:!1,hideBaseLineCorrectionTool:!1,hideFFTTool:!1,hideMultipleSpectraAnalysisTool:!1}},controllers:{mws:{low:2,high:20},help:{preventAutoHelp:!0},dimmedSpectraTransparency:.1},formatting:{nucleus:[{key:"1H",name:"1H",ppm:"0.00",hz:"0.00"},{key:"13C",name:"13C",ppm:"0.00",hz:"0.00"},{key:"15N",name:"15N",ppm:"0.00",hz:"0.00"},{key:"19F",name:"19F",ppm:"0.00",hz:"0.00"},{key:"29Si",name:"29Si",ppm:"0.00",hz:"0.00"},{key:"31P",name:"31P",ppm:"0.00",hz:"0.00"}],nucleusByKey:{},panels:{}},dispatch:null},jl=function mapNucleus(e){e.formatting.nucleus&&Array.isArray(e.formatting.nucleus)&&(e.formatting.nucleusByKey=e.formatting.nucleus.reduce((function(e,t){return e[t.name.toLowerCase()]=t,Object(v.a)({},e)}),{}))};function preferencesReducer(e,t){switch(t.type){case pl:var n=ut("nmr-local-storage-version",!1);n&&"1"===n||(function removeData(e){localStorage.removeItem(e)}("nmr-general-settings"),function storeData(e,t){localStorage.setItem(e,t)}("nmr-local-storage-version","1"));var a=ut("nmr-general-settings");return Object(vt.b)(e,(function(e){if(t.payload){var n=t.payload,i=n.dispatch,r=Object(ge.a)(n,["dispatch"]);e.basePreferences=r,e.display=r.display,e.dispatch=i,a&&(Object.entries(a).forEach((function(t){var n=Object(O.a)(t,2),a=n[0],i=n[1];e[a]=fl()(i,r[a]?r[a]:{})})),jl(e))}}));case hl:return Object(vt.b)(e,(function(e){if(t.payload){var n=t.payload;e.controllers=n.controllers,e.formatting=n.formatting,e.display.panels=n.display.panels,jl(e)}}));case gl:return Object(vt.b)(e,(function(e){if(t.payload){var n=t.payload,a=n.key,i=n.value;e.formatting.panels[a]=i}}));default:return e}}var vl,Ol=function Logo(e){var t=e.size,n=void 0===t?100:t;return Object(N.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 841.9 595.3",style:{width:n,height:n},children:Object(N.jsxs)("g",{fill:"#61DAFB",children:[Object(N.jsx)("path",{d:"M666.3 296.5c0-32.5-40.7-63.3-103.1-82.4 14.4-63.6 8-114.2-20.2-130.4-6.5-3.8-14.1-5.6-22.4-5.6v22.3c4.6 0 8.3.9 11.4 2.6 13.6 7.8 19.5 37.5 14.9 75.7-1.1 9.4-2.9 19.3-5.1 29.4-19.6-4.8-41-8.5-63.5-10.9-13.5-18.5-27.5-35.3-41.6-50 32.6-30.3 63.2-46.9 84-46.9V78c-27.5 0-63.5 19.6-99.9 53.6-36.4-33.8-72.4-53.2-99.9-53.2v22.3c20.7 0 51.4 16.5 84 46.6-14 14.7-28 31.4-41.3 49.9-22.6 2.4-44 6.1-63.6 11-2.3-10-4-19.7-5.2-29-4.7-38.2 1.1-67.9 14.6-75.8 3-1.8 6.9-2.6 11.5-2.6V78.5c-8.4 0-16 1.8-22.6 5.6-28.1 16.2-34.4 66.7-19.9 130.1-62.2 19.2-102.7 49.9-102.7 82.3 0 32.5 40.7 63.3 103.1 82.4-14.4 63.6-8 114.2 20.2 130.4 6.5 3.8 14.1 5.6 22.5 5.6 27.5 0 63.5-19.6 99.9-53.6 36.4 33.8 72.4 53.2 99.9 53.2 8.4 0 16-1.8 22.6-5.6 28.1-16.2 34.4-66.7 19.9-130.1 62-19.1 102.5-49.9 102.5-82.3zm-130.2-66.7c-3.7 12.9-8.3 26.2-13.5 39.5-4.1-8-8.4-16-13.1-24-4.6-8-9.5-15.8-14.4-23.4 14.2 2.1 27.9 4.7 41 7.9zm-45.8 106.5c-7.8 13.5-15.8 26.3-24.1 38.2-14.9 1.3-30 2-45.2 2-15.1 0-30.2-.7-45-1.9-8.3-11.9-16.4-24.6-24.2-38-7.6-13.1-14.5-26.4-20.8-39.8 6.2-13.4 13.2-26.8 20.7-39.9 7.8-13.5 15.8-26.3 24.1-38.2 14.9-1.3 30-2 45.2-2 15.1 0 30.2.7 45 1.9 8.3 11.9 16.4 24.6 24.2 38 7.6 13.1 14.5 26.4 20.8 39.8-6.3 13.4-13.2 26.8-20.7 39.9zm32.3-13c5.4 13.4 10 26.8 13.8 39.8-13.1 3.2-26.9 5.9-41.2 8 4.9-7.7 9.8-15.6 14.4-23.7 4.6-8 8.9-16.1 13-24.1zM421.2 430c-9.3-9.6-18.6-20.3-27.8-32 9 .4 18.2.7 27.5.7 9.4 0 18.7-.2 27.8-.7-9 11.7-18.3 22.4-27.5 32zm-74.4-58.9c-14.2-2.1-27.9-4.7-41-7.9 3.7-12.9 8.3-26.2 13.5-39.5 4.1 8 8.4 16 13.1 24 4.7 8 9.5 15.8 14.4 23.4zM420.7 163c9.3 9.6 18.6 20.3 27.8 32-9-.4-18.2-.7-27.5-.7-9.4 0-18.7.2-27.8.7 9-11.7 18.3-22.4 27.5-32zm-74 58.9c-4.9 7.7-9.8 15.6-14.4 23.7-4.6 8-8.9 16-13 24-5.4-13.4-10-26.8-13.8-39.8 13.1-3.1 26.9-5.8 41.2-7.9zm-90.5 125.2c-35.4-15.1-58.3-34.9-58.3-50.6 0-15.7 22.9-35.6 58.3-50.6 8.6-3.7 18-7 27.7-10.1 5.7 19.6 13.2 40 22.5 60.9-9.2 20.8-16.6 41.1-22.2 60.6-9.9-3.1-19.3-6.5-28-10.2zM310 490c-13.6-7.8-19.5-37.5-14.9-75.7 1.1-9.4 2.9-19.3 5.1-29.4 19.6 4.8 41 8.5 63.5 10.9 13.5 18.5 27.5 35.3 41.6 50-32.6 30.3-63.2 46.9-84 46.9-4.5-.1-8.3-1-11.3-2.7zm237.2-76.2c4.7 38.2-1.1 67.9-14.6 75.8-3 1.8-6.9 2.6-11.5 2.6-20.7 0-51.4-16.5-84-46.6 14-14.7 28-31.4 41.3-49.9 22.6-2.4 44-6.1 63.6-11 2.3 10.1 4.1 19.8 5.2 29.1zm38.5-66.7c-8.6 3.7-18 7-27.7 10.1-5.7-19.6-13.2-40-22.5-60.9 9.2-20.8 16.6-41.1 22.2-60.6 9.9 3.1 19.3 6.5 28.1 10.2 35.4 15.1 58.3 34.9 58.3 50.6-.1 15.7-23 35.6-58.4 50.6zM320.8 78.4z"}),Object(N.jsx)("path",{d:"M520.5 78.1z"})]})})};function AboutTabContent_getData(e){return _getData.apply(this,arguments)}function _getData(){return(_getData=Object(Vr.a)(Xr.a.mark((function _callee(e){var t;return Xr.a.wrap((function _callee$(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,fetch(e);case 3:return t=n.sent,n.abrupt("return",t.json());case 7:return n.prev=7,n.t0=n.catch(0),n.abrupt("return",null);case 10:case"end":return n.stop()}}),_callee,null,[[0,7]])})))).apply(this,arguments)}var xl="https://api.github.com/repos/cheminfo/nmrium",yl=Object(y.css)(vl||(vl=Object(x.a)(["\n  width: 100%;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  padding-top: 20px;\n\n  span {\n    font-weight: bold;\n    color: #636363;\n  }\n\n  img {\n    width: 100px;\n  }\n\n  a {\n    color: #969696;\n  }\n\n  a:hover,\n  a:focus {\n    color: #00bcd4;\n  }\n\n  .separator {\n    border-bottom: 1px solid gray;\n    width: 15px;\n    height: 1px;\n    margin: 10px 0px;\n  }\n"])));var kl=function AboutTabContent(){var e=Object(D.useState)(),t=Object(O.a)(e,2),n=t[0],a=t[1];return Object(D.useEffect)((function(){Promise.all([AboutTabContent_getData("".concat(xl,"/commits")),AboutTabContent_getData("".concat(xl,"/tags"))]).then((function(e){a(e)}))}),[]),n?Object(Ce.c)("div",{css:yl,children:[Object(Ce.b)(Ol,{}),Object(Ce.b)("span",{children:"NMRium"}),Object(Ce.c)("span",{children:[" ",n[1][0].name]}),Object(Ce.b)("span",{className:"separator"}),Object(Ce.c)("a",{href:n[1][0].zipball_url,target:"_blank",rel:"noreferrer",children:["Download Last Version ",n[1][0].name]}),Object(Ce.b)("span",{className:"separator"}),Object(Ce.c)("a",{href:n[0][0].html_url,target:"_blank",rel:"noreferrer",children:["Last Commit ",new Date(n[0][0].commit.author.date).toUTCString()," [",n[0][0].sha.substr(0,12)," ]"]})]}):null},Cl=Object(D.forwardRef)((function CheckBox(e,t){var n=e.name,a=void 0===n?"":n,i=e.checked,r=e.onChange,o=void 0===r?function(){return null}:r,c=e.disabled,l=Object(D.useState)(i),s=Object(O.a)(l,2),u=s[0],d=s[1],b=Object(D.useCallback)((function(e){d(!u),o(e)}),[u,o]);return Object(N.jsx)("input",{ref:t,type:"checkbox",name:a,id:a,onChange:b,defaultChecked:i,disabled:c})}));Cl.defaultProps={onChange:function onChange(){return null},name:"",disabled:!1};var Dl=Cl;function FormikCheckBox(e){var t=e.label,n=e.name,a=e.onChange,i=e.className,r=e.reverse,o=Object(ge.a)(e,["label","name","onChange","className","reverse"]),c=Object(sl.f)(),l=c.values,s=c.setFieldValue,u=r?!C()(l,n):C()(l,n),d=Object(D.useCallback)((function(e){e.persist(),a(e),s(n,r?u:!u)}),[n,a,r,s,u]);return Object(N.jsxs)("div",{className:"".concat(i," check-").concat(u),children:[Object(N.jsx)("label",{htmlFor:n,className:"checkbox-lable",children:t}),Object(N.jsx)(Dl,Object(v.a)({id:n,name:n,checked:u,onChange:d,className:"checkbox"},o))]})}FormikCheckBox.defaultProps={className:"",onChange:function onChange(){return null},reverse:!1};var Sl=FormikCheckBox,wl={lineHeight:2,userSelect:"none"},Tl={height:"100%",width:"100px",borderRadius:"5px",border:"0.55px solid #c7c7c7",margin:"0px 5px 0px 5px",textAlign:"center"},Ml=Object(D.forwardRef)((function Input(e,t){var n=e.label,a=e.value,i=e.name,r=e.style,o=e.onChange,c=e.onKeyDown,l=e.checkValue,s=e.type,u=e.enableAutoSelect,d=e.className,b=e.format,f=Object(ge.a)(e,["label","value","name","style","onChange","onKeyDown","checkValue","type","enableAutoSelect","className","format"]),p=Object(D.useState)(a),h=Object(O.a)(p,2),g=h[0],m=h[1];Object(D.useEffect)((function(){m(a)}),[a]),Object(D.useEffect)((function(){u&&t.current.select()}),[u,t]);var j=Object(D.useCallback)((function(e){return b()("number"===s?"-"===String(e).trim()?Number(0):Number(e):e)}),[b,s]),x=Object(D.useCallback)((function(e){e.persist(),e.stopPropagation(),e.preventDefault();var t=e.target.value;if(function check(e){if("number"===s){return!(""!==e.trim()&&!/^(?:-?[0-9]*|[0-9]\d*)(?:\.\d{0,20})?$/.test(e))}return!0}(t)&&l(t)){var n=b();m(n(t)),o(Object(v.a)(Object(v.a)({},e),{},{target:{name:e.target.name,value:j(t)}}))}}),[l,b,j,o,s]),y=Object(D.useCallback)((function(e){e.persist(),c(Object(v.a)(Object(v.a)({},e),{},{target:{name:e.target.name,value:j(g)}}))}),[j,c,g]),k=Object(D.useCallback)((function(e){e.stopPropagation()}),[]);return Object(N.jsxs)("div",{style:Object(v.a)({display:"flex",flexDirection:"row",alignItems:"center"},r&&r.container?r.container:{}),children:[n&&Object(N.jsx)("span",{style:Object(v.a)(Object(v.a)({},wl),r&&r.label?r.label:{}),className:"label",children:n}),Object(N.jsx)("input",Object(v.a)(Object(v.a)({},f),{},{ref:t,name:i,style:Object(v.a)(Object(v.a)({},Tl),r&&r.input?r.input:{}),type:"text",value:g,onChange:x,onKeyDown:y,onKeyPress:k,onDoubleClick:function onDoubleClick(e){return e.stopPropagation()},className:"input ".concat(d)}))]})}));Ml.defaultProps={style:{label:{},input:{},container:{}},value:"",onChange:function onChange(){return null},checkValue:function checkValue(){return!0},onKeyDown:function onKeyDown(){return null},type:"text",className:"",enableAutoSelect:!1,format:function format(){return function(e){return e}}};var Al=Ml;function FormikInput(e){var t=e.label,n=e.name,a=e.style,i=e.onChange,r=e.checkValue,o=e.type,c=e.className,l=e.value,s=e.format,u=Object(ge.a)(e,["label","name","style","onChange","checkValue","type","className","value","format"]),d=Object(sl.f)(),b=d.values,f=d.handleChange,p=d.setFieldValue,h=d.errors,g=d.touched,m=Object(D.useCallback)((function(e){i(e),f(e)}),[f,i]);Object(D.useEffect)((function(){l&&p(n,l)}),[n,p,l]);var j=Object(D.useMemo)((function(){return C()(h,n)&&C()(g,n)}),[h,n,g]);return Object(N.jsx)(Al,Object(v.a)({label:t,name:n,value:l||C()(b,n),onChange:m,type:o,style:{input:Object(v.a)(Object(v.a)({},a),j&&{borderColor:"red"})},checkValue:r,className:c,format:s},u))}FormikInput.defaultProps={style:{label:{},input:{}},onChange:function onChange(){return null},checkValue:function checkValue(){return!0},type:"text",className:"",value:null,format:function format(){return function(e){return e}}};var El=FormikInput;var Pl=function ControllersTabContent(){return Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)("p",{className:"section-header",children:"Mouse Scroll Wheel Sensitivity"}),Object(N.jsx)(El,{type:"number",label:"Low",name:"controllers.mws.low"}),Object(N.jsx)(El,{type:"number",label:"high",name:"controllers.mws.high"}),Object(N.jsx)("p",{className:"section-header",style:{marginTop:"40px"},children:"Show / Hide Panels"}),Object(N.jsx)(Sl,{className:"help-checkbox-element",label:"Prevent automatic show help ",name:"controllers.help.preventAutoHelp"}),Object(N.jsx)("p",{className:"section-header",style:{marginTop:"40px"},children:"Spectra"}),Object(N.jsx)(El,{type:"number",label:"Transparency of Dimmed Spectra [ 0 - 1 ]",name:"controllers.dimmedSpectraTransparency",checkValue:function checkValue(e){return e>=0&&e<=1}})]})},Il=[{label:"Spectra Panel",name:"display.panels.hideSpectraPanel"},{label:"Information Panel",name:"display.panels.hideInformationPanel"},{label:"Peaks Panel",name:"display.panels.hidePeaksPanel"},{label:"Integrals Panel",name:"display.panels.hideIntegralsPanel"},{label:"Ranges Panel",name:"display.panels.hideRangesPanel"},{label:"Structures Panel",name:"display.panels.hideStructuresPanel"},{label:"Filters Panel",name:"display.panels.hideFiltersPanel"},{label:"Zones Panel",name:"display.panels.hideZonesPanel"},{label:"Summary Panel",name:"display.panels.hideSummaryPanel"},{label:"Multiple Spectra Analysis Panel",name:"display.panels.hideMultipleSpectraAnalysisPanel"}];var Fl,_l=function DisplayTabContent(e){var t=e.preferences;return Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)("p",{className:"section-header",children:"Show / Hide Panels"}),Il.map((function(e){return!C()(t,"basePreferences.".concat(e.name),!1)&&Object(N.jsx)(Sl,{className:"checkbox-element",label:e.label,name:e.name,reverse:!0},e.name)}))]})},Rl=Object(y.css)(Fl||(Fl=Object(x.a)(["\n  .counter-col {\n    width: 30px;\n  }\n  .nucleus-label-col {\n    display: flex;\n    justify-content: center;\n    width: 80px;\n  }\n\n  .width-100 {\n    width: 100% !important;\n    margin: 0px !important;\n  }\n\n  .nucleus-format-input-col {\n    text-align: center;\n    width: 100px;\n  }\n\n  th {\n    font-size: 11px;\n    font-weight: 600;\n  }\n  .operation-container {\n    display: flex;\n  }\n  .add {\n    background-color: transparent;\n    border: 0;\n    outline: none;\n    svg {\n      font-szie: 14px;\n      fill: green;\n    }\n  }\n"])));var Nl,Ll=function FormattingTabContent(){var e=Object(sl.f)(),t=e.values,n=e.setFieldValue,a=Object(D.useMemo)((function(){return C()(t,"formatting.nucleus",[])}),[t]),i=Object(D.useCallback)((function(e){var t=a.splice(0,e);n("formatting.nucleus",t)}),[a,n]),r=Object(D.useCallback)((function(){var e={key:generateID(),name:"",ppm:"0.00",hz:"0.00"},t=[].concat(Object(Hi.a)(a),[e]);n("formatting.nucleus",t)}),[a,n]);return Object(Ce.c)(D.Fragment,{children:[Object(Ce.b)("p",{className:"section-header",children:"Formating according to Nucleus"}),Object(Ce.b)("div",{css:Rl,children:Object(Ce.c)("table",{children:[Object(Ce.b)("thead",{children:Object(Ce.c)("tr",{children:[Object(Ce.b)("th",{className:"counter-col",children:"#"}),Object(Ce.b)("th",{className:"nucleus-label-col",children:"Nucleus "}),Object(Ce.b)("th",{className:"nucleus-format-input-col",children:"\u03b4 (ppm)"}),Object(Ce.b)("th",{className:"nucleus-format-input-col",children:"Coupling (Hz)"}),Object(Ce.b)("th",{className:"nucleus-format-input-col"})]})}),Object(Ce.b)("tbody",{children:a&&a.map((function(e,t){var n=t+1;return Object(Ce.c)("tr",{children:[Object(Ce.c)("td",{className:"counter-col",children:[Object(Ce.c)("span",{children:[n," - "]})," "]}),Object(Ce.b)("td",{className:"nucleus-label-col",children:Object(Ce.b)(El,{name:"formatting.nucleus.".concat(t,".name"),className:"width-100"})}),Object(Ce.b)("td",{className:"nucleus-format-input-col",children:Object(Ce.b)(El,{name:"formatting.nucleus.".concat(t,".ppm"),className:"width-100"})}),Object(Ce.b)("td",{className:"nucleus-format-input-col",children:Object(Ce.b)(El,{name:"formatting.nucleus.".concat(t,".hz"),className:"width-100"})}),Object(Ce.c)("td",{className:"operation-container",children:[Object(Ce.b)(et,{onClick:function onClick(){return i(t)},popupTitle:"remove ".concat(e.name),popupPlacement:"right"}),a.length===t+1&&Object(Ce.b)("button",{className:"add",type:"button",onClick:r,children:Object(Ce.b)(Ze.y,{})})]})]},"".concat(e.key))}))})]})})]})},zl=Object(y.css)(Nl||(Nl=Object(x.a)(['\n  overflow: auto;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n\n  .header {\n    text-align: center;\n    padding: 10px 0 10px 0px;\n    margin: 0px;\n    color: #005d9e;\n    place-items: normal;\n    text-transform: none;\n    background-color: #fcfcfc;\n  }\n  .main-content {\n    width: 100%;\n    flex: 1;\n    overflow: auto;\n    border: none;\n  }\n\n  .tab-content {\n    width: 100%;\n  }\n\n  .inner-content {\n    padding: 15px 30px;\n    width: 100%;\n    overflow: auto;\n  }\n\n  button:focus {\n    outline: none;\n  }\n  button:hover {\n    color: #007bff;\n  }\n  .save-button:hover {\n    background-color: #ffffff;\n  }\n  .save-button {\n    border: none;\n    padding: 0 15px;\n    background-color: #ffffff5e;\n    border-radius: 5px;\n    height: 25px;\n  }\n\n  .footer-container {\n    display: flex;\n    align-items: flex-end;\n    justify-content: flex-end;\n    background: rgb(242, 242, 242);\n    background: -moz-linear-gradient(\n      0deg,\n      rgba(242, 242, 242, 1) 0%,\n      rgba(245, 245, 245, 1) 37%,\n      rgba(255, 255, 255, 1) 90%\n    );\n    background: -webkit-linear-gradient(\n      0deg,\n      rgba(242, 242, 242, 1) 0%,\n      rgba(245, 245, 245, 1) 37%,\n      rgba(255, 255, 255, 1) 90%\n    );\n    background: linear-gradient(\n      0deg,\n      rgba(242, 242, 242, 1) 0%,\n      rgba(245, 245, 245, 1) 37%,\n      rgba(255, 255, 255, 1) 90%\n    );\n    filter: progid:DXImageTransform.Microsoft.gradient(startColorstr="#f2f2f2",endColorstr="#ffffff",GradientType=1);\n    padding: 6px 15px;\n    height: 55px;\n  }\n\n  .section-header {\n    font-size: 13px;\n    color: #2ca8ff;\n    margin-bottom: 10px;\n    border-bottom: 0.55px solid #f9f9f9;\n    padding: 6px 2px;\n  }\n\n  .label {\n    font-size: 12px;\n    font-weight: bold;\n    margin-right: 10px;\n  }\n\n  .input {\n    font-size: 14px;\n    border-radius: 5px;\n    border: 1px solid #cccccc;\n    padding: 5px;\n    width: 100px;\n    margin-right: 10px;\n    height: initial !important;\n  }\n\n  .close-bt {\n    border: none;\n    color: red;\n    background-color: transparent;\n    outline: none;\n    position: absolute;\n    right: 10px;\n    top: 2px;\n    width: 30px;\n    height: 30px;\n  }\n\n  .checkbox-lable {\n    min-width: 300px;\n    display: inline-block;\n  }\n\n  .help-checkbox-element {\n    .checkbox-lable {\n      width: 260px;\n    }\n  }\n  .checkbox-element {\n    margin-bottom: 5px;\n  }\n'])));var Hl=function GeneralSettings(e){var t=e.onClose,n=e.onSave,a=Object(D.useState)("controllers"),i=Object(O.a)(a,2),r=i[0],o=i[1],c=usePreferences(),l=useStateWithLocalStorage("nmr-general-settings"),s=Object(O.a)(l,2)[1],u=Object(D.useRef)(),d=Object(D.useCallback)((function(){u.current.submitForm()}),[]),b=Object(D.useCallback)((function(e){e.dispatch,e.basePreferences;var t=Object(ge.a)(e,["dispatch","basePreferences"]);s(t),c.dispatch({type:hl,payload:e}),n()}),[n,c,s]),f=Object(D.useCallback)((function(e){o(e.tabid)}),[]);return Object(Ce.c)("div",{css:zl,children:[Object(Ce.c)("div",{className:"header handle",children:[Object(Ce.b)("span",{children:"General Settings"}),Object(Ce.b)(et,{onClick:t,className:"close-bt"})]}),Object(Ce.b)("div",{className:"main-content",children:Object(Ce.b)(dl,{ref:u,initialValues:c,onSubmit:b,children:Object(Ce.c)(ll,{position:"LEFT",defaultTabID:r,onClick:f,children:[Object(Ce.b)("div",{className:"inner-content",tablabel:"Controllers",tabid:"controllers",children:Object(Ce.b)(Pl,{})}),Object(Ce.b)("div",{className:"inner-content",tablabel:"Formatting",tabid:"formatting",children:Object(Ce.b)(Ll,{})}),Object(Ce.b)("div",{className:"inner-content",tablabel:"Display",tabid:"display",children:Object(Ce.b)(_l,{preferences:c})}),Object(Ce.b)("div",{className:"inner-content",tablabel:"About",tabid:"about",children:Object(Ce.b)(kl,{})})]})})}),Object(Ce.b)("div",{className:"footer-container",children:Object(Ce.b)("button",{type:"button",onClick:d,className:"save-button",children:"Save"})})]})},Bl={display:"flex"},Xl={lineHeight:2,userSelect:"none",flex:"2"},Vl={flex:"4",display:"flex",justifyContent:"flex-start"},Yl={height:"100%",width:"100px",borderRadius:"5px",border:"0.55px solid #c7c7c7",margin:"0px 5px 0px 5px",textAlign:"center"},Zl=Object(D.forwardRef)((function NumberInput(e,t){var n=e.label,a=e.name,i=e.defaultValue,r=e.style,o=e.onChange,c=e.onInput,l=e.pattern,s=e.step,u=e.min,d=Object(D.useRef)(),b=Object(D.useCallback)((function(e){e.target.checkValidity()?""===e.target.value?o(Object(v.a)(Object(v.a)({},e),{},{target:Object(v.a)(Object(v.a)({},e.target),{},{value:i})})):o(e):(t||d).current.value=i}),[i,o,t]);return Object(N.jsxs)("div",{style:Object(v.a)(Object(v.a)({},Bl),r.container),children:[Object(N.jsx)("span",{style:Object(v.a)(Object(v.a)({},Xl),r.label),children:n}),Object(N.jsx)("div",{style:Object(v.a)(Object(v.a)({},Vl),r.inputContainer),children:Object(N.jsx)("input",{ref:t||d,name:a,style:Object(v.a)(Object(v.a)({},Yl),r.input),type:"number",pattern:l,defaultValue:i,step:s,onChange:b,onInput:c,min:u},i)})]})}));Zl.defaultProps={pattern:"^d*(.d{0,2})?$",step:"any",min:"any",style:{label:{},input:{},container:{},inputContainer:{}},defaultValue:0,onChange:function onChange(){return null},onInput:function onInput(){return null}};var Ul=Zl,Kl={container:{padding:"5px",height:"100%",display:"flex",fontSize:"12px"},input:{width:"50px"},inputContainer:{flex:"2"},label:{flex:"5"},actionButton:{height:"100%",width:"60px",borderRadius:"5px",border:"0.55px solid #c7c7c7",margin:"0px 5px",userSelect:"none"}};var Wl,Gl=function AutoPeakPickingOptionPanel(){var e=useDispatch(),t=Object(D.useRef)(),n=Object(D.useRef)(),a=Object(D.useRef)(),i=Object(D.useRef)(),r=Object(D.useCallback)((function(){e({type:xn,options:{maxNumberOfPeaks:n.current.value,minMaxRatio:t.current.value,noiseFactor:a.current.value,lookNegative:i.current.checked}})}),[e]),o=Object(D.useCallback)((function(){e({type:wn})}),[e]);return Object(N.jsxs)("div",{style:Kl.container,children:[Object(N.jsx)(Ul,{ref:n,label:"Max Number Of Peaks:",name:"maxNumberOfPeaks",style:{input:Kl.input,inputContainer:Kl.inputContainer,label:Kl.label},defaultValue:50}),Object(N.jsx)(Ul,{ref:a,label:"Noise factor",name:"noiseFactor",style:{input:Kl.input,inputContainer:Kl.inputContainer,label:Kl.label},defaultValue:3}),Object(N.jsx)(Ul,{ref:t,label:"Min Max Ratio:",name:"minMaxRatio",style:{input:Kl.input,inputContainer:Kl.inputContainer,label:Kl.label},defaultValue:.1,step:"0.01"}),Object(N.jsxs)("div",{style:{justifyItems:"baseline",marginRight:"3px"},children:[Object(N.jsx)("label",{style:{marginRight:"2px",lineHeight:2,userSelect:"none"},htmlFor:"lookNegative",children:"Detect Negative:"}),Object(N.jsx)(Dl,{name:"lookNegative",ref:i})]}),Object(N.jsx)("button",{type:"button",style:Kl.actionButton,onClick:r,children:"Apply"}),Object(N.jsx)("button",{type:"button",style:Kl.actionButton,onClick:o,children:"Cancel"})]})},ql=Object(D.forwardRef)((function Select(e,t){var n=e.data,a=e.style,i=e.onChange,r=e.defaultValue,o=e.name,c=Object(D.useCallback)((function(e){var t=e.target.value;isNaN(t)||(t=Number(t)),i(t)}),[i]),l=Object(y.css)(Wl||(Wl=Object(x.a)(["\n    position: relative;\n    padding: 0px 5px;\n    border: 0.55px solid #cacaca;\n    font-size: 14px;\n    width: ","px;\n    margin: 0;\n    height: 100%;\n    background: "," no-repeat right white;\n    -webkit-appearance: none;\n    background-position-x: ","px;\n    background-size: 15px 15px;\n    border-radius: 5px;\n    margin: 0px 5px;\n    :focus,\n    input:focus {\n      outline: none;\n    }\n  "])),a.width?a.width-5:115,'url(\'data:image/svg+xml;utf8,<svg  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="960px" height="560px" viewBox="0 0 960 560" enable-background="new 0 0 960 560" xml:space="preserve"><g id="Rounded_Rectangle_33_copy_4_1_"><path d="M480,344.181L268.869,131.889c-15.756-15.859-41.3-15.859-57.054,0c-15.754,15.857-15.754,41.57,0,57.431l237.632,238.937c8.395,8.451,19.562,12.254,30.553,11.698c10.993,0.556,22.159-3.247,30.555-11.698l237.631-238.937c15.756-15.86,15.756-41.571,0-57.431s-41.299-15.859-57.051,0L480,344.181z"/></g></svg>\')',a.width?a.width-18:97);return Object(Ce.b)("select",{css:[l,a],ref:t,name:o,onChange:c,defaultValue:r,children:n.map((function(e){return Object(Ce.b)("option",{value:e.value,children:e.label},"".concat(e.key))}))})}));ql.defaultProps={onChange:function onChange(){return null},style:{width:100},name:""};var Jl=ql,$l={container:{padding:"5px",height:"100%",display:"flex"},label:{lineHeight:2,userSelect:"none"},actionButton:{height:"100%",width:"60px",borderRadius:"5px",border:"0.55px solid #c7c7c7",margin:"0px 5px",userSelect:"none"}};var Ql=function BaseLineCorrectionPanel(){var e=useDispatch(),t=Object(D.useRef)(),n=Object(D.useRef)(),a=Object(D.useRef)(),i=Object(D.useRef)(),r=Object(D.useState)("polynomial"),o=Object(O.a)(r,2),c=o[0],l=o[1],s=Object(D.useCallback)((function(){var r={};switch(c){case"airpls":r={algorithm:t.current.value,maxIterations:n.current.value,tolerance:a.current.value};break;case"polynomial":r={algorithm:t.current.value,degree:i.current.value}}e({type:Fn,options:r})}),[c,e]),u=Object(D.useCallback)((function(){e({type:wn})}),[e]),d=Object(D.useCallback)((function(){return Object.keys(Sa).map((function(e){return{key:e,label:Sa[e],value:e}}))}),[]),b=Object(D.useCallback)((function(e){l(e)}),[]);return Object(N.jsxs)("div",{style:$l.container,children:[Object(N.jsx)("span",{style:$l.label,children:"Algorithm: "}),Object(N.jsx)(Jl,{ref:t,data:d(),style:{marginLeft:10,marginRight:10},onChange:b,defaultValue:"polynomial"}),c&&"airpls"===c&&Object(N.jsxs)(D.Fragment,{children:[Object(N.jsx)(Ul,{label:"maxIterations:",ref:n,name:"maxIterations",defaultValue:100}),Object(N.jsx)(Ul,{label:"tolerance:",ref:a,name:"tolerance",defaultValue:.001})]}),c&&"autoPolynomial"===c&&Object(N.jsx)(Ul,{label:"degree:",ref:i,name:"degree",defaultValue:3}),c&&"polynomial"===c&&Object(N.jsx)(Ul,{label:"degree:",ref:i,name:"degree",defaultValue:3}),Object(N.jsx)("button",{type:"button",style:$l.actionButton,onClick:s,children:"Apply"}),Object(N.jsx)("button",{type:"button",style:$l.actionButton,onClick:u,children:"Cancel"})]})},es={container:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",border:"0.55px solid #c7c7c7",borderRadius:"5px",userSelect:"none",backgroundColor:"#18ce0f14",fontSize:"10px",color:"#00801d",margin:"0px 5px",cursor:"ew-resize"},label:{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",maxWidth:"100%"}},ts={step:"initial"},ns=null,as=1,is=0,rs=!0;function calcSpeed(e){rs?(is=e.clientX,rs=!1):(as=e.clientX-is,is=e.clientX,function setToZero(){clearTimeout(ns),ns=setTimeout((function(){as=0}),50)}())}function InputRange(e){var t=e.name,n=e.minValue,a=e.maxValue,i=e.value,r=e.onChange,o=e.label,c=e.style,l=e.className,s=e.noPropagation,u=Object(D.useCallback)((function(){"moving"!==ts.step&&"start"!==ts.step||(ts=Object(v.a)(Object(v.a)({},ts),{},{step:"start"===ts.step?"initial":"end"}))}),[]),d=Object(D.useCallback)((function(e){s&&e.stopPropagation();var t=e.currentTarget.getBoundingClientRect(),n=e.clientX-t.x,a=e.clientY-t.y;return"initial"!==ts.step&&"end"!==ts.step||(ts={startX:n,startY:a,startScreenX:e.screenX,startScreenY:e.screenY,boundingRect:e.currentTarget.getBoundingClientRect(),step:"start",clientX:e.clientX,clientY:e.clientY}),!1}),[s]);return Object(N.jsx)("div",{style:Object(v.a)(Object(v.a)({},es.container),c),className:l,onMouseMove:function mouseMoveCallback(e){if("start"===ts.step||"moving"===ts.step){var o=e.screenX,c=e.screenY;ts=Object(v.a)(Object(v.a)({},ts),{},{step:"moving",endX:ts.startX+o-ts.startScreenX,endY:ts.startY+c-ts.startScreenY}),calcSpeed(e);var l=a-n,s=ts.endX-ts.startX,u=Math.abs(s)*(Math.abs(as)>3?l:5)/ts.boundingRect.width;r({value:as>=0?i+Math.abs(u):i-u,name:t})}},onMouseUp:function mouseUpCallback(){"moving"!==ts.step&&"start"!==ts.step||(ts=Object(v.a)(Object(v.a)({},ts),{},{step:"start"===ts.step?"initial":"end"}))},onMouseDown:d,onMouseEnter:u,children:Object(N.jsx)("span",{style:es.label,children:o})})}InputRange.defaultProps={name:"",minValue:0,maxValue:50,value:0,onChange:function onChange(){return null},label:"Drag to Change the value",noPropagation:!0};var os=InputRange,cs={container:{padding:"5px",height:"100%",display:"flex"},input:{width:"100px"},actionButton:{height:"100%",width:"60px",borderRadius:"5px",border:"0.55px solid #c7c7c7",margin:"0px 5px",userSelect:"none"},select:{marginLeft:"5px",marginRight:"10px",border:"none",height:"20px"}},ls="manual",ss="automatic",us="absolute",ds=[{key:ls,label:"Manual",value:ls},{key:ss,label:"Automatic",value:ss},{key:us,label:"Absolute",value:us}];var bs=function ManualPhaseCorrectionPanel(){var e=useDispatch(),t=Object(D.useState)({ph0:0,ph1:0,pivotIndex:1}),n=Object(O.a)(t,2),a=n[0],i=n[1],r=Object(D.useState)(ls),o=Object(O.a)(r,2),c=o[0],l=o[1],s=Object(D.useCallback)((function(){switch(c){case ss:e({type:jn});break;case ls:e({type:mn,value:a});break;case us:e({type:vn})}}),[e,c,a]),u=Object(D.useCallback)((function(t){var n=t.target.name;if(t.target){var r=t.target.value;i((function(t){var i=Object(v.a)(Object(v.a)({},t),{},Object(be.a)({},n,r));if("-"!==r){var o=Object(v.a)(Object(v.a)({},a),{},Object(be.a)({},n,r-t[n]));for(var c in t)t[c]===o[c]&&(o[c]-=t[c]);e({type:gn,value:o})}return i}))}}),[e,a]),d=Object(D.useCallback)((function(t){var n=Object(v.a)(Object(v.a)({},a),{},Object(be.a)({},t.name,t.value)),r={};for(var o in a)r[o]=n[o]-a[o];e({type:gn,value:r}),i(n)}),[e,a]),b=Object(D.useCallback)((function(){e({type:wn})}),[e]),f=Object(D.useCallback)((function(e){l(e)}),[]);return Object(N.jsxs)("div",{style:cs.container,children:[Object(N.jsx)(Jl,{onChange:f,data:ds,value:ls,style:cs.select}),c===ls&&Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(Al,{label:"PH0:",name:"ph0",style:{input:cs.input},onChange:u,value:a.ph0,type:"number"}),Object(N.jsx)(Al,{label:"PH1:",name:"ph1",style:{input:cs.input},onChange:u,value:a.ph1,type:"number"}),Object(N.jsx)(os,{name:"ph0",value:a.ph0,label:"Change Ph0 By mouse click and drag",style:{width:"20%"},onChange:d}),Object(N.jsx)(os,{name:"ph1",value:a.ph1,label:"Change Ph1 By mouse click and drag",style:{width:"20%"},onChange:d})]}),Object(N.jsx)("button",{type:"button",style:cs.actionButton,onClick:s,children:"Apply"}),Object(N.jsx)("button",{type:"button",style:cs.actionButton,onClick:b,children:"Cancel"})]})},fs={container:{padding:"5px",height:"100%",display:"flex",fontSize:"12px",alignItems:"baseline"},input:{height:"100%",width:"50px",borderRadius:"5px",border:"0.55px solid #c7c7c7",margin:"0px 5px 0px 5px",textAlign:"center"},actionButton:{height:"100%",minWidth:"60px",borderRadius:"5px",border:"0.55px solid #c7c7c7",margin:"0px 5px",userSelect:"none"},hint:{lineHeight:2,userSelect:"none",fontSize:"11px"}};var ps=function RangesPickingOptionPanel(){var e=useDispatch(),t=Object(D.useRef)(),n=Object(D.useCallback)((function(){e({type:yn,options:{peakPicking:{minMaxRatio:.05,nH:100,compile:!0,frequencyCluster:16,clean:!0,keepPeaks:!0,lookNegative:t.current.checked}}})}),[e]),a=Object(D.useCallback)((function(){e({type:wn})}),[e]);return Object(N.jsxs)("div",{style:fs.container,children:[Object(N.jsxs)("div",{style:{justifyItems:"baseline",margin:"0 10px"},children:[Object(N.jsx)("label",{style:{marginRight:"2px",lineHeight:2,userSelect:"none"},htmlFor:"lookNegative",children:"Detect negative:"}),Object(N.jsx)(Dl,{name:"lookNegative",ref:t})]}),Object(N.jsx)("button",{type:"button",style:fs.actionButton,onClick:n,children:"Auto ranges picking"}),Object(N.jsx)("button",{type:"button",style:fs.actionButton,onClick:a,children:"Cancel"}),Object(N.jsx)("span",{style:fs.hint,children:"Manual selection using SHIFT + select zone or click on Auto peak picking"})]})},hs={container:{padding:"5px",height:"100%",display:"flex"},input:{height:"100%",width:"80px",borderRadius:"5px",border:"0.55px solid #c7c7c7",margin:"0px 5px 0px 5px",textAlign:"center"},actionButton:{height:"100%",width:"60px",borderRadius:"5px",border:"0.55px solid #c7c7c7",margin:"0px 5px",userSelect:"none"},label:{lineHeight:2,userSelect:"none"}};function formatNumber(e){return e>=1048576?"".concat(e/1048576,"M"):e>=1024?"".concat(e/1024,"K"):e}var gs=function generateSizes(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:21,n=[],a=e;a<=t;a++){var i=Math.pow(2,a);n.push({key:i,label:formatNumber(i),value:i})}return n}();var ms=function ZeroFillingOptionsPanel(){var e=useDispatch(),t=useChartData(),n=t.data,a=t.activeSpectrum,i=Object(D.useRef)(),r=Object(D.useState)(1),o=Object(O.a)(r,2),c=o[0],l=o[1],s=Object(D.useCallback)((function(){e({type:pn,value:{zeroFillingSize:Number(i.current.value),lineBroadeningValue:c}})}),[e,c]),u=Object(D.useCallback)((function(){return n&&(null===a||void 0===a?void 0:a.id)?Math.pow(2,Math.round(Math.log2(n[a.index].data.x.length))):""}),[a,n]),d=Object(D.useCallback)((function(e){if(e.target){var t=e.target.validity.valid?Number(e.target.value):c;l(t)}}),[c]),b=Object(D.useCallback)((function(){e({type:wn})}),[e]);return Object(N.jsxs)("div",{style:hs.container,children:[Object(N.jsx)("span",{style:hs.label,children:"Size: "}),Object(N.jsx)(Jl,{ref:i,data:gs,style:{marginLeft:10,marginRight:10},defaultValue:u()}),Object(N.jsx)("span",{style:hs.label,children:"Line Broadening: "}),Object(N.jsx)("input",{name:"line-broadening",style:hs.input,type:"number",defaultValue:c,onInput:d,pattern:"^\\d*(\\.\\d{0,2})?$",step:"any"}),Object(N.jsx)("button",{type:"button",style:hs.actionButton,onClick:s,children:"Apply"}),Object(N.jsx)("button",{type:"button",style:hs.actionButton,onClick:b,children:"Cancel"})]})},js={container:{padding:"5px",height:"100%",display:"flex",fontSize:"12px"},input:{width:"50px"},inputContainer:{flex:"2"},label:{flex:"5"},actionButton:{height:"100%",borderRadius:"5px",border:"0.55px solid #c7c7c7",margin:"0px 5px",userSelect:"none"}};var vs,Os=function Zones2DOptionPanel(){var e=useDispatch(),t=Object(D.useRef)(),n=Object(D.useCallback)((function(){e({type:kn,options:{thresholdFactor:t.current.value}})}),[e]),a=Object(D.useCallback)((function(){e({type:wn})}),[e]),i=Object(D.useCallback)((function(e){if(e.target){var t=e.target.value;pi.emit("noiseFactorChanged",t)}}),[]);return Object(N.jsxs)("div",{style:js.container,children:[Object(N.jsx)(Ul,{ref:t,label:"NoiseFactor",name:"noiseFactor",style:{input:js.input,inputContainer:js.inputContainer,label:js.label},defaultValue:1,onChange:i}),Object(N.jsx)("button",{type:"button",style:js.actionButton,onClick:n,children:"Auto Zones Picking"}),Object(N.jsx)("button",{type:"button",style:js.actionButton,onClick:a,children:"Cancel"})]})},xs=Object(y.css)(vs||(vs=Object(x.a)(["\n  display: flex;\n  align-items: flex-start;\n  justify-content: flex-start;\n  height: 36px;\n  min-height: 36px;\n  border-width: 1px 1px 0px 1px;\n  border-style: solid;\n  border-color: rgb(213, 213, 213);\n  outline: none;\n  transition: background-color 0.2s ease-in 0s;\n  box-shadow: rgb(255, 255, 255) 0px 1px 0px 0px inset;\n  background: linear-gradient(rgb(255, 255, 255) 5%, rgb(246, 246, 246) 100%)\n    rgb(255, 255, 255);\n  color: rgb(102, 102, 102);\n  font-family: Arial;\n  font-weight: bold;\n  text-decoration: none;\n  text-shadow: rgb(255, 255, 255) 0px 1px 0px;\n\n  .toolOptionsPanel {\n    flex: 10;\n    padding: 0px;\n    margin: 0px;\n    height: 100%;\n  }\n\n  .windowButtonsContainer {\n    flex: 0.5;\n    display: flex;\n    align-items: center;\n    justify-content: flex-end;\n    height: 100%;\n  }\n\n  .windowButton {\n    width: 40px !important;\n    min-width: 40px !important;\n    background-color: transparent;\n    border: none;\n  }\n  button:focus {\n    outline: 0;\n  }\n"])));function Button(e){var t=e.title,n=e.popupPlacement,a=e.style,i=e.className,r=e.onClick,o=e.children,c=e.helpID,l=void 0===c?"":c,s=useHelp();return Object(Ce.b)(qe,{title:t,popupPlacement:n,style:a,children:Object(Ce.b)("button",Object(v.a)(Object(v.a)({type:"button",onClick:r,className:i},s.onHover),{},{"data-helpid":l,children:o}))})}function Header_Header(e){var t=e.isFullscreen,n=e.onMaximize,a=useChartData().selectedOptionPanel,i=oe(),r=Ec(),o=Object(D.useMemo)((function(){switch(a){case ti.zeroFilling.id:return Object(Ce.b)(ms,{});case ti.phaseCorrection.id:return Object(Ce.b)(bs,{});case ti.peakPicking.id:return Object(Ce.b)(Gl,{});case ti.rangesPicking.id:return Object(Ce.b)(ps,{});case ti.baseLineCorrection.id:return Object(Ce.b)(Ql,{});case ti.zone2D.id:return Object(Ce.b)(Os,{})}}),[a]),c=Object(D.useCallback)((function(){i.show(Object(Ce.b)(Hl,{onSave:function onSave(){r.success("Settings saved successfully"),i.close()}}),{position:J.TOP_CENTER,enableResizing:!0,width:600,height:400})}),[r,i]),l=Object(D.useCallback)((function(){i.show(Object(Ce.b)(qc,{}),{isBackgroundBlur:!1,position:J.TOP_CENTER,enableResizing:!0,width:800,height:600})}),[i]);return Object(Ce.c)("div",{css:xs,children:[Object(Ce.b)("div",{className:"toolOptionsPanel",children:o}),Object(Ce.c)("div",{className:"windowButtonsContainer",children:[Object(Ce.b)(Button,{title:"User Manual",popupPlacement:"left",style:{mainContainer:{height:"auto"}},onClick:l,className:"windowButton",children:Object(Ce.b)(Ze.z,{})}),Object(Ce.b)(Button,{title:"General Settings",popupPlacement:"left",style:{mainContainer:{height:"auto"}},onClick:c,className:"windowButton",children:Object(Ce.b)(Ze.J,{})}),t?"":Object(Ce.b)(Button,{title:"Full Screen",popupPlacement:"left",style:{mainContainer:{height:"auto"}},onClick:n,className:"windowButton",helpID:"fullScreen",children:Object(Ce.b)(Ze.C,{})})]})]})}Header_Header.defaultProps={onMaximize:function onMaximize(){return null}};var ys,ks,Cs=Header_Header,Ds=n(764),Ss={MOL:"mol",NMRIUM:"nmrium",JSON:"json",DX:"dx",JDX:"jdx",JDF:"jdf",ZIP:"zip",SDF:"sdf"},ws="504b0304";function _loadFile(){return(_loadFile=Object(Vr.a)(Xr.a.mark((function _callee(e){var t,n,a,i=arguments;return Xr.a.wrap((function _callee$(r){for(;;)switch(r.prev=r.next){case 0:return t=i.length>1&&void 0!==i[1]?i[1]:{asBuffer:!1},r.next=3,fetch(e);case 3:return checkStatus(n=r.sent),r.next=7,t.asBuffer;case 7:if(!r.sent){r.next=11;break}r.t0=n.arrayBuffer(),r.next=12;break;case 11:r.t0=n.text();case 12:return a=r.t0,r.abrupt("return",a);case 14:case"end":return r.stop()}}),_callee)})))).apply(this,arguments)}function checkStatus(e){if(!e.ok)throw new Error("HTTP ".concat(e.status," - ").concat(e.statusText));return e}function getFileExtension(e){return e.replace(/^.*\./,"").toLowerCase()}function getFileName(e){return e.substr(0,e.lastIndexOf("."))}function loadFiles(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Promise.all([].map.call(e,(function(e){return new Promise((function(n,a){var i=new FileReader;i.onabort=function(e){return a(e)},i.onerror=function(e){return a(e)},i.onload=function(){if(i.result){var t=i.result,a=getFileName(e.name),r=getFileExtension(e.name);n({binary:t,name:a,extension:r})}},t.asBuffer?i.readAsArrayBuffer(e):i.readAsBinaryString(e)}))})))}function loadFilesFromZip(e){return _loadFilesFromZip.apply(this,arguments)}function _loadFilesFromZip(){return(_loadFilesFromZip=Object(Vr.a)(Xr.a.mark((function _callee2(e){var t,n,a,i,r,o,c,l,s=arguments;return Xr.a.wrap((function _callee2$(u){for(;;)switch(u.prev=u.next){case 0:t=s.length>1&&void 0!==s[1]?s[1]:{},n=[],a=Object(rc.a)(e),u.prev=3,a.s();case 5:if((i=a.n()).done){u.next=21;break}return r=i.value,u.prev=7,u.next=10,r.async(t.asBuffer?"uint8array":"text");case 10:o=u.sent,c=getFileName(r.name),l=getFileExtension(r.name),n.push({binary:o,name:c,extension:l}),u.next=19;break;case 16:u.prev=16,u.t0=u.catch(7),console.log(u.t0);case 19:u.next=5;break;case 21:u.next=26;break;case 23:u.prev=23,u.t1=u.catch(3),a.e(u.t1);case 26:return u.prev=26,a.f(),u.finish(26);case 29:return u.abrupt("return",n);case 30:case"end":return u.stop()}}),_callee2,null,[[3,23,26,29],[7,16]])})))).apply(this,arguments)}var Ts=Object(y.css)(ys||(ys=Object(x.a)(["\n  height: 100%;\n  background-color: #b5b5b599;\n  position: absolute;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex-flow: column;\n  z-index: 99999;\n\n  p {\n    color: white;\n    background-color: rgb(104, 104, 104);\n    padding: 1.5%;\n    border-radius: 30px;\n    margin: 0px;\n  }\n\n  svg {\n    stroke-width: 0;\n    font-size: 3rem !important;\n    fill: white;\n  }\n"]))),Ms=Object(y.css)(ks||(ks=Object(x.a)(["\n  border: 0.55px #e6e6e6 solid;\n  display: flex;\n  flex: 1;\n  flex-direction: 'column';\n  height: 100%;\n"])));var As=function DropZone(e){var t=useChartData(),n=t.width,a=t.height,i=useDispatch(),r=Object(D.useCallback)((function(e,t){var n,a=Object(rc.a)(t);try{var r=function _loop(){var t=n.value,a=e.filter((function(e){return getFileExtension(e.name)===t}));switch(t){case Ss.MOL:loadFilesFromZip(a).then((function(e){return i({type:St,files:e})}));break;case Ss.NMRIUM:case Ss.JSON:loadFilesFromZip(a,{asBuffer:!0}).then((function(e){if(1===a.length){var t=new TextDecoder("utf8");e[0].binary=t.decode(e[0].binary),i({type:kt,files:e})}else i({type:Sn,isLoading:!1}),alert("You can add only one json file")}));break;case Ss.JDX:case Ss.DX:loadFilesFromZip(a,{asBuffer:!0}).then((function(e){return i({type:Ct,files:e})}));break;case Ss.JDF:loadFilesFromZip(a,{asBuffer:!0}).then((function(e){return i({type:Tt,files:e})}));break;case Ss.SDF:i({type:Dt,files:e})}};for(a.s();!(n=a.n()).done;)r()}catch(o){a.e(o)}finally{a.f()}}),[i]),o=Object(D.useCallback)((function(e){var t,n=Object(Hi.a)(new Set(e.map((function(e){return getFileExtension(e.name)})))),a=Object(rc.a)(n);try{var o=function _loop2(){var n=t.value,a=e.filter((function(e){return getFileExtension(e.name)===n}));switch(n){case Ss.MOL:loadFiles(a).then((function(e){i({type:St,files:e})}),(function(e){alert(e)}));break;case Ss.NMRIUM:case Ss.JSON:1===a.length?loadFiles(a,{asBuffer:!0}).then(function(){var e=Object(Vr.a)(Xr.a.mark((function _callee(e){var t,n;return Xr.a.wrap((function _callee$(a){for(;;)switch(a.prev=a.next){case 0:if(o=e[0].binary,new Uint8Array(o).slice(0,4).reduce((function(e,t){return e+t.toString(16).padStart(2,"0")}),"")!==ws){a.next=8;break}return a.next=4,Lc.a.loadAsync(e[0].binary);case 4:t=a.sent,r(Object.values(t.files),[Ss.NMRIUM]),a.next=11;break;case 8:n=new TextDecoder("utf8"),e[0].binary=n.decode(e[0].binary),i({type:kt,files:e});case 11:case"end":return a.stop()}var o}),_callee)})));return function(t){return e.apply(this,arguments)}}(),(function(e){alert(e)})):alert("You can add only one json file");break;case Ss.JDX:case Ss.DX:loadFiles(a,{asBuffer:!0}).then((function(e){i({type:Ct,files:e})}),(function(e){alert(e)}));break;case Ss.JDF:loadFiles(a,{asBuffer:!0}).then((function(e){i({type:Tt,files:e})}),(function(e){alert(e)}));break;case Ss.ZIP:loadFiles(a,{asBuffer:!0}).then(function(){var e=Object(Vr.a)(Xr.a.mark((function _callee2(e){var t,n,a,o,c;return Xr.a.wrap((function _callee2$(l){for(;;)switch(l.prev=l.next){case 0:t=Object(rc.a)(e),l.prev=1,t.s();case 3:if((n=t.n()).done){l.next=13;break}return a=n.value,l.next=7,Lc.a.loadAsync(a.binary);case 7:o=l.sent,c=Object(Hi.a)(new Set(Object.values(o.files).map((function(e){return getFileExtension(e.name)})))),c.some((function(e){return Ss[e.toUpperCase()]&&e!==Ss.ZIP}))?r(Object.values(o.files),c):i({type:wt,files:e});case 11:l.next=3;break;case 13:l.next=18;break;case 15:l.prev=15,l.t0=l.catch(1),t.e(l.t0);case 18:return l.prev=18,t.f(),l.finish(18);case 21:case"end":return l.stop()}}),_callee2,null,[[1,15,18,21]])})));return function(t){return e.apply(this,arguments)}}(),(function(e){alert(e)}));break;default:i({type:Sn,isLoading:!1}),alert("The file extension must be zip, dx, jdx, json, mol or nmrium.")}};for(a.s();!(t=a.n()).done;)o()}catch(c){a.e(c)}finally{a.f()}}),[i,r]),c=Object(D.useCallback)((function(e){i({type:Sn,isLoading:!0}),o(e)}),[i,o]),l=Object(Ds.a)({onDrop:c,noClick:!0}),s=l.getRootProps,u=l.getInputProps,d=l.isDragActive,b=l.open,f=Object(D.useCallback)((function(){b()}),[b]);return Object(Ce.b)(Fe,{value:{open:f},children:Object(Ce.c)("div",Object(v.a)(Object(v.a)({},s()),{},{css:Ms,children:[Object(Ce.b)("input",Object(v.a)({},u())),d&&Object(Ce.c)("div",{css:Ts,style:{width:"".concat(n+41,"px"),height:"".concat(a,"px")},children:[Object(Ce.b)(Ze.I,{}),Object(Ce.b)("p",{children:"Drop your files here"})]}),e.children]}))})},Es=0,Ps=!1,Is={container:{display:"flex",flexDirection:"column",margin:"0px",userSelect:"none"},button:{cursor:"pointer",padding:"5px 12px",display:"flex",alignItems:"center",fontSize:"11px",border:"none",outline:"none",transition:"background-color 0.2s ease-in",boxShadow:"inset 0px 1px 0px 0px #ffffff",background:"linear-gradient(to bottom, #f0f0f0 5%, #e1e1e1 100%)",filter:'progid:DXImageTransform.Microsoft.gradient(startColorstr="#f0f0f0", endColorstr="#e1e1e1",GradientType=0)',backgroundColor:"#ffffff",color:"#2d2d2d",fontFamily:"Arial",fontWeight:"bold",textDecoration:"none",textShadow:"0px 1px 0px #ffffff",borderTop:"0.55px  solid #d5d5d5"},buttonTitle:{padding:0,margin:0},content:{backgroundColor:"white",maxHeight:"0",overflow:"hidden",flex:"1 1 1px"}},Fs=1,_s=2;function AccordionItem(e){var t=e.title,n=e.children,a=e.index,i=e.isOpen,r=e.onOpen,o=e.style,c=Object(D.useState)(null),l=Object(O.a)(c,2),s=l[0],u=l[1],d=Object(D.useRef)(),b=Object(D.useRef)(),f=Object(D.useCallback)((function(e){Es=setTimeout((function(){Ps||r(a,{source:Fs,shiftKey:e.shiftKey}),Ps=!1}),200)}),[a,r]),p=Object(D.useCallback)((function(e){e.persist(),clearTimeout(Es),Ps=!0,r(a,{source:_s,shiftKey:e.shiftKey})}),[a,r]);return Object(D.useEffect)((function(){u(i?{backgroundColor:"#ccc"}:null)}),[i]),Object(N.jsxs)("div",{ref:b,style:Object(v.a)(Object(v.a)({},Is.container),{},{flex:null==s?0:"1 1 1px",transition:i?"flex 0.2s ease":""}),className:"custom-accordion",children:[Object(N.jsx)("button",{type:"button",style:Is.button,onClick:f,onDoubleClick:p,children:Object(N.jsx)("p",{style:Is.buttonTitle,children:t})}),Object(N.jsx)("div",{ref:d,style:Object(v.a)(Object(v.a)({},Is.content),{},{maxHeight:null==s?0:"100%"},o),children:n})]})}AccordionItem.defaultProps={onOpen:function onOpen(){return null}};var Rs=AccordionItem,Ns={container:{height:"100%",width:"100%",display:"flex",flexDirection:"column"}},Ls=[],zs=null;var Hs,Bs,Xs,Vs=function Accordion(e){var t=e.children,n=e.defaultOpenIndex,a=void 0===n?0:n,i=Object(D.useState)([]),r=Object(O.a)(i,2),o=r[0],c=r[1],l=Object(D.useRef)(),s=Object(D.useCallback)((function(e,t){var n=o.slice();t.source===Fs?n=n.map((function(t,n){return n===e&&zs!==e?!t:t})):(n=n.map((function(t,n){return n===e})),zs=t.shiftKey?zs===e?null:e:null),Ls=n,c(n)}),[o]),u=Object(D.useMemo)((function(){return D.Children.map(t,(function(e,t){return e&&Object(D.cloneElement)(e,{onOpen:s,index:t,isOpen:o&&o[t]})}))}),[t,o,s]);return Object(D.useEffect)((function(){null!=a&&c((function(e){return e.length>0?e.map((function(e,t){return Ls[t]?e:t===a})):(Ls=Array(t.length).fill(!1).map((function(e){return e})),Array(t.length).fill(!1).map((function(e,t){return t===a||e})))}))}),[t.length,a]),Object(N.jsx)("div",{ref:l,style:Ns.container,children:u})},Ys=n(401),Zs=Object(y.css)(Hs||(Hs=Object(x.a)(["\n  background-color: #ff6f0057;\n"]))),Us=Object(y.css)(Bs||(Bs=Object(x.a)(["\n  background-color: #f5f5dc;\n"]))),Ks=Object(y.css)(Xs||(Xs=Object(x.a)(["\n  border-spacing: 0;\n  border: 1px solid #dedede;\n  width: 100%;\n  // height: 100%;\n  font-size: 12px;\n\n  .react-contextmenu-wrapper {\n    display: contents;\n  }\n\n  tr {\n    :last-child {\n      td {\n        border-bottom: 0;\n      }\n    }\n  }\n\n  th {\n    position: sticky;\n    background-color: white;\n    z-index: 2;\n    top: 0;\n  }\n  th,\n  td {\n    margin: 0;\n    padding: 0.15rem 0.4rem;\n    border-bottom: 1px solid #dedede;\n    border-right: 1px solid #dedede;\n\n    :last-child {\n      border-right: 0;\n    }\n    button {\n      background-color: transparent;\n      border: none;\n    }\n  }\n"])));function ReactTableFlexLayout(e){var t=e.data,n=e.columns,a=e.onMouseDown,i=Object(Ys.useTable)({columns:n,data:t},Ys.useSortBy,Ys.useFlexLayout),r=i.getTableProps,o=i.getTableBodyProps,c=i.headerGroups,l=i.rows,s=i.prepareRow;return Object(Ce.c)("table",Object(v.a)(Object(v.a)({},r()),{},{css:Ks,children:[Object(Ce.b)("thead",{children:c.map((function(e){return Object(Ce.b)("tr",Object(v.a)(Object(v.a)({},e.getHeaderGroupProps()),{},{children:e.headers.map((function(e){return Object(Ce.c)("th",Object(v.a)(Object(v.a)({},e.getHeaderProps(e.getSortByToggleProps())),{},{children:[e.render("Header"),Object(Ce.b)("span",{children:e.isSorted?e.isSortedDesc?" \u25bc":" \u25b2":""})]}),e.getHeaderProps().key)}))}),e.getHeaderGroupProps().key)}))}),Object(Ce.b)("tbody",Object(v.a)(Object(v.a)({},o()),{},{style:{display:"block",height:"100%",overflowY:"auto"},children:l.map((function(e){return s(e),Object(Ce.b)("tr",Object(v.a)(Object(v.a)({},e.getRowProps()),{},{onMouseDown:a,children:e.cells.map((function(e){return Object(Ce.b)("td",Object(v.a)(Object(v.a)({},e.getCellProps()),{},{style:Object(v.a)(Object(v.a)({},e.getCellProps().style),{},{padding:"0px"}),children:e.render("Cell")}),e.getCellProps().key)}))}),e.getRowProps().key)}))}))]}))}ReactTableFlexLayout.defaultProps={onMouseDown:function onMouseDown(){return null}};var Ws=Object(D.memo)(ReactTableFlexLayout);var Gs={container:{height:"100%"},tableContainer:{height:"calc(100% - 30px)",overflow:"auto",display:"block"},searchInput:{width:"100%",borderRadius:"5px",border:"0.55px solid gray",padding:"5px",marginBottom:"2px"}};function InformationPanel(e){var t=e.info,n=e.meta,a=Object(D.useState)({}),i=Object(O.a)(a,2),r=i[0],o=i[1],c=Object(D.useState)([]),l=Object(O.a)(c,2),s=l[0],u=l[1],d=Object(D.useRef)(),b=Object(D.useCallback)((function(e){var t=Object.keys(r).filter((function(t){return t.toLowerCase().includes(e.target?e.target.value.toLowerCase():e.toLowerCase())}));u(t)}),[r]);Object(D.useEffect)((function(){d.current&&b(d.current.value)}),[b,d]),Object(D.useEffect)((function(){if(t&&n){var e=Object.keys(t).concat(Object.keys(n));u(e),o(Object(v.a)(Object(v.a)({},t),n))}}),[t,n]);var f=Object(D.useMemo)((function(){return[{Header:"Parameter",sortType:"basic",minWidth:100,width:20,maxWidth:20,Cell:function Cell(e){var t=e.row;return Object(N.jsx)("p",{style:{padding:"5px",backgroundColor:"white"},children:t.original})}},{Header:"Value",sortType:"basic",resizable:!0,Cell:function Cell(e){var t=e.row;return Object(N.jsx)("p",{style:{backgroundColor:"#efefef",height:"100%",padding:"5px",fontFamily:"monospace",whiteSpace:"pre",overflow:"hidden"},children:r[t.original].toString()})}}]}),[r]);return Object(N.jsxs)("div",{style:Gs.container,children:[Object(N.jsx)("div",{children:Object(N.jsx)("input",{type:"text",style:Gs.searchInput,placeholder:"Search for parameter...",onChange:b,ref:d})}),Object(N.jsx)("div",{style:Gs.tableContainer,children:Object(N.jsx)(Ws,{data:s,columns:f})})]})}var qs=function InfoWrapper(e){var t=function Wrapper(t){var n=useChartData(),a=n.data,i=n.activeSpectrum,r=Object(D.useMemo)((function(){return a&&i&&i.id?a.find((function(e){return e.id===i.id}))||{info:{},meta:{}}:{}}),[i,a]),o=r.info,c=void 0===o?{}:o,l=r.meta,s=void 0===l?{}:l,u=t.forwardedRef,d=Object(ge.a)(t,["forwardedRef"]);return Object(N.jsx)(e,Object(v.a)(Object(v.a)({},d),{},{info:c,meta:s,ref:u}))};return Object(D.forwardRef)((function(e,n){return Object(N.jsx)(t,Object(v.a)(Object(v.a)({},e),{},{forwardedRef:n}))}))}(Object(D.memo)(InformationPanel)),Js=n(208),$s=n(243),Qs=n.n($s);var eu,tu=function IntegralsWrapper(e){var t=function Wrapper(t){var n=useChartData(),a=n.data,i=n.activeSpectrum,r=n.xDomain,o=n.activeTab,c=n.tabActiveSpectrum,l=n.molecules,s=usePreferences(),u=Object(D.useMemo)((function(){return a&&i&&i.id?a.find((function(e){return e.id===i.id}))||{integrals:{},info:{}}:{}}),[i,a]),d=u.integrals,b=void 0===d?{}:d,f=u.info,p=void 0===f?{}:f,h=Object(D.useMemo)((function(){return c&&Object.keys(c).length>0?Object.keys(c):null}),[c]),g=t.forwardedRef,m=Object(ge.a)(t,["forwardedRef"]);return Object(N.jsx)(e,Object(v.a)(Object(v.a)({},m),{},{integrals:b,info:p,xDomain:r,preferences:s,activeTab:o,nucleus:h,molecules:l,ref:g}))};return Object(D.forwardRef)((function(e,n){return Object(N.jsx)(t,Object(v.a)(Object(v.a)({},e),{},{forwardedRef:n}))}))},nu=Object(y.css)(eu||(eu=Object(x.a)(["\n  display: flex;\n  flex-direction: column;\n  width: 450px;\n  padding: 5px;\n  button:focus {\n    outline: none;\n  }\n  .header {\n    height: 24px;\n    border-bottom: 1px solid #f0f0f0;\n    display: flex;\n    span {\n      color: #464646;\n      font-size: 15px;\n      flex: 1;\n    }\n\n    button {\n      background-color: transparent;\n      border: none;\n      svg {\n        height: 16px;\n      }\n    }\n  }\n  .container {\n    display: flex;\n    margin: 30px 5px;\n    input,\n    button {\n      padding: 5px;\n      border: 1px solid gray;\n      border-radius: 5px;\n      height: 36px;\n      margin: 2px;\n    }\n    input {\n      flex: 10;\n    }\n    button {\n      flex: 2;\n      color: white;\n      background-color: gray;\n    }\n  }\n"])));function changeSum_NumberInput_NumberInput(e){var t=e.onSave,n=e.onClose,a=e.header,i=Object(D.useRef)(),r=Object(D.useCallback)((function(){t(i.current.value)}),[t]),o=Object(D.useCallback)((function(e){"Enter"===e.key&&t(i.current.value)}),[t]);return Object(Ce.c)("div",{css:nu,children:[Object(Ce.c)("div",{className:"header handle",children:[Object(Ce.b)("span",{children:a}),Object(Ce.b)(et,{onClick:n})]}),Object(Ce.c)("div",{className:"container",children:[Object(Ce.b)("input",{ref:i,type:"number",placeholder:"Enter the new value",onKeyDown:o}),Object(Ce.b)("button",{type:"button",onClick:r,children:"Set"})]})]})}changeSum_NumberInput_NumberInput.defaultProps={onSave:function onSave(){return null},onClose:function onClose(){return null}};var au,iu,ru,ou,cu=changeSum_NumberInput_NumberInput,lu=n(637),su=n.n(lu),uu=n(276),du=n(774);function Arrow(e){var t=e.direction,n=e.onClick;return Object(Ce.b)("div",{onClick:n,css:Object(y.css)(au||(au=Object(x.a)(["\n        display: flex;\n        position: absolute;\n        top: calc(50% - 18px);\n        ",";\n        height: 36px;\n        width: 36px;\n        justify-content: center;\n        background: white;\n        border-radius: 50%;\n        cursor: pointer;\n        align-items: center;\n        border: none;\n        transition: transform ease-in 0.1s;\n        &:hover {\n          transform: scale(1.2);\n          background-color: #607d8b;\n          color: white;\n        }\n        img {\n          transform: translateX(","px);\n          &:focus {\n            outline: 0;\n          }\n        }\n      "])),"right"===t?"right: 25px":"left: 25px","left"===t?"-2":"2"),children:Object(Ce.b)(Ze.a,{style:{transform:"scaleX(".concat("right"===t?"-1":"1",")")}})})}function NextPrev(e){var t=e.children,n=e.loop,a=e.defaultIndex,i=e.onChange,r=Object(du.a)(),o=Object(O.a)(r,2),c=o[0],l=o[1].width,s=Object(D.useState)(0),u=Object(O.a)(s,2),d=u[0],b=u[1];Object(D.useEffect)((function(){b(a)}),[a]);var f=Object(D.useMemo)((function(){return D.Children.map(t,(function(e){return Object(Ce.b)("div",{css:Object(y.css)(iu||(iu=Object(x.a)(["\n              width: ","px;\n              height: 100%;\n            "])),l),children:e},e.key)}))}),[t,l]),p=Object(D.useCallback)((function(){b((function(e){if(e===f.length-1)return i(e),n?0:e;var t=e+1;return i(t),t}))}),[f.length,n,i]),h=Object(D.useCallback)((function(){b((function(e){if(0===e)return i(e),n?0:e;var t=e-1;return i(t),t}))}),[n,i]);return l||f?Object(Ce.c)("div",{css:Object(y.css)(ru||(ru=Object(x.a)(["\n        position: relative;\n        height: 100%;\n        width: 100%;\n        margin: 0 auto;\n        overflow: hidden;\n      "]))),ref:c,children:[Object(Ce.b)("div",{css:Object(y.css)(ou||(ou=Object(x.a)(["\n          transform: translateX(-","px);\n          transition: transform ease-out ","s;\n          height: 100%;\n          width: ","px;\n          display: flex;\n        "])),l*d,.45,l*f.length),children:f}),0!==d&&Object(Ce.b)(Arrow,{direction:"left",onClick:h}),d!==f.length-1&&Object(Ce.b)(Arrow,{direction:"right",onClick:p})]}):null}NextPrev.defaultProps={loop:!1,defaultIndex:0,onChange:function onChange(){return null}};var bu,fu,pu=Object(D.memo)(NextPrev),hu=Object(y.css)(bu||(bu=Object(x.a)(["\n  display: flex;\n  flex-direction: row;\n  border-top: 0.55px solid rgb(240, 240, 240);\n  border-bottom: 0.55px solid rgb(240, 240, 240);\n  padding: 0px 5px;\n\n  p {\n    margin: 0;\n    text-align: right;\n    width: 100%;\n    line-height: 22px;\n    padding: 0px 10px;\n  }\n"]))),gu=Object(y.css)(fu||(fu=Object(x.a)(["\n  width: 450px;\n\n  .slider {\n    height: 180px;\n    width: 100%;\n    padding: 0px;\n    height: 180px;\n    width: 100%;\n    padding: 0px;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    flex-direction: column;\n  }\n  .slider p {\n    width: 100%;\n    margin: 0 auto;\n    display: block;\n    position: relative;\n    text-align: center;\n  }\n  .slider svg polygon {\n    fill: gray !important;\n  }\n  button {\n    flex: 2;\n    padding: 5px;\n    border: 1px solid gray;\n    border-radius: 5px;\n    height: 36px;\n    margin: 0 auto;\n    margin-top: 15px;\n    display: block;\n    width: 20%;\n\n    color: white;\n    background-color: gray;\n  }\n"])));function MoleculeSelection(e){var t=e.molecules,n=e.onChange,a=Object(D.useState)(),i=Object(O.a)(a,2),r=i[0],o=i[1];Object(D.useEffect)((function(){t&&t.length>0&&o(0)}),[t]);var c=Object(D.useCallback)((function(e){o(e),n(e)}),[n]);return Object(Ce.c)("div",{children:[Object(Ce.b)("div",{css:hu,children:Object(Ce.c)("p",{children:[t&&t.length>0&&"".concat(+(r+1)," / ").concat(t.length)," "]})}),Object(Ce.b)("div",{css:gu,children:Object(Ce.b)(pu,{onChange:c,children:t&&t.map((function(e,t){return Object(Ce.c)("div",{className:"slider",children:[Object(Ce.b)("div",{children:Object(Ce.b)(uu.a,{id:"molSVG".concat(t),width:120,molfile:e.molfile})}),Object(Ce.c)("p",{children:[Object(Ce.b)(su.a,{mf:e.mf})," - ",e.mw.toFixed(2)]})]},e.key)}))})})]})}MoleculeSelection.defaultProps={onChange:function onChange(){return null}};var mu,ju,vu,Ou=MoleculeSelection,xu=Object(y.css)(mu||(mu=Object(x.a)(["\n  display: flex;\n  flex-direction: column;\n  flex-grow: 1;\n"]))),yu=Object(y.css)(ju||(ju=Object(x.a)(["\n  display: flex;\n  flex-direction: column;\n  padding: 5px;\n\n  .optional {\n    margin-top: 5px;\n    margin-bottom: 5px;\n    padding: 0px 10px;\n\n    text-align: center;\n    font-size: 18px;\n    font-weight: bold;\n  }\n  .optional2 {\n    margin-top: 5px;\n    margin-bottom: 25px;\n    padding: 0px 10px;\n    width: 100%;\n\n    text-align: center;\n  }\n"]))),ku=Object(y.css)(vu||(vu=Object(x.a)(["\n  button {\n    flex: 2;\n    padding: 5px;\n    border: 1px solid gray;\n    border-radius: 5px;\n    height: 36px;\n    margin: 0 auto;\n    margin-top: 15px;\n    display: block;\n    width: 20%;\n\n    color: white;\n    background-color: gray;\n  }\n\n  .newSumText {\n    margin-top: 15px;\n    padding: 0px 10px;\n    width: 100%;\n\n    text-align: center;\n  }\n"])));function SelectMolecule(e){var t=e.onSave,n=e.molecules,a=e.element,i=Object(D.useState)(),r=Object(O.a)(i,2),o=r[0],c=r[1],l=usePreferences().display,s=l.general,u=l.panels,d=Object(D.useMemo)((function(){return a&&n&&n.length>0&&void 0!==o&&n[o].atoms[a]?n[o].atoms[a]:0}),[o,a,n]);Object(D.useEffect)((function(){n&&n.length>0&&c(0)}),[n]);var b=Object(D.useCallback)((function(e){e.preventDefault(),t(d)}),[d,t]),f=Object(D.useCallback)((function(e){c(e)}),[]);return!s.hideSetSumFromMolecule&&!u.hideStructuresPanel&&a&&n&&n.length>0?Object(Ce.c)("div",{css:xu,children:[Object(Ce.c)("div",{css:yu,children:[Object(Ce.b)("p",{className:"optional",children:"OR"}),Object(Ce.b)("p",{className:"optional2",children:"Select a molecule as reference!"})]}),Object(Ce.c)("div",{css:ku,children:[Object(Ce.b)(Ou,{molecules:n,onChange:f}),Object(Ce.b)("button",{type:"button",onClick:b,children:"Set"}),Object(Ce.c)("p",{className:"newSumText",children:["New sum for ",a," will be ",d,"!"]})]})]}):null}SelectMolecule.defaultProps={onSave:function onSave(){return null}};var Cu,Du=SelectMolecule,Su=Object(y.css)(Cu||(Cu=Object(x.a)(["\n  display: flex;\n  flex-direction: column;\n  padding: 5px;\n"])));function ChangeSumModal(e){var t=e.onSave,n=e.onClose,a=e.header,i=e.molecules,r=e.element,o=Object(D.useCallback)((function(e){t(e)}),[t]),c=Object(D.useCallback)((function(e){t(e)}),[t]);return Object(Ce.c)("div",{css:Su,children:[Object(Ce.b)(cu,{onSave:o,onClose:n,header:a}),Object(Ce.b)(Du,{onSave:c,molecules:i,element:r})]})}ChangeSumModal.defaultProps={onSave:function onSave(){return null},onClose:function onClose(){return null}};var wu,Tu=ChangeSumModal,Mu=Object(y.css)(wu||(wu=Object(x.a)(["\n  background-color: transparent;\n  border: none;\n  border-radius: 5px;\n\n  &:hover {\n    background-color: lightgray;\n  }\n\n  &.toggle-active {\n    background-color: gray;\n    color: white;\n  }\n"])));function ToggleButton(e){var t=e.children,n=e.style,a=e.onClick,i=e.popupTitle,r=e.popupPlacement,o=e.defaultValue,c=e.disabled,l=Object(D.useState)(o),s=Object(O.a)(l,2),u=s[0],d=s[1],b=Object(D.useCallback)((function(){a(!u),d(!u)}),[a,u]);return Object(Ce.b)(qe,{title:i,popupPlacement:r,children:Object(Ce.b)("button",{disabled:c,css:Mu,style:n,className:u?"toogle toggle-active":"toggle",type:"button",onClick:b,children:t})})}ToggleButton.defaultProps={popupTitle:"",popupPlacement:"right",style:{},defaultValue:!1,onClick:function onClick(){return null},disabled:!1};var Au,Eu=Object(D.memo)(ToggleButton),Pu=Object(y.css)(Au||(Au=Object(x.a)(["\n  \n  display: flex;\n  flex-direction: row;\n  border-bottom: 0.55px solid rgb(240, 240, 240);\n  padding: 0px 5px;\n\n  button {\n    background-color: transparent;\n    border: none;\n    padding: 5px;\n  }\n\n  button:disabled{\n    opacity:0.6;\n  }\n  \n  .counter-label {\n    margin: 0;\n    text-align: right;\n    width: 100%;\n    line-height: 22px;\n    padding: 0px 10px;\n  }\n\n  filter-button{\n    borderRadius: 5px;\n    marginTop: 3px;\n    marginLeft: 5px;\n    color: black;\n    backgroundColor: transparent;\n    border: none;\n    height: 16px;\n    width: 18px;\n    fontSize: 12px;\n    padding: 0;\n  },\n\n"])));function DefaultPanelHeader(e){var t=e.counter,n=e.onDelete,a=e.deleteToolTip,i=e.onFilter,r=e.filterToolTip,o=e.filterIsActive,c=e.counterFiltered,l=e.children,s=e.onSettingClick,u=e.showSettingButton,d=e.canDelete;return Object(Ce.c)("div",{css:Pu,children:[d&&Object(Ce.b)(qe,{title:a,popupPlacement:"right",children:Object(Ce.b)("button",{type:"button",onClick:n,disabled:0===t,children:Object(Ce.b)(Ze.B,{})})}),i&&r?Object(Ce.b)(Eu,{popupTitle:r,popupPlacement:"right",onClick:i,children:Object(Ce.b)(Ze.s,{style:{pointerEvents:"none",fontSize:"12px"}})}):null,l,t?Object(Ce.c)("p",{className:"counter-label",children:["["," ",o&&!0===o&&void 0!==c?"".concat(c,"/").concat(t):t," ","]"]}):Object(Ce.b)("p",{style:{flex:1}}),u&&Object(Ce.b)(qe,{title:"preferences",popupPlacement:"left",children:Object(Ce.b)("button",{type:"button",onClick:s,children:Object(Ce.b)(Ze.d,{})})})]})}DefaultPanelHeader.defaultProps={counter:0,onDelete:function onDelete(){return null},deleteToolTip:"Delete",onFilter:function onFilter(){return null},filterToolTip:"",filterIsActive:!1,counterFiltered:0,onSettingClick:function onSettingClick(){return null},showSettingButton:!1,canDelete:!0};var Iu,Fu=Object(D.memo)(DefaultPanelHeader),_u=Object(y.css)(Iu||(Iu=Object(x.a)(["\n  background-color: transparent;\n  border: none;\n  height: 100%;\n  svg {\n    fill: green;\n    font-size: 16px;\n  }\n"])));function SaveButton(e){var t=e.onClick,n=e.popupTitle,a=e.popupPlacement,i=e.disabled,r=e.className;return Object(Ce.b)("div",{className:r,children:Object(Ce.b)(qe,{title:n,popupPlacement:a,children:Object(Ce.b)("button",{css:_u,type:"button",onClick:t,disabled:i,className:r,children:Object(Ce.b)(Ze.c,{})})})})}SaveButton.defaultProps={onClick:function onClick(){return null},popupTitle:"Save",popupPlacement:"left",disabled:!1,className:""};var Ru,Nu=Object(D.memo)(SaveButton),Lu=Object(y.css)(Ru||(Ru=Object(x.a)(["\n  display: flex;\n  flex-direction: row-reverse;\n  border-bottom: 0.55px solid rgb(240, 240, 240);\n\n  button {\n    background-color: transparent;\n    border: none;\n    padding: 5px;\n  }\n  button:disabled {\n    opacity: 0.6;\n  }\n"])));function PreferencesHeader(e){var t=e.onClose,n=e.onSave;return Object(Ce.c)("div",{css:Lu,children:[Object(Ce.b)(et,{onClick:t,popupTitle:"close Preferences"}),Object(Ce.b)(Nu,{onClick:n,popupTitle:"save Preferences"})]})}var zu=Object(D.memo)(PreferencesHeader),Hu=Object(D.forwardRef)((function EditableColumn(e,t){var n=e.onSave,a=e.value,i=e.type,r=e.style,o=e.onEditStart,c=e.editStatus,l=Object(D.useState)(),s=Object(O.a)(l,2),u=s[0],d=s[1],b=Object(D.useRef)();Object(D.useEffect)((function(){d(c)}),[c]),Object(D.useImperativeHandle)(t,(function(){return{startEdit:function startEdit(){d(!0)},closeEdit:function closeEdit(){d(!1)}}}));var f=Object(D.useCallback)((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;e?(o(t),d(e)):13===t.keyCode?(n(t),d(e)):27===t.keyCode&&d(e)}),[o,n]);return Object(N.jsxs)("div",{style:Object(v.a)({display:"table",width:"100%",height:"100%"},r),onDoubleClick:function onDoubleClick(e){return f(!0,e)},children:[!u&&Object(N.jsx)("span",{style:{display:"table-cell",verticalAlign:"middle"},children:a}),u&&Object(N.jsx)("div",{style:{display:"table-cell",verticalAlign:"middle"},children:Object(N.jsx)(Al,{enableAutoSelect:!0,ref:b,value:a,type:i,onKeyDown:function onKeyDown(e){return f(!1,e)}})})]})}));Hu.defaultProps={onSave:function onSave(){return null},onEditStart:function onEditStart(){return null},type:"text",editStatus:!1};var Bu,Xu=Hu,Vu=Object(y.css)(Bu||(Bu=Object(x.a)(["\n  box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.25);\n  padding: 0px;\n  margin: 0px;\n  border-radius: 2px;\n  display: flex;\n  flex-direction: column;\n  position: fixed;\n  z-index: 99999;\n  padding: 2px;\n  background-color: white;\n  width: 150px;\n  button {\n    background-color: transparent;\n    border: none;\n    border-bottom: 0.55px solid #f0f0f0;\n    font-size: 11px;\n    padding: 5px;\n    text-align: left;\n    outline: none;\n  }\n  button:hover {\n    background-color: #fafafa;\n    outline: none;\n  }\n\n  button:active {\n    background-color: #eaeaea;\n    outline: none;\n  }\n\n  button:last-of-type {\n    border: none;\n  }\n"])));function ContextMenu(e,t){var n=e.context,a=Object(D.useState)({lef:0,top:0}),i=Object(O.a)(a,2),r=i[0],o=i[1],c=useGlobal(),l=c.rootRef,s=c.elementsWraperRef,u=Object(D.useState)(),d=Object(O.a)(u,2),b=d[0],f=d[1],p=Object(D.useState)(),h=Object(O.a)(p,2),g=h[0],m=h[1],j=Object(D.useState)(null),v=Object(O.a)(j,2),x=v[0],y=v[1],k=Object(D.useRef)();Object(D.useEffect)((function(){return k.current=document.createElement("div"),s&&s.appendChild(k.current),function(){k.current&&s&&s.removeChild(k.current)}}),[s]);Object(D.useImperativeHandle)(t,(function(){return{handleContextMenu:function handleContextMenu(e,t){f(t),function contextMenuHandler(e){e.preventDefault(),y(e.target.parentElement),m(!0);var t=e.clientX,n=e.clientY,a=window.innerWidth-t>150,i=!a,r=window.innerHeight-n>0,c=!r;a&&(i="".concat(t+5,"px")),i&&(i="".concat(t-150-5,"px")),r&&(r="".concat(n+5,"px")),c&&(r="".concat(n-0-5,"px")),o({left:i,top:r})}(e)}}}));var C=Object(D.useCallback)((function(e,t){e.preventDefault(),t(b),m(!1)}),[b]);return Object(D.useEffect)((function(){var e=function _handleGlobalClick(e){x&&e.target.parentElement&&!e.target.parentElement.isSameNode(x)&&g&&m(!1)};return l&&l.addEventListener("click",e),function(){l&&l.removeEventListener("click",e)}}),[g,t,l,x]),g?k.current&&Object(fe.createPortal)(n&&Object(Ce.b)("div",{ref:t,css:[Vu,r],children:n.map((function(e,t){return Object(Ce.b)("button",{type:"button",onClick:function onClick(t){return C(t,e.onClick)},children:e.label},t)}))}),k.current):null}var Yu=Object(D.forwardRef)(ContextMenu),Zu=function ReactTableHeader(e){var t=e.headerGroups;return Object(N.jsx)("thead",{children:t.map((function(e){return Object(N.jsx)("tr",Object(v.a)(Object(v.a)({},e.getHeaderGroupProps()),{},{children:e.headers.map((function(e){return Object(N.jsxs)("th",Object(v.a)(Object(v.a)({},e.getHeaderProps(e.getSortByToggleProps())),{},{children:[e.render("Header"),Object(N.jsx)("span",{children:e.isSorted?e.isSortedDesc?" \u25bc":" \u25b2":""})]}),e.getHeaderProps().key)}))}),e.getHeaderGroupProps().key)}))})},Uu=function ReactTableRow(e){var t=e.row,n=e.onContextMenu,a=Object(vi.c)([Object.prototype.hasOwnProperty.call(t.original,"id")?t.original.id:""]);return Object(Ce.b)("tr",Object(v.a)(Object(v.a)(Object(v.a)({onContextMenu:n,css:a.isActive?Zs:Object.prototype.hasOwnProperty.call(t.original,"isConstantlyHighlighted")&&!0===t.original.isConstantlyHighlighted?Us:null},t.getRowProps()),a.onHover),{},{children:t.cells.map((function(e){var t=e.column,n=t.minWidth,a=t.maxWidth,i=t.width,r=t.padding;return Object(Ce.b)("td",Object(v.a)(Object(v.a)({},e.getCellProps()),{},{onContextMenu:function onContextMenu(e){return e.preventDefault(),!1},style:{minWidth:n,maxWidth:a,width:i,padding:r},children:e.render("Cell")}),e.key)}))}),t.getRowProps().key)};function ReactTable(e){var t=e.data,n=e.columns,a=e.context,i=Object(D.useRef)(),r=Object(Ys.useTable)({columns:n,data:t},Ys.useSortBy),o=r.getTableProps,c=r.getTableBodyProps,l=r.headerGroups,s=r.rows,u=r.prepareRow,d=Object(D.useCallback)((function(e,t){checkModifierKeyActivated(e)||(e.preventDefault(),i.current.handleContextMenu(e,t.original))}),[i]);return Object(Ce.c)(D.Fragment,{children:[Object(Ce.c)("table",Object(v.a)(Object(v.a)({},o()),{},{css:Ks,children:[Object(Ce.b)(Zu,{headerGroups:l}),Object(Ce.b)("tbody",Object(v.a)(Object(v.a)({},c()),{},{children:s.map((function(e){return u(e),Object(Ce.b)(Uu,Object(v.a)(Object(v.a)({row:e},e.getRowProps()),{},{onContextMenu:function onContextMenu(t){return d(t,e)}}),e.key)}))}))]})),Object(Ce.b)(Yu,{ref:i,context:a})]})}ReactTable.defaultProps={context:null};var Ku=Object(D.memo)(ReactTable);var Wu=function NoTableData(){return Object(N.jsx)("p",{style:{textAlign:"center",width:"100%",fontSize:"11px",padding:"5px",color:"gray"},children:"No Data"})},Gu={marginLeft:10,marginRight:10,border:"none"};function IntegralTable(e){var t=e.integrals,n=e.info,a=e.activeTab,i=e.xDomain,r=e.enableFilter,o=e.onFilter,c=e.preferences,l=useDispatch(),s=Object(D.useRef)([]),u=useGlobal().rootRef,d=Object(D.useCallback)((function(e,t){e.preventDefault(),e.stopPropagation();var n=t.original;l({type:Kt,integralID:n.id})}),[l]),b=Object(D.useCallback)((function(e,t){var n=Object(v.a)(Object(v.a)({},t.original),{},{kind:e});l({type:Mn,data:n})}),[l]),f=Object(D.useMemo)((function(){return[{orderIndex:1,Header:"#",Cell:function Cell(e){return e.row.index+1},width:10},{orderIndex:2,Header:"From",accessor:"from",sortType:"basic",resizable:!0,Cell:function Cell(e){return e.row.original.from.toFixed(2)}},{orderIndex:3,Header:"To",accessor:"to",sortType:"basic",resizable:!0,Cell:function Cell(e){return e.row.original.to.toFixed(2)}},{orderIndex:6,Header:"Kind",accessor:"kind",sortType:"basic",resizable:!0,Cell:function Cell(e){var t=e.row;return Object(N.jsx)(Jl,{onChange:function onChange(e){return b(e,t)},data:sr,style:Gu,defaultValue:t.original.kind})}},{orderIndex:7,Header:"",width:"1%",maxWidth:"24px",minWidth:"24px",id:"delete-button",Cell:function Cell(e){var t=e.row;return Object(N.jsx)("button",{type:"button",className:"delete-button",onClick:function onClick(e){return d(e,t)},children:Object(N.jsx)(Ze.B,{})})}}]}),[b,d]),p=Object(D.useCallback)((function(e,t){l({type:Jn,value:e.target.value,id:t.id})}),[l]),h=Object(D.useCallback)((function(e){s.current.forEach((function(t,n){e!==n&&t&&t.closeEdit()}))}),[]);Object(D.useEffect)((function(){return u&&u.addEventListener("mousedown",h),function(){u&&u.removeEventListener("mousedown",h)}}),[h,u]);var g=Object(D.useMemo)((function(){var e=function setCustomColumn(e,t,n,a){e.push({orderIndex:t,Header:n,sortType:"basic",Cell:function Cell(e){var t=e.row;return a(t)}})},t=dt(c,"formatting.panels.integrals.[".concat(a,"]")),n=Object(Hi.a)(f);if(C()(t,"showAbsolute",Di.showAbsolute)&&e(n,4,"Absolute",(function(e){return Yi(e.original.absolute,C()(t,"absoluteFormat",Di.absoluteFormat))})),C()(t,"showRelative",Di.showRelative)){var i=a&&a.replace(/[0-9]/g,"");e(n,5,"Relative ".concat(i),(function(e){var n=Yi(e.original.integral,C()(t,"relativeFormat",Di.relativeFormat));return Object(N.jsx)(Xu,{onEditStart:function onEditStart(){return h(e.index)},ref:function ref(t){return s.current[e.index]=t},value:n,onSave:function onSave(t){return p(t,e.original)},type:"number"})}))}return n.sort((function(e,t){return e.orderIndex-t.orderIndex}))}),[a,f,h,c,p]),m=Object(D.useMemo)((function(){function isInRange(e,t){var n=1e4;return e*=n,(t*=n)>=i[0]*n&&e<=i[1]*n||e<=i[0]*n&&t>=i[1]*n}return 1===n.dimension&&t&&t.values?(r?t.values.filter((function(e){return isInRange(e.from,e.to)})):t.values).map((function(e){return Object(v.a)(Object(v.a)({},e),{},{isConstantlyHighlighted:isInRange(e.from,e.to)})})):[]}),[r,n.dimension,t,i]);return Object(D.useEffect)((function(){o(m.length)}),[m,o]),m&&m.length>0?Object(N.jsx)(Ku,{data:m,columns:g}):Object(N.jsx)(Wu,{})}var qu,Ju=tu(Object(D.memo)(IntegralTable)),$u=n(403),Qu=Object(y.css)(qu||(qu=Object(x.a)(["\n  display: flex;\n  margin: 5px 0px;\n\n.inputLabel{\n  flex: 2;\n  font-size: 11px;\n  font-weight: bold;\n  color: #232323;\n}\n\n.input {\n  width: '60%',\n  text-align: 'center',\n}\n\n.color{\n  width: 36px;\n  height: 14px;\n  border-radius: 2px;\n}\n\n.swatch{\n  padding: 5px;\n  background: #fff;\n  border-radius: 1px;\n  box-shadow: 0 0 0 1px rgba(0,0,0,.1);\n  display: inline-block;\n  cursor: pointer;\n}\n.color-popover {\n  position: absolute;\n  z-index: 2;\n}\n\n.cover {\n  position: fixed;\n  top: 0px;\n  right: 0px;\n  bottom: 0px;\n  left: 0px;\n}\n  .chrome-picker {\n    border-radius: none !important;\n    width: 200px !important;\n    height: 60px !important;\n    display: flex;\n\n\n  }\n  .chrome-picker > div:first-of-type {\n    padding: 0px !important;\n\n  }\n  .chrome-picker > div:last-child >  div:first-of-type {\n    width: 120px;\n\n  }\n  .chrome-picker > div:last-child >  div:last-child {\n    display:none !important;\n  }\n"])));function ColorInput(e){var t=e.label,n=e.onColorChange,a=e.name,i=e.value,r=Object(D.useState)(!1),o=Object(O.a)(r,2),c=o[0],l=o[1],s=Object(D.useState)(i),u=Object(O.a)(s,2),d=u[0],b=u[1],f=Object(D.useCallback)((function(){l(!c)}),[c]),p=Object(D.useCallback)((function(){l(!1)}),[]),h=Object(D.useCallback)((function(e){var t="".concat(e.hex).concat(Math.round(255*e.rgb.a).toString(16));b(t),n(Object(v.a)(Object(v.a)({},e),{},{hex:t,name:a}))}),[a,n]);return Object(Ce.c)("div",{css:Qu,children:[Object(Ce.b)("span",{className:"inputLabel",children:t}),Object(Ce.c)("div",{style:{flex:4},children:[Object(Ce.c)("div",{className:"swatch",onClick:f,children:[Object(Ce.b)("div",{className:"color",style:{backgroundColor:d}}),Object(Ce.b)("input",{type:"hidden",value:d,name:a})]}),c?Object(Ce.c)("div",{className:"color-popover",children:[Object(Ce.b)("div",{className:"cover",onClick:p}),Object(Ce.b)($u.ChromePicker,{color:{hex:d},onChangeComplete:h})]}):null]})]})}ColorInput.defaultProps={value:"#000000",label:"Color: ",onColorChange:function onColorChange(){return null}};var ed=Object(D.memo)(ColorInput),td={row:{display:"flex",margin:"5px 0px",alignItems:"center"},inputLabel:{flex:2,fontSize:"11px",fontWeight:"bold",color:"#232323"},input:{width:"60%",textAlign:"center"}};function ColumnFormatField(e){var t=e.label,n=e.checkControllerName,a=e.checked,i=e.format,r=e.formatControllerName,o=e.inputChangeHandler,c=e.groupID,l=Object(D.useState)(Boolean(a)),s=Object(O.a)(l,2),u=s[0],d=s[1];return Object(N.jsxs)("div",{style:td.row,children:[Object(N.jsx)("span",{style:td.inputLabel,children:t}),Object(N.jsxs)("div",{style:{flex:4,display:"flex",flexDirection:"row",alignItems:"center"},children:[Object(N.jsx)("input",{type:"checkbox",onChange:function onChange(e){return d(e.target.checked)},style:{margin:"0px 5px"},defaultChecked:u}),Object(N.jsx)("input",{name:"".concat(c,"-").concat(n),type:"hidden",value:u}),Object(N.jsx)(Al,{style:{container:td.input},name:"".concat(c,"-").concat(r),type:"text",onChange:o,value:i||""})]})]})}var nd=Object(D.memo)(ColumnFormatField),ad={container:{padding:10,backgroundColor:"#f1f1f1",height:"100%",flex:1},groupContainer:{padding:"5px",borderRadius:"5px",margin:"10px 0px",backgroundColor:"white"},row:{display:"flex",margin:"5px 0px"},header:{borderBottom:"1px solid #e8e8e8",paddingBottom:"5px",fontWeight:"bold",color:"#4a4a4a"},inputLabel:{flex:2,fontSize:"11px",fontWeight:"bold",color:"#232323"},input:{width:"30%",textAlign:"center"}},id=[{id:1,label:"Absolute :",checkController:"showAbsolute",formatController:"absoluteFormat",defaultFormat:"0.00"},{id:2,label:"Relative :",checkController:"showRelative",formatController:"relativeFormat",defaultFormat:"00.00"}];function IntegralsPreferences(e,t){var n=e.nucleus,a=e.preferences,i=Ec(),r=useStateWithLocalStorage("nmr-general-settings"),o=Object(O.a)(r,2)[1],c=Object(D.useState)(null),l=Object(O.a)(c,2),s=l[0],u=l[1],d=Object(D.useRef)();Object(D.useEffect)((function(){var e=dt(a,"formatting.panels.integrals");e&&u(e)}),[a]);var b=function saveToLocalStorgate(e){o(e,"formatting.panels.integrals")},f=Object(D.useCallback)((function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];a.dispatch({type:gl,payload:{key:"integrals",value:e}}),t&&i.success("Integrals preferences saved successfully")}),[i,a]);Object(D.useImperativeHandle)(t,(function(){return{saveSetting:function saveSetting(){"function"===typeof d.current.requestSubmit?d.current.requestSubmit():d.current.dispatchEvent(new Event("submit",{cancelable:!0}))}}}));var p=function(){var e=Object(Vr.a)(Xr.a.mark((function _callee(e){var t,n,a,i,r,o,c,l;return Xr.a.wrap((function _callee$(s){for(;;)switch(s.prev=s.next){case 0:e.preventDefault(),t=e.target,n=new FormData(t),a={},i=Object(rc.a)(n.entries());try{for(i.s();!(r=i.n()).done;)o=r.value,c=o[0].split("-").join("."),l=["true","false"].includes(o[1])?"true"===o[1]:o[1],a=st()(a,c,l)}catch(u){i.e(u)}finally{i.f()}f(a,!0),b(a);case 8:case"end":return s.stop()}}),_callee)})));return function handleSubmit(t){return e.apply(this,arguments)}}(),h=Object(D.useCallback)((function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(s){var a=null===t[0]?s[t[1]]:C()(s,t.join("."));return a||null}var i=t.length-1;return Di[t[i]]}),[s]);return Object(N.jsx)("div",{style:ad.container,children:Object(N.jsxs)("form",{onSubmit:p,ref:d,children:[Object(N.jsxs)("div",{style:ad.groupContainer,children:[Object(N.jsx)("p",{style:ad.header,children:"General"}),Object(N.jsx)(ed,{name:"color",value:"".concat(h(null,"color"))}),Object(N.jsx)(Ul,{name:"strokeWidth",label:"stroke width :",style:{label:{fontSize:"11px",fontWeight:"bold",color:"#232323"},input:{width:"60%",textAlign:"center",borderRadius:"5px"}},defaultValue:Number(h(null,"strokeWidth")),min:1,pattern:"[1-9]*"})]}),n&&n.map((function(e){return Object(N.jsxs)("div",{style:ad.groupContainer,children:[Object(N.jsx)("p",{style:ad.header,children:Object(N.jsx)(ec.a,{mf:e})}),id.map((function(t){return Object(N.jsx)(nd,{label:t.label,checked:h(e,t.checkController),format:h(e,t.formatController),checkControllerName:t.checkController,formatControllerName:t.formatController,groupID:e},t.id)}))]},e)}))]})})}var rd,od=tu(Object(D.forwardRef)(IntegralsPreferences)),cd=Object(y.css)(rd||(rd=Object(x.a)(["\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n\n  .sum-button {\n    width: 22px;\n    height: 22px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n  }\n"])));function IntegralPanel(e){var t=e.integrals,n=e.activeTab,a=e.molecules,i=Object(D.useState)(!1),r=Object(O.a)(i,2),o=r[0],c=r[1],l=Object(D.useState)(0),s=Object(O.a)(l,2),u=s[0],d=s[1],b=useDispatch(),f=oe(),p=Object(D.useState)(!1),h=Object(O.a)(p,2),g=h[0],m=h[1],j=Object(D.useRef)(),v=Object(D.useCallback)((function(){b({type:Kt,integralID:null})}),[b]),x=Object(D.useCallback)((function(){f.showConfirmDialog({message:"All records will be deleted, Are You sure?",buttons:[{text:"Yes",handler:v},{text:"No"}]})}),[f,v]),y=Object(D.useCallback)((function(e){void 0!==e&&b({type:En,value:e}),f.close()}),[b,f]),k=Object(D.useMemo)((function(){return C()(t,"options.sum",null)}),[t]),S=Object(D.useCallback)((function(){f.show(Object(Ce.b)(Tu,{onClose:function onClose(){return f.close()},onSave:y,header:k?"Set new Integrals Sum (Current: ".concat(Number(k).toFixed(2),")"):"Set new Integrals Sum",molecules:a,element:n?n.replace(/[0-9]/g,""):null}))}),[n,y,k,f,a]),w=Object(D.useCallback)((function(){m(!g)}),[g]),T=Object(D.useCallback)((function(){j.current.saveSetting(),m(!1)}),[]),M=Object(D.useCallback)((function(){c(!o)}),[o]),A=Object(D.useCallback)((function(e){d(e)}),[]);return Object(Ce.b)(D.Fragment,{children:Object(Ce.c)("div",{css:cd,children:[!g&&Object(Ce.b)(Fu,{counter:u,onDelete:x,deleteToolTip:"Delete All Integrals",onFilter:M,filterToolTip:o?"Show all integrals":"Hide integrals out of view",filterIsActive:o,counterFiltered:u,showSettingButton:"true",onSettingClick:w,children:Object(Ce.b)(qe,{title:k?"Change Integrals Sum (".concat(Number(k).toFixed(2),")"):"Change Integrals Sum",popupPlacement:"right",children:Object(Ce.b)("button",{className:"sum-button",type:"button",onClick:S,children:Object(Ce.b)(Js.v,{})})})}),g&&Object(Ce.b)(zu,{onSave:T,onClose:w}),Object(Ce.b)("div",{style:{height:"100%",overflow:"hidden"},children:Object(Ce.c)(Qs.a,{isFlipped:g,infinite:!0,containerStyle:{overflow:"hidden",height:"100%"},children:[Object(Ce.b)("div",{style:{overflow:"auto",height:"100%",display:"block"},children:Object(Ce.b)(Ju,{enableFilter:o,onFilter:A})}),Object(Ce.b)(od,{ref:j})]})})]})})}var ld=tu(Object(D.memo)(IntegralPanel)),sd=n(769);function ButtonToolTip(e){var t=e.children,n=e.style,a=e.onClick,i=e.popupTitle,r=e.popupPlacement,o=Object(ge.a)(e,["children","style","onClick","popupTitle","popupPlacement"]);return Object(N.jsx)(qe,{title:i,popupPlacement:r,children:Object(N.jsx)("button",Object(v.a)(Object(v.a)({style:n,type:"button",onClick:a},o),{},{children:t}))})}ButtonToolTip.defaultProps={popupTitle:"",popupPlacement:"right",style:{},onClick:function onClick(){return null},disabled:!1};var ud,dd=ButtonToolTip,bd=Object(y.css)(ud||(ud=Object(x.a)(["\n  .menu {\n    box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.5);\n    padding: 0px;\n    margin: 0px;\n    border-radius: 5px;\n    display: flex;\n    flex-direction: column;\n    position: absolute;\n    z-index: 99999;\n    padding: 2px;\n    background-color: white;\n\n    button:hover {\n      background-color: #fafafa;\n    }\n  }\n\n  .menu-cover {\n    position: fixed;\n    width: 100%;\n    height: 100%;\n    top: 0;\n    left: 0;\n    z-index: 1;\n  }\n\n  .menu-item {\n    background-color: transparent;\n    border: none;\n    border-bottom: 0.55px solid whitesmoke;\n    height: 35px;\n    outline: outline;\n    display: table-cell;\n    vertical-align: middle;\n    text-align: left;\n    padding: 0 10px;\n\n    svg {\n      display: inline-block;\n    }\n\n    :focus {\n      outline: none !important;\n    }\n    span {\n      font-size: 10px;\n      padding: 0px 10px;\n    }\n  }\n"])));function MenuItem(e){var t=e.icon,n=e.label,a=e.onClick;return Object(Ce.c)("button",{type:"button",className:"menu-item",onClick:a,children:[t,Object(Ce.b)("span",{children:n})]})}function MenuList(e){var t=e.items,n=e.boxBounding,a=e.onClick;return Object(Ce.b)("div",{className:"menu",style:{transform:"translate(".concat(n.width,"px, -").concat(n.height,"px) ")},children:t&&t.map((function(e){return Object(Ce.b)(MenuItem,Object(v.a)(Object(v.a)({},e),{},{onClick:function onClick(){return a(e)}}),"".concat(e.id))}))})}var fd=function MenuButton(e){var t=e.style,n=e.component,a=e.toolTip,i=void 0===a?"":a,r=e.className,o=e.items,c=void 0===o?[]:o,l=e.onClick,s=void 0===l?function(){return null}:l,u=Object(D.useRef)(),d=Object(D.useState)(!1),b=Object(O.a)(d,2),f=b[0],p=b[1],h=Object(D.useCallback)((function(){p(!1)}),[]),g=Object(D.useCallback)((function(){p((function(e){return!e}))}),[]),m=Object(D.useCallback)((function(e){p(!1),s(e)}),[s]);return Object(Ce.c)("div",{style:{height:"auto"},css:bd,children:[Object(Ce.b)("button",{ref:u,type:"button",css:t,onClick:g,className:r,style:{boxSizing:"border-box"},children:Object(Ce.b)(qe,{title:i,popupPlacement:"right",children:n})}),f&&Object(Ce.b)(MenuList,{items:c,boxBounding:u.current.getBoundingClientRect(),onClick:m}),f&&Object(Ce.b)("div",{className:"menu-cover",onClick:h})]})};var pd,hd=function MoleculeWrapper(e){var t=function Wrapper(t){var n=useChartData(),a=n.data,i=n.activeSpectrum,r=n.molecules,o=n.displayerMode,c=n.activeTab,l=Object(D.useMemo)((function(){return a&&i&&i.id?a.find((function(e){return e.id===i.id}))||{ranges:{},zones:{}}:{}}),[i,a]),s=l.ranges,u=void 0===s?{}:s,d=l.zones,b=void 0===d?{}:d,f=t.forwardedRef,p=Object(ge.a)(t,["forwardedRef"]);return Object(N.jsx)(e,Object(v.a)(Object(v.a)({},p),{},{ranges:u,zones:b,molecules:r,displayerMode:o,activeTab:c,ref:f}))};return Object(D.memo)(Object(D.forwardRef)((function(e,n){return Object(N.jsx)(t,Object(v.a)(Object(v.a)({},e),{},{forwardedRef:n}))})))},gd=Object(y.css)(pd||(pd=Object(x.a)(["\n  -moz-box-shadow: inset 0px 1px 0px 0px #ffffff;\n  -webkit-box-shadow: inset 0px 1px 0px 0px #ffffff;\n  box-shadow: inset 0px 1px 0px 0px #ffffff;\n  background: -webkit-gradient(\n    linear,\n    left top,\n    left bottom,\n    color-stop(0.05, #ffffff),\n    color-stop(1, #f6f6f6)\n  );\n  background: -moz-linear-gradient(top, #ffffff 5%, #f6f6f6 100%);\n  background: -webkit-linear-gradient(top, #ffffff 5%, #f6f6f6 100%);\n  background: -o-linear-gradient(top, #ffffff 5%, #f6f6f6 100%);\n  background: -ms-linear-gradient(top, #ffffff 5%, #f6f6f6 100%);\n  background: linear-gradient(to bottom, #ffffff 5%, #f6f6f6 100%);\n  filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#ffffff', endColorstr='#f6f6f6',GradientType=0);\n  background-color: #ffffff;\n  border: 0.55px solid #dcdcdc;\n  display: inline-block;\n  cursor: pointer;\n  color: #666666;\n  font-weight: bold;\n  padding: 6px 24px;\n  text-decoration: none;\n  text-shadow: 0px 1px 0px #ffffff;\n\n  :hover {\n    background: -webkit-gradient(\n      linear,\n      left top,\n      left bottom,\n      color-stop(0.05, #f6f6f6),\n      color-stop(1, #ffffff)\n    );\n    background: -moz-linear-gradient(top, #f6f6f6 5%, #ffffff 100%);\n    background: -webkit-linear-gradient(top, #f6f6f6 5%, #ffffff 100%);\n    background: -o-linear-gradient(top, #f6f6f6 5%, #ffffff 100%);\n    background: -ms-linear-gradient(top, #f6f6f6 5%, #ffffff 100%);\n    background: linear-gradient(to bottom, #f6f6f6 5%, #ffffff 100%);\n    filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#f6f6f6', endColorstr='#ffffff',GradientType=0);\n    background-color: #f6f6f6;\n  }\n"])));var md=function MoleculeStructureEditorModal(e){var t=e.onClose,n=e.open,a=e.selectedMolecule,i=Object(D.useState)(null),r=Object(O.a)(i,2),o=r[0],c=r[1],l=useDispatch();Object(D.useEffect)((function(){c(a?a.molfile:null)}),[a,n]);var s=Object(D.useCallback)((function(e){c(e)}),[c]),u=Object(D.useCallback)((function(){t()}),[t]),d=Object(D.useCallback)((function(){a?(l({type:Jt,molfile:o,key:a.key}),t("replace")):(l({type:qt,molfile:o}),t("new"))}),[l,a,o,t]);return Object(Ce.c)(de,{open:n,onClose:u,children:[Object(Ce.b)(uu.b,{initialMolfile:a&&a.molfile,svgMenu:!0,fragment:!1,onChange:s}),Object(Ce.c)("div",{style:{display:"flex",alignItems:"flex-end",justifyContent:"flex-end",margin:5},children:[Object(Ce.b)("button",{type:"button",css:gd,onClick:u,children:"Close"}),Object(Ce.b)("button",{type:"button",css:gd,onClick:d,children:"Save"})]})]})};var jd=function IsotopesViewer(e){var t=e.value,n=void 0===t?"":t,a=Object(ge.a)(e,["value"]);return Object(N.jsx)("div",Object(v.a)(Object(v.a)({},a),{},{dangerouslySetInnerHTML:{__html:n.replace(/([0-9]+)/g,"<sup>$1</sup>")}}))},vd=function FormikSelect(e){var t=e.name,n=e.value,a=e.onChange,i=Object(ge.a)(e,["name","value","onChange"]),r=Object(sl.f)(),o=r.values,c=r.setFieldValue,l=Object(D.useCallback)((function(e){a(e),c(t,e)}),[t,a,c]);return Object(D.useEffect)((function(){n&&c(t,n)}),[t,c,n]),Object(N.jsx)(Jl,Object(v.a)({name:t,defaultValue:n||C()(o,t),onChange:l},i))};vd.defaultProps=Jl.defaultProps;var Od,xd,yd=vd,kd=Object(y.css)(Od||(Od=Object(x.a)(['\n  overflow: auto;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n\n  .header {\n    text-align: center;\n    padding: 10px 0 10px 0px;\n    margin: 0px;\n    color: #005d9e;\n    place-items: normal;\n    text-transform: none;\n    background-color: #fcfcfc;\n  }\n\n  .tab-content {\n    width: 100%;\n  }\n  .row {\n    display: flex;\n  }\n\n  .inner-content {\n    padding: 15px 30px;\n    width: 100%;\n    overflow: auto;\n  }\n\n  button:focus {\n    outline: none;\n  }\n  button:hover {\n    color: #007bff;\n  }\n  .save-button:hover {\n    background-color: #ffffff;\n  }\n  .save-button {\n    border: none;\n    padding: 0 15px;\n    background-color: #ffffff5e;\n    border-radius: 5px;\n    height: 25px;\n  }\n\n  .footer-container {\n    display: flex;\n    align-items: flex-end;\n    justify-content: flex-end;\n    background: rgb(242, 242, 242);\n    background: -moz-linear-gradient(\n      0deg,\n      rgba(242, 242, 242, 1) 0%,\n      rgba(245, 245, 245, 1) 37%,\n      rgba(255, 255, 255, 1) 90%\n    );\n    background: -webkit-linear-gradient(\n      0deg,\n      rgba(242, 242, 242, 1) 0%,\n      rgba(245, 245, 245, 1) 37%,\n      rgba(255, 255, 255, 1) 90%\n    );\n    background: linear-gradient(\n      0deg,\n      rgba(242, 242, 242, 1) 0%,\n      rgba(245, 245, 245, 1) 37%,\n      rgba(255, 255, 255, 1) 90%\n    );\n    filter: progid:DXImageTransform.Microsoft.gradient(startColorstr="#f2f2f2",endColorstr="#ffffff",GradientType=1);\n    padding: 6px 15px;\n    height: 55px;\n  }\n\n  .section-header {\n    font-size: 13px;\n    color: #2ca8ff;\n    margin-bottom: 10px;\n    border-bottom: 0.55px solid #f9f9f9;\n    padding: 6px 2px;\n  }\n\n  .custom-label {\n    font-size: 12px;\n    font-weight: bold;\n    margin-right: 10px;\n    width: 120px;\n  }\n  .margin-10 {\n    margin: 10px 0;\n  }\n\n  .input {\n    font-size: 14px;\n    border-radius: 5px;\n    border: 1px solid #cccccc;\n    padding: 5px;\n    width: 100px;\n    margin-right: 10px;\n    height: initial !important;\n  }\n\n  .close-bt {\n    border: none;\n    color: red;\n    background-color: transparent;\n    outline: none;\n    position: absolute;\n    right: 10px;\n    top: 2px;\n    width: 30px;\n    height: 30px;\n  }\n']))),Cd=Object(y.css)(xd||(xd=Object(x.a)(["\n  .row {\n    align-items: center;\n  }\n\n  .inner-content {\n    flex: 1;\n  }\n\n  .custom-label {\n    width: 155px;\n  }\n"]))),Dd=[{key:1,value:60,label:"60 MHz"},{key:2,value:100,label:"100 MHz"},{key:3,value:200,label:"200 MHz"},{key:4,value:300,label:"300 MHz"},{key:5,value:400,label:"400 MHz"},{key:6,value:500,label:"500 MHz"},{key:7,value:600,label:"600 MHz"},{key:8,value:800,label:"800 MHz"},{key:9,value:1e3,label:"1000 MHz"},{key:10,value:1200,label:"1200 MHz"}],Sd={"1h":{from:-1,to:12},"13c":{from:-5,to:220},frequency:400,spectra:{"1h":!0,"13c":!1,cosy:!1,hsqc:!1,hmbc:!1}};var wd,Td,Md,Ad=function PredictSpectraModal(e){var t=e.onClose,n=e.molfile,a=Object(D.useRef)(),i=useDispatch(),r=Object(D.useCallback)((function(){a.current.submitForm()}),[]),o=Object(D.useCallback)((function(e){i({type:Sn,isLoading:!0}),i({type:la,payload:{mol:n,options:e}}),t()}),[i,n,t]);return Object(Ce.c)("div",{css:[kd,Cd],children:[Object(Ce.c)("div",{className:"header handle",children:[Object(Ce.b)("span",{children:"Predict Spectra"}),Object(Ce.b)(et,{onClick:t,className:"close-bt"})]}),Object(Ce.b)("div",{className:"inner-content",children:Object(Ce.c)(dl,{ref:a,initialValues:Sd,onSubmit:o,children:[Object(Ce.c)("div",{className:"row margin-10",children:[Object(Ce.b)("span",{className:"custom-label",children:"Spectrometer Frequency :"}),Object(Ce.b)(yd,{data:Dd,style:{width:290,height:30,margin:0},name:"frequency"})]}),Object(Ce.c)("div",{className:"row margin-10",children:[Object(Ce.b)(jd,{value:"1H",className:"custom-label"}),Object(Ce.b)(El,{label:"From",name:"1h.from",type:"number",style:{label:{padding:"0 10px 0 0"}}}),Object(Ce.b)(El,{label:"To",name:"1h.to",type:"number",style:{label:{padding:"0 10px"}}})]}),Object(Ce.c)("div",{className:"row margin-10",children:[Object(Ce.b)(jd,{value:"13C",className:"custom-label"}),Object(Ce.b)(El,{label:"From",name:"13c.from",type:"number",style:{label:{padding:"0 10px 0 0"}}}),Object(Ce.b)(El,{label:"To",name:"13c.to",type:"number",style:{label:{padding:"0 10px"}}})]}),Object(Ce.b)("div",{className:"row margin-10",children:Object(Ce.b)("span",{className:"custom-label",children:"Spectra "})}),Object(Ce.c)("div",{className:"row margin-10",style:{justifyContent:"space-between"},children:[Object(Ce.c)("div",{className:"row",children:[Object(Ce.b)(Sl,{name:"spectra.1h"}),Object(Ce.b)(jd,{value:"1H",style:{padding:" 0 10px"}})]}),Object(Ce.c)("div",{className:"row",children:[Object(Ce.b)(Sl,{disabled:!0,name:"spectra.13c"}),Object(Ce.b)(jd,{value:"13C",style:{padding:" 0 10px"}})]}),Object(Ce.c)("div",{className:"row",children:[Object(Ce.b)(Sl,{disabled:!0,name:"spectra.cosy"}),Object(Ce.b)(jd,{value:"cosy",style:{padding:" 0 10px"}})]}),Object(Ce.c)("div",{className:"row",children:[Object(Ce.b)(Sl,{disabled:!0,name:"spectra.hsqc"}),Object(Ce.b)(jd,{value:"HSQC",style:{padding:" 0 10px"}})]}),Object(Ce.c)("div",{className:"row",children:[Object(Ce.b)(Sl,{disabled:!0,name:"spectra.hmbc"}),Object(Ce.b)(jd,{value:"HMBC",style:{padding:" 0 10px"}})]})]})]})}),Object(Ce.b)("div",{className:"footer-container",children:Object(Ce.b)("button",{type:"button",onClick:r,className:"save-button",children:"Start Predicting"})})]})},Ed=function extractFromAtom(e,t,n){if(t.length>0&&Object.keys(e).length>0){var a="x"===n?0:"y"===n?1:void 0;if(void 0===a)return{oclIDs:[e.oclID].concat(e.hydrogenOCLIDs),nbAtoms:e.nbAtoms+e.nbAtoms*e.nbHydrogens};if(t[a]===e.atomLabel)return{oclIDs:[e.oclID],nbAtoms:e.nbAtoms};if("H"===t[a])return{oclIDs:e.hydrogenOCLIDs,nbAtoms:e.nbAtoms*e.nbHydrogens}}return{oclIDs:[],nbAtoms:0}},Pd=function findDatumAndSignalIndex(e,t){var n,a=e.find((function(e){return e.id===t}));if(!a)for(var i=0;i<e.length;i++)if((n=e[i].signal.findIndex((function(e){return e.id===t})))>=0){a=e[i];break}return{datum:a,signalIndex:n}},Id=Object(y.css)(wd||(wd=Object(x.a)(["\n  display: flex;\n  flex-direction: column;\n  flex-grow: 1;\n  width: 100%;\n  height: 100%;\n"]))),Fd=Object(y.css)(Td||(Td=Object(x.a)(["\n  display: flex;\n  flex-direction: row;\n  border-bottom: 0.55px solid rgb(240, 240, 240);\n  padding: 0px 5px;\n\n  button svg {\n    fill: #4e4e4e;\n  }\n\n  button {\n    background-color: transparent;\n    border: none;\n    padding: 5px;\n  }\n\n  p {\n    margin: 0;\n    text-align: right;\n    width: 100%;\n    line-height: 22px;\n    padding: 0px 10px;\n  }\n"]))),_d=Object(y.css)(Md||(Md=Object(x.a)(["\n  width: 100%;\n  height: 100%;\n\n  .slider {\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n    height: 100%;\n    padding: 0px;\n    .mol-svg-container {\n      height: calc(100% - 25px);\n      width: 100%;\n      div {\n        width: 100%;\n        height: 100%;\n      }\n    }\n\n    p {\n      width: 100%;\n      margin: 0 auto;\n      display: block;\n      position: relative;\n      text-align: center;\n    }\n\n    svg polygon {\n      fill: gray !important;\n    }\n  }\n"]))),Rd=[{id:"molfile",icon:Object(Ce.b)(Ze.e,{}),label:"Copy as molfile"},{id:"png",icon:Object(Ce.b)(Ze.q,{}),label:"Copy as PNG"},{id:"svg",icon:Object(Ce.b)(Ze.h,{}),label:"Export as SVG"}];function MoleculePanel(e){var t=e.zones,n=e.ranges,a=e.molecules,i=e.activeTab,r=e.displayerMode,o=Object(du.a)(),c=Object(O.a)(o,2),l=c[0],s=c[1],u=s.width,d=s.height,b=Object(D.useState)(!1),f=Object(O.a)(b,2),p=f[0],h=f[1],g=Object(D.useState)(),m=Object(O.a)(g,2),j=m[0],v=m[1],x=Object(D.useState)(0),y=Object(O.a)(x,2),k=y[0],C=y[1],S=Object(D.useState)([]),w=Object(O.a)(S,2),T=w[0],M=w[1],A=Object(D.useState)(null),E=Object(O.a)(A,2),P=E[0],I=E[1],F=useDispatch(),_=Ec(),R=oe(),N=Object(vi.d)(),L=useAssignmentData(),z=Object(D.useState)([]),H=Object(O.a)(z,2),B=H[0],X=H[1];Object(D.useEffect)((function(){if(i){var e=i.split(",");1===e.length?X([i.replace(/[0-9]/g,"")]):2===e.length&&X(e.map((function(e){return e.replace(/[0-9]/g,"")})))}else X([])}),[i]);var V=useAssignment(void 0!==L.assignment.activeID?L.assignment.activeID:"___"),Y=Object(D.useMemo)((function(){if(t||n){if(r===Oo.DM_1D&&n&&n.values)return n.values;if(r===Oo.DM_2D&&t&&t.values)return t.values}return[]}),[r,n,t]),Z=Object(D.useMemo)((function(){var e={x:[],y:[]};for(var t in L.assignment.assignment){var n,a;if(L.assignment.assignment[t].x)(n=e.x).push.apply(n,Object(Hi.a)(L.assignment.assignment[t].x));if(L.assignment.assignment[t].y)(a=e.y).push.apply(a,Object(Hi.a)(L.assignment.assignment[t].y))}return e}),[L.assignment]),U=Object(D.useMemo)((function(){return Z.x.concat(Z.y)}),[Z.x,Z.y]),K=Object(D.useCallback)((function(e,t){return U.some((function(e){return t.oclIDs.includes(e)}))&&!e.some((function(e){return t.oclIDs.includes(e)}))?(_.info("Atom is already assigned to another signal!"),e):function toggleDiaIDs(e,t){var n=e?e.slice():[];if(1===t.oclIDs.length)if(n.includes(t.oclIDs[0]))n=n.filter((function(e){return e!==t.oclIDs[0]}));else for(var a=0;a<t.nbAtoms;a++)n.push(t.oclIDs[0]);else t.oclIDs.length>1&&t.oclIDs.forEach((function(e){n.includes(e)?n=n.filter((function(t){return t!==e})):n.push(e)}));return n}(e,t)}),[_,U]),W=Object(D.useCallback)((function(e){if(V.isActive){var t=Ed(e,B,V.activeAxis);if(t.nbAtoms>0){t.oclIDs.forEach((function(e){V.toggle(e)}));var n=Pd(Y,V.id),a=n.datum,i=n.signalIndex;if(a){var o=[];void 0===i?r===Oo.DM_1D?o=K(a.diaID||[],t):r===Oo.DM_2D&&(o=K(a[V.activeAxis].diaID||[],t)):a.signal&&a.signal[i]&&(r===Oo.DM_1D?o=K(a.signal[i].diaID||[],t):r===Oo.DM_2D&&(o=K(a.signal[i][V.activeAxis].diaID||[],t))),r===Oo.DM_1D?F({type:qn,payload:{rangeData:a,diaID:o,signalIndex:i}}):r===Oo.DM_2D&&F({type:ca,payload:{zoneData:a,diaID:o,axis:V.activeAxis,signalIndex:i}})}}else _.info("Not assigned! Different atom type or no attached hydrogens found!")}}),[V,_,Y,F,r,B,K]),G=Object(D.useMemo)((function(){return function getCurrentDiaIDsToHighlight(e,t){var n=e.assignment.isOnHover?e.assignment.assignment[e.assignment.onHoverID]:null,a=e.assignment.isOnHover?e.assignment.onHoverAxis:null;return n?t===Oo.DM_1D?n.x||[]:t===Oo.DM_2D?a?"x"===a?n.x||[]:"y"===a?n.y||[]:(n.x||[]).concat(n.y||[]):(n.x||[]).concat(n.y||[]):[]:[]}(L,r)}),[L,r]);Object(D.useEffect)((function(){P&&("show"===P?N.dispatch({type:"SHOW",payload:{convertedHighlights:T}}):"hide"===P&&(N.dispatch({type:"HIDE",payload:{convertedHighlights:T}}),M([])),I(null))}),[P,T,N]);var q=Object(D.useCallback)((function(e){var t=Ed(e,B,V.activeAxis).oclIDs;if(t.length>0){var n=function getHighlightsOnHover(e,t,n){var a=[];for(var i in e.assignment.assignment){var r=void 0,o=void 0,c=!1;if(e.assignment.assignment[i].x&&e.assignment.assignment[i].x.some((function(e){return t.includes(e)}))){a=a.concat(e.assignment.assignment[i].x);var l=Pd(n,i);r=l.datum,o=l.signalIndex,c=!0}if(e.assignment.assignment[i].y&&e.assignment.assignment[i].y.some((function(e){return t.includes(e)}))){a=a.concat(e.assignment.assignment[i].y);var s=Pd(n,i);r=s.datum,o=s.signalIndex,c=!0}if(r&&(a.push(r.id),void 0!==o&&a.push(r.signal[o].id)),c)break}return a}(L,t,Y);M(n),I("show")}else I("hide")}),[V.activeAxis,L,Y,B]),$=Object(D.useCallback)((function(e){h(!1),"new"===e&&C(a.length)}),[a.length]),Q=Object(D.useCallback)((function(e,t,n){v(n?{molfile:n,key:t}:null),h(!0)}),[]),ee=Object(D.useCallback)((function(){navigator.clipboard.readText().then((function(e){F({type:qt,molfile:e})}))}),[F]),te=Object(D.useCallback)((function(){a[k]&&a[k].key&&(C(0),F({type:$t,payload:{key:a[k].key,assignmentData:L}}))}),[a,k,L,F]),ne=Object(D.useCallback)((function(){Object(Rc.h)("molFile","molSVG".concat(k))}),[k]),ae=Object(D.useCallback)((function(){Object(Rc.b)("molSVG".concat(k)),_.success("MOL copied as PNG to clipboard")}),[_,k]),ie=Object(D.useCallback)((function(){a[k]&&(Object(Rc.c)(a[k].molfile)?_.success("MOLFile copied to clipboard"):_.error("copied not completed"))}),[_,k,a]),re=Object(D.useCallback)((function(e,t){F({type:Jt,molfile:t,key:e})}),[F]),ce=Object(D.useCallback)((function(){R.show(Object(Ce.b)(Ad,{onSave:function onSave(){R.close()},molfile:a[k]}),{position:J.TOP_CENTER,enableResizing:!0,width:600,height:350})}),[R,a,k]),le=Object(D.useCallback)((function(e){switch(e.id){case"molfile":ie();break;case"png":ae();break;case"svg":ne()}}),[ie,ae,ne]);return Object(Ce.c)("div",{css:Id,children:[Object(Ce.c)("div",{css:Fd,children:[Object(Ce.b)(fd,{component:Object(Ce.b)(Ze.p,{}),toolTip:"Export As",items:Rd,onClick:le}),Object(Ce.b)(qe,{title:"Paste molfile",popupPlacement:"left",children:Object(Ce.b)("button",{className:"bar-button",type:"button",onClick:ee,children:Object(Ce.b)(Ze.x,{})})}),Object(Ce.b)(qe,{title:"Add Molecule",popupPlacement:"left",children:Object(Ce.b)("button",{className:"bar-button",type:"button",onClick:Q,children:Object(Ce.b)(Ze.y,{})})}),Object(Ce.b)(qe,{title:"Delete Molecule",popupPlacement:"left",children:Object(Ce.b)("button",{className:"bar-button",type:"button",onClick:te,children:Object(Ce.b)(Ze.B,{})})}),Object(Ce.b)(dd,{popupTitle:"Predict Spectra",popupPlacement:"left",onClick:ce,disabled:!a||0===a.length,children:Object(Ce.b)(Js.i,{})}),Object(Ce.c)("p",{children:[a&&a.length>0&&"".concat(+(k+1)," / ").concat(a.length)," "]})]}),Object(Ce.c)("div",{css:_d,children:[Object(Ce.b)(pu,{onChange:function onChange(e){return C(e)},defaultIndex:k,children:a&&a.length>0?a.map((function(e,t){return Object(Ce.c)("div",{className:"slider",onDoubleClick:function onDoubleClick(t){return Q(t,e.key,e.molfile)},style:{backgroundColor:(t+1)%2!==0?"#fafafa":"white"},children:[Object(Ce.b)("div",{className:"mol-svg-container",ref:l,children:Object(Ce.b)(sd.a,{OCL:Bc.a,id:"molSVG".concat(t),width:u>0?u:100,height:d>0?d:100,molfile:e.molfile,setMolfile:function setMolfile(t){return re(e.key,t)},setSelectedAtom:W,atomHighlightColor:G&&G.length>0?"red":"#FFD700",atomHighlightOpacity:.35,highlights:G&&G.length>0?G:U,setHoverAtom:q})}),Object(Ce.c)("p",{children:[Object(Ce.b)(ec.a,{mf:e.mf})," - ",e.mw.toFixed(2)]})]},e.key)})):Object(Ce.b)("div",{style:{width:"100%",height:"100%"},onClick:Q})}),Object(Ce.b)(md,{open:p,onClose:$,selectedMolecule:j})]})]})}var Nd=hd(Object(D.memo)(MoleculePanel)),Ld=n(93),zd=n(714),Hd=n.n(zd);var Bd="NORMAL",Xd="FORMULA",Vd={};function addColumnKey(e,t,n,a){var i=Object.keys(e[t].options.columns).length,r=a||function getChar(e){for(var t="a".charCodeAt(0),n="z".charCodeAt(0)-t+1,a="";e>=0;)a=String.fromCharCode(e%n+t)+a,e=Math.floor(e/n)-1;return a}(i).toUpperCase();return e[t].options.columns[r]=n,r}function getSpectraAnalysis(e,t){var n=t.from,a=t.to,i=t.nucleus;return e.reduce((function(e,t){if(1===t.info.dimension&&t.info.nucleus===i&&!t.info.isFid){var r=function detectRange(e,t){var n=t.from,a=t.to,i=e.data,r=i.x,o=i.re,c=Object(Xe.p)({x:r,y:o},{from:n,to:a,reverse:!0}),l=Object(Xe.r)({x:r,y:o},{from:n,to:a}).y,s=Object(Xe.q)({x:r,y:o},{from:n,to:a}).y,u=getShiftX(e);return{id:generateID(),originFrom:n-u,originTo:a-u,from:n,to:a,absolute:c,min:l,max:s}}(t,{from:n,to:a});e.sum+=r.absolute,e.values.push(Object(v.a)({SID:t.id},r))}return e}),{values:[],sum:0})}function init(e,t){void 0===e[t]&&(e[t]={options:{sum:100,code:null,columns:{}},values:{}})}function refreshCalculation(e,t){var n=e[t].options.columns;return Object.entries(e[t].values).reduce((function(e,t){var a=Object(O.a)(t,2),i=a[0],r=a[1];return e[i]=Object(v.a)(Object(v.a)({},r),function refreshByRow(e,t){return Object.keys(t).reduce((function(n,a){return t[a].type===Xd&&(n[a]=Object(v.a)(Object(v.a)({colKey:a},e),{},{value:calculate(t,e,t[a].formula)})),n}),{})}(r,n)),e}),{})}function analyzeSpectra(e,t,n){var a=n.from,i=n.to,r=n.nucleus,o=n.columnKey,c=void 0===o?null:o;init(t,r);var l=addColumnKey(t,r,{type:Bd,valueKey:"relative",from:a,to:i,index:1},c),s=t[r].options.sum,u=getSpectraAnalysis(e,{from:a,to:i,nucleus:r}),d=u.values,b=u.sum,f=C()(t,"".concat(r,".values"),{}),p=d.reduce((function(e,t){var n=b>0?s/b:0;return e[t.SID]=Object(v.a)(Object(v.a)({},f[t.SID]),{},Object(be.a)({},l,Object(v.a)(Object(v.a)({colKey:l},t),{},{relative:Math.abs(t.absolute)*n}))),e}),{});t[r].values=p,t[r].values=refreshCalculation(t,r)}function calculate(e,t){var n,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"A+B",i=a.split(/\+|-|\*|\/|%|\(|\)/),r=[],o=Object(rc.a)(i);try{for(o.s();!(n=o.n()).done;){var c=n.value,l=c.trim();e[l]&&r.push(l)}}catch(d){o.e(d)}finally{o.f()}var s,u=r.map((function(n){return t[n]?t[n][e[n].valueKey]:null}));try{s=Object(Ld.a)(Function,r.concat(["return ".concat(a)])).apply(void 0,Object(Hi.a)(u))}catch(b){console.log(b),s=new Error("Invalid Formula ( ".concat(a," ) "))}return s}var Yd={"1H":{tms:{from:-.1,to:.1,nbPeaks:1,delta:0},tsp:{from:-.1,to:.1,nbPeaks:1,delta:0},glucose:{from:5.18,to:5.28,nbPeaks:2,delta:5.23}},"13C":{}};var Zd=[{key:1,value:"manual",label:"Manual"}];var Ud=function AlignSpectraModal(e){var t=e.onClose,n=e.nucleus,a=Object(D.useRef)(),i=useDispatch(),r=Object(D.useMemo)((function(){var e=Yd[n]?Object.entries(Yd[n]).map((function(e){return{key:e[0],value:e[0],label:e[0]}}),[]):[];return Zd.concat(e)}),[n]),o=Object(D.useCallback)((function(){a.current.submitForm()}),[]),c=Object(D.useCallback)((function(e){i({type:aa,payload:e}),t()}),[i,t]);Object(D.useEffect)((function(){return pi.on("brushEnd",(function(e){var t=Object(O.a)(e.range,2),n=t[0],i=t[1];a.current.setValues(Object(v.a)(Object(v.a)({},a.current.values),{},{from:n,to:i}))})),function(){pi.off("brushEnd")}}),[]);var l=Object(D.useCallback)((function(e){var t=Yd[n][e]||{delta:0},i=t.delta,r=void 0===i?0:i,o=Object(ge.a)(t,["delta"]);a.current.setValues(Object(v.a)(Object(v.a)({},a.current.values),{},{targetX:r},o))}),[n]);return Object(Ce.c)("div",{css:kd,children:[Object(Ce.c)("div",{className:"header handle",children:[Object(Ce.b)("span",{children:"Spectra calibration"}),Object(Ce.b)(et,{onClick:t,className:"close-bt"})]}),Object(Ce.b)("div",{className:"inner-content",children:Object(Ce.c)(dl,{ref:a,initialValues:{from:-1,to:1,nbPeaks:1,targetX:0},onSubmit:c,children:[Object(Ce.c)("div",{className:"row margin-10",children:[Object(Ce.b)("span",{className:"custom-label",children:"Options :"}),Object(Ce.b)(Jl,{data:r,style:{width:270,height:30,marginBottom:"20px"},onChange:l})]}),Object(Ce.c)("div",{className:"row margin-10",children:[Object(Ce.b)("span",{className:"custom-label",children:"Range :"}),Object(Ce.b)(El,{label:"From : ",name:"from",type:"number"}),Object(Ce.b)(El,{label:"To :",name:"to",type:"number"})]}),Object(Ce.c)("div",{className:"row margin-10",children:[Object(Ce.b)("span",{className:"custom-label",children:"Number of Peaks : "}),Object(Ce.b)(El,{name:"nbPeaks",type:"number"})]}),Object(Ce.c)("div",{className:"row margin-10",children:[Object(Ce.b)("span",{className:"custom-label",children:"Target PPM :"}),Object(Ce.b)(El,{name:"targetX",type:"number"})]})]})}),Object(Ce.b)("div",{className:"footer-container",children:Object(Ce.b)("button",{type:"button",onClick:o,className:"save-button",children:"Done"})})]})},Kd={from:-1,to:1,nbPoints:1024};var Wd=function ExportAsMatrixModal(e){var t=e.onClose,n=Object(D.useRef)(),a=useChartData().data,i=Object(D.useCallback)((function(){n.current.submitForm()}),[]),r=Object(D.useCallback)((function(e){Object(Rc.e)(a,e,"fileName"),t()}),[a,t]);return Object(D.useEffect)((function(){return pi.on("brushEnd",(function(e){var t=Object(O.a)(e.range,2),a=t[0],i=t[1];n.current.setValues(Object(v.a)(Object(v.a)({},n.current.values),{},{from:a,to:i}))})),function(){pi.off("brushEnd")}}),[]),Object(Ce.c)("div",{css:kd,children:[Object(Ce.c)("div",{className:"header handle",children:[Object(Ce.b)("span",{children:"Export spectra as a Matrix"}),Object(Ce.b)(et,{onClick:t,className:"close-bt"})]}),Object(Ce.b)("div",{className:"inner-content",children:Object(Ce.c)(dl,{ref:n,initialValues:Kd,onSubmit:r,children:[Object(Ce.c)("div",{className:"row margin-10",children:[Object(Ce.b)("span",{className:"custom-label",children:"Range :"}),Object(Ce.b)(El,{label:"From : ",name:"from",type:"number"}),Object(Ce.b)(El,{label:"To :",name:"to",type:"number"})]}),Object(Ce.c)("div",{className:"row margin-10",children:[Object(Ce.b)("span",{className:"custom-label",children:"Number of Points : "}),Object(Ce.b)(El,{name:"nbPoints",type:"number"})]})]})}),Object(Ce.b)("div",{className:"footer-container",children:Object(Ce.b)("button",{type:"button",onClick:i,className:"save-button",children:"Export Now"})})]})};function EquallySpacedFilter(e,t){var n=e.onSubmit,a=useChartData().xDomain;return Object(N.jsxs)(dl,{ref:t,initialValues:{from:a[0],to:a[1],numberOfPoints:1024},onSubmit:n,children:[Object(N.jsxs)("div",{className:"row margin-10",children:[Object(N.jsx)("span",{className:"custom-label",children:"Range :"}),Object(N.jsx)(El,{label:"From : ",name:"from",type:"number"}),Object(N.jsx)(El,{label:"To :",name:"to",type:"number"})]}),Object(N.jsxs)("div",{className:"row margin-10",children:[Object(N.jsx)("span",{className:"custom-label",children:"Number of points :"}),Object(N.jsx)(El,{label:"",name:"numberOfPoints",type:"number"})]})]})}var Gd=Object(D.forwardRef)(EquallySpacedFilter);function FromToFilter(e,t){var n=e.onSubmit,a=useChartData().xDomain;return Object(N.jsx)(dl,{ref:t,initialValues:{from:a[0],to:a[1]},onSubmit:n,children:Object(N.jsxs)("div",{className:"row margin-10",children:[Object(N.jsx)("span",{className:"custom-label",children:"Range :"}),Object(N.jsx)(El,{label:"From : ",name:"from",type:"number"}),Object(N.jsx)(El,{label:"To :",name:"to",type:"number"})]})})}var qd,Jd=Object(D.forwardRef)(FromToFilter),$d=[{key:0,value:0,label:"Select Filter"},{key:ei.fromTo.id,value:ei.fromTo.id,label:ei.fromTo.name},{key:ei.equallySpaced.id,value:ei.equallySpaced.id,label:ei.equallySpaced.name},{key:ei.standardDeviation.id,value:ei.standardDeviation.id,label:ei.standardDeviation.name},{key:ei.centerMean.id,value:ei.centerMean.id,label:ei.centerMean.name},{key:ei.pareto.id,value:ei.pareto.id,label:ei.pareto.name}],Qd=Object(y.css)(qd||(qd=Object(x.a)(["\n  .row {\n    align-items: center;\n  }\n"])));var eb,tb=function MultipleSpectraFiltersModal(e){var t=e.onClose,n=e.nucleus,a=Object(D.useRef)(),i=useDispatch(),r=Object(D.useState)(0),o=Object(O.a)(r,2),c=o[0],l=o[1],s=Object(D.useMemo)((function(){var e=Yd[n]?Object.entries(Yd[n]).map((function(e){return{key:e[0],value:e[0],label:e[0]}}),[]):[];return $d.concat(e)}),[n]),u=Object(D.useCallback)((function(){a.current&&a.current.submitForm()}),[]),d=Object(D.useCallback)((function(e){i({type:ba,payload:[{name:c,options:e}]}),t()}),[i,c,t]);Object(D.useEffect)((function(){return pi.on("brushEnd",(function(e){var t=Object(O.a)(e.range,2),n=t[0],i=t[1];a.current&&a.current.setValues(Object(v.a)(Object(v.a)({},a.current.values),{},{from:n,to:i}))})),function(){pi.off("brushEnd")}}),[]);var b=Object(D.useCallback)((function(e){l(e)}),[]),f=Object(D.useMemo)((function(){switch(c){case ei.fromTo.id:return Object(Ce.b)(Jd,{onSubmit:d,ref:a});case ei.equallySpaced.id:return Object(Ce.b)(Gd,{onSubmit:d,ref:a})}}),[c,d]);return Object(Ce.c)("div",{css:[kd,Qd],children:[Object(Ce.c)("div",{className:"header handle",children:[Object(Ce.b)("span",{children:"Spectra calibration"}),Object(Ce.b)(et,{onClick:t,className:"close-bt"})]}),Object(Ce.c)("div",{className:"inner-content",children:[Object(Ce.c)("div",{className:"row margin-10",children:[Object(Ce.b)("span",{className:"custom-label",children:"Filter :"}),Object(Ce.b)(Jl,{data:s,style:{width:275,height:30,margin:0},onChange:b})]}),f||Object(Ce.b)(dl,{ref:a,initialValues:{},onSubmit:d})]}),Object(Ce.b)("div",{className:"footer-container",children:Object(Ce.b)("button",{type:"button",onClick:u,className:"save-button",children:"Done"})})]})},nb=n(762),ab=n(736),ib=(n(737),n(738),n(739)),rb=n.n(ib),ob=Object(y.css)(eb||(eb=Object(x.a)(["\n  code[class*='language-'],\n  pre[class*='language-'] {\n    color: black;\n    background: none;\n    text-shadow: 0 1px white;\n    font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;\n    font-size: 1em;\n    text-align: left;\n    white-space: pre;\n    word-spacing: normal;\n    word-break: normal;\n    word-wrap: normal;\n    line-height: 1.5;\n\n    -moz-tab-size: 4;\n    -o-tab-size: 4;\n    tab-size: 4;\n\n    -webkit-hyphens: none;\n    -moz-hyphens: none;\n    -ms-hyphens: none;\n    hyphens: none;\n  }\n\n  pre[class*='language-']::-moz-selection,\n  pre[class*='language-'] ::-moz-selection,\n  code[class*='language-']::-moz-selection,\n  code[class*='language-'] ::-moz-selection {\n    text-shadow: none;\n    background: #b3d4fc;\n  }\n\n  pre[class*='language-']::selection,\n  pre[class*='language-'] ::selection,\n  code[class*='language-']::selection,\n  code[class*='language-'] ::selection {\n    text-shadow: none;\n    background: #b3d4fc;\n  }\n\n  @media print {\n    code[class*='language-'],\n    pre[class*='language-'] {\n      text-shadow: none;\n    }\n  }\n\n  /* Code blocks */\n  pre[class*='language-'] {\n    padding: 1em;\n    margin: 0.5em 0;\n    overflow: auto;\n  }\n\n  :not(pre) > code[class*='language-'],\n  pre[class*='language-'] {\n    background: #f5f2f0;\n  }\n\n  /* Inline code */\n  :not(pre) > code[class*='language-'] {\n    padding: 0.1em;\n    border-radius: 0.3em;\n    white-space: normal;\n  }\n\n  .token.comment,\n  .token.prolog,\n  .token.doctype,\n  .token.cdata {\n    color: slategray;\n  }\n\n  .token.punctuation {\n    color: #999;\n  }\n\n  .token.namespace {\n    opacity: 0.7;\n  }\n\n  .token.property,\n  .token.tag,\n  .token.boolean,\n  .token.number,\n  .token.constant,\n  .token.symbol,\n  .token.deleted {\n    color: #905;\n  }\n\n  .token.selector,\n  .token.attr-name,\n  .token.string,\n  .token.char,\n  .token.builtin,\n  .token.inserted {\n    color: #690;\n  }\n\n  .token.operator,\n  .token.entity,\n  .token.url,\n  .language-css .token.string,\n  .style .token.string {\n    color: #9a6e3a;\n    /* This background color was intended by the author of this theme. */\n    background: hsla(0, 0%, 100%, 0.5);\n  }\n\n  .token.atrule,\n  .token.attr-value,\n  .token.keyword {\n    color: #07a;\n  }\n\n  .token.function,\n  .token.class-name {\n    color: #dd4a68;\n  }\n\n  .token.regex,\n  .token.important,\n  .token.variable {\n    color: #e90;\n  }\n\n  .token.important,\n  .token.bold {\n    font-weight: bold;\n  }\n  .token.italic {\n    font-style: italic;\n  }\n\n  .token.entity {\n    cursor: help;\n  }\n"])));function Evaluate_calculate(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;try{return new Function("args","return ".concat(e))(t)}catch(n){return n}}function MulipleAnalysisCodeEditor(e){var t=e.data,n=Object(sl.f)(),a=n.values,i=n.setFieldValue,r=Object(D.useState)(a.code?a.code:"function run(data) {\n\n  return JSON.stringify(data,undefined, 2);\n  \n}(args);\n"),o=Object(O.a)(r,2),c=o[0],l=o[1],s=Object(D.useState)(""),u=Object(O.a)(s,2),d=u[0],b=u[1];Object(D.useEffect)((function(){var e=Evaluate_calculate(c,t);e instanceof Error?b(e.message):(i("code",c),b(e))}),[c,t,i]);var f=Object(D.useCallback)((function(e){l(e)}),[]),p=Object(D.useCallback)((function(e){try{return Object(ab.highlight)(e,ab.languages.js)}catch(t){return null}}),[]);return Object(Ce.c)("div",{style:{marginTop:"20px"},css:ob,children:[Object(Ce.b)(rb.a,{value:c,onValueChange:f,highlight:p,padding:10,style:{fontFamily:'"Fira code", "Fira Mono", monospace',fontSize:12,backgroundColor:"#fcfcfc",marginBottom:"10px",minHeight:"100px",overflow:"auto",maxHeight:"200px"}}),Object(Ce.b)("p",{style:{marginBottom:"5px"},children:"Result:"}),Object(Ce.b)(rb.a,{value:d,onValueChange:function onValueChange(e){return e},highlight:p,padding:10,style:{border:"0.55px solid #f3f3f3",fontFamily:'"Fira code", "Fira Mono", monospace',fontSize:12,marginBottom:"10px",minHeight:"100px",overflow:"auto",maxHeight:"200px"}})]})}var cb,lb=Object(D.memo)(MulipleAnalysisCodeEditor),sb=Object(y.css)(cb||(cb=Object(x.a)(["\n  width: 100%;\n  thead {\n    border-bottom: 1px solid lightgray;\n    background-color: #fafafa;\n    font-size: 12px;\n  }\n\n  td,\n  th {\n    padding: 3px 5px;\n    text-align: center;\n  }\n\n  .operation-col {\n    width: 30px;\n  }\n\n  .input {\n    // border: 0.55px solid rgb(237 237 237) !important;\n    height: 25px !important;\n    width: 100% !important;\n    margin: 0 !important;\n    // text-transform: uppercase;\n  }\n\n  .input.disbale {\n    background-color: #e8e8e8;\n    border-radius: 5px;\n  }\n\n  .label,\n  .index {\n    width: 100px;\n  }\n\n  .counter {\n    width: 50px;\n  }\n\n  .add {\n    background-color: transparent;\n    border: 0;\n    outline: none;\n    svg {\n      font-szie: 14px;\n      fill: green;\n    }\n  }\n"]))),ub=Object(D.forwardRef)((function MultipleSpectraAnalysisPreferences(e,t){var n=e.data,a=e.onAfterSave,i=useDispatch(),r=Object(D.useRef)(),o=Object(D.useState)({}),c=Object(O.a)(o,2),l=c[0],s=c[1];Object(D.useImperativeHandle)(t,(function(){return{saveSetting:function saveSetting(){r.current.submitForm()}}})),Object(D.useEffect)((function(){var e=Object.keys(n.columns).reduce((function(e,t){return e[t]=Object(v.a)(Object(v.a)({},n.columns[t]),{},{tempKey:t}),e}),{});s(e),r.current.setValues({columns:e,code:n.code})}),[n]);var u=Object(D.useMemo)((function(){return Object.keys(l)}),[l]),d=Object(D.useMemo)((function(){return nb.a().shape({columns:nb.a().shape(function columnSchema(){return u.reduce((function(e,t){return e[t]=nb.a().shape(Object(v.a)(Object(v.a)({tempKey:nb.b().required().test("unique","must be unique column name",(function(e){var t=r.current.values.columns;return 1===Object.keys(t).reduce((function(n,a){return t[a].tempKey===e&&n.push(e),n}),[]).length}))},l[t].type===Xd?{formula:nb.b().required()}:{}),{},{index:nb.b().required()})),e}),{})}())})}),[l,u,r]),b=Object(D.useCallback)((function(e){a(!0);var t=Object.entries(e.columns).reduce((function(e,t){var n=Object(O.a)(t,2),a=n[0],i=n[1];return e[a]=Object(v.a)(Object(v.a)({},l[a]),i),e}),{});i({type:ta,payload:{code:e.code,columns:t}})}),[l,i,a]),f=Object(D.useCallback)((function(e){s((function(t){return Object(v.a)(Object(v.a)({},t),{},Object(be.a)({},"temp".concat(e),{tempKey:"",type:"FORMULA",valueKey:"value",formula:"",index:e}))}))}),[]);return Object(Ce.c)(dl,{ref:r,initialValues:{columns:l,code:null},validationSchema:d,onSubmit:b,children:[u&&Object(Ce.c)("table",{css:sb,children:[Object(Ce.b)("thead",{children:Object(Ce.c)("tr",{children:[Object(Ce.b)("th",{className:"counter",children:"#"}),Object(Ce.b)("th",{className:"label",children:"Label"}),Object(Ce.b)("th",{children:"value"}),Object(Ce.b)("th",{className:"index",children:"index"})]})}),Object(Ce.b)("tbody",{children:u.map((function(e,t){return Object(Ce.c)("tr",{children:[Object(Ce.b)("td",{className:"counter",children:t+1}),Object(Ce.b)("td",{className:"label",children:Object(Ce.b)(El,{name:"columns.".concat(e,".tempKey"),value:l[e].tempKey},e)}),Object(Ce.b)("td",{children:l[e].type===Xd?Object(Ce.b)(El,{name:"columns.".concat(e,".formula"),value:l[e].formula}):Object(Ce.b)("div",{className:"input disbale"})}),Object(Ce.b)("td",{className:"index",children:Object(Ce.b)(El,{name:"columns.".concat(e,".index"),value:l[e].index})}),Object(Ce.b)("td",{className:"operation-col",children:u.length===t+1&&Object(Ce.b)("button",{className:"add",type:"button",onClick:function onClick(){return f(t+1)},children:Object(Ce.b)(Ze.y,{})})})]},e)}))})]}),Object(Ce.b)(lb,{data:n})]})}));ub.defaultProps={onAfterSave:function onAfterSave(){return!1}};var db,bb=ub,fb=Object(y.css)(db||(db=Object(x.a)(["\n  background-color: white;\n  position: absolute;\n  height: auto;\n  z-index: 99999999999999;\n  box-shadow: 0 19px 38px rgba(0, 0, 0, 0.3), 0 15px 12px rgba(0, 0, 0, 0.22);\n  border-radius: 10px;\n  margin-bottom: 20px;\n\n  ul {\n    list-style-type: none;\n    padding: 0;\n    margin: 0;\n\n    li {\n      padding: 10px 30px;\n      text-align: center;\n      color: black;\n      border-bottom: 0.55px solid lightgoldenrodyellow;\n      min-width: 150px;\n    }\n\n    li:last-of-type {\n      border-bottom: none;\n    }\n\n    li:hover {\n      background-color: gray;\n      color: white;\n    }\n  }\n"])));var pb,hb=function DropDownList(e){var t=e.data,n=void 0===t?[]:t,a=e.onSelect;return Object(Ce.b)("div",{css:fb,children:Object(Ce.b)("ul",{children:n.map((function(e,t){return Object(Ce.b)("li",{onClick:function onClick(){return a(t)},children:e.label},e.key)}))})})},gb=Object(y.css)(pb||(pb=Object(x.a)(["\n  // position: absolute;\n  padding: 2px;\n  border-radius: 10px;\n  width: auto;\n  display: inline-block;\n  border: 0.55px solid lightgray;\n  font-size: 10px;\n\n  button {\n    text-transform: Capitalize;\n  }\n"])));function DropDownButton(e){var t=e.data,n=e.selectedKey,a=e.onSelect,i=e.formatSelectedValue,r=Object(D.useState)(!1),o=Object(O.a)(r,2),c=o[0],l=o[1],s=Object(D.useState)(n),u=Object(O.a)(s,2),d=u[0],b=u[1],f=useGlobal().rootRef,p=Object(D.useRef)(null),h=Object(D.useCallback)((function(e){!e.target.closest(".".concat(p.current.className))&&c&&setTimeout((function(){l(!1)}),0)}),[c]);Object(D.useEffect)((function(){return f&&f.addEventListener("click",h),function(){return f.removeEventListener("click",h)}}),[h,c,f]);var g=Object(D.useCallback)((function(e){b(t[e].label),a(t[e].key)}),[t,a]);return Object(Ce.c)("div",{className:"dropdown",ref:p,css:gb,children:[Object(Ce.b)("button",{type:"button",onClick:function onClick(){return l((function(e){return!e}))},children:d?i(d):Object(Ce.b)(Ze.j,{})}),c&&Object(Ce.b)(hb,{data:t,onSelect:g})]})}DropDownButton.defaultProps={data:null,formatSelectedValue:function formatSelectedValue(e){return e},value:null};var mb,jb=DropDownButton,vb=function styles(e){return Object(y.css)(mb||(mb=Object(x.a)(["\n  position: relative;\n\n  .delete {\n    position: absolute;\n    right: 0px;\n    top: 0px;\n  }\n\n  .container {\n    display: flex;\n    flex-direction: column;\n    padding: 0;\n    margin: 0;\n  }\n  .dropDown-container {\n    justify-content: flex-start;\n    align-items: flex-start;\n  }\n  .label-container {\n    flex: 1;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    flex-direction: column;\n    min-height: 45px;\n  }\n\n  .label {\n    text-align: center;\n  }\n\n  ","\n"])),e)},Ob=[{key:"relative",label:"Relative"},{key:"absolute",label:"Absolute"},{key:"min",label:"Min Intensity"},{key:"max",label:"Max Intensity"}];var xb=function ColumnHeader(e){var t=e.charLabel,n=e.rangeLabel,a=e.data,i=e.onColumnFilter,r=useDispatch(),o=Object(D.useCallback)((function(){r({type:Qn,colKey:t})}),[t,r]);return Object(Ce.c)("div",{css:vb,children:[Object(Ce.c)("div",{className:"container",children:[a.type===Bd&&Object(Ce.b)("div",{className:"dropDown-container",children:Object(Ce.b)(jb,{data:Ob,formatSelectedValue:function formatSelectedValue(e){return e?e.substr(0,3):e},selectedKey:a.valueKey,onSelect:i})}),Object(Ce.c)("div",{className:"label-container",children:[Object(Ce.c)("span",{className:"label",children:[" ",t]}),Object(Ce.b)("span",{className:"label",children:n})]})]}),Object(Ce.b)(Qc,{onDelete:o})]})};function MultipleSpectraAnalysisTable(e){var t=e.data,n=useFormatNumberByNucleus(e.activeTab),a=Object(D.useMemo)((function(){return Evaluate_calculate(C()(t,"code",""),t)}),[t]),i=useDispatch(),r=Object(D.useCallback)((function(e,t){i({type:na,payload:{columnKey:e,valueKey:t}})}),[i]),o=Object(D.useMemo)((function(){var e=[{Header:"#",index:0,Cell:function Cell(e){return e.row.index+1}}],a=e;return t.columns&&Object.keys(t.columns).forEach((function(e){var i=t.columns[e],o=i.valueKey,c=i.index;!function setCustomColumn(e,a,i,o){var c=t.columns[i];e.push({index:a,Header:function Header(){return Object(N.jsx)(xb,{charLabel:i,data:c,onColumnFilter:function onColumnFilter(e){return r(i,e)},rangeLabel:c.from&&c.to?"".concat(n(c.from)," - ").concat(n(c.to)):""})},id:i,sortType:"basic",Cell:function Cell(e){var t=e.row;return o(t)}})}(a,c+1,e,(function(t){var a=t.original[e][o];return a instanceof Error?Object(N.jsx)("span",{style:{color:"red"},children:a.message}):n(a)}))})),(a||e).sort((function(e,t){return e.index-t.index}))}),[r,t.columns,n]);return t.values&&t.values.length>0?Object(N.jsxs)(D.Fragment,{children:[Object(N.jsx)(Ku,{data:t.values,columns:o}),Object(N.jsx)("div",{style:{width:"100%",padding:"10px"},dangerouslySetInnerHTML:{__html:a}})]}):Object(N.jsx)(Wu,{})}var yb=Object(D.memo)(MultipleSpectraAnalysisTable),kb={container:{display:"flex",flexDirection:"column",height:"100%"},button:{backgroundColor:"transparent",border:"none"}};function MultipleSpectraAnalysisPanel(e){var t=e.spectraAnalysis,n=e.activeTab,a=Object(D.useState)(!1),i=Object(O.a)(a,2),r=i[0],o=i[1],c=Object(D.useRef)(),l=Ec(),s=oe(),u=useDispatch(),d=Object(D.useMemo)((function(){var e=t[n]||{values:{},options:{columns:{},code:null}},a=e.values,i=e.options,r=i.columns,o=i.code;return{values:Object.values(a),columns:r,code:o}}),[n,t]),b=Object(D.useCallback)((function(){o(!r)}),[r]),f=Object(D.useCallback)((function(){c.current.saveSetting()}),[]),p=Object(D.useCallback)((function(){o(!1)}),[]),h=Object(D.useCallback)((function(e){pi.emit("showYSpectraTrackers",e)}),[]),g=Object(D.useCallback)((function(){u({type:wn}),s.show(Object(N.jsx)(Ud,{nucleus:n}),{isBackgroundBlur:!1,position:J.TOP_CENTER,width:500})}),[n,s,u]),m=Object(D.useCallback)((function(){u({type:wn}),s.show(Object(N.jsx)(tb,{}),{isBackgroundBlur:!1,position:J.TOP_CENTER,width:500})}),[s,u]),j=Object(D.useCallback)((function(){var e=function getDataAsString(e,t){if(e&&e[t]){var n=e[t],a=n.values,i=n.options.columns,r="";for(var o in i)r+="".concat(o,"\t");r+="\n";for(var c=0,l=Object.values(a);c<l.length;c++){var s=l[c];for(var u in i)r+="".concat(s[u][i[u].valueKey],"\t");r+="\n"}return r}return null}(t,n);Object(Rc.c)(e)?l.success("Data copied to clipboard"):l.error("copy to clipboard failed")}),[n,l,t]),v=Object(D.useCallback)((function(){u({type:wn}),s.show(Object(N.jsx)(Wd,{}),{isBackgroundBlur:!1,position:J.TOP_CENTER,width:500})}),[s,u]);return Object(N.jsxs)("div",{style:kb.container,children:[!r&&Object(N.jsxs)(Fu,{deleteToolTip:"Delete All Peaks",showSettingButton:"true",canDelete:!1,onSettingClick:b,children:[Object(N.jsx)(dd,{popupTitle:"Copy To Clipboard",style:kb.button,onClick:j,children:Object(N.jsx)(Ze.p,{})}),Object(N.jsx)(dd,{popupTitle:"Spectra calibration",style:kb.button,onClick:g,children:Object(N.jsx)(Js.l,{style:{fontSize:"18px"}})}),Object(N.jsx)(Eu,{popupTitle:"Y Spectra Tracker",popupPlacement:"right",onClick:h,children:Object(N.jsx)(Nr.a,{})}),Object(N.jsx)(dd,{popupTitle:"Add Filter",style:kb.button,onClick:m,children:Object(N.jsx)(Js.b,{style:{fontSize:"18px"}})}),Object(N.jsx)(dd,{popupTitle:"Export spectra as a Matrix",onClick:v,children:Object(N.jsx)(Js.f,{})})]}),r&&Object(N.jsx)(zu,{onSave:f,onClose:b}),Object(N.jsx)("div",{style:{height:"100%",overflow:"auto"},children:Object(N.jsxs)(Qs.a,{isFlipped:r,infinite:!0,containerStyle:{overflow:"hidden"},children:[Object(N.jsx)(yb,{data:d,activeTab:n}),Object(N.jsx)(bb,{data:d,onAfterSave:p,ref:c})]})})]})}var Cb=ar(Object(D.memo)(MultipleSpectraAnalysisPanel));var Db=function PeaksWrapper(e){var t=function Wrapper(t){var n=useChartData(),a=n.data,i=n.activeSpectrum,r=n.xDomain,o=n.activeTab,c=n.tabActiveSpectrum,l=usePreferences(),s=Object(D.useMemo)((function(){return a&&i&&i.id?a.find((function(e){return e.id===i.id}))||{peaks:{},info:{},data:{}}:{}}),[i,a]),u=s.peaks,d=void 0===u?{}:u,b=s.info,f=void 0===b?{}:b,p=s.data,h=void 0===p?{}:p,g=Object(D.useMemo)((function(){return c&&Object.keys(c).length>0?Object.keys(c):null}),[c]),m=t.forwardedRef,j=Object(ge.a)(t,["forwardedRef"]);return Object(N.jsx)(e,Object(v.a)(Object(v.a)({},j),{},{peaks:d,info:f,x:h.x,y:h.y,xDomain:r,preferences:l,activeTab:o,nucleus:g,ref:m}))};return Object(D.forwardRef)((function(e,n){return Object(N.jsx)(t,Object(v.a)(Object(v.a)({},e),{},{forwardedRef:n}))}))},Sb={container:{padding:10,backgroundColor:"#f1f1f1",height:"100%"},groupContainer:{padding:"5px",borderRadius:"5px",margin:"10px 0px",backgroundColor:"white"},row:{display:"flex",margin:"5px 0px"},header:{borderBottom:"1px solid #e8e8e8",paddingBottom:"5px",fontWeight:"bold",color:"#4a4a4a"},inputLabel:{flex:2,fontSize:"11px",fontWeight:"bold",color:"#232323"},input:{width:"30%",textAlign:"center"}},wb=[{id:1,label:"Peak Number :",checkController:"showPeakNumber",formatController:"peakNumberFormat",defaultFormat:""},{id:2,label:"Peak Index : ",checkController:"showPeakIndex",formatController:"peakIndexFormat",defaultFormat:""},{id:3,label:"\u03b4 (ppm) :",checkController:"showDeltaPPM",formatController:"deltaPPMFormat",defaultFormat:"00.00"},{id:4,label:"\u03b4 (Hz) :",checkController:"showDeltaHz",formatController:"deltaHzFormat",defaultFormat:"00.00"},{id:5,label:"Peak Width",checkController:"showPeakWidth",formatController:"peakWidthFormat",defaultFormat:"00.0000"},{id:6,label:"Intensity :",checkController:"showIntensity",formatController:"intensityFormat",defaultFormat:"00.00"}];function PeaksPreferences(e,t){var n=e.nucleus,a=e.preferences,i=Ec(),r=useStateWithLocalStorage("nmr-general-settings"),o=Object(O.a)(r,2)[1],c=Object(D.useState)(null),l=Object(O.a)(c,2),s=l[0],u=l[1],d=Object(D.useRef)();Object(D.useEffect)((function(){var e=dt(a,"formatting.panels.peaks");e&&u(e)}),[a]);var b=Object(D.useCallback)((function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];a.dispatch({type:gl,payload:{key:"peaks",value:e}}),t&&i.success("Peaks preferences saved successfully")}),[i,a]);Object(D.useImperativeHandle)(t,(function(){return{saveSetting:function saveSetting(){"function"===typeof d.current.requestSubmit?d.current.requestSubmit():d.current.dispatchEvent(new Event("submit",{cancelable:!0}))}}}));var f=Object(D.useCallback)((function(e){e.preventDefault();var t,n=e.target,a=new FormData(n),i={},r=Object(rc.a)(a.entries());try{for(r.s();!(t=r.n()).done;){var c=t.value,l=c[0].split("-").join("."),s=["true","false"].includes(c[1])?"true"===c[1]:c[1];i=st()(i,l,s)}}catch(u){r.e(u)}finally{r.f()}b(i,!0),o(i,"formatting.panels.peaks")}),[b,o]),p=Object(D.useCallback)((function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var a=t.join(".");if(s){var i=C()(s,a);return i||null}var r=t.length-1;return wi[t[r]]}),[s]);return Object(N.jsx)("div",{style:Sb.container,children:Object(N.jsx)("form",{onSubmit:f,ref:d,children:n&&n.map((function(e){return Object(N.jsxs)("div",{style:Sb.groupContainer,children:[Object(N.jsx)(jd,{style:Sb.header,value:e}),wb.map((function(t){return Object(N.jsx)(nd,{label:t.label,checked:p(e,t.checkController),format:p(e,t.formatController),checkControllerName:t.checkController,formatControllerName:t.formatController,groupID:e},t.id)}))]},e)}))})})}var Tb=Db(Object(D.forwardRef)(PeaksPreferences));function PeaksTable(e){var t=e.peaks,n=e.info,a=e.xDomain,i=e.activeTab,r=e.enableFilter,o=e.onFilter,c=e.preferences,l=useDispatch(),s=Object(D.useRef)([]),u=useFormatNumberByNucleus(n.nucleus),d=Object(D.useCallback)((function(e,t){e.preventDefault(),e.stopPropagation();var n=t.original;l({type:Et,data:{id:n.id,xIndex:n.xIndex}})}),[l]),b=Object(D.useMemo)((function(){return[{index:20,Header:"",width:"1%",maxWidth:"24px",minWidth:"24px",id:"delete-button",Cell:function Cell(e){var t=e.row;return Object(N.jsx)("button",{type:"button",className:"delete-button",onClick:function onClick(e){return d(e,t)},children:Object(N.jsx)(Ze.B,{})})}}]}),[d]),f=Object(D.useCallback)((function(e){s.current.forEach((function(t,n){e!==n&&t&&t.closeEdit()}))}),[]),p=Object(D.useCallback)((function(e,t){var n=parseFloat(e.target.value)-parseFloat(t.value);l({type:Pt,shiftValue:n})}),[l]),h=Object(D.useMemo)((function(){var e=function setCustomColumn(e,t,n,a,i){e.push(Object(v.a)(Object(v.a)({},i),{},{index:t,Header:n,sortType:"basic",Cell:function Cell(e){var t=e.row;return a(t)}}))},t=dt(c,"formatting.panels.peaks.[".concat(i,"]"),wi),n=Object(Hi.a)(b);return t.showPeakNumber&&e(n,1,"#",(function(e){return Yi(e.index+1,t.peakNumberFormat)}),{width:"1%",maxWidth:"40px",minWidth:"40px"}),t.showPeakIndex&&e(n,2,"index",(function(e){return Yi(e.original.xIndex,t.peakIndexFormat)})),t.showDeltaPPM&&e(n,3,"\u03b4 (ppm)",(function(e){return Object(N.jsx)(Xu,{onEditStart:function onEditStart(){return f(e.index)},ref:function ref(t){return s.current[e.index]=t},value:Yi(e.original.value,t.deltaPPMFormat),onSave:function onSave(t){return p(t,e.original)},type:"number"})})),t.showDeltaHz&&e(n,4,"\u03b4 (Hz)",(function(e){return Yi(e.original.valueHz,t.deltaHzFormat)})),t.showIntensity&&e(n,5,"Intensity",(function(e){return Yi(e.original.intensity,t.intensityFormat)})),t.showPeakWidth&&e(n,5,"Peak Width",(function(e){return Yi(e.original.peakWidth,t.peakWidthFormat)})),n.sort((function(e,t){return e.index-t.index}))}),[i,f,b,c,p]),g=Object(D.useMemo)((function(){function isInRange(e){var t=1e5;return e*t>=a[0]*t&&e*t<=a[1]*t}return t&&t.values?(r?t.values.filter((function(e){return isInRange(e.delta)})):t.values).map((function(e){var t=u(e.delta);return{value:t,valueHz:n&&n.originFrequency?t*n.originFrequency:"",id:e.id,intensity:e.intensity,peakWidth:e.width?e.width:"",isConstantlyHighlighted:isInRange(t)}})):[]}),[r,u,n,t,a]);return Object(D.useEffect)((function(){o(g.length)}),[g,o]),g&&g.length>0?Object(N.jsx)(Ku,{data:g,columns:h}):Object(N.jsx)(Wu,{})}var Mb=Db(Object(D.memo)(PeaksTable)),Ab={container:{display:"flex",flexDirection:"column",height:"100%"}};function PeaksPanel(){var e=Object(D.useState)(!1),t=Object(O.a)(e,2),n=t[0],a=t[1],i=Object(D.useState)(0),r=Object(O.a)(i,2),o=r[0],c=r[1],l=useDispatch(),s=oe(),u=Object(D.useState)(!1),d=Object(O.a)(u,2),b=d[0],f=d[1],p=Object(D.useRef)(),h=Object(D.useCallback)((function(){l({type:Et,data:null})}),[l]),g=Object(D.useCallback)((function(){s.showConfirmDialog({message:"All records will be deleted, Are You sure?",buttons:[{text:"Yes",handler:h},{text:"No"}]})}),[s,h]),m=Object(D.useCallback)((function(){f(!b)}),[b]),j=Object(D.useCallback)((function(){p.current.saveSetting(),f(!1)}),[]),v=Object(D.useCallback)((function(){a(!n)}),[n]),x=Object(D.useCallback)((function(e){c(e)}),[]);return Object(N.jsxs)("div",{style:Ab.container,children:[!b&&Object(N.jsx)(Fu,{counter:o,onDelete:g,deleteToolTip:"Delete All Peaks",onFilter:v,filterToolTip:n?"Show all peaks":"Hide peaks out of view",filterIsActive:n,counterFiltered:o,showSettingButton:"true",onSettingClick:m}),b&&Object(N.jsx)(zu,{onSave:j,onClose:m}),Object(N.jsx)("div",{style:{height:"100%",overflow:"hidden"},children:Object(N.jsxs)(Qs.a,{isFlipped:b,infinite:!0,containerStyle:{overflow:"hidden",height:"100%"},children:[Object(N.jsx)("div",{style:{overflow:"auto",height:"100%",display:"block"},children:Object(N.jsx)(Mb,{enableFilter:n,onFilter:x})}),Object(N.jsx)(Tb,{ref:p})]})})]})}var Eb,Pb=Object(D.memo)(PeaksPanel),Ib=Object(y.css)(Eb||(Eb=Object(x.a)(["\n  overflow: auto;\n  width: 400px;\n  .innerContainer {\n    padding: 5px;\n    width: 100%;\n    height: 180px;\n    border: none;\n  }\n\n  .mainButtonsContainer {\n    padding: 5px 0px;\n    border-bottom: 0.55px solid #ebebeb;\n    display: flex;\n    justify-content: space-between;\n  }\n\n  button {\n    background-color: transparent;\n    border: none;\n    padding: 0 5px;\n  }\n\n  button:disabled {\n    opacity: 0.6;\n  }\n"])));var Fb=function CopyClipboardModal(e){var t=e.text,n=e.onClose,a=e.onCopyClick;return Object(Ce.c)("div",{css:Ib,children:[Object(Ce.c)("div",{className:"mainButtonsContainer handle",children:[Object(Ce.b)("button",{type:"button",onClick:function onClick(){return a(t)},children:Object(Ce.b)(Ze.e,{})}),Object(Ce.b)(et,{onClick:n})]}),Object(Ce.b)("div",{className:"innerContainer",dangerouslySetInnerHTML:{__html:t}})]})},_b={toolbar:{display:"flex",flexDirection:"row",borderBottom:"0.55px solid rgb(240, 240, 240)"},center:{display:"flex",justifyContent:"center",alignItems:"center",padding:"5px"},removeAssignmentsButton:{border:"none",height:"16px",fontSize:"12px",backgroundColor:"transparent"},button:{backgroundColor:"transparent",border:"none"}};var Rb=function RangesHeader(e){var t=e.ranges,n=e.info,a=e.activeTab,i=e.molecules,r=e.onUnlink,o=e.onFilterActivated,c=e.onSettingClick,l=e.isFilterActive,s=e.filterCounter,u=useDispatch(),d=oe(),b=Ec(),f=usePreferences(),p=useAssignmentData(),h=Object(D.useState)(!1),g=Object(O.a)(h,2),m=g[0],j=g[1],x=C()(t,"options.sum",null),y=Object(D.useCallback)((function(e){void 0!==e&&u({type:Ln,value:e}),d.close()}),[u,d]),k=Object(D.useCallback)((function(){d.show(Object(N.jsx)(Tu,{onClose:function onClose(){return d.close()},onSave:y,header:x?"Set new Ranges Sum (Current: ".concat(Number(x).toFixed(2),")"):"Set new Ranges Sum",molecules:i,element:a?a.replace(/[0-9]/g,""):null}))}),[a,y,x,d,i]),S=Object(D.useCallback)((function(){r()}),[r]),w=Object(D.useCallback)((function(){d.showConfirmDialog({message:"All assignments will be removed. Are you sure?",buttons:[{text:"Yes",handler:S},{text:"No"}]})}),[S,d]),T=Object(D.useCallback)((function(){d.showConfirmDialog({message:"All ranges will be deleted. Are You sure?",buttons:[{text:"Yes",handler:function handler(){u({type:Cn,payload:{assignmentData:p}})}},{text:"No"}]})}),[p,u,d]),M=Object(D.useCallback)((function(e){pi.emit("showMultiplicityTrees",e),j(e)}),[]),A=Object(D.useCallback)((function(e){Object(Rc.a)(e)?b.success("Data copied to clipboard"):b.error("copy to clipboard failed")}),[b]),E=Object(D.useCallback)((function(){var e=n.originFrequency,a=n.nucleus,i=C()(f,"formatting.nucleusByKey[".concat(a.toLowerCase(),"]")),r=getNumberOfDecimals(i.ppm),o=getNumberOfDecimals(i.hz),c=Object(bc.c)(t.values,{nucleus:a,nbDecimalDelta:r,nbDecimalJ:o,observedFrequency:e});d.show(Object(N.jsx)(Fb,{text:c,onCopyClick:A,onClose:function onClose(){return d.close()}}),{})}),[n,d,f,t.values,A]);return Object(N.jsxs)(Fu,{counter:t&&t.values&&t.values.length,onDelete:T,deleteToolTip:"Delete All Ranges",onFilter:o,filterToolTip:l?"Show all ranges":"Hide ranges out of view",filterIsActive:l,counterFiltered:s,showSettingButton:"true",onSettingClick:c,children:[Object(N.jsx)(qe,{title:"Preview publication string",popupPlacement:"right",children:Object(N.jsx)("button",{style:_b.button,type:"button",onClick:E,children:Object(N.jsx)(Ze.p,{})})}),Object(N.jsx)(qe,{title:x?"Change Ranges Sum (".concat(Number(x).toFixed(2),")"):"Change Ranges Sum",popupPlacement:"right",children:Object(N.jsx)("button",{css:_b.button,type:"button",onClick:k,children:Object(N.jsx)(Js.v,{})})}),Object(N.jsx)(qe,{title:"Remove all Assignments",popupPlacement:"right",children:Object(N.jsx)("button",{style:Object(v.a)(Object(v.a)({},_b.center),_b.removeAssignmentsButton),type:"button",onClick:w,disabled:!t||!t.values||0===t.values.length,children:Object(N.jsx)(Ze.H,{})})}),Object(N.jsx)(Eu,{popupTitle:m?"Hide Multiplicity Trees in Spectrum":"Show Multiplicity Trees in Spectrum",popupPlacement:"right",onClick:M,disabled:!t||!t.values||0===t.values.length,children:Object(N.jsx)(Ze.E,{style:{pointerEvents:"none",fontSize:"12px"}})})]})},Nb={container:{padding:10,backgroundColor:"#f1f1f1",height:"100%",flex:1},groupContainer:{padding:"5px",borderRadius:"5px",margin:"10px 0px",backgroundColor:"white"},row:{display:"flex",margin:"5px 0px"},header:{borderBottom:"1px solid #e8e8e8",paddingBottom:"5px",fontWeight:"bold",color:"#4a4a4a"},inputLabel:{flex:2,fontSize:"11px",fontWeight:"bold",color:"#232323"},input:{width:"30%",textAlign:"center"}};function RangesPreferences(e,t){var n=e.nucleus,a=e.preferences,i=Ec(),r=useStateWithLocalStorage("nmr-general-settings"),o=Object(O.a)(r,2)[1],c=Object(D.useState)(null),l=Object(O.a)(c,2),s=l[0],u=l[1],d=Object(D.useRef)();Object(D.useEffect)((function(){var e=dt(a,"formatting.panels.ranges");e&&u(e)}),[a]);var b=function saveToLocalStorgate(e){o(e,"formatting.panels.ranges")},f=Object(D.useCallback)((function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];a.dispatch({type:gl,payload:{key:"ranges",value:e}}),t&&i.success("ranges preferences saved successfully")}),[i,a]);Object(D.useImperativeHandle)(t,(function(){return{saveSetting:function saveSetting(){"function"===typeof d.current.requestSubmit?d.current.requestSubmit():d.current.dispatchEvent(new Event("submit",{cancelable:!0}))}}}));var p=[{id:1,label:"From :",checkController:"showFrom",formatController:"fromFormat",defaultFormat:"0.00"},{id:2,label:"To :",checkController:"showTo",formatController:"toFormat",defaultFormat:"0.00"},{id:3,label:"Absolute :",checkController:"showAbsolute",formatController:"absoluteFormat",defaultFormat:"0.00"},{id:4,label:"Relative :",checkController:"showRelative",formatController:"relativeFormat",defaultFormat:"00.00"}],h=function(){var e=Object(Vr.a)(Xr.a.mark((function _callee(e){var t,n,a,i,r,o,c,l;return Xr.a.wrap((function _callee$(s){for(;;)switch(s.prev=s.next){case 0:e.preventDefault(),t=e.target,n=new FormData(t),a={},i=Object(rc.a)(n.entries());try{for(i.s();!(r=i.n()).done;)o=r.value,c=o[0].split("-").join("."),l=["true","false"].includes(o[1])?"true"===o[1]:o[1],a=st()(a,c,l)}catch(u){i.e(u)}finally{i.f()}f(a,!0),b(a);case 8:case"end":return s.stop()}}),_callee)})));return function handleSubmit(t){return e.apply(this,arguments)}}(),g=Object(D.useCallback)((function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var a=t.join(".");if(s){var i=C()(s,a);return i||null}var r=t.length-1;return Si[t[r]]}),[s]);return Object(N.jsx)("div",{style:Nb.container,children:Object(N.jsx)("form",{onSubmit:h,ref:d,children:n&&n.map((function(e){return Object(N.jsxs)("div",{style:Nb.groupContainer,children:[Object(N.jsx)(jd,{style:Nb.header,value:e}),p.map((function(t){return Object(N.jsx)(nd,{label:t.label,checked:g(e,t.checkController),format:g(e,t.formatController),checkControllerName:t.checkController,formatControllerName:t.formatController,groupID:e},t.id)}))]},e)}))})})}var Lb=Object(D.memo)(Object(D.forwardRef)(RangesPreferences)),zb=null;var Hb=function useToggleStatus(e,t){var n=Object(D.useState)({}),a=Object(O.a)(n,2),i=a[0],r=a[1];Object(D.useEffect)((function(){var n={};if(t&&Array.isArray(t)){for(var a=0;a<t.length;a++)n[t[a][e]]=!1;r(n)}}),[t,e]);var o=Object(D.useCallback)((function(e){var t=Object(v.a)({},i);zb&&(t[zb]=!1),null!=e&&(zb=e,t[e]=!0),r(t)}),[i]);return[i,o]},Bb=n(412),Xb=n.n(Bb);function isColumnVisible(e,t){return Xb.a.get(e,t,!1)}var Vb=function AbsoluteColumn(e){var t=e.rowSpanTags,n=e.value,a=e.onHoverRange,i=e.format;return Object(N.jsx)("td",Object(v.a)(Object(v.a)(Object(v.a)({},t),a),{},{children:Yi(n,i)}))};var Yb=function Button_Button(e){var t=e.onClick,n=Object(ge.a)(e,["onClick"]);return Object(Ce.b)(D.Fragment,{children:Object(Ce.b)("button",Object(v.a)({type:"button",onClick:t},n))})};var Zb=function ErrorMessage(e){var t=e.style,n=Object(ge.a)(e,["style"]),a=Object(sl.e)(n)[1];return Object(Ce.b)("div",{children:a.error?Object(Ce.b)("p",{style:Object(v.a)({color:"red",margin:"0.5px"},t),children:a.error}):null})};function formik_Input_Input(e){var t=e.onFocus,n=e.onBlur,a=e.enableErrorMessage,i=Object(ge.a)(e,["onFocus","onBlur","enableErrorMessage"]),r=Object(sl.e)(i),o=Object(O.a)(r,1)[0];return Object(N.jsxs)("div",{children:[Object(N.jsx)("input",Object(v.a)(Object(v.a)(Object(v.a)({},o),i),{},{onFocus:function onFocus(){return t(o.name)},onBlur:function onBlur(){return n(o.name)}})),a&&!0===a?Object(N.jsx)(Zb,Object(v.a)({},i)):null]})}formik_Input_Input.defaultProps={onFocus:function onFocus(){return null},onBlur:function onBlur(){return null}};var Ub,Kb=formik_Input_Input,Wb=Object(y.css)(Ub||(Ub=Object(x.a)(["\n  text-align: center;\n  width: 100%;\n  height: 100%;\n\n  .infoText {\n    margin-top: 20px;\n    font-size: 12px;\n  }\n\n  input {\n    background-color: transparent;\n    border: 0.5px solid #dedede;\n    width: 50%;\n    text-align: center;\n  }\n\n  .addSignalButton {\n    margin-top: 15px;\n    margin-top: 20px;\n    background-color: transparent;\n    border: none;\n    padding: 0.3rem;\n    border-radius: 25%;\n  }\n"])));function AddSignalFormTab(e){var t=e.onFocus,n=e.onBlur,a=Object(sl.f)(),i=a.values,r=a.setFieldValue,o=a.errors,c=Object(D.useState)(!1),l=Object(O.a)(c,2),s=l[0],u=l[1],d=Object(D.useCallback)((function(){var e={multiplicity:"m",kind:"signal",delta:Number(i.newSignalDelta),j:[{multiplicity:translateMultiplet("m"),coupling:""}]},t=i.signals.slice().concat(e);r("signals",t),r("activeTab",String(t.length-1))}),[r,i.newSignalDelta,i.signals]);return Object(D.useEffect)((function(){o.newSignalDelta?u(!0):u(!1)}),[o.newSignalDelta,i.signals]),Object(Ce.c)("div",{css:Wb,children:[Object(Ce.c)("div",{children:[Object(Ce.b)("p",{className:"infoText",children:"Edit or select a delta value of new signal (ppm):"}),Object(Ce.b)(Kb,{name:"newSignalDelta",type:"number",placeholder:"\u0394".concat(" (ppm)"),onFocus:t,onBlur:n})]}),Object(Ce.b)("div",{children:Object(Ce.b)(Yb,{className:"addSignalButton",onClick:d,disabled:s,css:{color:s?"grey":"blue",width:"100%"},children:Object(Ce.b)(Ze.y,{title:"Add new signal"})})})]})}var Gb=Object(D.memo)(AddSignalFormTab);function SelectBox(e){var t=e.values,n=Object(ge.a)(e,["values"]),a=Object(sl.e)(n),i=Object(O.a)(a,1)[0];return t&&t.length>0?Object(Ce.c)("div",{children:[Object(Ce.b)(sl.a,Object(v.a)(Object(v.a)(Object(v.a)({as:"select"},i),n),{},{children:t.map((function(e,t){return Object(Ce.b)("option",{children:e},t)}))})),Object(Ce.b)(Zb,Object(v.a)({},n))]}):null}SelectBox.protoTypes={valuePath:Ji.a.instanceOf(Array).isRequired,valueSelectionTemplate:Ji.a.func};var qb,Jb=SelectBox,$b=Object(y.css)(qb||(qb=Object(x.a)(["\n  border-spacing: 0;\n  border: 1px solid #dedede;\n  width: 100%;\n  height: 100%;\n  font-size: 12px;\n\n  th,\n  td {\n    text-align: center;\n    margin: 0;\n    padding: 0.4rem;\n    border-bottom: 1px solid #dedede;\n    border-right: 1px solid #dedede;\n\n    button {\n      background-color: transparent;\n      border: none;\n    }\n\n    .add-button {\n      color: blue;\n    }\n\n    .delete-button {\n      border-radius: 25%;\n      padding: 0;\n      padding-left: 0.3rem;\n      padding-right: 0.3rem;\n    }\n    .delete-button:hover {\n      background-color: red;\n      .icon {\n        color: white;\n      }\n    }\n\n    input {\n      background-color: transparent;\n      border: 0.5px solid #dedede;\n      height: 100%;\n      width: 100%;\n      text-align: center;\n    }\n    .selectBox {\n      background-color: transparent;\n      border: 0.5px solid #dedede;\n      height: 100%;\n      width: 100%;\n      text-align: center;\n    }\n  }\n\n  tr {\n    :last-child {\n      border-top: 3px solid #dedede;\n    }\n  }\n"]))),Qb={border:"1px solid red"};function CouplingsTable(e){var t=e.push,n=e.remove,a=e.onFocus,i=e.onBlur,r=Object(sl.f)(),o=r.values,c=r.setFieldValue,l=r.errors;Object(D.useEffect)((function(){o.signals[o.activeTab]&&o.signals[o.activeTab].j.forEach((function(e,t){hasCouplingConstant(e.multiplicity)||c("signals.".concat(o.activeTab,".j.").concat(t,".coupling"),"")}))}),[c,o.activeTab,o.signals]);var s=Object(D.useCallback)((function(e){return C()(l,"signals[".concat(o.activeTab,"].missingCouplings"),[]).some((function(t){return t.index===e}))}),[l,o.activeTab]);return Object(Ce.b)("table",{css:$b,children:Object(Ce.c)("tbody",{children:[Object(Ce.c)("tr",{children:[Object(Ce.b)("th",{children:"#"}),Object(Ce.b)("th",{children:"Multiplicity"}),Object(Ce.b)("th",{children:"J (Hz)"}),Object(Ce.b)("th",{children:""})]}),C()(o,"signals[".concat(o.activeTab,"].j"),[]).map((function(e,t){return Object(Ce.c)("tr",{children:[Object(Ce.b)("td",{children:t+1}),Object(Ce.b)("td",{children:Object(Ce.b)(Jb,{className:"selectBox",name:"signals.".concat(o.activeTab,".j.").concat(t,".multiplicity"),values:xr.map((function(e){return e.label}))})}),Object(Ce.b)("td",{children:Object(Ce.b)(Kb,{name:"signals.".concat(o.activeTab,".j.").concat(t,".coupling"),type:"number",placeholder:"J (Hz)",disabled:!hasCouplingConstant(e.multiplicity),onFocus:a,onBlur:i,style:s(t)?Qb:null})}),Object(Ce.b)("td",{children:Object(Ce.b)(Yb,{className:"delete-button",onClick:function onClick(){n(t)},children:Object(Ce.b)(Ze.v,{className:"icon",title:"Delete coupling"})})})]},"editCouplings".concat(o.activeTab).concat(t))})),Object(Ce.b)("tr",{}),Object(Ce.b)("tr",{children:Object(Ce.b)("td",{colSpan:4,children:Object(Ce.b)(Yb,{className:"add-button",onClick:function onClick(){return t({multiplicity:translateMultiplet("m"),coupling:""})},children:Object(Ce.b)(Ze.y,{title:"Add new coupling"})})})})]})})}var ef,tf=Object(D.memo)(CouplingsTable),nf=Object(y.css)(ef||(ef=Object(x.a)(["\n  border-spacing: 0;\n  border: 1px solid #dedede;\n  width: 100%;\n  font-size: 12px;\n  height: 100%;\n\n  margin: 0;\n  padding: 0.4rem;\n  text-align: center;\n"])));function SignalFormTab(e){var t=e.onFocus,n=e.onBlur,a=Object(sl.f)().values;return Object(Ce.b)("div",{css:nf,children:Object(Ce.b)(sl.b,{name:"signals.".concat(a.activeTab,".j"),render:function render(e){var a=e.push,i=e.remove;return Object(Ce.b)("div",{children:Object(Ce.b)(tf,{push:a,remove:i,onFocus:t,onBlur:n})})}})})}var af,rf,of=Object(D.memo)(SignalFormTab),cf=Object(y.css)(af||(af=Object(x.a)(["\n  text-align: center;\n  width: 100%;\n\n  .errorText {\n    color: red;\n  }\n\n  .infoText {\n    margin-bottom: 20px;\n    font-size: 11px;\n  }\n"]))),lf=Object(y.css)(rf||(rf=Object(x.a)(["\n  color: red;\n"])));function SignalsForm(){var e=Object(sl.f)(),t=e.values,n=e.setFieldValue,a=e.errors,i=useChartData(),r=i.data,o=i.activeSpectrum,c=Object(D.useState)(null),l=Object(O.a)(c,2),s=l[0],u=l[1],d=Object(D.useState)(null),b=Object(O.a)(d,2),f=b[0],p=b[1];Object(D.useEffect)((function(){r&&o&&C()(r,"[".concat(o.index,"].info.originFrequency"),void 0)?p(r[o.index].info.originFrequency):p(null)}),[o,r]),Object(D.useEffect)((function(){return pi.on("brushEnd",(function(e){s&&f&&n(s,Math.abs(e.range[0]-e.range[1])*f)})),function(){pi.off("brushEnd")}}),[s,n,f,t.activeTab]),Object(D.useEffect)((function(){return pi.on("mouseClick",(function(e){"addSignalTab"===t.activeTab&&s&&n(s,e.xPPM)})),function(){pi.off("mouseClick")}}),[t.activeTab,s,n]);var h=Object(D.useCallback)((function(e){u(e)}),[u]),g=Object(D.useCallback)((function(e){var t=e.tabid;n("activeTab",t),u(null)}),[n]),m=Object(D.useCallback)((function(e){var a=e.tabid,i=t.signals.filter((function(e,t){return t!==Number(a)}));n("signals",i)}),[n,t.signals]);Object(D.useEffect)((function(){n("activeTab",t.signals.length>0?(t.signals.length-1).toString():"addSignalTab")}),[n,t.signals.length]);var j=Object(D.useCallback)((function(e){return a.signals&&(C()(a,"signals.noCouplings",[]).some((function(t){return t.index===e}))||C()(a,"signals[".concat(e,"].missingCouplings"),[]).length>0)}),[a]),v=Object(D.useMemo)((function(){var e=t.signals.length>0?t.signals.map((function(e,t){return Object(Ce.b)("div",{tabid:"".concat(t),tablabel:"\u0394".concat(": ",e.delta.toFixed(5)," (").concat(e.j.map((function(e){return translateMultiplet(e.multiplicity)})).join(""),")"),tabstyles:j(t)?lf:null,children:Object(Ce.b)(of,{onFocus:h})},"signalForm".concat(t))})):[],n=Object(Ce.b)("div",{tablabel:"+",tabid:"addSignalTab",candelete:"false",children:Object(Ce.b)(Gb,{onFocus:h})},"addSignalTab");return e.concat(n)}),[h,j,t.signals]),x=Object(Ce.b)("p",{className:"infoText",children:"Focus on an input field and press Shift + Drag & Drop to draw a coupling constant in spectrum view."}),y=Object(Ce.b)("p",{className:"infoText",children:"Focus on the input field and press Shift + Left mouse click to select new signal delta value in spectrum view."});return Object(Ce.c)("div",{children:[Object(Ce.b)("div",{css:cf,children:a.signals&&(a.signals.noSignals||a.signals.noCouplings)?Object(Ce.c)("div",{children:[Object(Ce.b)("p",{className:"errorText",children:a.signals.noSignals||a.signals.noCouplings[0].message}),a.signals.noSignals?y:null]}):"addSignalTab"===t.activeTab?y:x}),Object(Ce.b)(ll,{defaultTabID:t.activeTab,onClick:g,canDelete:!0,onDelete:m,children:v})]})}var sf=Object(D.memo)(SignalsForm);var uf,df=function EditRangeValidation(e,t){var n={};e.newSignalDelta?(e.newSignalDelta<t.from||e.newSignalDelta>t.to)&&(n.newSignalDelta=" ".concat(e.newSignalDelta.toFixed(5)," ppm out of the range")):n.newSignalDelta="required";var a=function createSignalsError(e){n.signals||(n.signals={}),void 0===e||n.signals["".concat(e)]||(n.signals["".concat(e)]={missingCouplings:[]})};return 0===e.signals.length?(a(),n.signals.noSignals="There must be at least one signal in a range!"):e.signals.forEach((function(e,t){0===e.j.length&&(a(t),n.signals.noCouplings||(n.signals.noCouplings=[]),n.signals.noCouplings.push({index:t,message:"There must be at least one coupling in signal ".concat(t+1,"!")})),e.j.forEach((function(e,i){hasCouplingConstant(e.multiplicity)&&""===e.coupling&&(a(t),n.signals["".concat(t)].missingCouplings.push({index:i,message:"There are coupling values missing in signal ".concat(t+1,"!")}))}))})),n},bf=Object(y.css)(uf||(uf=Object(x.a)(["\n  overflow: auto;\n  width: 600px;\n  height: 500px;\n  padding: 5px;\n  button:focus {\n    outline: none;\n  }\n  .header {\n    height: 24px;\n    border-bottom: 1px solid #f0f0f0;\n    display: flex;\n    align-items: center;\n    span {\n      color: #464646;\n      font-size: 15px;\n      flex: 1;\n      border-left: 1px solid #ececec;\n      padding-left: 6px;\n    }\n\n    button {\n      background-color: transparent;\n      border: none;\n      padding: 5px;\n\n      svg {\n        height: 16px;\n      }\n    }\n  }\n  .container {\n    display: flex;\n    margin: 30px 5px;\n    input,\n    button {\n      padding: 5px;\n      border: 1px solid gray;\n      border-radius: 5px;\n      height: 36px;\n      margin: 2px;\n    }\n    input {\n      flex: 10;\n    }\n    button {\n      flex: 2;\n      color: white;\n      background-color: gray;\n    }\n  }\n"])));function EditRangeModal(e){var t=e.onSaveEditRangeModal,n=e.onCloseEditRangeModal,a=e.onZoomEditRangeModal,i=e.rangeData,r=Object(D.useCallback)((function(){a(i)}),[a,i]);Object(D.useEffect)((function(){r()}),[r]);var o=Object(D.useCallback)((function(){n()}),[n]),c=Object(D.useCallback)((function(e){return e.filter((function(e){return""!==e.coupling})).map((function(e){return Object(v.a)(Object(v.a)({},e),{},{multiplicity:translateMultiplet(e.multiplicity)})}))}),[]),l=Object(D.useCallback)((function(e){return e.map((function(e){return Object(v.a)(Object(v.a)({id:generateID()},e),{},{multiplicity:e.j.map((function(e){return translateMultiplet(e.multiplicity)})).join(""),j:c(e.j)})}))}),[c]),s=Object(D.useCallback)(function(){var e=Object(Vr.a)(Xr.a.mark((function _callee(e){var n;return Xr.a.wrap((function _callee$(a){for(;;)switch(a.prev=a.next){case 0:return(n=Object(v.a)({},i)).signal=l(e.signals),a.next=4,t(n);case 4:o();case 5:case"end":return a.stop()}}),_callee)})));return function(t){return e.apply(this,arguments)}}(),[l,o,t,i]),u=Object(D.useMemo)((function(){return i.signal.map((function(e){var t,n=0,a=[];return e.multiplicity.split("").forEach((function(i){hasCouplingConstant(i)?(t=Object(v.a)({},e.j[n]),n++):t={multiplicity:i,coupling:""},t.multiplicity=translateMultiplet(t.multiplicity),a.push(t)})),Object(v.a)(Object(v.a)({},e),{},{j:a})}))}),[i.signal]),d=Object(D.useCallback)((function(e){var t=Object.keys(e);return t.length>0&&(1!==t.length||"newSignalDelta"!==t[0])}),[]);return Object(Ce.b)("div",{css:bf,children:i&&Object(Ce.b)(sl.d,{initialValues:{signals:u,newSignalDelta:(i.from+i.to)/2,activeTab:"0"},validate:function validate(e){return df(e,i)},onSubmit:function onSubmit(e,t){var n=t.setSubmitting;s(e),n(!1)},children:function children(e){var t=e.values,n=e.errors;return Object(Ce.c)(sl.c,{children:[Object(Ce.c)("div",{className:"header handle",children:[Object(Ce.b)(Yb,{onClick:r,className:"zoom-button",children:Object(Ce.b)(Ze.D,{title:"Set to default view on range in spectrum"})}),Object(Ce.b)("span",{children:"Range Information and Editing"}),Object(Ce.b)(Nu,{onClick:function onClick(){return s(t)},disabled:d(n),popupTitle:"Save and exit"}),Object(Ce.b)(et,{onClick:o})]}),Object(Ce.b)(sf,{})]})}})})}EditRangeModal.defaultProps={onSave:function onSave(){return null},onClose:function onClose(){return null},onZoom:function onZoom(){return null}};var ff,pf=EditRangeModal,hf=Object(y.css)(ff||(ff=Object(x.a)(["\n  width: 66px;\n  padding: 0 !important;\n  button {\n    background-color: transparent;\n    border: none;\n    padding: 5px;\n  }\n\n  button:disabled {\n    opacity: 0.6;\n  }\n"]))),gf={marginLeft:2,marginRight:2,border:"none",height:"20px"};var mf=function ActionsColumn(e){var t=e.rowData,n=e.onHoverSignal,a=e.rowSpanTags,i=useDispatch(),r=oe(),o=useAssignmentData(),c=Object(D.useCallback)((function(){var e=Math.abs(t.from-t.to);i({type:It,xDomain:[t.from-e,t.to+e]})}),[i,t.from,t.to]),l=Object(D.useCallback)((function(){i({type:Cn,payload:{id:t.id,assignmentData:o}})}),[o,i,t]),s=Object(D.useCallback)((function(e){i({type:Kn,payload:{rowData:t,value:e}})}),[i,t]),u=Object(D.useCallback)((function(e){i({type:Wn,payload:{editedRowData:e,assignmentData:o}})}),[o,i]),d=Object(D.useCallback)((function(){i({type:wn}),r.close()}),[i,r]),b=Object(D.useCallback)((function(){i({type:Lt,selectedTool:"editRange"}),r.show(Object(Ce.b)(pf,{onCloseEditRangeModal:d,onSaveEditRangeModal:u,onZoomEditRangeModal:c,rangeData:t}),{position:J.CENTER_RIGHT,transition:ae,isBackgroundBlur:!1})}),[d,i,r,t,u,c]);return Object(Ce.c)(D.Fragment,{children:[Object(Ce.b)("td",Object(v.a)(Object(v.a)({},n),{},{children:Object(Ce.b)(Jl,{onChange:s,data:sr,defaultValue:t.tableMetaInfo.signal.kind,style:gf})})),Object(Ce.c)("td",Object(v.a)(Object(v.a)({},a),{},{css:hf,children:[Object(Ce.b)("button",{type:"button",className:"delete-button",onClick:l,children:Object(Ce.b)(Ze.B,{})}),Object(Ce.b)("button",{type:"button",className:"zoom-button",onClick:c,children:Object(Ce.b)(Ze.D,{title:"Zoom to range in spectrum"})}),Object(Ce.b)("button",{type:"button",className:"edit-button",onClick:b,children:Object(Ce.b)(Ze.i,{color:"blue"})})]}))]})};var jf=function CouplingColumn(e){var t=e.rowData,n=e.onHoverSignal,a=C()(t,"tableMetaInfo.signal.j");return Object(N.jsx)("td",Object(v.a)(Object(v.a)({},n),{},{children:a&&a.map((function(e){return e.coupling.toFixed(1)})).join(",")}))},vf={color:"red",fontWeight:"bold"};function RangeAssignmentsColumn(e){var t=e.rowData,n=e.assignment,a=e.highlight,i=e.onUnlinkVisibilityChange,r=e.unlinkVisibility,o=e.onLink,c=e.onUnlink,l=e.rowSpanTags,s=e.onHover,u=e.highlightData,d=Object(D.useMemo)((function(){return C()(t,"diaID",[])}),[t]),b=Object(D.useCallback)((function(e){i(e)}),[i]),f=Object(D.useMemo)((function(){return n.isActive||n.isOnHover||a.isActive&&!u.highlight.highlighted.find((function(e){return e===n.id}))?{color:"red",fontWeight:"bold"}:{color:"black",fontWeight:"normal"}}),[n.id,n.isActive,n.isOnHover,a.isActive,u.highlight.highlighted]);return Object(N.jsx)("td",Object(v.a)(Object(v.a)(Object(v.a)({},l),s),{},{onClick:function onClick(e){return o(e,n)},children:void 0!==t.pubIntegral&&t.pubIntegral>0?t.diaID&&t.diaID.length>0?Object(N.jsxs)("div",{onMouseEnter:function onMouseEnter(){return b(!0)},onMouseLeave:function onMouseLeave(){return b(!1)},children:[t.pubIntegral," "," ( ",Object(N.jsx)("span",{style:f,children:d.length})," ) ",Object(N.jsx)("sup",{children:Object(N.jsx)("button",{type:"button",style:{visibility:r?"visible":"hidden",padding:0,margin:0},onClick:function onClick(e){return c(e,!0)},children:Object(N.jsx)(Ze.w,{color:"red"})})})]}):n.isActive?Object(N.jsxs)("div",{children:["".concat(t.pubIntegral," ("),Object(N.jsx)("span",{style:vf,children:"0"}),")"]}):t.pubIntegral:n.isActive?Object(N.jsxs)("div",{children:["0 (",Object(N.jsx)("span",{style:vf,children:"0"}),")"]}):""}))}RangeAssignmentsColumn.defaultProps={onHover:function onHover(){return null},onUnlinkVisibilityChange:function onUnlinkVisibilityChange(){return null},onLink:function onLink(){return null},onUnlink:function onUnlink(){return null}};var Of=Object(D.memo)(RangeAssignmentsColumn);function RangeColumn(e){var t=e.value,n=e.rowSpanTags,a=e.onHoverRange,i=e.format;return Object(N.jsx)("td",Object(v.a)(Object(v.a)(Object(v.a)({},n),a),{},{children:Yi(t,i)}))}var xf=Object(D.memo)(RangeColumn);function RelativeColumn(e,t){var n=e.rowData,a=e.rowSpanTags,i=e.onHoverRange,r=e.format,o=e.onEditStart,c=e.editStatus,l=useDispatch(),s=Object(D.useMemo)((function(){var e=mr(n),t=Yi(n.integral,r);return e?t:"[ ".concat(t," ]")}),[r,n]),u=Object(D.useCallback)((function(e){l({type:Zn,value:e.target.value,id:n.id})}),[l,n.id]);return Object(N.jsx)("td",Object(v.a)(Object(v.a)(Object(v.a)({},a),i),{},{children:Object(N.jsx)(Xu,{ref:t,onEditStart:o,value:s,onSave:u,type:"number",style:{padding:"0.1rem 0.4rem"},editStatus:c})}))}var yf=Object(D.forwardRef)(RelativeColumn);function SignalAssignmentsColumn(e){var t=e.rowData,n=e.onHover,a=e.assignment,i=e.highlight,r=e.onUnlinkVisibilityChange,o=e.unlinkVisibility,c=e.onLink,l=e.onUnlink,s=Object(D.useMemo)((function(){return C()(t,"tableMetaInfo.signal.diaID",[])}),[t]),u=Object(D.useMemo)((function(){return a.isActive||i.isActive?{color:"red",fontWeight:"bold"}:null}),[a.isActive,i.isActive]),d=Object(D.useCallback)((function(e){r(e)}),[r]),b=Object(D.useCallback)((function(e){c(e,a)}),[a,c]);return Object(N.jsx)("td",Object(v.a)(Object(v.a)({},n),{},{onClick:b,style:u,children:s&&s.length>0?Object(N.jsxs)("div",{onMouseEnter:function onMouseEnter(){return d(!0)},onMouseLeave:function onMouseLeave(){return d(!1)},children:[s.length," ",Object(N.jsx)("sup",{children:Object(N.jsx)("button",{type:"button",style:{visibility:o?"visible":"hidden",padding:0,margin:0},onClick:function onClick(e){return l(e,!1)},children:Object(N.jsx)(Ze.w,{color:"red"})})})]}):a.isActive?"0":""}))}SignalAssignmentsColumn.defaultProps={onHover:function onHover(){return null},onUnlinkVisibilityChange:function onUnlinkVisibilityChange(){return null},onLink:function onLink(){return null},onUnlink:function onUnlink(){return null}};var kf=Object(D.memo)(SignalAssignmentsColumn);function useFormat(e){return function(t,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",r=C()(e,n,"0.000");return Yi(t,r,a,i)}}var Cf,Df,Sf=function SignalDeltaColumn(e){var t=e.rowData,n=e.onHoverSignal,a=e.preferences,i=e.onEditStart,r=e.editStatus,o=useDispatch(),c=t.tableMetaInfo.signal,l=useFormat(a),s=Object(D.useCallback)((function(e){o({type:Un,payload:{value:e.target.value,rangeID:t.id,signalID:c.id}})}),[o,t,c.id]),u=Object(D.useCallback)((function(){i(c.id)}),[i,c.id]);return c?Object(N.jsx)("td",Object(v.a)(Object(v.a)({},n),{},{children:checkMultiplicity(c.multiplicity,["m"])?Object(N.jsx)(Xu,{onEditStart:u,value:c.delta.toFixed(3),onSave:s,type:"number",style:{padding:"0.1rem 0.4rem"},editStatus:r}):"".concat(l(t.from,"fromFormat")," - ").concat(l(t.to,"toFormat"))})):Object(N.jsx)("td",{children:""})},wf=Object(y.css)(Cf||(Cf=Object(x.a)(["\n  background-color: #ff6f0057;\n"]))),Tf=Object(y.css)(Df||(Df=Object(x.a)(["\n  background-color: #f5f5dc;\n"])));var Mf=function RangesTableRow(e){var t=e.rowData,n=e.onUnlink,a=e.onContextMenu,i=e.onColumnEditStart,r=e.preferences,o=e.editFlags,c=o.relativeFlags,l=o.signalFlags,s=useAssignment(t.id),u=Object(vi.c)([s.id].concat(s.assigned.x||[])),d=useAssignment(t.tableMetaInfo.id),b=Object(vi.c)([d.id].concat(d.assigned.x||[])),f=Object(vi.d)(),p=Object(D.useState)(!1),h=Object(O.a)(p,2),g=h[0],m=h[1],j=Object(D.useState)(!1),x=Object(O.a)(j,2),y=x[0],k=x[1],S=useFormat(r),w=Object(D.useMemo)((function(){return{rowSpan:t.tableMetaInfo.rowSpan,style:C()(t.tableMetaInfo,"hide",!1)?{display:"none"}:null}}),[t.tableMetaInfo]),T=Object(D.useCallback)((function(e,a){e&&e.stopPropagation(),void 0!==a?a?(n(t),m(!1),s.removeAll("x")):(n(t,C()(t,"tableMetaInfo.signalIndex",void 0)),k(!1),d.removeAll("x")):(m(!1),k(!1))}),[s,d,n,t]),M=Object(D.useCallback)((function(e,t){e.stopPropagation(),t.onClick("x")}),[]),A=Object(D.useMemo)((function(){return{onMouseEnter:function onMouseEnter(){s.onMouseEnter("x"),u.show()},onMouseLeave:function onMouseLeave(){s.onMouseLeave("x"),u.hide()}}}),[s,u]),E=Object(D.useMemo)((function(){return{onMouseEnter:function onMouseEnter(){d.onMouseEnter("x"),b.show()},onMouseLeave:function onMouseLeave(){d.onMouseLeave("x"),b.hide()}}}),[d,b]),P=Object(D.useMemo)((function(){return u.isActive||s.isActive?wf:C()(t,"tableMetaInfo.isConstantlyHighlighted",!1)?Tf:null}),[s.isActive,u.isActive,t]);return Object(Ce.c)("tr",Object(v.a)(Object(v.a)({onContextMenu:function onContextMenu(e){return a(e,t)},css:P},u.onHover),{},{children:[Object(Ce.b)("td",Object(v.a)(Object(v.a)(Object(v.a)({},w),A),{},{children:t.tableMetaInfo.rowIndex+1})),isColumnVisible(r,"showFrom")&&Object(Ce.b)(xf,{value:t.from,rowSpanTags:w,onHoverRange:A,format:S("showFrom")}),isColumnVisible(r,"showTo")&&Object(Ce.b)(xf,{value:t.to,rowSpanTags:w,onHoverRange:A,format:S("toFormat")}),Object(Ce.b)(Sf,{rowData:t,onHoverSignal:E,preferences:r,onEditStart:function onEditStart(e){return i("signal","".concat(e))},editStatus:l[t.tableMetaInfo.signal.id]}),isColumnVisible(r,"showRelative")&&Object(Ce.b)(yf,{rowData:t,rowSpanTags:w,onHoverRange:A,format:S("relativeFormat"),onEditStart:function onEditStart(){return i("relative",t.id)},editStatus:c[t.id]}),isColumnVisible(r,"showAbsolute")&&Object(Ce.b)(Vb,{value:t.absolute,rowSpanTags:w,onHoverRange:A,format:S("absoluteFormat")}),Object(Ce.b)("td",Object(v.a)(Object(v.a)({},E),{},{children:C()(t,"tableMetaInfo.signal.multiplicity","")})),Object(Ce.b)(jf,{rowData:t,onHoverSignal:E}),Object(Ce.b)(kf,{rowData:t,assignment:d,highlight:b,onHover:E,unlinkVisibility:y,onUnlinkVisibilityChange:function onUnlinkVisibilityChange(e){return k(e)},onLink:M,onUnlink:T}),Object(Ce.b)(Of,{rowData:t,assignment:s,highlight:u,onHover:A,unlinkVisibility:g,onUnlinkVisibilityChange:function onUnlinkVisibilityChange(e){return m(e)},onLink:M,onUnlink:T,rowSpanTags:w,highlightData:f}),Object(Ce.b)(mf,{rowData:t,onHoverSignal:E,onHoverRange:A,rowSpanTags:w})]}))};var Af,Ef=function useMapRanges(e){return Object(D.useMemo)((function(){var t=[];return e.forEach((function(e,n){1===e.signal.length?t.push(Object(v.a)(Object(v.a)({},e),{},{tableMetaInfo:Object(v.a)(Object(v.a)({},e.tableMetaInfo),{},{signal:e.signal[0],rowIndex:n,signalIndex:0,id:e.signal[0].id})})):e.signal.length>1&&e.signal.forEach((function(a,i){var r=!1,o=null;i<e.signal.length-1&&0===i?o=e.signal.length:r=!0,t.push(Object(v.a)(Object(v.a)({},e),{},{tableMetaInfo:Object(v.a)(Object(v.a)({},e.tableMetaInfo),{},{signal:a,rowSpan:o,hide:r,rowIndex:n,signalIndex:i,id:a.id})}))}))})),t}),[e])},Pf=Object(y.css)(Af||(Af=Object(x.a)(["\n  border-spacing: 0;\n  border: 1px solid #dedede;\n  width: 100%;\n  font-size: 12px;\n  // height: 100%;\n  .react-contextmenu-wrapper {\n    display: contents;\n  }\n  tr {\n    :last-child {\n      td {\n        border-bottom: 0;\n      }\n    }\n  }\n  th {\n    position: sticky;\n    top: 0;\n    background-color: white;\n    z-index: 1;\n  }\n  th,\n  td {\n    white-space: nowrap;\n    text-align: center;\n    margin: 0;\n    padding: 0.1rem 0.4rem;\n    border-bottom: 1px solid #dedede;\n    border-right: 1px solid #dedede;\n\n    :last-child {\n      border-right: 0;\n    }\n    button {\n      background-color: transparent;\n      border: none;\n    }\n  }\n"])));var If=function RangesTable(e){var t=e.tableData,n=e.onChangeKind,a=e.onDelete,i=e.onUnlink,r=e.onZoom,o=e.onEdit,c=e.context,l=e.activeTab,s=e.preferences,u=l&&l.replace(/[0-9]/g,""),d=Object(D.useRef)(),b=Ef(t),f=Hb("id",b),p=Object(O.a)(f,2),h=p[0],g=p[1],m=Hb("id",b),j=Object(O.a)(m,2),v=j[0],x=j[1],y=useGlobal().rootRef,k=function isVisible(e){return C()(s,e,!1)},S=Object(D.useCallback)((function(e,t){checkModifierKeyActivated(e)||(e.preventDefault(),d.current.handleContextMenu(e,t))}),[d]),w=Object(D.useCallback)((function(e,t){"relative"===e?g(t):"signal"===e&&x(t)}),[g,x]);return Object(D.useEffect)((function(){var e=function handleEditStart(){w("realtive",null),w("signal",null)};return y&&y.addEventListener("mousedown",e),function(){y&&y.removeEventListener("mousedown",e)}}),[w,y]),Object(Ce.c)(D.Fragment,{children:[Object(Ce.c)("table",{css:Pf,children:[Object(Ce.b)("thead",{children:Object(Ce.c)("tr",{children:[Object(Ce.b)("th",{children:"#"}),k("showFrom")?Object(Ce.b)("th",{children:"From"}):null,k("showTo")?Object(Ce.b)("th",{children:"To"}):null,Object(Ce.b)("th",{children:"\u03b4 (ppm)"}),k("showRelative")?Object(Ce.c)("th",{children:["Rel. ",u]}):null,k("showAbsolute")?Object(Ce.b)("th",{children:"Absolute"}):null,Object(Ce.b)("th",{children:"Mult."}),Object(Ce.b)("th",{children:"J (Hz)"}),Object(Ce.b)("th",{children:Object(Ce.b)(Ze.u,{style:{fontSize:10}})}),Object(Ce.b)("th",{children:"\u03a3"}),Object(Ce.b)("th",{children:"Kind"}),Object(Ce.b)("th",{children:""})]})}),Object(Ce.b)("tbody",{children:b&&b.map((function(e,t){return Object(Ce.b)(Mf,{rowData:b[t],onChangeKind:n,onDelete:a,onUnlink:i,onZoom:r,onEdit:o,onContextMenu:function onContextMenu(e,t){return S(e,t)},preferences:s,onColumnEditStart:w,editFlags:{relativeFlags:h,signalFlags:v}},"rangesTableRow".concat(t))}))})]}),Object(Ce.b)(Yu,{ref:d,context:c})]})},Ff={toolbar:{display:"flex",flexDirection:"row",borderBottom:"0.55px solid rgb(240, 240, 240)"},container:{flexDirection:"column",height:"100%",display:"flex"},sumButton:{borderRadius:"5px",marginTop:"3px",color:"white",backgroundColor:"#6d6d6d",border:"none",height:"16px",width:"18px",fontSize:"12px",padding:0},removeAssignmentsButton:{borderRadius:"5px",marginTop:"3px",marginLeft:"2px",border:"none",height:"16px",width:"18px",fontSize:"12px",padding:0},setShowMultiplicityTreesButton:{borderRadius:"5px",marginTop:"3px",marginLeft:"5px",color:"black",backgroundColor:"transparent",border:"none",height:"16px",width:"18px",fontSize:"12px",padding:0},button:{backgroundColor:"transparent",border:"none"}};function RangesTablePanel(e){var t=e.ranges,n=e.x,a=e.y,i=e.info,r=e.xDomain,o=e.preferences,c=e.activeTab,l=e.molecules,s=e.nucleus,u=Object(D.useState)(!1),d=Object(O.a)(u,2),b=d[0],f=d[1],p=useAssignmentData(),h=useDispatch(),g=Ec(),m=Object(D.useState)(!1),j=Object(O.a)(m,2),x=j[0],y=j[1],k=Object(D.useRef)(),S=Object(D.useMemo)((function(){var e=function isInView(e,t){var n=1e4;return e*=n,(t*=n)>=r[0]*n&&e<=r[1]*n||e<=r[0]*n&&t>=r[1]*n};return t.values?(b?function getFilteredRanges(t){return t.filter((function(t){return e(t.from,t.to)}))}(t.values):t.values).map((function(t){return Object(v.a)(Object(v.a)({},t),{},{tableMetaInfo:{isConstantlyHighlighted:e(t.from,t.to)}})})):[]}),[b,t.values,r]),w=Object(D.useCallback)((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;h({type:Gn,payload:{rangeData:e,assignmentData:p,signalIndex:t}})}),[p,h]),T=Object(D.useCallback)((function(e){if(n&&a){var t=e.from,i=e.to,r=Object(Xe.j)(n,{from:t,to:i}),o=r.fromIndex,c=r.toIndex,l=Object(v.a)({x:n.slice(o,c),y:a.slice(o,c)},e);Object(Rc.c)(JSON.stringify(l,void 0,2))?g.show("Data copied to clipboard"):g.error("copy to clipboard failed")}}),[n,a,g]),M=Object(D.useMemo)((function(){return C()(o,"formatting.panels.ranges.[".concat(c,"]"))||Si}),[c,o]),A=Object(D.useMemo)((function(){return[{label:"Copy to clipboard",onClick:T}]}),[T]),E=Object(D.useCallback)((function(){f(!b)}),[b]),P=Object(D.useCallback)((function(){y(!x)}),[x]),I=Object(D.useCallback)((function(){k.current.saveSetting(),y(!1)}),[]);return Object(N.jsx)(N.Fragment,{children:Object(N.jsxs)("div",{style:Ff.container,children:[!x&&Object(N.jsx)(Rb,{ranges:t,info:i,activeTab:c,molecules:l,onUnlink:w,onFilterActivated:E,onSettingClick:P,isFilterActive:b,filterCounter:S.length}),x&&Object(N.jsx)(zu,{onSave:I,onClose:P}),Object(N.jsx)("div",{style:{height:"100%",overflow:"hidden"},children:Object(N.jsxs)(Qs.a,{isFlipped:x,infinite:!0,containerStyle:{overflow:"hidden",height:"100%"},children:[Object(N.jsx)("div",{style:{overflow:"auto",height:"100%",display:"block"},children:S&&S.length>0?Object(N.jsx)(If,{activeTab:c,tableData:S,onUnlink:w,context:A,preferences:M}):Object(N.jsx)(Wu,{})}),Object(N.jsx)(Lb,{ranges:t,ref:k,nucleus:s,preferences:o})]})})]})})}var _f=lr(Object(D.memo)(RangesTablePanel));var Rf=function SpectraWraper(e){var t=function Wrapper(t){var n=useChartData(),a=n.data,i=n.activeSpectrum,r=n.activeTab,o=n.displayerMode,c=t.forwardedRef,l=Object(ge.a)(t,["forwardedRef"]);return Object(N.jsx)(e,Object(v.a)(Object(v.a)({},l),{},{data:a,activeSpectrum:i,activeTab:r,displayerMode:o,ref:c}))};return Object(D.forwardRef)((function(e,n){return Object(N.jsx)(t,Object(v.a)(Object(v.a)({},e),{},{forwardedRef:n}))}))};function SpectraPanelHeader(e){var t=e.data,n=e.activeSpectrum,a=e.activeTab,i=e.displayerMode,r=e.spectrums,o=oe(),c=Ec(),l=useDispatch(),s=Object(D.useCallback)((function(){o.showConfirmDialog({message:"All records will be deleted, Are You sure?",buttons:[{text:"Yes",handler:function handler(){l({type:an})}},{text:"No"}]})}),[l,o]),u=Object(D.useCallback)((function(){var e=r.map((function(e){return e.id}));l({type:Xt,id:e})}),[l,r]),d=Object(D.useCallback)((function(){l({type:Xt,id:[]})}),[l]),b=Object(D.useCallback)((function(){var e=function getMissingProjection(e){var t=a.split(",");t=t[0]===t[1]?[t[0]]:t;var n,i=[],r=Object(rc.a)(t);try{var o=function _loop(){var t=n.value;e.some((function(e){return e.info.nucleus===t}))||i.push(t)};for(r.s();!(n=r.n()).done;)o()}catch(c){r.e(c)}finally{r.f()}return i}(t);e.length>0?l({type:Vn,nucleus:e}):c.error("Nothing to calculate")}),[a,c,t,l]),f=Object(D.useCallback)((function(){l({type:sa})}),[l]),p=Object(D.useCallback)((function(){l({type:ua})}),[l]);return Object(N.jsxs)(Fu,{onDelete:s,counter:r&&r.length,deleteToolTip:"Delete all spectra",children:[Object(N.jsx)(dd,{popupTitle:"Hide all spectra",onClick:d,children:Object(N.jsx)(Ze.m,{})}),Object(N.jsx)(dd,{popupTitle:"Show all spectra",onClick:u,children:Object(N.jsx)(Ze.l,{})}),n&&a&&a.split(",").length>1&&Object(N.jsx)(dd,{popupTitle:"Add missing projection",onClick:b,children:Object(N.jsx)(Ze.f,{})}),i===Oo.DM_1D&&Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(dd,{popupTitle:"Reset Scale",onClick:p,children:Object(N.jsx)(Js.t,{})}),Object(N.jsx)(dd,{popupTitle:"Same Top",onClick:f,children:Object(N.jsx)(Js.u,{})})]})]})}var Nf=Rf(Object(D.memo)(SpectraPanelHeader));function getNucleusSum(e){var t=e.split(",");return t.reduce((function(e,n){var a=2===t.length?100:0;return e+=Number(n.replace(/\D/g,""))+a}),0)}var Lf=function GroupByInfoKey(e){return function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=t.reduce((function(t,n){var a=n.info[e];return t[a]=(t[a]||[]).concat(n),t}),{});return n?Object.keys(a).sort((function(e,t){return getNucleusSum(e)-getNucleusSum(t)})).reduce((function(e,t){return e[t]=a[t],e}),{}):a}};function ColorIndicator1D(e){var t=e.color,n=e.activated;return Object(N.jsx)("div",{style:{backgroundColor:t,height:"12px",width:"12px",opacity:n?1:.1,display:"inline-block"}})}function ColorIndicator2D(e){var t=e.positiveColor,n=e.negativeColor,a=e.activated;return Object(N.jsx)("svg",{width:"12",height:"12",viewBox:"0 0 12 12",opacity:a?1:.1,children:Object(N.jsxs)("g",{children:[Object(N.jsx)("path",{d:"M0,0H12L0,12Z",fill:t,strokeWidth:"0"}),Object(N.jsx)("path",{d:"M12,12H0L12,0Z",fill:n,strokeWidth:"0"})]})})}function ColorIndicator(e){var t=e.dimension,n=e.color,a=e.activated,i=e.onClick,r=e.style;return Object(N.jsx)("button",{style:r,type:"button",onClick:i,children:2===t?Object(N.jsx)(ColorIndicator2D,Object(v.a)(Object(v.a)({},n),{},{activated:a})):Object(N.jsx)(ColorIndicator1D,Object(v.a)({activated:a},n))})}var zf=Object(D.memo)(ColorIndicator);var Hf=function ShowHideMarkersButton(e){var t=e.data,n=e.onChangeMarkersVisibility,a=e.markersVisible,i=e.style;return Object(N.jsx)("button",{style:Object(v.a)(Object(v.a)({},i),{},{opacity:function isMarkerVisible(e){return-1!==a.findIndex((function(t){return t.id===e}))}(t.id)&&t.peaks&&t.peaks.values.length>0?1:.1}),type:"button",onClick:function onClick(){return n(t)},disabled:t.peaks&&0===t.peaks.values.length,children:Object(N.jsx)(Js.p,{})})};var Bf=function ShowHideSpectrumButton(e){var t=e.data,n=e.onChangeVisibility,a=e.style,i=function isVisible(e,n){return!t||t.display[n]};return Object(N.jsxs)(N.Fragment,{children:[1===t.info.dimension&&Object(N.jsx)("button",{style:a,type:"button",onClick:function onClick(){return n(t,"isVisible")},children:Object(N.jsx)(Ze.l,{style:Object(v.a)({fill:t.display.color},i(t.id,"isVisible")?{opacity:1,strokeWidth:"1px",fill:t.display.color}:{opacity:.1,fill:t.display.color})})}),2===t.info.dimension&&Object(N.jsxs)("div",{style:{minWidth:"40px"},children:[Object(N.jsx)("button",{style:Object(v.a)(Object(v.a)({},a),{},{width:"20px",minWidth:"20px"}),type:"button",onClick:function onClick(){return n(t,"isPositiveVisible")},children:Object(N.jsx)(Ze.l,{style:Object(v.a)({fill:t.display.positiveColor},i(t.id,"isPositiveVisible")?{opacity:1,strokeWidth:"1px",fill:t.display.positiveColor}:{opacity:.1,fill:t.display.positiveColor})})}),Object(N.jsx)("button",{style:Object(v.a)(Object(v.a)({},a),{},{width:"20px",minWidth:"20px"}),type:"button",onClick:function onClick(){return n(t,"isNegativeVisible")},children:Object(N.jsx)(Ze.l,{style:Object(v.a)({fill:t.display.negativeColor},i(t.id,"isNegativeVisible")?{opacity:1,strokeWidth:"1px",fill:t.display.negativeColor}:{opacity:.1,fill:t.display.negativeColor})})})]})]})},Xf={button:{backgroundColor:"transparent",border:"none",width:"26px",minWidth:"26px"},row:{display:"flex",alignContent:"center",height:"25px",borderBottom:"0.55px solid #f1f1f1"},name:{flex:1,height:"100%",display:"flex"},info:{flex:"1 1 1px",height:"100%",display:"block",alignItems:"center",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",lineHeight:"24px"},icon:{display:"flex",margin:"auto",justifyContent:"center"}};function SpectrumListItem(e){var t=e.activeSpectrum,n=e.markersVisible,a=e.data,i=e.onChangeVisibility,r=e.onChangeMarkersVisibility,o=e.onChangeActiveSpectrum,c=e.onOpenSettingModal,l=e.onContextMenu,s=t&&t.id===a.id,u=a.display,d=u.color,b=u.name,f=u.positiveColor,p=u.negativeColor;return Object(N.jsxs)("div",{style:Object(v.a)(Object(v.a)({},Xf.row),s?{backgroundColor:"#fafafa"}:{opacity:t?.2:1}),onContextMenu:l,children:[Object(N.jsx)(Bf,{data:a,onChangeVisibility:i,style:Xf.button}),Object(N.jsxs)("div",{style:Xf.name,onClick:function onClick(){return o(a)},children:[Object(N.jsx)("div",{style:Object(v.a)(Object(v.a)({},Xf.icon),{},{width:"16px"}),children:a.info.isFid?Object(N.jsx)(Js.g,{}):2===a.info.dimension?Object(N.jsx)(Js.a,{}):Object(N.jsx)(Js.i,{})}),Object(N.jsx)("span",{style:Xf.info,children:b}),Object(N.jsx)("div",{style:Xf.info,dangerouslySetInnerHTML:{__html:a.info&&function formatValueAsHTML(e){return e&&(e=e.replace(/([0-9]+)/g,"<sub>$1</sub>")),e}(a.info.solvent)}}),Object(N.jsxs)("span",{style:Xf.info,children:[Object(N.jsx)("span",{style:{borderLeft:"0.55px solid #e5e5e5",paddingRight:"5px"}}),a.info&&a.info.experiment]}),Object(N.jsx)("span",{style:Xf.info,children:a.info&&a.info.pulse})]}),Object(N.jsx)(Hf,{data:a,style:Object(v.a)(Object(v.a)({},Xf.icon),Xf.button),onChangeMarkersVisibility:r,markersVisible:n}),Object(N.jsx)(zf,{style:Xf.button,dimension:a.info.dimension,color:{positiveColor:f,color:d,negativeColor:p},activated:s,onClick:function onClick(e){return c(a,e)}})]})}SpectrumListItem.defaultProps={onContextMenu:function onContextMenu(){return null}};var Vf=Object(D.memo)(SpectrumListItem);function FormikColorPicker(e){var t=e.onColorChange,n=e.name,a=Object(ge.a)(e,["onColorChange","name"]),i=Object(sl.f)(),r=i.values,o=i.setFieldValue,c=Object(D.useCallback)((function(e){t(e),o(n,"".concat(e.hex).concat(Math.round(255*e.rgb.a).toString(16)))}),[n,t,o]);return Object(N.jsx)($u.SketchPicker,Object(v.a)({color:{hex:C()(r,n,"#000")},presetColors:oc,onChangeComplete:function onChangeComplete(e){return c(e)}},a))}FormikColorPicker.defaultProps={onColorChange:function onColorChange(){return null}};var Yf=Object(D.memo)(FormikColorPicker),Zf=n(426),Uf=Object(D.memo)((function(e){var t=e.color,n=void 0===t?"red":t,a=e.data,i=Object(D.useMemo)((function(){var e=function prepareData(e){e=Object(Xe.g)(e);var t=Object(Xe.l)(e),n=t.min,a=t.max;n<1&&a>1e6&&(n=1);for(var i=0;i<e.length;i++)e[i]+=n;return e}(a.re),t=Object(Xe.k)(e,{logBaseX:10,logBaseY:2,nbSlots:100});return t.x.reduce((function(e,n,a){return e.push({x:n,y:t.y[a]}),e}),[])}),[a.re]);return Object(N.jsx)("div",{style:{borderTop:"1px solid #ededed",marginTop:"10px",paddingTop:"10px"},children:Object(N.jsxs)(Zf.e,{width:220,height:200,margin:{bottom:50,left:10,top:30,right:10},children:[Object(N.jsx)(Zf.d,{title:"Histogram"}),Object(N.jsx)(Zf.c,{data:i,xAxis:"x",yAxis:"y",lineStyle:{stroke:n},markerStyle:{fill:n,stroke:n}}),Object(N.jsx)(Zf.b,{id:"x",position:"bottom",displayGridLines:!0,tickStyle:{fontSize:"0.7rem"}}),Object(N.jsx)(Zf.b,{id:"y",position:"left",displayGridLines:!0,hidden:!0})]})})}));var Kf=function Spectrum1DSetting(e){var t=e.data,n=e.onSubmit,a=Object(D.useRef)(),i=Object(D.useCallback)((function(){a.current&&a.current.submitForm()}),[]);return Object(N.jsx)(dl,{ref:a,initialValues:t.display,onSubmit:n,children:Object(N.jsxs)("div",{children:[Object(N.jsx)(Yf,{name:"color",onColorChange:i}),Object(N.jsx)(Uf,{color:"red",data:t.data})]})})},Wf=n(740);function FormikSlider(e){var t=e.onAfterChange,n=e.name,a=Object(ge.a)(e,["onAfterChange","name"]),i=Object(sl.f)(),r=i.values,o=i.setFieldValue,c=Object(D.useCallback)((function(e){t(e),o(n,e)}),[n,t,o]);return Object(N.jsx)(Wf.a,Object(v.a)({className:"horizontal-slider",thumbClassName:"thumb",trackClassName:"track",defaultValue:C()(r,n,[0,100]),onAfterChange:c,renderThumb:function renderThumb(e,t){return Object(N.jsx)("div",Object(v.a)(Object(v.a)({},e),{},{children:Object(N.jsx)("span",{children:t.valueNow})}))},pearling:!0,minDistance:10},a))}FormikSlider.defaultProps={onColorChange:function onColorChange(){return null}};var Gf,qf=Object(D.memo)(FormikSlider),Jf=Object(D.memo)((function(e){var t=e.color,n=void 0===t?"red":t,a=e.data,i=Object(D.useMemo)((function(){var e=function Spectrum2DHistogram_prepareData(e){var t,n=[],a=Object(rc.a)(e);try{for(a.s();!(t=a.n()).done;){var i=t.value;n.push(Object(Xe.g)(i))}}catch(b){a.e(b)}finally{a.f()}var r=Object(Xe.b)(n),o=r.min,c=r.max;o<1&&c>1e6&&(o=1);for(var l=0,s=n;l<s.length;l++)for(var u=s[l],d=0;d<u.length;d++)u[d]+=o;return n}(a.z),t=Object(Xe.a)(e,{logBaseX:10,logBaseY:2,nbSlots:256});return t.x.reduce((function(e,n,a){return e.push({x:n,y:t.y[a]}),e}),[])}),[a.z]);return Object(N.jsx)("div",{style:{borderTop:"1px solid #ededed",marginTop:"10px",paddingTop:"10px"},children:Object(N.jsxs)(Zf.e,{width:450,height:200,margin:{bottom:50,left:10,top:30,right:10},children:[Object(N.jsx)(Zf.d,{title:"Histogram"}),Object(N.jsx)(Zf.c,{data:i,xAxis:"x",yAxis:"y",lineStyle:{stroke:n},markerStyle:{fill:n,stroke:n}}),Object(N.jsx)(Zf.b,{id:"x",position:"bottom",displayGridLines:!0,tickStyle:{fontSize:"0.7rem"}}),Object(N.jsx)(Zf.b,{id:"y",position:"left",displayGridLines:!0,hidden:!0})]})})}));var $f,Qf=function Spectrum2DSetting(e){var t=e.data,n=e.onSubmit,a=Object(D.useRef)(),i=Object(y.css)(Gf||(Gf=Object(x.a)(["\n    .positive {\n      display: inline-block;\n      .track-1 {\n        background-color: "," !important;\n      }\n    }\n    .negative {\n      display: inline-block;\n\n      .track-1 {\n        background-color: "," !important;\n      }\n    }\n  "])),t.display.positiveColor,t.display.negativeColor),r=Object(D.useCallback)((function(){a.current.submitForm()}),[]);return Object(Ce.b)(dl,{ref:a,initialValues:t.display,onSubmit:n,children:Object(Ce.c)("div",{css:i,children:[Object(Ce.c)("div",{className:"positive",children:[Object(Ce.b)("span",{style:{padding:"0 10px"},children:"Positive"}),Object(Ce.b)(Yf,{name:"positiveColor",onColorChange:r}),Object(Ce.c)("div",{style:{padding:"5px"},children:[Object(Ce.b)("span",{className:"label",children:"contour Levels [ min - max ]"}),Object(Ce.b)(qf,{name:"contourOptions.positive.contourLevels",onAfterChange:r}),Object(Ce.b)("span",{className:"label",children:"number of Layers "}),Object(Ce.b)(El,{name:"contourOptions.positive.numberOfLayers",onChange:r,type:"number"})]})]}),Object(Ce.c)("div",{className:"negative",children:[Object(Ce.b)("span",{style:{padding:"0 10px"},children:"Negative"}),Object(Ce.b)(Yf,{name:"negativeColor",onColorChange:r}),Object(Ce.c)("div",{style:{padding:"5px"},children:[Object(Ce.b)("span",{className:"label",children:"contour Levels [ min - max ]"}),Object(Ce.b)(qf,{name:"contourOptions.negative.contourLevels",onAfterChange:r}),Object(Ce.b)("span",{className:"label",children:"number of Layers "}),Object(Ce.b)(El,{name:"contourOptions.negative.numberOfLayers",onChange:r,type:"number"})]})]}),Object(Ce.b)(Jf,{data:t.data})]})})},ep=Object(y.css)($f||($f=Object(x.a)(["\n  position: fixed;\n  z-index: 999999999;\n  width:100%;\n  height:100%;\n  left:0;\n  top:0;\n  .ineer-conatiner{\n    position:absolute;\n    display: flex;\n    flex-direction: row-reverse;\n    border-radius: 4px;\n    background-color: white;\n    box-shadow: rgba(0, 0, 0, 0.15) 0px 0px 0px 1px,\n      rgba(0, 0, 0, 0.15) 0px 8px 16px;\n      overflow: auto;\n      height: 350px;\n  }\n\n\n  .sketch-picker {\n    border-radius: none !important;\n    box-shadow: none !important;\n  }\n\n\n  .horizontal-slider {\n    width: 80%;\n    height: 15px;\n  }\n\n  .thumb {\n    height: 15px;\n    line-height: 15px;\n    width: 20px;\n    text-align: center;\n    color: black;\n    border-radius: 5px;\n    cursor: grab;\n    font-size: 10px;\n    background-image: -webkit-linear-gradient(top, #f4f1ee, #fff);\n    background-image: linear-gradient(top, #f4f1ee, #fff);\n  }\n\n  .track {\n    top: 0;\n    bottom: 0;\n    background: #eaeaea;\n    border-radius: 999px;\n    border-radius: 5px;\n  }\n\n  .track-1 {\n    background: red;\n  }\n   \n  .label{\n    font-size: 12px;\n    margin: 8px 0;\n    display: block;\n  }\n \n  }\n"])));function SpectrumSetting(e){var t=e.position,n=e.data,a=e.onClose,i=useDispatch(),r=n.id,o=n.info,c=Object(D.useCallback)((function(e){i({type:Ht,id:r,display:e})}),[i,r]),l=Object(D.useCallback)((function(e){e.target===e.currentTarget&&a()}),[a]),s=t.x,u=t.y;return Object(Ce.b)("div",{css:ep,onClick:l,children:Object(Ce.b)("div",{className:"ineer-conatiner",style:{left:2===o.dimension?s-450:s-220,padding:2===o.dimension?"10px 0":"",top:u},children:2===o.dimension?Object(Ce.b)(Qf,{onSubmit:c,data:n}):Object(Ce.b)(Kf,{onSubmit:c,data:n})})})}function arePropsEqual(){return!0}var tp=Object(D.memo)(SpectrumSetting,arePropsEqual);var np=Rf((function SpectrumsTabs(e){var t=e.data,n=e.activeSpectrum,a=e.activeTab,i=e.onTabChange,r=Object(D.useRef)(),o=Object(D.useState)([]),c=Object(O.a)(o,2),l=c[0],s=c[1],u=Object(D.useState)(null),d=Object(O.a)(u,2),b=d[0],f=d[1],p=Object(D.useState)(null),h=Object(O.a)(p,2),g=h[0],m=h[1],j=Object(D.useState)(!1),v=Object(O.a)(j,2),x=v[0],y=v[1],k=Ec(),C=useDispatch();Object(D.useEffect)((function(){if(t){var e=t?t.filter((function(e){return!0===e.display.isPeaksMarkersVisible})):[];s(e)}}),[t,C]);var S=Object(D.useMemo)((function(){return t?Lf("nucleus")(t,!0):[]}),[t]);Object(D.useEffect)((function(){i({tab:a,data:S[a]})}),[a,i,S]);var w=Object(D.useCallback)((function(e){var t=l.findIndex((function(t){return t.id===e.id})),n=Object(Hi.a)(l);-1===t?n.push({id:e.id}):n.splice(t,1),C({type:Vt,data:n}),s(n)}),[C,l]),T=Object(D.useCallback)((function(e){i({tab:e.tabid,data:S[e.tabid]}),C({type:An,tab:e.tabid})}),[C,i,S]),M=Object(D.useMemo)((function(){return[{label:"Copy to Clipboard",onClick:function onClick(e){var t=e.x,n=e.y,a=e.info;Object(Rc.c)(JSON.stringify({x:t,y:n,info:a},void 0,2))?k.success("Data copied to clipboard"):k.error("Copy to clipboard failed")}},{label:"Delete",onClick:function onClick(e){setTimeout((function(){C({type:an,id:e.id})}),0)}}]}),[k,C]),A=Object(D.useCallback)((function(e,t){checkModifierKeyActivated(e)||(e.preventDefault(),r.current.handleContextMenu(e,t))}),[r]),E=Object(D.useCallback)((function(e,t){m({x:t.nativeEvent.clientX,y:t.nativeEvent.clientY}),f(e),y(!0)}),[]),P=Object(D.useCallback)((function(e,t){C({type:Xt,id:e.id,key:t,value:!e.display[t]})}),[C]),I=Object(D.useCallback)((function(e){setTimeout((function(){n&&n.id===e.id?C({type:Yt,data:null}):C({type:Yt,data:{id:e.id}})}),0)}),[n,C]),F=Object(D.useCallback)((function(){y(!1)}),[]);return Object(N.jsxs)(D.Fragment,{children:[Object(N.jsx)(ll,{defaultTabID:a,onClick:T,children:S&&Object.keys(S).map((function(e){return Object(N.jsx)("div",{tablabel:e,tabid:e,style:{overflow:"auto",height:"100%"},children:S[e]&&S[e].map((function(e){return Object(N.jsx)(Vf,{activeSpectrum:n,markersVisible:l,data:e,onChangeVisibility:P,onChangeMarkersVisibility:w,onChangeActiveSpectrum:I,onOpenSettingModal:E,onContextMenu:function onContextMenu(t){return A(t,e)}},e.id)}))},e)}))}),Object(N.jsx)(Yu,{ref:r,context:M}),x?Object(N.jsx)(tp,{onClose:F,data:b,position:g}):null]})})),ap={overflow:"hidden",height:"100%",display:"flex",flexDirection:"column"};function SpectrumListPanel(e){var t=e.data,n=e.activeSpectrum,a=e.activeTab,i=Object(D.useState)([]),r=Object(O.a)(i,2),o=r[0],c=r[1],l=Object(D.useCallback)((function(e){c(e.data?e.data:[])}),[]);return Object(N.jsxs)("div",{style:ap,children:[Object(N.jsx)(Nf,{spectrums:o}),Object(N.jsx)(np,{onTabChange:l,data:t,activeSpectrum:n,activeTab:a})]})}var ip,rp=Object(D.memo)(SpectrumListPanel);function SelectUncontrolled(e){var t=e.data,n=e.style,a=e.onChange,i=e.value,r=Object(D.useCallback)((function(e){a(e.target.value)}),[a]),o=Object(y.css)(ip||(ip=Object(x.a)(["\n    position: relative;\n    padding: 0px 5px;\n    border: 0.55px solid #cacaca;\n    font-size: 14px;\n    width: ","px;\n    margin: 0;\n    height: 100%;\n    background: "," no-repeat right white;\n    -webkit-appearance: none;\n    background-position-x: ","px;\n    background-size: 15px 15px;\n    border-radius: 5px;\n    margin: 0px 5px;\n    :focus,\n    input:focus {\n      outline: none;\n    }\n  "])),n.width?n.width-5:95,'url(\'data:image/svg+xml;utf8,<svg  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="960px" height="560px" viewBox="0 0 960 560" enable-background="new 0 0 960 560" xml:space="preserve"><g id="Rounded_Rectangle_33_copy_4_1_"><path d="M480,344.181L268.869,131.889c-15.756-15.859-41.3-15.859-57.054,0c-15.754,15.857-15.754,41.57,0,57.431l237.632,238.937c8.395,8.451,19.562,12.254,30.553,11.698c10.993,0.556,22.159-3.247,30.555-11.698l237.631-238.937c15.756-15.86,15.756-41.571,0-57.431s-41.299-15.859-57.051,0L480,344.181z"/></g></svg>\')',n.width?n.width-18:77);return Object(Ce.b)("select",{css:[o,n],onChange:r,value:i,children:t.map((function(e){return Object(Ce.b)("option",{value:e.value,children:e.label},"".concat(e.key))}))})}SelectUncontrolled.defaultProps={onChange:function onChange(){return null}};var op=SelectUncontrolled,cp=[{key:"outOfLimit",color:"red"},{key:"ambiguousAttachment",color:"orange"},{key:"notAttached",color:"blue"},{key:"incomplete",color:"red"}],lp=cp.map((function(e){return e.key})),sp=[{key:"-",label:"",value:""},{key:"sp",label:"sp",value:"SP"},{key:"sp2",label:"sp2",value:"SP2"},{key:"sp3",label:"sp3",value:"SP3"}],up={C:.25,H:.02,N:.25,F:.25,Si:.25,P:.25};function getLabelColor(e,t){var n=C()(e,"state.".concat(t.atomType,".error"),null);if(n)for(var a in lp)if("incomplete"!==cp[a].key&&("notAttached"===cp[a].key||"ambiguousAttachment"===cp[a].key)&&C()(n,"".concat(cp[a].key),[]).some((function(n){return e.values[n].id===t.id})))return cp[a].color;return null}function findSpectrum(e,t){return e.filter((function(e){return e.id===t.experimentID&&!0===e.display.isVisible}))[0]}function findSignal(e,t){for(var n=0;n<e.zones.values.length;n++){var a=e.zones.values[n].signal.findIndex((function(e){return e.id===t.signal.id}));if(a>=0)return e.zones.values[n].signal[a]}}var dp=function findRangeOrZoneID(e,t){var n=findSpectrum(e,t);if(n)if(1===n.info.dimension){var a=function findRange(e,t){for(var n=0;n<e.ranges.values.length;n++)if(e.ranges.values[n].signal.findIndex((function(e){return e.id===t.signal.id}))>=0)return e.ranges.values[n]}(n,t);if(a)return a.id}else if(2===n.info.dimension){var i=function findZone(e,t){for(var n=0;n<e.zones.values.length;n++)if(e.zones.values[n].signal.findIndex((function(e){return e.id===t.signal.id}))>=0)return e.zones.values[n]}(n,t);if(i)return i.id}};function findSignalMatch2D(e,t,n,a,i,r,o){if(e&&2===e.info.dimension){var c=findSignal(e,t);if(c)return c.x.delta*n>=a&&c.x.delta*n<=i&&c.y.delta*n>=r&&c.y.delta*n<=o}return!1}var bp=function AdditionalColumnHeader(e){var t=e.spectraData,n=e.correlationsData,a=e.correlation,i=Object(D.useMemo)((function(){if(!0===a.pseudo)return[];var e=[a.signal.id,Ho(a.signal.id,"Crosshair_X")],n=dp(t,a);return n&&e.push(n),a.link.forEach((function(n){if(!1===n.pseudo){e.push(n.signal.id),e.push(Ho(n.signal.id,"Crosshair_X"));var a=dp(t,n);a&&e.push(a)}})),e}),[a,t]),r=Object(vi.c)(i),o=Object(D.useCallback)((function(e){e.currentTarget.focus(),r.show()}),[r]),c=Object(D.useCallback)((function(e){e.currentTarget.blur(),r.hide()}),[r]),l=Object(D.useMemo)((function(){return{style:Object(v.a)(Object(v.a)({},{color:getLabelColor(n,a)}),{},{backgroundColor:r.isActive?"#ff6f0057":"inherit"}),title:!1===a.pseudo&&[a.experimentType.toUpperCase()].concat(a.link.reduce((function(e,t){return!1!==t.pseudo||t.experimentType===a.experimentType||e.includes(t.experimentType.toUpperCase())||e.push(t.experimentType.toUpperCase()),e}),[])).sort().join("/"),onMouseEnter:o,onMouseLeave:c}}),[a,n,r.isActive,o,c]),s=Object(D.useMemo)((function(){return a.edited.equivalence?{backgroundColor:"#F7F2E0"}:{color:Number.isInteger(a.equivalence)?1===a.equivalence?"#bebebe":"black":"red"}}),[a]);return Object(Ce.b)("th",Object(v.a)(Object(v.a)({},l),{},{children:Object(Ce.c)("div",{style:{display:"block"},children:[Object(Ce.b)("p",{children:a.label.origin}),Object(Ce.b)("p",{children:a&&a.signal&&a.signal.delta?a.signal.delta.toFixed(2):""}),Object(Ce.b)("p",{style:s,children:Number.isInteger(a.equivalence)?a.equivalence:a.equivalence.toFixed(2)})]})}))},fp=n(221),pp=n(220),hp=n.n(pp);var gp=function AdditionalColumnField(e){var t=e.rowCorrelation,n=e.columnCorrelation,a=e.commonLinks,i=e.correlations,r=e.spectraData,o=e.onEdit,c=Object(D.useRef)(),l=Object(D.useState)(!1),s=Object(O.a)(l,2),u=s[0],d=s[1],b=Object(D.useMemo)((function(){var e=[];return a.forEach((function(t){if(!1===t.pseudo){e.push(t.signal.id),e.push(Ho(t.signal.id,"Crosshair"));var n=dp(r,t);n&&e.push(n)}})),e}),[a,r]),f=Object(vi.c)(b),p=Object(D.useCallback)((function(e){e.currentTarget.focus(),f.show()}),[f]),h=Object(D.useCallback)((function(e){e.currentTarget.blur(),f.hide()}),[f]);Object(D.useEffect)((function(){a.some((function(e){return!0===e.pseudo}))?d(!0):d(!1)}),[a]);var g=Object(D.useCallback)((function(e,t){e.preventDefault(),c.current.handleContextMenu(e,t)}),[c]),m=Object(D.useCallback)((function(e,a,r){var c=hp()(t),l=hp()(n),s=c.link.filter((function(e){return"hsqc"===e.experimentType||"hmqc"===e.experimentType})).length;if("add"===a){var u=generateID(),d=generateID(),b=fp.LinkUtilities.buildLink({experimentType:e,experimentID:d,atomType:[l.atomType,c.atomType],id:u,pseudo:!0,signal:{id:generateID(),sign:0}});fp.CorrelationUtilities.addLink(l,fp.LinkUtilities.buildLink(Object(v.a)(Object(v.a)({},b),{},{axis:"x",match:[fp.GeneralUtilities.getCorrelationIndex(i,c)]}))),fp.CorrelationUtilities.addLink(c,fp.LinkUtilities.buildLink(Object(v.a)(Object(v.a)({},b),{},{axis:"y",match:[fp.GeneralUtilities.getCorrelationIndex(i,l)]}))),c.edited.protonsCount||(c.protonsCount=[s+1])}else"remove"===a&&(fp.CorrelationUtilities.removeLink(c,r.id),fp.CorrelationUtilities.removeLink(l,r.id),c.edited.protonsCount||(c.protonsCount=s-1>0?[s-1]:[]));o(c,l)}),[t,o,n,i]),j=Object(D.useMemo)((function(){var e=a.find((function(e){return"hsqc"===e.experimentType&&!0===e.pseudo}));return!0===t.pseudo?e?[{label:"remove HSQC",onClick:function onClick(){m("hsqc","remove",e)}}]:[{label:"add HSQC",onClick:function onClick(){m("hsqc","add")}}]:[]}),[a,m,t]),x=Object(D.useMemo)((function(){var e=new Set;return a.forEach((function(t){"hsqc"===t.experimentType||"hmqc"===t.experimentType?e.add(t.signal&&0!==t.signal.sign?"S".concat(1===t.signal.sign?"+":"-"):"S"):"hmbc"===t.experimentType||"cosy"===t.experimentType||"tocsy"===t.experimentType?e.add("M"):"noesy"!==t.experimentType&&"roesy"!==t.experimentType||e.add("NOE")})),Object(Hi.a)(e)}),[a]),y=Object(D.useMemo)((function(){return a.reduce((function(e,t){return e.includes(t.experimentType.toUpperCase())||e.push(t.experimentType.toUpperCase()),e}),[]).sort().join("/")}),[a]);return Object(N.jsxs)("td",{onContextMenu:function onContextMenu(e){j.length>0&&g(e,t)},style:{backgroundColor:f.isActive?"#ff6f0057":u?"#F7F2E0":"inherit"},title:y,onMouseEnter:p,onMouseLeave:h,children:[x.join("/"),Object(N.jsx)(Yu,{ref:c,context:j})]})},mp={marginLeft:2,marginRight:2,border:"none",height:"20px"};var jp,vp=function CorrelationTableRow(e){var t=e.additionalColumnData,n=e.correlations,a=e.correlation,i=e.styleRow,r=e.styleLabel,o=e.onSaveEditEquivalences,c=e.onChangeHybridization,l=e.onSaveEditProtonsCount,s=e.onEditAdditionalColumnField,u=e.spectraData,d=Object(D.useMemo)((function(){if(!0===a.pseudo)return[];var e=[a.signal.id,Ho(a.signal.id,"Crosshair_Y")],t=dp(u,a);return t&&e.push(t),a.link.forEach((function(t){if(!1===t.pseudo){e.push(t.signal.id),e.push(Ho(t.signal.id,"Crosshair_Y"));var n=dp(u,t);n&&e.push(n)}})),e}),[a,u]),b=Object(vi.c)(d),f=Object(D.useCallback)((function(e){o(a,e.target.value)}),[a,o]),p=Object(D.useCallback)((function(e){l(a,e.target.value)}),[a,l]),h=Object(D.useMemo)((function(){return t.map((function(e){var t=[];return a.link.forEach((function(n){e.link.forEach((function(e){if(n.axis!==e.axis&&n.experimentID===e.experimentID&&n.signal.id===e.signal.id){var a=n.experimentType;n.signal&&0!==n.signal.sign&&(a+=" (edited)"),t.push(fp.LinkUtilities.buildLink(Object(v.a)(Object(v.a)({},n),{},{experimentLabel:a,axis:void 0})))}}))})),Object(N.jsx)(gp,{rowCorrelation:a,columnCorrelation:e,commonLinks:t,correlations:n,spectraData:u,onEdit:s},"addColData_".concat(a.id,"_").concat(e.id))}))}),[t,a,n,s,u]),g=Object(D.useCallback)((function(e){c(a,e)}),[a,c]),m=Object(D.useMemo)((function(){return a.edited.equivalence?{backgroundColor:"#F7F2E0"}:{color:1===a.equivalence?"#bebebe":"black"}}),[a]),j=Object(D.useCallback)((function(e){e.currentTarget.focus(),b.show()}),[b]),O=Object(D.useCallback)((function(e){e.currentTarget.blur(),b.hide()}),[b]),x=Object(D.useMemo)((function(){return{style:Object(v.a)(Object(v.a)({},i),{},{backgroundColor:b.isActive?"#ff6f0057":"inherit"}),title:!1===a.pseudo&&[a.experimentType.toUpperCase()].concat(a.link.reduce((function(e,t){return!1!==t.pseudo||t.experimentType===a.experimentType||e.includes(t.experimentType.toUpperCase())||e.push(t.experimentType.toUpperCase()),e}),[])).sort().join("/"),onMouseEnter:j,onMouseLeave:O}}),[a.experimentType,a.link,a.pseudo,b.isActive,j,O,i]);return Object(N.jsxs)("tr",{style:i,children:[Object(N.jsx)("td",Object(v.a)(Object(v.a)({},Object(v.a)(Object(v.a)({},x),{},{style:Object(v.a)(Object(v.a)({},x.style),{},{styleLabel:r})})),{},{children:fp.GeneralUtilities.getLabel(n,a)})),Object(N.jsx)("td",Object(v.a)(Object(v.a)({},x),{},{children:C()(a.signal,"delta",!1)?a.signal.delta.toFixed(2):""})),Object(N.jsx)("td",Object(v.a)(Object(v.a)({},x),{},{children:!1===a.pseudo?"H"!==a.atomType?Object(N.jsx)(Xu,{type:"number",value:a.equivalence,style:m,onSave:f}):Object(N.jsx)("text",{style:m,children:a.equivalence}):""})),Object(N.jsx)("td",Object(v.a)(Object(v.a)({},x),{},{children:"H"!==a.atomType?Object(N.jsx)(Xu,{type:"text",value:a.protonsCount.join(","),style:a.edited.protonsCount?{backgroundColor:"#F7F2E0"}:{},onSave:p}):""})),Object(N.jsx)("td",Object(v.a)(Object(v.a)({},Object(v.a)(Object(v.a)({},x),{},{style:Object(v.a)(Object(v.a)({},x.style),{},{borderRight:"1px solid"})})),{},{children:"H"!==a.atomType?Object(N.jsx)(op,{onChange:g,data:sp,value:a.hybridization,style:Object(v.a)(Object(v.a)({},mp),{},{backgroundColor:a.edited.hybridization?"#F7F2E0":i.backgroundColor,width:"50px"})}):""})),h]})},Op=Object(y.css)(jp||(jp=Object(x.a)(["\n  overflow: auto;\n  height: 100%;\n  display: block;\n  table {\n    border-spacing: 0;\n    border: 1px solid #dedede;\n    width: 100%;\n    font-size: 12px;\n    height: 100%;\n  }\n  .react-contextmenu-wrapper {\n    display: contents;\n  }\n  tr {\n    :last-child {\n      td {\n        border-bottom: 0;\n      }\n    }\n  }\n  thead tr {\n    background-color: white !important;\n  }\n  th {\n    position: sticky;\n    background-color: white;\n    z-index: 2;\n    top: 0;\n  }\n\n  th,\n  td {\n    white-space: nowrap;\n    text-align: center;\n    margin: 0;\n    padding: 0.4rem;\n    border-bottom: 1px solid #dedede;\n    border-right: 1px solid #dedede;\n\n    :last-child {\n      border-right: 0;\n    }\n    button {\n      background-color: transparent;\n      border: none;\n    }\n  }\n"])));var xp=function CorrelationTable(e){var t=e.correlationsData,n=e.filteredCorrelationsData,a=e.additionalColumnData,i=e.editEquivalencesSaveHandler,r=e.changeHybridizationSaveHandler,o=e.editProtonsCountSaveHandler,c=e.editAdditionalColumnFieldSaveHandler,l=e.showProtonsAsRows,s=e.spectraData,u=Object(D.useMemo)((function(){return n?n.values.filter((function(e){return l?"H"===e.atomType:"H"!==e.atomType})).map((function(e){return Object(Ce.b)(vp,{additionalColumnData:a,correlations:t.values,correlation:e,styleRow:{backgroundColor:"mintcream"},styleLabel:"H"===e.atomType?{color:getLabelColor(t,e)}:{},onSaveEditEquivalences:i,onChangeHybridization:r,onSaveEditProtonsCount:o,onEditAdditionalColumnField:c,spectraData:s},"correlation".concat(e.atomType).concat(e.id))})):[]}),[n,l,a,t,i,r,o,c,s]),d=Object(D.useMemo)((function(){return a.map((function(e){return Object(Ce.b)(bp,{spectraData:s,correlationsData:t,correlation:e},"additionalCorrelationHeader_".concat(e.id))}))}),[a,t,s]);return Object(Ce.b)("div",{css:Op,children:Object(Ce.c)("table",{children:[Object(Ce.b)("thead",{children:Object(Ce.c)("tr",{children:[Object(Ce.b)("th",{children:"Atom"}),Object(Ce.b)("th",{children:"\u03b4 (ppm)"}),Object(Ce.b)("th",{children:"Equiv"}),Object(Ce.b)("th",{children:"#H"}),Object(Ce.b)("th",{style:{borderRight:"1px solid"},children:"Hybrid"}),d]})}),Object(Ce.b)("tbody",{children:u})]})})};function Overview(e){var t=e.correlationsData;if(!t)return null;var n=fp.GeneralUtilities.getAtomCounts(t.options.mf);return Object.keys(n).length>0?Object.keys(n).map((function(e,a){var i=t.state[e],r=i?i.error:void 0,o=r?lp.findIndex((function(e){return void 0!==r[e]})):"black";return Object(N.jsx)("span",{style:{color:i?!0!==i.complete||r&&0!==Object.keys(r).length?o>=0?cp[o].color:"black":"green":"black"},children:"".concat(e,": ").concat(i?i.current:"-","/").concat(n[e],"   ")},"molFormulaView_".concat(a))})):Object(N.jsx)("p",{style:{fontStyle:"italic",color:"orange"},children:"Molecular formula is not set"})}var yp,kp=Object(D.memo)(Overview),Cp=n(415),Dp=Object(y.css)(yp||(yp=Object(x.a)(["\n  text-align: center;\n\n  input {\n    height: 100%;\n    width: 200px;\n    border-radius: 5px;\n    border: 0.55px solid #c7c7c7;\n    margin: 0px 5px 0px 5px;\n    text-align: center;\n  }\n\n  button {\n    flex: 2;\n    padding: 5px;\n    border: 1px solid gray;\n    border-radius: 5px;\n    height: 36px;\n    margin: 0 auto;\n    margin-top: 15px;\n    display: block;\n    width: 20%;\n\n    color: white;\n    background-color: gray;\n  }\n"])));function MolecularFormulaInput(e){var t=e.onSave,n=e.previousMF,a=Object(D.useState)(""),i=Object(O.a)(a,2),r=i[0],o=i[1],c=Object(D.useState)(!0),l=Object(O.a)(c,2),s=l[0],u=l[1],d=Object(D.useState)(!1),b=Object(O.a)(d,2),f=b[0],p=b[1],h=Object(D.useCallback)((function(e){try{return new Cp.MF(e),!0}catch(t){return!1}}),[]),g=Object(D.useCallback)((function(e){p(!0),h(e.target.value)?(u(!0),o(e.target.value)):(u(!1),o(""))}),[h]),m=Object(D.useCallback)((function(){t(f?r.trim():n)}),[f,r,t,n]);return Object(Ce.c)("div",{css:Dp,children:[Object(Ce.b)("input",{type:"text",onChange:g,defaultValue:n}),Object(Ce.b)("button",{type:"button",onClick:m,disabled:!s,children:"Set"})]})}MolecularFormulaInput.defaultProps={onSave:function onSave(){return null}};var Sp,wp=MolecularFormulaInput,Tp=Object(y.css)(Sp||(Sp=Object(x.a)(["\n  overflow: auto;\n  width: 400px;\n  height: 550px;\n  padding: 5px;\n  button:focus {\n    outline: none;\n  }\n  .header {\n    height: 24px;\n    border-bottom: 1px solid #f0f0f0;\n    display: flex;\n    align-items: center;\n\n    button {\n      height: 36px;\n      margin: 2px;\n      background-color: transparent;\n      border: none;\n      svg {\n        height: 16px;\n      }\n    }\n  }\n\n  button {\n    flex: 2;\n    padding: 5px;\n    border: 1px solid gray;\n    border-radius: 5px;\n    height: 30px;\n    margin: 0 auto;\n    margin-top: 15px;\n    display: block;\n    width: 20%;\n\n    color: white;\n    background-color: gray;\n  }\n\n  .info {\n    margin-top: 0;\n    margin-bottom: 10px;\n    padding: 0px 10px;\n    width: 100%;\n\n    text-align: center;\n  }\n\n  .optional {\n    margin-top: 20px;\n    margin-bottom: 5px;\n    padding: 0px 10px;\n\n    text-align: center;\n    font-size: 18px;\n    font-weight: bold;\n  }\n  .optional2 {\n    margin-top: 5px;\n    margin-bottom: 25px;\n    padding: 0px 10px;\n    width: 100%;\n\n    text-align: center;\n  }\n"])));function SetMolecularFormulaModal(e){var t=e.onClose,n=e.onSave,a=e.molecules,i=e.previousMF,r=Object(D.useState)(),o=Object(O.a)(r,2),c=o[0],l=o[1];Object(D.useEffect)((function(){a&&a.length>0&&l(0)}),[a]);var s=Object(D.useCallback)((function(e){n(e),t()}),[t,n]),u=Object(D.useCallback)((function(){n(a[c].mf),t()}),[c,a,t,n]),d=Object(D.useCallback)((function(e){l(e)}),[]);return Object(Ce.c)("div",{css:Tp,children:[Object(Ce.b)("div",{className:"header",children:Object(Ce.b)(et,{onClick:t})}),Object(Ce.b)("div",{children:Object(Ce.b)("p",{className:"info",children:"Please type in a molecular formula!"})}),Object(Ce.b)(wp,{onSave:s,previousMF:i}),Object(Ce.c)("div",{children:[Object(Ce.b)("p",{className:"optional",children:"OR"}),Object(Ce.b)("p",{className:"optional2",children:"Select a molecule as reference!"})]}),Object(Ce.b)(Ou,{molecules:a,onChange:d}),Object(Ce.b)("button",{type:"button",onClick:u,children:"Set"})]})}SetMolecularFormulaModal.defaultProps={onSave:function onSave(){return null},onClose:function onClose(){return null}};var Mp,Ap=SetMolecularFormulaModal,Ep=Object(y.css)(Mp||(Mp=Object(x.a)(["\n  overflow: auto;\n  width: 300px;\n  height: 300px;\n  padding: 5px;\n  button:focus {\n    outline: none;\n  }\n  text-align: center;\n\n  .header {\n    height: 24px;\n    border-bottom: 1px solid #f0f0f0;\n    display: flex;\n    align-items: center;\n\n    button {\n      height: 36px;\n      margin: 2px;\n      background-color: transparent;\n      border: none;\n      svg {\n        height: 16px;\n      }\n    }\n  }\n\n  button {\n    flex: 2;\n    padding: 5px;\n    border: 1px solid gray;\n    border-radius: 5px;\n    height: 30px;\n    margin: 0 auto;\n    margin-top: 15px;\n    display: block;\n    width: 20%;\n\n    color: white;\n    background-color: gray;\n  }\n\n  .info {\n    margin-top: 0;\n    margin-bottom: 10px;\n    padding: 0px 10px;\n    width: 100%;\n\n    text-align: center;\n  }\n\n  input {\n    border-radius: 5px;\n    border: 0.55px solid #c7c7c7;\n    margin: 0px 5px 0px 5px;\n    text-align: center;\n  }\n"])));function SetShiftToleranceModal(e){var t=e.onClose,n=e.onSave,a=e.previousTolerance,i=Object(D.useState)(),r=Object(O.a)(i,2),o=r[0],c=r[1];Object(D.useEffect)((function(){c(a||void 0)}),[a]);var l=Object(D.useCallback)((function(){n(o),t()}),[t,n,o]),s=Object(D.useCallback)((function(e,t){return c(Object(v.a)(Object(v.a)({},o),{},Object(be.a)({},t,Number(e.target.value))))}),[o]),u=Object(D.useMemo)((function(){return o?Object.keys(o).map((function(e){return Object(Ce.c)("div",{className:"input-field",children:[Object(Ce.c)("span",{children:[e,": "]}),Object(Ce.b)("input",{type:"number",onChange:function onChange(t){return s(t,e)},defaultValue:o[e]})]},"toleranceInputField_".concat(e))})):void 0}),[s,o]);return Object(Ce.c)("div",{css:Ep,children:[Object(Ce.b)("div",{className:"header",children:Object(Ce.b)(et,{onClick:t})}),Object(Ce.b)("div",{children:Object(Ce.b)("p",{className:"info",children:"Shift tolerances: "})}),u,Object(Ce.b)("button",{type:"button",onClick:l,children:"Set"})]})}SetShiftToleranceModal.defaultProps={onSave:function onSave(){return null},onClose:function onClose(){return null}};var Pp,Ip=SetShiftToleranceModal,Fp=Object(y.css)(Pp||(Pp=Object(x.a)(["\n  display: flex;\n  flex-direction: column;\n  text-align: center;\n  height: 100%;\n  width: 100%;\n  justify-content: center,\n  align-items: 'center',\n\n  button {\n    border-radius: 5px;\n    margin-top: 3px;\n    margin-left: 2px;\n    border: none;\n    height: 16px;\n    width: 18px;\n    font-size: 12px;\n    padding: 0;\n    background-color: transparent;\n  }\n\n  .overview-container {\n    width: 100%;\n    margin-left: 15px;\n    white-space: nowrap;\n    span {\n      margin-left: 8px;\n    }\n  }\n\n  .homoHeteroKinds-container {\n    width: 100%;\n    margin-left: 15px;\n    span {\n      margin-left: 7px;\n    }\n  }\n\n\n"])));function SummaryPanel(){var e=useChartData(),t=e.molecules,n=e.correlations,a=e.data,i=e.xDomain,r=e.yDomain,o=e.displayerMode,c=e.activeTab,l=useDispatch(),s=oe(),u=Object(D.useState)([]),d=Object(O.a)(u,2),b=d[0],f=d[1],p=Object(D.useState)("-"),h=Object(O.a)(p,2),g=h[0],m=h[1],j=Object(D.useState)(!1),x=Object(O.a)(j,2),y=x[0],k=x[1],C=Object(D.useState)(!1),S=Object(O.a)(C,2),w=S[0],T=S[1],M=Object(D.useMemo)((function(){var e=function isInView(e){if(!0===e.pseudo)return!1;var t=c.split(",").map((function(e){return function getAtomType(e){return e.split(/\d+/)[1]}(e)})),n=1e4,l=i[0]*n,s=i[1]*n,u=r[0]*n,d=r[1]*n;if(o===Oo.DM_1D){var b=e.signal.delta*n;if(findSpectrum(a,e)&&t[0]===e.atomType&&b>=l&&b<=s)return!0;if(e.link.some((function(e){return function findSignalMatch1D(e,t,n,a,i){if(e&&2===e.info.dimension){var r=findSignal(e,t);if(r){var o="x"===t.axis?"y":"x";return r[o].delta*n>=a&&r[o].delta*n<=i}}return!1}(findSpectrum(a,e),e,n,l,s)})))return!0}else if(o===Oo.DM_2D){if(!t.includes(e.atomType))return!1;if(findSignalMatch2D(findSpectrum(a,e),e,n,l,s,u,d))return!0;if(e.link.some((function(e){return findSignalMatch2D(findSpectrum(a,e),e,n,l,s,u,d)})))return!0}return!1};if(n){var t=w?n.values.filter((function(t){return e(t)})):n.values;return Object(v.a)(Object(v.a)({},n),{},{values:t})}}),[c,n,o,w,a,i,r]),A=Object(D.useCallback)((function(e){l({type:tn,payload:{mf:e}})}),[l]),E=Object(D.useCallback)((function(e){l({type:nn,payload:{tolerance:e}})}),[l]),P=Object(D.useCallback)((function(){s.show(Object(Ce.b)(Ap,{onClose:function onClose(){return s.close()},onSave:A,molecules:t,previousMF:n.options.mf}))}),[n,A,s,t]),I=Object(D.useCallback)((function(){s.show(Object(Ce.b)(Ip,{onClose:function onClose(){return s.close()},onSave:E,previousTolerance:n.options.tolerance}))}),[n,E,s]),F=Object(D.useMemo)((function(){var e=["-"].concat(n?n.values.map((function(e){return e.atomType})).filter((function(e,t,n){return n.indexOf(e)===t})):[]);return e.includes("H")&&e.push("H-H"),e.includes("H")?m("H"):m("-"),e.map((function(e){return{key:e,label:e,value:e}}))}),[n]);Object(D.useEffect)((function(){var e=g.split("-")[0];f(M?M.values.filter((function(t){return t.atomType===e})).reverse():[])}),[M,g]);var _=Object(D.useCallback)((function(e,t){l({type:Qt,payload:{id:e.id,correlation:Object(v.a)(Object(v.a)({},e),{},{equivalence:t,edited:Object(v.a)(Object(v.a)({},e.edited),{},{equivalence:!0})})}})}),[l]),R=Object(D.useCallback)((function(e,t){var n;t.match(/^([0-9],{0,1})+$/g)?n=t.split(",").filter((function(e){return e.length>0})).map((function(e){return Number(e)})):0===t.trim().length&&(n=[]),n&&l({type:Qt,payload:{id:e.id,correlation:Object(v.a)(Object(v.a)({},e),{},{protonsCount:n,edited:Object(v.a)(Object(v.a)({},e.edited),{},{protonsCount:!0})})}})}),[l]),N=Object(D.useCallback)((function(e,t){l({type:Qt,payload:{id:e.id,correlation:Object(v.a)(Object(v.a)({},e),{},{hybridization:t,edited:Object(v.a)(Object(v.a)({},e.edited),{},{hybridization:!0})})}})}),[l]),L=Object(D.useCallback)((function(e,t){l({type:en,payload:{ids:[e.id,t.id],correlations:[Object(v.a)(Object(v.a)({},e),{},{edited:Object(v.a)(Object(v.a)({},e.edited),{},{additionalColumnField:!0})}),Object(v.a)(Object(v.a)({},t),{},{edited:Object(v.a)(Object(v.a)({},t.edited),{},{additionalColumnField:!0})})]}})}),[l]),z=Object(D.useCallback)((function(){T(!w)}),[w]);return Object(Ce.c)("div",{css:Fp,children:[Object(Ce.c)(Fu,{canDelete:!1,counter:n?n.values.length:0,onFilter:z,filterToolTip:w?"Show all correlations":"Hide correlations out of view",filterIsActive:w,counterFiltered:M&&M.values.length,children:[Object(Ce.b)(qe,{title:"Set molecular formula (".concat(n.options.mf,")"),popupPlacement:"right",children:Object(Ce.b)("button",{type:"button",onClick:P,children:Object(Ce.b)(Ze.t,{})})}),Object(Ce.b)(qe,{title:"Set shift tolerance",popupPlacement:"right",children:Object(Ce.b)("button",{type:"button",onClick:I,children:Object(Ce.b)(Ze.F,{})})}),Object(Ce.b)("div",{className:"overview-container",children:Object(Ce.b)(kp,{correlationsData:n})}),Object(Ce.b)("div",{className:"homoHeteroKinds-container",children:Object(Ce.b)(op,{onChange:function onChange(e){m(e),k("H-H"===e)},data:F,value:g,style:{width:"65px",height:"20px",border:"1px solid grey"}})})]}),Object(Ce.b)(xp,{correlationsData:n,filteredCorrelationsData:M,additionalColumnData:b,editEquivalencesSaveHandler:_,changeHybridizationSaveHandler:N,editProtonsCountSaveHandler:R,editAdditionalColumnFieldSaveHandler:L,showProtonsAsRows:y,spectraData:a})]})}var _p=Object(D.memo)(SummaryPanel),Rp={container:{padding:10,backgroundColor:"#f1f1f1",height:"100%",flex:1},groupContainer:{padding:"5px",borderRadius:"5px",margin:"10px 0px",backgroundColor:"white"},row:{display:"flex",margin:"5px 0px"},header:{borderBottom:"1px solid #e8e8e8",paddingBottom:"5px",fontWeight:"bold",color:"#4a4a4a"},inputLabel:{flex:2,fontSize:"11px",fontWeight:"bold",color:"#232323"},input:{width:"30%",textAlign:"center"}},Np=[{id:1,label:"From :",checkController:"showFrom",formatController:"fromFormat",defaultFormat:"0.00"},{id:2,label:"To :",checkController:"showTo",formatController:"toFormat",defaultFormat:"0.00"},{id:3,label:"Absolute :",checkController:"showAbsolute",formatController:"absoluteFormat",defaultFormat:"0.00"},{id:4,label:"Relative :",checkController:"showRelative",formatController:"relativeFormat",defaultFormat:"00.00"}];function ZonesPreferences(e,t){var n=e.nucleus,a=Ec(),i=useStateWithLocalStorage("nmr-general-settings"),r=Object(O.a)(i,2)[1],o=usePreferences(),c=Object(D.useState)(null),l=Object(O.a)(c,2),s=l[0],u=l[1],d=Object(D.useRef)();Object(D.useEffect)((function(){var e=dt(o,"formatting.panels.zones");e&&u(e)}),[o]);var b=function saveToLocalStorgate(e){r(e,"formatting.panels.ranges")},f=Object(D.useCallback)((function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];o.dispatch({type:gl,payload:{key:"zones",value:e}}),t&&a.success("zones preferences saved successfully")}),[a,o]);Object(D.useImperativeHandle)(t,(function(){return{saveSetting:function saveSetting(){"function"===typeof d.current.requestSubmit?d.current.requestSubmit():d.current.dispatchEvent(new Event("submit",{cancelable:!0}))}}}));var p=function(){var e=Object(Vr.a)(Xr.a.mark((function _callee(e){var t,n,a,i,r,o,c,l;return Xr.a.wrap((function _callee$(s){for(;;)switch(s.prev=s.next){case 0:e.preventDefault(),t=e.target,n=new FormData(t),a={},i=Object(rc.a)(n.entries());try{for(i.s();!(r=i.n()).done;)o=r.value,c=o[0].split("-").join("."),l=["true","false"].includes(o[1])?"true"===o[1]:o[1],a=st()(a,c,l)}catch(u){i.e(u)}finally{i.f()}f(a,!0),b(a);case 8:case"end":return s.stop()}}),_callee)})));return function handleSubmit(t){return e.apply(this,arguments)}}(),h=Object(D.useCallback)((function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var a=t.join(".");if(s){var i=C()(s,a);return i||null}var r=t.length-1;return Si[t[r]]}),[s]);return Object(N.jsx)("div",{style:Rp.container,children:Object(N.jsx)("form",{onSubmit:p,ref:d,children:n&&n.map((function(e){return Object(N.jsxs)("div",{style:Rp.groupContainer,children:[Object(N.jsx)(jd,{style:Rp.header,value:e}),Np.map((function(t){return Object(N.jsx)(nd,{label:t.label,checked:h(e,t.checkController),format:h(e,t.formatController),checkControllerName:t.checkController,formatControllerName:t.formatController,groupID:e},t.id)}))]},e)}))})})}var Lp=Fo(Object(D.memo)(Object(D.forwardRef)(ZonesPreferences))),zp={marginLeft:2,marginRight:2,border:"none",height:"20px"};var Hp=function ActionsColumn_ActionsColumn(e){var t=e.rowData,n=e.rowSpanTags,a=useDispatch(),i=useAssignmentData(),r=Object(D.useCallback)((function(e){a({type:ra,payload:{rowData:t,value:e}})}),[a,t]),o=Object(D.useCallback)((function(){a({type:Xn,payload:{id:t.id,assignmentData:i}})}),[i,a,t]),c=Object(D.useCallback)((function(){var e=10*Math.abs(t.x.from-t.x.to);a({type:It,xDomain:t.x.from<=t.x.to?[t.x.from-e,t.x.to+e]:[t.x.to-e,t.x.from+e]});var n=10*Math.abs(t.y.from-t.y.to);a({type:Ft,yDomain:t.y.from<=t.y.to?[t.y.from-n,t.y.to+n]:[t.y.to-n,t.y.from+n]})}),[a,t.x.from,t.x.to,t.y.from,t.y.to]);return Object(N.jsxs)(D.Fragment,{children:[Object(N.jsx)("td",{children:Object(N.jsx)(Jl,{onChange:function onChange(e){r(e)},data:sr,defaultValue:t.tableMetaInfo.signal.kind,style:zp})}),Object(N.jsxs)("td",Object(v.a)(Object(v.a)({},n),{},{children:[Object(N.jsx)("button",{type:"button",className:"delete-button",onClick:o,children:Object(N.jsx)(Ze.B,{})}),Object(N.jsx)("button",{type:"button",className:"zoom-button",onClick:c,children:Object(N.jsx)(Ze.D,{title:"Zoom to zone in spectrum"})})]}))]})};var Bp=function SignalAssignmentsColumn_SignalAssignmentsColumn(e){var t=e.rowData,n=e.assignment,a=e.highlight,i=e.onHover,r=e.onClick,o=e.onUnlink,c=e.axis,l=e.showUnlinkButton,s=e.setShowUnlinkButton;return Object(N.jsx)("td",Object(v.a)(Object(v.a)({},i),{},{onClick:function onClick(e){return r(e,n,c)},style:a.isActive||n.isActive&&n.activeAxis===c?{color:"red",fontWeight:"bold"}:null,children:C()(t,"tableMetaInfo.signal.".concat(c,".diaID"),[]).length>0?Object(N.jsxs)("div",{onMouseEnter:function onMouseEnter(){return s(!0)},onMouseLeave:function onMouseLeave(){return s(!1)},children:[t.tableMetaInfo.signal[c].diaID.length," ",Object(N.jsx)("sup",{children:Object(N.jsx)("button",{type:"button",style:{visibility:l?"visible":"hidden",padding:0,margin:0},onClick:function onClick(e){return o(e,!1,c)},children:Object(N.jsx)(Ze.w,{color:"red"})})})]}):n.isActive&&n.activeAxis===c?"0":""}))};var Xp=function SignalAssignmentsColumns(e){var t=e.rowData,n=e.assignmentSignal,a=e.onHoverSignalX,i=e.onHoverSignalY,r=e.showUnlinkButtonSignalX,o=e.showUnlinkButtonSignalY,c=e.setShowUnlinkButtonSignalX,l=e.setShowUnlinkButtonSignalY,s=e.onClick,u=e.onUnlink,d=e.highlightSignalX,b=e.highlightSignalY;return Object(N.jsxs)(D.Fragment,{children:[Object(N.jsx)(Bp,{rowData:t,assignment:n,highlight:d,onHover:a,onClick:s,onUnlink:u,axis:"x",showUnlinkButton:r,setShowUnlinkButton:c}),Object(N.jsx)(Bp,{rowData:t,assignment:n,highlight:b,onHover:i,onClick:s,onUnlink:u,axis:"y",showUnlinkButton:o,setShowUnlinkButton:l})]})};var Vp=function SignalDeltaColumn_SignalDeltaColumn(e){var t=e.rowData,n=e.onHoverSignalX,a=e.onHoverSignalY,i=useDispatch(),r=C()(t,"tableMetaInfo.signal.x.delta",null),o=C()(t,"tableMetaInfo.signal.y.delta",null),c=C()(t,"tableMetaInfo.signal.id",void 0),l=Object(D.useCallback)((function(e){var n=e.target.value;i({type:ia,payload:{zoneID:t.id,signal:{id:c,x:n}}})}),[i,c,t.id]),s=Object(D.useCallback)((function(e){var n=e.target.value;i({type:ia,payload:{zoneID:t.id,signal:{id:c,y:n}}})}),[i,c,t.id]);return Object(N.jsxs)(D.Fragment,{children:[Object(N.jsx)("td",Object(v.a)(Object(v.a)({},n),{},{children:null!==r?Object(N.jsx)(Xu,{value:r.toFixed(2),onSave:l,type:"number",style:{padding:"0.1rem 0.4rem"}}):""})),Object(N.jsx)("td",Object(v.a)(Object(v.a)({},a),{},{children:null!==o?Object(N.jsx)(Xu,{value:o.toFixed(2),onSave:s,type:"number",style:{padding:"0.1rem 0.4rem"}}):""}))]})};var Yp=function ZoneAssignmentColumn(e){var t=e.rowData,n=e.assignment,a=e.highlight,i=e.onHover,r=e.onClick,o=e.onUnlink,c=e.axis,l=e.showUnlinkButton,s=e.setShowUnlinkButton,u=e.rowSpanTags;return Object(N.jsx)("td",Object(v.a)(Object(v.a)(Object(v.a)({},u),i),{},{onClick:function onClick(e){return r(e,n,c)},children:C()(t,"".concat(c,".pubIntegral"),0)>0?C()(t,"".concat(c,".diaID"),[]).length>0?Object(N.jsxs)("div",{onMouseEnter:function onMouseEnter(){return s(!0)},onMouseLeave:function onMouseLeave(){return s(!1)},children:[t[c].pubIntegral," ","(",Object(N.jsx)("span",{style:n.isActive&n.activeAxis===c||n.isOnHover&n.onHoverAxis===c||a.isActive?{color:"red",fontWeight:"bold"}:{color:"black",fontWeight:"normal"},children:C()(t,"".concat(c,".diaID"),[]).length}),")"," ",Object(N.jsx)("sup",{children:Object(N.jsx)("button",{type:"button",style:{visibility:l?"visible":"hidden",padding:0,margin:0},onClick:function onClick(e){return o(e,!0,c)},children:Object(N.jsx)(Ze.w,{color:"red"})})})]}):n.isActive&&n.activeAxis===c?Object(N.jsxs)("div",{children:["".concat(C()(t,"".concat(c,".pubIntegral"),"")," ("),Object(N.jsx)("span",{style:{color:"red",fontWeight:"bold"},children:"0"}),")"]}):t[c].pubIntegral:n.isActive&&n.activeAxis===c?Object(N.jsxs)("div",{children:["0 (",Object(N.jsx)("span",{style:{color:"red",fontWeight:"bold"},children:"0"}),")"]}):""}))};var Zp=function ZoneAssignmentsColumns(e){var t=e.rowData,n=e.assignmentZone,a=e.onHoverZoneX,i=e.onHoverZoneY,r=e.showUnlinkButtonZoneX,o=e.showUnlinkButtonZoneY,c=e.setShowUnlinkButtonZoneX,l=e.setShowUnlinkButtonZoneY,s=e.rowSpanTags,u=e.onClick,d=e.onUnlink,b=e.highlightZoneX,f=e.highlightZoneY;return Object(N.jsxs)(D.Fragment,{children:[Object(N.jsx)(Yp,{rowData:t,assignment:n,highlight:b,onHover:a,onClick:u,onUnlink:d,axis:"x",showUnlinkButton:r,setShowUnlinkButton:c,rowSpanTags:s}),Object(N.jsx)(Yp,{rowData:t,assignment:n,highlight:f,onHover:i,onClick:u,onUnlink:d,axis:"y",showUnlinkButton:o,setShowUnlinkButton:l,rowSpanTags:s})]})},Up={backgroundColor:"#ff6f0057"},Kp={backgroundColor:"#f5f5dc"};var Wp,Gp=function ZonesTableRow(e){var t=e.rowData,n=e.onUnlink,a=e.onContextMenu,i=useAssignment(t.id),r=Object(vi.c)([i.id]),o=Object(vi.c)([Ho(i.id,"X")].concat(i.assigned.x||[])),c=Object(vi.c)([Ho(i.id,"Y")].concat(i.assigned.y||[])),l=useAssignment(t.tableMetaInfo.id),s=Object(vi.c)([Ho(l.id,"X")].concat(l.assigned.x||[],Ho(l.id,"Crosshair"))),u=Object(vi.c)([Ho(l.id,"Y")].concat(l.assigned.y||[],Ho(l.id,"Crosshair"))),d=Object(D.useState)(!1),b=Object(O.a)(d,2),f=b[0],p=b[1],h=Object(D.useState)(!1),g=Object(O.a)(h,2),m=g[0],j=g[1],x=Object(D.useState)(!1),y=Object(O.a)(x,2),k=y[0],S=y[1],w=Object(D.useState)(!1),T=Object(O.a)(w,2),M=T[0],A=T[1],E=Object(D.useMemo)((function(){return{rowSpan:t.tableMetaInfo.rowSpan,style:!0===C()(t,"tableMetaInfo.hide",!1)?{display:"none"}:null}}),[t]),P=Object(D.useCallback)((function(e,a,r){e&&e.stopPropagation(),n(t,a,t.tableMetaInfo.signalIndex,r),"x"===r?void 0!==a?a?(p(!1),i.removeAll("x")):(S(!1),l.removeAll("x")):(p(!1),S(!1)):"y"===r?void 0!==a?a?(j(!1),i.removeAll("y")):(A(!1),l.removeAll("y")):(j(!1),A(!1)):(p(!1),i.removeAll("x"),S(!1),l.removeAll("x"),j(!1),i.removeAll("y"),A(!1),l.removeAll("y"))}),[l,i,n,t]),I=Object(D.useCallback)((function(e,t,n){e.stopPropagation(),t.onClick(n)}),[]),F=Object(D.useMemo)((function(){return{onMouseEnter:function onMouseEnter(){i.onMouseEnter("x"),o.show()},onMouseLeave:function onMouseLeave(){i.onMouseLeave("x"),o.hide()}}}),[i,o]),_=Object(D.useMemo)((function(){return{onMouseEnter:function onMouseEnter(){i.onMouseEnter("y"),c.show()},onMouseLeave:function onMouseLeave(){i.onMouseLeave("y"),c.hide()}}}),[i,c]),R=Object(D.useMemo)((function(){return{onMouseEnter:function onMouseEnter(){l.onMouseEnter("x"),s.show()},onMouseLeave:function onMouseLeave(){l.onMouseLeave("x"),s.hide()}}}),[l,s]),N=Object(D.useMemo)((function(){return{onMouseEnter:function onMouseEnter(){l.onMouseEnter("y"),u.show()},onMouseLeave:function onMouseLeave(){l.onMouseLeave("y"),u.hide()}}}),[l,u]);return Object(Ce.c)("tr",Object(v.a)(Object(v.a)({onContextMenu:function onContextMenu(e){return a(e,t)},style:r.isActive||i.isActive?Up:!0===C()(t,"tableMetaInfo.isConstantlyHighlighted",!1)?Kp:null},r.onHover),{},{children:[Object(Ce.b)("td",Object(v.a)(Object(v.a)({},E),{},{children:t.tableMetaInfo.rowIndex+1})),Object(Ce.b)(Vp,{rowData:t,onHoverSignalX:R,onHoverSignalY:N}),Object(Ce.b)(Xp,{rowData:t,assignmentSignal:l,onHoverSignalX:R,onHoverSignalY:N,showUnlinkButtonSignalX:k,showUnlinkButtonSignalY:M,setShowUnlinkButtonSignalX:function setShowUnlinkButtonSignalX(e){return S(e)},setShowUnlinkButtonSignalY:function setShowUnlinkButtonSignalY(e){return A(e)},onClick:I,onUnlink:P,highlightSignalX:s,highlightSignalY:u}),Object(Ce.b)(Zp,{rowData:t,assignmentZone:i,onHoverZoneX:F,onHoverZoneY:_,showUnlinkButtonZoneX:f,showUnlinkButtonZoneY:m,setShowUnlinkButtonZoneX:function setShowUnlinkButtonZoneX(e){return p(e)},setShowUnlinkButtonZoneY:function setShowUnlinkButtonZoneY(e){return j(e)},rowSpanTags:E,onClick:I,onUnlink:P,highlightZoneX:o,highlightZoneY:c}),Object(Ce.b)(Hp,{rowData:t,rowSpanTags:E})]}))},qp=Object(y.css)(Wp||(Wp=Object(x.a)(["\n  border-spacing: 0;\n  border: 1px solid #dedede;\n  width: 100%;\n  font-size: 12px;\n  // height: 100%;\n  .react-contextmenu-wrapper {\n    display: contents;\n  }\n  tr {\n    :last-child {\n      td {\n        border-bottom: 0;\n      }\n    }\n  }\n  thead tr:nth-of-type(1) th {\n    top: 0;\n  }\n  thead tr:nth-of-type(2) th {\n    top: 21px;\n  }\n  th {\n    position: sticky;\n    background-color: white;\n    z-index: 2;\n  }\n  th,\n  td {\n    white-space: nowrap;\n    text-align: center;\n    margin: 0;\n    padding: 0.1rem 0.4rem;\n    border-bottom: 1px solid #dedede;\n    border-right: 1px solid #dedede;\n\n    :last-child {\n      border-right: 0;\n    }\n    button {\n      background-color: transparent;\n      border: none;\n      padding: 0 5px;\n    }\n  }\n"])));var Jp=function ZonesTable(e){var t=e.tableData,n=e.onUnlink,a=e.context,i=e.nuclei,r=e.preferences,o=Object(D.useRef)(),c=Object(D.useCallback)((function(e,t){checkModifierKeyActivated(e)||(e.preventDefault(),o.current.handleContextMenu(e,t))}),[o]),l=Object(D.useMemo)((function(){var e=[];return t.forEach((function(t,n){1===t.signal.length?e.push(Object(v.a)(Object(v.a)({},t),{},{tableMetaInfo:Object(v.a)(Object(v.a)({},t.tableMetaInfo),{},{signal:t.signal[0],rowIndex:n,signalIndex:0,id:t.signal[0].id})})):t.signal.length>1&&t.signal.forEach((function(a,i){var r=!1,o=null;i<t.signal.length-1&&0===i?o=t.signal.length:r=!0,e.push(Object(v.a)(Object(v.a)({},t),{},{tableMetaInfo:Object(v.a)(Object(v.a)({},t.tableMetaInfo),{},{signal:a,rowSpan:o,hide:r,rowIndex:n,signalIndex:i,id:a.id})}))}))})),e}),[t]),s=Object(D.useMemo)((function(){return l.map((function(e){return Object(Ce.b)(Gp,{rowData:e,onUnlink:n,onContextMenu:function onContextMenu(e,t){return c(e,t)},preferences:r},"zonesTableRow_".concat(e.tableMetaInfo.id))}))}),[c,l,n,r]);return Object(Ce.c)("div",{children:[Object(Ce.c)("table",{css:qp,children:[Object(Ce.c)("thead",{children:[Object(Ce.c)("tr",{children:[Object(Ce.b)("th",{rowSpan:2,children:"#"}),Object(Ce.b)("th",{colSpan:2,children:"\u03b4 (ppm)"}),Object(Ce.b)("th",{colSpan:2,children:Object(Ce.b)(Ze.u,{})}),Object(Ce.b)("th",{colSpan:2,children:"\u03a3"}),Object(Ce.b)("th",{rowSpan:2,children:"Kind"}),Object(Ce.b)("th",{rowSpan:2,children:""})]}),Object(Ce.c)("tr",{children:[Object(Ce.b)("th",{children:i[0]}),Object(Ce.b)("th",{children:i[1]}),Object(Ce.b)("th",{children:i[0]}),Object(Ce.b)("th",{children:i[1]}),Object(Ce.b)("th",{children:i[0]}),Object(Ce.b)("th",{children:i[1]})]})]}),Object(Ce.b)("tbody",{children:s})]}),Object(Ce.b)(Yu,{ref:o,context:a})]})},$p={container:{flexDirection:"column",height:"100%",display:"flex"},removeAssignmentsButton:{borderRadius:"5px",marginTop:"3px",marginLeft:"2px",border:"none",height:"16px",width:"18px",fontSize:"12px",padding:0,backgroundColor:"transparent"},button:{backgroundColor:"transparent",border:"none"},toggle:{width:"22px",height:"22px",marginLeft:"2px",display:"flex",justifyContent:"center",alignItems:"center"}};function ZonesPanel(e){var t=e.zones,n=e.activeTab,a=e.preferences,i=e.xDomain,r=e.yDomain,o=Object(D.useState)(!1),c=Object(O.a)(o,2),l=c[0],s=c[1],u=useAssignmentData(),d=useDispatch(),b=oe(),f=Object(D.useState)(!1),p=Object(O.a)(f,2),h=p[0],g=p[1],m=Object(D.useRef)(),j=Object(D.useMemo)((function(){var e=function isInView(e,t,n,a){var o=1e4;return e*=o,n*=o,a*=o,((t*=o)>=i[0]*o&&e<=i[1]*o||e<=i[0]*o&&t>=i[1]*o)&&(a>=r[0]*o&&n<=r[1]*o||n<=r[0]*o&&a>=r[1]*o)};if(t.values)return(l?function getFilteredZones(t){return t.filter((function(t){return e(t.x.from,t.x.to,t.y.from,t.y.to)}))}(t.values):t.values).map((function(t){return Object(v.a)(Object(v.a)({},t),{},{tableMetaInfo:{isConstantlyHighlighted:e(t.x.from,t.x.to,t.y.from,t.y.to)}})}))}),[t,l,i,r]),x=Object(D.useCallback)((function(){s(!l)}),[l]),y=Object(D.useCallback)((function(e,t,n,a){d({type:oa,payload:{zoneData:e,assignmentData:u,isOnZoneLevel:t,signalIndex:n,axis:a}})}),[u,d]),k=Object(D.useCallback)((function(){t.values.forEach((function(e){return y(e)}))}),[t.values,y]),S=Object(D.useCallback)((function(){b.showConfirmDialog({message:"All assignments will be removed. Are you sure?",buttons:[{text:"Yes",handler:k},{text:"No"}]})}),[k,b]),w=Object(D.useCallback)((function(){b.showConfirmDialog({message:"All zones will be deleted. Are You sure?",buttons:[{text:"Yes",handler:function handler(){d({type:Xn,payload:{assignmentData:u}})}},{text:"No"}]})}),[u,d,b]),T=Object(D.useMemo)((function(){return C()(a,"panels.zones.[".concat(n,"]"))}),[n,a]),M=Object(D.useCallback)((function(){g(!h)}),[h]),A=Object(D.useCallback)((function(){m.current.saveSetting(),g(!1)}),[]),E=Object(D.useCallback)((function(e){pi.emit("onZonesVisibilityChange",{key:e})}),[]);return Object(N.jsx)(N.Fragment,{children:Object(N.jsxs)("div",{style:$p.container,children:[!h&&Object(N.jsxs)(Fu,{counter:t.values?t.values.length:0,onDelete:w,deleteToolTip:"Delete All Zones",onFilter:x,filterToolTip:l?"Show all zones":"Hide zones out of view",filterIsActive:l,counterFiltered:j&&j.length,showSettingButton:"true",onSettingClick:M,children:[Object(N.jsx)(qe,{title:"Remove all Assignments",popupPlacement:"right",children:Object(N.jsx)("button",{style:$p.removeAssignmentsButton,type:"button",onClick:S,disabled:!t.values||0===t.values.length,children:Object(N.jsx)(Ze.H,{})})}),Object(N.jsx)(Eu,{popupTitle:"show/hide zones",popupPlacement:"right",style:$p.toggle,defaultValue:!0,onClick:function onClick(){return E("zones")},children:Object(N.jsx)("span",{style:{fontSize:"12px",pointerEvents:"none"},children:"z"})}),Object(N.jsx)(Eu,{popupTitle:"show/hide signals",popupPlacement:"right",style:$p.toggle,defaultValue:!0,onClick:function onClick(){return E("signals")},children:Object(N.jsx)("span",{style:{fontSize:"12px",pointerEvents:"none"},children:"s"})}),Object(N.jsx)(Eu,{popupTitle:"show/hide peaks",popupPlacement:"right",style:$p.toggle,defaultValue:!0,onClick:function onClick(){return E("peaks")},children:Object(N.jsx)("span",{style:{fontSize:"12px",pointerEvents:"none"},children:"p"})})]}),h&&Object(N.jsx)(zu,{onSave:A,onClose:M}),Object(N.jsx)("div",{style:{height:"100%",overflow:"hidden"},children:Object(N.jsxs)(Qs.a,{isFlipped:h,infinite:!0,containerStyle:{overflow:"hidden",height:"100%"},children:[Object(N.jsx)("div",{style:{overflow:"auto",height:"100%",display:"block"},children:j&&j.length>0?Object(N.jsx)(Jp,{tableData:j,onUnlink:y,preferences:T,nuclei:n&&2===n.split(",").length?n.split(","):["?","?"]}):Object(N.jsx)(Wu,{})}),Object(N.jsx)(Lp,{ref:m})]})})]})})}var Qp=Fo(Object(D.memo)(ZonesPanel)),eh={width:"100%",height:"100%",padding:"0px",display:"flex",flexDirection:"column"};function Table(e){var t=e.children,n=e.className,a=e.style;return Object(N.jsx)("div",{className:n,style:Object(v.a)(Object(v.a)({},eh),a),children:t})}var th=Object(D.memo)(Table),nh={width:"100%",overflowY:"auto",display:"flex",flexDirection:"column",padding:"5px 0px",color:"gray"};function TableBody(e){var t=e.children,n=e.className,a=e.style,i=Object(D.useMemo)((function(){return D.Children.map(t,(function(e){return Object(D.cloneElement)(e,{style:Object(v.a)({borderBottom:"0.55px solid #d8d8d8"},e.props.style)})}))}),[t]);return Object(N.jsx)("div",{className:n,style:Object(v.a)(Object(v.a)({},nh),{},{style:a}),children:i})}var ah=Object(D.memo)(TableBody),ih={width:"100%",display:"flex",alignItems:"flex-start"};function getVAlign(e){return"top"===e.toLowerCase()?"flex-start":"bottom"===e.toLowerCase()?"flex-end":"center"}function TableHeader(e){var t=e.children,n=e.className,a=e.style,i=e.align,r=void 0===i?"center":i,o=e.vAlign,c=void 0===o?"center":o,l=e.size,s=void 0===l?1:l,u=e.onClick;return Object(N.jsx)("div",{className:n,style:Object(v.a)(Object(v.a)({},ih),{},{alignItems:getVAlign(c),textAlign:r,flex:s},a),onClick:u,children:t})}TableHeader.defaultProps={onClick:function onClick(){return null}};var rh=Object(D.memo)(TableHeader),oh={width:"100%",display:"flex",padding:"0px 5px",color:"#424242",backgroundColor:"#d8d8d8",borderBottom:"0.55px solid #d8d8d8",fontSize:11,fontWeight:"bold"};function TableHead(e){var t=e.children,n=e.className,a=e.style;return Object(N.jsx)("div",{className:n,style:Object(v.a)(Object(v.a)({},oh),a),children:t})}var ch=Object(D.memo)(TableHead),lh={width:"100%",display:"flex",padding:"5px 0px"};function TableRow_TableHeader(e){var t=e.children,n=e.className,a=e.style,i=e.onClick;return Object(N.jsx)("div",{className:n,style:Object(v.a)(Object(v.a)({},lh),a),onClick:i,children:t})}TableRow_TableHeader.defaultProps={onClick:function onClick(){return null}};var sh=Object(D.memo)(TableRow_TableHeader);var uh=function FiltersWrapper(e){var t=function Wrapper(t){var n=useChartData(),a=n.data,i=n.activeSpectrum,r=Object(D.useMemo)((function(){return a&&i&&i.id?a.find((function(e){return e.id===i.id}))||{filters:[]}:{}}),[i,a]).filters,o=void 0===r?[]:r,c=t.forwardedRef,l=Object(ge.a)(t,["forwardedRef"]);return Object(N.jsx)(e,Object(v.a)(Object(v.a)({},l),{},{filters:o,ref:c}))};return Object(D.forwardRef)((function(e,n){return Object(N.jsx)(t,Object(v.a)(Object(v.a)({},e),{},{forwardedRef:n}))}))},dh=n(425),bh={button:{backgroundColor:"transparent",border:"none",height:25,width:25,padding:"5px"},active:{backgroundColor:"#fbfbfb",borderTop:"1px solid #817066",borderBottom:"1px solid #817066"}};function FiltersTableRow(e){var t=e.filters,n=useDispatch(),a=oe(),i=Ec(),r=Object(D.useState)(),o=Object(O.a)(r,2),c=o[0],l=o[1],s=Object(D.useCallback)((function(e,t){n({type:dn,id:e,checked:t})}),[n]),u=Object(D.useCallback)((function(e){var t=e.id,r=e.name;a.showConfirmDialog({message:"Filter/s will be deleted, Are You sure?",buttons:[{text:"Yes,All spectra",handler:function(){var e=Object(Vr.a)(Xr.a.mark((function _callee(){var e;return Xr.a.wrap((function _callee$(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.showLoading("Delete all spectra filter processs in progress");case 2:e=t.sent,n({type:fn,payload:{filterType:r}}),e();case 5:case"end":return t.stop()}}),_callee)})));return function handler(){return e.apply(this,arguments)}}()},{text:"Yes ",handler:function(){var e=Object(Vr.a)(Xr.a.mark((function _callee2(){var e;return Xr.a.wrap((function _callee2$(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,i.showLoading("Delete filter processs in progress");case 2:e=a.sent,n({type:bn,payload:{id:t}}),e();case 5:case"end":return a.stop()}}),_callee2)})));return function handler(){return e.apply(this,arguments)}}()},{text:"No"}]})}),[i,n,a]),d=Object(D.useCallback)((function(e){l((function(t){var a=t===e?null:e;return n({type:Yn,id:a}),a}))}),[n]);return Object(D.useMemo)((function(){return t&&t.map((function(e){return Object(N.jsxs)(sh,{style:e.id===c?Object(v.a)({},bh.active):{},children:[Object(N.jsx)(rh,{align:"center",size:"2",onClick:function onClick(){return d(e.id)},children:e.label}),Object(N.jsx)(rh,{align:"left",size:"3",children:Object(N.jsx)("div",{onClick:function onClick(e){return e.stopPropagation()},children:Object(N.jsx)(dh.a,{data:e.error?e.error:e.value})})}),Object(N.jsxs)(rh,{align:"center",vAlign:"center",size:"1",children:[Object(N.jsx)(Dl,{checked:e.flag,onChange:function onChange(t){return s(e.id,t.target.checked)}}),e.isDeleteAllow&&Object(N.jsx)("button",{style:bh.button,type:"button",onClick:function onClick(){return u(e)},children:Object(N.jsx)(Ze.B,{})})]})]},e.id)}))}),[d,t,u,s,c])}var fh=Object(D.memo)(FiltersTableRow);function FilterPanel(e){var t=e.filters;return Object(D.useMemo)((function(){return t?Object(N.jsxs)(th,{children:[Object(N.jsx)(ch,{children:Object(N.jsxs)(sh,{children:[Object(N.jsx)(rh,{align:"center",size:"1",children:"Label"}),Object(N.jsx)(rh,{align:"center",size:"2",children:"Properties"})]})}),Object(N.jsx)(ah,{children:Object(N.jsx)(fh,{filters:t})})]}):Object(N.jsx)(Wu,{})}),[t])}var ph=uh(Object(D.memo)(FilterPanel)),hh=[{title:"Spectra",component:Object(N.jsx)(rp,{}),openWhen:null,style:"",hidePreferenceKey:"hideSpectraPanel",mode:null},{title:"Information",component:Object(N.jsx)(qs,{}),openWhen:null,style:{overflow:"hidden"},hidePreferenceKey:"hideInformationPanel",mode:null},{title:"Peaks",component:Object(N.jsx)(Pb,{}),openWhen:[ti.peakPicking.id],style:"",hidePreferenceKey:"hidePeaksPanel",mode:null},{title:"Filters",component:Object(N.jsx)(ph,{}),openWhen:null,style:"",hidePreferenceKey:"hideFiltersPanel",mode:null},{title:"Integrals",component:Object(N.jsx)(ld,{}),openWhen:[ti.integral.id],style:"",hidePreferenceKey:"hideIntegralsPanel",mode:null},{title:"Ranges",component:Object(N.jsx)(_f,{}),openWhen:[ti.rangesPicking.id],style:"",hidePreferenceKey:"hideRangesPanel",mode:Oo.DM_1D},{title:"Multiple Spectra Analysis",component:Object(N.jsx)(Cb,{}),openWhen:[ti.multipleSpectraAnalysis.id],style:"",hidePreferenceKey:"hideMultipleSpectraAnalysisPanel",mode:null},{title:"Zones",component:Object(N.jsx)(Qp,{}),openWhen:[ti.zone2D.id],style:"",hidePreferenceKey:"hideZonesPanel",mode:Oo.DM_2D},{title:"Summary",component:Object(N.jsx)(_p,{}),openWhen:[],style:"",hidePreferenceKey:"hideSummaryPanel",mode:null},{title:"Structures",component:Object(N.jsx)(Nd,{}),openWhen:[ti.rangesPicking.id],style:"",hidePreferenceKey:"hideStructuresPanel",mode:null}];function Panels(e){var t=e.selectedTool,n=e.displayerMode,a=Object(D.useState)(0),i=Object(O.a)(a,2),r=i[0],o=i[1],c=usePreferences();Object(D.useEffect)((function(){var e=function getDefaultIndex(){var e=hh.findIndex((function(e){return e.openWhen&&e.openWhen.includes(t)}));return-1!==e?e:null}();t&&o(e)}),[t]);var l=Object(D.useCallback)((function(e){return!C()(c,"display.panels.".concat(e.hidePreferenceKey))&&(null==e.mode||e.mode===n)}),[n,c]);return Object(N.jsx)(Vs,{defaultOpenIndex:r,children:hh.map((function(e){return l(e)&&Object(N.jsx)(Rs,{title:e.title,style:e.style,children:e.component},e.title)}))})}var gh=Object(D.memo)(Panels),mh=[Rn,ln,sn,wn,_n,Sn,_t,zt,Dn,Lt,Tn,On,Rt,Nt,It,Ft,Gt,Wt,gn,rn,Bt,"SAVE_AS_SVG","SAVE_DATA_AS_JSON",An,Xt,Vt,Yt,un,Zt];var jh=function checkActionType(e){return!mh.includes(e)},vh=n(763),Oh=function computeDistance(e,t){return["x","y"].reduce((function(n,a){return Math.pow(t[a].delta-e[a].delta,2)+n}),0)};function _nmredataToNmrium(){return(_nmredataToNmrium=Object(Vr.a)(Xr.a.mark((function _callee(e){var t,n,a,i,r,o,c,l,s,u,d,b,f,p,h,g,m;return Xr.a.wrap((function _callee$(j){for(;;)switch(j.prev=j.next){case 0:t={},n=Object(rc.a)(e);try{for(n.s();!(a=n.n()).done;)i=a.value,t[i.name]=i}catch(v){n.e(v)}finally{n.f()}return j.next=5,getSDF(t);case 5:return r=j.sent,j.next=8,vh.a.toJSON({sdf:r[0],zipFiles:t});case 8:o=j.sent,c=o.spectra,l=o.molecules,s={spectra:[],molecules:void 0===l?[]:l},u=Object(rc.a)(c),j.prev=12,u.s();case 14:if((d=u.n()).done){j.next=30;break}if(f=d.value,p=f.source,h=p.zip,g=p.jcamp,!h){j.next=23;break}return j.next=20,addBruker({xy:!0,noContours:!0},h);case 20:j.t0=j.sent,j.next=24;break;case 23:j.t0=m=addJcamp({},g);case 24:m=j.t0,m[0].info.dimension>1?(detectZones(m[0],{}),assignZones(m[0],f.signals)):(detectRanges(m[0],{}),assignRanges(m[0],f.signals)),(b=s.spectra).push.apply(b,Object(Hi.a)(m));case 28:j.next=14;break;case 30:j.next=35;break;case 32:j.prev=32,j.t1=j.catch(12),u.e(j.t1);case 35:return j.prev=35,u.f(),j.finish(35);case 38:return j.abrupt("return",s);case 39:case"end":return j.stop()}}),_callee,null,[[12,32,35,38]])})))).apply(this,arguments)}function getSDF(e){return _getSDF.apply(this,arguments)}function _getSDF(){return(_getSDF=Object(Vr.a)(Xr.a.mark((function _callee2(e){var t,n,a,i,r,o,c;return Xr.a.wrap((function _callee2$(l){for(;;)switch(l.prev=l.next){case 0:t=[],l.t0=Xr.a.keys(e);case 2:if((l.t1=l.t0()).done){l.next=17;break}if(n=l.t1.value,!(a=n.split("/"))[a.length-1].match(/^[^.].+sdf$/)){l.next=15;break}return i=a[a.length-1].replace(/\.sdf/,""),r=a.slice(0,a.length-1).join("/"),l.next=10,e[n].async("string");case 10:o=l.sent,(c=Object(vh.b)("".concat(o),{mixedEOL:!0})).filename=i,c.root=""!==r?"".concat(r,"/"):"",t.push(c);case 15:l.next=2;break;case 17:return l.abrupt("return",t);case 18:case"end":return l.stop()}}),_callee2)})))).apply(this,arguments)}function assignZones(e,t){var n,a=e.zones.values,i=t.slice(),r=Object(rc.a)(a);try{for(r.s();!(n=r.n()).done;){for(var o=n.value,c=[],l=0;l<i.length;l++){for(var s=0,u=i[l],d=0,b=["x","y"];d<b.length;d++){var f=b[d],p=o[f],h=p.from,g=p.to,m=u[f].delta;m>=h&&m<=g&&s++}s>1&&(c.push(u),i.splice(l,1),l--)}if(c.length>0){var j,v=Object(rc.a)(c);try{for(v.s();!(j=v.n()).done;)for(var O=j.value,x=0,y=["x","y"];x<y.length;x++){var k=y[x];if(O[k].diaID){var C=closeSignalIndex(O,o);o.signal[C][k].diaID=O[k].diaID}}}catch(D){v.e(D)}finally{v.f()}}}}catch(D){r.e(D)}finally{r.f()}}function closeSignalIndex(e,t){var n=t.signal;if(1===n.length)return 0;for(var a=0,i=Oh(n[0],e),r=0;r<n.length;r++){var o=Oh(n[r],e);o<i&&(a=r,i=o)}return a}function assignRanges(e,t){var n=e.ranges.values.slice();n.sort((function(e,t){return e.from-t.from})),t.sort((function(e,t){return e.delta-t.delta}));var a,i=Object(rc.a)(n);try{for(i.s();!(a=i.n()).done;){var r,o=a.value,c=o.from,l=o.to,s=[],u=Object(rc.a)(t);try{for(u.s();!(r=u.n()).done;){var d=r.value;if(d.delta>=c&&d.delta<=l){var b=d.jCoupling,f=d.delta,p=d.diaID,h=void 0===p?[]:p,g=d.multiplicity;s.push({j:b,delta:f,diaID:h,multiplicity:g})}if(d.delta>l)break}}catch(m){u.e(m)}finally{u.f()}s.length>0&&(o.signal=s)}}catch(m){i.e(m)}finally{i.f()}e.ranges.values=[],e.ranges.values=mapRanges(n,e)}function handleUpdateCorrelations(e){var t=e.data,n=e.correlations;e.correlations=fp.Build.build(t,n.options,hp()(n.values))}function getActiveData(e){if(e.activeTab){var t=Lf("nucleus")(e.data)[e.activeTab];if(e.displayerMode===Oo.DM_2D)return t;if(e.activeSpectrum&&t){var n=t.findIndex((function(t){return t.id===e.activeSpectrum.id}));if(-1!==n){var a=t[n].info.isFid||!1;t=t.filter((function(e){return e.info.isFid===a}))}}else t=t?t.filter((function(e){return!1===e.info.isFid})):[];var i,r=Object(rc.a)(e.data);try{var o=function _loop(){var e=i.value;t.some((function(t){return t.id===e.id}))?e.display.isVisibleInDomain=!0:e.display.isVisibleInDomain=!1};for(r.s();!(i=r.n()).done;)o()}catch(c){r.e(c)}finally{r.f()}return e.data}return e.data}function getDomain(e){var t=[],n=[],a={},i={},r={};try{t=e.reduce((function(e,t){var n=t.display,a=t.data;if(n.isVisibleInDomain){var r=[a.x[0],a.x[a.x.length-1]];return i[t.id]=r,n.isVisible&&(e=e.concat(r)),e}return e.concat([])}),[]),n=e.reduce((function(e,t){var n=t.display,i=t.data,o=t.integrals;if(n.isVisibleInDomain){var c=Object(it.c)(i.y);if(a[t.id]=c,o.values&&o.values.length>0){var l=o.values[0],s=l.from,u=void 0===s?0:s,d=l.to,b=void 0===d?0:d,f=i.x,p=i.y,h=Object(Xe.o)({x:f,y:p},{from:u,to:b,reverse:!0});r[t.id]=Object(it.c)(h.y)}return n.isVisible&&(e=e.concat(c)),e}return e.concat([])}),[])}catch(o){console.log(o)}return{xDomain:Object(it.c)(t),yDomain:Object(it.c)(n),yDomains:a,xDomains:i,integralYDomain:r}}function get2DDomain(e){var t=[],n=[],a={},i={},r=e.activeTab,o=e.tabActiveSpectrum,c=e.data,l=r.split(",");try{t=c.reduce((function(e,t){return 2===t.info.dimension&&(e=e.concat([t.data.minX,t.data.maxX])),e}),[]),n=c.reduce((function(e,t){var n;return 2===t.info.dimension&&(null===(n=t.info.nucleus)||void 0===n?void 0:n.join(","))===r&&(e=e.concat([t.data.minY,t.data.maxY])),e}),[])}catch(d){console.log(d)}var s=l.map((function(e){var t;return null===(t=o[e])||void 0===t?void 0:t.id})),u=c.reduce((function(e,t){return s.includes(t.id)&&1===t.info.dimension?e.concat(t):e.concat([])}),[]);try{i=u.reduce((function(e,t){var n=t.data.x,a=[n[0],n[n.length-1]];return e[t.id]=a,e}),{}),a=u.reduce((function(e,t){var n=Object(it.c)(t.data.y);return e[t.id]=n,e}),{})}catch(d){console.log(d)}return{xDomain:Object(it.c)(t),yDomain:Object(it.c)(n),yDomains:a,xDomains:i}}function setDomain(e){var t,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=getActiveData(e);e.activeTab&&[Oo.DM_1D,Oo.DM_2D].includes(e.displayerMode)&&(t=e.displayerMode===Oo.DM_1D?getDomain(a):get2DDomain(e),e.xDomain=t.xDomain,e.xDomains=t.xDomains,n?(e.yDomain=t.yDomain,e.displayerMode===Oo.DM_1D?(e.yDomains=Object.keys(t.yDomains).reduce((function(e,n){return e[n]=t.yDomain,e}),{}),e.originDomain=Object(v.a)(Object(v.a)({},t),{},{yDomains:e.yDomains,originYDomains:t.yDomains})):(e.yDomains=t.yDomains,e.originDomain=t),e.integralsYDomains=t.integralYDomain&&t.integralYDomain,e.originIntegralYDomain=t.integralYDomain&&t.integralYDomain):e.originDomain=Object(v.a)(Object(v.a)({},e.originDomain),{},{xDomain:t.xDomain,xDomains:t.xDomains}))}function setMode(e){var t,n=getActiveData(e).filter((function(e){return!0===e.display.isVisibleInDomain}));e.mode=(null===(t=n[0])||void 0===t?void 0:t.info.isFid)?"LTR":"RTL"}function nucluesToString(e){return"string"===typeof e?e:e.join(",")}var xh=function getClosestNumber(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=e.reduce((function(e,n){return Math.abs(n-t)<Math.abs(e-t)?n:e}));return n},yh=function(){function ZoomHistory(){Object(rt.a)(this,ZoomHistory),this.stack=[]}return Object(ot.a)(ZoomHistory,[{key:"push",value:function push(e){this.stack.push(e)}},{key:"pop",value:function pop(){return this.stack.pop()?this.stack[this.stack.length-1]:null}},{key:"getLast",value:function getLast(){return 0===this.stack.length?null:this.stack[this.stack.length-1]}}],[{key:"getInstance",value:function getInstance(e,t){return e[t]&&e[t]instanceof ZoomHistory||(e[t]=new ZoomHistory),e[t]}}]),ZoomHistory}();function changeSpectrumVerticalAlignment(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e.data&&e.data.length>0)if(t||n&&e.data[0].info.isFid&&!e.data.some((function(e){return!1===e.info.isFid}))){var a=e.height/2;e.verticalAlign.flag=!0,e.verticalAlign.value=a,e.verticalAlign.stacked=!1}else e.verticalAlign.flag=!1,e.verticalAlign.value=20,e.verticalAlign.stacked=!1}function setFilterChanges(e,t){var n=e.activeSpectrum.id;if(t===ei.phaseCorrection.id){e.tempData=e.data;var a=function getStrongestPeak(e){var t=e.activeSpectrum,n=e.data[t.index].data,a=Object(it.e)(n.y),i=n.y.findIndex((function(e){return e===a}));return{xValue:n.x[i],yValue:a,index:i}}(e).xValue;e.pivot=a}else if(e.selectedTool===ti.phaseCorrection.id){var i=e.data.findIndex((function(e){return e.id===n}));e.data[i].data=e.tempData[i].data}}function resetTool(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e.selectedOptionPanel=null,t&&(e.selectedTool=ti.zoom.id),e.baseLineZones=[],e.tempData&&(e.tempData=null,setDomain(e))}function resetSelectedTool(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];(e.selectedTool&&ti[e.selectedTool].isFilter||!t)&&resetTool(e)}function getSpectrumID(e,t){return e.tabActiveSpectrum[e.activeTab.split(",")[t]].id}function hasAcceptedSpectrum(e,t){var n=e.activeTab.split(",");return e.tabActiveSpectrum[n[t]]&&!e.data[e.tabActiveSpectrum[n[t]].index].info.isFid}function setMargin(e){if(e.displayerMode===Oo.DM_2D&&e.selectedTool!==ti.slicingTool.id){var t=hasAcceptedSpectrum(e,0)?xo.top:yo.top,n=hasAcceptedSpectrum(e,1)?xo.left:yo.left;e.margin=Object(v.a)(Object(v.a)({},xo),{},{top:t,left:n})}else e.selectedTool===ti.slicingTool.id?e.margin=xo:e.displayerMode===Oo.DM_1D&&(e.margin=yo)}function Processing2DData(e,t){if(e.displayerMode===Oo.DM_2D){var n,a={},i=Object(rc.a)(t[e.activeTab]);try{for(i.s();!(n=i.n()).done;){var r=n.value;a[r.id]=r.processingController.drawContours()}}catch(o){i.e(o)}finally{i.f()}e.contours=a}}function setDisplayerMode(e,t){e.displayerMode=t&&t.some((function(e){return 2===e.info.dimension}))?Oo.DM_2D:Oo.DM_1D}function setTabActiveSpectrum(e,t){var n,a=[],i={},r=Object.keys(t).sort((function(e,t){return e.split(",").length>t.split(",").length?-1:1})),o=Object(rc.a)(r);try{var c=function _loop(){var r=n.value,o=t[r],c=r.split(",").length;if(2===c&&a.push(r),1===o.length){var l=e.data.findIndex((function(e){return e.id===o[0].id}));i[r]={id:o[0].id,index:l}}else{var s=t[r],u=s.length;if(u>=2){var d=s.filter((function(e){return!e.info.isFid}));if(d.length>0&&(2===c||1===c&&u!==d.length)){var b=e.data.findIndex((function(e){return e.id===d[0].id}));i[r]={id:d[0].id,index:b}}else i[r]=null}else i[r]=null}};for(o.s();!(n=o.n()).done;)c()}catch(l){o.e(l)}finally{o.f()}return e.tabActiveSpectrum=i,a}function setTab(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=Object.keys(t).sort((function(e,t){return e.split(",").length>t.split(",").length?-1:1}));if(JSON.stringify(i)!==JSON.stringify(Object.keys(e.tabActiveSpectrum))||a){var r=setTabActiveSpectrum(e,t);r.length>0&&null==n?(e.activeSpectrum=e.tabActiveSpectrum[r[0]],e.activeTab=r[0]):(e.activeSpectrum=n?e.tabActiveSpectrum[n]:n,e.activeTab=n)}else e.activeTab=n,e.activeSpectrum=e.tabActiveSpectrum[n];setDisplayerMode(e,t[e.activeTab]),setMargin(e)}function ToolsActions_setActiveTab(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=Lf("nucleus"),i=a(e.data),r=Object.keys(i),o=t&&r.includes(null!==t&&void 0!==t?t:"")?t:r[0];setTab(e,i,o,n),resetTool(e),Processing2DData(e,i),setDomain(e);var c=yh.getInstance(e.ZoomHistory,e.activeTab),l=c.getLast();l&&(e.xDomain=l.xDomain,e.yDomain=l.yDomain),setMode(e)}function setDataBy1DFilter(e){e.data.y=e.data.re}function getRange_getRange(e,t){var n=t.startX,a=t.endX,i=getXScale(e),r=i.invert(n),o=i.invert(a),c=[];return r>o?(c[0]=o,c[1]=r):(c[0]=r,c[1]=o),c}function changeIntegral(e,t){var n,a=Object(vt.a)(e),i=t.data;if(null===(n=e.activeSpectrum)||void 0===n?void 0:n.id){var r=e.activeSpectrum.index,o=a.data[r],c=e.data[r],l=o.data,s=l.x,u=l.re,d=o.integrals.values.findIndex((function(e){return e.id===i.id}));-1!==d&&(c.integrals.values[d]=Object(v.a)(Object(v.a)({originFrom:i.from,originTo:i.to},i),{},{absolute:Object(Xe.p)({x:s,y:u},{from:i.from,to:i.to,reverse:!0})}),updateIntegralIntegrals(c.integrals))}}function handleChangeIntegralsRaltiveValue(e,t){var n,a=t.id,i=t.value;if(null===(n=e.activeSpectrum)||void 0===n?void 0:n.id){var r=e.activeSpectrum.index;!function changeIntegralsRealtive(e,t,n){var a=e.values.find((function(e){return e.id===t}));if(a){var i=a.absolute/n,r=e.values.reduce((function(e,t,n){var a=t.absolute/i;return e.sum+=a,e.values[n]=Object(v.a)(Object(v.a)({},t),{},{integral:a}),e}),{values:[],sum:0}),o=r.values,c=r.sum;e.values=o,e.options.sum=c}}(e.data[r].integrals,a,i)}}function initMolecule(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={};t.key=e.key||generateID(),t.molfile=e.molfile||"";var n=new Hc.Molecule.fromMolfile(t.molfile),a=n.getMolecularFormula();t.mf=a.formula,t.em=a.absoluteWeight,t.mw=a.relativeWeight,t.svg=n.toSVG(50,50);var i=new Cp.MF(t.mf);return t.atoms=i.getInfo().atoms,t}function addMolfile(e,t){var n,a=Hc.Molecule.fromMolfile(t).getFragments(),i=Object(rc.a)(a);try{for(i.s();!(n=i.n()).done;){var r=n.value,o=r.getMolecularFormula(),c=o.formula,l=o.absoluteWeight,s=o.relativeWeight;e.push(initMolecule({molfile:r.toMolfileV3(),svg:r.toSVG(150,150),mf:c,em:l,mw:s}))}}catch(u){i.e(u)}finally{i.f()}}function LoadActions_setData(e,t){var n=t||{spectra:[],molecules:[],preferences:{},correlations:{},multipleAnalysis:{},exclusionZones:{}},a=n.spectra,i=n.molecules,r=n.preferences,o=n.correlations,c=n.exclusionZones,l=void 0===c?{}:c;e.data=a,e.molecules=function MoleculeManager_fromJSON(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=[],n=0;n<e.length;n++){var a,i=Hc.Molecule.fromMolfile(e[n].molfile).getFragments(),r=Object(rc.a)(i);try{for(r.s();!(a=r.n()).done;){var o=a.value;t.push(initMolecule({molfile:o.toMolfileV3()}))}}catch(c){r.e(c)}finally{r.f()}}return t}(i),e.preferences=r,e.exclusionZones=l,o&&0!==Object.keys(o).length?e.correlations=fp.Build.init(o):e.correlations=fp.Build.init({values:[],options:{tolerance:up,mf:""},state:{}})}function loadJDFFile(e,t){var n,a=function addJDFs(e){var t,n=[],a=Object(rc.a)(e);try{for(a.s();!(t=a.n()).done;){var i=t.value;addJDF(n,i.binary,{display:{name:i.name},source:{jcampURL:i.jcampURL?i.jcampURL:null,file:i}})}}catch(r){a.e(r)}finally{a.f()}return n}(t),i=Object(rc.a)(a);try{for(i.s();!(n=i.n()).done;){var r=n.value;e.data.push(r)}}catch(o){i.e(o)}finally{i.f()}ToolsActions_setActiveTab(e),initZoom1DHandler(e.data),e.isLoading=!1}function loadJcampFile(e,t){var n,a=function addJcamps(e){var t,n=[],a=Object(rc.a)(e);try{for(a.s();!(t=a.n()).done;){var i=t.value;addJcamp(n,i.binary,{display:{name:i.name},source:{jcampURL:i.jcampURL?i.jcampURL:null,file:i}})}}catch(r){a.e(r)}finally{a.f()}return n}(t),i=Object(rc.a)(a);try{for(i.s();!(n=i.n()).done;){var r=n.value;e.data.push(r)}}catch(o){i.e(o)}finally{i.f()}changeSpectrumVerticalAlignment(e,!1,!0),ToolsActions_setActiveTab(e),initZoom1DHandler(e.data),e.isLoading=!1}function getRangeIndex(e,t,n){return e.data[t].ranges.values.findIndex((function(e){return e.id===n}))}function handleUnlinkRange(e,t){var n;if(null===(n=e.activeSpectrum)||void 0===n?void 0:n.id){var a=e.activeSpectrum.index,i=t.payload,r=i.assignmentData,o=i.rangeData,c=void 0===o?null:o,l=i.signalIndex,s=void 0===l?-1:l;if(c){var u=getRangeIndex(e,a,c.id),d=hp()(e.data[a].ranges.values[u]),b={},f=c.id;c&&-1===s?b=gr(d,"range"):(b=gr(d,"signal",{signalIndex:s}),f=c.signal[s].id),jr(r,[{id:f}]),e.data[a].ranges.values[u]=b}else{var p=e.data[a].ranges.values.map((function(e){return gr(e)}));e.data[a].ranges.values=p,jr(r,p)}}}function handleResizeRange(e,t){var n;if(null===(n=e.activeSpectrum)||void 0===n?void 0:n.id){var a=e.activeSpectrum.index;!function changeRange(e,t){var n=t.from,a=t.to,i=e.data,r=i.x,o=i.re,c=e.ranges.values.findIndex((function(e){return e.id===t.id})),l=Object(Xe.p)({x:r,y:o},{from:n,to:a,reverse:!0});-1!==c&&(e.ranges.values[c]=Object(v.a)(Object(v.a)(Object(v.a)({},e.ranges.values[c]),{},{originFrom:n,originTo:a},t),{},{absolute:l}),updateIntegralRanges(e))}(e.data[a],t.data)}}function handleAddRange(e,t){var n,a=getRange_getRange(e,{startX:t.startX,endX:t.endX});if(null===(n=e.activeSpectrum)||void 0===n?void 0:n.id){var i=e.activeSpectrum.index,r=Object(O.a)(a,2),o=r[0],c=r[1];!function addRange(e,t){var n=t.from,a=t.to,i=e.data,r=i.x,o=i.re,c=Object(Xe.p)({x:r,y:o},{from:n,to:a,reverse:!0}),l=pc(r,o,n,a,e.info.originFrequency);try{var s={id:generateID(),from:n,to:a,absolute:c,signal:[Object(v.a)({id:generateID()},l)],kind:dr};e.ranges.values=e.ranges.values.concat(mapRanges([s],e)),updateIntegralRanges(e)}catch(u){throw new Error("Could not calculate the multiplicity")}}(e.data[i],{from:o,to:c}),handleOnChangeRangesData(e)}}function handleChangeRangeRaltiveValue(e,t){var n,a=t.id,i=t.value;if(null===(n=e.activeSpectrum)||void 0===n?void 0:n.id){var r=e.activeSpectrum.index;!function changeRangesRealtive(e,t,n){var a=e.ranges.values.find((function(e){return e.id===t}));if(a){var i=a.absolute/n;e.ranges.options.sum=n/a.integral*e.ranges.options.sum,e.ranges.values=e.ranges.values.map((function(e){return Object(v.a)(Object(v.a)({},e),{},{integral:e.absolute/i})}))}}(e.data[r],a,i)}}function handleOnChangeRangesData(e){handleUpdateCorrelations(e)}var kh=1;function add2dZoneHandler(e,t){var n;if(null===(n=e.activeSpectrum)||void 0===n?void 0:n.id){var a=e.activeSpectrum.index,i=function get2DRange(e,t){var n=t.startX,a=t.startY,i=t.endX,r=t.endY,o=get2DXScale(e),c=get2DYScale(e),l=1e6*n>1e6*i?i:n,s=1e6*n>1e6*i?n:i,u=1e6*a>1e6*r?r:a,d=1e6*a>1e6*r?a:r,b=c.invert(u),f=o.invert(l),p=c.invert(d);return{fromX:f,fromY:b,toX:o.invert(s),toY:p}}(e,t);!function detectZonesManual(e,t){var n,a=getDetectionZones(e,t),i=getShift(e),r=i.xShift,o=i.yShift,c=Object(rc.a)(a);try{for(c.s();!(n=c.n()).done;){var l=n.value,s=l.fromTo;e.zones.values.push({id:generateID(),x:s[0],y:s[1],signal:[{id:generateID(),peak:l.peaks,x:{originDelta:l.shiftX-r,delta:l.shiftX,diaID:[]},y:{originDelta:l.shiftY-o,delta:l.shiftY,diaID:[]},kind:"signal"}],kind:dr})}}catch(u){c.e(u)}finally{c.f()}}(e.data[a],{selectedZone:i,thresholdFactor:kh,convolutionByFFT:!1}),handleOnChangeZonesData(e)}}function getZoneIndex(e,t,n){return e.data[t].zones.values.findIndex((function(e){return e.id===n}))}function handleUnlinkZone(e,t){var n,a=Object(vt.a)(e);if(null===(n=a.activeSpectrum)||void 0===n?void 0:n.id){var i,r=a.activeSpectrum.index,o=t.payload,c=o.zoneData,l=o.assignmentData,s=o.isOnZoneLevel,u=o.signalIndex,d=o.axis,b=Object(rc.a)(c?[c]:a.data[r].zones.values);try{for(b.s();!(i=b.n()).done;){var f=i.value,p=Lo(hp()(f),s,u,d);zo(l,s?[{id:p.id}]:[{id:p.signal[u].id}],d);var h=getZoneIndex(a,r,p.id);e.data[r].zones.values[h]=p}}catch(g){b.e(g)}finally{b.f()}}}function handleOnChangeZonesData(e){handleUpdateCorrelations(e)}function setMoleculeHandler(e,t,n){!function MoleculeManager_setMolfile(e,t,n){var a=Hc.Molecule.fromMolfile(t).getFragments();if(a.length>1){e=this.molecules.filter((function(e){return e.key!==n}));var i,r=Object(rc.a)(a);try{for(r.s();!(i=r.n()).done;){var o=i.value,c=o.getMolecularFormula(),l=c.formula,s=c.absoluteWeight,u=c.relativeWeight;e.push(new initMolecule({molfile:o.toMolfileV3(),svg:o.toSVG(150,150),mf:l,em:s,mw:u}))}}catch(j){r.e(j)}finally{r.f()}}else if(1===a.length){var d=a[0],b=d.getMolecularFormula(),f=b.formula,p=b.absoluteWeight,h=b.relativeWeight,g=initMolecule({molfile:d.toMolfileV3(),svg:d.toSVG(150,150),mf:f,em:p,mw:h,key:n}),m=e.findIndex((function(e){return e.key===n}));e.splice(m,1,g)}}(e.molecules,t,n)}pi.on("noiseFactorChanged",(function(e){kh=e}));var Ch=n(198);function handleAutoPeakPicking(e,t){var n;if(null===(n=e.activeSpectrum)||void 0===n?void 0:n.id){e.selectedTool=ti.zoom.id,e.selectedOptionPanel=null;var a=e.activeSpectrum.index,i=e.data[a],r=Object(O.a)(e.xDomain,2),o=r[0],c=r[1],l=Object(Xe.i)(i.data.x,o),s=Object(Xe.i)(i.data.x,c),u=function autoPeakPicking(e,t){var n=t.minMaxRatio,a=t.maxNumberOfPeaks,i=t.noiseFactor,r=t.lookNegative,o=t.windowFromIndex,c=t.windowToIndex,l=Object(Ch.a)(e.data.re.map((function(e){return Math.abs(e)}))),s=e.data,u=s.re,d=s.x;void 0!==o&&void 0!==c&&(d=d.slice(o,c),u=u.slice(o,c));var b=Object(bc.e)({x:d,y:u},{lookNegative:r,noiseLevel:l*i,minMaxRatio:n,realTopDetection:!0,maxCriteria:!0,smoothY:!1,sgOptions:{windowSize:15,polynomial:3}});b.sort((function(e,t){return t.y-e.y})),a<b.length&&(b=b.slice(0,a));var f=getShiftX(e),p=(d[d.length-1]-d[0])/1e4;return b.reduce((function(t,n){var a,i=Object(rc.a)(e.peaks.values);try{for(i.s();!(a=i.n()).done;){var r=a.value.delta;if(Math.abs(n.x-r)<p)return t}}catch(o){i.e(o)}finally{i.f()}return t.push({id:generateID(),originDelta:n.x-f,delta:n.x,intensity:n.y,width:n.width}),t}),[])}(e.data[a],Object(v.a)(Object(v.a)({},t),{},{windowFromIndex:l,windowToIndex:s}));i.peaks.values=i.peaks.values.concat(u)}}function handleDeleteSpectraRanges(e,t){var n=t.colKey;!function deleteSpectraAnalysis(e,t,n){var a=Object.entries(e[n].values).reduce((function(e,n){return delete n[1][t],n[1]&&Object.keys(n[1]).length>0?(e[n[0]]=n[1],e):e}),{});delete e[n].options.columns[t],e[n].values=a,e[n].values=refreshCalculation(e,n),Hd()(e[n].values)&&(Vd[n]=[])}(e.spectraAnalysis,n,e.activeTab)}function handleSetcolumns(e,t){var n=t.payload;!function setColumn(e,t,n){var a=n.columns,i=n.code;init(e,t),e[t].options.code=i,e[t].options.columns=Object.values(a).reduce((function(e,t){var n=Object(v.a)({},t);return delete n.tempKey,e[t.tempKey]=n,e}),{});var r=e[t].options.columns,o=Object.entries(e[t].values).reduce((function(e,t){var n=Object(O.a)(t,2),i=n[0],r=n[1];return e[i]=Object.keys(a).reduce((function(e,t){var n=a[t].tempKey;return r[t]&&(e[n]=r[t]),e}),{}),e}),{});o=Object.entries(o).reduce((function(e,t){return e[t[0]]=Object.keys(r).reduce((function(e,n){var a=r[n].type===Xd;return e[n]=a?{colKey:n,value:calculate(r,o[t[0]],r[n].formula)}:Object(v.a)(Object(v.a)({},t[1][n]),{},{colKey:n}),e}),{}),e}),{}),e[t].values=o}(e.spectraAnalysis,e.activeTab,n)}function handleFiltercolumn(e,t){var n=t.payload,a=n.columnKey,i=n.valueKey;!function changeColumnValueKey(e,t,n,a){e[t].options.columns[n].valueKey=a,e[t].values=refreshCalculation(e,t)}(e.spectraAnalysis,e.activeTab,a,i)}function getReferenceShift(e,t){var n=t.from,a=t.to,i=t.nbPeaks,r=t.targetX,o=t.reference;if(o){var c=function References_getRange(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.nucleus,n=void 0===t?"1H":t,a=e.reference,i=void 0===a?"tms":a;if(!Yd[n])throw new Error("Nucleus not found: ",n);var r=Yd[n][i.toLowerCase()];if(!r)throw new Error("Reference not found: ",i);return{from:r.delta-.05,to:r.delta+.05,delta:r.delta,nbPeaks:r.nbPeaks}}({reference:o,nucleus:e.nucleus});n=c.from,a=c.to,i=c.nbPeaks,r=c.delta}var l=e.data,s=l.re,u=l.x;return Object(Xe.n)({x:u,y:s},{from:n,to:a},{nbPeaks:i,targetX:r})}function checkIsVisible2D(e){return!1!==e.display.isPositiveVisible||!1!==e.display.isNegativeVisible}function setVisible(e,t){2===e.info.dimension?(e.display.isPositiveVisible=t,e.display.isNegativeVisible=t,e.display.isVisible=checkIsVisible2D(e)):e.display.isVisible=t}var Dh={data:null,contours:null,tempData:null,xDomain:[],yDomain:[],yDomains:{},xDomains:{},originDomain:{},integralsYDomains:{},originIntegralYDomain:{},selectedTool:ti.zoom.id,selectedFilter:null,selectedOptionPanel:null,activeTab:null,width:0,height:0,margin:{top:10,right:20,bottom:70,left:0},activeSpectrum:null,mode:"RTL",zoomFactor:{scale:1},integralZoomFactor:{scale:.5},molecules:[],verticalAlign:{flag:!1,stacked:!1,value:20},history:{past:[],present:null,future:[],hasUndo:!1,hasRedo:!1},pivot:0,isLoading:!1,preferences:{},baseLineZones:[],keysPreferences:{},displayerMode:Oo.DM_1D,tabActiveSpectrum:{},spectraAnalysis:{},correlations:fp.Build.init({values:[],options:{tolerance:up,mf:""},state:{}}),displayerKey:"",ZoomHistory:{},overDisplayer:!1,exclusionZones:{}};function dispatchMiddleware(e){return function(t){switch(t.type){case yt:if(t.payload){var n=t.payload,a=n.spectra,i=Object(ge.a)(n,["spectra"]);fromJSON(a).then((function(n){t.payload=Object(v.a)({spectra:n},i),e(t)}))}else e(t);break;case kt:var r=JSON.parse(t.files[0].binary.toString());fromJSON(r.spectra).then((function(n){t.payload=Object.assign(r,{spectra:n}),e(t)}));break;case wt:var o,c=Object(rc.a)(t.files);try{for(c.s();!(o=c.n()).done;){var l=o.value;addBruker({display:{name:l.name}},l.binary).then((function(n){t.payload=n,e(t)}))}}catch(u){c.e(u)}finally{c.f()}break;case Dt:(function nmredataToNmrium(e){return _nmredataToNmrium.apply(this,arguments)})(t.files).then((function(n){t.payload=n,e(t)}));break;case la:var s=Bc.a.Molecule.fromMolfile(t.payload.mol.molfile);Object(bc.b)(s,{}).then((function(n){t.payload.fromMolfile=n,e(t)}));break;default:e(t)}}}var Sh=Object(vt.b)((function innerSpectrumReducer(e,t){switch(e.actionType=t.type,t.type){case yt:return function initiate(e,t){e.displayerKey=generateID(),LoadActions_setData(e,t.payload),initZoom1DHandler(e.data),changeSpectrumVerticalAlignment(e,C()(e.preferences,"display.center",null),!0),ToolsActions_setActiveTab(e),e.isLoading=!1}(e,t);case Sn:return function setIsLoading(e,t){e.isLoading=t}(e,t.isLoading);case kt:return function handleLoadJsonFile(e,t){LoadActions_setData(e,t.payload),changeSpectrumVerticalAlignment(e,C()(e.preferences,"display.center",null),!0),ToolsActions_setActiveTab(e),initZoom1DHandler(e.data),e.isLoading=!1}(e,t);case Ct:return loadJcampFile(e,t.files);case Tt:return loadJDFFile(e,t.files);case St:return function handleLoadMOLFile(e,t){var n,a=Object(rc.a)(t);try{for(a.s();!(n=a.n()).done;){var i=n.value;addMolfile(e.molecules,i.binary.toString())}}catch(r){a.e(r)}finally{a.f()}e.isLoading=!1}(e,t.files);case wt:return function handleLoadZIPFile(e,t){e.data=t.payload,ToolsActions_setActiveTab(e),initZoom1DHandler(e.data),e.isLoading=!1}(e,t);case Dt:return function handleLoadNmredata(e,t){LoadActions_setData(e,t.payload),changeSpectrumVerticalAlignment(e,C()(e.preferences,"display.center",null),!0),ToolsActions_setActiveTab(e),initZoom1DHandler(e.data),e.isLoading=!1}(e,t);case Mt:return function addPeak(e,t){var n,a=Object(vt.a)(e);if((null===(n=e.activeSpectrum)||void 0===n?void 0:n.id)&&a){var i=e.activeSpectrum.index,r=getRange_getRange(e,{startX:t.x-10,endX:t.x+10}),o=Object(O.a)(r,2),c=o[0],l=o[1],s=lookupPeak(a.data[i].data,{from:c,to:l}),u=getShiftX(e.data[i]);if(s){var d={id:generateID(),originDelta:s.x-u,delta:s.x,intensity:s.y};e.data[i].peaks.values.push(d)}}}(e,t.mouseCoordinates);case At:return function addPeaks(e,t){var n=Object(vt.a)(e);if(e.activeSpectrum){var a=e.activeSpectrum.index,i=n.data[a],r=getRange_getRange(e,{startX:t.startX,endX:t.endX}),o=Object(O.a)(r,2),c=o[0],l=o[1];if(c!==l){var s=lookupPeak(i.data,{from:c,to:l}),u=getShiftX(e.data[a]);if(s&&!i.peaks.values.some((function(e){return e.delta===s.x}))){var d={id:generateID(),originDelta:s.x-u,delta:s.x,intensity:s.y};e.data[a].peaks.values.push(d)}}}}(e,t);case Et:return function deletePeak(e,t){var n=e.activeSpectrum.index,a=Object(vt.a)(e);if(null==t)e.data[n].peaks.values=[];else{var i=a.data[n].peaks.values.findIndex((function(e){return e.id===t.id}));e.data[n].peaks.values.splice(i,1)}}(e,t.data);case Ut:return function addIntegral(e,t){var n,a=Object(vt.a)(e),i=getRange_getRange(e,{startX:t.startX,endX:t.endX}),r=Object(O.a)(i,2),o=r[0],c=r[1];if((null===(n=e.activeSpectrum)||void 0===n?void 0:n.id)&&a){var l=e.activeSpectrum,s=l.id,u=l.index,d=e.data[u],b=d.data,f=b.x,p=b.re,h=getShiftX(d),g={id:generateID(),originFrom:o-h,originTo:c-h,from:o,to:c,absolute:Object(Xe.p)({x:f,y:p},{from:o,to:c,reverse:!0}),kind:"signal"};if(d.integrals.values.push(g),updateIntegralIntegrals(d.integrals),1===d.integrals.values.length){var m=d.integrals.values[0],j=m.from,v=void 0===j?0:j,x=m.to,y=void 0===x?0:x,k=d.data,C=k.x,D=k.y,S=Object(Xe.o)({x:C,y:D},{from:v,to:y,reverse:!0}),w=Object(it.c)(S.y);e.integralsYDomains[s]=w,e.originIntegralYDomain[s]=w,setIntegralZoom(e.integralZoomFactor.scale,e)}}}(e,t);case Kt:return function deleteIntegral(e,t){var n=Object(vt.a)(e),a=e.activeSpectrum.index,i=t.integralID,r=e.data[a];if(null==i)r.integrals.values=[];else{var o=n.data[a].integrals.values.findIndex((function(e){return e.id===i}));r.integrals.values.splice(o,1),updateIntegralIntegrals(r.integrals)}}(e,t);case Mn:case cn:return changeIntegral(e,t);case un:return function handleChangeIntegralZoom(e,t){var n=t.deltaY,a=t.deltaMode;ht.wheel(n,a),setIntegralZoom(ht.getScale(),e)}(e,t);case En:return function handleChangeIntegralSum(e,t){var n;if(null===(n=e.activeSpectrum)||void 0===n?void 0:n.id){var a=e.activeSpectrum,i=a.index,r=a.id;e.data[i].integrals.options.sum=t,updateIntegralIntegrals(e.data[i].integrals),e.integralsYDomains||(e.integralsYDomains[r]=e.yDomains[r])}}(e,t.value);case Jn:return handleChangeIntegralsRaltiveValue(e,t);case _t:return function setOriginalDomain(e,t){e.originDomain=t}(e,t.domain);case It:return function setXDomain(e,t){e.xDomain=t}(e,t.xDomain);case Ft:return function setYDomain(e,t){e.yDomain=t}(e,t.yDomain);case Rt:return function setWidth(e,t){e.width=t}(e,t.width);case Nt:return function handleSetDimensions(e,t,n){e.width=t,e.height=n}(e,t.width,t.height);case Lt:return function setSelectedTool(e,t){(null===e||void 0===e?void 0:e.data.length)>0&&(t?(t!==e.selectedTool&&resetTool(e,!1),e.selectedTool=t,ti[t].hasOptionPanel&&(e.selectedOptionPanel=t),ti[t].isFilter&&setFilterChanges(e,t)):resetTool(e,!1),setMargin(e))}(e,t.selectedTool);case wn:return resetSelectedTool(e);case Dn:return function setSelectedOptionPanel(e,t){e.selectedOptionPanel=t}(e,t.selectedOptionPanel);case Bt:return function zoomOut(e,t){if((null===e||void 0===e?void 0:e.data.length)>0){var n=t.zoomType,a=t.trackID,i=yh.getInstance(e.ZoomHistory,e.activeTab);if(e.displayerMode===Oo.DM_1D)switch(n){case gt:e.xDomain=e.originDomain.xDomain;break;case mt:setZoom(e,.8);break;case jt:var r=i.pop();e.xDomain=r?r.xDomain:e.originDomain.xDomain,setZoom(e,.8);break;default:e.xDomain=e.originDomain.xDomain,setZoom(e,.8)}else{var o=e.originDomain,c=o.xDomain,l=o.yDomain,s=o.yDomains;switch(a){case mo.TOP_1D:var u=e.tabActiveSpectrum[e.activeTab.split(",")[0]].id;e.xDomain=c,e.yDomains[u]=s[u];break;case mo.LEFT_1D:var d=e.tabActiveSpectrum[e.activeTab.split(",")[1]].id;e.yDomain=l,e.yDomains[d]=s[d];break;case mo.CENTER_2D:var b=i.pop();e.xDomain=b?b.xDomain:c,e.yDomain=b?b.yDomain:l;break;default:e.xDomain=c,e.yDomain=l,e.yDomains=s}}}}(e,t);case Pt:return function shiftSpectrumAlongXAxis(e,t){var n;if(null===(n=e.activeSpectrum)||void 0===n?void 0:n.id){var a=e.activeSpectrum.index;applyFilter(e.data[a],[{name:ei.shiftX.id,options:t}]),updateXShift(e.data[a]),resetSelectedTool(e),setDataBy1DFilter(e.data[a]),setDomain(e)}}(e,t.shiftValue);case pn:return function applyZeroFillingFilter(e,t){var n;if(null===(n=e.activeSpectrum)||void 0===n?void 0:n.id){var a=e.activeSpectrum.index,i=[{name:ei.zeroFilling.id,options:t.zeroFillingSize},{name:ei.lineBroadening.id,options:t.lineBroadeningValue}];applyFilter(e.data[a],i),resetSelectedTool(e),setDataBy1DFilter(e.data[a]),setDomain(e),setMode(e)}}(e,t.value);case hn:return function applyFFTFilter(e){var t;if(null===(t=e.activeSpectrum)||void 0===t?void 0:t.id){var n=e.activeSpectrum.index;applyFilter(e.data[n],[{name:ei.fft.id,options:{}}]),resetSelectedTool(e),setDataBy1DFilter(e.data[n]),changeSpectrumVerticalAlignment(e,!1,!0),setDomain(e),setMode(e)}}(e);case mn:return function applyManualPhaseCorrectionFilter(e,t){var n;if(null===(n=e.activeSpectrum)||void 0===n?void 0:n.id){var a=e.activeSpectrum.index,i=t.ph0,r=t.ph1,o=e.data[a],c=xh(o.data.x,e.pivot);i-=r*o.data.x.indexOf(c)/o.data.y.length,applyFilter(e.data[a],[{name:ei.phaseCorrection.id,options:{ph0:i,ph1:r}}]),resetSelectedTool(e),setDataBy1DFilter(e.data[a]),e.tempData=null,setDomain(e)}}(e,t.value);case jn:return function applyAutoPhaseCorrectionFilter(e){var t;if(null===(t=e.activeSpectrum)||void 0===t?void 0:t.id){var n=e.activeSpectrum.index,a=e.tempData[n],i=a.data,r=autoPhaseCorrection_apply({data:{x:i.x,re:i.y,im:i.im},info:a.info}),o=r.data,c=r.ph0,l=r.ph1,s=o.im,u=o.re;e.tempData[n].data.im=s,e.tempData[n].data.y=u,applyFilter(e.data[n],[{name:ei.phaseCorrection.id,options:{ph0:c,ph1:l}}]),resetSelectedTool(e),setDataBy1DFilter(e.data[n]),e.tempData=null,setDomain(e)}}(e);case vn:return function applyAbsoluteFilter(e){var t;if(null===(t=e.activeSpectrum)||void 0===t?void 0:t.id){var n=e.activeSpectrum.index;applyFilter(e.data[n],[{name:ei.absolute.id,options:{}}]),resetSelectedTool(e),setDataBy1DFilter(e.data[n]),e.tempData=null,setDomain(e)}}(e);case gn:return function calculateManualPhaseCorrection(e,t){var n=e.tempData,a=e.activeSpectrum.index,i=n[a],r=i.data,o=r.x,c=r.y,l=r.im,s=i.info,u=t.ph0,d=t.ph1,b=xh(n[a].data.x,e.pivot),f={data:{x:o,re:c,im:l},info:s};phaseCorrection_apply(f,{ph0:u-=d*n[a].data.x.indexOf(b)/c.length,ph1:d});var p=f.data,h=p.im,g=p.re;e.tempData[a].data.im=h,e.tempData[a].data.y=g}(e,t.value);case dn:return function FiltersActions_enableFilter(e,t,n){var a;if(null===(a=e.activeSpectrum)||void 0===a?void 0:a.id){var i,r,o=e.activeSpectrum.index;FiltersManager_enableFilter(e.data[o],t,n),1===(null===(i=e.data[o].info)||void 0===i?void 0:i.dimension)?(updateXShift(e.data[o]),setDataBy1DFilter(e.data[o])):2===(null===(r=e.data[o].info)||void 0===r?void 0:r.dimension)&&updateShift(e.data[o]),resetSelectedTool(e),setDomain(e),setMode(e);var c=yh.getInstance(e.ZoomHistory,e.activeTab).getLast();c&&(e.xDomain=c.xDomain,e.yDomain=c.yDomain)}}(e,t.id,t.checked);case bn:return function FiltersActions_deleteFilter(e,t){var n,a=t.payload.id;if(null===(n=e.activeSpectrum)||void 0===n?void 0:n.id){var i,r,o=e.activeSpectrum.index;deleteFilter(e.data[o],a),1===(null===(i=e.data[o].info)||void 0===i?void 0:i.dimension)?(updateXShift(e.data[o]),setDataBy1DFilter(e.data[o])):2===(null===(r=e.data[o].info)||void 0===r?void 0:r.dimension)&&updateShift(e.data[o]),resetSelectedTool(e),setDomain(e),setMode(e)}}(e,t);case fn:return function deleteSpectraFilter(e,t){var n=t.payload.filterType;if(e.activeTab){var a,i=Object(rc.a)(e.data);try{var r=function _loop(){var t,i,r=a.value;nucluesToString(null===r||void 0===r||null===(t=r.info)||void 0===t?void 0:t.nucleus)===e.activeTab&&((null===(i=r.filters)||void 0===i?void 0:i.filter((function(e){return e.name===n})))||[]).forEach((function(e){var t,n;deleteFilter(r,e.id),1===(null===(t=r.info)||void 0===t?void 0:t.dimension)?(updateXShift(r),setDataBy1DFilter(r)):2===(null===(n=r.info)||void 0===n?void 0:n.dimension)&&updateShift(r)}))};for(i.s();!(a=i.n()).done;)r()}catch(o){i.e(o)}finally{i.f()}resetSelectedTool(e),setDomain(e),setMode(e)}}(e,t);case Yn:return function filterSnapshotHandler(e,t){var n;if(null===(n=e.activeSpectrum)||void 0===n?void 0:n.id){var a=e.activeSpectrum.index;if(t.id){var i=e.data[a].filters.findIndex((function(e){return e.id===t.id})),r=e.data[a].filters.slice(0,i+1);reapplyFilters(e.data[a],r)}else reapplyFilters(e.data[a]);resetSelectedTool(e),setDomain(e),setMode(e)}}(e,t);case ba:return function handleMultipleSpectraFilter(e,t){if(e.data&&e.data.length>0){var n,a=Object(rc.a)(e.data);try{for(a.s();!(n=a.n()).done;){var i,r=n.value;1===(null===(i=r.info)||void 0===i?void 0:i.dimension)&&r.info.nucleus===e.activeTab&&Array.isArray(t.payload)&&(applyFilter(r,t.payload.map((function(t){if(t.name===ei.equallySpaced.id){var n=e.exclusionZones[e.activeTab]||[];return Object(v.a)(Object(v.a)({},t),{},{options:Object(v.a)(Object(v.a)({},t.options),{},{exclusions:n})})}return t}))),r.data.y=r.data.re)}}catch(o){a.e(o)}finally{a.f()}}setDomain(e)}(e,t);case Xt:return function handleSpectrumVisibility(e,t){if(Array.isArray(t.id)){var n=t.id;if(0===n.length){var a,i=Object(rc.a)(e.data);try{for(i.s();!(a=i.n()).done;)setVisible(a.value,!1)}catch(s){i.e(s)}finally{i.f()}}else{var r,o=Object(rc.a)(e.data);try{for(o.s();!(r=o.n()).done;){var c=r.value;n.includes(c.id)?setVisible(c,!0):setVisible(c,!1)}}catch(s){o.e(s)}finally{o.f()}}}else{var l=e.data.findIndex((function(e){return e.id===t.id}));e.data[l].display[t.key]=t.value,2===e.data[l].info.dimension&&(e.data[l].display.isVisible=checkIsVisible2D(e.data[l]))}}(e,t);case Vt:return function handleChangePeaksMarkersVisibility(e,t){var n,a=Object(rc.a)(e.data);try{var i=function _loop(){var e,a=n.value;1===(null===(e=a.info)||void 0===e?void 0:e.dimension)&&t.some((function(e){return e.id===a.id}))?a.display.isPeaksMarkersVisible=!0:a.display.isPeaksMarkersVisible=!1};for(a.s();!(n=a.n()).done;)i()}catch(r){a.e(r)}finally{a.f()}}(e,t.data);case Yt:return function SpectrumsActions_handleChangeActiveSpectrum(e,t){var n=!1;if(t){var a=e.data.findIndex((function(e){return e.id===t.id})),i=e.data.findIndex((function(t){var n;return t.id===(null===(n=e.activeSpectrum)||void 0===n?void 0:n.id)}));if(-1!==a){var r=e.data[a];r.display.isVisible=!0,n=-1!==i?e.data[i].info.isFid!==r.info.isFid:r.info.isFid||!1}t=Object(v.a)(Object(v.a)({},t),{},{index:a}),e.activeSpectrum=t,e.tabActiveSpectrum[e.activeTab]=t}else e.activeSpectrum=null,e.tabActiveSpectrum[e.activeTab]=null,n=!1;n&&(setDomain(e),setMode(e))}(e,t.data);case Zt:return function handleChangeSpectrumColor(e,t){var n=t.id,a=t.color,i=t.key,r=Object(vt.a)(e).data.findIndex((function(e){return e.id===n}));-1!==r&&(e.data[r].display[i]=a)}(e,t.data);case Ht:return function changeSpectrumSetting(e,t){var n=t.id,a=t.display,i=Object(vt.a)(e).data.findIndex((function(e){return e.id===n}));-1!==i&&(e.data[i].display=a)}(e,t);case aa:return function alignSpectraHandler(e,t){if(e.data&&e.data.length>0){var n,a=Object(rc.a)(e.data);try{for(a.s();!(n=a.n()).done;){var i,r,o=n.value;if(1===(null===(i=o.info)||void 0===i?void 0:i.dimension)&&o.info.nucleus===e.activeTab&&!(null===(r=o.info)||void 0===r?void 0:r.isFid)){var c=getReferenceShift(o,Object(v.a)({},t.payload));applyFilter(o,[{name:ei.shiftX.id,options:c}])}}}catch(l){a.e(l)}finally{a.f()}}setDomain(e),setMode(e)}(e,t);case Wt:return function handleToggleRealImaginaryVisibility(e){if(null!=e.activeSpectrum){var t=e.activeSpectrum.index;if(e.data[t].display.isRealSpectrumVisible=!e.data[t].display.isRealSpectrumVisible,e.data[t].display.isRealSpectrumVisible){var n=e.data[t].data.re;null!==n&&void 0!==n&&(e.data[t].data.y=n)}else{var a=e.data[t].data.im;null!==a&&void 0!==a&&(e.data[t].data.y=a)}setDomain(e)}}(e);case Gt:return function ToolsActions_handleZoom(e,t){var n=t.deltaY,a=t.deltaMode,i=t.trackID;if(i)switch(i){case mo.TOP_1D:Zoom_wheel(n,a,e,getSpectrumID(e,0)),setZoom1D(e,e.margin.top,10,0);break;case mo.LEFT_1D:Zoom_wheel(n,a,e,getSpectrumID(e,1)),setZoom1D(e,e.margin.left,10,1)}else Zoom_wheel(n,a,e),setZoom(e)}(e,t);case sa:return function setSpectraSameTopHandler(e){e.displayerMode===Oo.DM_1D&&(e.originDomain.yDomains=e.originDomain.originYDomains,setZoom(e,.8))}(e);case ua:return function resetSpectraScale(e){e.displayerMode===Oo.DM_1D&&(e.yDomains=Object.keys(e.yDomains).reduce((function(t,n){return t[n]=e.originDomain.yDomain,t}),{}),e.originDomain.yDomains=e.yDomains,e.yDomain=e.originDomain.yDomain)}(e);case rn:return function handleChangeSpectrumDisplayMode(e){var t=Object(vt.a)(e),n=e.activeSpectrum,a=e.height,i=e.activeTab,r=20;if(n){var o=n.index;t.data[o].info.isFid&&(r=a/2)}if(e.verticalAlign.flag=!e.verticalAlign.stacked,e.verticalAlign.stacked=!e.verticalAlign.stacked,e.verticalAlign.stacked){var c=t.data.filter((function(e){return e.info.nucleus===i})).length;e.verticalAlign.value=Math.floor(a/(c+2))}else e.verticalAlign.value=r}(e);case qt:return function addMoleculeHandler(e,t){addMolfile(e.molecules,t)}(e,t.molfile);case Jt:return setMoleculeHandler(e,t.molfile,t.key);case $t:return function deleteMoleculeHandler(e,t){var n=t.payload,a=n.key,i=n.assignmentData;e.displayerMode===Oo.DM_1D&&handleUnlinkRange(e,{payload:{assignmentData:i,rangeData:null}}),e.displayerMode===Oo.DM_2D&&handleUnlinkZone(e,{payload:{assignmentData:i,zoneData:null}});var r=e.molecules.findIndex((function(e){return e.key===a}));e.molecules.splice(r,1)}(e,t);case la:return function predictSpectraFromMolculeHandler(e,t){var n=t.payload,a=n.fromMolfile,i=n.options,r=Object(bc.d)(a.signals,{}),o=r.x,c=r.y,l=null;if(i.spectra["1h"]){var s=initiateDatum1D({data:{x:o,im:null,re:c},info:{nucleus:"1H"}});l=s.id,s.ranges.values=mapRanges(a.ranges,s),updateIntegralRanges(s),e.data.push(s);var u={id:l,index:e.data.length-1};e.tabActiveSpectrum["1H"]=u,e.activeSpectrum=u}ToolsActions_setActiveTab(e),initZoom1DHandler(e.data),setZoom(e,.9,l),e.isLoading=!1}(e,t);case tn:return function handleSetMF(e,t){var n=Object(vt.a)(e),a=n.data,i=n.correlations,r=t.mf;""!==i.options.mf&&i.options.mf===r||(e.correlations=fp.Build.build(a,Object(v.a)(Object(v.a)({},i.options),{},{mf:r}),hp()(i.values)))}(e,t.payload);case nn:return function handleSetTolerance(e,t){var n=Object(vt.a)(e),a=n.data,i=n.correlations,r=t.tolerance;e.correlations=fp.Build.build(a,Object(v.a)(Object(v.a)({},i.options),{},{tolerance:r}),hp()(i.values))}(e,t.payload);case Qt:return function handleSetCorrelation(e,t){var n=Object(vt.a)(e).correlations,a=t.id,i=t.correlation;e.correlations=fp.CorrelationUtilities.setCorrelation(n,a,i),handleUpdateCorrelations(e)}(e,t.payload);case en:return function handleSetCorrelations(e,t){var n=t.ids,a=t.correlations;n.forEach((function(t,n){var i=e.correlations;e.correlations=fp.CorrelationUtilities.setCorrelation(i,t,a[n])})),handleUpdateCorrelations(e)}(e,t.payload);case an:return function handleDeleteSpectra(e,t){var n=e.activeTab,a=Object(vt.a)(e);if(t.id){var i=a.data.findIndex((function(e){return e.id===t.id}));e.data.splice(i,1)}else e.data.forEach((function(t,n){e.data.splice(n,1)}));e.activeSpectrum=null,ToolsActions_setActiveTab(e,n,!0)}(e,t);case"SET_INTEGRAL_Y_DOMAIN":return function handleChangeIntegralYDomain(e,t){var n=e.activeSpectrum;n&&(e.integralsYDomains[n.id]=t)}(e,t.yDomain);case ln:return function handleBrushEnd(e,t){var n=e.displayerMode===Oo.DM_2D,a=getXScale(e),i=n?get2DYScale(e):getYScale(e),r=a.invert(t.startX),o=a.invert(t.endX),c=i.invert(t.startY),l=i.invert(t.endY),s=r>o?[o,r]:[r,o],u=c>l?[l,c]:[c,l],d=yh.getInstance(e.ZoomHistory,e.activeTab);if(e.displayerMode===Oo.DM_2D){switch(t.trackID){case mo.CENTER_2D:e.xDomain=s,e.yDomain=u;break;case mo.TOP_1D:e.xDomain=s;break;case mo.LEFT_1D:e.yDomain=u}d&&d.push({xDomain:s,yDomain:u})}else e.xDomain=s,d&&d.push({xDomain:s,yDomain:u})}(e,t);case On:return function setVerticalIndicatorXPosition(e,t){var n=getXScale(e);e.pivot=n.invert(t)}(e,t.position);case Tn:return function setSpectrumsVerticalAlign(e){changeSpectrumVerticalAlignment(e,!e.verticalAlign.flag)}(e);case xn:return handleAutoPeakPicking(e,t.options);case kn:return function handleAutoZonesDetection(e,t){var n;if(null===(n=e.activeSpectrum)||void 0===n?void 0:n.id){var a=e.activeSpectrum.index,i=Object(O.a)(e.xDomain,2),r=i[0],o=i[1],c=Object(O.a)(e.yDomain,2),l=c[0],s=c[1];t.selectedZone={fromX:r,toX:o,fromY:l,toY:s},detectZones(e.data[a],t),handleOnChangeZonesData(e)}}(e,t.options);case yn:return function handleAutoRangesDetection(e,t){var n;if(null===(n=e.activeSpectrum)||void 0===n?void 0:n.id){var a=e.activeSpectrum.index,i=e.data[a],r=Object(O.a)(e.xDomain,2),o=r[0],c=r[1],l=Object(Xe.i)(i.data.x,o),s=Object(Xe.i)(i.data.x,c);detectRanges(i,Object(v.a)(Object(v.a)({},t),{},{windowFromIndex:l,windowToIndex:s})),handleOnChangeRangesData(e)}}(e,t.options);case zn:return handleAddRange(e,t);case Cn:return function handleDeleteRange(e,t){var n,a=Object(vt.a)(e);if(null===(n=a.activeSpectrum)||void 0===n?void 0:n.id){var i=a.activeSpectrum.index,r=t.payload,o=r.id,c=r.assignmentData,l=e.data[i];if(o){var s=l.ranges.values.find((function(e){return e.id===o}));jr(c,[s]);var u=getRangeIndex(a,i,o);l.ranges.values.splice(u,1)}else jr(c,l.ranges.values),l.ranges.values=[];updateIntegralRanges(e.data[i]),handleOnChangeRangesData(e)}}(e,t);case Nn:return handleResizeRange(e,t);case Ln:return function handleChangeRangeSum(e,t){var n;if(null===(n=e.activeSpectrum)||void 0===n?void 0:n.id){var a=e.activeSpectrum.index;e.data[a].ranges.options.sum=t,updateIntegralRanges(e.data[a])}}(e,t.value);case Zn:return handleChangeRangeRaltiveValue(e,t);case Un:return function handleChangeRangeSignalValue(e,t){var n,a=t.payload,i=a.rangeID,r=a.signalID,o=a.value;if(null===(n=e.activeSpectrum)||void 0===n?void 0:n.id){var c=e.activeSpectrum.index,l=function changeRangeSignal(e,t,n,a){var i=0,r=e.ranges.values.findIndex((function(e){return e.id===t}));if(-1!==r){var o=e.ranges.values[r].signal.findIndex((function(e){return e.id===n}));i=a-e.ranges.values[r].signal[o].delta,e.ranges.values[r].signal[o].delta=a}return i}(e.data[c],i,r,o);applyFilter(e.data[c],[{name:ei.shiftX.id,options:l}]),updateXShift(e.data[c]),handleOnChangeRangesData(e),setDomain(e)}}(e,t);case Kn:return function handleChangeRangeSignalKind(e,t){var n,a=Object(vt.a)(e);if(null===(n=a.activeSpectrum)||void 0===n?void 0:n.id){var i=a.activeSpectrum.index,r=t.payload,o=r.rowData,c=r.value,l=getRangeIndex(a,i,o.id),s=e.data[i].ranges.values[l];(null===s||void 0===s?void 0:s.signal)&&(s.signal[o.tableMetaInfo.signalIndex].kind=c,s.kind=ur.includes(c)?dr:br,updateIntegralRanges(e.data[i]),handleOnChangeRangesData(e))}}(e,t);case Wn:return function handleSaveEditedRange(e,t){var n,a=Object(vt.a)(e);if(null===(n=a.activeSpectrum)||void 0===n?void 0:n.id){var i=a.activeSpectrum.index,r=t.payload,o=r.editedRowData,c=r.assignmentData,l=gr(o);delete l.tableMetaInfo,jr(c,l);var s=getRangeIndex(a,i,l.id);e.data[i].ranges.values[s]=l,updateIntegralRanges(e.data[i]),handleOnChangeRangesData(e)}}(e,t);case Gn:return handleUnlinkRange(e,t);case qn:return function handleSetDiaIDRange(e,t){var n;if(null===(n=e.activeSpectrum)||void 0===n?void 0:n.id){var a=e.activeSpectrum.index,i=t.payload,r=i.rangeData,o=i.diaID,c=i.signalIndex,l=getRangeIndex(e,a,r.id),s=e.data[a].ranges.values[l];void 0===c?s.diaID=o:s.signal[c].diaID=o,s.pubIntegral=fr(s)}}(e,t);case"SET_PREFERENCES":return function handelSetPreferences(e,t){var n=t.type,a=t.values,i=C()(e.preferences,"panels",{});e.preferences.panels=Object(v.a)(Object(v.a)({},i),{},Object(be.a)({},n,a))}(e,t.data);case An:return function handelSetActiveTab(e,t){t&&ToolsActions_setActiveTab(e,t)}(e,t.tab);case Pn:return function handleAddBaseLineZone(e,t){var n=t.from,a=t.to,i=getXScale(e),r=i.invert(n),o=i.invert(a),c=[];c=r>o?[o,r]:[r,o];var l=e.baseLineZones.slice();l.push({id:generateID(),from:c[0],to:c[1]}),e.baseLineZones=l}(e,t.zone);case In:return function handleDeleteBaseLineZone(e,t){var n=Object(vt.a)(e);e.baseLineZones=n.baseLineZones.filter((function(e){return e.id!==t}))}(e,t.id);case fa:return function handleAddExclusionZone(e,t){var n=t.payload,a=n.from,i=n.to,r=getXScale(e),o=r.invert(a),c=r.invert(i),l=[];l=o>c?[c,o]:[o,c];var s={id:generateID(),from:l[0],to:l[1]};e.exclusionZones[e.activeTab]?e.exclusionZones[e.activeTab].push(s):e.exclusionZones[e.activeTab]=[s]}(e,t);case pa:return function handleDeleteExclusionZone(e,t){var n=t.payload.id,a=e.exclusionZones[e.activeTab].findIndex((function(e){return e.id===n}));e.exclusionZones[e.activeTab].splice(a,1)}(e,t);case Fn:return function handleBaseLineCorrectionFilter(e,t){var n;if(null===(n=e.activeSpectrum)||void 0===n?void 0:n.id){var a=e.activeSpectrum.index;applyFilter(e.data[a],[{name:ei.baselineCorrection.id,options:Object(v.a)({zones:e.baseLineZones},t.options)}]),e.baseLineZones=[];var i=e.xDomain.slice();resetSelectedTool(e),setDataBy1DFilter(e.data[a]),setDomain(e),e.xDomain=i}}(e,t);case _n:return function setKeyPreferencesHandler(e,t){var n=Object(vt.a)(e),a=n.activeTab,i=n.data,r=n.activeSpectrum,o=n.zoomFactor,c=n.xDomain,l=n.xDomains,s=n.yDomain,u=n.yDomains,d=n.originDomain,b=n.margin,f=n.displayerMode,p=n.tabActiveSpectrum;if(a){var h=Lf("nucleus")(i),g=f===Oo.DM_2D?h[a].reduce((function(e,t){return e[t.id]=t.processingController.getLevel(),e}),{}):null;e.keysPreferences[t]={activeTab:a,activeSpectrum:r,displayerMode:f,tabActiveSpectrum:p,zoomFactor:o,xDomain:c,xDomains:l,yDomain:s,yDomains:u,originDomain:d,level:g,margin:b,data:h[a].reduce((function(e,t){return e[t.id]={display:{color:t.display.color,isVisible:t.display.isVisible,isPeaksMarkersVisible:t.display.isPeaksMarkersVisible}},e}),{})}}}(e,t.keyCode);case Rn:return function applyKeyPreferencesHandler(e,t){var n=Object(vt.a)(e),a=n.keysPreferences[t];if(a)if(e.activeTab=a.activeTab,n.data.forEach((function(t,n){nucluesToString(t.info.nucleus)===a.activeTab&&(e.data[n].display=Object.assign(hp()(t.display),a.data[t.id].display))})),e.displayerMode=a.displayerMode,e.tabActiveSpectrum=a.tabActiveSpectrum,e.activeSpectrum=a.activeSpectrum,e.margin=a.margin,setDomain(e),e.xDomain=a.xDomain,e.xDomains=a.xDomains,e.yDomain=a.yDomain,e.originDomain=a.originDomain,e.yDomains=a.yDomains,e.displayerMode===Oo.DM_2D)for(var i=function _loop(){var t=o[r],i=a.level[t],c=i.levelPositive,l=i.levelNegative,s=n.data.findIndex((function(e){return e.id===t})),u=e.data[s].processingController;u.setLevel(c,l),e.contours[t]=u.drawContours()},r=0,o=Object.keys(a.level);r<o.length;r++)i();else setZoom(e,a.zoomFactor.scale)}(e,t.keyCode);case Hn:return function levelChangeHandler(e,t){var n=t.deltaY,a=t.shiftKey;try{var i;if(null===(i=e.activeSpectrum)||void 0===i?void 0:i.id){var r=e.activeSpectrum,o=r.index,c=r.id,l=e.data[o].processingController;a?l.shiftWheel(n):l.wheel(n);var s=Object.freeze(l.drawContours());e.contours[c]=s}}catch(u){console.log(u)}}(e,t);case Bn:return add2dZoneHandler(e,t);case Xn:return function handleDeleteZone(e,t){var n,a=Object(vt.a)(e);if(null===(n=a.activeSpectrum)||void 0===n?void 0:n.id){var i=a.activeSpectrum.index,r=t.payload,o=r.id,c=r.assignmentData;if(o){var l=e.data[i].zones.values.find((function(e){return e.id===o}));zo(c,[l]);var s=getZoneIndex(a,i,o);e.data[i].zones.values.splice(s,1)}else zo(c,e.data[i].zones.values),e.data[i].zones.values=[];handleOnChangeZonesData(e)}}(e,t);case Vn:return function addMissingProjectionHander(e,t){var n,a=Object(vt.a)(e),i=t.nucleus;if(null===(n=e.activeSpectrum)||void 0===n?void 0:n.id){var r,o=e.activeSpectrum.index,c=Object(rc.a)(i);try{for(c.s();!(r=c.n()).done;){var l=r.value,s=Datum2D_getMissingProjection(a.data[o],l);e.data.push(s)}}catch(u){c.e(u)}finally{c.f()}setTab(e,Lf("nucleus")(e.data),e.activeTab,!0),setDomain(e),setMode(e)}}(e,t);case sn:return function handelResetDomain(e){var t=e.originDomain,n=t.xDomain,a=t.yDomain,i=t.xDomains,r=t.yDomains;e.xDomain=n,e.yDomain=a,e.xDomains=i,e.yDomains=r}(e);case ia:return function changeZoneSignalDelta(e,t){var n,a=t.payload,i=a.zoneID,r=a.signal;if(null===(n=e.activeSpectrum)||void 0===n?void 0:n.id){var o=e.activeSpectrum.index,c=function changeZoneSignal(e,t,n){var a=e.zones.values.findIndex((function(e){return e.id===t}));if(-1!==a){var i=e.zones.values[a].signal.findIndex((function(e){return e.id===n.id}));if(-1!==i){var r=e.zones.values[a].signal[i];return{xShift:(null===n||void 0===n?void 0:n.x)||0===(null===n||void 0===n?void 0:n.x)?n.x-r.x.delta:0,yShift:(null===n||void 0===n?void 0:n.y)||0===(null===n||void 0===n?void 0:n.y)?n.y-r.y.delta:0}}}return{xShift:0,yShift:0}}(e.data[o],i,r),l=c.xShift,s=c.yShift,u=[];0!==l&&u.push({name:ei.shift2DX.id,options:l}),0!==s&&u.push({name:ei.shift2DY.id,options:s}),applyFilter(e.data[o],u),updateShift(e.data[o]),setDomain(e),handleOnChangeZonesData(e)}}(e,t);case ra:return function handleChangeZoneSignalKind(e,t){var n,a=Object(vt.a)(e);if(null===(n=a.activeSpectrum)||void 0===n?void 0:n.id){var i=a.activeSpectrum.index,r=t.payload,o=r.rowData,c=r.value,l=getZoneIndex(a,i,o.id),s=e.data[i].zones.values[l];s.signal[o.tableMetaInfo.signalIndex].kind=c,s.kind=ur.includes(c)?dr:br,handleOnChangeZonesData(e)}}(e,t);case oa:return handleUnlinkZone(e,t);case ca:return function handleSetDiaIDZone(e,t){var n,a=Object(vt.a)(e);if(null===(n=a.activeSpectrum)||void 0===n?void 0:n.id){var i=a.activeSpectrum.index,r=t.payload,o=r.zoneData,c=r.diaID,l=r.axis,s=r.signalIndex,u=getZoneIndex(a,i,o.id),d=e.data[i].zones.values[u];void 0===s?d[l].diaID=c:d.signal[s][l].diaID=c,d[l].pubIntegral=_o(d,l)}}(e,t);case $n:return function SpectraAanalysisAction_analyzeSpectra(e,t){var n=getRange_getRange(e,t),a=Object(O.a)(n,2),i=a[0],r=a[1];analyzeSpectra(e.data,e.spectraAnalysis,{from:i,to:r,nucleus:e.activeTab})}(e,t);case Qn:return handleDeleteSpectraRanges(e,t);case ea:return function handleResizeSpectraRange(e,t){var n=t.payload,a=n.columnKey,i=n.from,r=n.to;analyzeSpectra(e.data,e.spectraAnalysis,{from:i,to:r,nucleus:e.activeTab,columnKey:a})}(e,t);case ta:return handleSetcolumns(e,t);case na:return handleFiltercolumn(e,t);case"undo":return function handleHistoryUndo(e){var t=e.history,n=t.past,a=t.present,i=t.future,r=n[n.length-1],o=n.slice(0,n.length-1),c=[a].concat(Object(Hi.a)(i)),l=0!==c.length,s=0!==n.length,u=getDomain(e.data),d={past:o,present:r,future:c,hasRedo:l,hasUndo:s};e.xDomain=u.xDomain,e.yDomain=u.yDomain,e.originDomain=u,e.history=d}(e);case"redo":return function handleHistoryRedo(e){var t=e.history,n=(t.future[0],t.future.shift());t.past.push(t.present),t.present=n,t.hasUndo=!0,t.hasRedo=t.future.length>0,setDomain(e.data)}(e);case"reset":return function handleHistoryReset(e,t){e.history={past:[],present:t,future:[],hasRedo:!1,hasUndo:!1}}(e,t);case da:return function setIsOverDisplayer(e,t){e.overDisplayer=t.payload}(e,t);default:return}}));var wh,Th=function ToolBarWrapper(e){var t=function Wrapper(t){var n=useChartData(),a=n.data,i=n.activeSpectrum,r=n.verticalAlign,o=n.displayerMode,c=Object(D.useMemo)((function(){if(a&&i&&i.id){var e=a.find((function(e){return e.id===i.id}));return null!==e&&void 0!==e?{info:e.info,spectrumsCount:e.length}:{}}return{}}),[i,a]).info,l=void 0===c?{}:c,s=t.forwardedRef,u=Object(ge.a)(t,["forwardedRef"]);return Object(N.jsx)(e,Object(v.a)(Object(v.a)({},u),{},{info:l,activeSpectrum:i,verticalAlign:r,displayerMode:o,ref:s}))};return Object(D.memo)(Object(D.forwardRef)((function(e,n){return Object(N.jsx)(t,Object(v.a)(Object(v.a)({},e),{},{forwardedRef:n}))})))},Mh=Object(y.css)(wh||(wh=Object(x.a)(["\n  display: flex;\n  flex-direction: column;\n  width: 450px;\n  padding: 5px;\n  button:focus {\n    outline: none;\n  }\n  .header {\n    height: 24px;\n    border-bottom: 1px solid #f0f0f0;\n    display: flex;\n    span {\n      color: #464646;\n      font-size: 15px;\n      flex: 1;\n    }\n\n    button {\n      background-color: transparent;\n      border: none;\n      svg {\n        height: 16px;\n      }\n    }\n  }\n  .container {\n    display: flex;\n    margin: 30px 5px;\n    input,\n    button {\n      padding: 5px;\n      border: 1px solid gray;\n      border-radius: 5px;\n      height: 36px;\n      margin: 2px;\n    }\n    input {\n      flex: 10;\n    }\n    button {\n      flex: 2;\n      color: white;\n      background-color: gray;\n    }\n  }\n"]))),Ah=["dx","jdx"];function LoadJCAMPModal(e){var t=e.onLoadClick,n=e.onClose,a=e.startLoading,i=Object(D.useRef)(),r=Object(D.useCallback)((function(){var e=i.current.value,n=function extractFileMetaFromPath(e){var t=e.replace(/^.*[\\\/]/,"").split(".");return{name:t[0].toLowerCase(),extension:t[1].toLowerCase()}}(e),r=n.name,o=n.extension;Ah.includes(o)?(a(),function loadFile(e){return _loadFile.apply(this,arguments)}(e,{asBuffer:!0}).then((function(n){t({binary:n,name:r,extension:o,jcampURL:e})}))):t(null)}),[t,a]);return Object(Ce.c)("div",{css:Mh,children:[Object(Ce.c)("div",{className:"header handle",children:[Object(Ce.b)("span",{children:"Load JCAMP Dialog"}),Object(Ce.b)(et,{onClick:n})]}),Object(Ce.c)("div",{className:"container",children:[Object(Ce.b)("input",{ref:i,type:"text",placeholder:"Enter URL to JCAMP-DX file"}),Object(Ce.b)("button",{type:"button",onClick:r,children:"Load"})]})]})}LoadJCAMPModal.defaultProps={onLoadButtonClick:function onLoadButtonClick(){return null},onClose:function onClose(){return null},startLoading:function startLoading(){return null}};var Eh,Ph=LoadJCAMPModal,Ih=Object(y.css)(Eh||(Eh=Object(x.a)(["\n  background-color: transparent;\n  border: none;\n  width: 35px;\n  height: 35px;\n  min-height: 35px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  outline: outline;\n  :focus {\n    outline: none !important;\n  }\n\n  &.fa {\n    svg {\n      font-size: 14px;\n    }\n  }\n  &.cheminfo {\n    svg {\n      font-size: 24px;\n    }\n  }\n"]))),Fh=[{id:"importFile",icon:Object(Ce.b)(Ze.n,{}),label:"Import from file system (Press Ctrl + O)"},{id:"importJDX",icon:Object(Ce.b)(Ze.n,{}),label:"Add JCAMP-DX from URL"}],_h=[{id:"svg",icon:Object(Ce.b)(Ze.h,{}),label:"Export as SVG"},{id:"png",icon:Object(Ce.b)(Ze.q,{}),label:"Export as PNG"},{id:"json",icon:Object(Ce.b)(Ze.o,{}),label:"Save data ( Press Ctrl + S )"},{id:"nmre",icon:Object(Ce.b)(Ze.o,{}),label:"Save NMRE data"},{id:"copy",icon:Object(Ce.b)(Ze.e,{}),label:"Copy image to Clipboard ( Press Ctrl + C )"}];function BasicToolBar(e){var t=e.info,n=e.verticalAlign,a=e.displayerMode,i=useDispatch(),r=usePreferences(),o=Ec(),c=oe(),l=useLoader(),s=useToolsFunctions(),u=s.isRealSpectrumShown,d=s.changeSpectrumViewHandler,b=s.changeDisplayViewModeHandler,f=s.alignSpectrumsVerticallyHandler,p=useExport(),h=p.saveAsSVGHandler,g=p.saveAsPNGHandler,m=p.saveAsJSONHandler,j=p.saveAsNMREHandler,O=p.saveToClipboardHandler,x=Object(v.a)({isComplex:!1,isFid:!1},t),y=Object(D.useCallback)((function(e){e?(i({type:Ct,files:[e]}),c.close()):o.error("you file must be one of those extensions [ .jdx, dx ] ")}),[o,i,c]),k=Object(D.useCallback)((function(){c.close(),i({type:Sn,isLoading:!0})}),[i,c]),S=Object(D.useCallback)((function(){c.show(Object(Ce.b)(Ph,{onLoadClick:y,onClose:function onClose(){return c.close()},startLoading:k}),{})}),[y,c,k]),w=Object(D.useCallback)((function(e){return!C()(r,"display.toolBarButtons.".concat(e))}),[r]),T=Object(D.useCallback)((function(){l.open()}),[l]),M=Object(D.useCallback)((function(e){switch(e.id){case"importFile":T();break;case"importJDX":S();break;default:return}}),[T,S]),A=Object(D.useCallback)((function(e){switch(e.id){case"svg":h();break;case"png":g();break;case"json":m();break;case"nmre":j();break;case"copy":O()}}),[h,g,m,j,O]);return Object(Ce.c)(D.Fragment,{children:[w("hideImport")&&Object(Ce.b)(fd,{style:Ih,className:"fa",component:Object(Ce.b)(Ze.r,{}),toolTip:"Import",onClick:M,items:Fh}),w("hideExportAs")&&Object(Ce.b)(fd,{style:Ih,className:"fa",component:Object(Ce.b)(Ze.p,{}),toolTip:"Export As",onClick:A,items:_h}),a===Oo.DM_1D&&w("hideSpectraStackAlignments")&&Object(Ce.b)("button",{type:"button",css:Ih,className:"cheminfo",onClick:b,children:Object(Ce.b)(qe,{title:"Spectra alignment ( Press s )",popupPlacement:"right",children:n.stacked?Object(Ce.b)(Js.n,{}):Object(Ce.b)(Js.m,{})})}),a===Oo.DM_1D&&w("hideRealImaginary")&&x&&x.isComplex&&Object(Ce.b)("button",{css:Ih,className:"cheminfo",type:"button",onClick:d,children:Object(Ce.b)(qe,{title:u?"Display Real ":"Display Imaginary ",popupPlacement:"right",children:Object(Ce.b)(Js.s,{})})}),a===Oo.DM_1D&&w("hideSpectraCenterAlignments")&&Object(Ce.b)("button",{css:Ih,className:"cheminfo",type:"button",onClick:f,children:Object(Ce.b)(qe,{title:n.flag?"Baseline  Bottom ( Press c )":"Baseline  Center ( Press c )",popupPlacement:"right",children:n.flag?Object(Ce.b)(Js.c,{}):Object(Ce.b)(Js.d,{})})})]})}var Rh,Nh,Lh=Th(Object(D.memo)(BasicToolBar)),zh=Object(y.css)(Rh||(Rh=Object(x.a)(["\n  width: 35px;\n  height: 35px;\n  background-color: white;\n  padding: 5px;\n  margin: 0px;\n  border: none;\n  outline: none;\n\n  :focus {\n    outline: none !important;\n  }\n"]))),Hh=Object(y.css)(Nh||(Nh=Object(x.a)(["\n  color: black;\n  background-color: #f3f3f3 !important;\n"])));function ToggleButton_ToggleButton(e){var t=e.children,n=e.value,a=e.disabled,i=e.isActive,r=e.onChange,o=e.className,c=e.style,l=e.isVisible,s=e.onMouseEnter,u=e.onMouseLeave,d=e.helpID,b=Object(D.useState)(i),f=Object(O.a)(b,2),p=f[0],h=f[1],g=Object(D.useCallback)((function(){var e=!p;h(e),r(e?n:null)}),[p,r,n]);return Object(D.useEffect)((function(){h(i)}),[i]),l?Object(Ce.b)("button",{type:"button",onClick:g,css:[zh,p&&Hh],style:c,className:" ".concat(o,p?"  active":" "),disabled:a,onMouseEnter:s,onMouseLeave:u,"data-helpid":d,children:Object(D.cloneElement)(t,{style:{fontSize:"10px"}})}):null}ToggleButton_ToggleButton.displayName="ToggleButton",ToggleButton_ToggleButton.defaultProps={isActive:!1,disabled:!1,isVisible:!0,value:null,className:"",onChange:function onChange(){return null},onValueReady:function onValueReady(){return null}};var Bh=ToggleButton_ToggleButton,Xh={display:"flex",flexDirection:"column"};function ToggleButtonGroup(e){var t=e.children,n=e.value,a=e.onChange,i=Object(D.useState)([]),r=Object(O.a)(i,2),o=r[0],c=r[1],l=Object(D.useCallback)((function(e){var t=Object(Hi.a)(o).map((function(t){return{value:t.value,isActive:t.value===e}}));c(t),a(e)}),[a,o]),s=Object(D.useMemo)((function(){var e=0;return D.Children.map(t,(function(t){if(t){if("ToggleButton"===t.type.displayName){var n=Object(D.cloneElement)(t,{onChange:l,isActive:o[e]&&o[e].isActive&&o[e].isActive,index:e});return e++,n}return Object(D.cloneElement)(t)}}))}),[t,l,o]);return Object(D.useEffect)((function(){var e=D.Children.map(t,(function(e){if(e&&"ToggleButton"===e.type.displayName)return{value:e.props.value,isActive:e.props.value===n}}));c(e)}),[t,n]),Object(N.jsxs)("div",{style:Xh,children:[" ",s," "]})}ToggleButtonGroup.defaultProps={onChange:function onChange(){return null}};var Vh,Yh=ToggleButtonGroup,Zh=Object(y.css)(Vh||(Vh=Object(x.a)(["\n  button {\n    background-color: transparent;\n    border: none;\n    width: 35px;\n    height: 35px;\n    min-height: 35px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    outline: outline;\n    :focus {\n      outline: none !important;\n    }\n\n    &.fa {\n      svg {\n        font-size: 14px;\n      }\n    }\n    &.cheminfo {\n      svg {\n        font-size: 18px;\n      }\n    }\n  }\n"])));function FunctionToolBar(e){var t=e.defaultValue,n=e.activeSpectrum,a=e.info,i=e.displayerMode,r=Object(D.useState)(),o=Object(O.a)(r,2),c=o[0],l=o[1],s=useHelp(),u=usePreferences(),d=useDispatch(),b={info:Object(v.a)({isComplex:!1,isFid:!1},a)},f=useToolsFunctions(),p=f.handleChangeOption,h=f.handleFullZoomOut,g=Object(D.useCallback)((function(e){l(e),p(e)}),[p]);Object(D.useEffect)((function(){l(t)}),[t]);var m=Object(D.useCallback)((function(){d({type:hn,value:""}),d({type:zt,selectedFilter:null})}),[d]),j=Object(D.useCallback)((function(e){return!C()(u,"display.toolBarButtons.".concat(e))}),[u]);return Object(Ce.c)("div",{css:Zh,children:[Object(Ce.c)(Yh,{value:c,onChange:g,children:[j("hideZoomTool")&&Object(Ce.b)(Bh,Object(v.a)(Object(v.a)({value:ti.zoom.id},s.onHover),{},{helpID:"zoomIn",className:"fa",children:Object(Ce.b)(qe,{title:"".concat(ti.zoom.label," ( Press z )"),popupPlacement:"right",offset:{x:10,y:0},style:{display:"flex"},children:Object(Ce.b)(Ze.D,{})})}),ti.zoom.id),j("hideZoomOutTool")&&Object(Ce.b)("button",{className:"fa",type:"button",onClick:h,children:Object(Ce.b)(qe,{title:"Horizontal zoom out ( Press f ), Horizontal and Vertical zoom out, double click ( Press ff )",popupPlacement:"right",children:Object(Ce.b)(Ze.k,{})})}),i===Oo.DM_1D&&j("hidePeakTool")&&Object(Ce.b)(Bh,Object(v.a)(Object(v.a)({value:ti.peakPicking.id,className:"cheminfo",isVisible:n&&b&&!b.info.isFid},s.onHover),{},{helpID:"peakPicking",children:Object(Ce.b)(qe,{title:"".concat(ti.peakPicking.label," ( Press p )"),popupPlacement:"right",offset:{x:10,y:0},children:Object(Ce.b)(Js.o,{})})}),ti.peakPicking.id),i===Oo.DM_1D&&j("hideIntegralTool")&&Object(Ce.b)(Bh,Object(v.a)(Object(v.a)({value:ti.integral.id,className:"cheminfo",isVisible:n&&b&&!b.info.isFid},s.onHover),{},{helpID:"integralPicking",children:Object(Ce.b)(qe,{title:"".concat(ti.integral.label," ( Press i )"),popupPlacement:"right",offset:{x:10,y:0},children:Object(Ce.b)(Js.j,{})})}),ti.integral.id),i===Oo.DM_2D&&j("hideIntegralTool")&&Object(Ce.b)(Bh,{value:ti.zone2D.id,className:"fa",isVisible:n,children:Object(Ce.b)(qe,{title:"".concat(ti.zone2D.label," ( Press i  )"),popupPlacement:"right",offset:{x:10,y:0},children:Object(Ce.b)(Ze.g,{})})},ti.zone2D.id),i===Oo.DM_2D&&Object(Ce.b)(Bh,{value:ti.slicingTool.id,style:Zh.icon,isVisible:n,children:Object(Ce.b)(qe,{title:"".concat(ti.slicingTool.label),popupPlacement:"right",offset:{x:10,y:0},children:"Slic"})},ti.slicingTool.id),i===Oo.DM_1D&&j("hideAutoRangesTool")&&Object(Ce.b)(Bh,{value:ti.rangesPicking.id,className:"cheminfo",isVisible:n&&b&&!b.info.isFid,children:Object(Ce.b)(qe,{title:ti.rangesPicking.label,popupPlacement:"right",offset:{x:10,y:0},children:Object(Ce.b)(Js.r,{})})},ti.rangesPicking.id),i===Oo.DM_1D&&j("hideMultipleSpectraAnalysisTool")&&Object(Ce.b)(Bh,{value:ti.multipleSpectraAnalysis.id,className:"cheminfo",children:Object(Ce.b)(qe,{title:ti.multipleSpectraAnalysis.label,popupPlacement:"right",offset:{x:10,y:0},children:Object(Ce.b)(Js.k,{})})},ti.multipleSpectraAnalysis.id),i===Oo.DM_1D&&j("hideZeroFillingTool")&&Object(Ce.b)(Bh,{value:ti.zeroFilling.id,className:"cheminfo",isVisible:b&&ei.zeroFilling.isApplicable(b),children:Object(Ce.b)(qe,{title:ti.zeroFilling.label,popupPlacement:"right",offset:{x:10,y:0},children:Object(Ce.b)(Js.w,{})})},ti.zeroFilling.id),i===Oo.DM_1D&&j("hidePhaseCorrectionTool")&&Object(Ce.b)(Bh,{value:ti.phaseCorrection.id,className:"cheminfo",style:Zh.icon,isVisible:n&&b&&ei.phaseCorrection.isApplicable(b),children:Object(Ce.b)(qe,{title:ti.phaseCorrection.label,popupPlacement:"right",offset:{x:10,y:0},children:Object(Ce.b)(Js.q,{})})},ti.phaseCorrection.id),i===Oo.DM_1D&&j("hideBaseLineCorrectionTool")&&Object(Ce.b)(Bh,{value:ti.baseLineCorrection.id,className:"cheminfo",isVisible:n&&b&&ei.baselineCorrection.isApplicable(b),children:Object(Ce.b)(qe,{title:ti.baseLineCorrection.label,popupPlacement:"right",offset:{x:10,y:0},children:Object(Ce.b)(Js.e,{})})},ti.baseLineCorrection.id),i===Oo.DM_1D&&j("hideExclusionZonesTool")&&Object(Ce.b)(Bh,{value:ti.exclusionZones.id,className:"cheminfo",children:Object(Ce.b)(qe,{title:ti.exclusionZones.label,popupPlacement:"right",offset:{x:10,y:0},children:Object(Ce.b)(Js.k,{})})},ti.exclusionZones.id)]}),i===Oo.DM_1D&&j("hideFFTTool")&&b&&ei.fft.isApplicable(b)&&Object(Ce.b)("button",{className:"cheminfo",type:"button",onClick:m,children:Object(Ce.b)(qe,{title:"FFT Filter",popupPlacement:"right",offset:{x:10,y:0},children:Object(Ce.b)(Js.h,{})})})]})}var Uh=Th(Object(D.memo)(FunctionToolBar));FunctionToolBar.defaultProps={defaultValue:ti.zoom.id};var Kh={display:"flex",flexDirection:"column",alignItems:"start",borderRight:"0.55px solid #f7f7f7",paddingRight:"1px",overflowY:"auto",height:"100%"};function ToolBar(e){var t=e.selectedTool;return Object(N.jsxs)("div",{style:Object(v.a)({},Kh),children:[Object(N.jsx)(Uh,{defaultValue:t}),Object(N.jsx)(Lh,{})]})}var Wh,Gh=Object(D.memo)(ToolBar),qh={container:{position:"relative",height:"none"},resizer:{width:10,backgroundColor:"#f7f7f7",cursor:"ew-resize"},pane:{overflow:"hidden"}},Jh=Object(y.css)(Wh||(Wh=Object(x.a)(["\n  background-color: white;\n  width: 100%;\n  display: block;\n  height: 100%;\n  font-size: 14px;\n\n  div:focus {\n    outline: none !important;\n  }\n\n  button {\n    cursor: pointer;\n    color: black;\n    &:disabled {\n      cursor: default;\n    }\n  }\n\n  button:active,\n  button:hover,\n  button:focus,\n  [type='button']:focus,\n  button {\n    outline: none !important;\n  }\n  * {\n    -webkit-user-drag: none;\n    -moz-user-drag: none;\n    -o-user-drag: none;\n    user-drag: none;\n    -moz-user-select: none;\n    -webkit-user-select: none;\n    -ms-user-select: none;\n    user-select: none;\n  }\n\n  .SplitPane {\n    height: 100%;\n  }\n\n  .Resizer.vertical:after {\n    content: '\\22EE';\n    top: 50%;\n    color: black;\n    position: absolute;\n    font-size: 14px;\n  }\n\n  .Resizer.vertical {\n    padding: 2px;\n  }\n\n  .Resizer.vertical:hover {\n    background-color: #dfdfdf !important;\n    border-left: 0.55px #bbbbbb solid;\n    border-right: 0.55px #bbbbbb solid;\n  }\n"],["\n  background-color: white;\n  width: 100%;\n  display: block;\n  height: 100%;\n  font-size: 14px;\n\n  div:focus {\n    outline: none !important;\n  }\n\n  button {\n    cursor: pointer;\n    color: black;\n    &:disabled {\n      cursor: default;\n    }\n  }\n\n  button:active,\n  button:hover,\n  button:focus,\n  [type='button']:focus,\n  button {\n    outline: none !important;\n  }\n  * {\n    -webkit-user-drag: none;\n    -moz-user-drag: none;\n    -o-user-drag: none;\n    user-drag: none;\n    -moz-user-select: none;\n    -webkit-user-select: none;\n    -ms-user-select: none;\n    user-select: none;\n  }\n\n  .SplitPane {\n    height: 100%;\n  }\n\n  .Resizer.vertical:after {\n    content: '\\\\22EE';\n    top: 50%;\n    color: black;\n    position: absolute;\n    font-size: 14px;\n  }\n\n  .Resizer.vertical {\n    padding: 2px;\n  }\n\n  .Resizer.vertical:hover {\n    background-color: #dfdfdf !important;\n    border-left: 0.55px #bbbbbb solid;\n    border-right: 0.55px #bbbbbb solid;\n  }\n"])));function NMRium(e){var t=e.data,n=e.onDataChange,a=e.docsBaseUrl,i=e.preferences,r=e.getSpinner,o=void 0===r?defaultGetSpinner:r,c=e.emptyText,l=void 0===c?void 0:c,s=Object(D.useRef)(null),u=Object(D.useRef)(null),d=Object(M.a)(!1),b=Object(O.a)(d,2),f=b[0],p=b[1],h=Object(A.a)(s,f,{onClose:function onClose(){p(!1)}}),g=Object(D.useState)(!1),m=Object(O.a)(g,2),j=m[0],x=m[1],y=Object(D.useState)(!1),k=Object(O.a)(y,2),S=k[0],E=k[1],P=Object(D.useState)(Kc),I=Object(O.a)(P,2),F=I[0],_=I[1],R=Object(D.useReducer)(Sh,Dh),N=Object(O.a)(R,2),L=N[0],z=N[1],H=Object(D.useReducer)(preferencesReducer,ml),B=Object(O.a)(H,2),X=B[0],V=B[1],Z=L.selectedTool,K=L.displayerMode,G=L.data;Object(D.useEffect)((function(){jh(L.actionType)&&(null===n||void 0===n||n(L))}),[n,L]);var q=Object(D.useMemo)((function(){return dispatchMiddleware(z)}),[]);Object(D.useEffect)((function(){var e;null===(e=s.current)||void 0===e||e.focus()}),[h]),Object(D.useEffect)((function(){V({type:pl,payload:{display:i,dispatch:V}})}),[i]),Object(D.useEffect)((function(){q({type:Sn,isLoading:!0}),q({type:yt,payload:t})}),[t,q]),Object(D.useEffect)((function(){!function setBaseUrl(e){Zc=e}(a),_(Kc())}),[a]);var J=Object(D.useCallback)((function(e){e&&!j&&(E(!1),z({type:Rt,width:e}))}),[j]),$=Object(D.useMemo)((function(){return C()(X,"controllers.help.preventAutoHelp",!1)}),[X]),Q=Object(D.useCallback)((function(e){e.stopPropagation(),x((function(e){return!e}))}),[]),ee=Object(D.useCallback)((function(e){checkModifierKeyActivated(e)||e.preventDefault()}),[]),te=Object(D.useCallback)((function(){q({type:da,payload:!0})}),[q]),ne=Object(D.useCallback)((function(){q({type:da,payload:!1})}),[q]);return Object(Ce.b)(w.a.div,{onMouseEnter:te,onMouseLeave:ne,style:{height:"100%",position:"relative"},children:Object(Ce.b)(Tc,{children:Object(Ce.b)(Ke,{value:{rootRef:s.current,elementsWraperRef:u.current},children:Object(Ce.b)(W,{value:X,children:Object(Ce.b)(Gr,{data:F,wrapperRef:u.current,preventAutoHelp:$,children:Object(Ce.b)(Fc,{wrapperRef:u.current,children:Object(Ce.b)(U,{value:q,children:Object(Ce.b)(Y,{value:Object(v.a)(Object(v.a)({},L),{},{isResizeEventStart:S}),children:Object(Ce.b)(Pe,{wrapperRef:u.current,children:Object(Ce.b)(vi.a,{children:Object(Ce.b)(AssignmentProvider,{spectraData:G,children:Object(Ce.b)(He,{value:o,children:Object(Ce.c)("div",{ref:s,css:Jh,onContextMenu:ee,children:[Object(Ce.b)(Cs,{isFullscreen:h,onMaximize:p}),Object(Ce.b)("div",{style:{height:"calc(100% - 36px)",width:"100%",backgroundColor:"white"},children:Object(Ce.c)(As,{children:[Object(Ce.b)(Yc,{}),Object(Ce.b)(Gh,{selectedTool:Z}),Object(Ce.c)(T.a,{style:qh.container,resizerStyle:qh.resizer,paneStyle:qh.pane,pane1Style:j?{maxWidth:"100%",width:"calc(100% - 10px)"}:{maxWidth:"80%"},split:"vertical",defaultSize:j?"99%":"calc(100% - 600px)",minSize:"80%",onDragFinished:J,onResizerDoubleClick:Q,onDragStarted:function onDragStarted(){E(!0)},children:[K===Oo.DM_1D?Object(Ce.b)(go,{emptyText:l}):Object(Ce.b)(Cc,{emptyText:l}),j?null:Object(Ce.b)(gh,{selectedTool:Z,displayerMode:K})]})]})}),Object(Ce.b)("div",{ref:u,id:"main-wrapper",style:{position:"absolute",pointerEvents:"none",zIndex:0,left:0,right:0,top:0,bottom:0}},String(h))]})})})})})})})})})})})})})}NMRium.defaultProps={docsBaseUrl:"https://docs.nmrium.org",onDataChange:function onDataChange(){return null},preferences:{general:{disableMultipletAnalysis:!1,hideSetSumFromMolecule:!1},panels:{hideSpectraPanel:!1,hideInformationPanel:!1,hidePeaksPanel:!1,hideIntegralsPanel:!1,hideRangesPanel:!1,hideStructuresPanel:!1,hideFiltersPanel:!1,hideZonesPanel:!1,hideSummaryPanel:!1,hideMultipleSpectraAnalysisPanel:!1},toolBarButtons:{hideZoomTool:!1,hideZoomOutTool:!1,hideImport:!1,hideExportAs:!1,hideSpectraStackAlignments:!1,hideSpectraCenterAlignments:!1,hideRealImaginary:!1,hidePeakTool:!1,hideIntegralTool:!1,hideAutoRangesTool:!1,hideZeroFillingTool:!1,hidePhaseCorrectionTool:!1,hideBaseLineCorrectionTool:!1,hideFFTTool:!1,hideMultipleSpectraAnalysisTool:!1,hideExclusionZonesTool:!1}}};t.a=Object(D.memo)(NMRium)}}]);
//# sourceMappingURL=1.199e7ce8.chunk.js.map