(this.webpackJsonpnmrium=this.webpackJsonpnmrium||[]).push([[1],{189:function(e,t,n){"use strict";n.d(t,"b",(function(){return l})),n.d(t,"a",(function(){return HighlightProvider})),n.d(t,"d",(function(){return useHighlightData})),n.d(t,"c",(function(){return useHighlight}));var a=n(42),i=n(46),r=n(6),o=n(1),c=n(3),l={PEAK:"PEAK",INTEGRAL:"INTEGRAL",RANGE:"RANGE",ZONE:"ZONE",EXCLUSION_ZONE:"EXCLUSION_ZONE"},s=Object(o.createContext)();function highlightReducer(e,t){switch(t.type){case"SHOW":var n,a=t.payload,o=a.convertedHighlights,c=a.type,l=Object(r.a)(Object(r.a)({},e),{},{highlights:Object(r.a)({},e.highlights),type:c}),s=Object(i.a)(o);try{for(s.s();!(n=s.n()).done;){var u=n.value;u in l.highlights||(l.highlights[u]=1)}}catch(m){s.e(m)}finally{s.f()}return l.highlighted=Object.keys(l.highlights),l;case"HIDE":var d,b=t.payload.convertedHighlights,p=Object(r.a)(Object(r.a)({},e),{},{highlights:Object(r.a)({},e.highlights),type:null}),f=Object(i.a)(b);try{for(f.s();!(d=f.n()).done;){var h=d.value;h in p.highlights&&delete p.highlights[h]}}catch(m){f.e(m)}finally{f.f()}return p.highlighted=Object.keys(p.highlights),p;case"SET_PERMANENT":return Object(r.a)(Object(r.a)({},e),{},{highlightedPermanently:t.payload});case"UNSET_PERMANENT":return Object(r.a)(Object(r.a)({},e),{},{highlightedPermanently:[]});default:throw new Error("unknown action type: ".concat(t.type))}}var u={highlights:{},highlighted:[],highlightedPermanently:[],type:null};function HighlightProvider(e){var t=Object(o.useReducer)(highlightReducer,u),n=Object(a.a)(t,2),i=n[0],r=n[1],l=Object(o.useMemo)((function(){return{highlight:i,dispatch:r}}),[i]);return Object(c.jsx)(s.Provider,{value:l,children:e.children})}function useHighlightData(){return Object(o.useContext)(s)}function useHighlight(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!Array.isArray(e))throw new Error("highlights must be an array");var n=useHighlightData(),a=Object(o.useMemo)((function(){var t,n=[],a=Object(i.a)(e);try{for(a.s();!(t=a.n()).done;){var r=t.value;if("string"!==typeof r&&"number"!==typeof r)throw new Error("highlight key must be a string or number");""!==r&&n.push(String(r))}}catch(o){a.e(o)}finally{a.f()}return n}),[e]);Object(o.useEffect)((function(){return function(){n.dispatch({type:"HIDE",payload:{convertedHighlights:a}}),n.dispatch({type:"UNSET_PERMANENT"})}}),[]);var r=Object(o.useMemo)((function(){return n.highlight.highlighted.some((function(e){return a.includes(e)}))}),[n.highlight.highlighted,a]),c=Object(o.useMemo)((function(){return n.highlight.highlightedPermanently.some((function(e){return a.includes(e)}))}),[n.highlight.highlightedPermanently,a]),l=Object(o.useCallback)((function(){n.dispatch({type:"SHOW",payload:{convertedHighlights:a,type:t}})}),[n,a,t]),s=Object(o.useCallback)((function(){n.dispatch({type:"HIDE",payload:{convertedHighlights:a}})}),[n,a]),u=Object(o.useCallback)((function(e){n.dispatch({type:"SHOW",payload:{convertedHighlights:[],id:e}})}),[n]),d=Object(o.useCallback)((function(e){n.dispatch({type:"HIDE",payload:{convertedHighlights:[],id:e}})}),[n]),b=Object(o.useCallback)((function(e){e&&(e.preventDefault(),e.stopPropagation()),c?n.dispatch({type:"UNSET_PERMANENT"}):n.dispatch({type:"SET_PERMANENT",payload:a})}),[n,a,c]),p={onMouseEnter:l,onMouseLeave:s},f={onClick:b};return{isActive:r,show:l,hide:s,onHover:p,onClick:f,isActivePermanently:c,click:b,add:u,remove:d}}},213:function(e,t,n){"use strict";n.d(t,"h",(function(){return exportAsSVG})),n.d(t,"d",(function(){return exportAsJSON})),n.d(t,"f",(function(){return exportAsNMRE})),n.d(t,"g",(function(){return exportAsPng})),n.d(t,"b",(function(){return copyPNGToClipboard})),n.d(t,"c",(function(){return copyTextToClipboard})),n.d(t,"a",(function(){return copyHTMLToClipboard})),n.d(t,"e",(function(){return exportAsMatrix}));var a=n(91),i=n(62),r=n.n(i),o=n(46),c=n(89),l=n(631),s=n(212),u=n.n(s);function copyFormattedHtml(e){var t=document.createElement("div");t.innerHTML=e,t.style.position="fixed",t.style.pointerEvents="none",t.style.opacity=0;var n=Array.prototype.slice.call(document.styleSheets).filter((function(e){return!e.disabled}));document.body.appendChild(t),window.getSelection().removeAllRanges();var a=document.createRange();a.selectNode(t),window.getSelection().addRange(a),document.execCommand("copy");for(var i=0;i<n.length;i++)n[i].disabled=!0;document.execCommand("copy");for(var r=0;r<n.length;r++)n[r].disabled=!1;document.body.removeChild(t)}function copyHTMLToClipboard(e){return _copyHTMLToClipboard.apply(this,arguments)}function _copyHTMLToClipboard(){return(_copyHTMLToClipboard=Object(c.a)(r.a.mark((function _callee3(e){return r.a.wrap((function _callee3$(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,copyFormattedHtml(e),t.abrupt("return",!0);case 5:return t.prev=5,t.t0=t.catch(0),t.abrupt("return",!1);case 8:case"end":return t.stop()}}),_callee3,null,[[0,5]])})))).apply(this,arguments)}function copyTextToClipboard(e){return _copyTextToClipboard.apply(this,arguments)}function _copyTextToClipboard(){return(_copyTextToClipboard=Object(c.a)(r.a.mark((function _callee4(e){return r.a.wrap((function _callee4$(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,navigator.clipboard.writeText(e);case 3:return t.abrupt("return",!0);case 6:return t.prev=6,t.t0=t.catch(0),t.abrupt("return",!1);case 9:case"end":return t.stop()}}),_callee4,null,[[0,6]])})))).apply(this,arguments)}function exportAsJSON(e){return _exportAsJSON.apply(this,arguments)}function _exportAsJSON(){return(_exportAsJSON=Object(c.a)(r.a.mark((function _callee5(e){var t,n,a,i,o,c,s,d=arguments;return r.a.wrap((function _callee5$(r){for(;;)switch(r.prev=r.next){case 0:if(t=d.length>1&&void 0!==d[1]?d[1]:"experiment",n=d.length>2&&void 0!==d[2]?d[2]:0,a=d.length>3&&void 0!==d[3]&&d[3],i=JSON.stringify(e,(function(e,t){return ArrayBuffer.isView(t)?Array.from(t):t}),n),a){r.next=9;break}o=new Blob([i],{type:"text/plain"}),Object(l.saveAs)(o,"".concat(t,".nmrium")),r.next=21;break;case 9:return r.prev=9,(c=new u.a).file("".concat(t,".nmrium"),i),r.next=14,c.generateAsync({type:"blob",compression:"DEFLATE",compressionOptions:{level:9}});case 14:s=r.sent,Object(l.saveAs)(s,"".concat(t,".nmrium")),r.next=21;break;case 18:r.prev=18,r.t0=r.catch(9),console.log(r.t0);case 21:case"end":return r.stop()}}),_callee5,null,[[9,18]])})))).apply(this,arguments)}function exportAsMatrix(e,t){var n,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"experiment",i=(t.from,t.to,t.nbPoints,["name","experiment"]),r=Object(o.a)(e[0].data.x);try{for(r.s();!(n=r.n()).done;){var c=n.value;i.push(c)}}catch(x){r.e(x)}finally{r.f()}var s,u="".concat(i.join("\t"),"\n"),d=Object(o.a)(e);try{for(d.s();!(s=d.n()).done;){var b,p=s.value,f=p.data.re,h=p.info.experiment,m=p.display.name,g=[m,h],j=Object(o.a)(f);try{for(j.s();!(b=j.n()).done;){var v=b.value;g.push(v)}}catch(x){j.e(x)}finally{j.f()}u+="".concat(g.join("\t"),"\n")}}catch(x){d.e(x)}finally{d.f()}var O=new Blob([u],{type:"text/tab-separated-values"});Object(l.saveAs)(O,"".concat(a,".tsv"))}function exportAsNMRE(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"experiment";e.generateAsync({type:"blob"}).then((function(e){Object(l.saveAs)(e,"".concat(t,".nmredata"))}))}function exportAsSVG(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"experiment",t=arguments.length>1?arguments[1]:void 0,n=getBlob(t),a=n.blob;Object(l.saveAs)(a,"".concat(e,".svg"))}function exportAsPng(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"experiment",t=arguments.length>1?arguments[1]:void 0,n=getBlob(t),a=n.blob,i=n.width,o=n.height;try{var s=document.createElement("canvas");s.width=i,s.height=o;var u=s.getContext("2d");u.fillStyle="white",u.fillRect(0,0,s.width,s.height);var d=new Image,b=URL.createObjectURL(a);d.onload=Object(c.a)(r.a.mark((function _callee(){var t;return r.a.wrap((function _callee$(n){for(;;)switch(n.prev=n.next){case 0:u.drawImage(d,0,0),t=s.toDataURL("image/png",1),Object(l.saveAs)(t,"".concat(e,".png")),URL.revokeObjectURL(t);case 4:case"end":return n.stop()}}),_callee)}))),d.src=b}catch(p){console.log(p)}}function copyDataURLCliboard(e){var t=document.createElement("img");t.src=e,t.style.position="fixed",t.style.pointerEvents="none",t.style.opacity=0,document.body.appendChild(t);var n=document.createRange();n.selectNode(t),window.getSelection().addRange(n),document.execCommand("Copy"),document.body.removeChild(t)}function copyBlobToCliboard(e){e.toBlob((function(e){var t=new ClipboardItem(Object(a.a)({},e.type,e));navigator.clipboard.write([t]).then((function(){console.log("experiment copied.")}),(function(e){console.log(e)}))}))}function copyPNGToClipboard(e){var t=getBlob(e),n=t.blob,a=t.width,i=t.height;try{var o=document.createElement("canvas");o.width=a,o.height=i;var l=o.getContext("2d");l.fillStyle="white",l.fillRect(0,0,o.width,o.height);var s=new Image,u=URL.createObjectURL(n);s.onload=Object(c.a)(r.a.mark((function _callee2(){var e;return r.a.wrap((function _callee2$(t){for(;;)switch(t.prev=t.next){case 0:l.drawImage(s,0,0),e=o.toDataURL("image/png",1),navigator.clipboard.write?copyBlobToCliboard(o):copyDataURLCliboard(e),URL.revokeObjectURL(e);case 4:case"end":return t.stop()}}),_callee2)}))),s.src=u}catch(d){d instanceof ReferenceError&&alert("Your browser does not support this feature, please use Google Chrome"),console.log(d)}}function getBlob(e){var t=document.getElementById(e).cloneNode(!0),n=t.getAttribute("width").replace("px",""),a=t.getAttribute("height").replace("px","");t.querySelectorAll('[data-no-export="true"]').forEach((function(e){return e.remove()}));var i='<svg class="nmr-svg"  viewBox=\'0 0 '.concat(n," ").concat(a,"' width=\"").concat(n,'"  height="').concat(a,'"  version="1.1" xmlns="http://www.w3.org/2000/svg">'),r="".concat(i+"<style>.grid line,.grid path{stroke:none;} .peaks-text{fill:#730000} .x path{stroke-width:1px} .x text{\n    font-size: 12px;\n    font-weight: bold;\n  } \n \n  .nmr-svg,.contours{\n    background-color:white;\n    fill:white;\n  }\n  \n\n  \n  </style>"+t.innerHTML,"</svg>");return{blob:new Blob([r],{type:"image/svg+xml"}),width:n,height:a}}},218:function(e,t,n){"use strict";var a={};n.r(a),n.d(a,"id",(function(){return pa})),n.d(a,"name",(function(){return fa})),n.d(a,"apply",(function(){return apply})),n.d(a,"isApplicable",(function(){return isApplicable})),n.d(a,"reduce",(function(){return reduce}));var i={};n.r(i),n.d(i,"id",(function(){return ha})),n.d(i,"name",(function(){return ma})),n.d(i,"apply",(function(){return autoPhaseCorrection_apply})),n.d(i,"isApplicable",(function(){return autoPhaseCorrection_isApplicable})),n.d(i,"reduce",(function(){return autoPhaseCorrection_reduce}));var r={};n.r(r),n.d(r,"id",(function(){return ya})),n.d(r,"name",(function(){return ka})),n.d(r,"baselineAlgorithms",(function(){return Ca})),n.d(r,"apply",(function(){return baselineCorrection_apply})),n.d(r,"isApplicable",(function(){return baselineCorrection_isApplicable})),n.d(r,"reduce",(function(){return baselineCorrection_reduce}));var o={};n.r(o),n.d(o,"id",(function(){return Da})),n.d(o,"name",(function(){return wa})),n.d(o,"apply",(function(){return centerMean_apply})),n.d(o,"isApplicable",(function(){return centerMean_isApplicable})),n.d(o,"reduce",(function(){return centerMean_reduce}));var c={};n.r(c),n.d(c,"id",(function(){return Ta})),n.d(c,"name",(function(){return Ma})),n.d(c,"apply",(function(){return digitalFilter_apply})),n.d(c,"isApplicable",(function(){return digitalFilter_isApplicable})),n.d(c,"reduce",(function(){return digitalFilter_reduce}));var l={};n.r(l),n.d(l,"id",(function(){return Aa})),n.d(l,"name",(function(){return Ea})),n.d(l,"apply",(function(){return equallySpaced_apply})),n.d(l,"isApplicable",(function(){return equallySpaced_isApplicable})),n.d(l,"reduce",(function(){return equallySpaced_reduce}));var s={};n.r(s),n.d(s,"id",(function(){return Pa})),n.d(s,"name",(function(){return Fa})),n.d(s,"apply",(function(){return fft_apply})),n.d(s,"isApplicable",(function(){return fft_isApplicable})),n.d(s,"reduce",(function(){return fft_reduce}));var u={};n.r(u),n.d(u,"id",(function(){return _a})),n.d(u,"name",(function(){return Ia})),n.d(u,"apply",(function(){return fromTo_apply})),n.d(u,"isApplicable",(function(){return fromTo_isApplicable})),n.d(u,"reduce",(function(){return fromTo_reduce}));var d={};n.r(d),n.d(d,"id",(function(){return Na})),n.d(d,"name",(function(){return Ra})),n.d(d,"apply",(function(){return lineBroadening_apply})),n.d(d,"isApplicable",(function(){return lineBroadening_isApplicable})),n.d(d,"reduce",(function(){return lineBroadening_reduce}));var b={};n.r(b),n.d(b,"id",(function(){return La})),n.d(b,"name",(function(){return za})),n.d(b,"apply",(function(){return pareto_apply})),n.d(b,"isApplicable",(function(){return pareto_isApplicable})),n.d(b,"reduce",(function(){return pareto_reduce}));var p={};n.r(p),n.d(p,"id",(function(){return Ha})),n.d(p,"name",(function(){return Ba})),n.d(p,"apply",(function(){return phaseCorrection_apply})),n.d(p,"isApplicable",(function(){return phaseCorrection_isApplicable})),n.d(p,"reduce",(function(){return phaseCorrection_reduce}));var f={};n.r(f),n.d(f,"id",(function(){return Va})),n.d(f,"name",(function(){return Xa})),n.d(f,"apply",(function(){return shiftX_apply})),n.d(f,"isApplicable",(function(){return shiftX_isApplicable})),n.d(f,"reduce",(function(){return shiftX_reduce}));var h={};n.r(h),n.d(h,"id",(function(){return Ya})),n.d(h,"name",(function(){return Za})),n.d(h,"apply",(function(){return standardDeviation_apply})),n.d(h,"isApplicable",(function(){return standardDeviation_isApplicable})),n.d(h,"reduce",(function(){return standardDeviation_reduce}));var m={};n.r(m),n.d(m,"id",(function(){return Ua})),n.d(m,"name",(function(){return Ka})),n.d(m,"apply",(function(){return zeroFilling_apply})),n.d(m,"isApplicable",(function(){return zeroFilling_isApplicable})),n.d(m,"reduce",(function(){return zeroFilling_reduce}));var g={};n.r(g),n.d(g,"id",(function(){return Wa})),n.d(g,"name",(function(){return Ga})),n.d(g,"apply",(function(){return filter2d_shiftX_apply})),n.d(g,"isApplicable",(function(){return filter2d_shiftX_isApplicable})),n.d(g,"reduce",(function(){return filter2d_shiftX_reduce}));var j={};n.r(j),n.d(j,"id",(function(){return qa})),n.d(j,"name",(function(){return Ja})),n.d(j,"apply",(function(){return shiftY_apply})),n.d(j,"isApplicable",(function(){return shiftY_isApplicable})),n.d(j,"reduce",(function(){return shiftY_reduce}));var v=n(6),O=n(42),x=n(15),y=n(12),k=n(183),C=n.n(k),S=n(1),D=n(536),w=n(774),T=n(775);function checkModifierKeyActivated(e){for(var t=0,n=["Alt","AltGraph","CapsLock","Control","Meta","NumLocK","ScrollLock","Shift","OS"];t<n.length;t++){var a=n[t];if(e.getModifierState(a))return!0}return!1}var M=n(786),A=n(787),E=n(255),P=n.n(E),F=n(203),_=n.n(F),I=n(3),N=Object(S.createContext)(),R={step:"initial",brush:{start:null,end:null}},L=[];function BrushTracker(e){var t=e.children,n=e.className,a=e.style,i=e.onBrush,r=e.onZoom,o=e.onDoubleClick,c=e.onClick,l=e.noPropagation,s=Object(S.useReducer)(reducer,R),u=Object(O.a)(s,2),d=u[0],b=u[1],p=Object(S.useState)(),f=Object(O.a)(p,2),h=f[0],m=f[1],g=Object(S.useCallback)((function(e){return 0===e.button&&(l&&e.stopPropagation(),b({type:"DOWN",shiftKey:e.shiftKey,altKey:e.altKey,screenX:e.screenX,screenY:e.screenY,clientX:e.clientX,clientY:e.clientY,boundingRect:e.currentTarget.getBoundingClientRect()}),m(e.timeStamp)),!1}),[l]),j=Object(S.useCallback)((function(e){e.persist();var t=e.timeStamp,n=e.currentTarget.getBoundingClientRect(),a=e.clientX-n.x,i=e.clientY-n.y,r=P()((function(){t-h<=150&&1===L.length&&c(Object(v.a)(Object(v.a)({},e),{},{x:a,y:i})),L=[]}),200);L.push(r),r(),L.length>1&&(_()(L,(function(e){return e.cancel()})),L=[],o(Object(v.a)(Object(v.a)({},e),{},{x:a,y:i})))}),[h,c,o]),x=Object(S.useCallback)((function(e){var t=e.currentTarget.getBoundingClientRect(),n=e.clientX-t.x,a=e.clientY-t.y,i=e.deltaY,o=e.deltaX,c=e.shiftKey,l=e.deltaMode;r({deltaY:i||o,shiftKey:c,deltaMode:l,x:n,y:a})}),[r]);Object(S.useEffect)((function(){var e=d.step,t=d.startX,n=d.endX;"end"===e&&Math.abs(t-n)>5&&(i(d),b({type:"DONE"}))}),[i,d]);var y=Object(S.useCallback)((function(e){b({type:"MOVE",screenX:e.screenX,screenY:e.screenY,clientX:e.clientX,clientY:e.clientY})}),[]),k=Object(S.useCallback)((function(e){return b({type:"UP",clientX:e.clientX,clientY:e.clientY}),!1}),[]);return Object(I.jsx)(N.Provider,{value:d,children:Object(I.jsx)("div",{className:n,style:a,onMouseDown:g,onMouseUp:k,onMouseMove:y,onClick:j,onWheel:x,children:t})})}function reducer(e,t){switch(t.type){case"UP":if("brushing"===e.step||"start"===e.step){var n=t.clientX,a=t.clientY;return Object(v.a)(Object(v.a)({},e),{},{endX:n-e.boundingRect.x,endY:a-e.boundingRect.y,step:"start"===e.step?"initial":"end"})}return e;case"DOWN":if("initial"===e.step||"end"===e.step){var i=t.screenX,r=t.screenY,o=t.clientX,c=t.clientY,l=t.boundingRect,s=t.shiftKey,u=t.altKey,d=o-l.x,b=c-l.y;return Object(v.a)(Object(v.a)({},e),{},{shiftKey:s,altKey:u,startX:d,startY:b,startScreenX:i,startScreenY:r,startClientX:o,startClientY:c,boundingRect:l,step:"start"})}return e;case"MOVE":if("start"===e.step||"brushing"===e.step){var p=t.clientX,f=t.clientY;return Object(v.a)(Object(v.a)({},e),{},{step:"brushing",endX:p-e.boundingRect.x,endY:f-e.boundingRect.y})}return e;case"DONE":if("end"===e.step)return Object(v.a)(Object(v.a)({},e),{},{step:"initial"});break;default:return e}}BrushTracker.defaultProps={onBrush:function onBrush(){return null},onZoom:function onZoom(){return null},onDoubleClick:function onDoubleClick(){return null},onClick:function onClick(){return null}};var z=Object(S.createContext)(),H=z.Provider;function MouseTracker(e){var t=e.children,n=e.className,a=e.style,i=e.noPropagation,r=Object(S.useState)(null),o=Object(O.a)(r,2),c=o[0],l=o[1],s=Object(S.useCallback)((function(e){var t=e.currentTarget.getBoundingClientRect(),n=e.clientX-t.x,a=e.clientY-t.y;l({x:n,y:a}),i&&e.stopPropagation()}),[i]),u=Object(S.useCallback)((function(e){l(null),i&&e.stopPropagation()}),[i]);return Object(I.jsx)(H,{value:c,children:Object(I.jsx)("div",{className:n,style:a,onMouseMove:s,onMouseLeave:u,children:t})})}var B=Object(S.createContext)(),V=B.Provider;function useChartData(){return Object(S.useContext)(B)}var X=Object(S.createContext)(),Y=X.Provider;function useDispatch(){return Object(S.useContext)(X)}var Z=Object(S.createContext)(),U=Z.Provider;function usePreferences(){return Object(S.useContext)(Z)}var K=Object(S.createContext)(),W=K.Provider;function useScale(){return Object(S.useContext)(K)}var G={TOP_LEFT:"top left",TOP_CENTER:"top center",TOP_RIGHT:"top right",MIDDLE_LEFT:"middle left",MIDDLE:"middle",MIDDLE_RIGHT:"middle right",BOTTOM_LEFT:"bottom left",BOTTOM_CENTER:"bottom center",BOTTOM_RIGHT:"bottom right"},q="info",J="success",$="error",Q="progress_indicator",ee="fade",te="scale",ne=Object(S.createContext)(),ae=ne.Provider,ie=function useModal(){return Object(S.useContext)(ne)},re={outerContainer:{position:"fixed",top:0,right:0,bottom:0,left:0,backgroundColor:"rgba(255,255,255,0.8)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1},innerContainer:{boxSizing:"initial",backgroundColor:"#fff",boxShadow:"0 0 0 0, 0 8px 16px rgba(0,0,0,.30)",display:"flex",flexDirection:"column",minWidth:"300px",minHeight:"140px",justifyContent:"space-between",borderRadius:"5px"}},oe=function Modal(e){var t=e.children,n=e.open,a=e.onClose,i=e.style,r=Object(S.useCallback)((function(e){a(e)}),[a]);return Object(S.useEffect)((function(){!1===n&&r()}),[r,n]),n&&Object(I.jsx)("div",{style:re.outerContainer,onClick:r,children:Object(I.jsx)("div",{style:Object(v.a)(Object(v.a)({},re.innerContainer),i),onClick:function onClick(e){e.preventDefault(),e.stopPropagation()},children:t})})};oe.defaultProps={onClose:function onClose(){return null},open:!1};var ce,le,se=oe,ue=n(91),de=n(4),be=n(432),pe=n(785),fe=n(182),he=n(788),me=(ce={},Object(ue.a)(ce,ee,{transition:"opacity ".concat(250,"ms ease"),opacity:0}),Object(ue.a)(ce,te,{transform:"scale(1)",transition:"all ".concat(250,"ms ease-in-out")}),ce),ge=(le={},Object(ue.a)(le,ee,{entering:{opacity:0},entered:{opacity:1}}),Object(ue.a)(le,te,{entering:{transform:"scale(0)"},entered:{transform:"scale(1)"},exiting:{transform:"scale(0)"},exited:{transform:"scale(1)"}}),le),je=function Transtion(e){var t=e.children,n=e.type,a=e.transitionStyles,i=Object(fe.a)(e,["children","type","transitionStyles"]),r=Object(S.useRef)(null);return Object(I.jsx)(he.a,Object(v.a)(Object(v.a)({nodeRef:r},i),{},{timeout:250,children:function children(e){return Object(I.jsx)("div",{ref:r,style:Object(v.a)(Object(v.a)(Object(v.a)({},me[n]),a[n][e]),a.default),children:t})}}))};je.defaultProps={transitionStyles:ge};var ve=je;var Oe,xe=function Wrapper_Wrapper(e){var t=e.children,n=e.options.position,a=Object(fe.a)(e,["children","options"]),i=Object(S.useMemo)((function(){return function getStyles(e,t){var n=Object(v.a)({position:"fixed",display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",pointerEvents:"none",overflow:"visible"},t.containerStyle?{top:"".concat(t.containerStyle.top,"px"),left:"".concat(t.containerStyle.left,"px"),height:"".concat(t.containerStyle.height,"px"),width:"".concat(t.containerStyle.width,"px")}:{width:"100%",height:"100%"});switch(e){case G.TOP_LEFT:return Object(v.a)(Object(v.a)({},n),{},{justifyContent:"flex-start",alignItems:"flex-start"});case G.TOP_CENTER:return Object(v.a)(Object(v.a)({},n),{},{justifyContent:"flex-start"});case G.TOP_RIGHT:return Object(v.a)(Object(v.a)({},n),{},{justifyContent:"flex-start",alignItems:"flex-end"});case G.MIDDLE_LEFT:return Object(v.a)(Object(v.a)({},n),{},{justifyContent:"center",alignItems:"flex-start"});case G.MIDDLE:return Object(v.a)(Object(v.a)({},n),{},{justifyContent:"center"});case G.MIDDLE_RIGHT:return Object(v.a)(Object(v.a)({},n),{},{justifyContent:"center",alignItems:"flex-end"});case G.BOTTOM_LEFT:return Object(v.a)(Object(v.a)({},n),{},{justifyContent:"flex-end",alignItems:"flex-start"});case G.BOTTOM_CENTER:return Object(v.a)(Object(v.a)({},n),{},{justifyContent:"flex-end"});case G.BOTTOM_RIGHT:return Object(v.a)(Object(v.a)({},n),{},{justifyContent:"flex-end",alignItems:"flex-end"});default:return n}}(n,a)}),[n,a]);return t.length>0&&Object(I.jsx)("div",Object(v.a)(Object(v.a)({style:i},a),{},{children:t}))},ye=n(5),ke=Object(y.a)(Oe||(Oe=Object(x.a)(["\n  display: flex;\n  flex-direction: column;\n  border-top: 10px solid #ed0000;\n  flex: 1;\n  border-radius: 5px;\n\n  .message {\n    font-weight: bold;\n    font-size: 14px;\n    text-align: center;\n    color: #af0000;\n    text-align: center;\n    padding: 35px;\n    flex: 1;\n  }\n  .buttons-container {\n    display: flex;\n    align-items: flex-end;\n    justify-content: flex-end;\n    padding: 5px;\n    border-top: 1px solid #efefef;\n\n    button:first-of-type {\n      border-radius: 5px 0 0 5px;\n      border-weight: 0 1px 0 0;\n    }\n    button:last-child {\n      border-radius: 0px 5px 5px 0px;\n      border-weight: 0 0 0 1px;\n    }\n    button {\n      border: 1px solid #dcdcdc;\n      background-color: white;\n      display: inline-block;\n      cursor: pointer;\n      color: #363636;\n      font-weight: bold;\n      padding: 6px 24px;\n      text-decoration: none;\n    }\n    button:hover {\n      background: -webkit-gradient(\n        linear,\n        left top,\n        left bottom,\n        color-stop(0.05, #f6f6f6),\n        color-stop(1, #ffffff)\n      );\n      background: -moz-linear-gradient(top, #f6f6f6 5%, #ffffff 100%);\n      background: -webkit-linear-gradient(top, #f6f6f6 5%, #ffffff 100%);\n      background: -o-linear-gradient(top, #f6f6f6 5%, #ffffff 100%);\n      background: -ms-linear-gradient(top, #f6f6f6 5%, #ffffff 100%);\n      background: linear-gradient(to bottom, #f6f6f6 5%, #ffffff 100%);\n      filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#f6f6f6', endColorstr='#ffffff',GradientType=0);\n      background-color: #f6f6f6;\n    }\n  }\n"]))),Ce=function ConfirmationDialog(e){var t=e.style,n=e.buttons,a=e.onClose,i=e.message,r=Object(S.useCallback)((function(e,t){var n=t.handler;(void 0===n?function(){return null}:n)(e),a()}),[a]);return Object(ye.c)("div",{style:t,css:ke,children:[Object(ye.b)("p",{className:"message",children:i}),Object(ye.b)("div",{className:"buttons-container",children:n.map((function(e){return Object(ye.b)("button",{type:"button",onClick:function onClick(t){return r(t,e)},style:e.style&&e.style,children:e.text},e.text)}))})]})};Ce.defaultProps={buttons:[],style:{}};var Se,De,we=Ce,Te=(Se={},Object(ue.a)(Se,ee,{entering:{opacity:0},entered:{opacity:1}}),Object(ue.a)(Se,te,{entering:{transform:"scale(0)"},entered:{transform:"scale(1)"},exiting:{transform:"scale(0)"},exited:{transform:"scale(0)"}}),Se);function Provider(e){var t=e.children,n=e.style,a=e.offset,i=e.position,r=e.transition,o=e.wrapperRef,c=Object(S.useRef)(),l=Object(S.useState)(),s=Object(O.a)(l,2),u=s[0],d=s[1];Object(S.useEffect)((function(){c.current=document.createElement("div");var e=c.current;return o&&o.appendChild(e),function(){e&&o&&o.removeChild(e)}}),[o]);var b=function remove(){d(null)},p=Object(S.useMemo)((function(){return o?o.getBoundingClientRect():{top:0,left:0,width:window.innerWidth,height:window.innerHeight}}),[o]),f=Object(S.useCallback)((function(){b()}),[]),h=Object(S.useCallback)((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={component:e,options:Object(v.a)({isBackgroundBlur:!0,enableResizing:!1},t),close:function(){return b()}};return d(n),n.options.onOpen&&n.options.onOpen(),n}),[]),m=Object(S.useCallback)((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{enableResizing:!1},n={component:Object(ye.b)(we,Object(v.a)({},e)),options:Object(v.a)({isBackgroundBlur:!0},t),close:function(){return b()}};return d(n),n.options.onOpen&&n.options.onOpen(),n}),[]);Object(S.useEffect)((function(){var e=function keyHandler(e){["Escape","Esc"].includes(e.key)&&f()};return document.addEventListener("keydown",e,!1),function(){return document.removeEventListener("keydown",e,!1)}}),[f]);var g=Object(y.a)(De||(De=Object(x.a)(["\n    position: absolute;\n    left: 0;\n    top: 0;\n    bottom: 0;\n    right: 0;\n    z-index: 0;\n    pointer-events: all;\n    .handle {\n      cursor: move;\n    }\n\n    .rnd-container {\n      box-sizing: initial;\n      background-color: #fff;\n      box-shadow: 0 0 0 0, 0 8px 16px rgba(0, 0, 0, 0.3);\n      border-radius: 5px;\n    }\n  "]))),j=u&&u.options.isBackgroundBlur?{backgroundColor:"rgba(255,255,255,0.8)"}:{pointerEvents:"none"};return Object(ye.c)(ae,{value:{show:h,close:function close(){f()},modal:u,showConfirmDialog:m},children:[t,c.current&&Object(de.createPortal)(Object(ye.b)(S.Fragment,{children:u?Object(ye.b)("div",{css:g,style:Object(v.a)({},j),children:Object(ye.b)(pe.a,{appear:!0,options:{position:u.options.position?u.options.position:i},containerStyle:p,component:xe,children:Object(ye.b)(ve,{type:u.options.transition?u.options.transition:r,transitionStyles:Object(v.a)(Object(v.a)({},Te),{},{default:{width:u.options.width?"".concat(u.options.width,"px"):"auto"},height:u.options.height?"".concat(u.options.height,"px"):"auto"}),children:Object(ye.b)(be.a,{default:{width:u.options.width?u.options.width:"auto",height:u.options.height?u.options.height:"auto",x:0,y:0},className:"rnd-container",style:Object(v.a)(Object(v.a)({},n),{},{margin:a,pointerEvents:"all",position:"none",userSelect:"none"}),enableResizing:u.options.enableResizing,dragHandleClassName:"handle",enableUserSelectHack:!1,children:u.options&&Object(S.cloneElement)(u.component,Object(v.a)(Object(v.a)({},u.options),{},{onClose:f,style:{cursor:"default"}}))})},u.id)},G[u.options.transition?u.options.transition:r])}):null}),c.current)]})}Provider.defaultProps={offset:"0px",position:G.CENTER,transition:te,wrapperRef:null,style:{}};var Me,Ae=Provider,Ee=Object(S.createContext)({open:function open(){return null}}),Pe=Ee.Provider;function useLoader(){return Object(S.useContext)(Ee)}var Fe=Object(y.a)(Me||(Me=Object(x.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background-color: rgba(255, 255, 255, 0.25);\n  height: 100%;\n  flex-direction: column;\n  user-select: none;\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  outline: 10px dashed rgba(0, 0, 0, 0.3);\n  outline-offset: -10px;\n  padding-left: 20px;\n  padding-right: 20px;\n\n  p {\n    padding: 15px 30px;\n    background-color:rgba(0, 0, 0, 0.5);\n    border-radius: 39px;\n    color: white;\n    font-size: x-large;\n    font-weight: bold;\n\n  }\n}\n"])));var _e,Ie=function NoData(e){var t=e.isEmpty,n=void 0===t||t,a=e.emptyText,i=void 0===a?"Drag and drop here a JCAMP-DX, zipped Bruker folder, Jeol jdf or NMRium file":a,r=useLoader(),o=Object(S.useCallback)((function(){r.open()}),[r]);return n?Object(ye.b)("div",{css:Fe,onClick:o,children:Object(ye.b)("p",{children:i})}):null},Ne=Object(y.a)(_e||(_e=Object(x.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background-color: rgba(255, 255, 255, 0.25);\n  height: 100%;\n  flex-direction: column;\n  user-select: none;\n  position: absolute;\n  width: 100%;\n\n  svg {\n    animation-duration: 0.5s;\n    animation-name: spinAnimation;\n    animation-iteration-count: infinite;\n    animation-fill-mode: forwards;\n    animation-direction: inherit;\n    animation-timing-function: linear;\n    animation-duration: 1s;\n    width: 100px;\n    height: 100px;\n  }\n\n  @keyframes spinAnimation {\n    from {\n      transform: rotate(0deg);\n    }\n\n    to {\n      transform: rotate(360deg);\n    }\n  }\n"])));function DefaultSpinnerComponent(){return Object(ye.c)("div",{css:Ne,children:[Object(ye.b)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 841.9 595.3",children:Object(ye.c)("g",{fill:"#61DAFB",children:[Object(ye.b)("path",{d:"M666.3 296.5c0-32.5-40.7-63.3-103.1-82.4 14.4-63.6 8-114.2-20.2-130.4-6.5-3.8-14.1-5.6-22.4-5.6v22.3c4.6 0 8.3.9 11.4 2.6 13.6 7.8 19.5 37.5 14.9 75.7-1.1 9.4-2.9 19.3-5.1 29.4-19.6-4.8-41-8.5-63.5-10.9-13.5-18.5-27.5-35.3-41.6-50 32.6-30.3 63.2-46.9 84-46.9V78c-27.5 0-63.5 19.6-99.9 53.6-36.4-33.8-72.4-53.2-99.9-53.2v22.3c20.7 0 51.4 16.5 84 46.6-14 14.7-28 31.4-41.3 49.9-22.6 2.4-44 6.1-63.6 11-2.3-10-4-19.7-5.2-29-4.7-38.2 1.1-67.9 14.6-75.8 3-1.8 6.9-2.6 11.5-2.6V78.5c-8.4 0-16 1.8-22.6 5.6-28.1 16.2-34.4 66.7-19.9 130.1-62.2 19.2-102.7 49.9-102.7 82.3 0 32.5 40.7 63.3 103.1 82.4-14.4 63.6-8 114.2 20.2 130.4 6.5 3.8 14.1 5.6 22.5 5.6 27.5 0 63.5-19.6 99.9-53.6 36.4 33.8 72.4 53.2 99.9 53.2 8.4 0 16-1.8 22.6-5.6 28.1-16.2 34.4-66.7 19.9-130.1 62-19.1 102.5-49.9 102.5-82.3zm-130.2-66.7c-3.7 12.9-8.3 26.2-13.5 39.5-4.1-8-8.4-16-13.1-24-4.6-8-9.5-15.8-14.4-23.4 14.2 2.1 27.9 4.7 41 7.9zm-45.8 106.5c-7.8 13.5-15.8 26.3-24.1 38.2-14.9 1.3-30 2-45.2 2-15.1 0-30.2-.7-45-1.9-8.3-11.9-16.4-24.6-24.2-38-7.6-13.1-14.5-26.4-20.8-39.8 6.2-13.4 13.2-26.8 20.7-39.9 7.8-13.5 15.8-26.3 24.1-38.2 14.9-1.3 30-2 45.2-2 15.1 0 30.2.7 45 1.9 8.3 11.9 16.4 24.6 24.2 38 7.6 13.1 14.5 26.4 20.8 39.8-6.3 13.4-13.2 26.8-20.7 39.9zm32.3-13c5.4 13.4 10 26.8 13.8 39.8-13.1 3.2-26.9 5.9-41.2 8 4.9-7.7 9.8-15.6 14.4-23.7 4.6-8 8.9-16.1 13-24.1zM421.2 430c-9.3-9.6-18.6-20.3-27.8-32 9 .4 18.2.7 27.5.7 9.4 0 18.7-.2 27.8-.7-9 11.7-18.3 22.4-27.5 32zm-74.4-58.9c-14.2-2.1-27.9-4.7-41-7.9 3.7-12.9 8.3-26.2 13.5-39.5 4.1 8 8.4 16 13.1 24 4.7 8 9.5 15.8 14.4 23.4zM420.7 163c9.3 9.6 18.6 20.3 27.8 32-9-.4-18.2-.7-27.5-.7-9.4 0-18.7.2-27.8.7 9-11.7 18.3-22.4 27.5-32zm-74 58.9c-4.9 7.7-9.8 15.6-14.4 23.7-4.6 8-8.9 16-13 24-5.4-13.4-10-26.8-13.8-39.8 13.1-3.1 26.9-5.8 41.2-7.9zm-90.5 125.2c-35.4-15.1-58.3-34.9-58.3-50.6 0-15.7 22.9-35.6 58.3-50.6 8.6-3.7 18-7 27.7-10.1 5.7 19.6 13.2 40 22.5 60.9-9.2 20.8-16.6 41.1-22.2 60.6-9.9-3.1-19.3-6.5-28-10.2zM310 490c-13.6-7.8-19.5-37.5-14.9-75.7 1.1-9.4 2.9-19.3 5.1-29.4 19.6 4.8 41 8.5 63.5 10.9 13.5 18.5 27.5 35.3 41.6 50-32.6 30.3-63.2 46.9-84 46.9-4.5-.1-8.3-1-11.3-2.7zm237.2-76.2c4.7 38.2-1.1 67.9-14.6 75.8-3 1.8-6.9 2.6-11.5 2.6-20.7 0-51.4-16.5-84-46.6 14-14.7 28-31.4 41.3-49.9 22.6-2.4 44-6.1 63.6-11 2.3 10.1 4.1 19.8 5.2 29.1zm38.5-66.7c-8.6 3.7-18 7-27.7 10.1-5.7-19.6-13.2-40-22.5-60.9 9.2-20.8 16.6-41.1 22.2-60.6 9.9 3.1 19.3 6.5 28.1 10.2 35.4 15.1 58.3 34.9 58.3 50.6-.1 15.7-23 35.6-58.4 50.6zM320.8 78.4z"}),Object(ye.b)("path",{d:"M520.5 78.1z"})]})}),Object(ye.b)("p",{children:"Loading ..."})]})}function defaultGetSpinner(){return Object(I.jsx)(DefaultSpinnerComponent,{})}var Re=Object(S.createContext)(defaultGetSpinner),Le=Re.Provider;var ze=function Spinner(e){var t=e.isLoading,n=void 0===t||t,a=e.emptyText,i=void 0===a?void 0:a,r=useChartData().data,o=Object(S.useState)(!1),c=Object(O.a)(o,2),l=c[0],s=c[1];Object(S.useEffect)((function(){var e=null;return n||(e=setTimeout((function(){s(!0)}),500)),function(){clearTimeout(e)}}),[n]);var u=Object(S.useContext)(Re);return Object(I.jsxs)(S.Fragment,{children:[n&&u(),l&&!n&&Object(I.jsx)(Ie,{isEmpty:r&&0===r.length,emptyText:i})]})},He=n(187),Be=n(427),Ve=n(764),Xe=n(88),Ye=Object(S.createContext)(),Ze=Ye.Provider;function useGlobal(){return Object(S.useContext)(Ye)}var Ue={position:"fixed",top:0,left:0,pointerEvents:"none",backgroundColor:"gray",padding:"3px",borderRadius:"2px",color:"white",whiteSpace:"nowrap",fontSize:"10px",fontFamily:"tahoma",textShadow:"none"};function ToolTip(e){var t=e.style,n=e.className,a=e.popupPlacement,i=void 0===a?"right":a,r=e.children,o=e.title,c=e.offset,l=void 0===c?{x:0,y:0}:c,s=Object(S.useRef)(),u=Object(S.useRef)(),d=Object(S.useState)({x:0,y:0}),b=Object(O.a)(d,2),p=b[0],f=b[1],h=Object(S.useState)(!1),m=Object(O.a)(h,2),g=m[0],j=m[1],x=useGlobal().elementsWraperRef;Object(S.useLayoutEffect)((function(){if(g){var e=function getPopupPlacement(){var e,t,n=s.current.getBoundingClientRect(),a=u.current.getBoundingClientRect();switch(i){case"left":e=-a.width,t=n.height/2-n.height/2*a.height/n.height;break;case"right":e=n.width,t=n.height/2-n.height/2*a.height/n.height;break;case"top":e=n.width/2-n.width/2*a.width/n.width,t=-n.height;break;case"bottom":e=n.width/2-n.width/2*a.width/n.width,t=n.height;break;default:e=0,t=0}return{x:e+n.x,y:t+n.y}}();f(e)}}),[i,g]);var y=Object(S.useCallback)((function(){j(!0)}),[]),k=Object(S.useCallback)((function(){j(!1)}),[]);return Object(I.jsxs)(S.Fragment,{children:[Object(I.jsx)("div",{style:Object(v.a)({position:"relative",height:"100%",display:"flex",justifyContent:"center",alignItems:"center"},t.mainContainer),ref:s,onMouseOver:y,onMouseOut:k,children:r}),g&&Object(de.createPortal)(Object(I.jsx)("div",{ref:u,style:Object(v.a)(Object(v.a)({},Ue),{},{transform:"translate(".concat(p.x+l.x,"px,").concat(p.y+l.y,"px)"),zIndex:999999999},t.popup),className:n,children:Object(I.jsx)("span",{style:{pointerEvents:"none"},children:o})}),x)]})}ToolTip.defaultProps={style:{popup:{},mainContainer:{}}};var Ke,We=Object(S.memo)(ToolTip),Ge=Object(y.a)(Ke||(Ke=Object(x.a)(["\n  background-color: transparent;\n  border: none;\n  height: 100%;\n  display:flex,\n  justify-content:center;\n  align-items:center;\n\n  svg {\n    fill: #ca0000;\n    font-size: 16px;\n  }\n"])));function CloseButton(e){var t=e.onClick,n=e.popupTitle,a=e.popupPlacement,i=e.className;return Object(ye.b)("div",{className:i,children:Object(ye.b)(We,{title:n,popupPlacement:a,children:Object(ye.b)("button",{css:Ge,type:"button",onClick:t,children:Object(ye.b)(Xe.G,{})})})})}CloseButton.defaultProps={onClick:function onClick(){return null},popupTitle:"Close",popupPlacement:"left",className:""};var qe,Je,$e=Object(S.memo)(CloseButton),Qe=Object(y.a)(qe||(qe=Object(x.a)(["\n  display: flex;\n  flex-direction: column;\n  width: 900px;\n  height: 400px;\n  padding: 5px;\n  button:focus {\n    outline: none;\n  }\n  .header {\n    height: 24px;\n    border-bottom: 1px solid #f0f0f0;\n    display: flex;\n    span {\n      color: #464646;\n      font-size: 15px;\n      flex: 1;\n    }\n\n    button {\n      background-color: transparent;\n      border: none;\n      svg {\n        height: 16px;\n      }\n    }\n  }\n  .container {\n    overflow-y: auto;\n    background-color: white;\n    padding-top: 10px;\n\n    .row {\n      outline: none;\n      display: flex !important;\n      flex-direction: row;\n      margin: 0;\n      div {\n        flex: 4;\n      }\n      .multiplicity {\n        flex: 2;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n      }\n    }\n\n    .row:nth-child(odd) {\n      background: #fafafa;\n    }\n  }\n"]))),et=Object(y.a)(Je||(Je=Object(x.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-direction: column;\n  user-select: none;\n  width: 900px;\n  height: 400px;\n\n  svg {\n    animation-duration: 0.5s;\n    animation-name: spinAnimation;\n    animation-iteration-count: infinite;\n    animation-fill-mode: forwards;\n    animation-direction: inherit;\n    animation-timing-function: linear;\n    animation-duration: 1s;\n    width: 100px;\n    height: 100px;\n  }\n\n  @keyframes spinAnimation {\n    from {\n      transform: rotate(0deg);\n    }\n\n    to {\n      transform: rotate(360deg);\n    }\n  }\n"])));function MultipletAnalysisModal(e){var t=e.data,n=e.activeSpectrum,a=e.scaleX,i=e.startX,r=e.endX,o=e.onClose,c=Object(S.useState)(),l=Object(O.a)(c,2),s=l[0],u=l[1],d=Object(S.useState)(!1),b=Object(O.a)(d,2),p=b[0],f=b[1],h=Object(S.useState)(!1),m=Object(O.a)(h,2),g=m[0],j=m[1];return Object(S.useEffect)((function(){setTimeout((function(){f(!0)}),400)}),[]),Object(S.useEffect)((function(){if(n&&i&&r&&p){var e=t[n.index],o=e.data,c=o.x,l=o.y,s=e.info,d=a().invert(i),b=a().invert(r),f=Object(He.j)(c,{from:d,to:b}),h=f.fromIndex,m=f.toIndex,g={x:c.slice(h,m),y:l.slice(h,m)};try{var v=Object(Be.a)(g,{frequency:s.originFrequency,takeBestPartMultiplet:!0,symmetrizeEachStep:!0,debug:!0});j(!0),u(v)}catch(O){console.log(O)}}}),[i,r,t,a,n,p]),g?Object(ye.c)("div",{css:Qe,children:[Object(ye.c)("div",{className:"header handle",children:[Object(ye.b)("span",{children:"Analyse Multiplet"}),Object(ye.b)($e,{onClick:o})]}),Object(ye.b)("div",{className:"container",children:s&&s.debug&&s.debug.steps.map((function(e,t){var n,a;return Object(ye.c)("div",{className:"row",children:[Object(ye.b)(Ve.a,{chart:{series:{type:"line",data:e.multiplet}},style:{height:200,width:400,overflow:"auto"}}),Object(ye.b)("div",{className:"multiplicity",children:Object(ye.b)("p",{children:s.j[t]?"".concat(null===(n=s.j[t])||void 0===n?void 0:n.multiplicity,": ").concat(null===(a=s.j[t])||void 0===a?void 0:a.coupling.toFixed(3)," Hz"):""})}),Object(ye.b)(Ve.a,{chart:{series:{type:"line",data:e.errorFunction}},style:{height:200,width:400,overflow:"auto"}})]},t)}))})]}):Object(ye.c)("div",{css:et,children:[Object(ye.b)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 841.9 595.3",children:Object(ye.c)("g",{fill:"#61DAFB",children:[Object(ye.b)("path",{d:"M666.3 296.5c0-32.5-40.7-63.3-103.1-82.4 14.4-63.6 8-114.2-20.2-130.4-6.5-3.8-14.1-5.6-22.4-5.6v22.3c4.6 0 8.3.9 11.4 2.6 13.6 7.8 19.5 37.5 14.9 75.7-1.1 9.4-2.9 19.3-5.1 29.4-19.6-4.8-41-8.5-63.5-10.9-13.5-18.5-27.5-35.3-41.6-50 32.6-30.3 63.2-46.9 84-46.9V78c-27.5 0-63.5 19.6-99.9 53.6-36.4-33.8-72.4-53.2-99.9-53.2v22.3c20.7 0 51.4 16.5 84 46.6-14 14.7-28 31.4-41.3 49.9-22.6 2.4-44 6.1-63.6 11-2.3-10-4-19.7-5.2-29-4.7-38.2 1.1-67.9 14.6-75.8 3-1.8 6.9-2.6 11.5-2.6V78.5c-8.4 0-16 1.8-22.6 5.6-28.1 16.2-34.4 66.7-19.9 130.1-62.2 19.2-102.7 49.9-102.7 82.3 0 32.5 40.7 63.3 103.1 82.4-14.4 63.6-8 114.2 20.2 130.4 6.5 3.8 14.1 5.6 22.5 5.6 27.5 0 63.5-19.6 99.9-53.6 36.4 33.8 72.4 53.2 99.9 53.2 8.4 0 16-1.8 22.6-5.6 28.1-16.2 34.4-66.7 19.9-130.1 62-19.1 102.5-49.9 102.5-82.3zm-130.2-66.7c-3.7 12.9-8.3 26.2-13.5 39.5-4.1-8-8.4-16-13.1-24-4.6-8-9.5-15.8-14.4-23.4 14.2 2.1 27.9 4.7 41 7.9zm-45.8 106.5c-7.8 13.5-15.8 26.3-24.1 38.2-14.9 1.3-30 2-45.2 2-15.1 0-30.2-.7-45-1.9-8.3-11.9-16.4-24.6-24.2-38-7.6-13.1-14.5-26.4-20.8-39.8 6.2-13.4 13.2-26.8 20.7-39.9 7.8-13.5 15.8-26.3 24.1-38.2 14.9-1.3 30-2 45.2-2 15.1 0 30.2.7 45 1.9 8.3 11.9 16.4 24.6 24.2 38 7.6 13.1 14.5 26.4 20.8 39.8-6.3 13.4-13.2 26.8-20.7 39.9zm32.3-13c5.4 13.4 10 26.8 13.8 39.8-13.1 3.2-26.9 5.9-41.2 8 4.9-7.7 9.8-15.6 14.4-23.7 4.6-8 8.9-16.1 13-24.1zM421.2 430c-9.3-9.6-18.6-20.3-27.8-32 9 .4 18.2.7 27.5.7 9.4 0 18.7-.2 27.8-.7-9 11.7-18.3 22.4-27.5 32zm-74.4-58.9c-14.2-2.1-27.9-4.7-41-7.9 3.7-12.9 8.3-26.2 13.5-39.5 4.1 8 8.4 16 13.1 24 4.7 8 9.5 15.8 14.4 23.4zM420.7 163c9.3 9.6 18.6 20.3 27.8 32-9-.4-18.2-.7-27.5-.7-9.4 0-18.7.2-27.8.7 9-11.7 18.3-22.4 27.5-32zm-74 58.9c-4.9 7.7-9.8 15.6-14.4 23.7-4.6 8-8.9 16-13 24-5.4-13.4-10-26.8-13.8-39.8 13.1-3.1 26.9-5.8 41.2-7.9zm-90.5 125.2c-35.4-15.1-58.3-34.9-58.3-50.6 0-15.7 22.9-35.6 58.3-50.6 8.6-3.7 18-7 27.7-10.1 5.7 19.6 13.2 40 22.5 60.9-9.2 20.8-16.6 41.1-22.2 60.6-9.9-3.1-19.3-6.5-28-10.2zM310 490c-13.6-7.8-19.5-37.5-14.9-75.7 1.1-9.4 2.9-19.3 5.1-29.4 19.6 4.8 41 8.5 63.5 10.9 13.5 18.5 27.5 35.3 41.6 50-32.6 30.3-63.2 46.9-84 46.9-4.5-.1-8.3-1-11.3-2.7zm237.2-76.2c4.7 38.2-1.1 67.9-14.6 75.8-3 1.8-6.9 2.6-11.5 2.6-20.7 0-51.4-16.5-84-46.6 14-14.7 28-31.4 41.3-49.9 22.6-2.4 44-6.1 63.6-11 2.3 10.1 4.1 19.8 5.2 29.1zm38.5-66.7c-8.6 3.7-18 7-27.7 10.1-5.7-19.6-13.2-40-22.5-60.9 9.2-20.8 16.6-41.1 22.2-60.6 9.9 3.1 19.3 6.5 28.1 10.2 35.4 15.1 58.3 34.9 58.3 50.6-.1 15.7-23 35.6-58.4 50.6zM320.8 78.4z"}),Object(ye.b)("path",{d:"M520.5 78.1z"})]})}),Object(ye.b)("p",{children:"Analyse Multiplet in progress. Please wait ..."})]})}MultipletAnalysisModal.defaultProps={onClose:function onClose(){return null}};var tt=MultipletAnalysisModal,nt=n(207),at=n(86),it=n(87),rt={controllers:{mws:{low:2,high:20}},formatting:{nucleus:[{key:"1H",name:"1H",value:"0.00"},{key:"13C",name:"13C",value:"0.00"},{key:"15N",name:"15N",value:"0.00"},{key:"19F",name:"19F",value:"0.00"},{key:"29Si",name:"29Si",value:"0.00"},{key:"31P",name:"31P",value:"0.00"}]}},ot=n(239),ct=n.n(ot);function useStateWithLocalStorage(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=Object(S.useState)(localStorage.getItem(e)||"{}"),a=Object(O.a)(n,2),i=a[0],r=a[1];Object(S.useEffect)((function(){localStorage.setItem(e,i)}),[e,i]);var o=Object(S.useCallback)((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=JSON.parse(i);t?ct()(n,t,e):n=Object(v.a)(Object(v.a)({},n),e),r(JSON.stringify(n))}),[i]);return[t?C()(JSON.parse(i),t,{}):JSON.parse(i),o]}var lt=function getLocalStorage(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=localStorage.getItem(e);return n&&t?JSON.parse(n):n},st=function getValue(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return C()(e,t,n)},ut={lowStep:rt.controllers.mws.low,highStep:rt.controllers.mws.high,speedThreshold:3},dt=function(){function Spectrum1DZoomHelper(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(at.a)(this,Spectrum1DZoomHelper),this.scale=e,this.speedThreshold=t.speedThreshold||ut.speedThreshold,this.slowZoomStep=t.slowZoomStep||ut.lowStep,this.fastZoomStep=t.fastZoomStep||ut.highStep}return Object(it.a)(Spectrum1DZoomHelper,[{key:"wheel",value:function wheel(e,t){var n=1===Math.abs(e).toString().length?Math.abs(e):Math.abs(e)/100,a=lt("nmr-general-settings"),i=st(a,"general.controllers.mws.low"),r=st(a,"general.controllers.mws.high"),o=i?.01*i:.01*this.slowZoomStep,c=r?.05*r:.05*this.fastZoomStep,l=n<=this.speedThreshold?o:c,s=-1===Math.sign(e)?this.scale+l:this.scale-l;this.scale=s>=0||0===s?s:0}},{key:"getScale",value:function getScale(){return this.scale}},{key:"setScale",value:function setScale(e){this.scale=e}}]),Spectrum1DZoomHelper}(),bt={},pt=new dt(.5),ft="HORIZONTAL",ht="VERTICAL",mt="STEP_HROZENTAL";function initZoom1DHandler(e){e.forEach((function(e){bt[e.id]||1!==e.info.dimension||(bt[e.id]=new dt)}))}function Zoom_wheel(e,t,n){var a=n.data,i=n.activeSpectrum,r=n.activeTab,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;i||o?bt[o||i.id].wheel(e,t):a.forEach((function(n){1===n.info.dimension&&r===n.info.nucleus&&bt[n.id].wheel(e,t)}))}function getScaleByID(e){return Object(ue.a)({},e,bt[e].getScale(e))}function getScale(e){var t=e.data,n=e.activeTab;return t.reduce((function(e,t){return 1===t.info.dimension&&n===t.info.nucleus&&(e[t.id]=bt[t.id].getScale()),e}),{})}function setScale(e){if("number"===typeof e)Object.keys(bt).forEach((function(t){bt[t].setScale(e)}));else{if("object"!==typeof e)throw Error("scale must be number or Object");Object.keys(e).forEach((function(t){bt[t].setScale(e[t])}))}}function setZoom(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=e.height,i=e.margin,r=e.activeSpectrum;t&&setScale(t);var o=getScale(e);if(e.zoomFactor={scale:o},null===r&&null===n)e.yDomains=Object.keys(e.yDomains).reduce((function(t,n){var r=Object(nt.f)(e.originDomain.yDomains[n],[a-i.bottom,i.top]),c=Object(O.a)(e.originDomain.yDomains[n],2),l=c[0],s=c[1],u=Math.max(Math.abs(s),Math.abs(l))===s?0:l,d=nt.h.translate(0,(Math.sign(u),r(u))).scale(o[n]).translate(0,-r(0)).rescaleY(r).domain();return t[n]=d,t}),{});else{var c=n||r.id,l=Object(nt.f)(e.originDomain.yDomains[c],[a-i.bottom,i.top]),s=nt.h.translate(0,l(0)).scale(o[c]).translate(0,-l(0)),u=s.rescaleY(l).domain();e.yDomains=Object(v.a)(Object(v.a)({},e.yDomains),{},Object(ue.a)({},c,u))}}function setZoom1D(e,t,n,a){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,r=e.originDomain,o=e.tabActiveSpectrum,c=e.activeTab,l=o[c.split(",")[a]].id;i&&setScale(i);var s=getScaleByID(l);e.zoomFactor={scale:s};var u=Object(nt.f)(r.yDomains[l],[t-n,n]),d=nt.h.translate(0,u(0)).scale(s[l]).translate(0,-u(0)),b=d.rescaleY(u).domain();e.yDomains[l]=b}function setIntegralZoom(e,t){if(t.activeSpectrum){var n=t.height,a=t.margin;if(t.originIntegralYDomain[t.activeSpectrum.id]){var i=Object(nt.f)(t.originIntegralYDomain[t.activeSpectrum.id],[n-a.bottom,a.top]),r=e<.1?.05:e,o=nt.h.translate(0,i(0)).scale(r).translate(0,-i(0)).rescaleY(i).domain();t.integralZoomFactor={scale:e};var c=t.activeSpectrum;t.integralsYDomains[c.id]=o}}}var gt=n(194);function getXScale(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=e.width,a=e.margin,i=e.xDomains,r=e.xDomain,o=e.mode,c="RTL"===o?[n-a.right,a.left]:[a.left,n-a.right];return Object(nt.f)(t?i[t]:r,c)}function getYScale(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=e.height,a=e.margin,i=e.verticalAlign,r=e.yDomain,o=e.yDomains,c=i.flag&&!i.stacked?(n-30)/2:n-a.bottom-30,l=[];return l=null===t||void 0===o[t]?[0,r[1]]:[0,o[t][1]],Object(nt.f)(l,[c,a.top])}var jt="SET_SCALE",vt={scaleX:null,scaleY:null};function scaleReducer(e,t){switch(t.type){case"SET_X_SCALE":return Object(gt.b)(e,(function(e){e.scaleX=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return getXScale(t,e)}}));case"SET_Y_SCALE":return Object(gt.b)(e,(function(e){e.scaleY=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return getYScale(t,e)}}));case jt:return Object(gt.b)(e,(function(e){e.scaleX=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return getXScale(t.payload,e)},e.scaleY=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return getYScale(t.payload,e)}}));default:return e}}var Ot="INITIATE",xt="LOAD_JSON_FILE",yt="LOAD_JCAMP_FILE",kt="LOAD_NMREDATA_FILE",Ct="LOAD_MOL_FILE",St="LOAD_ZIP_FILE",Dt="LOAD_JDF_FILE",wt="ADD_PEAK",Tt="ADD_PEAKS",Mt="DELETE_PEAK_NOTATION",At="SHIFT_SPECTRUM",Et="SET_X_DOMAIN",Pt="SET_Y_DOMAIN",Ft="SET_ORIGINAL_DOMAIN",_t="SET_WIDTH",It="SET_DIMENSIONS",Nt="SET_SELECTED_TOOL",Rt="SET_SELECTED_FILTER",Lt="CHANGE_SPECTRUM_SETTING",zt="FULL_ZOOM_OUT",Ht="CHANGE_VISIBILITY",Bt="CHANGE_PEAKS_MARKERS_VISIBILITY",Vt="CHANGE_ACTIVE_SPECTRUM",Xt="CHANGE_SPECTRUM_COLOR",Yt="ADD_INTEGRAL",Zt="DELETE_INTEGRAL",Ut="TOGGLE_REAL_IMAGINARY_VISIBILITY",Kt="SET_ZOOM_FACTOR",Wt="ADD_MOLECULE",Gt="SET_MOLECULE",qt="DELETE_MOLECULE",Jt="SET_CORRELATION",$t="SET_CORRELATIONS",Qt="SET_CORRELATIONS_MF",en="SET_CORRELATIONS_TOLERANCE",tn="DELETE_SPECTRA",nn="CHANGE_SPECTRUM_DISPLAY_VIEW_MODE",an="RESIZE_INTEGRAL",rn="BRUSH_END",cn="RESET_X_DOMAIN",ln="CHANGE_INTEGRAL_ZOOM",sn="ENABLE_FILTER",un="DELETE_FILTER",dn="DELETE_SPECTRA_FILTER",bn="APPLY_ZERO_FILLING_FILTER",pn="APPLY_FFT_FILTER",fn="CALCULATE_MANUAL_PHASE_CORRECTION_FILTER",hn="APPLY_MANUAL_PHASE_CORRECTION_FILTER",mn="APPLY_AUTO_PHASE_CORRECTION_FILTER",gn="APPLY_ABSOLUTE_FILTER",jn="SET_VERTICAL_INDICATOR_X_POSITION",vn="AUTO_PEAK_PICKING",On="AUTO_RANGES_DETECTION",xn="AUTO_ZONES_DETECTION",yn="DELETE_RANGE",kn="SET_SELECTED_OPTIONS_PANEL",Cn="SET_LOADING_FLAG",Sn="RESET_SELECTED_TOOL",Dn="SET_SPECTRUMS_VERTICAL_AlIGN",wn="CHANGE_INTEGRAL_DATA",Tn="SET_ACTIVE_TAB",Mn="CHANGE_INTEGRAL_SUM",An="ADD_BASE_LINE_ZONE",En="DELETE_BASE_LINE_ZONE",Pn="APPLY_BASE_LINE_CORRECTION_FILTER",Fn="SET_KEY_PREFERENCES",_n="APPLY_KEY_PREFERENCES",In="RESIZE_RANGE",Nn="CHANGE_RANGE_SUM",Rn="ADD_RANGE",Ln="SET_2D_LEVEL",zn="ADD_2D_ZONE",Hn="DELETE_2D_ZONE",Bn="ADD_MISSING_PROJECTION",Vn="SET_FILTER_SNAPSHOT",Xn="CHANGE_RANGE_RELATIVE",Yn="CHANGE_RANGE_SIGNAL_VALUE",Zn="CHANGE_RANGE_SIGNAL_KIND",Un="SAVE_EDITED_RANGE",Kn="UNLINK_RANGE",Wn="SET_DIAID_RANGE",Gn="CHANGE_INTEGRAL_RELATIVE",qn="ANALYZE_SPECTRA",Jn="DELETE_ANALYZE_SPECTRA_RANGE",$n="RESIZE_ANALYZE_SPECTRA_RANGE",Qn="SET_ANALYZE_SPECTRA_COLUMNS",ea="FILTER_SPECTRA_COLUMN",ta="ALIGN_SPECTRA",na="CHANGE_ZONE_SIGNAL_VALUE",aa="CHANGE_ZONE_SIGNAL_KIND",ia="UNLINK_ZONE",ra="SET_DIAID_ZONE",oa="PREDICT_SPECTRA",ca="SET_SPECTRA_SAME_TOP",la="RESET_SPECTRA_SCALE",sa="SET_MOUSE_OVER_DISPLAYER",ua="APPLY_MULTIPLE_SPECTRA_FILTER",da="ADD_EXCLUSION_ZONE",ba="DELETE_EXCLUSION_ZONE",pa="absolute",fa="Absolute";function apply(e){if(!isApplicable(e))throw new Error("absolute not applicable on this data");e.data.re=Object(He.c)(e.data),e.data.im=new Float64Array(0),e.info=Object(v.a)(Object(v.a)({},e.info),{},{isComplex:!1})}function isApplicable(e){return!(!e.info.isComplex||e.info.isFid)}function reduce(){return{once:!1,reduce:null}}var ha="autoPhaseCorrection",ma="Automatic phase correction",ga={magnitudeMode:!1,minRegSize:30,maxDistanceToJoin:256};function autoPhaseCorrection_apply(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!autoPhaseCorrection_isApplicable(e))throw new Error("phaseCorrection not applicable on this data");return t=Object.assign({},ga,t),Object(He.d)(e.data,t)}function autoPhaseCorrection_isApplicable(e){return!(!e.info.isComplex||e.info.isFid)}function autoPhaseCorrection_reduce(e,t){var n=Object.assign({},e);for(var a in n)n[a]+=t[a];return{once:!0,reduce:n}}var ja=n(767),va=n(428),Oa=n(598),xa=n(429),ya="baselineCorrection",ka="Baseline correction",Ca={airpls:"airPLS",polynomial:"Polynomial"};function baselineCorrection_apply(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!baselineCorrection_isApplicable(e))throw new Error("baselineCorrection not applicable on this data");var n,a=t.algorithm,i=t.zones,r=e.data,o=r.x,c=r.re;switch(a){case"airpls":n=Object(ja.a)(o,c,t).corrected;break;case"polynomial":var l=Object(va.a)({x:o,y:c},{numberOfPoints:4096,zones:i});if(0===i.length){var s=Object(Oa.a)(l.x,l.y,t),u=s.regression;n=new Float64Array(o.length);for(var d=0;d<c.length;d++)n[d]=c[d]-u.predict(o[d])}else{var b=new xa.a(o,c,t.degree);n=new Float64Array(o.length);for(var p=0;p<c.length;p++)n[p]=c[p]-b.predict(o[p])}break;default:throw new Error("baselineCorrection: algorithm unknown: ".concat(a))}Object.assign(e.data,{re:n})}function baselineCorrection_isApplicable(e){return!e.info.isFid}function baselineCorrection_reduce(){return{once:!1,reduce:null}}var Sa=n(383),Da="centerMean",wa="Center Mean";function centerMean_apply(e){var t;if(!centerMean_isApplicable(e))throw new Error("Center Mean is not applicable on this data");for(var n=e.data.re.slice(0),a=null===(t=e.data.im)||void 0===t?void 0:t.slice(0),i=Object(Sa.mean)(n),r=Object(Sa.mean)(a||[]),o=0;o<n.length;o++)n[o]-=i,a&&(a[o]-=r);e.data.re=n,a&&(e.data.im=a)}function centerMean_isApplicable(e){return!(!e.info.isComplex||e.info.isFid)}function centerMean_reduce(){return{once:!1,reduce:null}}var Ta="digitalFilter",Ma="Digital Filter";function digitalFilter_apply(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!digitalFilter_isApplicable(e))throw new Error("Digital Filter is not applicable on this data");var n=t.digitalFilterValue,a=void 0===n?0:n,i=new Float64Array(e.data.re),r=new Float64Array(e.data.im),o=Math.floor(a),c=0;o+=0;var l=new Float64Array(i.length),s=new Float64Array(r.length);l.set(i.slice(o)),l.set(i.slice(c,o),i.length-o),s.set(r.slice(o)),s.set(r.slice(c,o),r.length-o),e.data.re=l,e.data.im=s}function digitalFilter_isApplicable(e){return!(!e.info.isComplex||!e.info.isFid)}function digitalFilter_reduce(){return{once:!0,reduce:void 0}}var Aa="equallySpaced",Ea="Equally Spaced";function equallySpaced_apply(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!equallySpaced_isApplicable(e))throw new Error("Equally Spaced is not applicable on this data");var n=t.from,a=t.to,i=t.numberOfPoints,r=t.exclusions,o=e.data,c=o.x,l=o.re,s=o.im,u=Object(va.a)({x:c,y:l},{from:n,to:a,numberOfPoints:i,exclusions:r});if(e.data.x=u.x,e.data.re=u.y,s){var d=Object(va.a)({x:c,y:l},{from:n,to:a,numberOfPoints:i,exclusions:r});e.data.im=d.y}}function equallySpaced_isApplicable(e){return!(!e.info.isComplex||e.info.isFid)}function equallySpaced_reduce(){return{once:!1,reduce:null}}var Pa="fft",Fa="FFT";function fft_apply(e){if(!fft_isApplicable(e))throw new Error("fft not applicable on this data");var t=e.filters.some((function(e){return"digitalFilter"===e.name&&e.flag}));if(Object.assign(e.data,Object(He.e)(e.data,{applyZeroShift:!0})),t){var n=e.info.digitalFilter,a=(n-Math.floor(n))*Math.PI*2;Object.assign(e.data,Object(He.f)(e.data,0,a))}e.data.x=function generateXAxis(e){for(var t=e.info,n=parseFloat(t.baseFrequency),a=parseFloat(t.frequencyOffset),i=parseFloat(t.spectralWidth),r=a/n,o=.5*i,c=e.data.x.length,l=r-o,s=i/(c-1),u=new Array(c),d=0;d<c;d++)u[d]=l,l+=s;return u}(e),e.info=Object(v.a)(Object(v.a)({},e.info),{},{isFid:!1})}function fft_isApplicable(e){return!(!e.info.isComplex||!e.info.isFid)}function fft_reduce(){return{once:!0,reduce:void 0}}var _a="fromTo",Ia="From/To";function fromTo_apply(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!fromTo_isApplicable(e))throw new Error("From/To filter not applicable on this data");var n=e.data,a=n.x,i=n.re,r=n.im,o=t.from,c=t.to,l=Object(He.j)(a,{from:o,to:c}),s=l.fromIndex,u=l.toIndex;e.data.x=a.slice(s,u),e.data.re=i.slice(s,u),r&&(e.data.im=r.slice(s,u))}function fromTo_isApplicable(e){return!(!e.info.isComplex||e.info.isFid)}function fromTo_reduce(e,t){return{once:!0,reduce:t}}var Na="lineBroadening",Ra="Line broadening";function lineBroadening_apply(e,t){if(!lineBroadening_isApplicable(e))throw new Error("lineBroadening not applicable on this data");var n,a=e.info.digitalFilter;n=a>0?Math.floor(a):0;for(var i=e.data.re,r=e.data.im,o=e.data.x,c=i.length,l=new Float64Array(c),s=new Float64Array(c),u=(o[c-1]-o[0])/(c-1),d=-t*Math.exp(1),b=Math.exp(d*u),p=Math.exp(d*o[0]),f=0;f<c-n;f++)l[f]=i[f]*p,s[f]=r[f]*p,p*=b;p=Math.exp(d*o[0]);for(var h=c;h>c-n;h--)l[h]=i[h]*p,s[h]=r[h]*p,p*=b;e.data=Object(v.a)(Object(v.a)({},e.data),{re:l,im:s})}function lineBroadening_isApplicable(e){return!(!e.info.isComplex||!e.info.isFid)}function lineBroadening_reduce(e,t){return{once:!0,reduce:e+t}}var La="pareto",za="Pareto";function pareto_apply(e){var t;if(!pareto_isApplicable(e))throw new Error("Pareto is not applicable on this data");var n=e.data.re.slice(0),a=null===(t=e.data.im)||void 0===t?void 0:t.slice(0);e.data.re=Object(He.m)(n),a&&(e.data.im=Object(He.m)(a))}function pareto_isApplicable(e){return!(!e.info.isComplex||e.info.isFid)}function pareto_reduce(){return{once:!1,reduce:null}}var Ha="phaseCorrection",Ba="Phase correction";function phaseCorrection_apply(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!phaseCorrection_isApplicable(e))throw new Error("phaseCorrection not applicable on this data");var n=t.ph0,a=t.ph1;n*=Math.PI/180,a*=Math.PI/180,Object.assign(e.data,Object(He.f)(e.data,n,a))}function phaseCorrection_isApplicable(e){return!(!e.info.isComplex||e.info.isFid)}function phaseCorrection_reduce(e,t){var n=Object.assign({},e);for(var a in n)n[a]+=t[a];return{once:!0,reduce:n}}var Va="shiftX",Xa="Shift X";function shiftX_apply(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;e.data.x=e.data.x.map((function(e){return e+t}))}function shiftX_isApplicable(){return!0}function shiftX_reduce(e,t){return{once:!0,reduce:e+t}}var Ya="standardDeviation",Za="Standard Deviation";function standardDeviation_apply(e){var t;if(!standardDeviation_isApplicable(e))throw new Error("Standard Deviation is not applicable on this data");for(var n=e.data.re.slice(0),a=null===(t=e.data.im)||void 0===t?void 0:t.slice(0),i=Object(Sa.standardDeviation)(n),r=Object(Sa.standardDeviation)(a||[]),o=0;o<n.length;o++)n[o]/=i,a&&(a[o]/=r);e.data.re=n,a&&(e.data.im=a)}function standardDeviation_isApplicable(e){return!(!e.info.isComplex||e.info.isFid)}function standardDeviation_reduce(){return{once:!1,reduce:null}}var Ua="zeroFilling",Ka="Zero Filling";function zeroFilling_apply(e,t){if(!zeroFilling_isApplicable(e))throw new Error("zeroFilling not applicable on this data");var n,a=e.filters.some((function(e){return"digitalFilter"===e.name&&e.flag})),i=e.info.digitalFilter;n=i>0&&a?Math.floor(i):0;var r=e.data,o=r.re,c=r.im,l=r.x,s=new Float64Array(t),u=new Float64Array(t),d=new Float64Array(t),b=Math.min(t,o.length);s.set(o.slice(0,b-n)),u.set(c.slice(0,b-n)),d.set(l.slice(0,b-n));for(var p=l[1]-l[0],f=l[b-n-1],h=b-n;h<t;h++)f+=p,d[h]=f;n>0&&n<t&&(s.set(o.slice(o.length-n),t-n),u.set(c.slice(o.length-n),t-n)),e.data=Object(v.a)(Object(v.a)({},e.data),{re:s,im:u,x:d})}function zeroFilling_isApplicable(e){return!(!e.info.isComplex||!e.info.isFid)}function zeroFilling_reduce(e,t){return{once:!0,reduce:t}}var Wa="shift2DX",Ga="Shift 2D X";function filter2d_shiftX_apply(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;e.data.minX+=t,e.data.maxX+=t}function filter2d_shiftX_isApplicable(){return!0}function filter2d_shiftX_reduce(e,t){return{once:!0,reduce:e+t}}var qa="shift2DY",Ja="Shift 2D Y";function shiftY_apply(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;e.data.minY+=t,e.data.maxY+=t}function shiftY_isApplicable(){return!0}function shiftY_reduce(e,t){return{once:!0,reduce:e+t}}var $a={absolute:a,baselineCorrection:r,lineBroadening:d,fft:s,phaseCorrection:p,autoPhaseCorrection:i,shiftX:f,zeroFilling:m,digitalFilter:c,fromTo:u,equallySpaced:l,standardDeviation:h,centerMean:o,pareto:b,shift2DX:g,shift2DY:j},Qa={zoom:{id:"zoom",label:"Zoom",hasOptionPanel:!1,isFilter:!1},peakPicking:{id:"peakPicking",label:"Peaks Picking",hasOptionPanel:!0,isFilter:!1},integral:{id:"integral",label:"integral Tool",hasOptionPanel:!1,isFilter:!1},zone2D:{id:"zone2D",label:"Zone Tool",hasOptionPanel:!0,isFilter:!1},slicingTool:{id:"slicingTool",label:"Slicing Tool",hasOptionPanel:!1,isFilter:!1},HMove:{id:"HMove",label:"Move spectrum horizontally",hasOptionPanel:!1,isFilter:!1},equalizerTool:{id:"equalizerTool",label:"Equalizer Tool",hasOptionPanel:!1,isFilter:!1},rangesPicking:{id:"rangesPicking",label:"Ranges Picking ( Press r )",hasOptionPanel:!0,isFilter:!1},zeroFilling:{id:$a.zeroFilling.id,label:$a.zeroFilling.name,hasOptionPanel:!0,isFilter:!0},phaseCorrection:{id:$a.phaseCorrection.id,label:"".concat($a.phaseCorrection.name," ( Press a )"),hasOptionPanel:!0,isFilter:!0},baseLineCorrection:{id:"baseLineCorrection",label:"baseline correction ( Press b )",hasOptionPanel:!0,isFilter:!0},generalSelector:{id:"generalSelector",label:"range general selecttor",hasOptionPanel:!1,isFilter:!1},editRange:{id:"editRange",label:"edit range",hasOptionPanel:!1,isFilter:!1},multipleSpectraAnalysis:{id:"multipleSpectraAnalysis",label:"Multiple Spectra Analysis",hasOptionPanel:!1,isFilter:!1},exclusionZones:{id:"exclusionZones",label:"Exclusion Zones",hasOptionPanel:!1,isFilter:!1}},ei={transformOrigin:"top left",position:"absolute",top:"0px",left:"0px",zoom:"100%"},ti=[Qa.zoom.id,Qa.zeroFilling.id,Qa.peakPicking.id,Qa.integral.id,Qa.phaseCorrection.id,Qa.baseLineCorrection.id,Qa.rangesPicking.id,Qa.zone2D.id,Qa.slicingTool.id,Qa.editRange.id,Qa.multipleSpectraAnalysis.id,Qa.exclusionZones.id],ni=1,ai=2,ii=3;function BrushXY(e){var t=e.brushType,n=e.dimensionBorder,a=e.width,i=e.height,r=useChartData(),o=r.width,c=r.height,l=r.selectedTool,s=Object(S.useContext)(N),u=s.startX,d=s.endX,b=s.startY,p=s.endY,f=s.step;if(!ti.includes(l)||"brushing"!==f||!n||n.startX&&u<n.startX||n.startY&&b<n.startY||(n.endX&&1===Math.sign(d-u)?d>n.endX:d<n.startX)&&(n.endX&&1===Math.sign(p-b)?p>n.endY:p<n.startY))return null;o=a||o,c=i||c,d=n.endX&&d>n.endX?n.endX:n.startX&&d<n.startX?n.startX:d,p=n.endY&&p>n.endY?n.endY:n.startY&&p<n.startY?n.startY:p;var h=t===ni||t===ii?(d-u)/o:1;u=t===ni||t===ii?u:0;var m=t===ai||t===ii?(p-b)/c:1;return b=t===ai||t===ii?b:0,Object(I.jsx)("div",{style:Object(v.a)(Object(v.a)({},ei),{},{transform:"translate(".concat(u,"px, ").concat(b,"px) scale(").concat(h,",").concat(m,")"),willChange:"transform"}),children:Object(I.jsx)("svg",{width:o,height:c,children:Object(I.jsx)("rect",{x:"0",y:"0",width:o,height:c,fill:"gray",opacity:"0.2"})})})}BrushXY.defaultProps={brushType:ii,dimensionBorder:{startX:0,startY:0},width:null,height:null};var ri=BrushXY,oi={line:{stroke:"black",strokeOpacity:"1",shapeRendering:"crispEdges",strokeWidth:"1",willChange:"transform"}},ci=[Qa.zoom.id,Qa.equalizerTool.id,Qa.baseLineCorrection.id,Qa.zone2D.id,Qa.slicingTool.id,Qa.integral.id,Qa.rangesPicking.id,Qa.editRange.id,Qa.multipleSpectraAnalysis.id,Qa.exclusionZones.id];var li=function CrossLinePointer(){var e=useChartData(),t=e.height,n=e.width,a=e.margin,i=e.selectedTool,r=Object(S.useContext)(z),o=Object(S.useContext)(N);return!ci.includes(i)||"brushing"===o.step||!r||r.x>n-a.right||r.y>t-a.bottom||!n||!t?null:Object(I.jsx)("div",{style:{willChange:"transform",cursor:"crosshair",transform:"translate(".concat(-n+r.x,"px, ").concat(-t+r.y,"px)"),position:"absolute",top:0,left:0,pointerEvents:"none",overflow:"visible",width:2*n,height:2*t},children:Object(I.jsxs)("svg",{width:2*n,height:2*t,children:[Object(I.jsx)("line",{style:oi.line,x1:n,y1:"0",x2:n,y2:2*t},"vertical_line"),Object(I.jsx)("line",{style:oi.line,x1:"0",y1:t,x2:2*n,y2:t},"horizontal_line")]})},"crossLine")},si=n(599),ui=new(n.n(si).a),di={on:function on(e,t){return ui.on(e,t)},once:function once(e,t){return ui.once(e,t)},off:function off(e,t){return ui.off(e,t)},emit:function emit(e,t){return ui.emit(e,t)}};Object.freeze(di);var bi=di;function DeleteButton(e){var t=e.x,n=e.y,a=e.onDelete,i=e.fill;return Object(I.jsxs)("svg",{className:"delete-button",x:t,y:n,onClick:a,"data-no-export":"true",children:[Object(I.jsx)("rect",{rx:"5",width:"16",height:"16",fill:i}),Object(I.jsx)("line",{x1:"5",x2:"10",y1:"8",y2:"8",stroke:"white",strokeWidth:"2"})]})}DeleteButton.defaultProps={onDelete:function onDelete(){return null},fill:"#c81121",x:"initial",y:"initial"};var pi,fi=DeleteButton,hi=Object(y.a)(pi||(pi=Object(x.a)(["\n  pointer-events: bounding-box;\n  user-select: 'none';\n  -webkit-user-select: none; /* Chrome all / Safari all */\n  -moz-user-select: none; /* Firefox all */\n\n  .zone-area {\n    height: 100%;\n    fill: #b8b8b857;\n    cursor: pointer;\n  }\n  .delete-button {\n    display: none;\n    cursor: pointer;\n  }\n  :hover .delete-button {\n    display: block;\n  }\n"])));var mi=function BaseLineZones(){var e=useChartData().baseLineZones,t=useScale().scaleX,n=useDispatch(),a=Object(S.useCallback)((function(e){n({type:En,id:e})}),[n]);return e&&Array.isArray(e)&&e.length>0&&Object(ye.b)("g",{children:e.map((function(e){return Object(ye.c)("g",{transform:"translate(".concat(t()(e.to),",0)"),css:hi,children:[Object(ye.b)(fi,{x:-20,y:10,onDelete:function onDelete(){return a(e.id)}}),Object(ye.b)("rect",{x:"0",width:"".concat(t()(e.from)-t()(e.to)),className:"zone-area"})]},e.id)}))})},gi=n(189);var ji,vi=function ExclusionZonesWrapper(e){var t=function Wrapper(t){var n=useChartData(),a=n.exclusionZones,i=n.activeTab;return Object(I.jsx)(e,Object(v.a)(Object(v.a)({},t),{},{exclusionZones:a[i]?a[i]:null}))};return function(e){return Object(I.jsx)(t,Object(v.a)({},e))}},Oi=Object(y.a)(ji||(ji=Object(x.a)(["\n  pointer-events: bounding-box;\n  user-select: 'none';\n  -webkit-user-select: none; /* Chrome all / Safari all */\n  -moz-user-select: none; /* Firefox all */\n\n  .zone-area {\n    height: 100%;\n    fill: #dddddd;\n    cursor: pointer;\n  }\n  .zone-area.active {\n    fill: #ff6f0057;\n  }\n"]))),xi=function ExclusionZone(e){var t=e.zone,n=useScale().scaleX,a=Object(gi.c)([t.id],gi.b.EXCLUSION_ZONE);return Object(ye.b)("g",Object(v.a)(Object(v.a)({transform:"translate(".concat(n()(t.to),",0)"),css:Oi},a.onHover),{},{children:Object(ye.b)("rect",{x:"0",width:"".concat(n()(t.from)-n()(t.to)),className:"zone-area ".concat(a.isActive&&"active")})}),t.id)};var yi=vi((function ExclusionZones(e){var t=e.exclusionZones;return t?Object(ye.b)("g",{className:"exclusionZones",children:t.map((function(e){return Object(ye.b)(xi,{zone:e},e.id)}))}):null})),ki={showAbsolute:!1,absoluteFormat:"0.00",showRelative:!0,relativeFormat:"0.00",color:"#000000",strokeWidth:1},Ci={showFrom:!1,fromFormat:"0.00",showTo:!1,toFormat:"0.00",showAbsolute:!1,absoluteFormat:"0.00",showRelative:!0,relativeFormat:"0.00"},Si={showPeakNumber:!0,peakNumberFormat:"0",showPeakIndex:!1,peakIndexFormat:"0.00",showDeltaPPM:!0,deltaPPMFormat:"0.00",showDeltaHz:!1,deltaHzFormat:"0.00",showPeakWidth:!1,peakWidthFormat:"00.0000",showIntensity:!0,intensityFormat:"0.00"},Di=n(366),wi=n.n(Di);var Ti,Mi,Ai=function Resizable(e){var t=e.from,n=e.to,a=e.onDrag,i=void 0===a?function(){return null}:a,r=e.onDrop,o=useChartData(),c=o.height,l=o.margin,s=o.mode,u=Object(S.useState)(!1),d=Object(O.a)(u,2),b=d[0],p=d[1],f=Object(S.useState)(!1),h=Object(O.a)(f,2),m=h[0],g=h[1],j=Object(S.useState)(!0),v=Object(O.a)(j,2),x=v[0],y=v[1],k=Object(S.useRef)(null),C=Object(S.useRef)(null),D=useScale().scaleX,w=Object(S.useCallback)((function(e){e.preventDefault(),e.stopPropagation(),p(!0)}),[]),T=Object(S.useCallback)((function(e){i({from:D().invert(e.layerX)})}),[i,D]),M=Object(S.useCallback)((function(e){e.preventDefault(),e.stopPropagation(),p(!1);var a="RTL"===s?[D().invert(e.layerX),n]:[n,D().invert(e.layerX)];r(a[1]>a[0]?{from:a[0],to:a[1]}:{from:t,to:n})}),[t,s,r,D,n]),A=Object(S.useCallback)((function(e){e.preventDefault(),e.stopPropagation(),g(!0)}),[]),E=Object(S.useCallback)((function(e){i({to:D().invert(e.layerX)})}),[i,D]),P=Object(S.useCallback)((function(e){e.preventDefault(),e.stopPropagation(),g(!1);var a="RTL"===s?[t,D().invert(e.layerX)]:[D().invert(e.layerX),t];r(a[1]>a[0]?{from:a[0],to:a[1]}:{from:t,to:n})}),[t,s,r,D,n]),F=Object(S.useCallback)((function(e){e.shiftKey&&y(!1)}),[]),_=Object(S.useCallback)((function(){y(!0)}),[]),I=Object(S.useCallback)((function(e){var t=e.target,n=e.shiftKey;t.style.cursor=n?"crosshair":"ew-resize"}),[]);return Object(ye.c)(S.Fragment,{children:[Object(ye.b)(wi.a,{axis:"x",defaultPosition:{x:D()(t),y:0},position:{x:D()(t),y:0},scale:1,handle:".handle",onStart:w,onDrag:T,onStop:M,nodeRef:k,children:Object(ye.b)("rect",{ref:k,className:x?"handle":"",width:b?1:6,fill:"red",height:c+l.top,style:{fillOpacity:b?1:0},onMouseDownCapture:F,onMouseUpCapture:_,onMouseEnter:I})}),Object(ye.b)(wi.a,{axis:"x",defaultPosition:{x:D()(n),y:0},position:{x:D()(n),y:0},handle:".handle",scale:1,onStart:A,onDrag:E,onStop:P,nodeRef:C,children:Object(ye.b)("rect",{ref:C,className:x?"handle":"",width:m?1:6,fill:"red",height:c+l.top,style:{fillOpacity:m?1:0},onMouseDownCapture:F,onMouseUpCapture:_,onMouseEnter:I})})]})},Ei=Object(y.a)(Ti||(Ti=Object(x.a)(["\n  pointer-events: bounding-box;\n  @-moz-document url-prefix() {\n    pointer-events: fill;\n  }\n  // // disabled because Resizable component appears now when hovering over it\n  // :hover .target {\n  //   visibility: visible !important;\n  //   cursor: pointer;\n  // }\n  .highlight {\n    fill: transparent;\n  }\n  .target {\n    visibility: hidden;\n  }\n"]))),Pi=Object(y.a)(Mi||(Mi=Object(x.a)(["\n  pointer-events: bounding-box;\n\n  @-moz-document url-prefix() {\n    pointer-events: fill;\n  }\n  fill: #ff6f0057;\n\n  .target {\n    visibility: visible;\n  }\n"])));var Fi=function IntegralResizable(e){var t=e.integralData,n=useChartData(),a=n.height,i=n.margin,r=useScale().scaleX,o=Object(S.useState)(t),c=Object(O.a)(o,2),l=c[0],s=l.id,u=l.integral,d=l.from,b=l.to,p=c[1],f=Object(gi.c)([s],gi.b.INTEGRAL),h=useDispatch(),m=Object(S.useCallback)((function(e){h({type:an,data:Object(v.a)(Object(v.a)({},t),e)})}),[h,t]),g=Object(S.useCallback)((function(){f.show()}),[f]),j=Object(S.useCallback)((function(){f.hide()}),[f]),x=Object(S.useCallback)((function(e){p((function(t){return Object(v.a)(Object(v.a)({},t),e)}))}),[]),y=d?r()(d):0,k=b?r()(b):0;return Object(ye.b)(S.Fragment,{children:Object(ye.c)("g",{css:f.isActive?Pi:Ei,onMouseEnter:g,onMouseLeave:j,children:[Object(ye.b)("rect",{"data-no-export":"true",x:"".concat(k),y:"0",width:"".concat(y-k),height:a-i.bottom,className:"highlight"}),Object(ye.b)("text",{x:k,y:a-i.bottom+30,fill:"black",style:{fontSize:"12px",fontWeight:"bold"},children:void 0!==u?u.toFixed(2):""}),Object(ye.b)(Ai,{from:t.from,to:t.to,onDrag:x,onDrop:m,"data-no-export":"true"})]})})};var _i=function Integral(e){var t=e.integralData,n=e.x,a=e.y,i=e.xDomain,r=e.isActive,o=e.spectrumID,c=e.scaleY,l=e.scaleX,s=t.from,u=t.to,d=usePreferences(),b=Object(S.useMemo)((function(){var e=st(d,"formatting.panels.integrals")||{},t=e.color,n=void 0===t?ki.color:t,a=e.strokeWidth;return{color:n,strokeWidth:void 0===a?ki.strokeWidth:a}}),[d]),p=Object(S.useMemo)((function(){return Object(He.o)({x:n,y:a},{from:s,to:u,reverse:!0})}),[s,u,n,a]),f=Object(S.useCallback)((function(){if(p&&c){var e=Object(He.s)(p,{from:i[0],to:i[1],nbPoints:200,optimize:!0}),t="M ".concat(l()(e.x[0])," ").concat(c(e.y[0]));return t+=e.x.slice(1).reduce((function(t,n,a){return t+=" L ".concat(l()(n)," ").concat(c(e.y[a+1]))}),"")}return""}),[p,l,c,i]);return Object(I.jsxs)(S.Fragment,{children:[Object(I.jsx)("path",{className:"line",stroke:b.color,strokeWidth:b.strokeWidth,fill:"none",style:{transformOrigin:"center top",opacity:r?1:.2},d:f()}),Object(I.jsx)(Fi,{spectrumID:o,integralData:t,scaleY:c})]})};var Ii=function IntegralsSeries(){var e=useChartData(),t=e.xDomain,n=e.activeSpectrum,a=e.data,i=e.height,r=e.margin,o=e.verticalAlign,c=e.integralsYDomains,l=e.displayerKey,s=useScale().scaleX,u=Object(S.useMemo)((function(){return n&&c[n.id]?function getIntegralYScale(e,t){var n=e.height,a=e.margin,i=e.verticalAlign,r=e.integralsYDomains,o=i.flag&&!i.stacked?n/2:n;return Object(nt.f)(r[t],[o-(a.bottom+.3*o),a.top])}({height:i,margin:r,verticalAlign:o,integralsYDomains:c},n.id):null}),[n,i,c,r,o]),d=Object(S.useMemo)((function(){var e=function IsActive(e){return null===n||e===n.id};return a&&a[0]&&a.filter((function(e){return!0===e.display.isVisible&&!0===e.display.isVisibleInDomain})).map((function(n){return n.integrals&&n.integrals.values&&n.integrals.values.map((function(a){return Object(I.jsx)(_i,{spectrumID:n.id,integralData:a,x:n.data.x,y:n.data.y,isActive:e(n.id),xDomain:t,scaleY:u,scaleX:s},a.id)}))}))}),[n,a,s,u,t]);return Object(I.jsx)("g",{clipPath:"url(#".concat(l,"clip-chart-1d)"),children:d})};var Ni=function Line(e){var t=e.data,n=e.id,a=e.display,i=e.index,r=useChartData(),o=r.xDomain,c=r.activeSpectrum,l=r.verticalAlign,s=usePreferences(),u=useScale(),d=u.scaleX,b=u.scaleY,p=Object(S.useMemo)((function(){return null===c||n===c.id}),[c,n]),f=Object(S.useMemo)((function(){return l.flag&&l.stacked?i*l.value:0}),[i,l.flag,l.stacked,l.value]),h=Object(S.useMemo)((function(){var e=d(),a=b(n);if((null===t||void 0===t?void 0:t.x)&&(null===t||void 0===t?void 0:t.y)&&e(0)){var i=Object(He.s)({x:t.x,y:t.y},{from:o[0],to:o[1]}),r="M ".concat(e(i.x[0])," ").concat(a(i.y[0])," ");return r+=i.x.slice(1).reduce((function(t,n,r){return t+=" L ".concat(e(n)," ").concat(a(i.y[r+1]))}),"")}return""}),[n,d,b,t,o]);return Object(I.jsx)("path",{className:"line",stroke:a.color,fill:"none",style:{opacity:p?1:C()(s,"controllers.dimmedSpectraTransparency",.1)},d:h,transform:"translate(0,-".concat(f,")")},n)};var Ri=function LinesSeries(){var e=useChartData(),t=e.data,n=e.tempData,a=e.displayerKey,i=n||t;return Object(I.jsx)("g",{clipPath:"url(#".concat(a,"clip-chart-1d)"),children:i&&i.filter((function(e){return!0===e.display.isVisible&&!0===e.display.isVisibleInDomain})).map((function(e,t){return Object(I.jsx)(Ni,Object(v.a)(Object(v.a)({},e),{},{index:t}),e.id)}))})},Li=n(186),zi=n(600),Hi=n.n(zi);function useFormatNumberByNucleus(e){var t=usePreferences(),n=C()(t,"formatting.nucleusByKey",{ppm:"0.0",hz:"0.0"}),a=function formatFun(e){return function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"ppm",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return i+Hi()(Number(t)).format(C()(n,"".concat(e.toLowerCase(),".").concat(a),"0.0"))+r}};if(e){if("string"===typeof e)return a(e);if(Array.isArray(e))return e.map((function(e){return a(e)}));throw Error("nuclus must be string or array of string")}}function getNumberOfDecimals(e){var t=(e=String(e).trim()).lastIndexOf(".");return t>0?e.substr(t).split("").length-1:0}var Bi,Vi=function FormatNumber(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return n+Hi()(e).format(t)+a},Xi=Object(y.a)(Bi||(Bi=Object(x.a)(["\n  text,\n  input {\n    -webkit-user-select: none; /* Safari 3.1+ */\n    -moz-user-select: none; /* Firefox 2+ */\n    -ms-user-select: none; /* IE 10+ */\n    user-select: none; /* Standard syntax */\n  }\n\n  input[type='number']::-webkit-outer-spin-button,\n  input[type='number']::-webkit-inner-spin-button {\n    -webkit-appearance: none;\n    margin: 0;\n  }\n\n  input[type='number'] {\n    -moz-appearance: textfield;\n  }\n\n  .notification-input {\n    width: calc(100% - 10px) !important;\n    user-select: 'none';\n    -webkit-user-select: none; /* Chrome all / Safari all */\n    -moz-user-select: none; /* Firefox all */\n  }\n\n  .notification-input-normal {\n    opacity: 1;\n    left: 4px;\n    position: absolute;\n    font-size: 10px;\n    outline: none;\n    user-select: 'none';\n    -webkit-user-select: none; /* Chrome all / Safari all */\n    -moz-user-select: none; /* Firefox all */\n    background-color: transparent;\n  }\n\n  .notification-input-normal input:focus {\n    outline: none;\n    background-color: white;\n  }\n\n  .input-over {\n    background-color: white;\n    outline: none;\n  }\n\n  .notification-label {\n    display: none;\n  }\n\n  .notification-group-over {\n    z-index: 9999999999;\n  }\n\n  .notification-group {\n    z-index: 1;\n  }\n\n  .notifcate-selected {\n    opacity: 0;\n  }\n\n  input[type='number']::-webkit-inner-spin-button,\n  input[type='number']::-webkit-outer-spin-button {\n    -webkit-appearance: none;\n    margin: 0;\n  }\n"])));var Yi=function PeakNotation(e){var t=e.id,n=e.x,a=e.y,i=e.sign,r=e.value,o=e.color,c=e.isActive,l=e.nucleus,s=Object(S.useRef)(),u=Object(S.useState)(!1),d=Object(O.a)(u,2),b=d[0],p=d[1],f=Object(S.useState)(r),h=Object(O.a)(f,2),m=h[0],g=h[1],j=Object(S.useState)({width:0,height:0}),v=Object(O.a)(j,2),x=v[0],y=v[1],k=useFormatNumberByNucleus(l),C=Object(gi.c)([t],gi.b.PEAK),D=useDispatch(),w=Object(S.useCallback)((function(e){return D({type:At,shiftValue:e.shiftValue})}),[D]);Object(S.useLayoutEffect)((function(){var e=s.current.getBBox();y({width:e.width,height:e.height})}),[b]),Object(S.useEffect)((function(){g(r)}),[r]);var T=Object(S.useCallback)((function(e){if("Enter"===e.key){var n=parseFloat(e.target.value),a=parseFloat(r),i=parseFloat(e.target.value)-parseFloat(r);w({id:t,value:n,oldValue:a,shiftValue:i}),e.target.blur(),p(!1)}else 27===e.keyCode&&(g(r),e.target.blur(),p(!1))}),[r,w,t]),M=Object(S.useCallback)((function(e){g(e.target.value)}),[]),A=Object(S.useCallback)((function(e){return e.preventDefault(),e.stopPropagation(),p(!0),!1}),[]),E=Object(S.useCallback)((function(){C.show()}),[C]),P=Object(S.useCallback)((function(){C.hide()}),[C]),F=Object(S.useMemo)((function(){return b?r:k(r)}),[k,b,r]),_=Object(S.useMemo)((function(){return b?m:k(m)}),[m,k,b]);return Object(ye.b)(S.Fragment,{children:Object(ye.c)("g",{css:Xi,id:t,style:{outline:"none"},transform:"translate(".concat(n,", ").concat(a,")"),onMouseEnter:E,onMouseLeave:P,children:[Object(ye.b)("line",{x1:"0",x2:"0",y1:-1===i?10:0,y2:-1===i?28:-18,stroke:o,strokeWidth:C.isActive?"7px":"1px"}),Object(ye.b)("text",{ref:s,className:"peaks-text",x:"0",y:-1===i?28:-12,dy:"0",dx:"0.35em",fill:"transparent",fontSize:"10px",fontWeight:"100",style:{position:"absolute"},children:F}),Object(ye.b)("foreignObject",{x:"0",y:-1===i?16:-22,dy:"0.1em",dx:"0.35em",width:x.width+20,height:"40px","data-no-export":"true",children:Object(ye.b)("div",{style:{width:x.width+20,height:"100%",paddingRight:5},xmlns:"http://www.w3.org/1999/xhtml",children:Object(ye.b)("input",{onClick:A,className:b?"notification-input input-over":"notification-input-normal",style:{width:"inherit",border:b?"1px solid ".concat(o):"0",opacity:c?1:.2,userSelect:"none",color:o},value:_,onKeyDown:T,onChange:M,type:"number",disabled:!c})})})]})})};var Zi,Ui,Ki=function PeaksNotations(){var e=useChartData(),t=e.data,n=e.activeSpectrum,a=e.verticalAlign,i=e.displayerKey,r=useScale(),o=r.scaleX,c=r.scaleY,l=Object(S.useMemo)((function(){var e=function getVerticalAlign(e){var n=t.findIndex((function(t){return t.id===e}));return a.flag&&a.stacked?(n+1)*a.value:0};return t&&function reSortData(){var e=Object(Li.a)(t);return n?e.sort((function(e,t){return e.id===n.id?1:t.id===n.id?-1:0})):e}().filter((function(e){return!0===e.display.isVisible&&!0===e.display.isVisibleInDomain})).map((function(t){return t.peaks&&t.peaks.values&&t.display.isPeaksMarkersVisible&&Object(I.jsx)("g",{transform:"translate(0,-".concat(e(t.id),")"),children:t.peaks.values.map((function(e){var a=e.delta,i=e.intensity,r=e.id;return Object(I.jsx)(Yi,{x:o()(a),y:c(t.id)(i)-5,sign:Math.sign(i),id:r,spectrumID:t.id,value:a,color:"#730000",nucleus:t.info.nucleus,isActive:null!=n&&n.id===t.id},r)}))},t.id)}))}),[t,a.flag,a.stacked,a.value,n,o,c]);return Object(I.jsx)("g",{className:"peaks",clipPath:"url(#".concat(i,"clip-chart-1d)"),children:l})},Wi=n(2),Gi=n.n(Wi),qi=Object(y.a)(Zi||(Zi=Object(x.a)(["\n  user-select: none;\n\n  path,\n  line {\n    fill: none;\n    stroke: black;\n    stroke-width: 1;\n    shape-rendering: crispEdges;\n    user-select: none;\n  }\n"]))),Ji=Object(y.a)(Ui||(Ui=Object(x.a)(["\n  user-select: none;\n\n  line {\n    stroke: rgb(104, 104, 104);\n    stroke-opacity: 0.2;\n    shape-rendering: crispEdges;\n    stroke-dasharray: 3;\n    stroke-width: 1;\n    user-select: none;\n  }\n\n  path {\n    stroke-width: 0;\n  }\n"])));function XAxis(e){var t=e.label,n=e.show,a=e.showGrid,i=e.mode,r=useChartData(),o=r.xDomain,c=r.height,l=r.width,s=r.margin,u=useScale().scaleX,d=Object(S.useRef)(),b=Object(S.useRef)();t=t||("RTL"===i?"\u03b4 [ppm]":"time [s]"),Object(S.useEffect)((function(){var e=nt.a().ticks(8).tickFormat(nt.d("0")),t=nt.a().ticks(50).tickSize(-(c-s.top-s.bottom)).tickFormat("");n&&u&&(nt.g(d.current).call(e.scale(u().domain(o))),nt.g(b.current).call(t.scale(u().domain(o))))}),[c,s.bottom,s.top,u,n,o]);var p=Object(S.useMemo)((function(){return n&&!0===n&&Object(ye.b)("g",{className:"x",css:qi,transform:"translate(0,".concat(c-s.bottom,")"),ref:d,children:Object(ye.b)("text",{fill:"#000",x:l-10,y:"30",dy:"0.70em",textAnchor:"end",children:t})})}),[c,t,s.bottom,n,l]),f=Object(S.useMemo)((function(){return a&&!0===a&&Object(ye.b)("g",{css:Ji,className:"grid",ref:b,transform:"translate(0,".concat(c-s.bottom,")")})}),[a,c,s.bottom]);return l&&c&&u?Object(ye.c)(ye.a,{children:[p,f]}):null}XAxis.propTypes={showGrid:Gi.a.bool,show:Gi.a.bool,label:Gi.a.string},XAxis.defaultProps={showGrid:!1,show:!0,label:""};var $i=XAxis;var Qi,er,tr=function MultiAnalysisWrapper(e){var t=function Wrapper(t){var n=useChartData(),a=n.activeTab,i=n.spectraAnalysis,r=n.displayerKey,o=t.forwardedRef,c=Object(fe.a)(t,["forwardedRef"]);return Object(I.jsx)(e,Object(v.a)(Object(v.a)({},c),{},{activeTab:a,spectraAnalysis:i,displayerKey:r,ref:o}))};return Object(S.forwardRef)((function(e,n){return Object(I.jsx)(t,Object(v.a)(Object(v.a)({},e),{},{forwardedRef:n}))}))},nr=Object(y.a)(Qi||(Qi=Object(x.a)(["\n  pointer-events: bounding-box;\n  @-moz-document url-prefix() {\n    pointer-events: fill;\n  }\n  user-select: 'none';\n  -webkit-user-select: none; /* Chrome all / Safari all */\n  -moz-user-select: none; /* Firefox all */\n\n  .delete-button {\n    visibility: hidden;\n  }\n"]))),ar=Object(y.a)(er||(er=Object(x.a)(["\n  pointer-events: bounding-box;\n\n  @-moz-document url-prefix() {\n    pointer-events: fill;\n  }\n  .range-area {\n    height: 100%;\n    fill: #ff6f0057;\n  }\n  .delete-button {\n    visibility: visible;\n    cursor: pointer;\n  }\n"])));var ir=function AnalysisRange(e){var t=e.rangeData,n=e.columnKey,a=t.from,i=t.to,r=Object(gi.c)([n]),o=useScale().scaleX,c=useDispatch(),l=Object(S.useCallback)((function(){c({type:Jn,colKey:n})}),[n,c]),s=Object(S.useCallback)((function(e){c({type:$n,payload:Object(v.a)(Object(v.a)(Object(v.a)({},t),e),{},{columnKey:n})})}),[n,c,t]);return Object(ye.c)("g",Object(v.a)(Object(v.a)({},r.onHover),{},{css:r.isActive?ar:nr,children:[Object(ye.c)("g",{transform:"translate(".concat(o()(i),",25)"),children:[Object(ye.b)("rect",{x:"0",width:o()(a)-o()(i),height:"6",className:"range-area",fill:"green"}),Object(ye.b)("text",{textAnchor:"middle",x:(o()(a)-o()(i))/2,y:"-5",fontSize:"12",fill:"red",fontWeight:"bolder",fillOpacity:r.isActive?1:.6,children:n})]}),Object(ye.b)(Ai,{from:t.from,to:t.to,onDrop:s}),Object(ye.b)(fi,{x:o()(i)-20,y:10,onDelete:l})]}))};function MultiAnalysisRanges(e){var t=e.activeTab,n=e.spectraAnalysis,a=e.displayerKey,i=Object(S.useMemo)((function(){return(n[t]||{options:{columns:{}}}).options.columns}),[t,n]),r=Object(S.useMemo)((function(){return Object.keys(i).map((function(e){return e}),[])}),[i]);return r&&0!==r.length?Object(I.jsx)("g",{clipPath:"url(#".concat(a,"clip-chart-1d)"),children:r.map((function(e){return Object(I.jsx)(ir,{columnKey:e,rangeData:i[e]},e)}))}):null}var rr=tr(Object(S.memo)(MultiAnalysisRanges));var or=function RangesWrapper(e){var t=function Wrapper(t){var n=useChartData(),a=n.data,i=n.activeSpectrum,r=n.xDomain,o=n.activeTab,c=n.molecules,l=n.tabActiveSpectrum,s=n.displayerKey,u=n.selectedTool,d=usePreferences(),b=Object(S.useMemo)((function(){return a&&i&&i.id?a.find((function(e){return e.id===i.id}))||{ranges:{},x:[],y:[],info:{}}:{}}),[i,a]),p=b.ranges,f=void 0===p?{}:p,h=b.x,m=void 0===h?[]:h,g=b.y,j=void 0===g?[]:g,O=b.info,x=void 0===O?{}:O,y=Object(S.useMemo)((function(){return l&&Object.keys(l).length>0?Object.keys(l):null}),[l]),k=t.forwardedRef,C=Object(fe.a)(t,["forwardedRef"]);return Object(I.jsx)(e,Object(v.a)(Object(v.a)({},C),{},{ranges:f,x:m,y:j,info:x,xDomain:r,preferences:d,activeTab:o,molecules:c,nucleus:y,displayerKey:s,selectedTool:u,ref:k}))};return Object(S.memo)(Object(S.forwardRef)((function(e,n){return Object(I.jsx)(t,Object(v.a)(Object(v.a)({},e),{},{forwardedRef:n}))})))},cr=[{key:"signal",label:"Signal",value:"signal"},{key:"reference",label:"Reference",value:"reference"},{key:"solvent",label:"Solvent",value:"solvent"},{key:"impurity",label:"Impurity",value:"impurity"},{key:"standard",label:"Standard",value:"standard"},{key:"p1",label:"P1",value:"p1"},{key:"p2",label:"P2",value:"p2"},{key:"p3",label:"P3",value:"p3"}],lr=["signal"],sr="signal",ur="mixed",dr=function getPubIntegral(e){return function getDiaIDs(e){return[].concat(e.diaID||[],e.signal?e.signal.map((function(e){return e.diaID||[]})).flat():[])}(e).length},br=function setPubIntegral(e){e.pubIntegral=dr(e),0===e.pubIntegral&&delete e.pubIntegral},pr=function resetDiaIDs(e){delete e.diaID,e.signal.forEach((function(e){delete e.diaID})),delete e.pubIntegral},fr=function unlink(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"both",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};switch(t){case"both":pr(e);break;case"range":delete e.diaID;break;case"signal":delete e.signal[n.signalIndex].diaID}return br(e),e},hr=function checkRangeKind(e){return e.kind===sr},mr=function unlinkInAssignmentData(e,t){var n=t.reduce((function(e,t){return e.push(t.id),t.signal&&(e=e.concat(t.signal.map((function(e){return e.id}),[]))),e}),[]);e.dispatch({type:"REMOVE_ALL",payload:{id:n,axis:"x"}})},gr=Object(S.createContext)();function assignmentReducer(e,t){switch(t.type){case"ADD":var n=Object(v.a)(Object(v.a)({},e),{},{assignment:Object(v.a)({},e.assignment)});return void 0===n.assignment[t.payload.id[0]]&&(n.assignment[t.payload.id[0]]={}),void 0===n.assignment[t.payload.id[0]][t.payload.axis]&&(n.assignment[t.payload.id[0]][t.payload.axis]=[]),n.assignment[t.payload.id[0]][t.payload.axis].includes(t.payload.id[1])||n.assignment[t.payload.id[0]][t.payload.axis].push(t.payload.id[1]),n;case"REMOVE":var a=Object(v.a)(Object(v.a)({},e),{},{assignment:Object(v.a)({},e.assignment)});return void 0!==a.assignment[t.payload.id[0]]&&void 0!==a.assignment[t.payload.id[0]][t.payload.axis]&&(a.assignment[t.payload.id[0]][t.payload.axis]=a.assignment[t.payload.id[0]][t.payload.axis].filter((function(e){return e!==t.payload.id[1]})),0===a.assignment[t.payload.id[0]][t.payload.axis].length&&delete a.assignment[t.payload.id[0]][t.payload.axis],0===Object.keys(a.assignment[t.payload.id[0]]).length&&delete a.assignment[t.payload.id[0]]),a;case"REMOVE_ALL":var i=Object(v.a)(Object(v.a)({},e),{},{assignment:Object(v.a)({},e.assignment)});return t.payload.id.forEach((function(e){void 0!==i.assignment[e]&&void 0!==i.assignment[e][t.payload.axis]&&(delete i.assignment[e][t.payload.axis],0===Object.keys(i.assignment[e]).length&&delete i.assignment[e])})),i;case"SET_IS_ACTIVE":return Object(v.a)(Object(v.a)({},e),{},{isActive:void 0!==t.payload.id&&void 0!==t.payload.axis,activeID:t.payload.id,activeAxis:t.payload.axis});case"SET_IS_ON_HOVER":return Object(v.a)(Object(v.a)({},e),{},{isOnHover:void 0!==t.payload.id,onHoverID:t.payload.id,onHoverAxis:t.payload.axis});case"DELETE_RECORD":var r=Object(v.a)(Object(v.a)({},e),{},{assignment:Object(v.a)({},e.assignment)});return delete r.assignment[t.payload.id],r.isActive&&r.activeID===t.payload.id&&(r.isActive=!1,r.activeID=void 0,r.activeAxis=void 0),r.isOnHover&&r.onHoverID===t.payload.id&&(r.isOnHover=!1,r.onHoverID=void 0,r.onHoverAxis=void 0),r;default:throw new Error("unknown action type: ".concat(t.type))}}var jr={assignment:{},isActive:!1,activeID:void 0,activeAxis:void 0,isOnHover:!1,onHoverID:void 0,onHoverAxis:void 0};function AssignmentProvider(e){var t=e.spectraData,n=Object(S.useReducer)(assignmentReducer,jr),a=Object(O.a)(n,2),i=a[0],r=a[1],o=Object(S.useMemo)((function(){return{assignment:i,dispatch:r}}),[i]);return Object(S.useEffect)((function(){t&&t.forEach((function(e){1===e.info.dimension?e.ranges.values.forEach((function(e){return function initAssignmentDataRanges(e,t){t.dispatch({type:"DELETE_RECORD",payload:{id:e.id}}),(e.diaID||[]).forEach((function(n){return t.dispatch({type:"ADD",payload:{id:[e.id,n],axis:"x"}})})),e.signal.forEach((function(e){return(e.diaID||[]).forEach((function(n){return t.dispatch({type:"ADD",payload:{id:[e.id,n],axis:"x"}})}))}))}(e,o)})):2===e.info.dimension&&e.zones.values.forEach((function(e){return function initAssignmentDataZones(e,t){t.dispatch({type:"DELETE_RECORD",payload:{id:e.id}}),(e.y.diaID||[]).forEach((function(n){return t.dispatch({type:"ADD",payload:{id:[e.id,n],axis:"y"}})})),(e.x.diaID||[]).forEach((function(n){return t.dispatch({type:"ADD",payload:{id:[e.id,n],axis:"x"}})})),e.signal.forEach((function(e){(e.x.diaID||[]).forEach((function(n){return t.dispatch({type:"ADD",payload:{id:[e.id,n],axis:"x"}})})),(e.y.diaID||[]).forEach((function(n){return t.dispatch({type:"ADD",payload:{id:[e.id,n],axis:"y"}})}))}))}(e,o)}))}))}),[t]),Object(I.jsx)(gr.Provider,{value:o,children:e.children})}function useAssignmentData(){return Object(S.useContext)(gr)}function useAssignment(e){var t=useAssignmentData();if("string"!==typeof e&&"number"!==typeof e||""===e)throw new Error("assignment key must be a non-empty string or number");var n=String(e),a=Object(S.useMemo)((function(){return t.assignment.isActive&&t.assignment.activeID===n}),[t.assignment.activeID,t.assignment.isActive,n]),i=Object(S.useMemo)((function(){return a?t.assignment.activeAxis:void 0}),[t.assignment.activeAxis,a]),r=Object(S.useMemo)((function(){return t.assignment.assignment[n]?t.assignment.assignment[n]:[]}),[t.assignment.assignment,n]),o=Object(S.useMemo)((function(){return t.assignment.isOnHover&&t.assignment.onHoverID===n}),[t.assignment.isOnHover,t.assignment.onHoverID,n]),c=Object(S.useMemo)((function(){return o?t.assignment.onHoverAxis:void 0}),[t.assignment.onHoverAxis,o]),l=Object(S.useCallback)((function(e){t.dispatch({type:"ADD",payload:{id:[n,e],axis:i}})}),[i,t,n]),s=Object(S.useCallback)((function(e){t.dispatch({type:"REMOVE",payload:{id:[n,e],axis:i}})}),[i,t,n]),u=Object(S.useCallback)((function(e){t.dispatch({type:"REMOVE_ALL",payload:{id:[n],axis:e}})}),[t,n]),d=Object(S.useCallback)((function(e){void 0!==r[i]&&r[i].includes(e)?s(e):l(e)}),[i,l,r,s]),b=Object(S.useCallback)((function(){t.dispatch({type:"DELETE_RECORD",payload:{id:n}})}),[t,n]),p=Object(S.useCallback)((function(e){t.dispatch({type:"SET_IS_ACTIVE",payload:{id:a?void 0:n,axis:a||void 0===n?void 0:e}})}),[t,n,a]),f=Object(S.useCallback)((function(e,a){"enter"===e?t.dispatch({type:"SET_IS_ON_HOVER",payload:{id:n,axis:void 0!==n?a:void 0}}):"leave"===e&&t.dispatch({type:"SET_IS_ON_HOVER",payload:{}})}),[t,n]),h=Object(S.useCallback)((function(e){return f("enter",e)}),[f]),m=Object(S.useCallback)((function(e){return f("leave",e)}),[f]);return{id:n,isActive:a,activeAxis:i,assigned:r,add:l,remove:s,removeAll:u,toggle:d,deleteRecord:b,onClick:p,isOnHover:o,onHoverAxis:c,onMouseEnter:h,onMouseLeave:m}}var vr=[{label:"massive (m)",value:"m",multiplicity:null},{label:"singlet (s)",value:"s",multiplicity:1},{label:"doublet (d)",value:"d",multiplicity:2},{label:"triplet (t)",value:"t",multiplicity:3},{label:"quartet (q)",value:"q",multiplicity:4},{label:"quintet (i)",value:"i",multiplicity:5},{label:"sextet (x)",value:"x",multiplicity:6},{label:"septet (p)",value:"p",multiplicity:7},{label:"octet (o)",value:"o",multiplicity:8},{label:"nonet (n)",value:"n",multiplicity:9}];function checkMultiplet(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(void 0===e||0===e.length)return!1;var n=vr.find((function(t){return t.value===e||t.label===e}));return n&&!t.includes(n.value)&&!t.includes(n.label)}function checkMultiplicity(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return void 0!==e&&0!==e.length&&!e.split("").find((function(e){return!checkMultiplet(e,t)}))}function translateMultiplet(e){return 1===e.length?vr.find((function(t){return t.value===e})).label:vr.find((function(t){return t.label===e})).value}function hasCouplingConstant(e){return e.length>1&&(e=translateMultiplet(e)),checkMultiplicity(e,["m","s"])}var Or=["red","green","blue","magenta"];var xr=function LevelNode(e){var t=e.signal,n=e.startY,a=e.levelHeight,i=useScale().scaleX;return Object(I.jsx)("line",{x1:i()(t.delta),y1:n,x2:i()(t.delta),y2:n+a,stroke:Or[0]},"startLevelNode_".concat(t.id))};var yr=function StringNode(e){var t=e.signal,n=e.startY,a=e.levelHeight,i=e.fontSize,r=e.showLabels,o=useScale().scaleX;return Object(I.jsx)("text",{textAnchor:"middle",x:o()(t.delta),y:n+a/2,fontSize:i,lengthAdjust:"spacing",fill:"black",visibility:r?"visible":"hidden",children:t.multiplicity},"multiplicityString_".concat(t.id))};var kr=function TreeNodes(e){var t=e.nodesData,n=e.levelHeight,a=e.startY,i=e.signalID,r=e.labelOptions,o=e.showLabels,c=useScale().scaleX,l=Object(S.useCallback)((function(e){var t=e.startX,l=e._startX,s=e.ratio,u=e.multiplicityIndex,d=e.color,b=2*u+2,p=a+b*n,f=a+(b+1)*n;return Object(I.jsxs)("g",{children:[Object(I.jsx)("text",{textAnchor:"middle",x:c()(l)+r.distance,y:f+n/3*2,fontSize:r.fontSize,fill:d,visibility:o?"visible":"hidden",children:s}),Object(I.jsx)("line",{x1:c()(t),y1:p,x2:c()(l),y2:f,stroke:d}),Object(I.jsx)("line",{x1:c()(l),y1:f,x2:c()(l),y2:f+n,stroke:d})]},"treeNode_".concat(i,"_").concat(t,"_").concat(l,"_").concat(s))}),[i,r.distance,r.fontSize,c,o,a,n]);return t&&t.map((function(e){return l(e)}))},Cr=function createTreeNodes(e,t){return function buildTreeNodesData(n,a,i,r){if(n>=e.multiplicity.length)return i;var o=Or[n%Or.length],c=a.findIndex((function(e){return e===n})),l=C()(t,"info.originFrequency",0),s=c>=0&&l>0?e.j[c].coupling/l:null;if(s){var u=function getPascal(e,t){if(void 0===e||0===e||void 0===t)return[1];for(var n=2*t+1,a=[],i=0;i<n-1;i++)a.push(1);for(var r=0;r<e-1;r++){for(var o=a.slice(),c=1;c<n;c++){for(var l=0;l<a.length-1;l++)o[l+c]+=a[l];o.push(1)}a=o.slice()}return a}(function getMultiplicityNumber(e){var t=vr.find((function(t){return e===t.label||e===t.value}));return t?t.multiplicity:null}(e.multiplicity.charAt(n)),.5),d=u.length%2===0?r-u.length/2*s+s/2:r-(u.length/2-.5)*s;u.forEach((function(e,t){t>0&&(d+=s),i.push({startX:r,_startX:d,ratio:e,multiplicityIndex:n,color:o}),buildTreeNodesData(n+1,a,i,d)}))}else i.push({startX:r,_startX:r,ratio:1,multiplicityIndex:n,color:o}),buildTreeNodesData(n+1,a,i,r);return i}},Sr={cursor:"default",opacity:.6,strokeWidth:1};var Dr,wr,Tr=function MultiplicityTree(e){var t=e.rangeFrom,n=e.rangeTo,a=e.signal,i=e.labelOptions,r=void 0===i?{distance:10,fontSize:11}:i,o=useScale(),c=o.scaleX,l=o.scaleY,s=useChartData(),u=s.data,d=s.activeSpectrum,b=s.selectedTool,p=s.width,f=useAssignment(a.id),h=Object(gi.c)([f.id].concat(f.assigned.x||[])),m=Object(S.useMemo)((function(){return C()(u,"".concat(d.index),null)}),[d,u]),g=Object(S.useState)({x1:a.delta,x2:a.delta}),j=Object(O.a)(g,2),x=j[0],y=j[1],k=Object(S.useState)({width:0,height:0,levelHeight:0}),D=Object(O.a)(k,2),w=D[0],T=D[1],M=Object(S.useState)(!1),A=Object(O.a)(M,2),E=A[0],P=A[1],F=Object(S.useState)(!1),_=Object(O.a)(F,2),I=_[0],N=_[1];Object(S.useEffect)((function(){var e=!checkMultiplicity(a.multiplicity,["m"]),t=e?Math.abs(c()(x.x1)-c()(x.x2)):Math.abs(c()(x.x1)-c()(x.x2))+r.distance,n=e?t/3:t/2,i=e?n/(a.multiplicity.length+2):n/(2*a.multiplicity.length+2);T({width:t,height:n,levelHeight:i}),P(e)}),[r.distance,c,a.multiplicity,x.x1,x.x2]),Object(S.useEffect)((function(){w.width/p>=.1?N(!0):N(!1)}),[w.width,p]);var R=Object(S.useMemo)((function(){var e;return m.data.x.forEach((function(a,i){a>=t&&a<=n&&(!e||m.data.y[i]>e)&&(e=m.data.y[i])})),l(m.id)(e)-w.height-30}),[m.data.x,m.data.y,m.id,l,w.height,t,n]),L=Object(S.useMemo)((function(){return Cr(a,m)(0,a.multiplicity.split("").map((function(e,t){return hasCouplingConstant(e)?t:void 0})).filter((function(e){return void 0!==e})),[],a.delta)}),[a,m]);Object(S.useEffect)((function(){if(E)y({x1:t,x2:n});else{var e={x1:a.delta,x2:a.delta};L.forEach((function(t){t.startX<e.x1&&(e.x1=t.startX),t.startX>e.x2&&(e.x2=t.startX),t._startX<e.x1&&(e.x1=t._startX),t._startX>e.x2&&(e.x2=t._startX)})),y(e)}}),[E,t,n,a.delta,a.multiplicity,L]);var z=Object(S.useMemo)((function(){var e=w.levelHeight,i=R,o=i,l=R+e;if(o=l,o+=e,E){var s=c()(t),u=c()(n),d="M ".concat(s," ").concat(o+e," ").concat(s," ").concat(o," ").concat(c()(a.delta)," ").concat(o," ").concat(u," ").concat(o," ").concat(u," ").concat(o+e);return Object(ye.c)("g",{children:[Object(ye.b)(yr,{signal:a,startY:i,levelHeight:e,fontSize:r.fontSize,showLabels:I}),Object(ye.b)(xr,{signal:a,startY:l,levelHeight:e}),Object(ye.b)("path",{d:d,stroke:"blue",fill:"none"})]})}return Object(ye.c)("g",{children:[Object(ye.b)(yr,{signal:a,startY:i,levelHeight:e,fontSize:r.fontSize,showLabels:I}),Object(ye.b)(xr,{signal:a,startY:l,levelHeight:e}),Object(ye.b)(kr,{nodesData:L,signalID:L,showLabels:I,startY:R,labelOptions:r,levelHeight:e})]})}),[w,R,E,a,r,I,L,c,t,n]);return Object(ye.b)("g",{css:h.isActive||f.isActive?Object(v.a)(Object(v.a)({},Sr),{},{opacity:1,strokeWidth:1.5}):Sr,onMouseEnter:function onMouseEnter(){f.onMouseEnter("x"),h.show()},onMouseLeave:function onMouseLeave(){f.onMouseLeave("x"),h.hide()},onClick:b&&b===Qa.editRange.id?null:function(e){e.shiftKey&&(e.stopPropagation(),f.onClick("x"))},children:z})},Mr=Object(y.a)(Dr||(Dr=Object(x.a)(["\n  pointer-events: bounding-box;\n  @-moz-document url-prefix() {\n    pointer-events: fill;\n  }\n  user-select: 'none';\n  -webkit-user-select: none; /* Chrome all / Safari all */\n  -moz-user-select: none; /* Firefox all */\n\n  // // disabled because Resizable component appears now when hovering over it\n  // :hover .range-area {\n  //   height: 100%;\n  //   fill: #ff6f0057;\n  //   cursor: pointer;\n  // }\n\n  .delete-button {\n    visibility: hidden;\n  }\n"]))),Ar=Object(y.a)(wr||(wr=Object(x.a)(["\n  pointer-events: bounding-box;\n\n  @-moz-document url-prefix() {\n    pointer-events: fill;\n  }\n  .range-area {\n    height: 100%;\n    fill: #ff6f0057;\n  }\n  .delete-button {\n    visibility: visible;\n    cursor: pointer;\n  }\n"])));var Er=function Range(e){var t=e.rangeData,n=e.showMultiplicityTrees,a=e.selectedTool,i=t.id,r=t.from,o=t.to,c=t.integral,l=t.signal,s=useAssignment(i),u=Object(gi.c)([s.id].concat(s.assigned.x||[]),gi.b.RANGE),d=Object(S.useState)({from:r,to:o}),b=Object(O.a)(d,2),p=b[0],f=b[1],h=useScale().scaleX,m=useDispatch(),g=Object(S.useState)(!1),j=Object(O.a)(g,2),x=j[0],y=j[1],k=Object(S.useState)(!1),C=Object(O.a)(k,2),D=C[0],w=C[1];Object(S.useEffect)((function(){a&&a===Qa.editRange.id?w(!0):w(!1)}),[a]),Object(S.useEffect)((function(){y(!hr(t))}),[t]);var T=Object(S.useCallback)((function(e){m({type:In,data:Object(v.a)(Object(v.a)({},t),e)})}),[m,t]),M=Object(S.useCallback)((function(){s.onMouseEnter("x"),u.show()}),[s,u]),A=Object(S.useCallback)((function(){s.onMouseLeave("x"),u.hide()}),[s,u]),E=Object(S.useCallback)((function(e){a===Qa.rangesPicking.id&&e.shiftKey&&!D&&s.onClick("x")}),[s,D,a]),P=Object(S.useCallback)((function(e){f((function(t){return Object(v.a)(Object(v.a)({},t),e)}))}),[]),F=p.from,_=p.to;return Object(ye.c)("g",{style:{outline:"none"},css:D||u.isActive||s.isActive?Ar:Mr,onMouseEnter:M,onMouseLeave:A,onClick:E,children:[Object(ye.c)("g",{transform:"translate(".concat(h()(_),",10)"),children:[Object(ye.b)("rect",{x:"0",width:Math.abs(h()(F)-h()(_)),height:"6",className:"range-area",fill:"green",fillOpacity:!x||u.isActive||s.isActive?1:.4}),Object(ye.b)("text",{textAnchor:"middle",x:Math.abs(h()(F)-h()(_))/2,y:"20",fontSize:"10",fill:"red",fillOpacity:!x||u.isActive||s.isActive?1:.6,children:void 0!==c?c.toFixed(2):""})]}),Object(ye.b)(Ai,{from:t.from,to:t.to,onDrop:T,onDrag:P}),n&&l&&l.length>0?l.map((function(e){return Object(ye.b)(Tr,{rangeFrom:F,rangeTo:_,signal:e},l.id)})):null]},i)};function Ranges(e){var t=e.ranges,n=e.displayerKey,a=e.selectedTool,i=Object(S.useState)(!1),r=Object(O.a)(i,2),o=r[0],c=r[1];return Object(S.useEffect)((function(){bi.on("showMultiplicityTrees",(function(e){c(e)}))}),[]),Object(I.jsx)("g",{clipPath:"url(#".concat(n,"clip-chart-1d)"),children:t&&t.values&&t.values.map((function(e){return Object(I.jsx)(Er,{rangeData:e,selectedTool:a,showMultiplicityTrees:o},e.id)}))})}var Pr=or(Object(S.memo)(Ranges));var Fr=function Chart1D(e){var t=e.mode,n=e.width,a=e.height,i=e.margin,r=e.displayerKey;return Object(I.jsxs)("svg",{viewBox:"0 0 ".concat(n," ").concat(a),width:n,height:a,id:"nmrSVG",children:[Object(I.jsx)("defs",{children:Object(I.jsx)("clipPath",{id:"".concat(r,"clip-chart-1d"),children:Object(I.jsx)("rect",{width:"".concat(n-i.left-i.right),height:"".concat(a),x:"".concat(i.left),y:"".concat(0)})})}),Object(I.jsx)(Ri,{}),Object(I.jsx)(Ii,{}),Object(I.jsx)(Ki,{}),Object(I.jsx)(Pr,{}),Object(I.jsx)(rr,{}),Object(I.jsx)(mi,{}),Object(I.jsx)(yi,{}),Object(I.jsx)("g",{className:"container",style:{pointerEvents:"none"},children:Object(I.jsx)($i,{showGrid:!0,mode:t})})]})},_r=n(601),Ir=n(384),Nr=Object(S.createContext)(),Rr=Nr.Provider;function useHelp(){var e=Object(S.useContext)(Nr),t=Object(S.useCallback)((function(t){var n=t.target.getAttribute("data-helpid");n&&(t.target.style.cursor=!e.preventAutoHelp||t.ctrlKey?"help":"pointer",e.dispatch({type:"SHOW",id:n}),e.show(n,{delay:t.ctrlKey?0:null}))}),[e]),n=Object(S.useCallback)((function(){e.dispatch({type:"HIDE"}),e.clear()}),[e]);return{show:t,hide:n,onHover:{onMouseEnter:t,onMouseLeave:n}}}var Lr,zr=n(62),Hr=n.n(zr),Br=n(89),Vr=function groupBy(e,t){return e.reduce((function(e,n){var a=t(n);return e[a]||(e[a]=[]),e[a].push(n),e}),{})},Xr={helpText:null,helpObject:null};function helpReducer(e,t){switch(t.type){case"SHOW":var n=e.data[t.id].text;return Object(v.a)(Object(v.a)({},e),{},{helpText:n});case"HIDE":return Object(v.a)(Object(v.a)({},e),{},{helpText:null});default:throw new Error("unknown action type: ".concat(t.type))}}var Yr=(Lr={},Object(ue.a)(Lr,ee,{entering:{opacity:0},entered:{opacity:1}}),Object(ue.a)(Lr,te,{entering:{transform:"scale(0)"},entered:{transform:"scale(1)"},exiting:{transform:"scale(0)"},exited:{transform:"scale(0)"}}),Lr),Zr={innerContainer:{display:"flex",flexDirection:"column",width:"100%",height:"100%",borderRadius:"5px",padding:"10px"},outerContainer:{boxSizing:"initial",backgroundColor:"rgba(255, 255, 255, 1)",boxShadow:"0px 0px 0px 0px, rgba(0, 0, 0, 0.1) 0px 3px 5px",pointerEvents:"all"},closeButton:{border:"none",color:"red",backgroundColor:"transparent",outline:"none"}},Ur=null;function Provider_Provider(e){var t=e.children,n=e.data,a=e.offset,i=e.position,r=e.timeout,o=e.delay,c=e.type,l=e.transition,s=e.containerStyle,u=e.wrapperRef,d=e.multiple,b=e.preventAutoHelp,p=Object(S.useRef)(),f=Object(S.useRef)([]),h=Object(S.useState)([]),m=Object(O.a)(h,2),g=m[0],j=m[1];Object(S.useEffect)((function(){p.current=document.createElement("div");var e=p.current;u&&u.appendChild(e);var t=f.current;return function(){t.forEach(clearTimeout),u&&u.removeChild(e)}}),[u]);var x=Object(S.useCallback)((function(e){j((function(t){var n=t.length,a=t.filter((function(t){return t.id!==e.id}));return n>a.length&&e.options.onClose&&e.options.onClose(),a}))}),[]),y=Object(S.useCallback)(function(){var e=Object(Br.a)(Hr.a.mark((function _callee(e){var t,n,a,l,s,u=arguments;return Hr.a.wrap((function _callee$(p){for(;;)switch(p.prev=p.next){case 0:if(t=u.length>1&&void 0!==u[1]?u[1]:{delay:null},g.some((function(t){return t.helpid===e}))){p.next=15;break}return p.prev=2,n=Math.random().toString(36).substr(2,9),a=Object(v.a)({position:t.position||i,timeout:r,type:c},t),(l={helpid:e,id:n,options:a}).close=function(){return x(l)},s=function startModal(){if(l.options.timeout){var e=setTimeout((function(){x(l),f.current.splice(f.current.indexOf(e),1)}),l.options.timeout);f.current.push(e)}j((function(e){return d?e.concat(l):[l]})),l.options.onOpen&&l.options.onOpen()},0===t.delay?s():b||(Ur=setTimeout((function(){s()}),t.delay>0?t.delay:o)),p.abrupt("return",l);case 12:p.prev=12,p.t0=p.catch(2),console.log(p.t0);case 15:case"end":return p.stop()}}),_callee,null,[[2,12]])})));return function(t){return e.apply(this,arguments)}}(),[o,g,d,i,b,x,r,c]),k=Object(S.useCallback)((function(){clearTimeout(Ur)}),[]),C=Object(S.useMemo)((function(){return u?u.getBoundingClientRect():{top:0,left:0,width:window.innerWidth,height:window.innerHeight}}),[u]),D=Object(S.useReducer)(helpReducer,Object(v.a)(Object(v.a)({},Xr),{},{data:n})),w=Object(O.a)(D,2),T=w[0],M=w[1],A=Vr(g,(function(e){return e.options&&e.options.position}));return Object(I.jsxs)(Rr,{value:{helpState:T,dispatch:M,show:y,clear:k,preventAutoHelp:b},children:[t,p.current&&Object(de.createPortal)(Object(I.jsx)(S.Fragment,{children:Object.keys(G).map((function(e){var t=G[e];return Object(I.jsx)(pe.a,{appear:!0,options:{position:i,containerStyle:s},containerStyle:C,component:xe,children:A[t]?A[t].map((function(e){return Object(I.jsx)(ve,{type:l,transitionStyles:Object(v.a)(Object(v.a)({},Yr),{},{default:{width:"400px",height:"400px"}}),children:Object(I.jsx)(be.a,{style:Object(v.a)({margin:a},Zr.outerContainer),default:{x:0,y:0,width:400,height:400},children:Object(I.jsxs)("div",{style:Zr.innerContainer,children:[Object(I.jsx)("div",{children:Object(I.jsx)("button",{type:"button",onClick:function onClick(){return x(e)},style:Zr.closeButton,children:Object(I.jsx)(Xe.G,{})})}),n[e.helpid].filePath&&Object(I.jsx)("div",{style:{cursor:"default",width:"100%",height:"100%"},children:Object(I.jsx)("iframe",{title:"Tool User Manual",src:n[e.helpid].filePath,frameBorder:"0",scrolling:"auto",style:{width:"100%",height:"100%"}})})]})})},e.id)})):null},t)}))}),p.current)]})}Provider_Provider.defaultProps={offset:"10px",position:G.TOP_RIGHT,timeout:0,delay:2e3,transition:te,containerStyle:{zIndex:100},wrapperRef:null,multiple:!1,preventAutoHelp:!1};var Kr=Object(S.memo)(Provider_Provider);var Wr,Gr,qr=function FooterWarpper(e){var t=function Wrapper(t){var n=useChartData(),a=n.margin,i=n.width,r=n.height,o=n.activeSpectrum,c=n.data,l=n.activeTab,s=t.forwardedRef,u=Object(fe.a)(t,["forwardedRef"]);return Object(I.jsx)(e,Object(v.a)(Object(v.a)({},u),{},{data:c,activeSpectrum:o,activeTab:l,margin:a,width:i,height:r,ref:s}))};return Object(S.forwardRef)((function(e,n){return Object(I.jsx)(t,Object(v.a)(Object(v.a)({},e),{},{forwardedRef:n}))}))},Jr=Object(y.a)(Wr||(Wr=Object(x.a)(["\n  display: flex;\n  flex-firection: row;\n  align-items: center;\n  pointer-events: bounding-box;\n  user-select: 'none';\n  -webkit-user-select: none; /* Chrome all / Safari all */\n  -moz-user-select: none; /* Firefox all */\n  background-color: #f7f7f7;\n  height: 30px;\n  padding: 6px;\n  color: #8d0018;\n  position: absolute;\n  width: 100%;\n  bottom: 0;\n\n  .help {\n    font-size: 6px;\n    color: black;\n  }\n\n  div {\n    margin: 0px 10px;\n    display: inline-block;\n\n    .label {\n      font-size: 12px;\n      color: #4d4d4d;\n      font-weight: bold;\n    }\n    .value {\n      font-weight: bold;\n      font-size: 14px;\n      display: inline-block;\n    }\n    .unit {\n      font-weight: bold;\n      font-size: 10px;\n    }\n    .xvalue {\n      min-width: 50px;\n    }\n    .yvalue {\n      min-width: 80px;\n    }\n  }\n\n  .separator {\n    border-left: 2px solid gray;\n    margin: 0 20px;\n    width: 1px;\n    height: 100%;\n  }\n"]))),$r=Object(y.a)(Gr||(Gr=Object(x.a)(["\n  pointer-events: bounding-box;\n  user-select: 'none';\n  -webkit-user-select: none; /* Chrome all / Safari all */\n  -moz-user-select: none; /* Firefox all */\n  background-color: #f7f7f7;\n  height: 30px;\n  padding: 6px;\n  color: #8d0018;\n  position: absolute;\n  width: 100%;\n  bottom: 0;\n  span {\n    font-size: 10px;\n    color: black;\n    display: inline-block;\n    text-overflow: ellipsis;\n    width: 100%;\n    white-space: nowrap;\n    overflow: hidden;\n  }\n"])));function FooterBanner(e){var t=e.margin,n=e.width,a=e.height,i=e.activeSpectrum,r=e.data,o=e.activeTab,c=Object(S.useContext)(z),l=Object(S.useContext)(N),s=l.startX,u=l.endX,d=l.step,b=useScale().scaleX,p=function useHelptData(){return Object(S.useContext)(Nr).helpState}().helpText,f=(i?r[i.index].info:{}).originFrequency,h=useFormatNumberByNucleus(o),m=Object(S.useCallback)((function(e){if(i){var t=Object(He.i)(r[i.index].data.x,b().invert(e));return r[i.index].data.y[t]}return 1}),[i,r,b]);return p?Object(ye.b)("div",{css:$r,children:Object(ye.b)("span",{className:"help",children:p})}):!c||c.y<t.top||c.x<t.left||c.x>n-t.right||c.y>a-t.bottom?Object(ye.b)("div",{css:Jr}):Object(ye.c)("div",{css:Jr,children:[Object(ye.b)(_r.a,{}),Object(ye.c)("div",{children:[Object(ye.b)("span",{className:"label",children:" X :"}),Object(ye.b)("span",{className:"value",children:h(b().invert(c.x))}),Object(ye.b)("span",{className:"unit",children:"ppm"})]}),i&&f&&Object(ye.c)("div",{children:[Object(ye.b)("span",{className:"label",children:" X :"}),Object(ye.b)("span",{className:"value xvalue",children:h(b().invert(c.x)*f,"hz")}),Object(ye.b)("span",{className:"unit",children:"Hz"})]}),"brushing"===d&&Object(ye.c)("div",{children:[Object(ye.b)("span",{className:"label",children:" \u0394ppm :"}),Object(ye.b)("span",{className:"value",children:(b().invert(s)-b().invert(u)).toPrecision(6)})]}),i&&Object(ye.c)(S.Fragment,{children:[f&&"brushing"===d&&Object(ye.c)("div",{children:[Object(ye.b)("span",{className:"label",children:" \u0394Hz :"}),Object(ye.b)("span",{className:"value",children:((b().invert(s)-b().invert(u))*f).toPrecision(5)})]}),"brushing"===d&&Object(ye.c)("div",{children:[Object(ye.b)("span",{className:"label",children:" ratio :"}),Object(ye.c)("span",{className:"value",children:[(m(s)/(m(u)||Number.MIN_VALUE)*100).toFixed(2),"%"]})]})]}),i&&Object(ye.c)(S.Fragment,{children:[Object(ye.b)("div",{className:"separator"}),Object(ye.b)(Ir.b,{}),Object(ye.c)("div",{children:[Object(ye.b)("span",{className:"label",children:" Y :"}),Object(ye.b)("span",{className:"value yvalue",children:h(m(c.x))})]})]})]})}var Qr=qr(Object(S.memo)(FooterBanner)),eo={container:{position:"absolute",left:"10px",top:"10px"},value:{width:"67px",display:"inline-block",margin:"0 5px",fontSize:"12px"},colorIndicator:{width:"10px",height:"1px",borderBottom:"2px solid",display:"inline-block",marginBottom:"3px"},name:{fontSize:"12px"}};function YTracker(e){var t=e.datum,n=useScale().scaleX,a=Object(S.useContext)(z);if(!n||!a)return null;var i=Object(He.i)(t.x,n().invert(a.x));return Object(I.jsx)("span",{style:eo.value,children:t.y[i]})}var to=function SpectraTracker(){var e=useChartData(),t=e.data,n=e.activeTab,a=Object(S.useState)(!1),i=Object(O.a)(a,2),r=i[0],o=i[1];Object(S.useEffect)((function(){return bi.on("showYSpectraTrackers",(function(e){o(e)})),function(){return bi.off("showYSpectraTrackers")}}),[]);var c=Object(S.useMemo)((function(){return r&&t.map((function(e){return e.display.isVisible&&e.display.isVisibleInDomain&&e.info.nucleus===n&&Object(I.jsxs)("div",{style:{display:"block"},children:[Object(I.jsx)("span",{style:Object(v.a)(Object(v.a)({},eo.colorIndicator),{},{borderColor:e.display.color})}),Object(I.jsx)(YTracker,{datum:e.data}),Object(I.jsx)("span",{style:eo.value,children:e.display.name})]},e.id)}),[])}),[n,t,r]);return r?Object(I.jsx)("div",{style:eo.container,children:c}):null},no=n(204),ao=10,io="#1f1f1f",ro=1,oo=0,co=1;var lo=function PeakPointer(){var e=useChartData(),t=e.height,n=e.width,a=e.margin,i=e.activeSpectrum,r=e.data,o=e.mode,c=e.selectedTool,l=e.verticalAlign,s=useScale(),u=s.scaleX,d=s.scaleY,b=Object(S.useContext)(z),p=Object(S.useContext)(N),f=Object(S.useState)(),h=Object(O.a)(f,2),m=h[0],g=h[1];return Object(S.useEffect)((function(){var e=function getClosePeak(e,t){if(i&&b&&c===Qa.peakPicking.id){var n=[u().invert(t.x-e),u().invert(t.x+e)].sort((function(e,t){return e-t})),a=r.find((function(e){return e.id===i.id})),o=a.data.x.findIndex((function(e){return e>=n[1]}))-1,s=a.data.x.findIndex((function(e){return e>=n[0]})),p=a.data.y.slice(s,o);if(p&&p.length>0){var f=Object(no.a)(p),h=p.findIndex((function(e){return e===f})),m=a.data.x[s+h];return{x:u()(m),y:d(i.id)(f)-(i&&l.flag&&l.stacked?(i.index+1)*l.value:0),xIndex:s+h}}}return null}(10,b);g(e)}),[i,r,o,b,u,d,c,l]),c!==Qa.peakPicking.id||!m||!i||"brushing"===p.step||!b||b.y<a.top||b.left<a.left||b.x>n-a.right||b.y>t-a.bottom?null:Object(I.jsx)("div",{style:{cursor:"crosshair",transform:"translate(".concat(m.x,"px, ").concat(m.y,"px)"),transformOrigin:"top left",position:"absolute",top:-(ao+co),left:-(ao+co),pointerEvents:"none",overflow:"visible"},children:Object(I.jsxs)("svg",{width:2*ao+2*co,height:2*ao+2*co,children:[Object(I.jsx)("circle",{cx:ao+co,cy:ao+co,r:ao,stroke:io,strokeWidth:ro,fillOpacity:oo}),Object(I.jsx)("line",{x1:ao+co,y1:co,x2:ao+co,y2:2*ao+co,stroke:io,strokeWidth:ro}),Object(I.jsx)("line",{x1:co,y1:ao+co,x2:2*ao+co,y2:ao+co,stroke:io,strokeWidth:ro})]})},"peakPointer")},so={transformOrigin:"top left",position:"absolute",top:"0px",left:"0px",width:1,backgroundColor:"red"};var uo=function VerticalIndicator(){var e=useChartData(),t=e.height,n=e.selectedTool,a=e.pivot,i=useScale().scaleX;return Qa.phaseCorrection.id!==n?null:Object(I.jsx)("div",{style:Object(v.a)(Object(v.a)({},so),{},{transform:"translate(".concat(i()(a),"px, 0px)"),height:t})})},bo={cursor:"crosshair",transformOrigin:"bottom right",position:"absolute",top:"-18px",left:"-30px",pointerEvents:"none",overflow:"visible",userSelect:"none"};var po=function XLabelPointer(){var e=useChartData(),t=e.height,n=e.width,a=e.margin,i=e.data,r=e.activeSpectrum,o=useScale().scaleX,c=Object(S.useContext)(z),l=Object(S.useContext)(N),s=Object(S.useMemo)((function(){return r?i.find((function(e){return e.id===r.id})):null}),[r,i]),u=useFormatNumberByNucleus(s&&s.info.nucleus),d=Object(S.useCallback)((function(e){if(s){var t=o().invert(e);return u(t)}}),[s,u,o]);return!r||"brushing"===l.step||!c||c.y<a.top||c.x<a.left||c.x>n-a.right||c.y>t-a.bottom?null:Object(I.jsx)("div",{style:Object(v.a)(Object(v.a)({},bo),{},{transform:"translate(".concat(c.x,"px, ").concat(c.y,"px)")}),children:Object(I.jsx)("span",{children:d(c.x)})},"xLabelPointer")};var fo=function Viewer1D(e){var t=e.emptyText,n=void 0===t?void 0:t,a=usePreferences().display.general,i=useChartData(),r=i.selectedTool,o=i.isLoading,c=i.data,l=i.mode,s=i.width,u=i.height,d=i.margin,b=i.activeSpectrum,p=i.xDomain,f=i.xDomains,h=i.yDomain,m=i.yDomains,g=i.verticalAlign,j=i.displayerKey,x=useDispatch(),y=ie(),k=Object(S.useReducer)(scaleReducer,vt),C=Object(O.a)(k,2),D=C[0],w=C[1];Object(S.useEffect)((function(){p.length>0&&h.length>0&&s&&u&&w({type:jt,payload:{yDomain:h,yDomains:m,xDomain:p,xDomains:f,margin:d,height:u,width:s,verticalAlign:g,mode:l}})}),[u,d,l,g,s,p,f,h,m]);var T=Object(S.useCallback)((function(e){if(e.altKey)switch(r){case Qa.rangesPicking.id:a.disableMultipletAnalysis||y.show(Object(I.jsx)(tt,Object(v.a)({data:c,activeSpectrum:b,scaleX:D.scaleX},e)),{onClose:function onClose(){y.close()}})}else if(e.shiftKey)switch(r){case Qa.integral.id:x(Object(v.a)({type:Yt},e));break;case Qa.rangesPicking.id:x(Object(v.a)({type:Rn},e));break;case Qa.multipleSpectraAnalysis.id:x(Object(v.a)({type:qn},e));break;case Qa.peakPicking.id:x(Object(v.a)({type:Tt},e));break;case Qa.baseLineCorrection.id:x({type:An,zone:{from:e.startX,to:e.endX}});break;case Qa.exclusionZones.id:x({type:da,payload:{from:e.startX,to:e.endX}});break;default:!function propagateEvent(){var t=e.startX,n=e.endX,a=D.scaleX().invert(t),i=D.scaleX().invert(n);bi.emit("brushEnd",Object(v.a)(Object(v.a)({},e),{},{range:[a,i].sort()}))}()}else null!=r&&x(Object(v.a)({type:rn},e))}),[D,r,a,y,c,b,x]),E=Object(S.useCallback)((function(){x({type:zt,zoomType:mt})}),[x]),P=Object(S.useCallback)((function(e){switch(r){case Qa.integral.id:x(Object(v.a)({type:ln},e));break;default:return void x(Object(v.a)({type:Kt},e))}}),[x,r]),F=Object(S.useCallback)((function(e){if(e.shiftKey)switch(r){case Qa.peakPicking.id:x({type:wt,mouseCoordinates:e})}else switch(r){case Qa.phaseCorrection.id:x({type:jn,position:e.x});break;case"editRange":e.shiftKey&&function propagateEvent(){var t=D.scaleX().invert(e.x);bi.emit("mouseClick",Object(v.a)(Object(v.a)({},e),{},{xPPM:t}))}()}}),[x,D,r]),_=Object(M.a)((function(){return Object(I.jsxs)(S.Fragment,{children:[Object(I.jsx)(ze,{isLoading:o,emptyText:n}),D.scaleX&&D.scaleY&&c&&c.length>0&&Object(I.jsx)(BrushTracker,{onBrush:T,onDoubleClick:E,onClick:F,onZoom:P,style:{width:"100%",height:"100%",margin:"auto",position:"relative",overflow:"hidden"},children:Object(I.jsxs)(MouseTracker,{style:{width:"100%",height:"100%",position:"absolute"},children:[Object(I.jsx)(to,{}),Object(I.jsx)(li,{}),Object(I.jsx)(ri,{brushType:ni}),Object(I.jsx)(po,{}),Object(I.jsx)(lo,{}),Object(I.jsx)(uo,{}),Object(I.jsx)(Qr,{}),Object(I.jsx)(Fr,{width:s,height:u,margin:d,mode:l,displayerKey:j})]})})]})}),[]),N=Object(O.a)(_,2),R=N[0],L=N[1],z=L.width,H=L.height,B=Object(S.useState)(),V=Object(O.a)(B,2),X=V[0],Y=V[1];return Object(A.a)((function(){return Y({width:z,height:H})}),400,[z,H]),Object(S.useEffect)((function(){X&&isFinite(X.width)&&isFinite(X.height)&&x(Object(v.a)({type:It},X))}),[x,X]),Object(I.jsx)(W,{value:D,children:R})};var ho={TOP_1D:"TOP_1D",LEFT_1D:"LEFT_1D",CENTER_2D:"CENTER_2D"};function getLayoutID(e,t){for(var n=0,a=Object.keys(e);n<a.length;n++){var i=a[n];if(t.startX>=e[i].startX&&t.startX<=e[i].endX&&t.startY>=e[i].startY&&t.startY<=e[i].endY)return i}return null}function get2DXScale(e){var t=e.width,n=e.margin,a=e.xDomain;return Object(nt.f)(a,[t-n.right,n.left])}function get2DYScale(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.height,a=e.margin,i=e.yDomain;return Object(nt.f)(i,t?[n-a.bottom,a.top]:[a.top,n-a.bottom])}function get1DYScale(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10;return Object(nt.f)(e,[t-n,n])}function ContoursPaths(e){var t=e.id,n=e.sign,a=e.color,i=useChartData(),r=i.margin,o=i.width,c=i.height,l=i.xDomain,s=i.yDomain,u=i.contours,d=i.activeSpectrum,b=usePreferences(),p=Object(S.useMemo)((function(){return null===d||t===d.id}),[d,t]);var f=Object(S.useMemo)((function(){return C()(u,"".concat(t,".").concat(n),[])}),[u,n,t]);return Object(I.jsx)("path",{fill:"none",stroke:a,strokeWidth:"1",style:{opacity:p?1:C()(b,"controllers.dimmedSpectraTransparency",.1)},d:function buildContourPath(e){for(var t=get2DXScale({margin:r,width:o,xDomain:l}),n=get2DYScale({margin:r,height:c,yDomain:s}),a="",i=0;i<e.length;i++)if(e[i].lines){var u=e[i].lines;if(u.length<1e6)for(var d=0;d<u.length;d+=4)a+="M".concat(t(u[d])," ").concat(n(u[d+1])," "),a+="L".concat(t(u[d+2])," ").concat(n(u[d+3])," ")}else{a+="M".concat(t(e[i][0].x)," ").concat(n(e[i][0].y)," ");for(var b=1;b<e[i].length;b++)a+="L".concat(t(e[i][b].x)," ").concat(n(e[i][b].y)," ")}return a||(a="M0 0 "),a+="Z"}(f)})}function Contours(e){var t=e.data,n=e.displayerKey;return Object(I.jsx)("g",{clipPath:"url(#".concat(n,"clip-chart-2d)"),className:"contours",children:t.filter((function(e){return 2===e.info.dimension})).map((function(e,t){return Object(I.jsxs)("g",{children:[e.display.isPositiveVisible&&Object(I.jsx)(ContoursPaths,{id:e.id,sign:"positive",color:e.display.positiveColor}),e.display.isNegativeVisible&&Object(I.jsx)(ContoursPaths,{id:e.id,sign:"negative",color:e.display.negativeColor})]},"".concat(e.id+t))}))})}var mo,go=function ContoursWrapper(e){var t=function Wrapper(t){var n=useChartData(),a=n.data,i=n.displayerKey,r=t.forwardedRef,o=Object(fe.a)(t,["forwardedRef"]);return Object(I.jsx)(e,Object(v.a)(Object(v.a)({},o),{},{data:a,displayerKey:i,ref:r}))};return function(e){return Object(I.jsx)(t,Object(v.a)({},e))}}(Object(S.memo)(Contours)),jo={DM_1D:"1D",DM_2D:"2D"},vo={top:100,right:50,bottom:70,left:100},Oo={top:10,right:10,bottom:70,left:10},xo=Object(y.a)(mo||(mo=Object(x.a)(["\n  stroke: lightgrey;\n  opacity: 0.7;\n"])));var yo=function IndicationLines(e){var t=e.axis,n=e.show,a=useChartData(),i=a.data,r=a.activeTab,o=a.margin,c=a.width,l=a.height,s=a.xDomain,u=a.yDomain,d=a.displayerMode,b=Object(S.useState)([]),p=Object(O.a)(b,2),f=p[0],h=p[1],m=get2DXScale({margin:o,width:c,xDomain:s}),g=get2DYScale({margin:o,height:l,yDomain:u});Object(S.useEffect)((function(){var e=r.split(",");if(d===jo.DM_2D&&2===e.length){var n="X"===t?e[0]:"Y"===t?e[1]:null;if(null!==n){var a=i.filter((function(e){return 1===e.info.dimension&&!0===e.display.isVisible&&e.info.nucleus===n&&"1d"===e.info.experiment})).map((function(e){return e.ranges.values})).flat().map((function(e){return e.signal.filter((function(e){return lr.some((function(t){return e.kind===t}))})).map((function(e){return e.delta}))})).flat();h(a)}else h([])}else h([])}),[r,t,i,d]);var j=Object(S.useMemo)((function(){if(!0===n&&f.length>0)return f.map((function(e,n){return"X"===t?Object(ye.b)("line",{css:xo,x1:m(e),x2:m(e),y1:g(u[0]),y2:g(u[1])},"indicationLine".concat(t).concat(n)):"Y"===t?Object(ye.b)("line",{css:xo,x1:m(s[0]),x2:m(s[1]),y1:g(e),y2:g(e)},"indicationLine".concat(t).concat(n)):null}))}),[t,f,m,g,n,s,u]);return Object(ye.b)("g",{children:j})};function Left1DChart(e){var t=e.margin,n=e.data,a=useChartData(),i=a.height,r=a.margin,o=a.yDomain,c=a.yDomains,l=a.displayerKey,s=r.left,u=Object(S.useMemo)((function(){if(n){var e=get2DYScale({height:i,yDomain:[o[0],o[1]],margin:r}),a=get1DYScale(c[n.id],s,t),l=n.data,u=l.x,d=l.y,b=Object(He.s)({x:u,y:d},{from:o[0],to:o[1]}),p=b.x.length-1,f=b.y.length-1,h="M  ".concat(a(b.y[f])," ").concat(e(p)," ");return h+=b.x.slice(0,p).reduceRight((function(t,n,i){return t+=" L  ".concat(a(b.y[i])," ").concat(e(n))}),"")}return null}),[s,r,t,i,n,o,c]),d=i-r.bottom-r.top;return d&&s?Object(I.jsxs)("svg",{viewBox:"0 0 ".concat(s," ").concat(d+r.top),width:s,height:d+r.top,children:[Object(I.jsx)("defs",{children:Object(I.jsx)("clipPath",{id:"".concat(l,"clip-left"),children:Object(I.jsx)("rect",{width:s,height:d,x:"0",y:r.top})})}),Object(I.jsx)("g",{clipPath:"url(#".concat(l,"clip-left)"),children:Object(I.jsx)("path",{className:"line",stroke:"black",fill:"none",d:u})})]}):null}Left1DChart.defaultProps={margin:10};var ko=Object(S.memo)(Left1DChart);function Top1DChart(e){var t=e.margin,n=e.data,a=useChartData(),i=a.width,r=a.margin,o=a.xDomain,c=a.yDomains,l=a.displayerKey,s=r.top,u=Object(S.useMemo)((function(){if(n){var e=get2DXScale({width:i,xDomain:o,margin:r}),a=get1DYScale(c[n.id],s,t),l=n.data,u=l.x,d=l.y,b=Object(He.s)({x:u,y:d},{from:o[0],to:o[1]}),p="M ".concat(e(b.x[0])," ").concat(a(b.y[0])," ");return p+=b.x.slice(1).reduce((function(t,n,i){return t+=" L ".concat(e(n)," ").concat(a(b.y[i+1]))}),"")}return null}),[s,t,r,n,i,o,c]);return i&&s?Object(I.jsxs)("svg",{viewBox:"0 0 ".concat(i," ").concat(s),width:i,height:s,children:[Object(I.jsx)("defs",{children:Object(I.jsx)("clipPath",{id:"".concat(l,"clip-top"),children:Object(I.jsx)("rect",{width:i-r.left-r.right,height:s,x:r.left,y:"".concat(0)})})}),Object(I.jsx)("g",{clipPath:"url(#".concat(l,"clip-top)"),children:Object(I.jsx)("path",{className:"line",stroke:"red",fill:"none",strokeWidth:"1px",d:u})})]}):null}Top1DChart.defaultProps={margin:10};var Co,So=Object(S.memo)(Top1DChart),Do=Object(y.a)(Co||(Co=Object(x.a)(["\n  user-select: none;\n\n  path,\n  line {\n    fill: none;\n    stroke: black;\n    stroke-width: 1;\n    shape-rendering: crispEdges;\n    user-select: none;\n  }\n"])));function XAxis_XAxis(e){var t=e.show,n=e.label,a=e.margin,i=useChartData(),r=i.xDomain,o=i.height,c=i.width,l=i.margin,s=i.tabActiveSpectrum,u=i.activeTab,d=Object(S.useRef)();Object(S.useEffect)((function(){var e=nt.a().ticks(8).tickFormat(nt.d("0"));if(t){var n=get2DXScale({width:c,margin:l,xDomain:r});nt.g(d.current).call(e.scale(n))}}),[u,o,l,l.bottom,l.left,l.right,l.top,t,s,c,r]);var b=Object(S.useMemo)((function(){return t&&!0===t&&Object(ye.b)("g",{className:"x",css:Do,transform:"translate(0,".concat(o-(l.bottom+a.bottom),")"),ref:d,children:Object(ye.b)("text",{fill:"#000",x:c-60,y:"20",dy:"0.71em",textAnchor:"end",children:n})})}),[o,n,l.bottom,a.bottom,t,c]);return c&&o?b:null}XAxis_XAxis.propTypes={margin:Gi.a.shape({top:Gi.a.number.isRequired,right:Gi.a.number.isRequired,bottom:Gi.a.number.isRequired,left:Gi.a.number.isRequired}),show:Gi.a.bool,label:Gi.a.string},XAxis_XAxis.defaultProps={show:!0,label:"\u03b4 [ppm]",margin:{right:100,top:0,left:0,bottom:0}};var wo,To=Object(S.memo)(XAxis_XAxis),Mo=Object(y.a)(wo||(wo=Object(x.a)(["\n  user-select: 'none';\n  -webkit-user-select: none; /* Chrome all / Safari all */\n  -moz-user-select: none; /* Firefox all */\n\n  path,\n  line {\n    fill: none;\n    stroke: black;\n    stroke-width: 1;\n    shape-rendering: crispEdges;\n    user-select: 'none';\n    -webkit-user-select: none; /* Chrome all / Safari all */\n    -moz-user-select: none; /* Firefox all */\n  }\n"])));function YAxis(e){var t=e.show,n=e.label,a=e.margin,i=Object(S.useRef)(),r=useChartData(),o=r.yDomain,c=r.width,l=r.height,s=r.activeTab,u=r.tabActiveSpectrum,d=r.margin;Object(S.useEffect)((function(){var e=nt.b().ticks(8).tickFormat(nt.d("0"));if(t&&o){var n=get2DYScale({height:l,yDomain:o,margin:d});nt.g(i.current).call(e.scale(n))}}),[t,o,s,u,l,d]);var b=Object(S.useMemo)((function(){return t&&!0===t&&Object(ye.b)(S.Fragment,{children:Object(ye.b)("g",{className:"y",css:Mo,transform:"translate(".concat(c-a.right,")"),ref:i,children:Object(ye.b)("text",{fill:"#000",x:-a.top,y:-(a.right-5),dy:"0.71em",transform:"rotate(-90)",textAnchor:"end",children:n})})})}),[n,a.right,a.top,t,c]);return c&&l?b:null}YAxis.defaultProps={show:!0,label:"",margin:{right:50,top:0,bottom:0,left:0}};var Ao=Object(S.memo)(YAxis);var Eo,Po=function ZonesWrapper(e){var t=function Wrapper(t){var n=useChartData(),a=n.data,i=n.activeSpectrum,r=n.xDomain,o=n.yDomain,c=n.activeTab,l=n.tabActiveSpectrum,s=n.displayerKey,u=usePreferences(),d=Object(S.useMemo)((function(){return a&&i&&i.id?a.find((function(e){return e.id===i.id}))||{zones:{},info:{},display:{}}:{}}),[i,a]),b=d.zones,p=void 0===b?{}:b,f=d.info,h=void 0===f?{}:f,m=d.display,g=void 0===m?{}:m,j=Object(S.useMemo)((function(){return l&&Object.keys(l).length>0?Object.keys(l):null}),[l]),O=t.forwardedRef,x=Object(fe.a)(t,["forwardedRef"]);return Object(I.jsx)(e,Object(v.a)(Object(v.a)({},x),{},{zones:p,display:g,info:h,xDomain:r,yDomain:o,preferences:u,activeTab:c,nucleus:j,displayerKey:s,ref:O}))};return Object(S.memo)(Object(S.forwardRef)((function(e,n){return Object(I.jsx)(t,Object(v.a)(Object(v.a)({},e),{},{forwardedRef:n}))})))},Fo=function getPubIntegral(e,t){return function getDiaIDs(e,t){return[].concat(e[t].diaID||[],e.signal?e.signal.map((function(e){return e[t].diaID||[]})).flat():[])}(e,t).length},_o=function setPubIntegral(e,t){e[t].pubIntegral=Fo(e,t),0===e[t].pubIntegral&&delete e[t].pubIntegral},Io=function resetDiaIDs(e,t){return delete e[t].diaID,delete e.pubIntegral,e.signal.forEach((function(e){delete e[t].diaID})),e},No=function unlink(e,t,n,a){return void 0!==t&&void 0!==a?(!0===t?delete e[a].diaID:void 0!==n&&delete e.signal[n][a].diaID,_o(e,a)):void 0!==a?(Io(e,a),_o(e,a)):["x","y"].forEach((function(t){Io(e,t),_o(e,t)})),e},Ro=function unlinkInAssignmentData(e,t,n){var a=t.reduce((function(e,t){return e.push(t.id),t.signal&&e.concat(t.signal.map((function(e){return e.id}),[])),e}),[]);n?e.dispatch({type:"REMOVE_ALL",payload:{id:a,axis:n}}):(e.dispatch({type:"REMOVE_ALL",payload:{id:a,axis:"x"}}),e.dispatch({type:"REMOVE_ALL",payload:{id:a,axis:"y"}}))},Lo=function buildID(e,t){return"".concat(e).concat("___").concat(t)},zo=Object(y.a)(Eo||(Eo=Object(x.a)(["\n  stroke: green;\n  stroke-width: 2;\n  opacity: 0.5;\n"])));var Ho=function SignalDeltaLine(e){var t=e.delta,n=e.axis,a=e.show,i=useChartData(),r=i.margin,o=i.width,c=i.height,l=i.xDomain,s=i.yDomain,u=get2DXScale({margin:r,width:o,xDomain:l}),d=get2DYScale({margin:r,height:c,yDomain:s}),b=Object(S.useMemo)((function(){return!0===a?"X"===n?Object(ye.b)("line",{css:zo,x1:u(t),x2:u(t),y1:d(s[0]),y2:d(s[1])},"signalLine_".concat(t,"_X")):"Y"===n?Object(ye.b)("line",{css:zo,x1:u(l[0]),x2:u(l[1]),y1:d(t),y2:d(t)},"signalLine_".concat(t,"_Y")):null:null}),[n,t,u,d,a,l,s]);return Object(ye.b)("g",{children:b})};var Bo,Vo,Xo=function SignalCrosshair(e){var t=e.signal,n=Object(S.useMemo)((function(){return[Lo(t.id,"Crosshair"),Lo(t.id,"Crosshair_X")]}),[t.id]),a=Object(S.useMemo)((function(){return[Lo(t.id,"Crosshair"),Lo(t.id,"Crosshair_Y")]}),[t.id]),i=Object(gi.c)(n),r=Object(gi.c)(a);return Object(ye.c)("g",{children:[Object(ye.b)(Ho,{delta:t.x.delta,axis:"X",show:i.isActive}),Object(ye.b)(Ho,{delta:t.y.delta,axis:"Y",show:r.isActive})]})},Yo=Object(S.memo)((function(e){var t=e.signal,n=e.isVisible,a=useChartData(),i=a.margin,r=a.width,o=a.height,c=a.xDomain,l=a.yDomain,s=get2DXScale({margin:i,width:r,xDomain:c}),u=get2DYScale({margin:i,height:o,yDomain:l}),d=Object(S.useCallback)((function(e){return[e].concat(Lo(e,"X"),Lo(e,"Y"))}),[]),b=useAssignment(t.id),p=Object(gi.c)(d(b.id)),f=Object(gi.d)(),h=Object(S.useState)(!1),m=Object(O.a)(h,2),g=m[0],j=m[1];return Object(S.useEffect)((function(){f.highlight.highlighted.some((function(e){return d(t.id).includes(e)}))||b.isActive?j(!0):j(!1)}),[b.isActive,d,f.highlight.highlighted,t.id]),t?Object(ye.c)("g",{className:"zone-signal",onMouseEnter:function onMouseEnter(){b.onMouseEnter(),p.show()},onMouseLeave:function onMouseLeave(){b.onMouseLeave(),p.hide()},children:[n.signals&&Object(ye.c)("g",{children:[Object(ye.b)("circle",{cx:s(t.x.delta),cy:u(t.y.delta),r:g?6:4,fill:g?"green":"darkgreen"},t.id),Object(ye.b)(Xo,{signal:t})]}),Object(ye.b)("g",{className:"zone-signal-peak",children:n.peaks&&t.peak.map((function(e,n){return Object(ye.b)("circle",{cx:s(e.x),cy:u(e.y),r:2,fill:"black"},"".concat(t.id+n))}))})]}):null})),Zo=Object(y.a)(Bo||(Bo=Object(x.a)(["\n  pointer-events: bounding-box;\n  @-moz-document url-prefix() {\n    pointer-events: fill;\n  }\n  user-select: 'none';\n  -webkit-user-select: none; /* Chrome all / Safari all */\n  -moz-user-select: none; /* Firefox all */\n\n  // // disabled because Resizable component appears now when hovering over it\n  // :hover .range-area {\n  //   height: 100%;\n  //   fill: #ff6f0057;\n  //   cursor: pointer;\n  // }\n\n  .delete-button {\n    visibility: hidden;\n  }\n"]))),Uo=Object(y.a)(Vo||(Vo=Object(x.a)(["\n  pointer-events: bounding-box;\n\n  @-moz-document url-prefix() {\n    pointer-events: fill;\n  }\n  .Integral-area {\n    // height: 100%;\n    fill: #ff6f0057;\n  }\n  .delete-button {\n    visibility: visible;\n    cursor: pointer;\n  }\n"]))),Ko=function Zone(e){var t=e.zoneData,n=e.isVisible,a=t.x,i=t.y,r=t.id,o=t.signal,c=useAssignment(r),l=Object(gi.c)([c.id],gi.b.ZONE),s=useChartData(),u=s.margin,d=s.width,b=s.height,p=s.xDomain,f=s.yDomain,h=get2DXScale({margin:u,width:d,xDomain:p}),m=get2DYScale({margin:u,height:b,yDomain:f}),g=a.from,j=a.to,v=i.from,x=i.to,y=Object(S.useState)(!1),k=Object(O.a)(y,2),C=k[0],D=k[1];return Object(S.useEffect)((function(){D(!function checkZoneKind(e){return e.kind===sr}(t))}),[t]),Object(ye.c)("g",{css:l.isActive||c.isActive?Uo:Zo,onMouseEnter:function onMouseEnter(){c.onMouseEnter(),l.show()},onMouseLeave:function onMouseLeave(){c.onMouseLeave(),l.hide()},children:[n.zones&&Object(ye.b)("g",{transform:"translate(".concat(h(j),",").concat(m(v),")"),children:Object(ye.b)("rect",{x:"0",width:h(g)-h(j),height:m(x)-m(v),className:"Integral-area",fill:"#0000000f",stroke:C?"#343a40":"darkgreen",strokeWidth:C?"0":"1"})}),o.map((function(e,t){return Object(ye.b)(Yo,{signal:e,isVisible:n},"".concat(r+t))}))]},r)};Ko.defaultProps={onDelete:function onDelete(){return null}};var Wo=Ko,Go=Po((function Zones(e){var t=e.zones,n=e.display,a=e.displayerKey,i=Object(S.useState)({zones:!0,signals:!0,peaks:!0}),r=Object(O.a)(i,2),o=r[0],c=r[1];return Object(S.useEffect)((function(){bi.on("onZonesVisibilityChange",(function(e){var t=e.key;c((function(e){return Object(v.a)(Object(v.a)({},e),{},Object(ue.a)({},t,!e[t]))}))}))}),[]),Object(I.jsx)("g",{clipPath:"url(#".concat(a,"clip-chart-2d)"),className:"2D-Zones",children:n.isVisible&&t.values.map((function(e){return Object(I.jsx)("g",{className:"zone",children:Object(I.jsx)(Wo,{zoneData:e,isVisible:o})},e.id)}))})}));function Chart2D(e){var t=e.data,n=useChartData(),a=n.width,i=n.height,r=n.margin,o=n.displayerKey;return Object(S.useMemo)((function(){return Object(I.jsxs)("svg",{viewBox:"0 0 ".concat(a," ").concat(i),width:a,height:i,id:"nmrSVG",children:[Object(I.jsx)("defs",{children:Object(I.jsx)("clipPath",{id:"".concat(o,"clip-chart-2d"),children:Object(I.jsx)("rect",{width:a-r.left-r.right,height:i-r.top-r.bottom,x:r.left,y:r.top})})}),Object(I.jsx)("rect",{width:a-r.left-r.right,height:i-r.top-r.bottom,x:r.left,y:r.top,stroke:"black",strokeWidth:"1",fill:"transparent"}),t&&t[0]&&Object(I.jsx)(So,{data:t[0]}),t&&t[1]&&Object(I.jsx)(ko,{data:t[1]}),Object(I.jsx)(go,{}),Object(I.jsx)(Go,{}),Object(I.jsx)(yo,{axis:"X",show:!0}),Object(I.jsx)(yo,{axis:"Y",show:!0}),Object(I.jsxs)("g",{className:"container",style:{pointerEvents:"none"},children:[Object(I.jsx)(To,{}),Object(I.jsx)(Ao,{})]})]})}),[a,i,o,r.left,r.right,r.top,r.bottom,t])}Chart2D.defaultProps={onDimensionChange:function onDimensionChange(){return null}},Chart2D.propsTypes={onDimensionChange:Gi.a.func.isRequired};var qo,Jo=Chart2D,$o=n(245),Qo=Object(y.a)(qo||(qo=Object(x.a)(["\n  display: flex;\n  flex-firection: row;\n  align-items: center;\n  pointer-events: bounding-box;\n  user-select: 'none';\n  -webkit-user-select: none; /* Chrome all / Safari all */\n  -moz-user-select: none; /* Firefox all */\n  background-color: #f7f7f7;\n  height: 30px;\n  padding: 6px;\n  color: #8d0018;\n  position: absolute;\n  width: 100%;\n  bottom: 0;\n  div {\n    margin: 0px 10px;\n    display: inline-block;\n\n    .label {\n      font-size: 12px;\n      color: #4d4d4d;\n      font-weight: bold;\n    }\n    .value {\n      font-weight: bold;\n      font-size: 14px;\n    }\n    .unit {\n      font-weight: bold;\n      font-size: 10px;\n    }\n  }\n"])));var ec=function FooterBanner_FooterBanner(e){var t=e.layout,n=e.data1D,a=Object(S.useContext)(z),i=Object(S.useContext)(N),r=i.startX,o=i.endX,c=i.startY,l=i.endY,s=i.step,u=useChartData(),d=u.margin,b=u.width,p=u.height,f=u.activeSpectrum,h=u.xDomain,m=u.yDomain,g=u.yDomains,j=u.activeTab,v=u.data,x=u.selectedTool,y=a&&getLayoutID(t,{startX:a.x,startY:a.y}),k=j.split(","),C=useFormatNumberByNucleus(k),D=Object(O.a)(C,2),w=D[0],T=D[1],M=Object(S.useMemo)((function(){if(!n||0===n.length)return get2DXScale({width:b,margin:d,xDomain:h});if(x!==Qa.slicingTool.id)switch(y){case ho.TOP_1D:case ho.CENTER_2D:return get2DXScale({width:b,margin:d,xDomain:h});case ho.LEFT_1D:return get2DYScale({height:p,margin:d,yDomain:m});default:return null}return null}),[n,p,d,x,y,b,h,m]),A=Object(S.useMemo)((function(){if(!n||0===n.length)return get2DYScale({height:p,margin:d,yDomain:m});if(x!==Qa.slicingTool.id)switch(y){case ho.CENTER_2D:return get2DYScale({height:p,margin:d,yDomain:m});case ho.TOP_1D:return n[0]?get1DYScale(g[n[0].id],d.top):null;case ho.LEFT_1D:return n[1]?get1DYScale(g[n[1].id],d.left):null;default:return null}return null}),[n,p,d,x,y,m,g]);if(!f||!a||a.y<10||a.x<10||a.x>b-d.right||a.y>p-d.bottom)return Object(ye.b)("div",{css:Qo});var E=function getRealYValue(e){var t=null;if(y===ho.TOP_1D?t=0:y===ho.LEFT_1D&&(t=1),null!=t&&null!=M){var a=Object(He.i)(n[t].data.x,M.invert(e));return n[t].data.y[a]}return 1},P=function getXValue(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(null!=M)switch(y){case ho.CENTER_2D:case ho.TOP_1D:return M.invert(e||a.x);case ho.LEFT_1D:return M.invert(e||a.y);default:return 0}return 0},F=function getYValue(){if(null!=A)switch(y){case ho.CENTER_2D:case ho.TOP_1D:return A.invert(a.y);case ho.LEFT_1D:return A.invert(a.x);default:return 0}return 0},_=function getLabel(e,t,n){return y===ho.CENTER_2D?Object(ye.c)(S.Fragment,{children:[e," ( ",Object(ye.b)($o.a,{mf:n})," )"]}):t};return Object(ye.c)("div",{css:Qo,children:[Object(ye.c)("div",{children:[Object(ye.c)("span",{className:"label",children:[_("F2","X",k[0])," :"]}),Object(ye.b)("span",{className:"value",children:w(P())}),Object(ye.b)("span",{className:"unit",children:"ppm"})]}),Object(ye.c)("div",{children:[Object(ye.c)("span",{className:"label",children:[_("F1","Y",k[1])," :"]}),Object(ye.b)("span",{className:"value",children:T(F())}),Object(ye.b)("span",{className:"unit",children:"ppm"})]}),Object(ye.c)("div",{children:[Object(ye.b)("span",{className:"label",children:"Intensity :"}),Object(ye.b)("span",{className:"value",children:function getZValue(){if(y===ho.CENTER_2D){var e=v[f.index].data,t=e.maxX,n=e.maxY,a=e.minX,i=e.minY,r=e.z,o=(t-a)/(r[0].length-1),c=(n-i)/(r.length-1),l=Math.floor((P()-a)/o),s=Math.floor((F()-i)/c);return l<0||l>=r[0].length||(s<0||s>=r.length)?0:r[s][l]}return 0}()})]}),"brushing"===s&&Object(ye.c)("div",{children:[Object(ye.b)("span",{className:"label",children:" \u0394ppm :"}),Object(ye.b)("span",{className:"value",children:function getDeltaX(){switch(y){case ho.TOP_1D:return(P(r)-P(o)).toPrecision(6);case ho.LEFT_1D:return(P(c)-P(l)).toPrecision(6);default:return 0}}()})]}),"brushing"===s&&Object(ye.c)("div",{children:[Object(ye.b)("span",{className:"label",children:" ratio :"}),Object(ye.c)("span",{className:"value",children:[function getRation(){switch(y){case ho.TOP_1D:return(E(r)/(E(o)||Number.MIN_VALUE)*100).toFixed(2);case ho.LEFT_1D:return(E(c)/(E(l)||Number.MIN_VALUE)*100).toFixed(2);default:return 0}}(),"%"]})]})]})},tc={cursor:"crosshair",transformOrigin:"bottom right",position:"absolute",top:"-18px",left:"-88px",fontWeight:"bold",pointerEvents:"none",overflow:"visible",userSelect:"none",width:"85px",textAlign:"right"};var nc=function XYLabelPointer(e){var t=e.layout,n=e.data1D,a=Object(S.useContext)(z),i=Object(S.useContext)(N).step,r=useChartData(),o=r.margin,c=r.width,l=r.height,s=r.activeSpectrum,u=r.xDomain,d=r.yDomain,b=r.yDomains,p=r.activeTab,f=a&&getLayoutID(t,{startX:a.x,startY:a.y}),h=useFormatNumberByNucleus(p.split(",")),m=Object(O.a)(h,2),g=m[0],j=m[1],x=Object(S.useMemo)((function(){if(!n||0===n.length)return get2DXScale({width:c,margin:o,xDomain:u});switch(f){case ho.TOP_1D:case ho.CENTER_2D:return get2DXScale({width:c,margin:o,xDomain:u});case ho.LEFT_1D:return get2DYScale({height:l,margin:o,yDomain:d});default:return null}}),[n,l,o,f,c,u,d]),y=Object(S.useMemo)((function(){if(!n||0===n.length)return get2DYScale({height:l,margin:o,yDomain:d});switch(f){case ho.CENTER_2D:return get2DYScale({height:l,margin:o,yDomain:d});case ho.TOP_1D:return n[0]?get1DYScale(b[n[0].id],o.top):null;case ho.LEFT_1D:return n[1]?get1DYScale(b[n[1].id],o.left):null;default:return null}}),[n,l,o,f,d,b]);return!s||"brushing"===i||!a||a.y<o.top||a.x<o.left||a.x>c-o.right||a.y>l-o.bottom?null:Object(I.jsxs)("div",{style:Object(v.a)(Object(v.a)({},tc),{},{transform:"translate(".concat(a.x,"px, ").concat(a.y,"px)")}),children:[Object(I.jsx)("span",{children:j(function getYValue(){switch(f){case ho.CENTER_2D:case ho.TOP_1D:return y.invert(a.y);case ho.LEFT_1D:return y.invert(a.x);default:return 0}}())}),Object(I.jsx)("span",{style:{color:"gray"},children:","}),Object(I.jsx)("span",{style:{color:"red"},children:g(function getXValue(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;switch(f){case ho.CENTER_2D:case ho.TOP_1D:return x.invert(e||a.x);case ho.LEFT_1D:return x.invert(e||a.y);default:return 0}}())})]},"xLabelPointer")},ac=n(46);function generateID(){for(var e="",t=0;t<8;t++)e+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()));return e}function applyFilter(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=!1,i=Object(ac.a)(n);try{for(i.s();!(t=i.n()).done;){var r=t.value,o={name:r.name,label:$a[r.name].name,value:r.options},c=lookupForFilter(e,r.name);if(c){var l=$a[r.name].reduce(c.value,o.value);l.once?(a||(a=!0),null!=l.reduce&&void 0!==l.reduce&&replaceFilter(e,c.id,l.reduce)):addFilter(e,o,!Object.prototype.hasOwnProperty.call(r,"isDeleteAllow")||r.isDeleteAllow)}else addFilter(e,o,!Object.prototype.hasOwnProperty.call(r,"isDeleteAllow")||r.isDeleteAllow)}}catch(b){i.e(b)}finally{i.f()}if(a)1===n.length&&isLastFilter(e,n[0].name)?$a[n[0].name].apply(e,n[0].options):reapplyFilters(e);else{var s,u=Object(ac.a)(n);try{for(u.s();!(s=u.n()).done;){var d=s.value;$a[d.name].apply(e,d.options)}}catch(b){u.e(b)}finally{u.f()}}}function isLastFilter(e,t){var n=e.filters.findIndex((function(e){return e.name===t}));return e.filters.length===n+1}function lookupForFilter(e,t){return e.filters.find((function(e){return e.name===t}))}function reapplyFilters(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=t||e.filters;FiltersManager_enableFilter(e,null,null,n)}function FiltersManager_enableFilter(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;e.filters=e.filters.slice(0),t&&(e.filters=e.filters.map((function(e){return Object(v.a)(Object(v.a)({},e),{},{flag:e.id===t?n:e.flag})}),[])),e.data=Object(v.a)(Object(v.a)({},e.data),e.originalData),e.info=Object(v.a)(Object(v.a)({},e.info),e.originalInfo);var i=a||e.filters;for(var r in i){var o=e.filters[r];if(e.filters[r]=Object(v.a)(Object(v.a)({},e.filters[r]),{},{error:null}),o.flag)try{$a[o.name].apply(e,o.value)}catch(c){e.filters[r]=Object(v.a)(Object(v.a)({},e.filters[r]),{},{error:c.message})}}}function deleteFilter(e,t){for(var n in e.filters=e.filters.slice(0),e.filters=e.filters.filter((function(e){return e.id!==t})),e.data=Object(v.a)(Object(v.a)({},e.data),e.originalData),e.info=Object(v.a)(Object(v.a)({},e.info),e.originalInfo),e.filters){var a=e.filters[n];if(e.filters[n]=Object(v.a)(Object(v.a)({},e.filters[n]),{},{error:null}),a.flag)try{$a[a.name].apply(e,a.value)}catch(i){e.filters[n]=Object(v.a)(Object(v.a)({},e.filters[n]),{},{error:i.message})}}}function addFilter(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=generateID();e.filters=e.filters.slice(0),delete t.isSnapshot,e.filters.push(Object(v.a)(Object(v.a)({},t),{},{id:a,flag:!0,isDeleteAllow:n}))}function replaceFilter(e,t,n){e.filters=e.filters.slice(0);var a=e.filters.findIndex((function(e){return e.id===t}));delete e.filters[a].isSnapshot,e.filters[a]=Object(v.a)(Object(v.a)({},e.filters[a]),{},{value:n})}var ic=["#C10020","#007D34","#803E75","#FF6800","#B32851","#7F180D","#232C16","#A6BDD7","#CEA262","#817066","#FF8E00","#F6768E","#00538A","#FF7A5C","#53377A","#FFB300","#F4C800","#93AA00","#593315","#F13A13"],rc={cosy:{positiveColor:"darkblue",negativeColor:"blue"},roesy:{positiveColor:"#e75480",negativeColor:"yellow"},noesy:{positiveColor:"#e75480",negativeColor:"yellow"},tocsy:{positiveColor:"green",negativeColor:"yellow"},hsqc:{positiveColor:"black",negativeColor:"yellow"},hmbc:{positiveColor:"darkviolet",negativeColor:"yellow"}},oc=function percentToHex(e){var t=Math.max(0,Math.min(100,e)),n=Math.round(t/100*255).toString(16);return 100===t?"":n.padStart(2,"0")},cc=function adjustAlpha(e,t){return e+oc(t)},lc=function getColor(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100,a=ic.filter((function(e){return!t.includes(e)}));if(a.length>0&&!e)return a[0]+oc(n);var i=-.25,r=String("#".concat(Math.random().toString(16).slice(2,8).toUpperCase())).replace(/[^0-9a-f]/gi,"");r.length<6&&(r=r[0]+r[0]+r[1]+r[1]+r[2]+r[2]);var o,c,l="#";for(c=0;c<3;c++)o=parseInt(r.substr(2*c,2),16),o=Math.round(Math.min(Math.max(0,o+o*i),255)).toString(16),l+="00".concat(o).substr(o.length);return l+oc(n)},sc=lc,uc=n(209),dc={minMaxRatio:.05,realTopDetection:!0,maxCriteria:!0,smoothY:!1,nH:100,compile:!0,frequencyCluster:16,clean:!0,keepPeaks:!0,sgOptions:{windowSize:7,polynomial:3}};var bc=function detectSignal(e,t,n,a,i){var r=Object(He.j)(e,{from:n,to:a}),o=r.fromIndex,c=r.toIndex,l={x:e.slice(o,c),y:t.slice(o,c)},s=Object(Be.a)(l,{frequency:i,takeBestPartMultiplet:!0,symmetrizeEachStep:!0});return{multiplicity:s.j.map((function(e){return e.multiplicity})).join(""),kind:"signal",delta:s.chemShift,j:s.j}},pc=[];function initiateDatum1D(e){var t,n={};return n.shiftX=e.shiftX||0,n.id=e.id||generateID(),n.source=Object.assign({jcampURL:null,file:{binary:null,name:"",extension:""}},e.source),n.display=Object.assign(Object(v.a)(Object(v.a)({name:(null===(t=e.display)||void 0===t?void 0:t.name)?e.display.name:generateID(),color:"black"},function Datum1D_getColor(e){if(void 0===e.display||void 0===e.display.color){var t=sc(!1,pc);return pc.push(t),{color:t}}return{}}(e)),{},{isVisible:!0,isPeaksMarkersVisible:!0,isRealSpectrumVisible:!0,isVisibleInDomain:!0}),e.display),n.info=Object.assign({nucleus:"1H",isFid:!1,isComplex:!1,dimension:1},e.info),n.originalInfo=n.info,n.meta=Object.assign({},e.meta),n.data=Object.assign({x:[],re:[],im:[],y:[]},e.data),n.originalData=n.data,n.peaks=Object.assign({values:[],options:{}},e.peaks),n.integrals=Object.assign({values:[],options:{sum:100}},e.integrals),n.filters=Object.assign([],e.filters),n.ranges=Object.assign({values:[],options:{sum:100}},e.ranges),reapplyFilters(n),function preprocessing(e){e.info.isFid&&-1===e.filters.findIndex((function(e){return e.name===$a.digitalFilter.id}))&&applyFilter(e,[{name:$a.digitalFilter.id,options:{digitalFilterValue:e.info.digitalFilter},isDeleteAllow:!1}])}(n),n.data.y=n.data.re,n}function toJSON(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Object(v.a)(Object(v.a)({id:e.id,source:{jcampURL:e.source.jcampURL},display:e.display},!e.source.jcampURL||t?{data:e.originalData,info:e.originalInfo,meta:e.meta}:{}),{},{peaks:e.peaks,integrals:e.integrals,ranges:e.ranges,filters:e.filters})}function lookupPeak(e,t){var n=t.from,a=t.to,i=e.x.findIndex((function(e){return e>=n})),r=e.x.findIndex((function(e){return e>=a}))-1;i>r&&(r=i=r);var o=e.re.slice(i,r);if(o&&o.length>0){var c=Object(no.a)(o),l=o.findIndex((function(e){return e===c}));return{x:e.x[i+l],y:c,xIndex:i+l}}return null}function updateIntegralIntegrals(e){void 0===e.options.sum&&(e.options=Object(v.a)(Object(v.a)({},e.options),{},{sum:100}));e.values=updateRelatives(e.values,e.options.sum,"integral",(function countingCondition(e){return e.kind&&lr.includes(e.kind)}))}function updateRelatives(e,t,n,a){var i=e.reduce((function(e,t){return a&&!0===a(t)?e+=Math.abs(t.absolute):e}),0),r=i>0?t/i:0;return e.map((function(e){return Object(v.a)(Object(v.a)({},e),{},Object(ue.a)({},n,e.absolute*r))}))}function updateIntegralRanges(e){void 0===e.ranges.options.sum&&(e.ranges.options.sum=100);e.ranges.values=updateRelatives(e.ranges.values,e.ranges.options.sum,"integral",(function countingCondition(e){return e.signal&&function checkSignalKinds(e,t){return!e.signal.some((function(e){return void 0===e.kind||!t.includes(e.kind)}))}(e,lr)}))}function mapRanges(e,t){var n=t.data,a=n.x,i=n.re,r=getShiftX(t),o=(a[a.length-1]-a[0])/1e4;return e.reduce((function(e,n){var c,l=Object(ac.a)(t.ranges.values);try{for(l.s();!(c=l.n()).done;){var s=c.value,u=s.from,d=s.to;if(Math.abs(n.from-u)<o&&Math.abs(n.to-d)<o)return e}}catch(f){l.e(f)}finally{l.f()}var b=Object(He.p)({x:a,y:i},{from:n.from,to:n.to,reverse:!0}),p=n.signal.map((function(e){return Object(v.a)({kind:"signal",id:generateID(),originDelta:e.delta-r},e)}));return e.push(Object(v.a)(Object(v.a)({kind:n.signal[0].kind||sr,originFrom:n.from-r,originTo:n.to-r},n),{},{id:generateID(),absolute:b,signal:p})),e}),[])}function detectRanges(e,t){t.impurities={solvent:e.info.solvent};var n=function autoRangesDetection(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Object(He.h)(e.data.re),a=e.data,i=a.re,r=a.x,o=e.info,c=o.originFrequency,l=o.nucleus,s=t.windowFromIndex,u=t.windowToIndex,d=t.peakPicking,b=Object(v.a)(Object(v.a)({},dc),d),p={frequency:c,nucleus:l,noiseLevel:3*n};return void 0!==s&&void 0!==u&&(r=r.slice(s,u),i=i.slice(s,u)),Object(uc.f)({x:r,y:i},{peakPicking:b,ranges:p})}(e,t);e.ranges.values=e.ranges.values.concat(mapRanges(n,e)),updateIntegralRanges(e)}function updateXShift(e){var t=getShiftX(e);!function updatePeaksXShift(e,t){e.peaks.values=e.peaks.values.map((function(e){return Object(v.a)(Object(v.a)({},e),{},{delta:e.originDelta+t})}))}(e,t),function updateRangesXShift(e,t){e.ranges.values=e.ranges.values.map((function(e){return Object(v.a)(Object(v.a)({},e),{},{from:e.originFrom+t,to:e.originTo+t,signal:(null===e||void 0===e?void 0:e.signal)&&e.signal.map((function(e){return Object(v.a)(Object(v.a)({},e),{},{delta:e.originDelta+t})}))})}))}(e,t),function updateIntegralXShift(e,t){e.integrals.values=e.integrals.values.map((function(e){return Object(v.a)(Object(v.a)({},e),{},{from:e.originFrom+t,to:e.originTo+t})}))}(e,t)}function getShiftX(e){var t=(null===e||void 0===e?void 0:e.filters)&&(null===e||void 0===e?void 0:e.filters.find((function(e){return e.name===$a.shiftX.id})));return(null===t||void 0===t?void 0:t.flag)?t.value:0}var fc=n(765),hc={positive:{contourLevels:[0,21],numberOfLayers:10},negative:{contourLevels:[0,21],numberOfLayers:10}},mc=function(){function Processing2D(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:hc,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{positive:10,negative:10};Object(at.a)(this,Processing2D),this.options=t;var a=n.positive,i=n.negative;this.currentLevelPositive=a,this.currentLevelNegative=i;var r=getRange(e.minX,e.maxX,e.z[0].length),o=getRange(e.minY,e.maxY,e.z.length);this.conrec=new fc.a(e.z,{xs:r,ys:o,swapAxes:!1}),this.median=e.noise,this.minMax=e}return Object(it.a)(Processing2D,[{key:"getLevel",value:function getLevel(){return{levelPositive:this.currentLevelPositive,levelNegative:this.currentLevelNegative}}},{key:"setLevel",value:function setLevel(e,t){this.currentLevelPositive=e,this.currentLevelNegative=t}},{key:"setOptions",value:function setOptions(e){var t=e.positive.contourLevels,n=e.negative.contourLevels;this.currentLevelPositive>=t[1]?this.currentLevelPositive=t[1]:this.currentLevelPositive<=t[0]&&(this.currentLevelPositive=t[0]),this.currentLevelNegative>=n[1]?this.currentLevelNegative=n[1]:this.currentLevelNegative<=n[0]&&(this.currentLevelNegative=n[0]),this.options=e}},{key:"wheel",value:function wheel(e){var t=Math.sign(e),n=this.options.positive.contourLevels,a=this.options.negative.contourLevels;(this.currentLevelPositive>n[0]&&-1===t||this.currentLevelPositive<n[1]&&1===t)&&(this.currentLevelPositive+=t),(this.currentLevelNegative>a[0]&&-1===t||this.currentLevelNegative<a[1]&&1===t)&&(this.currentLevelNegative+=t)}},{key:"shiftWheel",value:function shiftWheel(e){var t=Math.sign(e),n=Object(O.a)(this.options.positive.contourLevels,2),a=n[0],i=n[1];if(!(this.currentLevelPositive===a&&-1===t||this.currentLevelPositive>=i&&1===t))return this.currentLevelPositive+=t,[]}},{key:"drawContours",value:function drawContours(){var e=this.currentLevelPositive/2+1,t=this.currentLevelNegative/2+1,n=this.options,a=n.positive.numberOfLayers,i=n.negative.numberOfLayers;return{positive:this.getContours(e,{nbLevels:a}),negative:this.getContours(t,{negative:!0,nbLevels:i})}}},{key:"getContours",value:function getContours(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.negative,a=void 0!==n&&n,i=t.timeout,r=void 0===i?2e3:i,o=t.nbLevels,c=void 0===o?10:o,l=Math.max(Math.abs(this.minMax.maxZ),Math.abs(this.minMax.minZ)),s=getRange(1*this.median*Math.pow(2,e),l,c,2);a&&(s=s.map((function(e){return-e})));var u=[];try{u=this.conrec.drawContour({contourDrawer:"basic",levels:s,timeout:r})}catch(d){throw console.log(d),d}return u}}]),Processing2D}();function getRange(e,t,n,a){if(a){var i=[];i[0]=0;for(var r=1;r<=n;r++)i[r]=i[r-1]+(a-1)/Math.pow(a,r);for(var o=i[n],c=new Array(n),l=0;l<n;l++)c[l]=(t-e)*(1-i[l+1]/o)+e;return c}var s=(t-e)/(n-1);return function Processing2D_range(e,t,n){for(var a=[],i=e;i<t;i+=n)a.push(i);return a}(e,t+s/2,s)}var gc=[];function initiateDatum2D(e){var t,n={};return n.id=e.id||generateID(),n.source=Object.assign({jcamp:null,jcampURL:null,original:[]},e.source),n.display=Object.assign(Object(v.a)(Object(v.a)({name:(null===(t=e.display)||void 0===t?void 0:t.name)?e.display.name:generateID(),positiveColor:"red",negativeColor:"blue"},function Datum2D_getColor(e){if(void 0===e.display||void 0===e.display.negativeColor||void 0===e.display.positiveColor){var t=function get2DColor(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(!rc[e]){var n=lc(!1,t);return{positiveColor:n,negativeColor:cc(n,50)}}return rc[e]}(e.info.experiment,gc);return gc.push(t.positiveColor),t}return{}}(e)),{},{isPositiveVisible:!0,isNegativeVisible:!0,isVisible:!0,contourOptions:hc,dimension:2}),e.display),n.info=Object.assign({nucleus:["1H","1H"],isFid:!1,isComplex:!1},e.info),n.originalInfo=n.info,n.meta=Object.assign({},e.meta),n.data=Object.assign({z:[],minX:0,minY:0,maxX:0,maxY:0},e.data),n.originalData=n.data,n.filters=Object.assign([],e.filters),n.zones=Object.assign({values:[],options:{}},e.zones),n.processingController=new mc(n.data,n.display.contourOptions),reapplyFilters(n),n}function getShift(e){var t={xShift:0,yShift:0};return(null===e||void 0===e?void 0:e.filters)&&(t=e.filters.reduce((function(e,t){return t.name===$a.shift2DX.id&&(e.xShift=(null===t||void 0===t?void 0:t.flag)?t.value:0),t.name===$a.shift2DY.id&&(e.yShift=(null===t||void 0===t?void 0:t.flag)?t.value:0),e}),{xShift:0,yShift:0})),t}function Datum2D_toJSON(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Object(v.a)(Object(v.a)({id:e.id,source:{jcampURL:e.source.jcampURL}},!e.source.jcampURL||t?{data:e.originalData,info:e.originalInfo,meta:e.meta}:{}),{},{zones:e.zones,filters:e.filters,display:e.display})}function updateShift(e){var t=getShift(e);!function updateZonesShift(e,t){var n=t.xShift,a=t.yShift;e.zones.values=e.zones.values.map((function(e){var t;return Object(v.a)(Object(v.a)({},e),{},{signal:null===(t=e.signal)||void 0===t?void 0:t.map((function(e){return Object(v.a)(Object(v.a)({},e),{},{x:Object(v.a)(Object(v.a)({},e.x),{},{delta:e.x.originDelta+n}),y:Object(v.a)(Object(v.a)({},e.y),{},{delta:e.y.originDelta+a})})}))})}))}(e,{xShift:t.xShift,yShift:t.yShift})}function Datum2D_getMissingProjection(e,t){var n=e.info.nucleus.indexOf(t);-1===n&&(n=0);var a={nucleus:e.info.nucleus[n],isFid:!1,isComplex:!1,dimension:1},i=0===n?e.data.minX:e.data.minY,r=0===n?e.data.maxX:e.data.maxY,o=0===n?e.data.z.length:e.data.z[0].length,c=new Float64Array(o);if(1===n)for(var l=0;l<e.data.z.length;l++)for(var s=0;s<e.data.z[0].length;s++)c[l]+=e.data.z[l][s];else for(var u=0;u<e.data.z[0].length;u++)for(var d=0;d<e.data.z.length;d++)c[u]+=e.data.z[d][u];return initiateDatum1D({info:a,data:{x:Object(He.t)({from:i,to:r},o),re:c}})}function getDetectionZones(e,t){var n={};return n=t.selectedZone?function getSubMatrix(e,t){var n=t.fromX,a=t.toX,i=t.fromY,r=t.toY,o=e.data,c=(o.maxX-o.minX)/(o.z[0].length-1),l=(o.maxY-o.minY)/(o.z.length-1),s=Math.floor((n-o.minX)/c),u=Math.floor((i-o.minY)/l),d=Math.floor((a-o.minX)/c),b=Math.floor((r-o.minY)/l);if(s>d){var p=[d,s];s=p[0],d=p[1]}if(u>b){var f=[b,u];u=f[0],b=f[1]}for(var h={z:[],maxX:o.minX+d*c,minX:o.minX+s*c,maxY:o.minY+b*l,minY:o.minY+u*l},m=Number.MIN_SAFE_INTEGER,g=Number.MAX_SAFE_INTEGER,j=d-s+1,v=u;v<b;v++){for(var O=new Float32Array(j),x=s,y=0;y<j;y++)O[y]=o.z[v][x++];var k,C=Object(ac.a)(O);try{for(C.s();!(k=C.n()).done;){var S=k.value;m<S&&(m=S),g>S&&(g=S)}}catch(D){C.e(D)}finally{C.f()}h.z.push(Array.from(O))}return h.minZ=g,h.maxZ=m,h}(e,t.selectedZone):e.data,t.info=e.info,function autoZonesDetection(e,t){var n=t.thresholdFactor,a=t.clean,i=t.maxPercentCutOff,r=t.enhanceSymmetry,o=t.convolutionByFFT,c=t.info,l=c.nucleus,s=c.originFrequency,u=l[0]===l[1];return Object(uc.g)(e,{isHomoNuclear:u,nucleus:l,observeFrequencies:s,thresholdFactor:n,clean:a,maxPercentCutOff:i,enhanceSymmetry:r,convolutionByFFT:o})}(n,t)}function SliceScale_getYScale(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10;return Object(nt.f)(Object(nt.c)(t),[e-n,n])}function HorizontalSliceChart(e){var t=e.margin,n=e.data,a=useChartData(),i=a.width,r=a.margin,o=a.xDomain,c=a.displayerKey,l=r.top,s=Object(S.useMemo)((function(){if(n){var e=n.x,a=n.re,c=get2DXScale({margin:r,width:i,xDomain:o}),s=SliceScale_getYScale(l,a,t),u=Object(He.s)({x:e,y:a},{from:o[0],to:o[1]}),d="M ".concat(c(u.x[0])," ").concat(s(u.y[0])," ");return d+=u.x.slice(1).reduce((function(e,t,n){return e+=" L ".concat(c(t)," ").concat(s(u.y[n+1]))}),"")}return null}),[n,l,t,r,i,o]);return i&&l?Object(I.jsxs)("svg",{viewBox:"0 0 ".concat(i," ").concat(l),width:i,height:l,children:[Object(I.jsx)("defs",{children:Object(I.jsx)("clipPath",{id:"".concat(c,"clip-top"),children:Object(I.jsx)("rect",{width:i-r.left-r.right,height:l,x:r.left,y:"".concat(0)})})}),Object(I.jsxs)("g",{clipPath:"url(#".concat(c,"clip-top)"),children:[Object(I.jsx)("rect",{width:i-r.left-r.right,height:l,x:r.left,y:"".concat(0),fillOpacity:"0"}),Object(I.jsx)("path",{className:"line",stroke:"red",fill:"none",d:s})]})]}):null}HorizontalSliceChart.defaultProps={margin:10};var jc=Object(S.memo)(HorizontalSliceChart);function VerticalSliceChart(e){var t=e.margin,n=e.data,a=useChartData(),i=a.height,r=a.margin,o=a.yDomain,c=a.displayerKey,l=r.left,s=Object(S.useMemo)((function(){if(n){var e=n.x,a=n.re,c=get2DYScale({height:i,margin:r,yDomain:o}),s=SliceScale_getYScale(l,a,t),u=Object(He.s)({x:e,y:a},{from:o[0],to:o[1]}),d=u.x.length-1,b=u.y.length-1,p="M  ".concat(s(u.y[b])," ").concat(c(d)," ");return p+=u.x.slice(0,d).reduceRight((function(e,t,n){return e+=" L  ".concat(s(u.y[n])," ").concat(c(t))}),"")}return null}),[n,l,r,t,i,o]),u=i-r.bottom-r.top;return u&&l?Object(I.jsxs)("svg",{viewBox:"0 0 ".concat(l," ").concat(u+r.top),width:l,height:u+r.top,children:[Object(I.jsx)("defs",{children:Object(I.jsx)("clipPath",{id:"".concat(c,"clip-left"),children:Object(I.jsx)("rect",{width:l,height:u,x:"0",y:r.top})})}),Object(I.jsx)("g",{clipPath:"url(#".concat(c,"clip-left)"),children:Object(I.jsx)("path",{className:"line",stroke:"red",fill:"none",d:s})})]}):null}VerticalSliceChart.defaultProps={margin:10};var vc=Object(S.memo)(VerticalSliceChart);function SlicingView(){var e=useChartData(),t=e.width,n=e.height,a=e.margin,i=e.activeSpectrum,r=e.data,o=e.xDomain,c=e.yDomain,l=function useMouseTracker(){return Object(S.useContext)(z)}(),s=Object(S.useMemo)((function(){if(l&&i.id){var e=l.x,s=l.y,u=get2DXScale({margin:a,width:t,xDomain:o}),d=get2DYScale({margin:a,height:n,yDomain:c}),b=function getSlice(e,t){var n=e.data,a=(n.maxX-n.minX)/(n.z[0].length-1),i=(n.maxY-n.minY)/(n.z.length-1),r=Math.floor((t.x-n.minX)/a),o=Math.floor((t.y-n.minY)/i);if(!(r<0||r>=n.z[0].length)&&!(o<0||o>=n.z.length)){for(var c={nucleus:e.info.nucleus[0],isFid:!1,isComplex:!1,dimension:1},l={x:Object(He.t)({from:e.data.minX,to:e.data.maxX},e.data.z[0].length),re:new Float64Array(e.data.z[0].length)},s=0;s<e.data.z[0].length;s++)l.re[s]+=e.data.z[o][s];for(var u={nucleus:e.info.nucleus[1],isFid:!1,isComplex:!1,dimension:1},d={x:Object(He.t)({from:e.data.minY,to:e.data.maxY},e.data.z.length),re:new Float64Array(e.data.z.length)},b=e.data.z.length-1,p=0;p<e.data.z.length;p++)d.re[p]+=e.data.z[b--][r];return{horizontal:initiateDatum1D({info:c,data:l}),vertical:initiateDatum1D({info:u,data:d})}}}(r[i.index],{x:u.invert(e),y:d.invert(s)});return Object(I.jsxs)("svg",{viewBox:"0 0 ".concat(t," ").concat(n),width:t,height:n,style:{position:"absolute",backgroundColor:"rgba(255,255,255,0.8)"},children:[b&&b.horizontal&&Object(I.jsx)(jc,{data:b.horizontal.data}),b&&b.vertical&&Object(I.jsx)(vc,{data:b.vertical.data})]})}return null}),[l,i.id,i.index,a,t,o,n,c,r]);return l?s:null}SlicingView.defaultProps={onDimensionChange:function onDimensionChange(){return null}},SlicingView.propsTypes={onDimensionChange:Gi.a.func.isRequired};var Oc=SlicingView;var xc,yc=function Viewer2D(e){var t=e.emptyText,n=void 0===t?void 0:t,a=useChartData(),i=a.selectedTool,r=a.isLoading,o=a.data,c=a.margin,l=a.tabActiveSpectrum,s=a.activeTab,u=useDispatch(),d=Object(S.useMemo)((function(){return s.split(",").reduce((function(e,t){if(l[t]&&l[t].id){var n=l[t].id,a=o.find((function(e){return e.id===n&&!e.info.isFid}));a&&e.push(a)}else e.push(null);return e}),[])}),[s,o,l]),b=function get2DDimensionLayout(e){var t=e.width,n=e.height,a=e.margin;return{CENTER_2D:{startX:a.left,startY:a.top,endX:t-a.right,endY:n-a.bottom},TOP_1D:{startX:a.left,startY:0,endX:t-a.right,endY:a.top},LEFT_1D:{startX:0,startY:a.top,endX:a.left,endY:n-a.bottom}}}(a),p=Object(S.useCallback)((function(e){if(getLayoutID(b,e))if(e.altKey)i;else if(e.shiftKey)switch(i){case Qa.zone2D.id:u(Object(v.a)({type:zn},e))}else if(null!=i)return u(Object(v.a)(Object(v.a)({type:rn},e),{},{trackID:getLayoutID(b,e)}))}),[i,u,b]),f=Object(S.useCallback)((function(e){var t=e.x,n=e.y,a=getLayoutID(b,{startX:t,startY:n});a&&u({type:zt,trackID:a})}),[b,u]),h=function handleZoom(e){var t=e.x,n=e.y,a=getLayoutID(b,{startX:t,startY:n});a&&u("CENTER_2D"===a?Object(v.a)({type:Ln},e):Object(v.a)(Object(v.a)({type:Kt},e),{},{trackID:a}))},m=Object(S.useCallback)((function(e){e.x,e.y}),[i]),g=Object(M.a)((function(){return Object(I.jsxs)(S.Fragment,{children:[Object(I.jsx)(ze,{isLoading:r,emptyText:n}),o&&o.length>0&&Object(I.jsx)(BrushTracker,{onBrush:p,onDoubleClick:f,onClick:m,onZoom:h,style:{width:"100%",height:"100%",margin:"auto",position:"relative",overflow:"hidden"},children:Object(I.jsxs)(MouseTracker,{style:{width:"100%",height:"100%",position:"absolute"},children:[i&&i===Qa.slicingTool.id&&Object(I.jsx)(Oc,{}),Object(I.jsx)(li,{}),d&&Object(I.jsx)(nc,{data1D:d,layout:b}),Object(I.jsx)(ri,{brushType:ii,dimensionBorder:b.CENTER_2D}),Object(I.jsxs)(I.Fragment,{children:[d&&d[0]&&Object(I.jsx)(ri,{brushType:ni,dimensionBorder:b.TOP_1D,height:c.top}),d&&d[1]&&Object(I.jsx)(ri,{brushType:ai,dimensionBorder:b.LEFT_1D,width:c.left})]}),d&&Object(I.jsx)(ec,{data1D:d,layout:b}),Object(I.jsx)(Jo,{data:d})]})})]})}),[]),j=Object(O.a)(g,2),x=j[0],y=j[1],k=y.width,C=y.height,D=Object(S.useState)(),w=Object(O.a)(D,2),T=w[0],E=w[1];return Object(A.a)((function(){return E({width:k,height:C})}),400,[k,C]),Object(S.useEffect)((function(){T&&isFinite(T.width)&&isFinite(T.height)&&u(Object(v.a)({type:It},T))}),[u,T]),x},kc=n(47),Cc=n(90),Sc={container:{margin:"25px"},header:{backgroundColor:"#ffffff",padding:"20px",borderRadius:"10px",fontSize:"30px",textAlign:"center"},body:{whiteSpace:"pre-wrap",backgroundColor:"white",padding:"20px",borderRadius:"10px",color:"red"}},Dc=function(e){Object(kc.a)(ErrorBoundary,e);var t=Object(Cc.a)(ErrorBoundary);function ErrorBoundary(e){var n;return Object(at.a)(this,ErrorBoundary),(n=t.call(this,e)).state={error:null,errorInfo:null},n}return Object(it.a)(ErrorBoundary,[{key:"componentDidCatch",value:function componentDidCatch(e,t){this.setState({error:e,errorInfo:t})}},{key:"render",value:function render(){return this.state.errorInfo?Object(I.jsxs)("div",{style:Sc.container,children:[Object(I.jsx)("p",{style:Sc.header,children:"Something went wrong."}),Object(I.jsxs)("details",{style:Sc.body,children:[this.state.error,Object(I.jsx)("br",{}),this.state.errorInfo.componentStack]})]}):this.props.children}}]),ErrorBoundary}(S.Component),wc=Object(S.createContext)(),Tc=wc.Provider,Mc=function useAlert(){return Object(S.useContext)(wc)},Ac=Object(y.a)(xc||(xc=Object(x.a)(["\n  width: 40px;\n  height: 40px;\n  margin: 0 auto;\n  :after {\n    content: ' ';\n    display: block;\n    width: 30px;\n    height: 30px;\n    margin-top: 10px;\n    border-radius: 50%;\n    border: 4px solid;\n    border-color: #fff transparent #fff transparent;\n    animation: ring-animation 1s linear infinite;\n  }\n  @keyframes ring-animation {\n    0% {\n      transform: rotate(0deg);\n    }\n    100% {\n      transform: rotate(360deg);\n    }\n  }\n"]))),Ec=function ProgressIndicator(){return Object(ye.b)("div",{css:Ac})};function Alert_Provider_Provider(e){var t=e.children,n=e.wrapperRef,a=e.offset,i=e.position,r=e.timeout,o=e.type,c=e.transition,l=Object(fe.a)(e,["children","wrapperRef","offset","position","timeout","type","transition"]),s=Object(S.useRef)(null),u=Object(S.useRef)(null),d=Object(S.useRef)([]),b=Object(S.useState)([]),p=Object(O.a)(b,2),f=p[0],h=p[1];Object(S.useEffect)((function(){s.current=document.createElement("div");var e=s.current,t=d.current;return n&&n.appendChild(e),function(){e&&n&&(t.forEach(clearTimeout),n.removeChild(e))}}),[n]);var m=Object(S.useCallback)((function(e){h((function(t){var n=t.length,a=t.filter((function(t){return t.id!==e.id}));return n>a.length&&e.options.onClose&&e.options.onClose(),a}))}),[]),g=Object(S.useCallback)((function(){u.current.alerts.forEach(m)}),[m]),j=Object(S.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Math.random().toString(36).substr(2,9),a=Object(v.a)({position:t.position||i,timeout:r,type:o,backgroundColor:"black",color:"white"},t),c={id:n,message:e,options:a,close:function(){return m(c)}};if(c.options.timeout){var l=setTimeout((function(){m(c),d.current.splice(d.current.indexOf(l),1)}),c.options.timeout);d.current.push(l)}return h((function(e){return e.concat(c)})),c.options.onOpen&&c.options.onOpen(),c}),[i,m,r,o]),x=Object(S.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.type=J,t=Object(v.a)({backgroundColor:"#28ba62",color:"white"},t),j(e,t)}),[j]),y=Object(S.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.type=$,t=Object(v.a)({backgroundColor:"#cf3c4f",color:"white"},t),j(e,t)}),[j]),k=Object(S.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.type=q,t.color="#28ba62",j(e,t)}),[j]),C=Object(S.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Process in progress",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.type=Q,t.timeout=0,t.backgroundColor="#232323",new Promise((function(n){var a=j(e,t);setTimeout((function(){n((function(){return m(a)}))}),500)}))}),[m,j]),D=Object(S.useCallback)((function(e){m(e)}),[m]),w=Vr(f,(function(e){return e.options.position})),T=Object(S.useMemo)((function(){return n?n.getBoundingClientRect():{top:0,left:0,width:window.innerWidth,height:window.innerHeight}}),[n]);return Object(I.jsxs)(Tc,{value:{alerts:f,show:j,remove:m,removeAll:g,success:x,error:y,info:k,showLoading:C},children:[t,s.current&&Object(de.createPortal)(Object(I.jsx)(S.Fragment,{children:Object.keys(G).map((function(e){var t=G[e];return Object(I.jsx)(pe.a,Object(v.a)(Object(v.a)({appear:!0,options:{position:t,zIndex:999999},component:xe,containerStyle:T},l),{},{children:w[t]?w[t].map((function(e){return Object(I.jsx)(ve,{type:c,children:Object(I.jsxs)("div",{style:{margin:a,padding:"25px",borderRadius:"10px",pointerEvents:"all",backgroundColor:e.options.backgroundColor,color:e.options.color,minHeight:"60px",position:"relative"},children:[Object(I.jsx)("button",{style:{position:"absolute",right:"5px",top:"5px",border:"none",backgroundColor:"transparent",color:"white"},type:"button",onClick:function onClick(){return D(e)},children:Object(I.jsx)(Xe.G,{})}),Object(I.jsx)("span",{children:e.message}),e.options.type===Q&&Object(I.jsx)(Ec,{})]},e.id)},e.id)})):null}),t)}))}),s.current)]})}Alert_Provider_Provider.defaultProps={offset:"5px",position:G.BOTTOM_CENTER,transition:ee,wrapperRef:null,timeout:3e3};var Pc=Alert_Provider_Provider,Fc=n(760);function fromBruker(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.dependentVariables,a=e.info,i=e.meta,r=e.source,o=getData(n[0].components);o.im&&(a.isComplex=!0),Array.isArray(a.nucleus)&&(a.nucleus=a.nucleus[0]);var c=initiateDatum1D(Object(v.a)(Object(v.a)({},t),{},{source:r,info:a,meta:i,data:o}));return c}function fromCSD(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.dimensions[0],a=e.dependentVariables,i=n.quantityName,r=n.count,o=n.increment.magnitude,c=n.originOffset.magnitude,l=n.coordinatesOffset.magnitude,s=a[0].components[0],u=[],d=[],b=s.length-1;b>0;b-=2)u.push(s[b-1]),d.push(s[b]);var p,f,h={};switch(i){case"frequency":f=0+l/c*1e6,p=o/c*1e6,h.re=u,h.im=d;break;case"time":f=c,p=o,h.re=u.reverse(),h.im=d.reverse().map((function(e){return-e}))}for(var m=[],g=0;g<r;g++)m.push(f+g*p);h.x=m;var j=initiateDatum1D(Object(v.a)(Object(v.a)({},t),{},{data:h}));return j}function getData(e){var t=e[0]&&e[0].data&&e[0].data.x?e[0].data.x:[],n=e[0]&&e[0].data&&e[0].data.y?e[0].data.y:[],a=e[1]&&e[1].data&&e[1].data.y?e[1].data.y:null;return t[0]>t[1]&&(t.reverse(),n.reverse(),a&&a.reverse()),{x:t,re:n,im:a}}function Data2DManager_fromBruker(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.dependentVariables,a=e.meta,i=e.source,r=n[0].components,o=initiateDatum2D(Object(v.a)(Object(v.a)({},t),{},{source:i,meta:a,data:r}));return o}function Data2DManager_fromCSD(e){var t=initiateDatum2D({});return t}var _c=n(392),Ic=n(200),Nc=n.n(Ic);function initMolecule(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={};t.key=e.key||generateID(),t.molfile=e.molfile||"";var n=new Ic.Molecule.fromMolfile(t.molfile),a=n.getMolecularFormula();t.mf=a.formula,t.em=a.absoluteWeight,t.mw=a.relativeWeight,t.svg=n.toSVG(50,50);var i=new _c.MF(t.mf);return t.atoms=i.getInfo().atoms,t}function Molecule_toJSON(e){return{molfile:e.molfile}}function addJcampFromURL(e,t,n){return fetch(t).then((function(e){return e.arrayBuffer()})).then((function(t){addJcamp(e,t,n)}))}function addJcamp(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=Object(Fc.b)(t,{noContour:!0,xy:!0,keepRecordsRegExp:/.*/,profiling:!0});if(0!==a.length){var i,r=Object(ac.a)(a);try{for(r.s();!(i=r.n()).done;){var o=i.value,c=o.dependentVariables;c[0].components&&(c[0].components.length>0||c[0].components.z.length)&&addJcampSS(e,o,n)}}catch(l){r.e(l)}finally{r.f()}}}function addJcampSS(e,t,n){var a=t.info.dimension;1===a&&e.push(function fromParsedJcamp(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.dependentVariables,a=e.info,i=e.meta,r=getData(n[0].components);return Array.isArray(a.nucleus)&&(a.nucleus=a.nucleus[0]),initiateDatum1D(Object(v.a)(Object(v.a)({},t),{},{info:a,meta:i,data:r}))}(t,n)),2===a&&e.push(function Data2DManager_fromParsedJcamp(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.dependentVariables,a=e.info,i=e.meta,r=n[0].components;return initiateDatum2D(Object(v.a)(Object(v.a)({},t),{},{info:a,meta:i,data:r}))}(t,n))}function addData(e,t){var n=t.info.dimension;1===n&&e.push(initiateDatum1D(t)),2===n&&e.push(initiateDatum2D(t))}function addJDF(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=Object(Fc.c)(t,{}),i=a.description,r=i.metadata;delete i.metadata,i.acquisitionMode=0,i.experiment=1===i.dimension?"1d":"2d",i.type="NMR SPECTRUM",i.nucleus=i.nucleus[0],i.numberOfPoints=i.numberOfPoints[0],i.acquisitionTime=i.acquisitionTime[0],i.baseFrequency=i.baseFrequency[0],i.frequencyOffset=i.frequencyOffset[0],i.spectralWidthClipped=a.application.spectralWidthClipped,1===i.dimension&&a.dependentVariables&&e.push(fromCSD(a,Object(v.a)(Object(v.a)({},n),{},{display:Object(v.a)({},n.display),info:i,meta:r}))),2===i.dimension&&i.isFt&&e.push(Data2DManager_fromCSD(a,Object(v.a)(Object(v.a)({},n),{},{display:Object(v.a)({},n.display),info:i})))}function fromJSON(){return _fromJSON.apply(this,arguments)}function _fromJSON(){return(_fromJSON=Object(Br.a)(Hr.a.mark((function _callee(){var e,t,n,a,i,r,o=arguments;return Hr.a.wrap((function _callee$(c){for(;;)switch(c.prev=c.next){case 0:e=o.length>0&&void 0!==o[0]?o[0]:[],t=[],n=[],a=Object(ac.a)(e);try{for(a.s();!(i=a.n()).done;)null!=(r=i.value).source.jcampURL?n.push(addJcampFromURL(t,r.source.jcampURL,r)):addData(t,r)}catch(l){a.e(l)}finally{a.f()}return c.next=7,Promise.all(n);case 7:return c.abrupt("return",t);case 8:case"end":return c.stop()}}),_callee)})))).apply(this,arguments)}function addBruker(e,t){return _addBruker.apply(this,arguments)}function _addBruker(){return(_addBruker=Object(Br.a)(Hr.a.mark((function _callee2(e,t){var n,a,i,r,o,c,l,s;return Hr.a.wrap((function _callee2$(u){for(;;)switch(u.prev=u.next){case 0:return n=[],u.next=3,Object(Fc.a)(t,{xy:!0,noContours:!0,keepOriginal:!0});case 3:a=u.sent,i=a,r=Object(ac.a)(i);try{for(r.s();!(o=r.n()).done;)c=o.value,l=c.info,s=c.dependentVariables,1===l.dimension?s[0].components&&n.push(fromBruker(c,Object(v.a)(Object(v.a)({},e),{},{display:Object(v.a)({},e.display)}))):2===l.dimension&&l.isFt&&n.push(Data2DManager_fromBruker(c,Object(v.a)(Object(v.a)({},e),{},{info:l,display:Object(v.a)({},e.display)})))}catch(d){r.e(d)}finally{r.f()}return u.abrupt("return",n);case 8:case"end":return u.stop()}}),_callee2)})))).apply(this,arguments)}function addJcamps(e){var t,n=[],a=Object(ac.a)(e);try{for(a.s();!(t=a.n()).done;){var i=t.value;addJcamp(n,i.binary,{display:{name:i.name},source:{jcampURL:i.jcampURL?i.jcampURL:null,file:i}})}}catch(r){a.e(r)}finally{a.f()}return n}function SpectraManager_toJSON(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e||{data:[],molecules:[],preferences:{},correlations:{},multipleAnalysis:{},exclusionZones:{}},a=n.data,i=n.molecules,r=n.preferences,o=n.correlations,c=n.multipleAnalysis,l=n.exclusionZones,s=a.map((function(e){return 1===e.info.dimension?toJSON(e,t):Datum2D_toJSON(e,t)})),u=i.map((function(e){return Molecule_toJSON(e)}));return{spectra:s,molecules:u,preferences:r,correlations:o,multipleAnalysis:c,exclusionZones:l}}var Rc=n(190),Lc=Object(S.forwardRef)((function CheckBox(e,t){var n=e.name,a=void 0===n?"":n,i=e.checked,r=e.onChange,o=void 0===r?function(){return null}:r,c=e.disabled,l=Object(S.useState)(i),s=Object(O.a)(l,2),u=s[0],d=s[1],b=Object(S.useCallback)((function(e){d(!u),o(e)}),[u,o]);return Object(I.jsx)("input",{ref:t,type:"checkbox",name:a,id:a,onChange:b,defaultChecked:i,disabled:c})}));Lc.defaultProps={onChange:function onChange(){return null},name:"",disabled:!1};var zc=Lc;function FormikCheckBox(e){var t=e.label,n=e.name,a=e.onChange,i=e.className,r=e.reverse,o=Object(fe.a)(e,["label","name","onChange","className","reverse"]),c=Object(Rc.f)(),l=c.values,s=c.setFieldValue,u=r?!C()(l,n):C()(l,n),d=Object(S.useCallback)((function(e){e.persist(),a(e),s(n,r?u:!u)}),[n,a,r,s,u]);return Object(I.jsxs)("div",{className:"".concat(i," check-").concat(u),children:[Object(I.jsx)("label",{htmlFor:n,className:"checkbox-lable",children:t}),Object(I.jsx)(zc,Object(v.a)({id:n,name:n,checked:u,onChange:d,className:"checkbox"},o))]})}FormikCheckBox.defaultProps={className:"",onChange:function onChange(){return null},reverse:!1};var Hc=FormikCheckBox,Bc=Object(S.forwardRef)((function FormikForm(e,t){var n=e.initialValues,a=e.onSubmit,i=e.validationSchema,r=e.children;return Object(I.jsx)(Rc.d,{innerRef:t,initialValues:n,onSubmit:a,validationSchema:i,children:function children(){return Object(I.jsx)(I.Fragment,{children:r})}})}));Bc.defaultProps={initialValues:{},onSubmit:function onSubmit(){return null},validationSchema:null};var Vc=Bc,Xc={lineHeight:2,userSelect:"none"},Yc={height:"100%",width:"100px",borderRadius:"5px",border:"0.55px solid #c7c7c7",margin:"0px 5px 0px 5px",textAlign:"center"},Zc=Object(S.forwardRef)((function Input(e,t){var n=e.label,a=e.value,i=e.name,r=e.style,o=e.onChange,c=e.onKeyDown,l=e.checkValue,s=e.type,u=e.enableAutoSelect,d=e.className,b=e.format,p=Object(fe.a)(e,["label","value","name","style","onChange","onKeyDown","checkValue","type","enableAutoSelect","className","format"]),f=Object(S.useState)(a),h=Object(O.a)(f,2),m=h[0],g=h[1];Object(S.useEffect)((function(){g(a)}),[a]),Object(S.useEffect)((function(){u&&t.current.select()}),[u,t]);var j=Object(S.useCallback)((function(e){return b()("number"===s?"-"===String(e).trim()?Number(0):Number(e):e)}),[b,s]),x=Object(S.useCallback)((function(e){e.persist(),e.stopPropagation(),e.preventDefault();var t=e.target.value;if(function check(e){if("number"===s){return!(""!==e.trim()&&!/^(?:-?[0-9]*|[0-9]\d*)(?:\.\d{0,20})?$/.test(e))}return!0}(t)&&l(t)){var n=b();g(n(t)),o(Object(v.a)(Object(v.a)({},e),{},{target:{name:e.target.name,value:j(t)}}))}}),[l,b,j,o,s]),y=Object(S.useCallback)((function(e){e.persist(),c(Object(v.a)(Object(v.a)({},e),{},{target:{name:e.target.name,value:j(m)}}))}),[j,c,m]),k=Object(S.useCallback)((function(e){e.stopPropagation()}),[]);return Object(I.jsxs)("div",{style:Object(v.a)({display:"flex",flexDirection:"row",alignItems:"center"},r&&r.container?r.container:{}),children:[n&&Object(I.jsx)("span",{style:Object(v.a)(Object(v.a)({},Xc),r&&r.label?r.label:{}),className:"label",children:n}),Object(I.jsx)("input",Object(v.a)(Object(v.a)({},p),{},{ref:t,name:i,style:Object(v.a)(Object(v.a)({},Yc),r&&r.input?r.input:{}),type:"text",value:m,onChange:x,onKeyDown:y,onKeyPress:k,onDoubleClick:function onDoubleClick(e){return e.stopPropagation()},className:"input ".concat(d)}))]})}));Zc.defaultProps={style:{label:{},input:{},container:{}},value:"",onChange:function onChange(){return null},checkValue:function checkValue(){return!0},onKeyDown:function onKeyDown(){return null},type:"text",className:"",enableAutoSelect:!1,format:function format(){return function(e){return e}}};var Uc=Zc;function FormikInput(e){var t=e.label,n=e.name,a=e.style,i=e.onChange,r=e.checkValue,o=e.type,c=e.className,l=e.value,s=e.format,u=Object(fe.a)(e,["label","name","style","onChange","checkValue","type","className","value","format"]),d=Object(Rc.f)(),b=d.values,p=d.handleChange,f=d.setFieldValue,h=d.errors,m=d.touched,g=Object(S.useCallback)((function(e){i(e),p(e)}),[p,i]);Object(S.useEffect)((function(){l&&f(n,l)}),[n,f,l]);var j=Object(S.useMemo)((function(){return C()(h,n)&&C()(m,n)}),[h,n,m]);return Object(I.jsx)(Uc,Object(v.a)({label:t,name:n,value:l||C()(b,n),onChange:g,type:o,style:Object(v.a)(Object(v.a)({},a),{},{input:Object(v.a)(Object(v.a)({},a.input),j&&{borderColor:"red"})}),checkValue:r,className:c,format:s},u))}FormikInput.defaultProps={style:{label:{},input:{}},onChange:function onChange(){return null},checkValue:function checkValue(){return!0},type:"text",className:"",value:null,format:function format(){return function(e){return e}}};var Kc,Wc,Gc=FormikInput,qc=Object(y.a)(Kc||(Kc=Object(x.a)(['\n  overflow: auto;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n\n  .header {\n    text-align: center;\n    padding: 10px 0 10px 0px;\n    margin: 0px;\n    color: #005d9e;\n    place-items: normal;\n    text-transform: none;\n    background-color: #fcfcfc;\n  }\n\n  .tab-content {\n    width: 100%;\n  }\n  .row {\n    display: flex;\n  }\n\n  .inner-content {\n    padding: 15px 30px;\n    width: 100%;\n    overflow: auto;\n  }\n\n  button:focus {\n    outline: none;\n  }\n  button:hover {\n    color: #007bff;\n  }\n  .save-button:hover {\n    background-color: #ffffff;\n  }\n  .save-button {\n    border: none;\n    padding: 0 15px;\n    background-color: #ffffff5e;\n    border-radius: 5px;\n    height: 25px;\n  }\n\n  .footer-container {\n    display: flex;\n    align-items: flex-end;\n    justify-content: flex-end;\n    background: rgb(242, 242, 242);\n    background: -moz-linear-gradient(\n      0deg,\n      rgba(242, 242, 242, 1) 0%,\n      rgba(245, 245, 245, 1) 37%,\n      rgba(255, 255, 255, 1) 90%\n    );\n    background: -webkit-linear-gradient(\n      0deg,\n      rgba(242, 242, 242, 1) 0%,\n      rgba(245, 245, 245, 1) 37%,\n      rgba(255, 255, 255, 1) 90%\n    );\n    background: linear-gradient(\n      0deg,\n      rgba(242, 242, 242, 1) 0%,\n      rgba(245, 245, 245, 1) 37%,\n      rgba(255, 255, 255, 1) 90%\n    );\n    filter: progid:DXImageTransform.Microsoft.gradient(startColorstr="#f2f2f2",endColorstr="#ffffff",GradientType=1);\n    padding: 6px 15px;\n    height: 55px;\n  }\n\n  .section-header {\n    font-size: 13px;\n    color: #2ca8ff;\n    margin-bottom: 10px;\n    border-bottom: 0.55px solid #f9f9f9;\n    padding: 6px 2px;\n  }\n\n  .custom-label {\n    font-size: 12px;\n    font-weight: bold;\n    margin-right: 10px;\n    width: 120px;\n  }\n  .margin-10 {\n    margin: 10px 0;\n  }\n\n  .input {\n    font-size: 14px;\n    border-radius: 5px;\n    border: 1px solid #cccccc;\n    padding: 5px;\n    width: 100px;\n    margin-right: 10px;\n    height: initial !important;\n  }\n\n  .close-bt {\n    border: none;\n    color: red;\n    background-color: transparent;\n    outline: none;\n    position: absolute;\n    right: 10px;\n    top: 2px;\n    width: 30px;\n    height: 30px;\n  }\n']))),Jc=Object(y.a)(Wc||(Wc=Object(x.a)(["\n  .row {\n    align-items: center;\n  }\n\n  .inner-content {\n    flex: 1;\n  }\n\n  .custom-label {\n    width: 80px;\n  }\n\n  .name {\n    width: 100% !important;\n    text-align: left !important;\n  }\n"]))),$c={name:"",compressed:!1,pretty:!1,includeData:!1};var Qc=function SaveAsModal(e){var t=e.onClose,n=e.onSave,a=e.name,i=Object(S.useRef)(),r=Object(S.useCallback)((function(){i.current.submitForm()}),[]),o=Object(S.useCallback)((function(e){n(e),t()}),[t,n]);return Object(ye.c)("div",{css:[qc,Jc],children:[Object(ye.c)("div",{className:"header handle",children:[Object(ye.b)("span",{children:"Save as ... "}),Object(ye.b)($e,{onClick:t,className:"close-bt"})]}),Object(ye.b)("div",{className:"inner-content",children:Object(ye.c)(Vc,{ref:i,initialValues:Object(v.a)(Object(v.a)({},$c),{},{name:a}),onSubmit:o,children:[Object(ye.c)("div",{className:"row margin-10",children:[Object(ye.b)("span",{className:"custom-label",children:"Name"}),Object(ye.b)(Gc,{label:"",name:"name",className:"name",style:{container:{width:"100%"}}})]}),Object(ye.c)("div",{className:"row margin-10",children:[Object(ye.b)("span",{className:"custom-label",children:"Compressed"}),Object(ye.b)(Hc,{name:"compressed"})]}),Object(ye.c)("div",{className:"row margin-10",children:[Object(ye.b)("span",{className:"custom-label",children:"Pretty Format"}),Object(ye.b)(Hc,{name:"pretty"})]}),Object(ye.c)("div",{className:"row margin-10",children:[Object(ye.b)("span",{className:"custom-label",children:"Include Data"}),Object(ye.b)(Hc,{name:"includeData"})]})]})}),Object(ye.c)("div",{className:"footer-container",children:[Object(ye.b)("button",{type:"button",onClick:r,className:"save-button",children:"Save"}),Object(ye.b)("button",{type:"button",onClick:t,className:"save-button",children:"Close"})]})]})},el=n(213),tl=n(212),nl=n.n(tl),al=n(244),il=new nl.a;function addSource(e){return _addSource.apply(this,arguments)}function _addSource(){return(_addSource=Object(Br.a)(Hr.a.mark((function _callee3(e){var t,n,a,i,r,o,c,l,s=arguments;return Hr.a.wrap((function _callee3$(u){for(;;)switch(u.prev=u.next){case 0:t=s.length>1&&void 0!==s[1]?s[1]:{},n=t.spectrum,a=t.source,i=a.file,r=void 0===i?{}:i,o=a.jcampURL,c="",l="".concat(n.info.dimension,"d"),u.t0=r.extension,u.next="jdx"===u.t0||"dx"===u.t0?8:"zip"===u.t0?11:15;break;case 8:return c+="\nJcamp_Location=file:jcamp/".concat(l,"/").concat(n.display.name,"\\"),e.file("jcamp/".concat(l,"/").concat(n.display.name),r.binary),u.abrupt("break",20);case 11:if(r.binary){u.next=13;break}return u.abrupt("return");case 13:return il.loadAsync(r.binary).then(function(){var t=Object(Br.a)(Hr.a.mark((function _callee(t){var n;return Hr.a.wrap((function _callee$(a){for(;;)switch(a.prev=a.next){case 0:a.t0=Hr.a.keys(t.files);case 1:if((a.t1=a.t0()).done){a.next=13;break}if(!(n=a.t1.value).endsWith("/")){a.next=5;break}return a.abrupt("continue",1);case 5:return a.t2=e,a.t3="Bruker/".concat(n),a.next=9,t.file(n).async("arraybuffer");case 9:a.t4=a.sent,a.t2.file.call(a.t2,a.t3,a.t4),a.next=1;break;case 13:c+="\nSpectrum_Location=file:Bruker/".concat(getPathFromZip(t),"\\");case 14:case"end":return a.stop()}}),_callee)})));return function(e){return t.apply(this,arguments)}}()),u.abrupt("break",20);case 15:if(o){u.next=17;break}return u.abrupt("break",20);case 17:return u.next=19,fetch(o).then(function(){var t=Object(Br.a)(Hr.a.mark((function _callee2(t){var n,a;return Hr.a.wrap((function _callee2$(i){for(;;)switch(i.prev=i.next){case 0:if(t){i.next=2;break}return i.abrupt("return");case 2:return n=o.split("/").slice(-1),a="jcamp/".concat(l,"/").concat(n),c+="\nJcamp_Location=file:".concat(a,"\\"),i.t0=e,i.t1=a,i.next=9,t.arrayBuffer();case 9:i.t2=i.sent,i.t0.file.call(i.t0,i.t1,i.t2);case 11:case"end":return i.stop()}}),_callee2)})));return function(e){return t.apply(this,arguments)}}());case 19:u.sent;case 20:return u.abrupt("return",c);case 21:case"end":return u.stop()}}),_callee3)})))).apply(this,arguments)}function getPathFromZip(e){var t=e.filter((function(e){return!e.match("__MACOSX")&&!!(e.endsWith("fid")||e.endsWith("1r")||e.endsWith("ser")||e.endsWith("2rr"))})),n=t.findIndex((function(e){return e.name.endsWith("1r")||e.name.endsWith("2rr")}));return n>-1?t[n].name:t[0].name}function getToFix(e){Array.isArray(e)||(e=[e]);var t,n=[],a=Object(ac.a)(e);try{for(a.s();!(t=a.n()).done;){var i=t.value;n.push(chooseDecimal(i))}}catch(r){a.e(r)}finally{a.f()}return n}function chooseDecimal(e){switch(e.toUpperCase()){case"1H":return 2;case"13C":default:return 1}}function get1DSignals(e,t){return _get1DSignals.apply(this,arguments)}function _get1DSignals(){return(_get1DSignals=Object(Br.a)(Hr.a.mark((function _callee(e,t){var n,a,i,r,o,c,l,s,u=arguments;return Hr.a.wrap((function _callee$(d){for(;;)switch(d.prev=d.next){case 0:n=u.length>2&&void 0!==u[2]?u[2]:{},a=n.prefix,i=n.labels,r="",o=[],c=Object(ac.a)(e),d.prev=5,s=Hr.a.mark((function _loop(){var e,n,c,s,u,d,b,p,f,h,m,g,j,v,O,x,y,k,C,S,D,w,T,M;return Hr.a.wrap((function _loop$(A){for(;;)switch(A.prev=A.next){case 0:if(e=l.value,!((n=e.info).isFid||n.dimension>1)){A.next=4;break}return A.abrupt("return","continue");case 4:return c="",s=e.ranges.values||[],u=e.info.nucleus,d=1,b="",o.forEach((function(e){e===u&&d++})),o.push(u),d>1&&(b="#".concat(d)),c+="".concat(a,"1D_").concat(u.toUpperCase()).concat(b,">"),e.info.baseFrequency&&(c+="\nLarmor=".concat(Number(e.info.baseFrequency).toFixed(2),"\\")),p=e.source,f=void 0===p?{}:p,A.t0=c,A.next=18,addSource(t,{spectrum:e,tag:c,source:f});case 18:c=A.t0+=A.sent,h=getToFix(u)[0],m=Object(ac.a)(s),A.prev=21,m.s();case 23:if((g=m.n()).done){A.next=76;break}j=g.value,v=j.signal,O=Object(ac.a)(v),A.prev=27,O.s();case 29:if((x=O.n()).done){A.next=65;break}if(y=x.value,(k=y.multiplicity)&&"m"!==k||"1H"!==u){A.next=36;break}c+="\n".concat(Number(j.from).toFixed(h),"-").concat(Number(j.to).toFixed(h)),A.next=41;break;case 36:if(!y.delta){A.next=40;break}c+="\n".concat(Number(y.delta).toFixed(h)),A.next=41;break;case 40:return A.abrupt("continue",63);case 41:if(C="",y.diaID&&y.diaID.length>0&&(y.diaID.forEach((function(e,t,n){var a=", ";t===n.length-1&&(a="");var r=i.byDiaID[e].label||e;C+="".concat(r).concat(a)})),c+=", L=".concat(C)),"1H"!==u){A.next=63;break}if(y.multiplicity&&(c+=", S=".concat(y.multiplicity)),S=y.j,!Array.isArray(S)||!S.length){A.next=62;break}D=", J=",w=0;case 49:if(!(w<S.length)){A.next=62;break}if(c+="".concat(D).concat(Number(S[w].coupling).toFixed(3)),!S[w].diaID){A.next=58;break}if(T=S[w].diaID,Array.isArray(T)||(T=[T]),T.length){A.next=56;break}return A.abrupt("continue",59);case 56:M=i.byDiaID[T[0]].label||String(T[0]),c+="(".concat(M,")");case 58:D=", ";case 59:w++,A.next=49;break;case 62:j.integral?c+=", E=".concat(Number(j.integral).toFixed(h)):j.pubIntegral?c+=", E=".concat(j.putIntegral.toFixed(h)):void 0!==j.signal[0].nbAtoms&&(c+=", E=".concat(j.signal[0].nbAtoms));case 63:A.next=29;break;case 65:A.next=70;break;case 67:A.prev=67,A.t1=A.catch(27),O.e(A.t1);case 70:return A.prev=70,O.f(),A.finish(70);case 73:v.length&&(c+="\\");case 74:A.next=23;break;case 76:A.next=81;break;case 78:A.prev=78,A.t2=A.catch(21),m.e(A.t2);case 81:return A.prev=81,m.f(),A.finish(81);case 84:(c+="\n").match("\\\n")&&(r+=c);case 86:case"end":return A.stop()}}),_loop,null,[[21,78,81,84],[27,67,70,73]])})),c.s();case 8:if((l=c.n()).done){d.next=15;break}return d.delegateYield(s(),"t0",10);case 10:if("continue"!==d.t0){d.next=13;break}return d.abrupt("continue",13);case 13:d.next=8;break;case 15:d.next=20;break;case 17:d.prev=17,d.t1=d.catch(5),c.e(d.t1);case 20:return d.prev=20,c.f(),d.finish(20);case 23:return d.abrupt("return",r);case 24:case"end":return d.stop()}}),_callee,null,[[5,17,20,23]])})))).apply(this,arguments)}function getCouplingObserved(e){switch(e.toLowerCase()){case"hsqc":case"cosy":return"1J";case"hmbc":default:return"NJ"}}var rl=Array.isArray;function get2DSignals(e,t){return _get2DSignals.apply(this,arguments)}function _get2DSignals(){return(_get2DSignals=Object(Br.a)(Hr.a.mark((function _callee(e,t){var n,a,i,r,o,c,l,s,u,d,b,p,f,h,m,g,j,v,O,x,y,k,C,S,D,w,T,M,A,E,P=arguments;return Hr.a.wrap((function _callee$(F){for(;;)switch(F.prev=F.next){case 0:n=P.length>2&&void 0!==P[2]?P[2]:{},a=n.labels.byDiaID,i="",r=[],o="\n> <NMREDATA_2D_",c=Object(ac.a)(e),F.prev=6,c.s();case 8:if((l=c.n()).done){F.next=32;break}if(!((s=l.value).info.dimension<2)){F.next=12;break}return F.abrupt("continue",30);case 12:return u="",d=s.info,b=s.source,p=d.nucleus,f=d.experiment,h=d.pulseSequence,r.push(p),m=getCouplingObserved(f),p&&(u+="".concat(o).concat(p[1],"_").concat(m,"_").concat(p[0],">")),g=getToFix(p),F.t0=u,F.next=22,addSource(t,{spectrum:s,tag:u,source:b});case 22:u=F.t0+=F.sent,f&&(u+="\nCorType=".concat(f," \\")),h&&(u+="\nPulseProgram=".concat(h," \\")),s.info.baseFrequency&&(u+="\nLarmor=".concat(Number(s.info.baseFrequency[0]).toFixed(2),"\\")),j=s.zones.values||[],v=Object(ac.a)(j);try{for(v.s();!(O=v.n()).done;){x=O.value,y=x.signal,k=Object(ac.a)(y);try{for(k.s();!(C=k.n()).done;)S=C.value,D=S.x,w=S.y,T=S.peak,M=getAssignment(D,a,g[0]),A=getAssignment(w,a,g[1]),E=Math.max.apply(Math,Object(Li.a)(T.map((function(e){return e.z})))),u+="\n".concat(M,"/").concat(A,", I=").concat(E.toFixed(2),"\\")}catch(_){k.e(_)}finally{k.f()}}}catch(_){v.e(_)}finally{v.f()}i+=u;case 30:F.next=8;break;case 32:F.next=37;break;case 34:F.prev=34,F.t1=F.catch(6),c.e(F.t1);case 37:return F.prev=37,c.f(),F.finish(37);case 40:return F.abrupt("return",i.length>0?"".concat(i,"\n"):"");case 41:case"end":return F.stop()}}),_callee,null,[[6,34,37,40]])})))).apply(this,arguments)}function getAssignment(e,t,n){var a=e.diaID,i=e.delta;if(a){if(rl(a)||(a=[a]),a.length<1)return Number(i).toFixed(n);var r=a.map((function(e){return t[e].label})).join(",");return a.length>1?"(".concat(r,")"):r}return Number(i).toFixed(n)}function flat2DSignals(e){for(var t=[],n=0;n<e.length;n++){var a=e[n],i=a.x,r=a.y;t.push(i,r)}return t}function getLabels(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=n.groupedDiaIDs,i=n.molecule,r=Object(al.g)(i,{toLabel:"H",maxLength:1}),o={},c={},l=Object(ac.a)(e);try{for(l.s();!(t=l.n()).done;){var s,u=t.value,d=u.info,b=d.dimension,p=d.nucleus,f=getToFix(p),h=b>1?["zones",flat2DSignals]:["ranges",function(e){return e||[]}],m=Object(O.a)(h,2),g=m[0],j=m[1],v=u[g].values||[],x=Object(ac.a)(v);try{for(x.s();!(s=x.n()).done;)for(var y=s.value,k=j(y.signal),C=0;C<k.length;C++){var S,D=k[C].diaID||[],w=Object(ac.a)(D);try{var T=function _loop(){var e=S.value,t=Number(k[C].delta).toFixed(f[C%b]),n=a.find((function(t){return t.oclID===e})),l={atom:n.atoms[0],molecule:i,connections:r,atomLabel:n.atomLabel};o[e]={atoms:n.atoms.map((function(e){return e+1})),shift:t,label:createLabel(l)};var s,u=Object(ac.a)(n.atoms);try{for(u.s();!(s=u.n()).done;){var d=s.value;l.atom=d,c[d]={shift:t,diaID:e,label:createLabel(l)}}}catch(p){u.e(p)}finally{u.f()}};for(w.s();!(S=w.n()).done;)T()}catch(M){w.e(M)}finally{w.f()}}}catch(M){x.e(M)}finally{x.f()}}}catch(M){l.e(M)}finally{l.f()}return{byAssignNumber:c,byDiaID:o}}function createLabel(e){var t=e.atom,n=e.molecule,a=e.atomLabel,i=e.connections,r="";if("C"!==a){var o=i[t].find((function(e){return e&&e.length>1})),c="".concat(a).concat(o[0]+1),l="".concat(n.getAtomLabel(o[1])).concat(o[1]+1);r="".concat(c).concat(l)}else r="".concat(a).concat(t+1);return r}var ol={solvent:"SOLVENT",temperature:"TEMPERATURE",assignment:"ASSIGNMENT",j:"J",signals:"SIGNALS",id:"ID"};function nmriumToNmredata(e){return _nmriumToNmredata.apply(this,arguments)}function _nmriumToNmredata(){return(_nmriumToNmredata=Object(Br.a)(Hr.a.mark((function _callee(e){var t,n,a,i,r,o,c,l,s=arguments;return Hr.a.wrap((function _callee$(u){for(;;)switch(u.prev=u.next){case 0:t=s.length>1&&void 0!==s[1]?s[1]:{},a=(n=e||{data:[],molecules:[]}).data,i=n.molecules,r=new nl.a,o=Object(ac.a)(i),u.prev=4,o.s();case 6:if((c=o.n()).done){u.next=12;break}return l=c.value,u.next=10,addNMReDATA(a,r,Object(v.a)(Object(v.a)({},t),{},{molecule:l}));case 10:u.next=6;break;case 12:u.next=17;break;case 14:u.prev=14,u.t0=u.catch(4),o.e(u.t0);case 17:return u.prev=17,o.f(),u.finish(17);case 20:if(i.length){u.next=23;break}return u.next=23,addNMReDATA(a,r,t);case 23:return u.abrupt("return",r);case 24:case"end":return u.stop()}}),_callee,null,[[4,14,17,20]])})))).apply(this,arguments)}function addNMReDATA(e,t){return _addNMReDATA.apply(this,arguments)}function _addNMReDATA(){return(_addNMReDATA=Object(Br.a)(Hr.a.mark((function _callee2(e,t){var n,a,i,r,o,c,l,s,u,d,b=arguments;return Hr.a.wrap((function _callee2$(p){for(;;)switch(p.prev=p.next){case 0:return n=b.length>2&&void 0!==b[2]?b[2]:{},a=n.id,i=n.prefix,r=void 0===i?"\n> <NMREDATA_":i,o=n.filename,c=void 0===o?"nmredata":o,l=n.molecule,s="",l&&(l=Ic.Molecule.fromMolfile(l.molfile),s+=l.toMolfile(),l.addImplicitHydrogens(),u=Object(al.f)(l)),d=l?getLabels(e,{groupedDiaIDs:u,molecule:l}):{},s+="".concat(r,"VERSION>\n1.1\\\n"),s+=putTag(e,"temperature",{prefix:r}),s+=putTag(e,"solvent",{prefix:r}),a&&(s+="".concat(r+ol.id,">\nid\\\n")),s+=formatAssignments(d.byDiaID,{prefix:r}),p.t0=s,p.next=13,get1DSignals(e,t,{prefix:r,labels:d});case 13:return s=p.t0+=p.sent,p.t1=s,p.next=17,get2DSignals(e,t,{prefix:r,labels:d});case 17:s=p.t1+=p.sent,s+="\n$$$$\n",t.file("".concat(c,".sdf"),s);case 20:case"end":return p.stop()}}),_callee2)})))).apply(this,arguments)}function formatAssignments(e,t){if(!e)return"";var n=t.prefix,a="".concat(n+ol.assignment,">\n");for(var i in e){var r=e[i].atoms;a+="".concat(e[i].label,", ").concat(e[i].shift);var o,c=Object(ac.a)(r);try{for(c.s();!(o=c.n()).done;){var l=o.value;a+=", ".concat(l)}}catch(s){c.e(s)}finally{c.f()}a+="\\\n"}return a}function putTag(e,t){var n,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=a.prefix,r="",o=Object(ac.a)(e);try{for(o.s();!(n=o.n()).done;){var c=n.value;if(c.info[t]){r+="".concat(i+ol[t],">\n").concat(String(c.info[t]),"\\\n");break}}}catch(l){o.e(l)}finally{o.f()}return r}function useExport(){var e=ie(),t=Mc(),n=useChartData(),a=Object(S.useCallback)(Object(Br.a)(Hr.a.mark((function _callee(){var e;return Hr.a.wrap((function _callee$(a){for(;;)switch(a.prev=a.next){case 0:if(!(n.data.length>0)){a.next=5;break}return a.next=3,t.showLoading("Exporting as numrium process in progress");case 3:e=a.sent,setTimeout((function(){Object(el.b)("nmrSVG"),e(),t.success("Image copied to clipboard")}),0);case 5:case"end":return a.stop()}}),_callee)}))),[t,n]),i=Object(S.useCallback)(Object(Br.a)(Hr.a.mark((function _callee3(){var e,a,i,r=arguments;return Hr.a.wrap((function _callee3$(o){for(;;)switch(o.prev=o.next){case 0:if(e=r.length>0&&void 0!==r[0]?r[0]:0,a=!(r.length>1&&void 0!==r[1])||r[1],!(n.data.length>0)){o.next=7;break}return o.next=5,t.showLoading("Exporting as numrium process in progress");case 5:i=o.sent,setTimeout(Object(Br.a)(Hr.a.mark((function _callee2(){var t,r,o,c;return Hr.a.wrap((function _callee2$(l){for(;;)switch(l.prev=l.next){case 0:return o=null===(t=n.data[0])||void 0===t||null===(r=t.display)||void 0===r?void 0:r.name,c=SpectraManager_toJSON(n),l.next=4,Object(el.d)(c,o,e,a);case 4:i();case 5:case"end":return l.stop()}}),_callee2)}))),0);case 7:case"end":return o.stop()}}),_callee3)}))),[t,n]),r=Object(S.useCallback)(Object(Br.a)(Hr.a.mark((function _callee5(){var e;return Hr.a.wrap((function _callee5$(a){for(;;)switch(a.prev=a.next){case 0:if(!(n.data.length>0)){a.next=5;break}return a.next=3,t.showLoading("Exporting as NMRE process in progress");case 3:e=a.sent,setTimeout(Object(Br.a)(Hr.a.mark((function _callee4(){var t,a,i,r;return Hr.a.wrap((function _callee4$(o){for(;;)switch(o.prev=o.next){case 0:return i=null===(t=n.data[0])||void 0===t||null===(a=t.display)||void 0===a?void 0:a.name,o.next=3,nmriumToNmredata(n);case 3:r=o.sent,Object(el.f)(r,i),e();case 6:case"end":return o.stop()}}),_callee4)}))),0);case 5:case"end":return a.stop()}}),_callee5)}))),[t,n]),o=Object(S.useCallback)(Object(Br.a)(Hr.a.mark((function _callee6(){var e;return Hr.a.wrap((function _callee6$(a){for(;;)switch(a.prev=a.next){case 0:if(!(n.data.length>0)){a.next=5;break}return a.next=3,t.showLoading("Exporting as SVG process in progress");case 3:e=a.sent,setTimeout((function(){var t,a,i=null===(t=n.data[0])||void 0===t||null===(a=t.display)||void 0===a?void 0:a.name;Object(el.h)(i,"nmrSVG"),e()}),0);case 5:case"end":return a.stop()}}),_callee6)}))),[t,n.data]),c=Object(S.useCallback)(Object(Br.a)(Hr.a.mark((function _callee7(){var e;return Hr.a.wrap((function _callee7$(a){for(;;)switch(a.prev=a.next){case 0:if(!(n.data.length>0)){a.next=5;break}return a.next=3,t.showLoading("Exporting as PNG process in progress");case 3:e=a.sent,setTimeout((function(){var t,a,i=null===(t=n.data[0])||void 0===t||null===(a=t.display)||void 0===a?void 0:a.name;Object(el.g)(i,"nmrSVG"),e()}),0);case 5:case"end":return a.stop()}}),_callee7)}))),[t,n.data]),l=Object(S.useCallback)(function(){var e=Object(Br.a)(Hr.a.mark((function _callee9(e){var a,i,r,o,c;return Hr.a.wrap((function _callee9$(l){for(;;)switch(l.prev=l.next){case 0:return a=e.name,i=e.pretty,r=e.compressed,o=e.includeData,l.next=3,t.showLoading("Exporting as ".concat(a,".numrium process in progress"));case 3:c=l.sent,setTimeout(Object(Br.a)(Hr.a.mark((function _callee8(){var e,t;return Hr.a.wrap((function _callee8$(l){for(;;)switch(l.prev=l.next){case 0:return e=SpectraManager_toJSON(n,o),t=i?2:0,l.next=4,Object(el.d)(e,a,t,r);case 4:c();case 5:case"end":return l.stop()}}),_callee8)}))),0);case 5:case"end":return l.stop()}}),_callee9)})));return function(t){return e.apply(this,arguments)}}(),[t,n]);return{saveToClipboardHandler:a,saveAsJSONHandler:i,saveAsNMREHandler:r,saveAsSVGHandler:o,saveAsPNGHandler:c,saveAsHandler:Object(S.useCallback)(Object(Br.a)(Hr.a.mark((function _callee10(){var t,a,i;return Hr.a.wrap((function _callee10$(r){for(;;)switch(r.prev=r.next){case 0:n.data.length>0&&(i=null===(t=n.data[0])||void 0===t||null===(a=t.display)||void 0===a?void 0:a.name,e.show(Object(I.jsx)(Qc,{name:i,onSave:l}),{isBackgroundBlur:!1,position:G.TOP_CENTER,width:400,height:280}));case 1:case"end":return r.stop()}}),_callee10)}))),[e,l,n.data])}}function useToolsFunctions(){var e=useDispatch(),t=Mc(),n=Object(S.useState)(!1),a=Object(O.a)(n,2),i=a[0],r=a[1],o=Object(S.useRef)({clicks:[]});return{handleChangeOption:Object(S.useCallback)((function(n){[Qa.peakPicking.id,Qa.integral.id,Qa.zone2D.id].includes(n)&&t.show("Press Shift + Left Mouse button to select zone for integral and peak picking"),e({type:Nt,selectedTool:n})}),[t,e]),handleFullZoomOut:Object(S.useCallback)((function(){0===o.current.clicks.length&&e({type:zt,zoomType:ft});var t=P()((function(){o.current.clicks=[]}),500);o.current.clicks.push(t),t(),o.current.clicks.length>1&&(_()(o.current.clicks,(function(e){return e.cancel()})),o.current.clicks=[],e({type:zt}))}),[e,o]),changeDisplayViewModeHandler:Object(S.useCallback)((function(){e({type:nn})}),[e]),changeSpectrumViewHandler:Object(S.useCallback)((function(){e({type:Ut,isRealSpectrumVisible:!i}),r(!i)}),[e,i]),alignSpectrumsVerticallyHandler:Object(S.useCallback)((function(){e({type:Dn})}),[e]),isRealSpectrumShown:i}}var cl=function KeysListenerTracker(){var e=useChartData(),t=e.keysPreferences,n=e.displayerMode,a=e.overDisplayer,i=e.data,r=useDispatch(),o=Mc(),c=useLoader(),l=useToolsFunctions(),s=l.handleChangeOption,u=l.handleFullZoomOut,d=l.alignSpectrumsVerticallyHandler,b=l.changeDisplayViewModeHandler,p=useExport(),f=p.saveToClipboardHandler,h=p.saveAsJSONHandler,m=p.saveAsHandler,g=Object(gi.d)().highlight,j=useAssignmentData(),v=Object(S.useMemo)((function(){return n===jo.DM_1D&&i&&i.length>0}),[i,n]),x=Object(S.useMemo)((function(){return n===jo.DM_2D&&i&&i.length>0}),[i,n]),y=Object(S.useCallback)((function(e,t){switch(e){case gi.b.INTEGRAL:r({type:Zt,integralID:t.activeKey});break;case gi.b.PEAK:r({type:Mt,data:{id:t.activeKey}});break;case gi.b.RANGE:r({type:yn,payload:{id:t.activeKey,assignmentData:j}});break;case gi.b.ZONE:r({type:Hn,payload:{id:t.activeKey,assignmentData:j}});break;case gi.b.EXCLUSION_ZONE:r({type:ba,payload:{id:t.activeKey}})}}),[j,r]),k=Object(S.useCallback)((function(e,n){i&&i.length>0&&n>=1&&n<=9&&(e.shiftKey?(r({type:Fn,keyCode:n}),o.show("Configuration Reset, press '".concat(n,"' again to reload it."))):checkModifierKeyActivated(e)||(t&&t[n]?r({type:_n,keyCode:n}):(r({type:Fn,keyCode:n}),o.show("Configuration saved, press '".concat(n,"' again to reload it.")))))}),[o,i,r,t]),C=Object(S.useCallback)((function(e){if(!e.shiftKey&&!e.metaKey)switch(e.key){case"f":u();break;case"z":case"Escape":s(Qa.zoom.id);break;case"r":v&&s(Qa.rangesPicking.id);break;case"b":v&&s(Qa.baseLineCorrection.id);break;case"p":v&&s(Qa.peakPicking.id);break;case"i":var t=x?Qa.zone2D.id:v?Qa.integral.id:"";s(t);break;case"a":v&&s(Qa.phaseCorrection.id)}if(!e.shiftKey&&!e.metaKey&&!e.ctrlKey)switch(e.key){case"c":v&&d();break;case"s":v&&b()}if(!e.shiftKey&&(e.metaKey||e.ctrlKey))switch(e.key){case"c":f(),e.preventDefault();break;case"s":h(),e.preventDefault();break;case"o":c.open(),e.preventDefault()}if(e.shiftKey&&(e.metaKey||e.ctrlKey))switch(e.key){case"S":m(),e.preventDefault()}}),[d,v,x,b,s,u,c,m,h,f]),D=Object(S.useCallback)((function(e){var t=Object(O.a)(g.highlighted,1)[0],n=g.type;if(!["input","textarea"].includes(e.target.localName)&&a){var i=Number(e.code.substr(e.code.length-1))||0;i>0?k(e,i):["Backspace"].includes(e.key)&&n?y(n,{activeKey:t}):C(e)}}),[y,g,k,a,C]);return Object(S.useEffect)((function(){return document.addEventListener("keydown",D,!0),function(){return document.removeEventListener("keydown",D,!0)}}),[D]),null},ll="";var sl=function getHelpList(){return{zoomIn:{text:"Zoom Tool",filePath:"".concat(ll,"/help/zoom-and-scale")},peakPicking:{text:"peak picking tool",filePath:"".concat(ll,"/help/peaks")},integralPicking:{text:"integral tool",filePath:"".concat(ll,"/help/integrations")},fullScreen:{text:"Full Screen mode",filePath:"".concat(ll,"/help/general")},loadSpectrum:{text:"load spectrums",filePath:"".concat(ll,"/help/loading-a-spectrum")}}},ul=n(206);function ButtonToolTip(e){var t=e.children,n=e.style,a=e.onClick,i=e.popupTitle,r=e.popupPlacement,o=Object(fe.a)(e,["children","style","onClick","popupTitle","popupPlacement"]);return Object(I.jsx)(We,{title:i,popupPlacement:r,children:Object(I.jsx)("button",Object(v.a)(Object(v.a)({style:n,type:"button",onClick:a},o),{},{children:t}))})}ButtonToolTip.defaultProps={popupTitle:"",popupPlacement:"right",style:{},onClick:function onClick(){return null},disabled:!1};var dl=ButtonToolTip;var bl,pl=function Logo(e){var t=e.width,n=void 0===t?100:t,a=e.height,i=void 0===a?100:a;return Object(I.jsxs)("svg",{style:{width:n,height:i},xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 752.34 221.73",children:[Object(I.jsx)("path",{fill:"#ea580c",fillRule:"evenodd",d:"M.64,31.7A31.67,31.67,0,0,1,54.72,9.29l0,0A31.66,31.66,0,0,1,64,31.7V190a13.39,13.39,0,0,0,26.77,0V54a31.7,31.7,0,0,1,31.7-31.7V40.58A13.38,13.38,0,0,0,109.13,54V190a31.71,31.71,0,0,1-63.41,0V31.7a13.29,13.29,0,0,0-3.88-9.46l0,0A13.41,13.41,0,0,0,19,31.7V164.82H.64Z"}),Object(I.jsx)("path",{fill:"#2b143e",fillRule:"evenodd",d:"M154.21,54v68.17a13.34,13.34,0,0,0,3.89,9.47h0A13.39,13.39,0,0,0,181,122.14V99.32h-.06a31.63,31.63,0,0,1,9.29-22.38l0,0a31.65,31.65,0,0,1,44.8,0l0,0a31.58,31.58,0,0,1,9.3,22.39V118H226V99.32a13.3,13.3,0,0,0-3.89-9.46h0a13.44,13.44,0,0,0-18.93,0l0,0a13.3,13.3,0,0,0-3.83,8.19v24.09a31.7,31.7,0,0,1-54.11,22.42v0a31.66,31.66,0,0,1-9.3-22.4V54Z"}),Object(I.jsx)("path",{fill:"#2b143e",fillRule:"evenodd",d:"M729.19,96.34c-8.65,0-14.26,3.17-17.67,8-3.41-5.12-8.78-8-16-8-8.16,0-13.52,3.17-16.32,7.31v-5.6H661V159h18.28V124.62c0-7.19,3.41-11.46,9.5-11.46,5.85,0,8.78,3.9,8.78,10V159h18.27V124.62c0-7.19,3.42-11.46,9.51-11.46,5.85,0,8.77,3.9,8.77,10V159h18.28V121.57C752.34,106.33,743.2,96.34,729.19,96.34Z"}),Object(I.jsx)("path",{fill:"#2b143e",fillRule:"evenodd",d:"M629.26,98.05v33.26c0,8.66-4.63,12.56-11.33,12.56-5.85,0-10.6-3.54-10.6-11.09V98.05H589.05v37.41c0,16.45,10.48,25.22,22.79,25.22,8,0,14.13-2.92,17.42-7.43V159h18.28V98.05Z"}),Object(I.jsx)("rect",{fill:"#2b143e",x:"558.22",y:"98.05",width:"18.28",height:"60.93"}),Object(I.jsx)("path",{fill:"#2b143e",fillRule:"evenodd",d:"M567.36,92.68a11,11,0,1,0-11-11A11.08,11.08,0,0,0,567.36,92.68Z"}),Object(I.jsx)("path",{fill:"#ea580c",fillRule:"evenodd",d:"M478.77,159H498V116.57L525.66,159H549.2l-22.3-34.75c5.45-2.13,8.12-4.14,11.48-8.86a31.07,31.07,0,0,0,6.07-18.26V94.62c0-10.61-3.45-15.93-9.28-21.78S520.75,63.09,510,63.09H478.71l.06,95.89Zm33.1-50.27h-6.46v-.06H498V82.19h10.87c4.67,0,9.44,1.38,11.94,3.81a12.84,12.84,0,0,1,3.81,9.2C524.58,102.52,518.92,108.71,511.87,108.71Z"}),Object(I.jsx)("polygon",{fill:"#ea580c",fillRule:"evenodd",points:"372.91 60.8 372.91 158.98 392.16 158.98 392.16 119.23 419.91 157.41 447.61 119.23 447.61 158.98 466.87 158.98 466.87 60.8 419.91 125.22 372.91 60.8"}),Object(I.jsx)("polygon",{fill:"#ea580c",fillRule:"evenodd",points:"283.89 61.04 283.89 159.1 303.14 159.1 303.14 105.85 361.01 160.93 361.01 62.83 341.67 62.83 341.67 116.08 283.89 61.04"})]})};function _getData(){return(_getData=Object(Br.a)(Hr.a.mark((function _callee(e){var t;return Hr.a.wrap((function _callee$(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,fetch(e);case 3:return t=n.sent,n.abrupt("return",t.json());case 7:return n.prev=7,n.t0=n.catch(0),n.abrupt("return",null);case 10:case"end":return n.stop()}}),_callee,null,[[0,7]])})))).apply(this,arguments)}var fl=Object(y.a)(bl||(bl=Object(x.a)(["\n  display: flex;\n  flex-direction: column;\n  user-select:\n  button:focus {\n    outline: none;\n  }\n  .header {\n    height: 34px;\n    border-bottom: 1px solid #f0f0f0;\n    display: flex;\n    padding: 5px;\n\n    span {\n      color: #464646;\n      font-size: 15px;\n      flex: 1;\n      user-select: none;\n\n    }\n\n    button {\n      background-color: transparent;\n      border: none;\n      svg {\n        height: 16px;\n      }\n    }\n  }\n  .container {\n    width: 100%;\n    height: 100%;\n    padding: 20px;\n  }\n\n  .center-container {\n    width: 100%;\n    height: 100%;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n  }\n  ul {\n    list-style-type: disc;\n    margin-left:20px;\n    }\n  span,li{\n    user-select: text;\n  }\n  span.title {\n    font-weight: bold;\n    color: #ea580c;\n  }\n  span.content {\n    color: #2b143e;\n    font-size: 14px;\n    text-align: left;\n  }\n\n  img {\n    width: 100px;\n  }\n\n  a {\n    color: #969696;\n  }\n\n  a:hover,\n  a:focus {\n    color: #00bcd4;\n  }\n\n  .separator {\n    border-bottom: 1px solid gray;\n    width: 15px;\n    height: 1px;\n    margin: 10px 0px;\n  }\n"])));function AboutUsModal(e){var t=e.onClose,n=Object(S.useState)(),a=Object(O.a)(n,2),i=a[0],r=a[1];return Object(S.useEffect)((function(){(function AboutUsModal_getData(e){return _getData.apply(this,arguments)})("".concat("https://api.github.com/repos/cheminfo/nmrium","/tags")).then((function(e){r(e)}))}),[]),Object(ye.c)("div",{css:fl,children:[Object(ye.c)("div",{className:"header handle",children:[Object(ye.b)("span",{children:"About Us"}),Object(ye.b)($e,{onClick:t})]}),Object(ye.c)("div",{className:"container",children:[Object(ye.c)("div",{className:"center-container",children:[Object(ye.b)(pl,{width:160,height:50}),Object(ye.c)("span",{children:[" ",i&&i[0].name]}),Object(ye.b)("span",{className:"separator"}),Object(ye.b)("a",{href:"https://git.nmrium.org",target:"_blank",rel:"noreferrer",children:"GitHub ( https://git.nmrium.org )"})]}),Object(ye.c)("div",{className:"center-container",children:[Object(ye.b)("span",{className:"separator"}),Object(ye.b)("span",{className:"title",children:"About Us"}),Object(ye.b)("span",{className:"separator"})]}),Object(ye.b)("span",{className:"content",children:"This project is developed by Zakodium S\xe0rl (Switzerland), the University of Cologne (Germany), Johannes Gutenberg University Mainz (Germany) and Universidad del Valle (Colombia)."}),Object(ye.c)("div",{className:"center-container",children:[Object(ye.b)("span",{className:"separator"}),Object(ye.b)("span",{className:"title",children:"Funding is provided by"}),Object(ye.b)("span",{className:"separator"})]}),Object(ye.b)("div",{className:"content",children:Object(ye.c)("ul",{children:[Object(ye.b)("li",{children:"IDNMR grant, which part of the Scientific Library Services and Information Systems (LIS) initiative of the DFG."}),Object(ye.b)("li",{children:"Zakodium S\xe0rl (Switzerland)."}),Object(ye.b)("li",{children:"Universidad del Valle (Cali, Colombia)."})]})})]})]})}AboutUsModal.defaultProps={onClose:function onClose(){return null}};var hl,ml=AboutUsModal,gl=Object(y.a)(hl||(hl=Object(x.a)(["\n  width: 100%;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  .manual-header {\n    .title {\n      text-align: center;\n      padding: 10px 0 10px 0px;\n      margin: 0px;\n      color: #000000;\n      place-items: normal;\n      text-transform: none;\n      background-color: #fafafa;\n    }\n\n    .close-bt {\n      border: none;\n      color: red;\n      background-color: transparent;\n      outline: none;\n      position: absolute;\n      right: 15px;\n      top: 10px;\n    }\n  }\n  .main-content {\n    width: 100%;\n    height: 100%;\n    border: none;\n    padding-left: 5px;\n  }\n\n  .inner-container {\n    padding: 5px;\n    width: 100%;\n    height: 100%;\n  }\n\n  .tab-content {\n    width: 100%;\n  }\n"])));var jl,vl=function UserManualModal(e){var t=e.onClose,n=sl().loadSpectrum.filePath;return Object(ye.c)("div",{css:gl,children:[Object(ye.c)("div",{className:"manual-header handle",children:[Object(ye.b)("h6",{className:"title",children:"User Manual"}),Object(ye.b)($e,{onClick:t,className:"close-bt"})]}),Object(ye.b)("div",{className:"main-content",children:Object(ye.b)("div",{className:"inner-container",children:Object(ye.b)("iframe",{title:"General User Manual ",src:n,frameBorder:"0",scrolling:"auto",style:{width:"100%",height:"100%"}})})})]})},Ol=Object(y.a)(jl||(jl=Object(x.a)(["\n  border-radius: 50%;\n  width: 16px;\n  height: 16px;\n  background-color: transparent;\n  border: none;\n  padding: 0;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n\n  :hover {\n    background-color: red;\n    border-radius: 50%;\n\n    .icon {\n      color: white;\n    }\n  }\n\n  .icon {\n    color: #252525;\n    width: 8px;\n  }\n"])));var xl,yl=function DeleteButton_DeleteButton(e){var t=e.onDelete,n=e.className,a=void 0===n?"delete":n;return Object(ye.b)("button",{css:Ol,className:a,type:"button",onClick:t,children:Object(ye.b)(Xe.G,{className:"icon"})})},kl=function styles(e){return Object(y.a)(xl||(xl=Object(x.a)(["\n  position: relative;\n\n  .delete {\n    position: absolute;\n    top: 2px;\n    left: 2px;\n  }\n\n  ","\n"])),e)};function Tab(e){var t=e.tabid,n=e.tablabel,a=e.activeTab,i=e.onClick,r=e.canDelete,o=e.onDelete,c=e.tabstyles,l="tab-list-item";a===t&&(l+=" tab-list-active");var s=Object(S.useCallback)((function(e){i(Object(v.a)(Object(v.a)({},e),{},{tablabel:n,tabid:t}))}),[i,n,t]),u=Object(S.useCallback)((function(e){e.stopPropagation(),o(Object(v.a)(Object(v.a)({},e),{},{tablabel:n,tabid:t}))}),[o,n,t]);return Object(ye.c)("li",{className:l,onClick:s,css:kl(c),children:[r&&Object(ye.b)(yl,{onDelete:u}),n]})}var Cl,Sl,Dl=Object(S.memo)(Tab),wl="TOP",Tl="LEFT",Ml=Object(y.a)(Cl||(Cl=Object(x.a)(["\n  height: 100%;\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n\n  .tab-list {\n    border-bottom: 1px solid #ccc;\n    padding-left: 0;\n    margin: 0;\n  }\n\n  .tab-list li:first-of-type {\n    margin-left: 5px;\n  }\n\n  .tab-list li:hover {\n    background-color: #f7f7f7;\n  }\n\n  .tab-list-item {\n    display: inline-block;\n    list-style: none;\n    margin-bottom: -1px;\n    padding: 0.5rem 2rem;\n  }\n\n  .tab-list-active {\n    background-color: white;\n    border: solid #ccc;\n    border-width: 1px 1px 0 1px;\n  }\n\n  .tab-content {\n    height: 100%;\n    overflow: auto;\n  }\n"]))),Al=Object(y.a)(Sl||(Sl=Object(x.a)(["\n  display: flex;\n  height: 100%;\n  width: 100%;\n  .tab-list {\n    border-right: 1px solid #ccc;\n    padding-left: 0;\n    margin: 0;\n  }\n\n  .tab-list li:hover {\n    background-color: #f7f7f7;\n  }\n\n  .tab-list li:first-of-type {\n    margin-top: 10px;\n  }\n\n  .tab-list-item {\n    display: block;\n    list-style: none;\n    margin-right: -1px;\n    padding: 0.5rem 0.75rem;\n  }\n\n  .tab-list-active {\n    background-color: white;\n    border: solid #ccc;\n    border-width: 1px 0px 1px 1px;\n  }\n\n  .tab-content {\n    height: 100%;\n    overflow: auto;\n  }\n"])));function Tabs(e){var t=e.children,n=e.onClick,a=e.defaultTabID,i=e.position,r=e.canDelete,o=e.onDelete,c=Object(S.useState)(),l=Object(O.a)(c,2),s=l[0],u=l[1];Object(S.useEffect)((function(){u(a)}),[a]);var d=Object(S.useCallback)((function(e){var t=e.tablabel,a=e.tabid;n({tablabel:t,tabid:a}),u(a)}),[n]),b=Object(S.useMemo)((function(){return S.Children.map(t,(function(e){var t=e.props,n=t.tablabel,a=t.tabid,i=t.candelete,c=t.tabstyles,l=i?"true"===i.toLowerCase():r;return Object(ye.b)(Dl,{activeTab:s,tablabel:n,onClick:d,tabid:a,canDelete:l,onDelete:o,tabstyles:c},a)}))}),[s,r,t,d,o]),p=Object(S.useMemo)((function(){return S.Children.map(t,(function(e){var t=e.props,n=t.tabid,a=t.style;return n!==s?Object(S.cloneElement)(e,{style:{display:"none"}}):Object(S.cloneElement)(e,{style:Object(v.a)({display:"block"},a)})}))}),[s,t]),f=Object(S.useMemo)((function(){switch(i){case wl:return Ml;case Tl:return Al;default:return Ml}}),[i]);return Object(ye.c)("div",{className:"tabs",css:f,children:[Object(ye.b)("ol",{className:"tab-list",children:b}),Object(ye.b)("div",{className:"tab-content",children:p})]})}Tabs.defaultProps={onClick:function onClick(){return null},onDelete:function onDelete(){return null},position:"TOP",canDelete:!1};var El=Object(S.memo)(Tabs),Pl=n(192),Fl=n.n(Pl),_l="INIT_PREFERENCES",Il="SET_PREFERENCES",Nl="SET_PANELS_PREFERENCES",Rl={basePreferences:{},display:{general:{disableMultipletAnalysis:!1,hideSetSumFromMolecule:!1},panels:{hideSpectraPanel:!1,hideInformationPanel:!1,hidePeaksPanel:!1,hideIntegralsPanel:!1,hideRangesPanel:!1,hideStructuresPanel:!1,hideFiltersPanel:!1,hideZonesPanel:!1,hideSummaryPanel:!1,hideMultipleSpectraAnalysisPanel:!1},toolBarButtons:{hideZoomTool:!1,hideZoomOutTool:!1,hideImport:!1,hideExportAs:!1,hideSpectraStackAlignments:!1,hideSpectraCenterAlignments:!1,hideRealImaginary:!1,hidePeakTool:!1,hideIntegralTool:!1,hideAutoRangesTool:!1,hideZeroFillingTool:!1,hidePhaseCorrectionTool:!1,hideBaseLineCorrectionTool:!1,hideFFTTool:!1,hideMultipleSpectraAnalysisTool:!1}},controllers:{mws:{low:2,high:20},help:{preventAutoHelp:!0},dimmedSpectraTransparency:.1},formatting:{nucleus:[{key:"1H",name:"1H",ppm:"0.00",hz:"0.00"},{key:"13C",name:"13C",ppm:"0.00",hz:"0.00"},{key:"15N",name:"15N",ppm:"0.00",hz:"0.00"},{key:"19F",name:"19F",ppm:"0.00",hz:"0.00"},{key:"29Si",name:"29Si",ppm:"0.00",hz:"0.00"},{key:"31P",name:"31P",ppm:"0.00",hz:"0.00"}],nucleusByKey:{},panels:{}},dispatch:null},Ll=function mapNucleus(e){e.formatting.nucleus&&Array.isArray(e.formatting.nucleus)&&(e.formatting.nucleusByKey=e.formatting.nucleus.reduce((function(e,t){return e[t.name.toLowerCase()]=t,Object(v.a)({},e)}),{}))};function preferencesReducer(e,t){switch(t.type){case _l:var n=lt("nmr-local-storage-version",!1);n&&"1"===n||(function removeData(e){localStorage.removeItem(e)}("nmr-general-settings"),function storeData(e,t){localStorage.setItem(e,t)}("nmr-local-storage-version","1"));var a=lt("nmr-general-settings");return Object(gt.b)(e,(function(e){if(t.payload){var n=t.payload,i=n.dispatch,r=Object(fe.a)(n,["dispatch"]);e.basePreferences=r,e.display=r.display,e.dispatch=i,a&&(Object.entries(a).forEach((function(t){var n=Object(O.a)(t,2),a=n[0],i=n[1];e[a]=Fl()(i,r[a]?r[a]:{})})),Ll(e))}}));case Il:return Object(gt.b)(e,(function(e){if(t.payload){var n=t.payload;e.controllers=n.controllers,e.formatting=n.formatting,e.display.panels=n.display.panels,Ll(e)}}));case Nl:return Object(gt.b)(e,(function(e){if(t.payload){var n=t.payload,a=n.key,i=n.value;e.formatting.panels[a]=i}}));default:return e}}var zl=function ControllersTabContent(){return Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)("p",{className:"section-header",children:"Mouse Scroll Wheel Sensitivity"}),Object(I.jsx)(Gc,{type:"number",label:"Low",name:"controllers.mws.low"}),Object(I.jsx)(Gc,{type:"number",label:"high",name:"controllers.mws.high"}),Object(I.jsx)("p",{className:"section-header",style:{marginTop:"40px"},children:"Show / Hide Panels"}),Object(I.jsx)(Hc,{className:"help-checkbox-element",label:"Prevent automatic show help ",name:"controllers.help.preventAutoHelp"}),Object(I.jsx)("p",{className:"section-header",style:{marginTop:"40px"},children:"Spectra"}),Object(I.jsx)(Gc,{type:"number",label:"Transparency of Dimmed Spectra [ 0 - 1 ]",name:"controllers.dimmedSpectraTransparency",checkValue:function checkValue(e){return e>=0&&e<=1}})]})},Hl=[{label:"Spectra Panel",name:"display.panels.hideSpectraPanel"},{label:"Information Panel",name:"display.panels.hideInformationPanel"},{label:"Peaks Panel",name:"display.panels.hidePeaksPanel"},{label:"Integrals Panel",name:"display.panels.hideIntegralsPanel"},{label:"Ranges Panel",name:"display.panels.hideRangesPanel"},{label:"Structures Panel",name:"display.panels.hideStructuresPanel"},{label:"Filters Panel",name:"display.panels.hideFiltersPanel"},{label:"Zones Panel",name:"display.panels.hideZonesPanel"},{label:"Summary Panel",name:"display.panels.hideSummaryPanel"},{label:"Multiple Spectra Analysis Panel",name:"display.panels.hideMultipleSpectraAnalysisPanel"}];var Bl,Vl=function DisplayTabContent(e){var t=e.preferences;return Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)("p",{className:"section-header",children:"Show / Hide Panels"}),Hl.map((function(e){return!C()(t,"basePreferences.".concat(e.name),!1)&&Object(I.jsx)(Hc,{className:"checkbox-element",label:e.label,name:e.name,reverse:!0},e.name)}))]})},Xl=Object(y.a)(Bl||(Bl=Object(x.a)(["\n  .counter-col {\n    width: 30px;\n  }\n  .nucleus-label-col {\n    display: flex;\n    justify-content: center;\n    width: 80px;\n  }\n\n  .width-100 {\n    width: 100% !important;\n    margin: 0px !important;\n  }\n\n  .nucleus-format-input-col {\n    text-align: center;\n    width: 100px;\n  }\n\n  th {\n    font-size: 11px;\n    font-weight: 600;\n  }\n  .operation-container {\n    display: flex;\n  }\n  .add {\n    background-color: transparent;\n    border: 0;\n    outline: none;\n    svg {\n      font-szie: 14px;\n      fill: green;\n    }\n  }\n"])));var Yl,Zl=function FormattingTabContent(){var e=Object(Rc.f)(),t=e.values,n=e.setFieldValue,a=Object(S.useMemo)((function(){return C()(t,"formatting.nucleus",[])}),[t]),i=Object(S.useCallback)((function(e){var t=a.splice(0,e);n("formatting.nucleus",t)}),[a,n]),r=Object(S.useCallback)((function(){var e={key:generateID(),name:"",ppm:"0.00",hz:"0.00"},t=[].concat(Object(Li.a)(a),[e]);n("formatting.nucleus",t)}),[a,n]);return Object(ye.c)(S.Fragment,{children:[Object(ye.b)("p",{className:"section-header",children:"Formating according to Nucleus"}),Object(ye.b)("div",{css:Xl,children:Object(ye.c)("table",{children:[Object(ye.b)("thead",{children:Object(ye.c)("tr",{children:[Object(ye.b)("th",{className:"counter-col",children:"#"}),Object(ye.b)("th",{className:"nucleus-label-col",children:"Nucleus "}),Object(ye.b)("th",{className:"nucleus-format-input-col",children:"\u03b4 (ppm)"}),Object(ye.b)("th",{className:"nucleus-format-input-col",children:"Coupling (Hz)"}),Object(ye.b)("th",{className:"nucleus-format-input-col"})]})}),Object(ye.b)("tbody",{children:a&&a.map((function(e,t){var n=t+1;return Object(ye.c)("tr",{children:[Object(ye.c)("td",{className:"counter-col",children:[Object(ye.c)("span",{children:[n," - "]})," "]}),Object(ye.b)("td",{className:"nucleus-label-col",children:Object(ye.b)(Gc,{name:"formatting.nucleus.".concat(t,".name"),className:"width-100"})}),Object(ye.b)("td",{className:"nucleus-format-input-col",children:Object(ye.b)(Gc,{name:"formatting.nucleus.".concat(t,".ppm"),className:"width-100"})}),Object(ye.b)("td",{className:"nucleus-format-input-col",children:Object(ye.b)(Gc,{name:"formatting.nucleus.".concat(t,".hz"),className:"width-100"})}),Object(ye.c)("td",{className:"operation-container",children:[Object(ye.b)($e,{onClick:function onClick(){return i(t)},popupTitle:"remove ".concat(e.name),popupPlacement:"right"}),a.length===t+1&&Object(ye.b)("button",{className:"add",type:"button",onClick:r,children:Object(ye.b)(Xe.y,{})})]})]},"".concat(e.key))}))})]})})]})},Ul=Object(y.a)(Yl||(Yl=Object(x.a)(['\n  overflow: auto;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n\n  .header {\n    text-align: center;\n    padding: 10px 0 10px 0px;\n    margin: 0px;\n    color: #005d9e;\n    place-items: normal;\n    text-transform: none;\n    background-color: #fcfcfc;\n  }\n  .main-content {\n    width: 100%;\n    flex: 1;\n    overflow: auto;\n    border: none;\n  }\n\n  .tab-content {\n    width: 100%;\n  }\n\n  .inner-content {\n    padding: 15px 30px;\n    width: 100%;\n    overflow: auto;\n  }\n\n  button:focus {\n    outline: none;\n  }\n  button:hover {\n    color: #007bff;\n  }\n  .save-button:hover {\n    background-color: #ffffff;\n  }\n  .save-button {\n    border: none;\n    padding: 0 15px;\n    background-color: #ffffff5e;\n    border-radius: 5px;\n    height: 25px;\n  }\n\n  .footer-container {\n    display: flex;\n    align-items: flex-end;\n    justify-content: flex-end;\n    background: rgb(242, 242, 242);\n    background: -moz-linear-gradient(\n      0deg,\n      rgba(242, 242, 242, 1) 0%,\n      rgba(245, 245, 245, 1) 37%,\n      rgba(255, 255, 255, 1) 90%\n    );\n    background: -webkit-linear-gradient(\n      0deg,\n      rgba(242, 242, 242, 1) 0%,\n      rgba(245, 245, 245, 1) 37%,\n      rgba(255, 255, 255, 1) 90%\n    );\n    background: linear-gradient(\n      0deg,\n      rgba(242, 242, 242, 1) 0%,\n      rgba(245, 245, 245, 1) 37%,\n      rgba(255, 255, 255, 1) 90%\n    );\n    filter: progid:DXImageTransform.Microsoft.gradient(startColorstr="#f2f2f2",endColorstr="#ffffff",GradientType=1);\n    padding: 6px 15px;\n    height: 55px;\n  }\n\n  .section-header {\n    font-size: 13px;\n    color: #2ca8ff;\n    margin-bottom: 10px;\n    border-bottom: 0.55px solid #f9f9f9;\n    padding: 6px 2px;\n  }\n\n  .label {\n    font-size: 12px;\n    font-weight: bold;\n    margin-right: 10px;\n  }\n\n  .input {\n    font-size: 14px;\n    border-radius: 5px;\n    border: 1px solid #cccccc;\n    padding: 5px;\n    width: 100px;\n    margin-right: 10px;\n    height: initial !important;\n  }\n\n  .close-bt {\n    border: none;\n    color: red;\n    background-color: transparent;\n    outline: none;\n    position: absolute;\n    right: 10px;\n    top: 2px;\n    width: 30px;\n    height: 30px;\n  }\n\n  .checkbox-lable {\n    min-width: 300px;\n    display: inline-block;\n  }\n\n  .help-checkbox-element {\n    .checkbox-lable {\n      width: 260px;\n    }\n  }\n  .checkbox-element {\n    margin-bottom: 5px;\n  }\n'])));var Kl=function GeneralSettings(e){var t=e.onClose,n=e.onSave,a=Object(S.useState)("controllers"),i=Object(O.a)(a,2),r=i[0],o=i[1],c=usePreferences(),l=useStateWithLocalStorage("nmr-general-settings"),s=Object(O.a)(l,2)[1],u=Object(S.useRef)(),d=Object(S.useCallback)((function(){u.current.submitForm()}),[]),b=Object(S.useCallback)((function(e){e.dispatch,e.basePreferences;var t=Object(fe.a)(e,["dispatch","basePreferences"]);s(t),c.dispatch({type:Il,payload:e}),n()}),[n,c,s]),p=Object(S.useCallback)((function(e){o(e.tabid)}),[]);return Object(ye.c)("div",{css:Ul,children:[Object(ye.c)("div",{className:"header handle",children:[Object(ye.b)("span",{children:"General Settings"}),Object(ye.b)($e,{onClick:t,className:"close-bt"})]}),Object(ye.b)("div",{className:"main-content",children:Object(ye.b)(Vc,{ref:u,initialValues:c,onSubmit:b,children:Object(ye.c)(El,{position:"LEFT",defaultTabID:r,onClick:p,children:[Object(ye.b)("div",{className:"inner-content",tablabel:"Controllers",tabid:"controllers",children:Object(ye.b)(zl,{})}),Object(ye.b)("div",{className:"inner-content",tablabel:"Formatting",tabid:"formatting",children:Object(ye.b)(Zl,{})}),Object(ye.b)("div",{className:"inner-content",tablabel:"Display",tabid:"display",children:Object(ye.b)(Vl,{preferences:c})})]})})}),Object(ye.b)("div",{className:"footer-container",children:Object(ye.b)("button",{type:"button",onClick:d,className:"save-button",children:"Save"})})]})},Wl={display:"flex"},Gl={lineHeight:2,userSelect:"none",flex:"2"},ql={flex:"4",display:"flex",justifyContent:"flex-start"},Jl={height:"100%",width:"100px",borderRadius:"5px",border:"0.55px solid #c7c7c7",margin:"0px 5px 0px 5px",textAlign:"center"},$l=Object(S.forwardRef)((function NumberInput(e,t){var n=e.label,a=e.name,i=e.defaultValue,r=e.style,o=e.onChange,c=e.onInput,l=e.pattern,s=e.step,u=e.min,d=Object(S.useRef)(),b=Object(S.useCallback)((function(e){e.target.checkValidity()?""===e.target.value?o(Object(v.a)(Object(v.a)({},e),{},{target:Object(v.a)(Object(v.a)({},e.target),{},{value:i})})):o(e):(t||d).current.value=i}),[i,o,t]);return Object(I.jsxs)("div",{style:Object(v.a)(Object(v.a)({},Wl),r.container),children:[Object(I.jsx)("span",{style:Object(v.a)(Object(v.a)({},Gl),r.label),children:n}),Object(I.jsx)("div",{style:Object(v.a)(Object(v.a)({},ql),r.inputContainer),children:Object(I.jsx)("input",{ref:t||d,name:a,style:Object(v.a)(Object(v.a)({},Jl),r.input),type:"number",pattern:l,defaultValue:i,step:s,onChange:b,onInput:c,min:u},i)})]})}));$l.defaultProps={pattern:"^d*(.d{0,2})?$",step:"any",min:"any",style:{label:{},input:{},container:{},inputContainer:{}},defaultValue:0,onChange:function onChange(){return null},onInput:function onInput(){return null}};var Ql=$l,es={container:{padding:"5px",height:"100%",display:"flex",fontSize:"12px"},input:{width:"50px"},inputContainer:{flex:"2"},label:{flex:"5"},actionButton:{height:"100%",width:"60px",borderRadius:"5px",border:"0.55px solid #c7c7c7",margin:"0px 5px",userSelect:"none"}};var ts,ns=function AutoPeakPickingOptionPanel(){var e=useDispatch(),t=Object(S.useRef)(),n=Object(S.useRef)(),a=Object(S.useRef)(),i=Object(S.useRef)(),r=Object(S.useCallback)((function(){e({type:vn,options:{maxNumberOfPeaks:n.current.value,minMaxRatio:t.current.value,noiseFactor:a.current.value,lookNegative:i.current.checked}})}),[e]),o=Object(S.useCallback)((function(){e({type:Sn})}),[e]);return Object(I.jsxs)("div",{style:es.container,children:[Object(I.jsx)(Ql,{ref:n,label:"Max Number Of Peaks:",name:"maxNumberOfPeaks",style:{input:es.input,inputContainer:es.inputContainer,label:es.label},defaultValue:50}),Object(I.jsx)(Ql,{ref:a,label:"Noise factor",name:"noiseFactor",style:{input:es.input,inputContainer:es.inputContainer,label:es.label},defaultValue:3}),Object(I.jsx)(Ql,{ref:t,label:"Min Max Ratio:",name:"minMaxRatio",style:{input:es.input,inputContainer:es.inputContainer,label:es.label},defaultValue:.1,step:"0.01"}),Object(I.jsxs)("div",{style:{justifyItems:"baseline",marginRight:"3px"},children:[Object(I.jsx)("label",{style:{marginRight:"2px",lineHeight:2,userSelect:"none"},htmlFor:"lookNegative",children:"Detect Negative:"}),Object(I.jsx)(zc,{name:"lookNegative",ref:i})]}),Object(I.jsx)("button",{type:"button",style:es.actionButton,onClick:r,children:"Apply"}),Object(I.jsx)("button",{type:"button",style:es.actionButton,onClick:o,children:"Cancel"})]})},as=Object(S.forwardRef)((function Select(e,t){var n=e.data,a=e.style,i=e.onChange,r=e.defaultValue,o=e.name,c=Object(S.useCallback)((function(e){var t=e.target.value;isNaN(t)||(t=Number(t)),i(t)}),[i]),l=Object(y.a)(ts||(ts=Object(x.a)(["\n    padding: 0px 5px;\n    border: 0.55px solid #cacaca;\n    font-size: 14px;\n    width: ","px;\n    margin: 0;\n    height: 100%;\n    background: "," no-repeat right white;\n    -webkit-appearance: none;\n    background-position-x: ","px;\n    background-size: 15px 15px;\n    border-radius: 5px;\n    margin: 0px 5px;\n    :focus,\n    input:focus {\n      outline: none;\n    }\n  "])),a.width?a.width-5:115,'url(\'data:image/svg+xml;utf8,<svg  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="960px" height="560px" viewBox="0 0 960 560" enable-background="new 0 0 960 560" xml:space="preserve"><g id="Rounded_Rectangle_33_copy_4_1_"><path d="M480,344.181L268.869,131.889c-15.756-15.859-41.3-15.859-57.054,0c-15.754,15.857-15.754,41.57,0,57.431l237.632,238.937c8.395,8.451,19.562,12.254,30.553,11.698c10.993,0.556,22.159-3.247,30.555-11.698l237.631-238.937c15.756-15.86,15.756-41.571,0-57.431s-41.299-15.859-57.051,0L480,344.181z"/></g></svg>\')',a.width?a.width-18:97);return Object(ye.b)("select",{css:[l,a],ref:t,name:o,onChange:c,defaultValue:r,children:n.map((function(e){return Object(ye.b)("option",{value:e.value,children:e.label},"".concat(e.key))}))})}));as.defaultProps={onChange:function onChange(){return null},style:{width:100},name:""};var is=as,rs={container:{padding:"5px",height:"100%",display:"flex"},label:{lineHeight:2,userSelect:"none"},actionButton:{height:"100%",width:"60px",borderRadius:"5px",border:"0.55px solid #c7c7c7",margin:"0px 5px",userSelect:"none"}};var os=function BaseLineCorrectionPanel(){var e=useDispatch(),t=Object(S.useRef)(),n=Object(S.useRef)(),a=Object(S.useRef)(),i=Object(S.useRef)(),r=Object(S.useState)("polynomial"),o=Object(O.a)(r,2),c=o[0],l=o[1],s=Object(S.useCallback)((function(){var r={};switch(c){case"airpls":r={algorithm:t.current.value,maxIterations:n.current.value,tolerance:a.current.value};break;case"polynomial":r={algorithm:t.current.value,degree:i.current.value}}e({type:Pn,options:r})}),[c,e]),u=Object(S.useCallback)((function(){e({type:Sn})}),[e]),d=Object(S.useCallback)((function(){return Object.keys(Ca).map((function(e){return{key:e,label:Ca[e],value:e}}))}),[]),b=Object(S.useCallback)((function(e){l(e)}),[]);return Object(I.jsxs)("div",{style:rs.container,children:[Object(I.jsx)("span",{style:rs.label,children:"Algorithm: "}),Object(I.jsx)(is,{ref:t,data:d(),style:{marginLeft:10,marginRight:10},onChange:b,defaultValue:"polynomial"}),c&&"airpls"===c&&Object(I.jsxs)(S.Fragment,{children:[Object(I.jsx)(Ql,{label:"maxIterations:",ref:n,name:"maxIterations",defaultValue:100}),Object(I.jsx)(Ql,{label:"tolerance:",ref:a,name:"tolerance",defaultValue:.001})]}),c&&"autoPolynomial"===c&&Object(I.jsx)(Ql,{label:"degree:",ref:i,name:"degree",defaultValue:3}),c&&"polynomial"===c&&Object(I.jsx)(Ql,{label:"degree:",ref:i,name:"degree",defaultValue:3}),Object(I.jsx)("button",{type:"button",style:rs.actionButton,onClick:s,children:"Apply"}),Object(I.jsx)("button",{type:"button",style:rs.actionButton,onClick:u,children:"Cancel"})]})},cs={container:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",border:"0.55px solid #c7c7c7",borderRadius:"5px",userSelect:"none",backgroundColor:"#18ce0f14",fontSize:"10px",color:"#00801d",margin:"0px 5px",cursor:"ew-resize"},label:{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",maxWidth:"100%"}},ls={step:"initial"},ss=null,us=1,ds=0,bs=!0;function calcSpeed(e){bs?(ds=e.clientX,bs=!1):(us=e.clientX-ds,ds=e.clientX,function setToZero(){clearTimeout(ss),ss=setTimeout((function(){us=0}),50)}())}function InputRange(e){var t=e.name,n=e.minValue,a=e.maxValue,i=e.value,r=e.onChange,o=e.label,c=e.style,l=e.className,s=e.noPropagation,u=Object(S.useCallback)((function(){"moving"!==ls.step&&"start"!==ls.step||(ls=Object(v.a)(Object(v.a)({},ls),{},{step:"start"===ls.step?"initial":"end"}))}),[]),d=Object(S.useCallback)((function(e){s&&e.stopPropagation();var t=e.currentTarget.getBoundingClientRect(),n=e.clientX-t.x,a=e.clientY-t.y;return"initial"!==ls.step&&"end"!==ls.step||(ls={startX:n,startY:a,startScreenX:e.screenX,startScreenY:e.screenY,boundingRect:e.currentTarget.getBoundingClientRect(),step:"start",clientX:e.clientX,clientY:e.clientY}),!1}),[s]);return Object(I.jsx)("div",{style:Object(v.a)(Object(v.a)({},cs.container),c),className:l,onMouseMove:function mouseMoveCallback(e){if("start"===ls.step||"moving"===ls.step){var o=e.screenX,c=e.screenY;ls=Object(v.a)(Object(v.a)({},ls),{},{step:"moving",endX:ls.startX+o-ls.startScreenX,endY:ls.startY+c-ls.startScreenY}),calcSpeed(e);var l=a-n,s=ls.endX-ls.startX,u=Math.abs(s)*(Math.abs(us)>3?l:5)/ls.boundingRect.width;r({value:us>=0?i+Math.abs(u):i-u,name:t})}},onMouseUp:function mouseUpCallback(){"moving"!==ls.step&&"start"!==ls.step||(ls=Object(v.a)(Object(v.a)({},ls),{},{step:"start"===ls.step?"initial":"end"}))},onMouseDown:d,onMouseEnter:u,children:Object(I.jsx)("span",{style:cs.label,children:o})})}InputRange.defaultProps={name:"",minValue:0,maxValue:50,value:0,onChange:function onChange(){return null},label:"Drag to Change the value",noPropagation:!0};var ps=InputRange,fs={container:{padding:"5px",height:"100%",display:"flex"},input:{width:"100px"},actionButton:{height:"100%",width:"60px",borderRadius:"5px",border:"0.55px solid #c7c7c7",margin:"0px 5px",userSelect:"none"},select:{marginLeft:"5px",marginRight:"10px",border:"none",height:"20px"}},hs="manual",ms="automatic",gs="absolute",js=[{key:hs,label:"Manual",value:hs},{key:ms,label:"Automatic",value:ms},{key:gs,label:"Absolute",value:gs}];var vs=function ManualPhaseCorrectionPanel(){var e=useDispatch(),t=Object(S.useState)({ph0:0,ph1:0,pivotIndex:1}),n=Object(O.a)(t,2),a=n[0],i=n[1],r=Object(S.useState)(hs),o=Object(O.a)(r,2),c=o[0],l=o[1],s=Object(S.useCallback)((function(){switch(c){case ms:e({type:mn});break;case hs:e({type:hn,value:a});break;case gs:e({type:gn})}}),[e,c,a]),u=Object(S.useCallback)((function(t){var n=t.target.name;if(t.target){var r=t.target.value;i((function(t){var i=Object(v.a)(Object(v.a)({},t),{},Object(ue.a)({},n,r));if("-"!==r){var o=Object(v.a)(Object(v.a)({},a),{},Object(ue.a)({},n,r-t[n]));for(var c in t)t[c]===o[c]&&(o[c]-=t[c]);e({type:fn,value:o})}return i}))}}),[e,a]),d=Object(S.useCallback)((function(t){var n=Object(v.a)(Object(v.a)({},a),{},Object(ue.a)({},t.name,t.value)),r={};for(var o in a)r[o]=n[o]-a[o];e({type:fn,value:r}),i(n)}),[e,a]),b=Object(S.useCallback)((function(){e({type:Sn})}),[e]),p=Object(S.useCallback)((function(e){l(e)}),[]);return Object(I.jsxs)("div",{style:fs.container,children:[Object(I.jsx)(is,{onChange:p,data:js,value:hs,style:fs.select}),c===hs&&Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(Uc,{label:"PH0:",name:"ph0",style:{input:fs.input},onChange:u,value:a.ph0,type:"number"}),Object(I.jsx)(Uc,{label:"PH1:",name:"ph1",style:{input:fs.input},onChange:u,value:a.ph1,type:"number"}),Object(I.jsx)(ps,{name:"ph0",value:a.ph0,label:"Change Ph0 By mouse click and drag",style:{width:"20%"},onChange:d}),Object(I.jsx)(ps,{name:"ph1",value:a.ph1,label:"Change Ph1 By mouse click and drag",style:{width:"20%"},onChange:d})]}),Object(I.jsx)("button",{type:"button",style:fs.actionButton,onClick:s,children:"Apply"}),Object(I.jsx)("button",{type:"button",style:fs.actionButton,onClick:b,children:"Cancel"})]})},Os={container:{padding:"5px",height:"100%",display:"flex",fontSize:"12px",alignItems:"baseline"},input:{height:"100%",width:"50px",borderRadius:"5px",border:"0.55px solid #c7c7c7",margin:"0px 5px 0px 5px",textAlign:"center"},actionButton:{height:"100%",minWidth:"60px",borderRadius:"5px",border:"0.55px solid #c7c7c7",margin:"0px 5px",userSelect:"none"},hint:{lineHeight:2,userSelect:"none",fontSize:"11px"}};var xs=function RangesPickingOptionPanel(){var e=useDispatch(),t=Object(S.useRef)(),n=Object(S.useCallback)((function(){e({type:On,options:{peakPicking:{minMaxRatio:.05,nH:100,compile:!0,frequencyCluster:16,clean:!0,keepPeaks:!0,lookNegative:t.current.checked}}})}),[e]),a=Object(S.useCallback)((function(){e({type:Sn})}),[e]);return Object(I.jsxs)("div",{style:Os.container,children:[Object(I.jsxs)("div",{style:{justifyItems:"baseline",margin:"0 10px"},children:[Object(I.jsx)("label",{style:{marginRight:"2px",lineHeight:2,userSelect:"none"},htmlFor:"lookNegative",children:"Detect negative:"}),Object(I.jsx)(zc,{name:"lookNegative",ref:t})]}),Object(I.jsx)("button",{type:"button",style:Os.actionButton,onClick:n,children:"Auto ranges picking"}),Object(I.jsx)("button",{type:"button",style:Os.actionButton,onClick:a,children:"Cancel"}),Object(I.jsx)("span",{style:Os.hint,children:"Manual selection using SHIFT + select zone or click on Auto peak picking"})]})},ys={container:{padding:"5px",height:"100%",display:"flex"},input:{height:"100%",width:"80px",borderRadius:"5px",border:"0.55px solid #c7c7c7",margin:"0px 5px 0px 5px",textAlign:"center"},actionButton:{height:"100%",width:"60px",borderRadius:"5px",border:"0.55px solid #c7c7c7",margin:"0px 5px",userSelect:"none"},label:{lineHeight:2,userSelect:"none"}};function formatNumber(e){return e>=1048576?"".concat(e/1048576,"M"):e>=1024?"".concat(e/1024,"K"):e}var ks=function generateSizes(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:21,n=[],a=e;a<=t;a++){var i=Math.pow(2,a);n.push({key:i,label:formatNumber(i),value:i})}return n}();var Cs=function ZeroFillingOptionsPanel(){var e=useDispatch(),t=useChartData(),n=t.data,a=t.activeSpectrum,i=Object(S.useRef)(),r=Object(S.useState)(1),o=Object(O.a)(r,2),c=o[0],l=o[1],s=Object(S.useCallback)((function(){e({type:bn,value:{zeroFillingSize:Number(i.current.value),lineBroadeningValue:c}})}),[e,c]),u=Object(S.useCallback)((function(){return n&&(null===a||void 0===a?void 0:a.id)?Math.pow(2,Math.round(Math.log2(n[a.index].data.x.length))):""}),[a,n]),d=Object(S.useCallback)((function(e){if(e.target){var t=e.target.validity.valid?Number(e.target.value):c;l(t)}}),[c]),b=Object(S.useCallback)((function(){e({type:Sn})}),[e]);return Object(I.jsxs)("div",{style:ys.container,children:[Object(I.jsx)("span",{style:ys.label,children:"Size: "}),Object(I.jsx)(is,{ref:i,data:ks,style:{marginLeft:10,marginRight:10},defaultValue:u()}),Object(I.jsx)("span",{style:ys.label,children:"Line Broadening: "}),Object(I.jsx)("input",{name:"line-broadening",style:ys.input,type:"number",defaultValue:c,onInput:d,pattern:"^\\d*(\\.\\d{0,2})?$",step:"any"}),Object(I.jsx)("button",{type:"button",style:ys.actionButton,onClick:s,children:"Apply"}),Object(I.jsx)("button",{type:"button",style:ys.actionButton,onClick:b,children:"Cancel"})]})},Ss={container:{padding:"5px",height:"100%",display:"flex",fontSize:"12px"},input:{width:"50px"},inputContainer:{flex:"2"},label:{flex:"5"},actionButton:{height:"100%",borderRadius:"5px",border:"0.55px solid #c7c7c7",margin:"0px 5px",userSelect:"none"}};var Ds,ws=function Zones2DOptionPanel(){var e=useDispatch(),t=Object(S.useRef)(),n=Object(S.useCallback)((function(){e({type:xn,options:{thresholdFactor:t.current.value}})}),[e]),a=Object(S.useCallback)((function(){e({type:Sn})}),[e]),i=Object(S.useCallback)((function(e){if(e.target){var t=e.target.value;bi.emit("noiseFactorChanged",t)}}),[]);return Object(I.jsxs)("div",{style:Ss.container,children:[Object(I.jsx)(Ql,{ref:t,label:"NoiseFactor",name:"noiseFactor",style:{input:Ss.input,inputContainer:Ss.inputContainer,label:Ss.label},defaultValue:1,onChange:i}),Object(I.jsx)("button",{type:"button",style:Ss.actionButton,onClick:n,children:"Auto Zones Picking"}),Object(I.jsx)("button",{type:"button",style:Ss.actionButton,onClick:a,children:"Cancel"})]})},Ts=Object(y.a)(Ds||(Ds=Object(x.a)(["\n  display: flex;\n  align-items: flex-start;\n  justify-content: flex-start;\n  height: 36px;\n  min-height: 36px;\n  border-width: 1px 1px 0px 1px;\n  border-style: solid;\n  border-color: rgb(213, 213, 213);\n  outline: none;\n  transition: background-color 0.2s ease-in 0s;\n  box-shadow: rgb(255, 255, 255) 0px 1px 0px 0px inset;\n  background: linear-gradient(rgb(255, 255, 255) 5%, rgb(246, 246, 246) 100%)\n    rgb(255, 255, 255);\n  color: rgb(102, 102, 102);\n  font-family: Arial;\n  font-weight: bold;\n  text-decoration: none;\n  text-shadow: rgb(255, 255, 255) 0px 1px 0px;\n\n  .toolOptionsPanel {\n    flex: 10;\n    padding: 0px;\n    margin: 0px;\n    height: 100%;\n  }\n\n  .windowButtonsContainer {\n    flex: 0.5;\n    display: flex;\n    align-items: center;\n    justify-content: flex-end;\n    height: 100%;\n  }\n\n  .windowButton {\n    width: 30px;\n    height: 30px;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    background-color: transparent;\n    border: none;\n  }\n  button:focus {\n    outline: 0;\n  }\n"])));function Header_Header(e){var t=e.isFullscreen,n=e.onMaximize,a=useChartData().selectedOptionPanel,i=ie(),r=Mc(),o=useHelp(),c=Object(S.useMemo)((function(){switch(a){case Qa.zeroFilling.id:return Object(ye.b)(Cs,{});case Qa.phaseCorrection.id:return Object(ye.b)(vs,{});case Qa.peakPicking.id:return Object(ye.b)(ns,{});case Qa.rangesPicking.id:return Object(ye.b)(xs,{});case Qa.baseLineCorrection.id:return Object(ye.b)(os,{});case Qa.zone2D.id:return Object(ye.b)(ws,{})}}),[a]),l=Object(S.useCallback)((function(){i.show(Object(ye.b)(Kl,{onSave:function onSave(){r.success("Settings saved successfully"),i.close()}}),{position:G.TOP_CENTER,enableResizing:!0,width:600,height:400})}),[r,i]),s=Object(S.useCallback)((function(){i.show(Object(ye.b)(vl,{}),{isBackgroundBlur:!1,position:G.MIDDLE,enableResizing:!0,width:1020,height:500})}),[i]),u=Object(S.useCallback)((function(){i.show(Object(ye.b)(ml,{}),{isBackgroundBlur:!1,position:G.MIDDLE,width:500,height:480})}),[i]);return Object(ye.c)("div",{css:Ts,children:[Object(ye.b)(dl,{popupTitle:"About Us",popupPlacement:"right",style:{width:"36px"},onClick:u,className:"windowButton",children:Object(ye.b)(ul.a,{})}),Object(ye.b)("div",{className:"toolOptionsPanel",children:c}),Object(ye.c)("div",{className:"windowButtonsContainer",children:[Object(ye.b)(dl,{popupTitle:"User Manual",popupPlacement:"left",onClick:s,className:"windowButton",children:Object(ye.b)(Xe.z,{})}),Object(ye.b)(dl,{popupTitle:"General Settings",popupPlacement:"left",onClick:l,className:"windowButton",children:Object(ye.b)(Xe.J,{})}),t?"":Object(ye.b)(dl,Object(v.a)(Object(v.a)({popupTitle:"Full Screen",popupPlacement:"left",onClick:n,className:"windowButton","data-helpid":"fullScreen"},o.onHover),{},{children:Object(ye.b)(Xe.C,{})}))]})]})}Header_Header.defaultProps={onMaximize:function onMaximize(){return null}};var Ms,As,Es=Header_Header,Ps=n(763),Fs={MOL:"mol",NMRIUM:"nmrium",JSON:"json",DX:"dx",JDX:"jdx",JDF:"jdf",ZIP:"zip",NMREDATA:"nmredata"},_s="504b0304";function _loadFile(){return(_loadFile=Object(Br.a)(Hr.a.mark((function _callee(e){var t,n,a,i=arguments;return Hr.a.wrap((function _callee$(r){for(;;)switch(r.prev=r.next){case 0:return t=i.length>1&&void 0!==i[1]?i[1]:{asBuffer:!1},r.next=3,fetch(e);case 3:return checkStatus(n=r.sent),r.next=7,t.asBuffer;case 7:if(!r.sent){r.next=11;break}r.t0=n.arrayBuffer(),r.next=12;break;case 11:r.t0=n.text();case 12:return a=r.t0,r.abrupt("return",a);case 14:case"end":return r.stop()}}),_callee)})))).apply(this,arguments)}function checkStatus(e){if(!e.ok)throw new Error("HTTP ".concat(e.status," - ").concat(e.statusText));return e}function getFileExtension(e){return e.replace(/^.*\./,"").toLowerCase()}function getFileName(e){return e.substr(0,e.lastIndexOf("."))}function loadFiles(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Promise.all([].map.call(e,(function(e){return new Promise((function(n,a){var i=new FileReader;i.onabort=function(e){return a(e)},i.onerror=function(e){return a(e)},i.onload=function(){if(i.result){var t=i.result,a=getFileName(e.name),r=getFileExtension(e.name);n({binary:t,name:a,extension:r})}},t.asBuffer?i.readAsArrayBuffer(e):i.readAsBinaryString(e)}))})))}function loadFilesFromZip(e){return _loadFilesFromZip.apply(this,arguments)}function _loadFilesFromZip(){return(_loadFilesFromZip=Object(Br.a)(Hr.a.mark((function _callee2(e){var t,n,a,i,r,o,c,l,s=arguments;return Hr.a.wrap((function _callee2$(u){for(;;)switch(u.prev=u.next){case 0:t=s.length>1&&void 0!==s[1]?s[1]:{},n=[],a=Object(ac.a)(e),u.prev=3,a.s();case 5:if((i=a.n()).done){u.next=21;break}return r=i.value,u.prev=7,u.next=10,r.async(t.asBuffer?"uint8array":"text");case 10:o=u.sent,c=getFileName(r.name),l=getFileExtension(r.name),n.push({binary:o,name:c,extension:l}),u.next=19;break;case 16:u.prev=16,u.t0=u.catch(7),console.log(u.t0);case 19:u.next=5;break;case 21:u.next=26;break;case 23:u.prev=23,u.t1=u.catch(3),a.e(u.t1);case 26:return u.prev=26,a.f(),u.finish(26);case 29:return u.abrupt("return",n);case 30:case"end":return u.stop()}}),_callee2,null,[[3,23,26,29],[7,16]])})))).apply(this,arguments)}var Is=Object(y.a)(Ms||(Ms=Object(x.a)(["\n  height: 100%;\n  background-color: #b5b5b599;\n  position: absolute;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex-flow: column;\n  z-index: 99999;\n\n  p {\n    color: white;\n    background-color: rgb(104, 104, 104);\n    padding: 1.5%;\n    border-radius: 30px;\n    margin: 0px;\n  }\n\n  svg {\n    stroke-width: 0;\n    font-size: 3rem !important;\n    fill: white;\n  }\n"]))),Ns=Object(y.a)(As||(As=Object(x.a)(["\n  border: 0.55px #e6e6e6 solid;\n  display: flex;\n  flex: 1;\n  flex-direction: 'column';\n  height: 100%;\n"])));var Rs=function DropZone(e){var t=useChartData(),n=t.width,a=t.height,i=useDispatch(),r=Object(S.useCallback)((function(e,t){var n,a=Object(ac.a)(t);try{var r=function _loop(){var t=n.value,a=e.filter((function(e){return getFileExtension(e.name)===t}));switch(t){case Fs.MOL:loadFilesFromZip(a).then((function(e){return i({type:Ct,files:e})}));break;case Fs.NMRIUM:case Fs.JSON:loadFilesFromZip(a,{asBuffer:!0}).then((function(e){if(1===a.length){var t=new TextDecoder("utf8");e[0].binary=t.decode(e[0].binary),i({type:xt,files:e})}else i({type:Cn,isLoading:!1}),alert("You can add only one json file")}));break;case Fs.JDX:case Fs.DX:loadFilesFromZip(a,{asBuffer:!0}).then((function(e){return i({type:yt,files:e})}));break;case Fs.JDF:loadFilesFromZip(a,{asBuffer:!0}).then((function(e){return i({type:Dt,files:e})}))}};for(a.s();!(n=a.n()).done;)r()}catch(o){a.e(o)}finally{a.f()}}),[i]),o=Object(S.useCallback)((function(e){var t,n=Object(Li.a)(new Set(e.map((function(e){return getFileExtension(e.name)})))),a=Object(ac.a)(n);try{var o=function _loop2(){var n=t.value,a=e.filter((function(e){return getFileExtension(e.name)===n}));switch(n){case Fs.MOL:loadFiles(a).then((function(e){i({type:Ct,files:e})}),(function(e){alert(e)}));break;case Fs.NMRIUM:case Fs.JSON:1===a.length?loadFiles(a,{asBuffer:!0}).then(function(){var e=Object(Br.a)(Hr.a.mark((function _callee(e){var t,n;return Hr.a.wrap((function _callee$(a){for(;;)switch(a.prev=a.next){case 0:if(o=e[0].binary,new Uint8Array(o).slice(0,4).reduce((function(e,t){return e+t.toString(16).padStart(2,"0")}),"")!==_s){a.next=8;break}return a.next=4,nl.a.loadAsync(e[0].binary);case 4:t=a.sent,r(Object.values(t.files),[Fs.NMRIUM]),a.next=11;break;case 8:n=new TextDecoder("utf8"),e[0].binary=n.decode(e[0].binary),i({type:xt,files:e});case 11:case"end":return a.stop()}var o}),_callee)})));return function(t){return e.apply(this,arguments)}}(),(function(e){alert(e)})):alert("You can add only one json file");break;case Fs.JDX:case Fs.DX:loadFiles(a,{asBuffer:!0}).then((function(e){i({type:yt,files:e})}),(function(e){alert(e)}));break;case Fs.JDF:loadFiles(a,{asBuffer:!0}).then((function(e){i({type:Dt,files:e})}),(function(e){alert(e)}));break;case Fs.ZIP:loadFiles(a,{asBuffer:!0}).then(function(){var e=Object(Br.a)(Hr.a.mark((function _callee2(e){var t,n,a,o,c;return Hr.a.wrap((function _callee2$(l){for(;;)switch(l.prev=l.next){case 0:t=Object(ac.a)(e),l.prev=1,t.s();case 3:if((n=t.n()).done){l.next=13;break}return a=n.value,l.next=7,nl.a.loadAsync(a.binary);case 7:o=l.sent,c=Object(Li.a)(new Set(Object.values(o.files).map((function(e){return getFileExtension(e.name)})))),c.some((function(e){return Fs[e.toUpperCase()]&&e!==Fs.ZIP}))?r(Object.values(o.files),c):i({type:St,files:e});case 11:l.next=3;break;case 13:l.next=18;break;case 15:l.prev=15,l.t0=l.catch(1),t.e(l.t0);case 18:return l.prev=18,t.f(),l.finish(18);case 21:case"end":return l.stop()}}),_callee2,null,[[1,15,18,21]])})));return function(t){return e.apply(this,arguments)}}(),(function(e){alert(e)}));break;case Fs.NMREDATA:loadFiles(a,{asBuffer:!0}).then(function(){var e=Object(Br.a)(Hr.a.mark((function _callee3(e){var t,n,a;return Hr.a.wrap((function _callee3$(r){for(;;)switch(r.prev=r.next){case 0:t=Object(ac.a)(e);try{for(t.s();!(n=t.n()).done;)a=n.value,i({type:kt,file:a})}catch(o){t.e(o)}finally{t.f()}case 2:case"end":return r.stop()}}),_callee3)})));return function(t){return e.apply(this,arguments)}}());break;default:i({type:Cn,isLoading:!1}),alert("The file extension must be zip, dx, jdx, json, mol, nmredata or nmrium.")}};for(a.s();!(t=a.n()).done;)o()}catch(c){a.e(c)}finally{a.f()}}),[i,r]),c=Object(S.useCallback)((function(e){i({type:Cn,isLoading:!0}),o(e)}),[i,o]),l=Object(Ps.a)({onDrop:c,noClick:!0}),s=l.getRootProps,u=l.getInputProps,d=l.isDragActive,b=l.open,p=Object(S.useCallback)((function(){b()}),[b]);return Object(ye.b)(Pe,{value:{open:p},children:Object(ye.c)("div",Object(v.a)(Object(v.a)({},s()),{},{css:Ns,children:[Object(ye.b)("input",Object(v.a)({},u())),d&&Object(ye.c)("div",{css:Is,style:{width:"".concat(n+41,"px"),height:"".concat(a,"px")},children:[Object(ye.b)(Xe.I,{}),Object(ye.b)("p",{children:"Drop your files here"})]}),e.children]}))})},Ls=0,zs=!1,Hs={container:{display:"flex",flexDirection:"column",margin:"0px",userSelect:"none"},button:{cursor:"pointer",padding:"5px 12px",display:"flex",alignItems:"center",fontSize:"11px",border:"none",outline:"none",transition:"background-color 0.2s ease-in",boxShadow:"inset 0px 1px 0px 0px #ffffff",background:"linear-gradient(to bottom, #f0f0f0 5%, #e1e1e1 100%)",filter:'progid:DXImageTransform.Microsoft.gradient(startColorstr="#f0f0f0", endColorstr="#e1e1e1",GradientType=0)',backgroundColor:"#ffffff",color:"#2d2d2d",fontFamily:"Arial",fontWeight:"bold",textDecoration:"none",textShadow:"0px 1px 0px #ffffff",borderTop:"0.55px  solid #d5d5d5"},buttonTitle:{padding:0,margin:0},content:{backgroundColor:"white",maxHeight:"0",overflow:"hidden",flex:"1 1 1px"}},Bs=1,Vs=2;function AccordionItem(e){var t=e.title,n=e.children,a=e.index,i=e.isOpen,r=e.onOpen,o=e.style,c=Object(S.useState)(null),l=Object(O.a)(c,2),s=l[0],u=l[1],d=Object(S.useRef)(),b=Object(S.useRef)(),p=Object(S.useCallback)((function(e){Ls=setTimeout((function(){zs||r(a,{source:Bs,shiftKey:e.shiftKey}),zs=!1}),200)}),[a,r]),f=Object(S.useCallback)((function(e){e.persist(),clearTimeout(Ls),zs=!0,r(a,{source:Vs,shiftKey:e.shiftKey})}),[a,r]);return Object(S.useEffect)((function(){u(i?{backgroundColor:"#ccc"}:null)}),[i]),Object(I.jsxs)("div",{ref:b,style:Object(v.a)(Object(v.a)({},Hs.container),{},{flex:null==s?0:"1 1 1px",transition:i?"flex 0.2s ease":""}),className:"custom-accordion",children:[Object(I.jsx)("button",{type:"button",style:Hs.button,onClick:p,onDoubleClick:f,children:Object(I.jsx)("p",{style:Hs.buttonTitle,children:t})}),Object(I.jsx)("div",{ref:d,style:Object(v.a)(Object(v.a)({},Hs.content),{},{maxHeight:null==s?0:"100%"},o),children:n})]})}AccordionItem.defaultProps={onOpen:function onOpen(){return null}};var Xs=AccordionItem,Ys={container:{height:"100%",width:"100%",display:"flex",flexDirection:"column"}},Zs=[],Us=null;var Ks,Ws,Gs,qs=function Accordion(e){var t=e.children,n=e.defaultOpenIndex,a=void 0===n?0:n,i=Object(S.useState)([]),r=Object(O.a)(i,2),o=r[0],c=r[1],l=Object(S.useRef)(),s=Object(S.useCallback)((function(e,t){var n=o.slice();t.source===Bs?n=n.map((function(t,n){return n===e&&Us!==e?!t:t})):(n=n.map((function(t,n){return n===e})),Us=t.shiftKey?Us===e?null:e:null),Zs=n,c(n)}),[o]),u=Object(S.useMemo)((function(){return S.Children.map(t,(function(e,t){return e&&Object(S.cloneElement)(e,{onOpen:s,index:t,isOpen:o&&o[t]})}))}),[t,o,s]);return Object(S.useEffect)((function(){null!=a&&c((function(e){return e.length>0?e.map((function(e,t){return Zs[t]?e:t===a})):(Zs=Array(t.length).fill(!1).map((function(e){return e})),Array(t.length).fill(!1).map((function(e,t){return t===a||e})))}))}),[t.length,a]),Object(I.jsx)("div",{ref:l,style:Ys.container,children:u})},Js=n(412),$s=Object(y.a)(Ks||(Ks=Object(x.a)(["\n  background-color: #ff6f0057;\n"]))),Qs=Object(y.a)(Ws||(Ws=Object(x.a)(["\n  background-color: #f5f5dc;\n"]))),eu=Object(y.a)(Gs||(Gs=Object(x.a)(["\n  border-spacing: 0;\n  border: 1px solid #dedede;\n  width: 100%;\n  // height: 100%;\n  font-size: 12px;\n\n  .react-contextmenu-wrapper {\n    display: contents;\n  }\n\n  tr {\n    :last-child {\n      td {\n        border-bottom: 0;\n      }\n    }\n  }\n\n  th {\n    position: sticky;\n    background-color: white;\n    z-index: 2;\n    top: 0;\n  }\n  th,\n  td {\n    margin: 0;\n    padding: 0.15rem 0.4rem;\n    border-bottom: 1px solid #dedede;\n    border-right: 1px solid #dedede;\n\n    :last-child {\n      border-right: 0;\n    }\n    button {\n      background-color: transparent;\n      border: none;\n    }\n  }\n"])));function ReactTableFlexLayout(e){var t=e.data,n=e.columns,a=e.onMouseDown,i=Object(Js.useTable)({columns:n,data:t},Js.useSortBy,Js.useFlexLayout),r=i.getTableProps,o=i.getTableBodyProps,c=i.headerGroups,l=i.rows,s=i.prepareRow;return Object(ye.c)("table",Object(v.a)(Object(v.a)({},r()),{},{css:eu,children:[Object(ye.b)("thead",{children:c.map((function(e){return Object(ye.b)("tr",Object(v.a)(Object(v.a)({},e.getHeaderGroupProps()),{},{children:e.headers.map((function(e){return Object(ye.c)("th",Object(v.a)(Object(v.a)({},e.getHeaderProps(e.getSortByToggleProps())),{},{children:[e.render("Header"),Object(ye.b)("span",{children:e.isSorted?e.isSortedDesc?" \u25bc":" \u25b2":""})]}),e.getHeaderProps().key)}))}),e.getHeaderGroupProps().key)}))}),Object(ye.b)("tbody",Object(v.a)(Object(v.a)({},o()),{},{style:{display:"block",height:"100%",overflowY:"auto"},children:l.map((function(e){return s(e),Object(ye.b)("tr",Object(v.a)(Object(v.a)({},e.getRowProps()),{},{onMouseDown:a,children:e.cells.map((function(e){return Object(ye.b)("td",Object(v.a)(Object(v.a)({},e.getCellProps()),{},{style:Object(v.a)(Object(v.a)({},e.getCellProps().style),{},{padding:"0px"}),children:e.render("Cell")}),e.getCellProps().key)}))}),e.getRowProps().key)}))}))]}))}ReactTableFlexLayout.defaultProps={onMouseDown:function onMouseDown(){return null}};var tu=Object(S.memo)(ReactTableFlexLayout);var nu={container:{height:"100%"},tableContainer:{height:"calc(100% - 30px)",overflow:"auto",display:"block"},searchInput:{width:"100%",borderRadius:"5px",border:"0.55px solid gray",padding:"5px",marginBottom:"2px"}};function InformationPanel(e){var t=e.info,n=e.meta,a=Object(S.useState)({}),i=Object(O.a)(a,2),r=i[0],o=i[1],c=Object(S.useState)([]),l=Object(O.a)(c,2),s=l[0],u=l[1],d=Object(S.useRef)(),b=Object(S.useCallback)((function(e){var t=Object.keys(r).filter((function(t){return t.toLowerCase().includes(e.target?e.target.value.toLowerCase():e.toLowerCase())}));u(t)}),[r]);Object(S.useEffect)((function(){d.current&&b(d.current.value)}),[b,d]),Object(S.useEffect)((function(){if(t&&n){var e=Object.keys(t).concat(Object.keys(n));u(e),o(Object(v.a)(Object(v.a)({},t),n))}}),[t,n]);var p=Object(S.useMemo)((function(){return[{Header:"Parameter",sortType:"basic",minWidth:100,width:20,maxWidth:20,Cell:function Cell(e){var t=e.row;return Object(I.jsx)("p",{style:{padding:"5px",backgroundColor:"white"},children:t.original})}},{Header:"Value",sortType:"basic",resizable:!0,Cell:function Cell(e){var t=e.row;return Object(I.jsx)("p",{style:{backgroundColor:"#efefef",height:"100%",padding:"5px",fontFamily:"monospace",whiteSpace:"pre",overflow:"hidden"},children:r[t.original].toString()})}}]}),[r]);return Object(I.jsxs)("div",{style:nu.container,children:[Object(I.jsx)("div",{children:Object(I.jsx)("input",{type:"text",style:nu.searchInput,placeholder:"Search for parameter...",onChange:b,ref:d})}),Object(I.jsx)("div",{style:nu.tableContainer,children:Object(I.jsx)(tu,{data:s,columns:p})})]})}var au=function InfoWrapper(e){var t=function Wrapper(t){var n=useChartData(),a=n.data,i=n.activeSpectrum,r=Object(S.useMemo)((function(){return a&&i&&i.id?a.find((function(e){return e.id===i.id}))||{info:{},meta:{}}:{}}),[i,a]),o=r.info,c=void 0===o?{}:o,l=r.meta,s=void 0===l?{}:l,u=t.forwardedRef,d=Object(fe.a)(t,["forwardedRef"]);return Object(I.jsx)(e,Object(v.a)(Object(v.a)({},d),{},{info:c,meta:s,ref:u}))};return Object(S.forwardRef)((function(e,n){return Object(I.jsx)(t,Object(v.a)(Object(v.a)({},e),{},{forwardedRef:n}))}))}(Object(S.memo)(InformationPanel)),iu=n(243),ru=n.n(iu);var ou,cu=function IntegralsWrapper(e){var t=function Wrapper(t){var n=useChartData(),a=n.data,i=n.activeSpectrum,r=n.xDomain,o=n.activeTab,c=n.tabActiveSpectrum,l=n.molecules,s=usePreferences(),u=Object(S.useMemo)((function(){return a&&i&&i.id?a.find((function(e){return e.id===i.id}))||{integrals:{},info:{}}:{}}),[i,a]),d=u.integrals,b=void 0===d?{}:d,p=u.info,f=void 0===p?{}:p,h=Object(S.useMemo)((function(){return c&&Object.keys(c).length>0?Object.keys(c):null}),[c]),m=t.forwardedRef,g=Object(fe.a)(t,["forwardedRef"]);return Object(I.jsx)(e,Object(v.a)(Object(v.a)({},g),{},{integrals:b,info:f,xDomain:r,preferences:s,activeTab:o,nucleus:h,molecules:l,ref:m}))};return Object(S.forwardRef)((function(e,n){return Object(I.jsx)(t,Object(v.a)(Object(v.a)({},e),{},{forwardedRef:n}))}))},lu=Object(y.a)(ou||(ou=Object(x.a)(["\n  display: flex;\n  flex-direction: column;\n  width: 450px;\n  padding: 5px;\n  button:focus {\n    outline: none;\n  }\n  .header {\n    height: 24px;\n    border-bottom: 1px solid #f0f0f0;\n    display: flex;\n    span {\n      color: #464646;\n      font-size: 15px;\n      flex: 1;\n    }\n\n    button {\n      background-color: transparent;\n      border: none;\n      svg {\n        height: 16px;\n      }\n    }\n  }\n  .container {\n    display: flex;\n    margin: 30px 5px;\n    input,\n    button {\n      padding: 5px;\n      border: 1px solid gray;\n      border-radius: 5px;\n      height: 36px;\n      margin: 2px;\n    }\n    input {\n      flex: 10;\n    }\n    button {\n      flex: 2;\n      color: white;\n      background-color: gray;\n    }\n  }\n"])));function changeSum_NumberInput_NumberInput(e){var t=e.onSave,n=e.onClose,a=e.header,i=Object(S.useRef)(),r=Object(S.useCallback)((function(){t(i.current.value)}),[t]),o=Object(S.useCallback)((function(e){"Enter"===e.key&&t(i.current.value)}),[t]);return Object(ye.c)("div",{css:lu,children:[Object(ye.c)("div",{className:"header handle",children:[Object(ye.b)("span",{children:a}),Object(ye.b)($e,{onClick:n})]}),Object(ye.c)("div",{className:"container",children:[Object(ye.b)("input",{ref:i,type:"number",placeholder:"Enter the new value",onKeyDown:o}),Object(ye.b)("button",{type:"button",onClick:r,children:"Set"})]})]})}changeSum_NumberInput_NumberInput.defaultProps={onSave:function onSave(){return null},onClose:function onClose(){return null}};var su,uu,du,bu,pu=changeSum_NumberInput_NumberInput,fu=n(650),hu=n.n(fu),mu=n(276),gu=n(773);function Arrow(e){var t=e.direction,n=e.onClick;return Object(ye.b)("div",{onClick:n,css:Object(y.a)(su||(su=Object(x.a)(["\n        display: flex;\n        position: absolute;\n        top: calc(50% - 18px);\n        ",";\n        height: 36px;\n        width: 36px;\n        justify-content: center;\n        background: white;\n        border-radius: 50%;\n        cursor: pointer;\n        align-items: center;\n        border: none;\n        transition: transform ease-in 0.1s;\n        &:hover {\n          transform: scale(1.2);\n          background-color: #607d8b;\n          color: white;\n        }\n        img {\n          transform: translateX(","px);\n          &:focus {\n            outline: 0;\n          }\n        }\n      "])),"right"===t?"right: 25px":"left: 25px","left"===t?"-2":"2"),children:Object(ye.b)(Xe.a,{style:{transform:"scaleX(".concat("right"===t?"-1":"1",")")}})})}function NextPrev(e){var t=e.children,n=e.loop,a=e.defaultIndex,i=e.onChange,r=Object(gu.a)(),o=Object(O.a)(r,2),c=o[0],l=o[1].width,s=Object(S.useState)(0),u=Object(O.a)(s,2),d=u[0],b=u[1];Object(S.useEffect)((function(){b(a)}),[a]);var p=Object(S.useMemo)((function(){return S.Children.map(t,(function(e){return Object(ye.b)("div",{css:Object(y.a)(uu||(uu=Object(x.a)(["\n              width: ","px;\n              height: 100%;\n            "])),l),children:e},e.key)}))}),[t,l]),f=Object(S.useCallback)((function(){b((function(e){if(e===p.length-1)return i(e),n?0:e;var t=e+1;return i(t),t}))}),[p.length,n,i]),h=Object(S.useCallback)((function(){b((function(e){if(0===e)return i(e),n?0:e;var t=e-1;return i(t),t}))}),[n,i]);return l||p?Object(ye.c)("div",{css:Object(y.a)(du||(du=Object(x.a)(["\n        position: relative;\n        height: 100%;\n        width: 100%;\n        margin: 0 auto;\n        overflow: hidden;\n        display: block;\n      "]))),ref:c,children:[Object(ye.b)("div",{css:Object(y.a)(bu||(bu=Object(x.a)(["\n          transform: translateX(-","px);\n          transition: transform ease-out ","s;\n          height: 100%;\n          width: ","px;\n          display: flex;\n        "])),l*d,.45,l*p.length),children:p}),0!==d&&Object(ye.b)(Arrow,{direction:"left",onClick:h}),d!==p.length-1&&Object(ye.b)(Arrow,{direction:"right",onClick:f})]}):null}NextPrev.defaultProps={loop:!1,defaultIndex:0,onChange:function onChange(){return null}};var ju,vu,Ou=Object(S.memo)(NextPrev),xu=Object(y.a)(ju||(ju=Object(x.a)(["\n  display: flex;\n  flex-direction: row;\n  border-top: 0.55px solid rgb(240, 240, 240);\n  border-bottom: 0.55px solid rgb(240, 240, 240);\n  padding: 0px 5px;\n\n  p {\n    margin: 0;\n    text-align: right;\n    width: 100%;\n    line-height: 22px;\n    padding: 0px 10px;\n  }\n"]))),yu=Object(y.a)(vu||(vu=Object(x.a)(["\n  width: 100%;\n  position: relative;\n  .slider {\n    height: 180px;\n    width: 100%;\n    padding: 0px;\n    padding: 0px;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    flex-direction: column;\n  }\n  .slider p {\n    width: 100%;\n    margin: 0 auto;\n    display: block;\n    position: relative;\n    text-align: center;\n  }\n  .slider svg polygon {\n    fill: gray !important;\n  }\n  button {\n    flex: 2;\n    padding: 5px;\n    border: 1px solid gray;\n    border-radius: 5px;\n    height: 36px;\n    margin: 0 auto;\n    margin-top: 15px;\n    display: block;\n    width: 20%;\n\n    color: white;\n    background-color: gray;\n  }\n"])));function MoleculeSelection(e){var t=e.molecules,n=e.onChange,a=Object(S.useState)(),i=Object(O.a)(a,2),r=i[0],o=i[1];Object(S.useEffect)((function(){t&&t.length>0&&o(0)}),[t]);var c=Object(S.useCallback)((function(e){o(e),n(e)}),[n]);return Object(ye.c)("div",{children:[Object(ye.b)("div",{css:xu,children:Object(ye.c)("p",{children:[t&&t.length>0&&"".concat(+(r+1)," / ").concat(t.length)," "]})}),Object(ye.b)("div",{css:yu,children:Object(ye.b)(Ou,{onChange:c,children:t&&t.map((function(e,t){return Object(ye.c)("div",{className:"slider",children:[Object(ye.b)("div",{children:Object(ye.b)(mu.a,{id:"molSVG".concat(t),width:120,molfile:e.molfile})}),Object(ye.c)("p",{children:[Object(ye.b)(hu.a,{mf:e.mf})," - ",e.mw.toFixed(2)]})]},e.key)}))})})]})}MoleculeSelection.defaultProps={onChange:function onChange(){return null}};var ku,Cu,Su,Du=MoleculeSelection,wu=Object(y.a)(ku||(ku=Object(x.a)(["\n  display: flex;\n  flex-direction: column;\n  flex-grow: 1;\n"]))),Tu=Object(y.a)(Cu||(Cu=Object(x.a)(["\n  display: flex;\n  flex-direction: column;\n  padding: 5px;\n\n  .optional {\n    margin-top: 5px;\n    margin-bottom: 5px;\n    padding: 0px 10px;\n\n    text-align: center;\n    font-size: 18px;\n    font-weight: bold;\n  }\n  .optional2 {\n    margin-top: 5px;\n    margin-bottom: 25px;\n    padding: 0px 10px;\n    width: 100%;\n\n    text-align: center;\n  }\n"]))),Mu=Object(y.a)(Su||(Su=Object(x.a)(["\n  button {\n    flex: 2;\n    padding: 5px;\n    border: 1px solid gray;\n    border-radius: 5px;\n    height: 36px;\n    margin: 0 auto;\n    margin-top: 15px;\n    display: block;\n    width: 20%;\n\n    color: white;\n    background-color: gray;\n  }\n\n  .newSumText {\n    margin-top: 15px;\n    padding: 0px 10px;\n    width: 100%;\n\n    text-align: center;\n  }\n"])));function SelectMolecule(e){var t=e.onSave,n=e.molecules,a=e.element,i=Object(S.useState)(),r=Object(O.a)(i,2),o=r[0],c=r[1],l=usePreferences().display,s=l.general,u=l.panels,d=Object(S.useMemo)((function(){return a&&n&&n.length>0&&void 0!==o&&n[o].atoms[a]?n[o].atoms[a]:0}),[o,a,n]);Object(S.useEffect)((function(){n&&n.length>0&&c(0)}),[n]);var b=Object(S.useCallback)((function(e){e.preventDefault(),t(d)}),[d,t]),p=Object(S.useCallback)((function(e){c(e)}),[]);return!s.hideSetSumFromMolecule&&!u.hideStructuresPanel&&a&&n&&n.length>0?Object(ye.c)("div",{css:wu,children:[Object(ye.c)("div",{css:Tu,children:[Object(ye.b)("p",{className:"optional",children:"OR"}),Object(ye.b)("p",{className:"optional2",children:"Select a molecule as reference!"})]}),Object(ye.c)("div",{css:Mu,children:[Object(ye.b)(Du,{molecules:n,onChange:p}),Object(ye.b)("button",{type:"button",onClick:b,children:"Set"}),Object(ye.c)("p",{className:"newSumText",children:["New sum for ",a," will be ",d,"!"]})]})]}):null}SelectMolecule.defaultProps={onSave:function onSave(){return null}};var Au,Eu=SelectMolecule,Pu=Object(y.a)(Au||(Au=Object(x.a)(["\n  display: flex;\n  flex-direction: column;\n  padding: 5px;\n"])));function ChangeSumModal(e){var t=e.onSave,n=e.onClose,a=e.header,i=e.molecules,r=e.element,o=Object(S.useCallback)((function(e){t(e)}),[t]),c=Object(S.useCallback)((function(e){t(e)}),[t]);return Object(ye.c)("div",{css:Pu,children:[Object(ye.b)(pu,{onSave:o,onClose:n,header:a}),Object(ye.b)(Eu,{onSave:c,molecules:i,element:r})]})}ChangeSumModal.defaultProps={onSave:function onSave(){return null},onClose:function onClose(){return null}};var Fu,_u=ChangeSumModal,Iu=Object(y.a)(Fu||(Fu=Object(x.a)(["\n  background-color: transparent;\n  border: none;\n  border-radius: 5px;\n\n  &:hover {\n    background-color: lightgray;\n  }\n\n  &.toggle-active {\n    background-color: gray;\n    color: white;\n  }\n"])));function ToggleButton(e){var t=e.children,n=e.style,a=e.onClick,i=e.popupTitle,r=e.popupPlacement,o=e.defaultValue,c=e.disabled,l=Object(S.useState)(o),s=Object(O.a)(l,2),u=s[0],d=s[1],b=Object(S.useCallback)((function(){a(!u),d(!u)}),[a,u]);return Object(ye.b)(We,{title:i,popupPlacement:r,children:Object(ye.b)("button",{disabled:c,css:Iu,style:n,className:u?"toogle toggle-active":"toggle",type:"button",onClick:b,children:t})})}ToggleButton.defaultProps={popupTitle:"",popupPlacement:"right",style:{},defaultValue:!1,onClick:function onClick(){return null},disabled:!1};var Nu,Ru=Object(S.memo)(ToggleButton),Lu=Object(y.a)(Nu||(Nu=Object(x.a)(["\n  \n  display: flex;\n  flex-direction: row;\n  border-bottom: 0.55px solid rgb(240, 240, 240);\n  padding: 0px 5px;\n\n  button {\n    background-color: transparent;\n    border: none;\n    padding: 5px;\n  }\n\n  button:disabled{\n    opacity:0.6;\n  }\n  \n  .counter-label {\n    margin: 0;\n    text-align: right;\n    width: 100%;\n    line-height: 22px;\n    padding: 0px 10px;\n  }\n\n  filter-button{\n    borderRadius: 5px;\n    marginTop: 3px;\n    marginLeft: 5px;\n    color: black;\n    backgroundColor: transparent;\n    border: none;\n    height: 16px;\n    width: 18px;\n    fontSize: 12px;\n    padding: 0;\n  },\n\n"])));function DefaultPanelHeader(e){var t=e.counter,n=e.onDelete,a=e.deleteToolTip,i=e.onFilter,r=e.filterToolTip,o=e.filterIsActive,c=e.counterFiltered,l=e.children,s=e.onSettingClick,u=e.showSettingButton,d=e.canDelete;return Object(ye.c)("div",{css:Lu,children:[d&&Object(ye.b)(We,{title:a,popupPlacement:"right",children:Object(ye.b)("button",{type:"button",onClick:n,disabled:0===t,children:Object(ye.b)(Xe.B,{})})}),i&&r?Object(ye.b)(Ru,{popupTitle:r,popupPlacement:"right",onClick:i,children:Object(ye.b)(Xe.s,{style:{pointerEvents:"none",fontSize:"12px"}})}):null,l,t?Object(ye.c)("p",{className:"counter-label",children:["["," ",o&&!0===o&&void 0!==c?"".concat(c,"/").concat(t):t," ","]"]}):Object(ye.b)("p",{style:{flex:1}}),u&&Object(ye.b)(We,{title:"preferences",popupPlacement:"left",children:Object(ye.b)("button",{type:"button",onClick:s,children:Object(ye.b)(Xe.d,{})})})]})}DefaultPanelHeader.defaultProps={counter:0,onDelete:function onDelete(){return null},deleteToolTip:"Delete",onFilter:function onFilter(){return null},filterToolTip:"",filterIsActive:!1,counterFiltered:0,onSettingClick:function onSettingClick(){return null},showSettingButton:!1,canDelete:!0};var zu,Hu=Object(S.memo)(DefaultPanelHeader),Bu=Object(y.a)(zu||(zu=Object(x.a)(["\n  background-color: transparent;\n  border: none;\n  height: 100%;\n  svg {\n    fill: green;\n    font-size: 16px;\n  }\n"])));function SaveButton(e){var t=e.onClick,n=e.popupTitle,a=e.popupPlacement,i=e.disabled,r=e.className;return Object(ye.b)("div",{className:r,children:Object(ye.b)(We,{title:n,popupPlacement:a,children:Object(ye.b)("button",{css:Bu,type:"button",onClick:t,disabled:i,className:r,children:Object(ye.b)(Xe.c,{})})})})}SaveButton.defaultProps={onClick:function onClick(){return null},popupTitle:"Save",popupPlacement:"left",disabled:!1,className:""};var Vu,Xu=Object(S.memo)(SaveButton),Yu=Object(y.a)(Vu||(Vu=Object(x.a)(["\n  display: flex;\n  flex-direction: row-reverse;\n  border-bottom: 0.55px solid rgb(240, 240, 240);\n\n  button {\n    background-color: transparent;\n    border: none;\n    padding: 5px;\n  }\n  button:disabled {\n    opacity: 0.6;\n  }\n"])));function PreferencesHeader(e){var t=e.onClose,n=e.onSave;return Object(ye.c)("div",{css:Yu,children:[Object(ye.b)($e,{onClick:t,popupTitle:"close Preferences"}),Object(ye.b)(Xu,{onClick:n,popupTitle:"save Preferences"})]})}var Zu=Object(S.memo)(PreferencesHeader),Uu=Object(S.forwardRef)((function EditableColumn(e,t){var n=e.onSave,a=e.value,i=e.type,r=e.style,o=e.onEditStart,c=e.editStatus,l=Object(S.useState)(),s=Object(O.a)(l,2),u=s[0],d=s[1],b=Object(S.useRef)();Object(S.useEffect)((function(){d(c)}),[c]),Object(S.useImperativeHandle)(t,(function(){return{startEdit:function startEdit(){d(!0)},closeEdit:function closeEdit(){d(!1)}}}));var p=Object(S.useCallback)((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;e?(o(t),d(e)):13===t.keyCode?(n(t),d(e)):27===t.keyCode&&d(e)}),[o,n]);return Object(I.jsxs)("div",{style:Object(v.a)({display:"table",width:"100%",height:"100%"},r),onDoubleClick:function onDoubleClick(e){return p(!0,e)},children:[!u&&Object(I.jsx)("span",{style:{display:"table-cell",verticalAlign:"middle"},children:a}),u&&Object(I.jsx)("div",{style:{display:"table-cell",verticalAlign:"middle"},children:Object(I.jsx)(Uc,{enableAutoSelect:!0,ref:b,value:a,type:i,onKeyDown:function onKeyDown(e){return p(!1,e)}})})]})}));Uu.defaultProps={onSave:function onSave(){return null},onEditStart:function onEditStart(){return null},type:"text",editStatus:!1};var Ku,Wu=Uu,Gu=Object(y.a)(Ku||(Ku=Object(x.a)(["\n  box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.25);\n  padding: 0px;\n  margin: 0px;\n  border-radius: 2px;\n  display: flex;\n  flex-direction: column;\n  position: fixed;\n  z-index: 99999;\n  padding: 2px;\n  background-color: white;\n  width: 150px;\n  pointer-events: all;\n\n  button {\n    background-color: transparent;\n    border: none;\n    border-bottom: 0.55px solid #f0f0f0;\n    font-size: 11px;\n    padding: 5px;\n    text-align: left;\n    outline: none;\n  }\n  button:hover {\n    background-color: #fafafa;\n    outline: none;\n  }\n\n  button:active {\n    background-color: #eaeaea;\n    outline: none;\n  }\n\n  button:last-of-type {\n    border: none;\n  }\n"])));function ContextMenu(e,t){var n=e.context,a=Object(S.useState)({lef:0,top:0}),i=Object(O.a)(a,2),r=i[0],o=i[1],c=useGlobal(),l=c.rootRef,s=c.elementsWraperRef,u=Object(S.useState)(),d=Object(O.a)(u,2),b=d[0],p=d[1],f=Object(S.useState)(),h=Object(O.a)(f,2),m=h[0],g=h[1],j=Object(S.useState)(null),v=Object(O.a)(j,2),x=v[0],y=v[1],k=Object(S.useRef)();Object(S.useEffect)((function(){return k.current=document.createElement("div"),s&&s.appendChild(k.current),function(){k.current&&s&&s.removeChild(k.current)}}),[s]);Object(S.useImperativeHandle)(t,(function(){return{handleContextMenu:function handleContextMenu(e,t){p(t),function contextMenuHandler(e){e.preventDefault(),y(e.target.parentElement),g(!0);var t=e.clientX,n=e.clientY,a=window.innerWidth-t>150,i=!a,r=window.innerHeight-n>0,c=!r;a&&(i="".concat(t+5,"px")),i&&(i="".concat(t-150-5,"px")),r&&(r="".concat(n+5,"px")),c&&(r="".concat(n-0-5,"px")),o({left:i,top:r})}(e)}}}));var C=Object(S.useCallback)((function(e,t){e.preventDefault(),t(b),g(!1)}),[b]);return Object(S.useEffect)((function(){var e=function _handleGlobalClick(e){x&&e.target.parentElement&&!e.target.parentElement.isSameNode(x)&&m&&g(!1)};return l&&l.addEventListener("click",e),function(){l&&l.removeEventListener("click",e)}}),[m,t,l,x]),m?k.current&&Object(de.createPortal)(n&&Object(ye.b)("div",{ref:t,css:[Gu,r],children:n.map((function(e,t){return Object(ye.b)("button",{type:"button",onClick:function onClick(t){return C(t,e.onClick)},children:e.label},t)}))}),k.current):null}var qu=Object(S.forwardRef)(ContextMenu),Ju=function ReactTableHeader(e){var t=e.headerGroups;return Object(I.jsx)("thead",{children:t.map((function(e){return Object(I.jsx)("tr",Object(v.a)(Object(v.a)({},e.getHeaderGroupProps()),{},{children:e.headers.map((function(e){return Object(I.jsxs)("th",Object(v.a)(Object(v.a)({},e.getHeaderProps(e.getSortByToggleProps())),{},{children:[e.render("Header"),Object(I.jsx)("span",{children:e.isSorted?e.isSortedDesc?" \u25bc":" \u25b2":""})]}),e.getHeaderProps().key)}))}),e.getHeaderGroupProps().key)}))})},$u=function ReactTableRow(e){var t=e.row,n=e.onContextMenu,a=Object(gi.c)([Object.prototype.hasOwnProperty.call(t.original,"id")?t.original.id:""]);return Object(ye.b)("tr",Object(v.a)(Object(v.a)(Object(v.a)({onContextMenu:n,css:a.isActive?$s:Object.prototype.hasOwnProperty.call(t.original,"isConstantlyHighlighted")&&!0===t.original.isConstantlyHighlighted?Qs:null},t.getRowProps()),a.onHover),{},{children:t.cells.map((function(e){var t=e.column,n=t.minWidth,a=t.maxWidth,i=t.width,r=t.padding;return Object(ye.b)("td",Object(v.a)(Object(v.a)({},e.getCellProps()),{},{onContextMenu:function onContextMenu(e){return e.preventDefault(),!1},style:{minWidth:n,maxWidth:a,width:i,padding:r},children:e.render("Cell")}),e.key)}))}),t.getRowProps().key)};function ReactTable(e){var t=e.data,n=e.columns,a=e.context,i=Object(S.useRef)(),r=Object(Js.useTable)({columns:n,data:t},Js.useSortBy),o=r.getTableProps,c=r.getTableBodyProps,l=r.headerGroups,s=r.rows,u=r.prepareRow,d=Object(S.useCallback)((function(e,t){checkModifierKeyActivated(e)||(e.preventDefault(),i.current.handleContextMenu(e,t.original))}),[i]);return Object(ye.c)(S.Fragment,{children:[Object(ye.c)("table",Object(v.a)(Object(v.a)({},o()),{},{css:eu,children:[Object(ye.b)(Ju,{headerGroups:l}),Object(ye.b)("tbody",Object(v.a)(Object(v.a)({},c()),{},{children:s.map((function(e){return u(e),Object(ye.b)($u,Object(v.a)(Object(v.a)({row:e},e.getRowProps()),{},{onContextMenu:function onContextMenu(t){return d(t,e)}}),e.key)}))}))]})),Object(ye.b)(qu,{ref:i,context:a})]})}ReactTable.defaultProps={context:null};var Qu=Object(S.memo)(ReactTable);var ed=function NoTableData(){return Object(I.jsx)("p",{style:{textAlign:"center",width:"100%",fontSize:"11px",padding:"5px",color:"gray"},children:"No Data"})},td={marginLeft:10,marginRight:10,border:"none"};function IntegralTable(e){var t=e.integrals,n=e.info,a=e.activeTab,i=e.xDomain,r=e.enableFilter,o=e.onFilter,c=e.preferences,l=useDispatch(),s=Object(S.useRef)([]),u=useGlobal().rootRef,d=Object(S.useCallback)((function(e,t){e.preventDefault(),e.stopPropagation();var n=t.original;l({type:Zt,integralID:n.id})}),[l]),b=Object(S.useCallback)((function(e,t){var n=Object(v.a)(Object(v.a)({},t.original),{},{kind:e});l({type:wn,data:n})}),[l]),p=Object(S.useMemo)((function(){return[{orderIndex:1,Header:"#",Cell:function Cell(e){return e.row.index+1},width:10},{orderIndex:2,Header:"From",accessor:"from",sortType:"basic",resizable:!0,Cell:function Cell(e){return e.row.original.from.toFixed(2)}},{orderIndex:3,Header:"To",accessor:"to",sortType:"basic",resizable:!0,Cell:function Cell(e){return e.row.original.to.toFixed(2)}},{orderIndex:6,Header:"Kind",accessor:"kind",sortType:"basic",resizable:!0,Cell:function Cell(e){var t=e.row;return Object(I.jsx)(is,{onChange:function onChange(e){return b(e,t)},data:cr,style:td,defaultValue:t.original.kind})}},{orderIndex:7,Header:"",width:"1%",maxWidth:"24px",minWidth:"24px",id:"delete-button",Cell:function Cell(e){var t=e.row;return Object(I.jsx)("button",{type:"button",className:"delete-button",onClick:function onClick(e){return d(e,t)},children:Object(I.jsx)(Xe.B,{})})}}]}),[b,d]),f=Object(S.useCallback)((function(e,t){l({type:Gn,value:e.target.value,id:t.id})}),[l]),h=Object(S.useCallback)((function(e){s.current.forEach((function(t,n){e!==n&&t&&t.closeEdit()}))}),[]);Object(S.useEffect)((function(){return u&&u.addEventListener("mousedown",h),function(){u&&u.removeEventListener("mousedown",h)}}),[h,u]);var m=Object(S.useMemo)((function(){var e=function setCustomColumn(e,t,n,a){e.push({orderIndex:t,Header:n,sortType:"basic",Cell:function Cell(e){var t=e.row;return a(t)}})},t=st(c,"formatting.panels.integrals.[".concat(a,"]")),n=Object(Li.a)(p);if(C()(t,"showAbsolute",ki.showAbsolute)&&e(n,4,"Absolute",(function(e){return Vi(e.original.absolute,C()(t,"absoluteFormat",ki.absoluteFormat))})),C()(t,"showRelative",ki.showRelative)){var i=a&&a.replace(/[0-9]/g,"");e(n,5,"Relative ".concat(i),(function(e){var n=Vi(e.original.integral,C()(t,"relativeFormat",ki.relativeFormat));return Object(I.jsx)(Wu,{onEditStart:function onEditStart(){return h(e.index)},ref:function ref(t){return s.current[e.index]=t},value:n,onSave:function onSave(t){return f(t,e.original)},type:"number"})}))}return n.sort((function(e,t){return e.orderIndex-t.orderIndex}))}),[a,p,h,c,f]),g=Object(S.useMemo)((function(){function isInRange(e,t){var n=1e4;return e*=n,(t*=n)>=i[0]*n&&e<=i[1]*n||e<=i[0]*n&&t>=i[1]*n}return 1===n.dimension&&t&&t.values?(r?t.values.filter((function(e){return isInRange(e.from,e.to)})):t.values).map((function(e){return Object(v.a)(Object(v.a)({},e),{},{isConstantlyHighlighted:isInRange(e.from,e.to)})})):[]}),[r,n.dimension,t,i]);return Object(S.useEffect)((function(){o(g.length)}),[g,o]),g&&g.length>0?Object(I.jsx)(Qu,{data:g,columns:m}):Object(I.jsx)(ed,{})}var nd,ad=cu(Object(S.memo)(IntegralTable)),id=n(414),rd=Object(y.a)(nd||(nd=Object(x.a)(["\n  display: flex;\n  margin: 5px 0px;\n\n.inputLabel{\n  flex: 2;\n  font-size: 11px;\n  font-weight: bold;\n  color: #232323;\n}\n\n.input {\n  width: '60%',\n  text-align: 'center',\n}\n\n.color{\n  width: 36px;\n  height: 14px;\n  border-radius: 2px;\n}\n\n.swatch{\n  padding: 5px;\n  background: #fff;\n  border-radius: 1px;\n  box-shadow: 0 0 0 1px rgba(0,0,0,.1);\n  display: inline-block;\n  cursor: pointer;\n}\n.color-popover {\n  position: absolute;\n  z-index: 2;\n}\n\n.cover {\n  position: fixed;\n  top: 0px;\n  right: 0px;\n  bottom: 0px;\n  left: 0px;\n}\n  .chrome-picker {\n    border-radius: none !important;\n    width: 200px !important;\n    height: 60px !important;\n    display: flex;\n\n\n  }\n  .chrome-picker > div:first-of-type {\n    padding: 0px !important;\n\n  }\n  .chrome-picker > div:last-child >  div:first-of-type {\n    width: 120px;\n\n  }\n  .chrome-picker > div:last-child >  div:last-child {\n    display:none !important;\n  }\n"])));function ColorInput(e){var t=e.label,n=e.onColorChange,a=e.name,i=e.value,r=Object(S.useState)(!1),o=Object(O.a)(r,2),c=o[0],l=o[1],s=Object(S.useState)(i),u=Object(O.a)(s,2),d=u[0],b=u[1],p=Object(S.useCallback)((function(){l(!c)}),[c]),f=Object(S.useCallback)((function(){l(!1)}),[]),h=Object(S.useCallback)((function(e){var t="".concat(e.hex).concat(Math.round(255*e.rgb.a).toString(16));b(t),n(Object(v.a)(Object(v.a)({},e),{},{hex:t,name:a}))}),[a,n]);return Object(ye.c)("div",{css:rd,children:[Object(ye.b)("span",{className:"inputLabel",children:t}),Object(ye.c)("div",{style:{flex:4},children:[Object(ye.c)("div",{className:"swatch",onClick:p,children:[Object(ye.b)("div",{className:"color",style:{backgroundColor:d}}),Object(ye.b)("input",{type:"hidden",value:d,name:a})]}),c?Object(ye.c)("div",{className:"color-popover",children:[Object(ye.b)("div",{className:"cover",onClick:f}),Object(ye.b)(id.ChromePicker,{color:{hex:d},onChangeComplete:h})]}):null]})]})}ColorInput.defaultProps={value:"#000000",label:"Color: ",onColorChange:function onColorChange(){return null}};var od=Object(S.memo)(ColorInput),cd={row:{display:"flex",margin:"5px 0px",alignItems:"center"},inputLabel:{flex:2,fontSize:"11px",fontWeight:"bold",color:"#232323"},input:{width:"60%",textAlign:"center"}};function ColumnFormatField(e){var t=e.label,n=e.checkControllerName,a=e.checked,i=e.format,r=e.formatControllerName,o=e.inputChangeHandler,c=e.groupID,l=Object(S.useState)(Boolean(a)),s=Object(O.a)(l,2),u=s[0],d=s[1];return Object(I.jsxs)("div",{style:cd.row,children:[Object(I.jsx)("span",{style:cd.inputLabel,children:t}),Object(I.jsxs)("div",{style:{flex:4,display:"flex",flexDirection:"row",alignItems:"center"},children:[Object(I.jsx)("input",{type:"checkbox",onChange:function onChange(e){return d(e.target.checked)},style:{margin:"0px 5px"},defaultChecked:u}),Object(I.jsx)("input",{name:"".concat(c,"-").concat(n),type:"hidden",value:u}),Object(I.jsx)(Uc,{style:{container:cd.input},name:"".concat(c,"-").concat(r),type:"text",onChange:o,value:i||""})]})]})}var ld=Object(S.memo)(ColumnFormatField),sd={container:{padding:10,backgroundColor:"#f1f1f1",height:"100%",flex:1},groupContainer:{padding:"5px",borderRadius:"5px",margin:"10px 0px",backgroundColor:"white"},row:{display:"flex",margin:"5px 0px"},header:{borderBottom:"1px solid #e8e8e8",paddingBottom:"5px",fontWeight:"bold",color:"#4a4a4a"},inputLabel:{flex:2,fontSize:"11px",fontWeight:"bold",color:"#232323"},input:{width:"30%",textAlign:"center"}},ud=[{id:1,label:"Absolute :",checkController:"showAbsolute",formatController:"absoluteFormat",defaultFormat:"0.00"},{id:2,label:"Relative :",checkController:"showRelative",formatController:"relativeFormat",defaultFormat:"00.00"}];function IntegralsPreferences(e,t){var n=e.nucleus,a=e.preferences,i=Mc(),r=useStateWithLocalStorage("nmr-general-settings"),o=Object(O.a)(r,2)[1],c=Object(S.useState)(null),l=Object(O.a)(c,2),s=l[0],u=l[1],d=Object(S.useRef)();Object(S.useEffect)((function(){var e=st(a,"formatting.panels.integrals");e&&u(e)}),[a]);var b=function saveToLocalStorgate(e){o(e,"formatting.panels.integrals")},p=Object(S.useCallback)((function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];a.dispatch({type:Nl,payload:{key:"integrals",value:e}}),t&&i.success("Integrals preferences saved successfully")}),[i,a]);Object(S.useImperativeHandle)(t,(function(){return{saveSetting:function saveSetting(){"function"===typeof d.current.requestSubmit?d.current.requestSubmit():d.current.dispatchEvent(new Event("submit",{cancelable:!0}))}}}));var f=function(){var e=Object(Br.a)(Hr.a.mark((function _callee(e){var t,n,a,i,r,o,c,l;return Hr.a.wrap((function _callee$(s){for(;;)switch(s.prev=s.next){case 0:e.preventDefault(),t=e.target,n=new FormData(t),a={},i=Object(ac.a)(n.entries());try{for(i.s();!(r=i.n()).done;)o=r.value,c=o[0].split("-").join("."),l=["true","false"].includes(o[1])?"true"===o[1]:o[1],a=ct()(a,c,l)}catch(u){i.e(u)}finally{i.f()}p(a,!0),b(a);case 8:case"end":return s.stop()}}),_callee)})));return function handleSubmit(t){return e.apply(this,arguments)}}(),h=Object(S.useCallback)((function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(s){var a=null===t[0]?s[t[1]]:C()(s,t.join("."));return a||null}var i=t.length-1;return ki[t[i]]}),[s]);return Object(I.jsx)("div",{style:sd.container,children:Object(I.jsxs)("form",{onSubmit:f,ref:d,children:[Object(I.jsxs)("div",{style:sd.groupContainer,children:[Object(I.jsx)("p",{style:sd.header,children:"General"}),Object(I.jsx)(od,{name:"color",value:"".concat(h(null,"color"))}),Object(I.jsx)(Ql,{name:"strokeWidth",label:"stroke width :",style:{label:{fontSize:"11px",fontWeight:"bold",color:"#232323"},input:{width:"60%",textAlign:"center",borderRadius:"5px"}},defaultValue:Number(h(null,"strokeWidth")),min:1,pattern:"[1-9]*"})]}),n&&n.map((function(e){return Object(I.jsxs)("div",{style:sd.groupContainer,children:[Object(I.jsx)("p",{style:sd.header,children:Object(I.jsx)($o.a,{mf:e})}),ud.map((function(t){return Object(I.jsx)(ld,{label:t.label,checked:h(e,t.checkController),format:h(e,t.formatController),checkControllerName:t.checkController,formatControllerName:t.formatController,groupID:e},t.id)}))]},e)}))]})})}var dd,bd=cu(Object(S.forwardRef)(IntegralsPreferences)),pd=Object(y.a)(dd||(dd=Object(x.a)(["\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n\n  .sum-button {\n    width: 22px;\n    height: 22px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n  }\n"])));function IntegralPanel(e){var t=e.integrals,n=e.activeTab,a=e.molecules,i=Object(S.useState)(!1),r=Object(O.a)(i,2),o=r[0],c=r[1],l=Object(S.useState)(0),s=Object(O.a)(l,2),u=s[0],d=s[1],b=useDispatch(),p=ie(),f=Object(S.useState)(!1),h=Object(O.a)(f,2),m=h[0],g=h[1],j=Object(S.useRef)(),v=Object(S.useCallback)((function(){b({type:Zt,integralID:null})}),[b]),x=Object(S.useCallback)((function(){p.showConfirmDialog({message:"All records will be deleted, Are You sure?",buttons:[{text:"Yes",handler:v},{text:"No"}]})}),[p,v]),y=Object(S.useCallback)((function(e){void 0!==e&&b({type:Mn,value:e}),p.close()}),[b,p]),k=Object(S.useMemo)((function(){return C()(t,"options.sum",null)}),[t]),D=Object(S.useCallback)((function(){p.show(Object(ye.b)(_u,{onClose:function onClose(){return p.close()},onSave:y,header:k?"Set new Integrals Sum (Current: ".concat(Number(k).toFixed(2),")"):"Set new Integrals Sum",molecules:a,element:n?n.replace(/[0-9]/g,""):null}))}),[n,y,k,p,a]),w=Object(S.useCallback)((function(){g(!m)}),[m]),T=Object(S.useCallback)((function(){j.current.saveSetting(),g(!1)}),[]),M=Object(S.useCallback)((function(){c(!o)}),[o]),A=Object(S.useCallback)((function(e){d(e)}),[]);return Object(ye.b)(S.Fragment,{children:Object(ye.c)("div",{css:pd,children:[!m&&Object(ye.b)(Hu,{counter:u,onDelete:x,deleteToolTip:"Delete All Integrals",onFilter:M,filterToolTip:o?"Show all integrals":"Hide integrals out of view",filterIsActive:o,counterFiltered:u,showSettingButton:"true",onSettingClick:w,children:Object(ye.b)(We,{title:k?"Change Integrals Sum (".concat(Number(k).toFixed(2),")"):"Change Integrals Sum",popupPlacement:"right",children:Object(ye.b)("button",{className:"sum-button",type:"button",onClick:D,children:Object(ye.b)(ul.w,{})})})}),m&&Object(ye.b)(Zu,{onSave:T,onClose:w}),Object(ye.b)("div",{style:{height:"100%",overflow:"hidden"},children:Object(ye.c)(ru.a,{isFlipped:m,infinite:!0,containerStyle:{overflow:"hidden",height:"100%"},children:[Object(ye.b)("div",{style:{overflow:"auto",height:"100%",display:"block"},children:Object(ye.b)(ad,{enableFilter:o,onFilter:A})}),Object(ye.b)(bd,{ref:j})]})})]})})}var fd,hd=cu(Object(S.memo)(IntegralPanel)),md=n(768),gd=Object(y.a)(fd||(fd=Object(x.a)(["\n  .menu {\n    box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.5);\n    padding: 0px;\n    margin: 0px;\n    border-radius: 5px;\n    display: flex;\n    flex-direction: column;\n    position: absolute;\n    z-index: 99999;\n    padding: 2px;\n    background-color: white;\n\n    button:hover {\n      background-color: #fafafa;\n    }\n  }\n\n  .menu-cover {\n    position: fixed;\n    width: 100%;\n    height: 100%;\n    top: 0;\n    left: 0;\n    z-index: 1;\n  }\n\n  .menu-item {\n    background-color: transparent;\n    border: none;\n    border-bottom: 0.55px solid whitesmoke;\n    height: 35px;\n    outline: outline;\n    display: table-cell;\n    vertical-align: middle;\n    text-align: left;\n    padding: 0 10px;\n\n    svg {\n      display: inline-block;\n    }\n\n    :focus {\n      outline: none !important;\n    }\n    span {\n      font-size: 10px;\n      padding: 0px 10px;\n    }\n  }\n"])));function MenuItem(e){var t=e.icon,n=e.label,a=e.onClick;return Object(ye.c)("button",{type:"button",className:"menu-item",onClick:a,children:[t,Object(ye.b)("span",{children:n})]})}function MenuList(e){var t=e.items,n=e.boxBounding,a=e.onClick;return Object(ye.b)("div",{className:"menu",style:{transform:"translate(".concat(n.width,"px, -").concat(n.height,"px) ")},children:t&&t.map((function(e){return Object(ye.b)(MenuItem,Object(v.a)(Object(v.a)({},e),{},{onClick:function onClick(){return a(e)}}),"".concat(e.id))}))})}var jd=function MenuButton(e){var t=e.style,n=e.component,a=e.toolTip,i=void 0===a?"":a,r=e.className,o=e.items,c=void 0===o?[]:o,l=e.onClick,s=void 0===l?function(){return null}:l,u=Object(S.useRef)(),d=Object(S.useState)(!1),b=Object(O.a)(d,2),p=b[0],f=b[1],h=Object(S.useCallback)((function(){f(!1)}),[]),m=Object(S.useCallback)((function(){f((function(e){return!e}))}),[]),g=Object(S.useCallback)((function(e){f(!1),s(e)}),[s]);return Object(ye.c)("div",{style:{height:"auto"},css:gd,children:[Object(ye.b)("button",{ref:u,type:"button",css:t,onClick:m,className:r,style:{boxSizing:"border-box"},children:Object(ye.b)(We,{title:i,popupPlacement:"right",children:n})}),p&&Object(ye.b)(MenuList,{items:c,boxBounding:u.current.getBoundingClientRect(),onClick:g}),p&&Object(ye.b)("div",{className:"menu-cover",onClick:h})]})};var vd,Od=function MoleculeWrapper(e){var t=function Wrapper(t){var n=useChartData(),a=n.data,i=n.activeSpectrum,r=n.molecules,o=n.displayerMode,c=n.activeTab,l=Object(S.useMemo)((function(){return a&&i&&i.id?a.find((function(e){return e.id===i.id}))||{ranges:{},zones:{}}:{}}),[i,a]),s=l.ranges,u=void 0===s?{}:s,d=l.zones,b=void 0===d?{}:d,p=t.forwardedRef,f=Object(fe.a)(t,["forwardedRef"]);return Object(I.jsx)(e,Object(v.a)(Object(v.a)({},f),{},{ranges:u,zones:b,molecules:r,displayerMode:o,activeTab:c,ref:p}))};return Object(S.memo)(Object(S.forwardRef)((function(e,n){return Object(I.jsx)(t,Object(v.a)(Object(v.a)({},e),{},{forwardedRef:n}))})))},xd=Object(y.a)(vd||(vd=Object(x.a)(["\n  -moz-box-shadow: inset 0px 1px 0px 0px #ffffff;\n  -webkit-box-shadow: inset 0px 1px 0px 0px #ffffff;\n  box-shadow: inset 0px 1px 0px 0px #ffffff;\n  background: -webkit-gradient(\n    linear,\n    left top,\n    left bottom,\n    color-stop(0.05, #ffffff),\n    color-stop(1, #f6f6f6)\n  );\n  background: -moz-linear-gradient(top, #ffffff 5%, #f6f6f6 100%);\n  background: -webkit-linear-gradient(top, #ffffff 5%, #f6f6f6 100%);\n  background: -o-linear-gradient(top, #ffffff 5%, #f6f6f6 100%);\n  background: -ms-linear-gradient(top, #ffffff 5%, #f6f6f6 100%);\n  background: linear-gradient(to bottom, #ffffff 5%, #f6f6f6 100%);\n  filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#ffffff', endColorstr='#f6f6f6',GradientType=0);\n  background-color: #ffffff;\n  border: 0.55px solid #dcdcdc;\n  display: inline-block;\n  cursor: pointer;\n  color: #666666;\n  font-weight: bold;\n  padding: 6px 24px;\n  text-decoration: none;\n  text-shadow: 0px 1px 0px #ffffff;\n\n  :hover {\n    background: -webkit-gradient(\n      linear,\n      left top,\n      left bottom,\n      color-stop(0.05, #f6f6f6),\n      color-stop(1, #ffffff)\n    );\n    background: -moz-linear-gradient(top, #f6f6f6 5%, #ffffff 100%);\n    background: -webkit-linear-gradient(top, #f6f6f6 5%, #ffffff 100%);\n    background: -o-linear-gradient(top, #f6f6f6 5%, #ffffff 100%);\n    background: -ms-linear-gradient(top, #f6f6f6 5%, #ffffff 100%);\n    background: linear-gradient(to bottom, #f6f6f6 5%, #ffffff 100%);\n    filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#f6f6f6', endColorstr='#ffffff',GradientType=0);\n    background-color: #f6f6f6;\n  }\n"])));var yd=function MoleculeStructureEditorModal(e){var t=e.onClose,n=e.open,a=e.selectedMolecule,i=Object(S.useState)(null),r=Object(O.a)(i,2),o=r[0],c=r[1],l=useDispatch();Object(S.useEffect)((function(){c(a?a.molfile:null)}),[a,n]);var s=Object(S.useCallback)((function(e){c(e)}),[c]),u=Object(S.useCallback)((function(){t()}),[t]),d=Object(S.useCallback)((function(){a?(l({type:Gt,molfile:o,key:a.key}),t("replace")):(l({type:Wt,molfile:o}),t("new"))}),[l,a,o,t]);return Object(ye.c)(se,{open:n,onClose:u,children:[Object(ye.b)(mu.b,{initialMolfile:a&&a.molfile,svgMenu:!0,fragment:!1,onChange:s}),Object(ye.c)("div",{style:{display:"flex",alignItems:"flex-end",justifyContent:"flex-end",margin:5},children:[Object(ye.b)("button",{type:"button",css:xd,onClick:u,children:"Close"}),Object(ye.b)("button",{type:"button",css:xd,onClick:d,children:"Save"})]})]})};var kd=function IsotopesViewer(e){var t=e.value,n=void 0===t?"":t,a=Object(fe.a)(e,["value"]);return Object(I.jsx)("div",Object(v.a)(Object(v.a)({},a),{},{dangerouslySetInnerHTML:{__html:n.replace(/([0-9]+)/g,"<sup>$1</sup>")}}))},Cd=function FormikSelect(e){var t=e.name,n=e.value,a=e.onChange,i=Object(fe.a)(e,["name","value","onChange"]),r=Object(Rc.f)(),o=r.values,c=r.setFieldValue,l=Object(S.useCallback)((function(e){a(e),c(t,e)}),[t,a,c]);return Object(S.useEffect)((function(){n&&c(t,n)}),[t,c,n]),Object(I.jsx)(is,Object(v.a)({name:t,defaultValue:n||C()(o,t),onChange:l},i))};Cd.defaultProps=is.defaultProps;var Sd,Dd=Cd,wd=Object(y.a)(Sd||(Sd=Object(x.a)(["\n  .row {\n    align-items: center;\n  }\n\n  .inner-content {\n    flex: 1;\n  }\n\n  .custom-label {\n    width: 155px;\n  }\n"]))),Td=[{key:1,value:60,label:"60 MHz"},{key:2,value:100,label:"100 MHz"},{key:3,value:200,label:"200 MHz"},{key:4,value:300,label:"300 MHz"},{key:5,value:400,label:"400 MHz"},{key:6,value:500,label:"500 MHz"},{key:7,value:600,label:"600 MHz"},{key:8,value:800,label:"800 MHz"},{key:9,value:1e3,label:"1000 MHz"},{key:10,value:1200,label:"1200 MHz"}],Md={"1h":{from:-1,to:12},"13c":{from:-5,to:220},frequency:400,spectra:{"1h":!0,"13c":!1,cosy:!1,hsqc:!1,hmbc:!1}};var Ad,Ed,Pd,Fd=function PredictSpectraModal(e){var t=e.onClose,n=e.molfile,a=Object(S.useRef)(),i=useDispatch(),r=Object(S.useCallback)((function(){a.current.submitForm()}),[]),o=Object(S.useCallback)((function(e){i({type:Cn,isLoading:!0}),i({type:oa,payload:{mol:n,options:e}}),t()}),[i,n,t]);return Object(ye.c)("div",{css:[qc,wd],children:[Object(ye.c)("div",{className:"header handle",children:[Object(ye.b)("span",{children:"Predict Spectra"}),Object(ye.b)($e,{onClick:t,className:"close-bt"})]}),Object(ye.b)("div",{className:"inner-content",children:Object(ye.c)(Vc,{ref:a,initialValues:Md,onSubmit:o,children:[Object(ye.c)("div",{className:"row margin-10",children:[Object(ye.b)("span",{className:"custom-label",children:"Spectrometer Frequency :"}),Object(ye.b)(Dd,{data:Td,style:{width:290,height:30,margin:0},name:"frequency"})]}),Object(ye.c)("div",{className:"row margin-10",children:[Object(ye.b)(kd,{value:"1H",className:"custom-label"}),Object(ye.b)(Gc,{label:"From",name:"1h.from",type:"number",style:{label:{padding:"0 10px 0 0"}}}),Object(ye.b)(Gc,{label:"To",name:"1h.to",type:"number",style:{label:{padding:"0 10px"}}})]}),Object(ye.c)("div",{className:"row margin-10",children:[Object(ye.b)(kd,{value:"13C",className:"custom-label"}),Object(ye.b)(Gc,{label:"From",name:"13c.from",type:"number",style:{label:{padding:"0 10px 0 0"}}}),Object(ye.b)(Gc,{label:"To",name:"13c.to",type:"number",style:{label:{padding:"0 10px"}}})]}),Object(ye.b)("div",{className:"row margin-10",children:Object(ye.b)("span",{className:"custom-label",children:"Spectra "})}),Object(ye.c)("div",{className:"row margin-10",style:{justifyContent:"space-between"},children:[Object(ye.c)("div",{className:"row",children:[Object(ye.b)(Hc,{name:"spectra.1h"}),Object(ye.b)(kd,{value:"1H",style:{padding:" 0 10px"}})]}),Object(ye.c)("div",{className:"row",children:[Object(ye.b)(Hc,{disabled:!0,name:"spectra.13c"}),Object(ye.b)(kd,{value:"13C",style:{padding:" 0 10px"}})]}),Object(ye.c)("div",{className:"row",children:[Object(ye.b)(Hc,{disabled:!0,name:"spectra.cosy"}),Object(ye.b)(kd,{value:"cosy",style:{padding:" 0 10px"}})]}),Object(ye.c)("div",{className:"row",children:[Object(ye.b)(Hc,{disabled:!0,name:"spectra.hsqc"}),Object(ye.b)(kd,{value:"HSQC",style:{padding:" 0 10px"}})]}),Object(ye.c)("div",{className:"row",children:[Object(ye.b)(Hc,{disabled:!0,name:"spectra.hmbc"}),Object(ye.b)(kd,{value:"HMBC",style:{padding:" 0 10px"}})]})]})]})}),Object(ye.b)("div",{className:"footer-container",children:Object(ye.b)("button",{type:"button",onClick:r,className:"save-button",children:"Start Predicting"})})]})},_d=function extractFromAtom(e,t,n){if(t.length>0&&Object.keys(e).length>0){var a="x"===n?0:"y"===n?1:void 0;if(void 0===a)return{oclIDs:[e.oclID].concat(e.hydrogenOCLIDs),nbAtoms:e.nbAtoms+e.nbAtoms*e.nbHydrogens};if(t[a]===e.atomLabel)return{oclIDs:[e.oclID],nbAtoms:e.nbAtoms};if("H"===t[a])return{oclIDs:e.hydrogenOCLIDs,nbAtoms:e.nbAtoms*e.nbHydrogens}}return{oclIDs:[],nbAtoms:0}},Id=function findDatumAndSignalIndex(e,t){var n,a=e.find((function(e){return e.id===t}));if(!a)for(var i=0;i<e.length;i++)if((n=e[i].signal.findIndex((function(e){return e.id===t})))>=0){a=e[i];break}return{datum:a,signalIndex:n}},Nd=Object(y.a)(Ad||(Ad=Object(x.a)(["\n  display: flex;\n  flex-direction: column;\n  flex-grow: 1;\n  width: 100%;\n  height: 100%;\n"]))),Rd=Object(y.a)(Ed||(Ed=Object(x.a)(["\n  display: flex;\n  flex-direction: row;\n  border-bottom: 0.55px solid rgb(240, 240, 240);\n  padding: 0px 5px;\n\n  button svg {\n    fill: #4e4e4e;\n  }\n\n  button {\n    background-color: transparent;\n    border: none;\n    padding: 5px;\n  }\n\n  p {\n    margin: 0;\n    text-align: right;\n    width: 100%;\n    line-height: 22px;\n    padding: 0px 10px;\n  }\n"]))),Ld=Object(y.a)(Pd||(Pd=Object(x.a)(["\n  width: 100%;\n  height: 100%;\n\n  .slider {\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n    height: 100%;\n    padding: 0px;\n    .mol-svg-container {\n      height: calc(100% - 25px);\n      width: 100%;\n      div {\n        width: 100%;\n        height: 100%;\n      }\n    }\n\n    p {\n      width: 100%;\n      margin: 0 auto;\n      display: block;\n      position: relative;\n      text-align: center;\n    }\n\n    svg polygon {\n      fill: gray !important;\n    }\n  }\n"]))),zd=[{id:"molfile",icon:Object(ye.b)(Xe.e,{}),label:"Copy as molfile"},{id:"png",icon:Object(ye.b)(Xe.q,{}),label:"Copy as PNG"},{id:"svg",icon:Object(ye.b)(Xe.h,{}),label:"Export as SVG"}];function MoleculePanel(e){var t=e.zones,n=e.ranges,a=e.molecules,i=e.activeTab,r=e.displayerMode,o=Object(gu.a)(),c=Object(O.a)(o,2),l=c[0],s=c[1],u=s.width,d=s.height,b=Object(S.useState)(!1),p=Object(O.a)(b,2),f=p[0],h=p[1],m=Object(S.useState)(),g=Object(O.a)(m,2),j=g[0],v=g[1],x=Object(S.useState)(0),y=Object(O.a)(x,2),k=y[0],C=y[1],D=Object(S.useState)([]),w=Object(O.a)(D,2),T=w[0],M=w[1],A=Object(S.useState)(null),E=Object(O.a)(A,2),P=E[0],F=E[1],_=useDispatch(),I=Mc(),N=ie(),R=Object(gi.d)(),L=useAssignmentData(),z=Object(S.useState)([]),H=Object(O.a)(z,2),B=H[0],V=H[1];Object(S.useEffect)((function(){if(i){var e=i.split(",");1===e.length?V([i.replace(/[0-9]/g,"")]):2===e.length&&V(e.map((function(e){return e.replace(/[0-9]/g,"")})))}else V([])}),[i]);var X=useAssignment(void 0!==L.assignment.activeID?L.assignment.activeID:"___"),Y=Object(S.useMemo)((function(){if(t||n){if(r===jo.DM_1D&&n&&n.values)return n.values;if(r===jo.DM_2D&&t&&t.values)return t.values}return[]}),[r,n,t]),Z=Object(S.useMemo)((function(){var e={x:[],y:[]};for(var t in L.assignment.assignment){var n,a;if(L.assignment.assignment[t].x)(n=e.x).push.apply(n,Object(Li.a)(L.assignment.assignment[t].x));if(L.assignment.assignment[t].y)(a=e.y).push.apply(a,Object(Li.a)(L.assignment.assignment[t].y))}return e}),[L.assignment]),U=Object(S.useMemo)((function(){return Z.x.concat(Z.y)}),[Z.x,Z.y]),K=Object(S.useCallback)((function(e,t){return U.some((function(e){return t.oclIDs.includes(e)}))&&!e.some((function(e){return t.oclIDs.includes(e)}))?(I.info("Atom is already assigned to another signal!"),e):function toggleDiaIDs(e,t){var n=e?e.slice():[];if(1===t.oclIDs.length)if(n.includes(t.oclIDs[0]))n=n.filter((function(e){return e!==t.oclIDs[0]}));else for(var a=0;a<t.nbAtoms;a++)n.push(t.oclIDs[0]);else t.oclIDs.length>1&&t.oclIDs.forEach((function(e){n.includes(e)?n=n.filter((function(t){return t!==e})):n.push(e)}));return n}(e,t)}),[I,U]),W=Object(S.useCallback)((function(e){if(X.isActive){var t=_d(e,B,X.activeAxis);if(t.nbAtoms>0){t.oclIDs.forEach((function(e){X.toggle(e)}));var n=Id(Y,X.id),a=n.datum,i=n.signalIndex;if(a){var o=[];void 0===i?r===jo.DM_1D?o=K(a.diaID||[],t):r===jo.DM_2D&&(o=K(a[X.activeAxis].diaID||[],t)):a.signal&&a.signal[i]&&(r===jo.DM_1D?o=K(a.signal[i].diaID||[],t):r===jo.DM_2D&&(o=K(a.signal[i][X.activeAxis].diaID||[],t))),r===jo.DM_1D?_({type:Wn,payload:{rangeData:a,diaID:o,signalIndex:i}}):r===jo.DM_2D&&_({type:ra,payload:{zoneData:a,diaID:o,axis:X.activeAxis,signalIndex:i}})}}else I.info("Not assigned! Different atom type or no attached hydrogens found!")}}),[X,I,Y,_,r,B,K]),q=Object(S.useMemo)((function(){return function getCurrentDiaIDsToHighlight(e,t){var n=e.assignment.isOnHover?e.assignment.assignment[e.assignment.onHoverID]:null,a=e.assignment.isOnHover?e.assignment.onHoverAxis:null;return n?t===jo.DM_1D?n.x||[]:t===jo.DM_2D?a?"x"===a?n.x||[]:"y"===a?n.y||[]:(n.x||[]).concat(n.y||[]):(n.x||[]).concat(n.y||[]):[]:[]}(L,r)}),[L,r]);Object(S.useEffect)((function(){P&&("show"===P?R.dispatch({type:"SHOW",payload:{convertedHighlights:T}}):"hide"===P&&(R.dispatch({type:"HIDE",payload:{convertedHighlights:T}}),M([])),F(null))}),[P,T,R]);var J=Object(S.useCallback)((function(e){var t=_d(e,B,X.activeAxis).oclIDs;if(t.length>0){var n=function getHighlightsOnHover(e,t,n){var a=[];for(var i in e.assignment.assignment){var r=void 0,o=void 0,c=!1;if(e.assignment.assignment[i].x&&e.assignment.assignment[i].x.some((function(e){return t.includes(e)}))){a=a.concat(e.assignment.assignment[i].x);var l=Id(n,i);r=l.datum,o=l.signalIndex,c=!0}if(e.assignment.assignment[i].y&&e.assignment.assignment[i].y.some((function(e){return t.includes(e)}))){a=a.concat(e.assignment.assignment[i].y);var s=Id(n,i);r=s.datum,o=s.signalIndex,c=!0}if(r&&(a.push(r.id),void 0!==o&&a.push(r.signal[o].id)),c)break}return a}(L,t,Y);M(n),F("show")}else F("hide")}),[X.activeAxis,L,Y,B]),$=Object(S.useCallback)((function(e){h(!1),"new"===e&&C(a.length)}),[a.length]),Q=Object(S.useCallback)((function(e,t,n){v(n?{molfile:n,key:t}:null),h(!0)}),[]),ee=Object(S.useCallback)((function(){navigator.clipboard.readText().then((function(e){_({type:Wt,molfile:e})}))}),[_]),te=Object(S.useCallback)((function(){a[k]&&a[k].key&&(C(0),_({type:qt,payload:{key:a[k].key,assignmentData:L}}))}),[a,k,L,_]),ne=Object(S.useCallback)((function(){Object(el.h)("molFile","molSVG".concat(k))}),[k]),ae=Object(S.useCallback)((function(){Object(el.b)("molSVG".concat(k)),I.success("MOL copied as PNG to clipboard")}),[I,k]),re=Object(S.useCallback)((function(){a[k]&&(Object(el.c)(a[k].molfile)?I.success("MOLFile copied to clipboard"):I.error("copied not completed"))}),[I,k,a]),oe=Object(S.useCallback)((function(e,t){_({type:Gt,molfile:t,key:e})}),[_]),ce=Object(S.useCallback)((function(){N.show(Object(ye.b)(Fd,{onSave:function onSave(){N.close()},molfile:a[k]}),{position:G.TOP_CENTER,enableResizing:!0,width:600,height:350})}),[N,a,k]),le=Object(S.useCallback)((function(e){switch(e.id){case"molfile":re();break;case"png":ae();break;case"svg":ne()}}),[re,ae,ne]);return Object(ye.c)("div",{css:Nd,children:[Object(ye.c)("div",{css:Rd,children:[Object(ye.b)(jd,{component:Object(ye.b)(Xe.p,{}),toolTip:"Export As",items:zd,onClick:le}),Object(ye.b)(We,{title:"Paste molfile",popupPlacement:"left",children:Object(ye.b)("button",{className:"bar-button",type:"button",onClick:ee,children:Object(ye.b)(Xe.x,{})})}),Object(ye.b)(We,{title:"Add Molecule",popupPlacement:"left",children:Object(ye.b)("button",{className:"bar-button",type:"button",onClick:Q,children:Object(ye.b)(Xe.y,{})})}),Object(ye.b)(We,{title:"Delete Molecule",popupPlacement:"left",children:Object(ye.b)("button",{className:"bar-button",type:"button",onClick:te,children:Object(ye.b)(Xe.B,{})})}),Object(ye.b)(dl,{popupTitle:"Predict Spectra",popupPlacement:"left",onClick:ce,disabled:!a||0===a.length,children:Object(ye.b)(ul.j,{})}),Object(ye.c)("p",{children:[a&&a.length>0&&"".concat(+(k+1)," / ").concat(a.length)," "]})]}),Object(ye.c)("div",{css:Ld,children:[Object(ye.b)(Ou,{onChange:function onChange(e){return C(e)},defaultIndex:k,children:a&&a.length>0?a.map((function(e,t){return Object(ye.c)("div",{className:"slider",onDoubleClick:function onDoubleClick(t){return Q(t,e.key,e.molfile)},style:{backgroundColor:(t+1)%2!==0?"#fafafa":"white"},children:[Object(ye.b)("div",{className:"mol-svg-container",ref:l,children:Object(ye.b)(md.a,{OCL:Nc.a,id:"molSVG".concat(t),width:u>0?u:100,height:d>0?d:100,molfile:e.molfile,setMolfile:function setMolfile(t){return oe(e.key,t)},setSelectedAtom:W,atomHighlightColor:q&&q.length>0?"red":"#FFD700",atomHighlightOpacity:.35,highlights:q&&q.length>0?q:U,setHoverAtom:J})}),Object(ye.c)("p",{children:[Object(ye.b)($o.a,{mf:e.mf})," - ",e.mw.toFixed(2)]})]},e.key)})):Object(ye.b)("div",{style:{width:"100%",height:"100%"},onClick:Q})}),Object(ye.b)(yd,{open:f,onClose:$,selectedMolecule:j})]})]})}var Hd=Od(Object(S.memo)(MoleculePanel)),Bd=n(93),Vd=n(727),Xd=n.n(Vd);var Yd="NORMAL",Zd="FORMULA",Ud={};function addColumnKey(e,t,n,a){var i=Object.keys(e[t].options.columns).length,r=a||function getChar(e){for(var t="a".charCodeAt(0),n="z".charCodeAt(0)-t+1,a="";e>=0;)a=String.fromCharCode(e%n+t)+a,e=Math.floor(e/n)-1;return a}(i).toUpperCase();return e[t].options.columns[r]=n,r}function getSpectraAnalysis(e,t){var n=t.from,a=t.to,i=t.nucleus;return e.reduce((function(e,t){if(1===t.info.dimension&&t.info.nucleus===i&&!t.info.isFid){var r=function detectRange(e,t){var n=t.from,a=t.to,i=e.data,r=i.x,o=i.re,c=Object(He.p)({x:r,y:o},{from:n,to:a,reverse:!0}),l=Object(He.r)({x:r,y:o},{from:n,to:a}).y,s=Object(He.q)({x:r,y:o},{from:n,to:a}).y,u=getShiftX(e);return{id:generateID(),originFrom:n-u,originTo:a-u,from:n,to:a,absolute:c,min:l,max:s}}(t,{from:n,to:a});e.sum+=r.absolute,e.values.push(Object(v.a)({SID:t.id},r))}return e}),{values:[],sum:0})}function init(e,t){void 0===e[t]&&(e[t]={options:{sum:100,code:null,columns:{}},values:{}})}function refreshCalculation(e,t){var n=e[t].options.columns;return Object.entries(e[t].values).reduce((function(e,t){var a=Object(O.a)(t,2),i=a[0],r=a[1];return e[i]=Object(v.a)(Object(v.a)({},r),function refreshByRow(e,t){return Object.keys(t).reduce((function(n,a){return t[a].type===Zd&&(n[a]=Object(v.a)(Object(v.a)({colKey:a},e),{},{value:calculate(t,e,t[a].formula)})),n}),{})}(r,n)),e}),{})}function analyzeSpectra(e,t,n){var a=n.from,i=n.to,r=n.nucleus,o=n.columnKey,c=void 0===o?null:o;init(t,r);var l=addColumnKey(t,r,{type:Yd,valueKey:"relative",from:a,to:i,index:1},c),s=t[r].options.sum,u=getSpectraAnalysis(e,{from:a,to:i,nucleus:r}),d=u.values,b=u.sum,p=C()(t,"".concat(r,".values"),{}),f=d.reduce((function(e,t){var n=b>0?s/b:0;return e[t.SID]=Object(v.a)(Object(v.a)({},p[t.SID]),{},Object(ue.a)({},l,Object(v.a)(Object(v.a)({colKey:l},t),{},{relative:Math.abs(t.absolute)*n}))),e}),{});t[r].values=f,t[r].values=refreshCalculation(t,r)}function calculate(e,t){var n,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"A+B",i=a.split(/\+|-|\*|\/|%|\(|\)/),r=[],o=Object(ac.a)(i);try{for(o.s();!(n=o.n()).done;){var c=n.value,l=c.trim();e[l]&&r.push(l)}}catch(d){o.e(d)}finally{o.f()}var s,u=r.map((function(n){return t[n]?t[n][e[n].valueKey]:null}));try{s=Object(Bd.a)(Function,r.concat(["return ".concat(a)])).apply(void 0,Object(Li.a)(u))}catch(b){console.log(b),s=new Error("Invalid Formula ( ".concat(a," ) "))}return s}var Kd={"1H":{tms:{from:-.1,to:.1,nbPeaks:1,delta:0},tsp:{from:-.1,to:.1,nbPeaks:1,delta:0},glucose:{from:5.18,to:5.28,nbPeaks:2,delta:5.23}},"13C":{}};var Wd=[{key:1,value:"manual",label:"Manual"}];var Gd=function AlignSpectraModal(e){var t=e.onClose,n=e.nucleus,a=Object(S.useRef)(),i=useDispatch(),r=Object(S.useMemo)((function(){var e=Kd[n]?Object.entries(Kd[n]).map((function(e){return{key:e[0],value:e[0],label:e[0]}}),[]):[];return Wd.concat(e)}),[n]),o=Object(S.useCallback)((function(){a.current.submitForm()}),[]),c=Object(S.useCallback)((function(e){i({type:ta,payload:e}),t()}),[i,t]);Object(S.useEffect)((function(){return bi.on("brushEnd",(function(e){var t=Object(O.a)(e.range,2),n=t[0],i=t[1];a.current.setValues(Object(v.a)(Object(v.a)({},a.current.values),{},{from:n,to:i}))})),function(){bi.off("brushEnd")}}),[]);var l=Object(S.useCallback)((function(e){var t=Kd[n][e]||{delta:0},i=t.delta,r=void 0===i?0:i,o=Object(fe.a)(t,["delta"]);a.current.setValues(Object(v.a)(Object(v.a)({},a.current.values),{},{targetX:r},o))}),[n]);return Object(ye.c)("div",{css:qc,children:[Object(ye.c)("div",{className:"header handle",children:[Object(ye.b)("span",{children:"Spectra calibration"}),Object(ye.b)($e,{onClick:t,className:"close-bt"})]}),Object(ye.b)("div",{className:"inner-content",children:Object(ye.c)(Vc,{ref:a,initialValues:{from:-1,to:1,nbPeaks:1,targetX:0},onSubmit:c,children:[Object(ye.c)("div",{className:"row margin-10",children:[Object(ye.b)("span",{className:"custom-label",children:"Options :"}),Object(ye.b)(is,{data:r,style:{width:270,height:30,marginBottom:"20px"},onChange:l})]}),Object(ye.c)("div",{className:"row margin-10",children:[Object(ye.b)("span",{className:"custom-label",children:"Range :"}),Object(ye.b)(Gc,{label:"From : ",name:"from",type:"number"}),Object(ye.b)(Gc,{label:"To :",name:"to",type:"number"})]}),Object(ye.c)("div",{className:"row margin-10",children:[Object(ye.b)("span",{className:"custom-label",children:"Number of Peaks : "}),Object(ye.b)(Gc,{name:"nbPeaks",type:"number"})]}),Object(ye.c)("div",{className:"row margin-10",children:[Object(ye.b)("span",{className:"custom-label",children:"Target PPM :"}),Object(ye.b)(Gc,{name:"targetX",type:"number"})]})]})}),Object(ye.b)("div",{className:"footer-container",children:Object(ye.b)("button",{type:"button",onClick:o,className:"save-button",children:"Done"})})]})},qd={from:-1,to:1,nbPoints:1024};var Jd=function ExportAsMatrixModal(e){var t=e.onClose,n=Object(S.useRef)(),a=useChartData().data,i=Object(S.useCallback)((function(){n.current.submitForm()}),[]),r=Object(S.useCallback)((function(e){Object(el.e)(a,e,"fileName"),t()}),[a,t]);return Object(S.useEffect)((function(){return bi.on("brushEnd",(function(e){var t=Object(O.a)(e.range,2),a=t[0],i=t[1];n.current.setValues(Object(v.a)(Object(v.a)({},n.current.values),{},{from:a,to:i}))})),function(){bi.off("brushEnd")}}),[]),Object(ye.c)("div",{css:qc,children:[Object(ye.c)("div",{className:"header handle",children:[Object(ye.b)("span",{children:"Export spectra as a Matrix"}),Object(ye.b)($e,{onClick:t,className:"close-bt"})]}),Object(ye.b)("div",{className:"inner-content",children:Object(ye.c)(Vc,{ref:n,initialValues:qd,onSubmit:r,children:[Object(ye.c)("div",{className:"row margin-10",children:[Object(ye.b)("span",{className:"custom-label",children:"Range :"}),Object(ye.b)(Gc,{label:"From : ",name:"from",type:"number"}),Object(ye.b)(Gc,{label:"To :",name:"to",type:"number"})]}),Object(ye.c)("div",{className:"row margin-10",children:[Object(ye.b)("span",{className:"custom-label",children:"Number of Points : "}),Object(ye.b)(Gc,{name:"nbPoints",type:"number"})]})]})}),Object(ye.b)("div",{className:"footer-container",children:Object(ye.b)("button",{type:"button",onClick:i,className:"save-button",children:"Export Now"})})]})};function EquallySpacedFilter(e,t){var n=e.onSubmit,a=useChartData().xDomain;return Object(I.jsxs)(Vc,{ref:t,initialValues:{from:a[0],to:a[1],numberOfPoints:1024},onSubmit:n,children:[Object(I.jsxs)("div",{className:"row margin-10",children:[Object(I.jsx)("span",{className:"custom-label",children:"Range :"}),Object(I.jsx)(Gc,{label:"From : ",name:"from",type:"number"}),Object(I.jsx)(Gc,{label:"To :",name:"to",type:"number"})]}),Object(I.jsxs)("div",{className:"row margin-10",children:[Object(I.jsx)("span",{className:"custom-label",children:"Number of points :"}),Object(I.jsx)(Gc,{label:"",name:"numberOfPoints",type:"number"})]})]})}var $d=Object(S.forwardRef)(EquallySpacedFilter);function FromToFilter(e,t){var n=e.onSubmit,a=useChartData().xDomain;return Object(I.jsx)(Vc,{ref:t,initialValues:{from:a[0],to:a[1]},onSubmit:n,children:Object(I.jsxs)("div",{className:"row margin-10",children:[Object(I.jsx)("span",{className:"custom-label",children:"Range :"}),Object(I.jsx)(Gc,{label:"From : ",name:"from",type:"number"}),Object(I.jsx)(Gc,{label:"To :",name:"to",type:"number"})]})})}var Qd,eb=Object(S.forwardRef)(FromToFilter),tb=[{key:0,value:0,label:"Select Filter"},{key:$a.fromTo.id,value:$a.fromTo.id,label:$a.fromTo.name},{key:$a.equallySpaced.id,value:$a.equallySpaced.id,label:$a.equallySpaced.name},{key:$a.standardDeviation.id,value:$a.standardDeviation.id,label:$a.standardDeviation.name},{key:$a.centerMean.id,value:$a.centerMean.id,label:$a.centerMean.name},{key:$a.pareto.id,value:$a.pareto.id,label:$a.pareto.name}],nb=Object(y.a)(Qd||(Qd=Object(x.a)(["\n  .row {\n    align-items: center;\n  }\n"])));var ab,ib=function MultipleSpectraFiltersModal(e){var t=e.onClose,n=e.nucleus,a=Object(S.useRef)(),i=useDispatch(),r=Object(S.useState)(0),o=Object(O.a)(r,2),c=o[0],l=o[1],s=Object(S.useMemo)((function(){var e=Kd[n]?Object.entries(Kd[n]).map((function(e){return{key:e[0],value:e[0],label:e[0]}}),[]):[];return tb.concat(e)}),[n]),u=Object(S.useCallback)((function(){a.current&&a.current.submitForm()}),[]),d=Object(S.useCallback)((function(e){i({type:ua,payload:[{name:c,options:e}]}),t()}),[i,c,t]);Object(S.useEffect)((function(){return bi.on("brushEnd",(function(e){var t=Object(O.a)(e.range,2),n=t[0],i=t[1];a.current&&a.current.setValues(Object(v.a)(Object(v.a)({},a.current.values),{},{from:n,to:i}))})),function(){bi.off("brushEnd")}}),[]);var b=Object(S.useCallback)((function(e){l(e)}),[]),p=Object(S.useMemo)((function(){switch(c){case $a.fromTo.id:return Object(ye.b)(eb,{onSubmit:d,ref:a});case $a.equallySpaced.id:return Object(ye.b)($d,{onSubmit:d,ref:a})}}),[c,d]);return Object(ye.c)("div",{css:[qc,nb],children:[Object(ye.c)("div",{className:"header handle",children:[Object(ye.b)("span",{children:"Spectra calibration"}),Object(ye.b)($e,{onClick:t,className:"close-bt"})]}),Object(ye.c)("div",{className:"inner-content",children:[Object(ye.c)("div",{className:"row margin-10",children:[Object(ye.b)("span",{className:"custom-label",children:"Filter :"}),Object(ye.b)(is,{data:s,style:{width:275,height:30,margin:0},onChange:b})]}),p||Object(ye.b)(Vc,{ref:a,initialValues:{},onSubmit:d})]}),Object(ye.b)("div",{className:"footer-container",children:Object(ye.b)("button",{type:"button",onClick:u,className:"save-button",children:"Done"})})]})},rb=n(761),ob=n(749),cb=(n(750),n(751),n(752)),lb=n.n(cb),sb=Object(y.a)(ab||(ab=Object(x.a)(["\n  code[class*='language-'],\n  pre[class*='language-'] {\n    color: black;\n    background: none;\n    text-shadow: 0 1px white;\n    font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;\n    font-size: 1em;\n    text-align: left;\n    white-space: pre;\n    word-spacing: normal;\n    word-break: normal;\n    word-wrap: normal;\n    line-height: 1.5;\n\n    -moz-tab-size: 4;\n    -o-tab-size: 4;\n    tab-size: 4;\n\n    -webkit-hyphens: none;\n    -moz-hyphens: none;\n    -ms-hyphens: none;\n    hyphens: none;\n  }\n\n  pre[class*='language-']::-moz-selection,\n  pre[class*='language-'] ::-moz-selection,\n  code[class*='language-']::-moz-selection,\n  code[class*='language-'] ::-moz-selection {\n    text-shadow: none;\n    background: #b3d4fc;\n  }\n\n  pre[class*='language-']::selection,\n  pre[class*='language-'] ::selection,\n  code[class*='language-']::selection,\n  code[class*='language-'] ::selection {\n    text-shadow: none;\n    background: #b3d4fc;\n  }\n\n  @media print {\n    code[class*='language-'],\n    pre[class*='language-'] {\n      text-shadow: none;\n    }\n  }\n\n  /* Code blocks */\n  pre[class*='language-'] {\n    padding: 1em;\n    margin: 0.5em 0;\n    overflow: auto;\n  }\n\n  :not(pre) > code[class*='language-'],\n  pre[class*='language-'] {\n    background: #f5f2f0;\n  }\n\n  /* Inline code */\n  :not(pre) > code[class*='language-'] {\n    padding: 0.1em;\n    border-radius: 0.3em;\n    white-space: normal;\n  }\n\n  .token.comment,\n  .token.prolog,\n  .token.doctype,\n  .token.cdata {\n    color: slategray;\n  }\n\n  .token.punctuation {\n    color: #999;\n  }\n\n  .token.namespace {\n    opacity: 0.7;\n  }\n\n  .token.property,\n  .token.tag,\n  .token.boolean,\n  .token.number,\n  .token.constant,\n  .token.symbol,\n  .token.deleted {\n    color: #905;\n  }\n\n  .token.selector,\n  .token.attr-name,\n  .token.string,\n  .token.char,\n  .token.builtin,\n  .token.inserted {\n    color: #690;\n  }\n\n  .token.operator,\n  .token.entity,\n  .token.url,\n  .language-css .token.string,\n  .style .token.string {\n    color: #9a6e3a;\n    /* This background color was intended by the author of this theme. */\n    background: hsla(0, 0%, 100%, 0.5);\n  }\n\n  .token.atrule,\n  .token.attr-value,\n  .token.keyword {\n    color: #07a;\n  }\n\n  .token.function,\n  .token.class-name {\n    color: #dd4a68;\n  }\n\n  .token.regex,\n  .token.important,\n  .token.variable {\n    color: #e90;\n  }\n\n  .token.important,\n  .token.bold {\n    font-weight: bold;\n  }\n  .token.italic {\n    font-style: italic;\n  }\n\n  .token.entity {\n    cursor: help;\n  }\n"])));function Evaluate_calculate(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;try{return new Function("args","return ".concat(e))(t)}catch(n){return n}}function MulipleAnalysisCodeEditor(e){var t=e.data,n=Object(Rc.f)(),a=n.values,i=n.setFieldValue,r=Object(S.useState)(a.code?a.code:"function run(data) {\n\n  return JSON.stringify(data,undefined, 2);\n  \n}(args);\n"),o=Object(O.a)(r,2),c=o[0],l=o[1],s=Object(S.useState)(""),u=Object(O.a)(s,2),d=u[0],b=u[1];Object(S.useEffect)((function(){var e=Evaluate_calculate(c,t);e instanceof Error?b(e.message):(i("code",c),b(e))}),[c,t,i]);var p=Object(S.useCallback)((function(e){l(e)}),[]),f=Object(S.useCallback)((function(e){try{return Object(ob.highlight)(e,ob.languages.js)}catch(t){return null}}),[]);return Object(ye.c)("div",{style:{marginTop:"20px"},css:sb,children:[Object(ye.b)(lb.a,{value:c,onValueChange:p,highlight:f,padding:10,style:{fontFamily:'"Fira code", "Fira Mono", monospace',fontSize:12,backgroundColor:"#fcfcfc",marginBottom:"10px",minHeight:"100px",overflow:"auto",maxHeight:"200px"}}),Object(ye.b)("p",{style:{marginBottom:"5px"},children:"Result:"}),Object(ye.b)(lb.a,{value:d,onValueChange:function onValueChange(e){return e},highlight:f,padding:10,style:{border:"0.55px solid #f3f3f3",fontFamily:'"Fira code", "Fira Mono", monospace',fontSize:12,marginBottom:"10px",minHeight:"100px",overflow:"auto",maxHeight:"200px"}})]})}var ub,db=Object(S.memo)(MulipleAnalysisCodeEditor),bb=Object(y.a)(ub||(ub=Object(x.a)(["\n  width: 100%;\n  thead {\n    border-bottom: 1px solid lightgray;\n    background-color: #fafafa;\n    font-size: 12px;\n  }\n\n  td,\n  th {\n    padding: 3px 5px;\n    text-align: center;\n  }\n\n  .operation-col {\n    width: 30px;\n  }\n\n  .input {\n    // border: 0.55px solid rgb(237 237 237) !important;\n    height: 25px !important;\n    width: 100% !important;\n    margin: 0 !important;\n    // text-transform: uppercase;\n  }\n\n  .input.disbale {\n    background-color: #e8e8e8;\n    border-radius: 5px;\n  }\n\n  .label,\n  .index {\n    width: 100px;\n  }\n\n  .counter {\n    width: 50px;\n  }\n\n  .add {\n    background-color: transparent;\n    border: 0;\n    outline: none;\n    svg {\n      font-szie: 14px;\n      fill: green;\n    }\n  }\n"]))),pb=Object(S.forwardRef)((function MultipleSpectraAnalysisPreferences(e,t){var n=e.data,a=e.onAfterSave,i=useDispatch(),r=Object(S.useRef)(),o=Object(S.useState)({}),c=Object(O.a)(o,2),l=c[0],s=c[1];Object(S.useImperativeHandle)(t,(function(){return{saveSetting:function saveSetting(){r.current.submitForm()}}})),Object(S.useEffect)((function(){var e=Object.keys(n.columns).reduce((function(e,t){return e[t]=Object(v.a)(Object(v.a)({},n.columns[t]),{},{tempKey:t}),e}),{});s(e),r.current.setValues({columns:e,code:n.code})}),[n]);var u=Object(S.useMemo)((function(){return Object.keys(l)}),[l]),d=Object(S.useMemo)((function(){return rb.a().shape({columns:rb.a().shape(function columnSchema(){return u.reduce((function(e,t){return e[t]=rb.a().shape(Object(v.a)(Object(v.a)({tempKey:rb.b().required().test("unique","must be unique column name",(function(e){var t=r.current.values.columns;return 1===Object.keys(t).reduce((function(n,a){return t[a].tempKey===e&&n.push(e),n}),[]).length}))},l[t].type===Zd?{formula:rb.b().required()}:{}),{},{index:rb.b().required()})),e}),{})}())})}),[l,u,r]),b=Object(S.useCallback)((function(e){a(!0);var t=Object.entries(e.columns).reduce((function(e,t){var n=Object(O.a)(t,2),a=n[0],i=n[1];return e[a]=Object(v.a)(Object(v.a)({},l[a]),i),e}),{});i({type:Qn,payload:{code:e.code,columns:t}})}),[l,i,a]),p=Object(S.useCallback)((function(e){s((function(t){return Object(v.a)(Object(v.a)({},t),{},Object(ue.a)({},"temp".concat(e),{tempKey:"",type:"FORMULA",valueKey:"value",formula:"",index:e}))}))}),[]);return Object(ye.c)(Vc,{ref:r,initialValues:{columns:l,code:null},validationSchema:d,onSubmit:b,children:[u&&Object(ye.c)("table",{css:bb,children:[Object(ye.b)("thead",{children:Object(ye.c)("tr",{children:[Object(ye.b)("th",{className:"counter",children:"#"}),Object(ye.b)("th",{className:"label",children:"Label"}),Object(ye.b)("th",{children:"value"}),Object(ye.b)("th",{className:"index",children:"index"})]})}),Object(ye.b)("tbody",{children:u.map((function(e,t){return Object(ye.c)("tr",{children:[Object(ye.b)("td",{className:"counter",children:t+1}),Object(ye.b)("td",{className:"label",children:Object(ye.b)(Gc,{name:"columns.".concat(e,".tempKey"),value:l[e].tempKey},e)}),Object(ye.b)("td",{children:l[e].type===Zd?Object(ye.b)(Gc,{name:"columns.".concat(e,".formula"),value:l[e].formula}):Object(ye.b)("div",{className:"input disbale"})}),Object(ye.b)("td",{className:"index",children:Object(ye.b)(Gc,{name:"columns.".concat(e,".index"),value:l[e].index})}),Object(ye.b)("td",{className:"operation-col",children:u.length===t+1&&Object(ye.b)("button",{className:"add",type:"button",onClick:function onClick(){return p(t+1)},children:Object(ye.b)(Xe.y,{})})})]},e)}))})]}),Object(ye.b)(db,{data:n})]})}));pb.defaultProps={onAfterSave:function onAfterSave(){return!1}};var fb,hb=pb,mb=Object(y.a)(fb||(fb=Object(x.a)(["\n  background-color: white;\n  position: absolute;\n  height: auto;\n  z-index: 99999999999999;\n  box-shadow: 0 19px 38px rgba(0, 0, 0, 0.3), 0 15px 12px rgba(0, 0, 0, 0.22);\n  border-radius: 10px;\n  margin-bottom: 20px;\n\n  ul {\n    list-style-type: none;\n    padding: 0;\n    margin: 0;\n\n    li {\n      padding: 10px 30px;\n      text-align: center;\n      color: black;\n      border-bottom: 0.55px solid lightgoldenrodyellow;\n      min-width: 150px;\n    }\n\n    li:last-of-type {\n      border-bottom: none;\n    }\n\n    li:hover {\n      background-color: gray;\n      color: white;\n    }\n  }\n"])));var gb,jb=function DropDownList(e){var t=e.data,n=void 0===t?[]:t,a=e.onSelect;return Object(ye.b)("div",{css:mb,children:Object(ye.b)("ul",{children:n.map((function(e,t){return Object(ye.b)("li",{onClick:function onClick(){return a(t)},children:e.label},e.key)}))})})},vb=Object(y.a)(gb||(gb=Object(x.a)(["\n  // position: absolute;\n  padding: 2px;\n  border-radius: 10px;\n  width: auto;\n  display: inline-block;\n  border: 0.55px solid lightgray;\n  font-size: 10px;\n\n  button {\n    text-transform: Capitalize;\n  }\n"])));function DropDownButton(e){var t=e.data,n=e.selectedKey,a=e.onSelect,i=e.formatSelectedValue,r=Object(S.useState)(!1),o=Object(O.a)(r,2),c=o[0],l=o[1],s=Object(S.useState)(n),u=Object(O.a)(s,2),d=u[0],b=u[1],p=useGlobal().rootRef,f=Object(S.useRef)(null),h=Object(S.useCallback)((function(e){!e.target.closest(".".concat(f.current.className))&&c&&setTimeout((function(){l(!1)}),0)}),[c]);Object(S.useEffect)((function(){return p&&p.addEventListener("click",h),function(){return p.removeEventListener("click",h)}}),[h,c,p]);var m=Object(S.useCallback)((function(e){b(t[e].label),a(t[e].key)}),[t,a]);return Object(ye.c)("div",{className:"dropdown",ref:f,css:vb,children:[Object(ye.b)("button",{type:"button",onClick:function onClick(){return l((function(e){return!e}))},children:d?i(d):Object(ye.b)(Xe.j,{})}),c&&Object(ye.b)(jb,{data:t,onSelect:m})]})}DropDownButton.defaultProps={data:null,formatSelectedValue:function formatSelectedValue(e){return e},value:null};var Ob,xb=DropDownButton,yb=function styles(e){return Object(y.a)(Ob||(Ob=Object(x.a)(["\n  position: relative;\n\n  .delete {\n    position: absolute;\n    right: 0px;\n    top: 0px;\n  }\n\n  .container {\n    display: flex;\n    flex-direction: column;\n    padding: 0;\n    margin: 0;\n  }\n  .dropDown-container {\n    justify-content: flex-start;\n    align-items: flex-start;\n  }\n  .label-container {\n    flex: 1;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    flex-direction: column;\n    min-height: 45px;\n  }\n\n  .label {\n    text-align: center;\n  }\n\n  ","\n"])),e)},kb=[{key:"relative",label:"Relative"},{key:"absolute",label:"Absolute"},{key:"min",label:"Min Intensity"},{key:"max",label:"Max Intensity"}];var Cb=function ColumnHeader(e){var t=e.charLabel,n=e.rangeLabel,a=e.data,i=e.onColumnFilter,r=useDispatch(),o=Object(S.useCallback)((function(){r({type:Jn,colKey:t})}),[t,r]);return Object(ye.c)("div",{css:yb,children:[Object(ye.c)("div",{className:"container",children:[a.type===Yd&&Object(ye.b)("div",{className:"dropDown-container",children:Object(ye.b)(xb,{data:kb,formatSelectedValue:function formatSelectedValue(e){return e?e.substr(0,3):e},selectedKey:a.valueKey,onSelect:i})}),Object(ye.c)("div",{className:"label-container",children:[Object(ye.c)("span",{className:"label",children:[" ",t]}),Object(ye.b)("span",{className:"label",children:n})]})]}),Object(ye.b)(yl,{onDelete:o})]})};function MultipleSpectraAnalysisTable(e){var t=e.data,n=useFormatNumberByNucleus(e.activeTab),a=Object(S.useMemo)((function(){return Evaluate_calculate(C()(t,"code",""),t)}),[t]),i=useDispatch(),r=Object(S.useCallback)((function(e,t){i({type:ea,payload:{columnKey:e,valueKey:t}})}),[i]),o=Object(S.useMemo)((function(){var e=[{Header:"#",index:0,Cell:function Cell(e){return e.row.index+1}}],a=e;return t.columns&&Object.keys(t.columns).forEach((function(e){var i=t.columns[e],o=i.valueKey,c=i.index;!function setCustomColumn(e,a,i,o){var c=t.columns[i];e.push({index:a,Header:function Header(){return Object(I.jsx)(Cb,{charLabel:i,data:c,onColumnFilter:function onColumnFilter(e){return r(i,e)},rangeLabel:c.from&&c.to?"".concat(n(c.from)," - ").concat(n(c.to)):""})},id:i,sortType:"basic",Cell:function Cell(e){var t=e.row;return o(t)}})}(a,c+1,e,(function(t){var a=t.original[e][o];return a instanceof Error?Object(I.jsx)("span",{style:{color:"red"},children:a.message}):n(a)}))})),(a||e).sort((function(e,t){return e.index-t.index}))}),[r,t.columns,n]);return t.values&&t.values.length>0?Object(I.jsxs)(S.Fragment,{children:[Object(I.jsx)(Qu,{data:t.values,columns:o}),Object(I.jsx)("div",{style:{width:"100%",padding:"10px"},dangerouslySetInnerHTML:{__html:a}})]}):Object(I.jsx)(ed,{})}var Sb=Object(S.memo)(MultipleSpectraAnalysisTable),Db={container:{display:"flex",flexDirection:"column",height:"100%"},button:{backgroundColor:"transparent",border:"none"}};function MultipleSpectraAnalysisPanel(e){var t=e.spectraAnalysis,n=e.activeTab,a=Object(S.useState)(!1),i=Object(O.a)(a,2),r=i[0],o=i[1],c=Object(S.useRef)(),l=Mc(),s=ie(),u=useDispatch(),d=Object(S.useMemo)((function(){var e=t[n]||{values:{},options:{columns:{},code:null}},a=e.values,i=e.options,r=i.columns,o=i.code;return{values:Object.values(a),columns:r,code:o}}),[n,t]),b=Object(S.useCallback)((function(){o(!r)}),[r]),p=Object(S.useCallback)((function(){c.current.saveSetting()}),[]),f=Object(S.useCallback)((function(){o(!1)}),[]),h=Object(S.useCallback)((function(e){bi.emit("showYSpectraTrackers",e)}),[]),m=Object(S.useCallback)((function(){u({type:Sn}),s.show(Object(I.jsx)(Gd,{nucleus:n}),{isBackgroundBlur:!1,position:G.TOP_CENTER,width:500})}),[n,s,u]),g=Object(S.useCallback)((function(){u({type:Sn}),s.show(Object(I.jsx)(ib,{}),{isBackgroundBlur:!1,position:G.TOP_CENTER,width:500})}),[s,u]),j=Object(S.useCallback)((function(){var e=function getDataAsString(e,t){if(e&&e[t]){var n=e[t],a=n.values,i=n.options.columns,r="";for(var o in i)r+="".concat(o,"\t");r+="\n";for(var c=0,l=Object.values(a);c<l.length;c++){var s=l[c];for(var u in i)r+="".concat(s[u][i[u].valueKey],"\t");r+="\n"}return r}return null}(t,n);Object(el.c)(e)?l.success("Data copied to clipboard"):l.error("copy to clipboard failed")}),[n,l,t]),v=Object(S.useCallback)((function(){u({type:Sn}),s.show(Object(I.jsx)(Jd,{}),{isBackgroundBlur:!1,position:G.TOP_CENTER,width:500})}),[s,u]);return Object(I.jsxs)("div",{style:Db.container,children:[!r&&Object(I.jsxs)(Hu,{deleteToolTip:"Delete All Peaks",showSettingButton:"true",canDelete:!1,onSettingClick:b,children:[Object(I.jsx)(dl,{popupTitle:"Copy To Clipboard",style:Db.button,onClick:j,children:Object(I.jsx)(Xe.p,{})}),Object(I.jsx)(dl,{popupTitle:"Spectra calibration",style:Db.button,onClick:m,children:Object(I.jsx)(ul.m,{style:{fontSize:"18px"}})}),Object(I.jsx)(Ru,{popupTitle:"Y Spectra Tracker",popupPlacement:"right",onClick:h,children:Object(I.jsx)(Ir.a,{})}),Object(I.jsx)(dl,{popupTitle:"Add Filter",style:Db.button,onClick:g,children:Object(I.jsx)(ul.c,{style:{fontSize:"18px"}})}),Object(I.jsx)(dl,{popupTitle:"Export spectra as a Matrix",onClick:v,children:Object(I.jsx)(ul.g,{})})]}),r&&Object(I.jsx)(Zu,{onSave:p,onClose:b}),Object(I.jsx)("div",{style:{height:"100%",overflow:"auto"},children:Object(I.jsxs)(ru.a,{isFlipped:r,infinite:!0,containerStyle:{overflow:"hidden"},children:[Object(I.jsx)(Sb,{data:d,activeTab:n}),Object(I.jsx)(hb,{data:d,onAfterSave:f,ref:c})]})})]})}var wb=tr(Object(S.memo)(MultipleSpectraAnalysisPanel));var Tb=function PeaksWrapper(e){var t=function Wrapper(t){var n=useChartData(),a=n.data,i=n.activeSpectrum,r=n.xDomain,o=n.activeTab,c=n.tabActiveSpectrum,l=usePreferences(),s=Object(S.useMemo)((function(){return a&&i&&i.id?a.find((function(e){return e.id===i.id}))||{peaks:{},info:{},data:{}}:{}}),[i,a]),u=s.peaks,d=void 0===u?{}:u,b=s.info,p=void 0===b?{}:b,f=s.data,h=void 0===f?{}:f,m=Object(S.useMemo)((function(){return c&&Object.keys(c).length>0?Object.keys(c):null}),[c]),g=t.forwardedRef,j=Object(fe.a)(t,["forwardedRef"]);return Object(I.jsx)(e,Object(v.a)(Object(v.a)({},j),{},{peaks:d,info:p,x:h.x,y:h.y,xDomain:r,preferences:l,activeTab:o,nucleus:m,ref:g}))};return Object(S.forwardRef)((function(e,n){return Object(I.jsx)(t,Object(v.a)(Object(v.a)({},e),{},{forwardedRef:n}))}))},Mb={container:{padding:10,backgroundColor:"#f1f1f1",height:"100%"},groupContainer:{padding:"5px",borderRadius:"5px",margin:"10px 0px",backgroundColor:"white"},row:{display:"flex",margin:"5px 0px"},header:{borderBottom:"1px solid #e8e8e8",paddingBottom:"5px",fontWeight:"bold",color:"#4a4a4a"},inputLabel:{flex:2,fontSize:"11px",fontWeight:"bold",color:"#232323"},input:{width:"30%",textAlign:"center"}},Ab=[{id:1,label:"Peak Number :",checkController:"showPeakNumber",formatController:"peakNumberFormat",defaultFormat:""},{id:2,label:"Peak Index : ",checkController:"showPeakIndex",formatController:"peakIndexFormat",defaultFormat:""},{id:3,label:"\u03b4 (ppm) :",checkController:"showDeltaPPM",formatController:"deltaPPMFormat",defaultFormat:"00.00"},{id:4,label:"\u03b4 (Hz) :",checkController:"showDeltaHz",formatController:"deltaHzFormat",defaultFormat:"00.00"},{id:5,label:"Peak Width",checkController:"showPeakWidth",formatController:"peakWidthFormat",defaultFormat:"00.0000"},{id:6,label:"Intensity :",checkController:"showIntensity",formatController:"intensityFormat",defaultFormat:"00.00"}];function PeaksPreferences(e,t){var n=e.nucleus,a=e.preferences,i=Mc(),r=useStateWithLocalStorage("nmr-general-settings"),o=Object(O.a)(r,2)[1],c=Object(S.useState)(null),l=Object(O.a)(c,2),s=l[0],u=l[1],d=Object(S.useRef)();Object(S.useEffect)((function(){var e=st(a,"formatting.panels.peaks");e&&u(e)}),[a]);var b=Object(S.useCallback)((function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];a.dispatch({type:Nl,payload:{key:"peaks",value:e}}),t&&i.success("Peaks preferences saved successfully")}),[i,a]);Object(S.useImperativeHandle)(t,(function(){return{saveSetting:function saveSetting(){"function"===typeof d.current.requestSubmit?d.current.requestSubmit():d.current.dispatchEvent(new Event("submit",{cancelable:!0}))}}}));var p=Object(S.useCallback)((function(e){e.preventDefault();var t,n=e.target,a=new FormData(n),i={},r=Object(ac.a)(a.entries());try{for(r.s();!(t=r.n()).done;){var c=t.value,l=c[0].split("-").join("."),s=["true","false"].includes(c[1])?"true"===c[1]:c[1];i=ct()(i,l,s)}}catch(u){r.e(u)}finally{r.f()}b(i,!0),o(i,"formatting.panels.peaks")}),[b,o]),f=Object(S.useCallback)((function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var a=t.join(".");if(s){var i=C()(s,a);return i||null}var r=t.length-1;return Si[t[r]]}),[s]);return Object(I.jsx)("div",{style:Mb.container,children:Object(I.jsx)("form",{onSubmit:p,ref:d,children:n&&n.map((function(e){return Object(I.jsxs)("div",{style:Mb.groupContainer,children:[Object(I.jsx)(kd,{style:Mb.header,value:e}),Ab.map((function(t){return Object(I.jsx)(ld,{label:t.label,checked:f(e,t.checkController),format:f(e,t.formatController),checkControllerName:t.checkController,formatControllerName:t.formatController,groupID:e},t.id)}))]},e)}))})})}var Eb=Tb(Object(S.forwardRef)(PeaksPreferences));function PeaksTable(e){var t=e.peaks,n=e.info,a=e.xDomain,i=e.activeTab,r=e.enableFilter,o=e.onFilter,c=e.preferences,l=useDispatch(),s=Object(S.useRef)([]),u=useFormatNumberByNucleus(n.nucleus),d=Object(S.useCallback)((function(e,t){e.preventDefault(),e.stopPropagation();var n=t.original;l({type:Mt,data:{id:n.id,xIndex:n.xIndex}})}),[l]),b=Object(S.useMemo)((function(){return[{index:20,Header:"",width:"1%",maxWidth:"24px",minWidth:"24px",id:"delete-button",Cell:function Cell(e){var t=e.row;return Object(I.jsx)("button",{type:"button",className:"delete-button",onClick:function onClick(e){return d(e,t)},children:Object(I.jsx)(Xe.B,{})})}}]}),[d]),p=Object(S.useCallback)((function(e){s.current.forEach((function(t,n){e!==n&&t&&t.closeEdit()}))}),[]),f=Object(S.useCallback)((function(e,t){var n=parseFloat(e.target.value)-parseFloat(t.value);l({type:At,shiftValue:n})}),[l]),h=Object(S.useMemo)((function(){var e=function setCustomColumn(e,t,n,a,i){e.push(Object(v.a)(Object(v.a)({},i),{},{index:t,Header:n,sortType:"basic",Cell:function Cell(e){var t=e.row;return a(t)}}))},t=st(c,"formatting.panels.peaks.[".concat(i,"]"),Si),n=Object(Li.a)(b);return t.showPeakNumber&&e(n,1,"#",(function(e){return Vi(e.index+1,t.peakNumberFormat)}),{width:"1%",maxWidth:"40px",minWidth:"40px"}),t.showPeakIndex&&e(n,2,"index",(function(e){return Vi(e.original.xIndex,t.peakIndexFormat)})),t.showDeltaPPM&&e(n,3,"\u03b4 (ppm)",(function(e){return Object(I.jsx)(Wu,{onEditStart:function onEditStart(){return p(e.index)},ref:function ref(t){return s.current[e.index]=t},value:Vi(e.original.value,t.deltaPPMFormat),onSave:function onSave(t){return f(t,e.original)},type:"number"})})),t.showDeltaHz&&e(n,4,"\u03b4 (Hz)",(function(e){return Vi(e.original.valueHz,t.deltaHzFormat)})),t.showIntensity&&e(n,5,"Intensity",(function(e){return Vi(e.original.intensity,t.intensityFormat)})),t.showPeakWidth&&e(n,5,"Peak Width",(function(e){return Vi(e.original.peakWidth,t.peakWidthFormat)})),n.sort((function(e,t){return e.index-t.index}))}),[i,p,b,c,f]),m=Object(S.useMemo)((function(){function isInRange(e){var t=1e5;return e*t>=a[0]*t&&e*t<=a[1]*t}return t&&t.values?(r?t.values.filter((function(e){return isInRange(e.delta)})):t.values).map((function(e){var t=u(e.delta);return{value:t,valueHz:n&&n.originFrequency?t*n.originFrequency:"",id:e.id,intensity:e.intensity,peakWidth:e.width?e.width:"",isConstantlyHighlighted:isInRange(t)}})):[]}),[r,u,n,t,a]);return Object(S.useEffect)((function(){o(m.length)}),[m,o]),m&&m.length>0?Object(I.jsx)(Qu,{data:m,columns:h}):Object(I.jsx)(ed,{})}var Pb=Tb(Object(S.memo)(PeaksTable)),Fb={container:{display:"flex",flexDirection:"column",height:"100%"}};function PeaksPanel(){var e=Object(S.useState)(!1),t=Object(O.a)(e,2),n=t[0],a=t[1],i=Object(S.useState)(0),r=Object(O.a)(i,2),o=r[0],c=r[1],l=useDispatch(),s=ie(),u=Object(S.useState)(!1),d=Object(O.a)(u,2),b=d[0],p=d[1],f=Object(S.useRef)(),h=Object(S.useCallback)((function(){l({type:Mt,data:null})}),[l]),m=Object(S.useCallback)((function(){s.showConfirmDialog({message:"All records will be deleted, Are You sure?",buttons:[{text:"Yes",handler:h},{text:"No"}]})}),[s,h]),g=Object(S.useCallback)((function(){p(!b)}),[b]),j=Object(S.useCallback)((function(){f.current.saveSetting(),p(!1)}),[]),v=Object(S.useCallback)((function(){a(!n)}),[n]),x=Object(S.useCallback)((function(e){c(e)}),[]);return Object(I.jsxs)("div",{style:Fb.container,children:[!b&&Object(I.jsx)(Hu,{counter:o,onDelete:m,deleteToolTip:"Delete All Peaks",onFilter:v,filterToolTip:n?"Show all peaks":"Hide peaks out of view",filterIsActive:n,counterFiltered:o,showSettingButton:"true",onSettingClick:g}),b&&Object(I.jsx)(Zu,{onSave:j,onClose:g}),Object(I.jsx)("div",{style:{height:"100%",overflow:"hidden"},children:Object(I.jsxs)(ru.a,{isFlipped:b,infinite:!0,containerStyle:{overflow:"hidden",height:"100%"},children:[Object(I.jsx)("div",{style:{overflow:"auto",height:"100%",display:"block"},children:Object(I.jsx)(Pb,{enableFilter:n,onFilter:x})}),Object(I.jsx)(Eb,{ref:f})]})})]})}var _b,Ib=Object(S.memo)(PeaksPanel),Nb=Object(y.a)(_b||(_b=Object(x.a)(["\n  overflow: auto;\n  width: 400px;\n  .innerContainer {\n    padding: 5px;\n    width: 100%;\n    height: 180px;\n    border: none;\n  }\n\n  .mainButtonsContainer {\n    padding: 5px 0px;\n    border-bottom: 0.55px solid #ebebeb;\n    display: flex;\n    justify-content: space-between;\n  }\n\n  button {\n    background-color: transparent;\n    border: none;\n    padding: 0 5px;\n  }\n\n  button:disabled {\n    opacity: 0.6;\n  }\n"])));var Rb=function CopyClipboardModal(e){var t=e.text,n=e.onClose,a=e.onCopyClick;return Object(ye.c)("div",{css:Nb,children:[Object(ye.c)("div",{className:"mainButtonsContainer handle",children:[Object(ye.b)("button",{type:"button",onClick:function onClick(){return a(t)},children:Object(ye.b)(Xe.e,{})}),Object(ye.b)($e,{onClick:n})]}),Object(ye.b)("div",{className:"innerContainer",dangerouslySetInnerHTML:{__html:t}})]})},Lb={toolbar:{display:"flex",flexDirection:"row",borderBottom:"0.55px solid rgb(240, 240, 240)"},center:{display:"flex",justifyContent:"center",alignItems:"center",padding:"5px"},removeAssignmentsButton:{border:"none",height:"16px",fontSize:"12px",backgroundColor:"transparent"},button:{backgroundColor:"transparent",border:"none"}};var zb=function RangesHeader(e){var t=e.ranges,n=e.info,a=e.activeTab,i=e.molecules,r=e.onUnlink,o=e.onFilterActivated,c=e.onSettingClick,l=e.isFilterActive,s=e.filterCounter,u=useDispatch(),d=ie(),b=Mc(),p=usePreferences(),f=useAssignmentData(),h=Object(S.useState)(!1),m=Object(O.a)(h,2),g=m[0],j=m[1],x=C()(t,"options.sum",null),y=Object(S.useCallback)((function(e){void 0!==e&&u({type:Nn,value:e}),d.close()}),[u,d]),k=Object(S.useCallback)((function(){d.show(Object(I.jsx)(_u,{onClose:function onClose(){return d.close()},onSave:y,header:x?"Set new Ranges Sum (Current: ".concat(Number(x).toFixed(2),")"):"Set new Ranges Sum",molecules:i,element:a?a.replace(/[0-9]/g,""):null}))}),[a,y,x,d,i]),D=Object(S.useCallback)((function(){r()}),[r]),w=Object(S.useCallback)((function(){d.showConfirmDialog({message:"All assignments will be removed. Are you sure?",buttons:[{text:"Yes",handler:D},{text:"No"}]})}),[D,d]),T=Object(S.useCallback)((function(){d.showConfirmDialog({message:"All ranges will be deleted. Are You sure?",buttons:[{text:"Yes",handler:function handler(){u({type:yn,payload:{assignmentData:f}})}},{text:"No"}]})}),[f,u,d]),M=Object(S.useCallback)((function(e){bi.emit("showMultiplicityTrees",e),j(e)}),[]),A=Object(S.useCallback)((function(e){Object(el.a)(e)?b.success("Data copied to clipboard"):b.error("copy to clipboard failed")}),[b]),E=Object(S.useCallback)((function(){var e=n.originFrequency,a=n.nucleus,i=C()(p,"formatting.nucleusByKey[".concat(a.toLowerCase(),"]")),r=getNumberOfDecimals(i.ppm),o=getNumberOfDecimals(i.hz),c=Object(uc.c)(t.values,{nucleus:a,nbDecimalDelta:r,nbDecimalJ:o,observedFrequency:e});d.show(Object(I.jsx)(Rb,{text:c,onCopyClick:A,onClose:function onClose(){return d.close()}}),{})}),[n,d,p,t.values,A]);return Object(I.jsxs)(Hu,{counter:t&&t.values&&t.values.length,onDelete:T,deleteToolTip:"Delete All Ranges",onFilter:o,filterToolTip:l?"Show all ranges":"Hide ranges out of view",filterIsActive:l,counterFiltered:s,showSettingButton:"true",onSettingClick:c,children:[Object(I.jsx)(We,{title:"Preview publication string",popupPlacement:"right",children:Object(I.jsx)("button",{style:Lb.button,type:"button",onClick:E,children:Object(I.jsx)(Xe.p,{})})}),Object(I.jsx)(We,{title:x?"Change Ranges Sum (".concat(Number(x).toFixed(2),")"):"Change Ranges Sum",popupPlacement:"right",children:Object(I.jsx)("button",{css:Lb.button,type:"button",onClick:k,children:Object(I.jsx)(ul.w,{})})}),Object(I.jsx)(We,{title:"Remove all Assignments",popupPlacement:"right",children:Object(I.jsx)("button",{style:Object(v.a)(Object(v.a)({},Lb.center),Lb.removeAssignmentsButton),type:"button",onClick:w,disabled:!t||!t.values||0===t.values.length,children:Object(I.jsx)(Xe.H,{})})}),Object(I.jsx)(Ru,{popupTitle:g?"Hide Multiplicity Trees in Spectrum":"Show Multiplicity Trees in Spectrum",popupPlacement:"right",onClick:M,disabled:!t||!t.values||0===t.values.length,children:Object(I.jsx)(Xe.E,{style:{pointerEvents:"none",fontSize:"12px"}})})]})},Hb={container:{padding:10,backgroundColor:"#f1f1f1",height:"100%",flex:1},groupContainer:{padding:"5px",borderRadius:"5px",margin:"10px 0px",backgroundColor:"white"},row:{display:"flex",margin:"5px 0px"},header:{borderBottom:"1px solid #e8e8e8",paddingBottom:"5px",fontWeight:"bold",color:"#4a4a4a"},inputLabel:{flex:2,fontSize:"11px",fontWeight:"bold",color:"#232323"},input:{width:"30%",textAlign:"center"}};function RangesPreferences(e,t){var n=e.nucleus,a=e.preferences,i=Mc(),r=useStateWithLocalStorage("nmr-general-settings"),o=Object(O.a)(r,2)[1],c=Object(S.useState)(null),l=Object(O.a)(c,2),s=l[0],u=l[1],d=Object(S.useRef)();Object(S.useEffect)((function(){var e=st(a,"formatting.panels.ranges");e&&u(e)}),[a]);var b=function saveToLocalStorgate(e){o(e,"formatting.panels.ranges")},p=Object(S.useCallback)((function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];a.dispatch({type:Nl,payload:{key:"ranges",value:e}}),t&&i.success("ranges preferences saved successfully")}),[i,a]);Object(S.useImperativeHandle)(t,(function(){return{saveSetting:function saveSetting(){"function"===typeof d.current.requestSubmit?d.current.requestSubmit():d.current.dispatchEvent(new Event("submit",{cancelable:!0}))}}}));var f=[{id:1,label:"From :",checkController:"showFrom",formatController:"fromFormat",defaultFormat:"0.00"},{id:2,label:"To :",checkController:"showTo",formatController:"toFormat",defaultFormat:"0.00"},{id:3,label:"Absolute :",checkController:"showAbsolute",formatController:"absoluteFormat",defaultFormat:"0.00"},{id:4,label:"Relative :",checkController:"showRelative",formatController:"relativeFormat",defaultFormat:"00.00"}],h=function(){var e=Object(Br.a)(Hr.a.mark((function _callee(e){var t,n,a,i,r,o,c,l;return Hr.a.wrap((function _callee$(s){for(;;)switch(s.prev=s.next){case 0:e.preventDefault(),t=e.target,n=new FormData(t),a={},i=Object(ac.a)(n.entries());try{for(i.s();!(r=i.n()).done;)o=r.value,c=o[0].split("-").join("."),l=["true","false"].includes(o[1])?"true"===o[1]:o[1],a=ct()(a,c,l)}catch(u){i.e(u)}finally{i.f()}p(a,!0),b(a);case 8:case"end":return s.stop()}}),_callee)})));return function handleSubmit(t){return e.apply(this,arguments)}}(),m=Object(S.useCallback)((function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var a=t.join(".");if(s){var i=C()(s,a);return i||null}var r=t.length-1;return Ci[t[r]]}),[s]);return Object(I.jsx)("div",{style:Hb.container,children:Object(I.jsx)("form",{onSubmit:h,ref:d,children:n&&n.map((function(e){return Object(I.jsxs)("div",{style:Hb.groupContainer,children:[Object(I.jsx)(kd,{style:Hb.header,value:e}),f.map((function(t){return Object(I.jsx)(ld,{label:t.label,checked:m(e,t.checkController),format:m(e,t.formatController),checkControllerName:t.checkController,formatControllerName:t.formatController,groupID:e},t.id)}))]},e)}))})})}var Bb=Object(S.memo)(Object(S.forwardRef)(RangesPreferences)),Vb=null;var Xb=function useToggleStatus(e,t){var n=Object(S.useState)({}),a=Object(O.a)(n,2),i=a[0],r=a[1];Object(S.useEffect)((function(){var n={};if(t&&Array.isArray(t)){for(var a=0;a<t.length;a++)n[t[a][e]]=!1;r(n)}}),[t,e]);var o=Object(S.useCallback)((function(e){var t=Object(v.a)({},i);Vb&&(t[Vb]=!1),null!=e&&(Vb=e,t[e]=!0),r(t)}),[i]);return[i,o]},Yb=n(423),Zb=n.n(Yb);function isColumnVisible(e,t){return Zb.a.get(e,t,!1)}var Ub=function AbsoluteColumn(e){var t=e.rowSpanTags,n=e.value,a=e.onHoverRange,i=e.format;return Object(I.jsx)("td",Object(v.a)(Object(v.a)(Object(v.a)({},t),a),{},{children:Vi(n,i)}))};var Kb=function Button(e){var t=e.onClick,n=Object(fe.a)(e,["onClick"]);return Object(ye.b)(S.Fragment,{children:Object(ye.b)("button",Object(v.a)({type:"button",onClick:t},n))})};var Wb=function ErrorMessage(e){var t=e.style,n=Object(fe.a)(e,["style"]),a=Object(Rc.e)(n)[1];return Object(ye.b)("div",{children:a.error?Object(ye.b)("p",{style:Object(v.a)({color:"red",margin:"0.5px"},t),children:a.error}):null})};function formik_Input_Input(e){var t=e.onFocus,n=e.onBlur,a=e.enableErrorMessage,i=Object(fe.a)(e,["onFocus","onBlur","enableErrorMessage"]),r=Object(Rc.e)(i),o=Object(O.a)(r,1)[0];return Object(I.jsxs)("div",{children:[Object(I.jsx)("input",Object(v.a)(Object(v.a)(Object(v.a)({},o),i),{},{onFocus:function onFocus(){return t(o.name)},onBlur:function onBlur(){return n(o.name)}})),a&&!0===a?Object(I.jsx)(Wb,Object(v.a)({},i)):null]})}formik_Input_Input.defaultProps={onFocus:function onFocus(){return null},onBlur:function onBlur(){return null}};var Gb,qb=formik_Input_Input,Jb=Object(y.a)(Gb||(Gb=Object(x.a)(["\n  text-align: center;\n  width: 100%;\n  height: 100%;\n\n  .infoText {\n    margin-top: 20px;\n    font-size: 12px;\n  }\n\n  input {\n    background-color: transparent;\n    border: 0.5px solid #dedede;\n    width: 50%;\n    text-align: center;\n  }\n\n  .addSignalButton {\n    margin-top: 15px;\n    margin-top: 20px;\n    background-color: transparent;\n    border: none;\n    padding: 0.3rem;\n    border-radius: 25%;\n  }\n"])));function AddSignalFormTab(e){var t=e.onFocus,n=e.onBlur,a=Object(Rc.f)(),i=a.values,r=a.setFieldValue,o=a.errors,c=Object(S.useState)(!1),l=Object(O.a)(c,2),s=l[0],u=l[1],d=Object(S.useCallback)((function(){var e={multiplicity:"m",kind:"signal",delta:Number(i.newSignalDelta),j:[{multiplicity:translateMultiplet("m"),coupling:""}]},t=i.signals.slice().concat(e);r("signals",t),r("activeTab",String(t.length-1))}),[r,i.newSignalDelta,i.signals]);return Object(S.useEffect)((function(){o.newSignalDelta?u(!0):u(!1)}),[o.newSignalDelta,i.signals]),Object(ye.c)("div",{css:Jb,children:[Object(ye.c)("div",{children:[Object(ye.b)("p",{className:"infoText",children:"Edit or select a delta value of new signal (ppm):"}),Object(ye.b)(qb,{name:"newSignalDelta",type:"number",placeholder:"\u0394".concat(" (ppm)"),onFocus:t,onBlur:n})]}),Object(ye.b)("div",{children:Object(ye.b)(Kb,{className:"addSignalButton",onClick:d,disabled:s,css:{color:s?"grey":"blue",width:"100%"},children:Object(ye.b)(Xe.y,{title:"Add new signal"})})})]})}var $b=Object(S.memo)(AddSignalFormTab);function SelectBox(e){var t=e.values,n=Object(fe.a)(e,["values"]),a=Object(Rc.e)(n),i=Object(O.a)(a,1)[0];return t&&t.length>0?Object(ye.c)("div",{children:[Object(ye.b)(Rc.a,Object(v.a)(Object(v.a)(Object(v.a)({as:"select"},i),n),{},{children:t.map((function(e,t){return Object(ye.b)("option",{children:e},t)}))})),Object(ye.b)(Wb,Object(v.a)({},n))]}):null}SelectBox.protoTypes={valuePath:Gi.a.instanceOf(Array).isRequired,valueSelectionTemplate:Gi.a.func};var Qb,ep=SelectBox,tp=Object(y.a)(Qb||(Qb=Object(x.a)(["\n  border-spacing: 0;\n  border: 1px solid #dedede;\n  width: 100%;\n  height: 100%;\n  font-size: 12px;\n\n  th,\n  td {\n    text-align: center;\n    margin: 0;\n    padding: 0.4rem;\n    border-bottom: 1px solid #dedede;\n    border-right: 1px solid #dedede;\n\n    button {\n      background-color: transparent;\n      border: none;\n    }\n\n    .add-button {\n      color: blue;\n    }\n\n    .delete-button {\n      border-radius: 25%;\n      padding: 0;\n      padding-left: 0.3rem;\n      padding-right: 0.3rem;\n    }\n    .delete-button:hover {\n      background-color: red;\n      .icon {\n        color: white;\n      }\n    }\n\n    input {\n      background-color: transparent;\n      border: 0.5px solid #dedede;\n      height: 100%;\n      width: 100%;\n      text-align: center;\n    }\n    .selectBox {\n      background-color: transparent;\n      border: 0.5px solid #dedede;\n      height: 100%;\n      width: 100%;\n      text-align: center;\n    }\n  }\n\n  tr {\n    :last-child {\n      border-top: 3px solid #dedede;\n    }\n  }\n"]))),np={border:"1px solid red"};function CouplingsTable(e){var t=e.push,n=e.remove,a=e.onFocus,i=e.onBlur,r=Object(Rc.f)(),o=r.values,c=r.setFieldValue,l=r.errors;Object(S.useEffect)((function(){o.signals[o.activeTab]&&o.signals[o.activeTab].j.forEach((function(e,t){hasCouplingConstant(e.multiplicity)||c("signals.".concat(o.activeTab,".j.").concat(t,".coupling"),"")}))}),[c,o.activeTab,o.signals]);var s=Object(S.useCallback)((function(e){return C()(l,"signals[".concat(o.activeTab,"].missingCouplings"),[]).some((function(t){return t.index===e}))}),[l,o.activeTab]);return Object(ye.b)("table",{css:tp,children:Object(ye.c)("tbody",{children:[Object(ye.c)("tr",{children:[Object(ye.b)("th",{children:"#"}),Object(ye.b)("th",{children:"Multiplicity"}),Object(ye.b)("th",{children:"J (Hz)"}),Object(ye.b)("th",{children:""})]}),C()(o,"signals[".concat(o.activeTab,"].j"),[]).map((function(e,t){return Object(ye.c)("tr",{children:[Object(ye.b)("td",{children:t+1}),Object(ye.b)("td",{children:Object(ye.b)(ep,{className:"selectBox",name:"signals.".concat(o.activeTab,".j.").concat(t,".multiplicity"),values:vr.map((function(e){return e.label}))})}),Object(ye.b)("td",{children:Object(ye.b)(qb,{name:"signals.".concat(o.activeTab,".j.").concat(t,".coupling"),type:"number",placeholder:"J (Hz)",disabled:!hasCouplingConstant(e.multiplicity),onFocus:a,onBlur:i,style:s(t)?np:null})}),Object(ye.b)("td",{children:Object(ye.b)(Kb,{className:"delete-button",onClick:function onClick(){n(t)},children:Object(ye.b)(Xe.v,{className:"icon",title:"Delete coupling"})})})]},"editCouplings".concat(o.activeTab).concat(t))})),Object(ye.b)("tr",{}),Object(ye.b)("tr",{children:Object(ye.b)("td",{colSpan:4,children:Object(ye.b)(Kb,{className:"add-button",onClick:function onClick(){return t({multiplicity:translateMultiplet("m"),coupling:""})},children:Object(ye.b)(Xe.y,{title:"Add new coupling"})})})})]})})}var ap,ip=Object(S.memo)(CouplingsTable),rp=Object(y.a)(ap||(ap=Object(x.a)(["\n  border-spacing: 0;\n  border: 1px solid #dedede;\n  width: 100%;\n  font-size: 12px;\n  height: 100%;\n\n  margin: 0;\n  padding: 0.4rem;\n  text-align: center;\n"])));function SignalFormTab(e){var t=e.onFocus,n=e.onBlur,a=Object(Rc.f)().values;return Object(ye.b)("div",{css:rp,children:Object(ye.b)(Rc.b,{name:"signals.".concat(a.activeTab,".j"),render:function render(e){var a=e.push,i=e.remove;return Object(ye.b)("div",{children:Object(ye.b)(ip,{push:a,remove:i,onFocus:t,onBlur:n})})}})})}var op,cp,lp=Object(S.memo)(SignalFormTab),sp=Object(y.a)(op||(op=Object(x.a)(["\n  text-align: center;\n  width: 100%;\n\n  .errorText {\n    color: red;\n  }\n\n  .infoText {\n    margin-bottom: 20px;\n    font-size: 11px;\n  }\n"]))),up=Object(y.a)(cp||(cp=Object(x.a)(["\n  color: red;\n"])));function SignalsForm(){var e=Object(Rc.f)(),t=e.values,n=e.setFieldValue,a=e.errors,i=useChartData(),r=i.data,o=i.activeSpectrum,c=Object(S.useState)(null),l=Object(O.a)(c,2),s=l[0],u=l[1],d=Object(S.useState)(null),b=Object(O.a)(d,2),p=b[0],f=b[1];Object(S.useEffect)((function(){r&&o&&C()(r,"[".concat(o.index,"].info.originFrequency"),void 0)?f(r[o.index].info.originFrequency):f(null)}),[o,r]),Object(S.useEffect)((function(){return bi.on("brushEnd",(function(e){s&&p&&n(s,Math.abs(e.range[0]-e.range[1])*p)})),function(){bi.off("brushEnd")}}),[s,n,p,t.activeTab]),Object(S.useEffect)((function(){return bi.on("mouseClick",(function(e){"addSignalTab"===t.activeTab&&s&&n(s,e.xPPM)})),function(){bi.off("mouseClick")}}),[t.activeTab,s,n]);var h=Object(S.useCallback)((function(e){u(e)}),[u]),m=Object(S.useCallback)((function(e){var t=e.tabid;n("activeTab",t),u(null)}),[n]),g=Object(S.useCallback)((function(e){var a=e.tabid,i=t.signals.filter((function(e,t){return t!==Number(a)}));n("signals",i)}),[n,t.signals]);Object(S.useEffect)((function(){n("activeTab",t.signals.length>0?(t.signals.length-1).toString():"addSignalTab")}),[n,t.signals.length]);var j=Object(S.useCallback)((function(e){return a.signals&&(C()(a,"signals.noCouplings",[]).some((function(t){return t.index===e}))||C()(a,"signals[".concat(e,"].missingCouplings"),[]).length>0)}),[a]),v=Object(S.useMemo)((function(){var e=t.signals.length>0?t.signals.map((function(e,t){return Object(ye.b)("div",{tabid:"".concat(t),tablabel:"\u0394".concat(": ",e.delta.toFixed(5)," (").concat(e.j.map((function(e){return translateMultiplet(e.multiplicity)})).join(""),")"),tabstyles:j(t)?up:null,children:Object(ye.b)(lp,{onFocus:h})},"signalForm".concat(t))})):[],n=Object(ye.b)("div",{tablabel:"+",tabid:"addSignalTab",candelete:"false",children:Object(ye.b)($b,{onFocus:h})},"addSignalTab");return e.concat(n)}),[h,j,t.signals]),x=Object(ye.b)("p",{className:"infoText",children:"Focus on an input field and press Shift + Drag & Drop to draw a coupling constant in spectrum view."}),y=Object(ye.b)("p",{className:"infoText",children:"Focus on the input field and press Shift + Left mouse click to select new signal delta value in spectrum view."});return Object(ye.c)("div",{children:[Object(ye.b)("div",{css:sp,children:a.signals&&(a.signals.noSignals||a.signals.noCouplings)?Object(ye.c)("div",{children:[Object(ye.b)("p",{className:"errorText",children:a.signals.noSignals||a.signals.noCouplings[0].message}),a.signals.noSignals?y:null]}):"addSignalTab"===t.activeTab?y:x}),Object(ye.b)(El,{defaultTabID:t.activeTab,onClick:m,canDelete:!0,onDelete:g,children:v})]})}var dp=Object(S.memo)(SignalsForm);var bp,pp=function EditRangeValidation(e,t){var n={};e.newSignalDelta?(e.newSignalDelta<t.from||e.newSignalDelta>t.to)&&(n.newSignalDelta=" ".concat(e.newSignalDelta.toFixed(5)," ppm out of the range")):n.newSignalDelta="required";var a=function createSignalsError(e){n.signals||(n.signals={}),void 0===e||n.signals["".concat(e)]||(n.signals["".concat(e)]={missingCouplings:[]})};return 0===e.signals.length?(a(),n.signals.noSignals="There must be at least one signal in a range!"):e.signals.forEach((function(e,t){0===e.j.length&&(a(t),n.signals.noCouplings||(n.signals.noCouplings=[]),n.signals.noCouplings.push({index:t,message:"There must be at least one coupling in signal ".concat(t+1,"!")})),e.j.forEach((function(e,i){hasCouplingConstant(e.multiplicity)&&""===e.coupling&&(a(t),n.signals["".concat(t)].missingCouplings.push({index:i,message:"There are coupling values missing in signal ".concat(t+1,"!")}))}))})),n},fp=Object(y.a)(bp||(bp=Object(x.a)(["\n  overflow: auto;\n  width: 600px;\n  height: 500px;\n  padding: 5px;\n  button:focus {\n    outline: none;\n  }\n  .header {\n    height: 24px;\n    border-bottom: 1px solid #f0f0f0;\n    display: flex;\n    align-items: center;\n    span {\n      color: #464646;\n      font-size: 15px;\n      flex: 1;\n      border-left: 1px solid #ececec;\n      padding-left: 6px;\n    }\n\n    button {\n      background-color: transparent;\n      border: none;\n      padding: 5px;\n\n      svg {\n        height: 16px;\n      }\n    }\n  }\n  .container {\n    display: flex;\n    margin: 30px 5px;\n    input,\n    button {\n      padding: 5px;\n      border: 1px solid gray;\n      border-radius: 5px;\n      height: 36px;\n      margin: 2px;\n    }\n    input {\n      flex: 10;\n    }\n    button {\n      flex: 2;\n      color: white;\n      background-color: gray;\n    }\n  }\n"])));function EditRangeModal(e){var t=e.onSaveEditRangeModal,n=e.onCloseEditRangeModal,a=e.onZoomEditRangeModal,i=e.rangeData,r=Object(S.useCallback)((function(){a(i)}),[a,i]);Object(S.useEffect)((function(){r()}),[r]);var o=Object(S.useCallback)((function(){n()}),[n]),c=Object(S.useCallback)((function(e){return e.filter((function(e){return""!==e.coupling})).map((function(e){return Object(v.a)(Object(v.a)({},e),{},{multiplicity:translateMultiplet(e.multiplicity)})}))}),[]),l=Object(S.useCallback)((function(e){return e.map((function(e){return Object(v.a)(Object(v.a)({id:generateID()},e),{},{multiplicity:e.j.map((function(e){return translateMultiplet(e.multiplicity)})).join(""),j:c(e.j)})}))}),[c]),s=Object(S.useCallback)(function(){var e=Object(Br.a)(Hr.a.mark((function _callee(e){var n;return Hr.a.wrap((function _callee$(a){for(;;)switch(a.prev=a.next){case 0:return(n=Object(v.a)({},i)).signal=l(e.signals),a.next=4,t(n);case 4:o();case 5:case"end":return a.stop()}}),_callee)})));return function(t){return e.apply(this,arguments)}}(),[l,o,t,i]),u=Object(S.useMemo)((function(){return i.signal.map((function(e){var t,n=0,a=[];return e.multiplicity.split("").forEach((function(i){hasCouplingConstant(i)?(t=Object(v.a)({},e.j[n]),n++):t={multiplicity:i,coupling:""},t.multiplicity=translateMultiplet(t.multiplicity),a.push(t)})),Object(v.a)(Object(v.a)({},e),{},{j:a})}))}),[i.signal]),d=Object(S.useCallback)((function(e){var t=Object.keys(e);return t.length>0&&(1!==t.length||"newSignalDelta"!==t[0])}),[]);return Object(ye.b)("div",{css:fp,children:i&&Object(ye.b)(Rc.d,{initialValues:{signals:u,newSignalDelta:(i.from+i.to)/2,activeTab:"0"},validate:function validate(e){return pp(e,i)},onSubmit:function onSubmit(e,t){var n=t.setSubmitting;s(e),n(!1)},children:function children(e){var t=e.values,n=e.errors;return Object(ye.c)(Rc.c,{children:[Object(ye.c)("div",{className:"header handle",children:[Object(ye.b)(Kb,{onClick:r,className:"zoom-button",children:Object(ye.b)(Xe.D,{title:"Set to default view on range in spectrum"})}),Object(ye.b)("span",{children:"Range Information and Editing"}),Object(ye.b)(Xu,{onClick:function onClick(){return s(t)},disabled:d(n),popupTitle:"Save and exit"}),Object(ye.b)($e,{onClick:o})]}),Object(ye.b)(dp,{})]})}})})}EditRangeModal.defaultProps={onSave:function onSave(){return null},onClose:function onClose(){return null},onZoom:function onZoom(){return null}};var hp,mp=EditRangeModal,gp=Object(y.a)(hp||(hp=Object(x.a)(["\n  width: 66px;\n  padding: 0 !important;\n  button {\n    background-color: transparent;\n    border: none;\n    padding: 5px;\n  }\n\n  button:disabled {\n    opacity: 0.6;\n  }\n"]))),jp={marginLeft:2,marginRight:2,border:"none",height:"20px"};var vp=function ActionsColumn(e){var t=e.rowData,n=e.onHoverSignal,a=e.rowSpanTags,i=useDispatch(),r=ie(),o=useAssignmentData(),c=Object(S.useCallback)((function(){var e=Math.abs(t.from-t.to);i({type:Et,xDomain:[t.from-e,t.to+e]})}),[i,t.from,t.to]),l=Object(S.useCallback)((function(){i({type:yn,payload:{id:t.id,assignmentData:o}})}),[o,i,t]),s=Object(S.useCallback)((function(e){i({type:Zn,payload:{rowData:t,value:e}})}),[i,t]),u=Object(S.useCallback)((function(e){i({type:Un,payload:{editedRowData:e,assignmentData:o}})}),[o,i]),d=Object(S.useCallback)((function(){i({type:Sn}),r.close()}),[i,r]),b=Object(S.useCallback)((function(){i({type:Nt,selectedTool:"editRange"}),r.show(Object(ye.b)(mp,{onCloseEditRangeModal:d,onSaveEditRangeModal:u,onZoomEditRangeModal:c,rangeData:t}),{position:G.CENTER_RIGHT,transition:te,isBackgroundBlur:!1})}),[d,i,r,t,u,c]);return Object(ye.c)(S.Fragment,{children:[Object(ye.b)("td",Object(v.a)(Object(v.a)({},n),{},{children:Object(ye.b)(is,{onChange:s,data:cr,defaultValue:t.tableMetaInfo.signal.kind,style:jp})})),Object(ye.c)("td",Object(v.a)(Object(v.a)({},a),{},{css:gp,children:[Object(ye.b)("button",{type:"button",className:"delete-button",onClick:l,children:Object(ye.b)(Xe.B,{})}),Object(ye.b)("button",{type:"button",className:"zoom-button",onClick:c,children:Object(ye.b)(Xe.D,{title:"Zoom to range in spectrum"})}),Object(ye.b)("button",{type:"button",className:"edit-button",onClick:b,children:Object(ye.b)(Xe.i,{color:"blue"})})]}))]})};var Op=function CouplingColumn(e){var t=e.rowData,n=e.onHoverSignal,a=C()(t,"tableMetaInfo.signal.j");return Object(I.jsx)("td",Object(v.a)(Object(v.a)({},n),{},{children:a&&a.map((function(e){return e.coupling.toFixed(1)})).join(",")}))},xp={color:"red",fontWeight:"bold"};function RangeAssignmentsColumn(e){var t=e.rowData,n=e.assignment,a=e.highlight,i=e.onUnlinkVisibilityChange,r=e.unlinkVisibility,o=e.onLink,c=e.onUnlink,l=e.rowSpanTags,s=e.onHover,u=e.highlightData,d=Object(S.useMemo)((function(){return C()(t,"diaID",[])}),[t]),b=Object(S.useCallback)((function(e){i(e)}),[i]),p=Object(S.useMemo)((function(){return n.isActive||n.isOnHover||a.isActive&&!u.highlight.highlighted.find((function(e){return e===n.id}))?{color:"red",fontWeight:"bold"}:{color:"black",fontWeight:"normal"}}),[n.id,n.isActive,n.isOnHover,a.isActive,u.highlight.highlighted]);return Object(I.jsx)("td",Object(v.a)(Object(v.a)(Object(v.a)({},l),s),{},{onClick:function onClick(e){return o(e,n)},children:void 0!==t.pubIntegral&&t.pubIntegral>0?t.diaID&&t.diaID.length>0?Object(I.jsxs)("div",{onMouseEnter:function onMouseEnter(){return b(!0)},onMouseLeave:function onMouseLeave(){return b(!1)},children:[t.pubIntegral," "," ( ",Object(I.jsx)("span",{style:p,children:d.length})," ) ",Object(I.jsx)("sup",{children:Object(I.jsx)("button",{type:"button",style:{visibility:r?"visible":"hidden",padding:0,margin:0},onClick:function onClick(e){return c(e,!0)},children:Object(I.jsx)(Xe.w,{color:"red"})})})]}):n.isActive?Object(I.jsxs)("div",{children:["".concat(t.pubIntegral," ("),Object(I.jsx)("span",{style:xp,children:"0"}),")"]}):t.pubIntegral:n.isActive?Object(I.jsxs)("div",{children:["0 (",Object(I.jsx)("span",{style:xp,children:"0"}),")"]}):""}))}RangeAssignmentsColumn.defaultProps={onHover:function onHover(){return null},onUnlinkVisibilityChange:function onUnlinkVisibilityChange(){return null},onLink:function onLink(){return null},onUnlink:function onUnlink(){return null}};var yp=Object(S.memo)(RangeAssignmentsColumn);function RangeColumn(e){var t=e.value,n=e.rowSpanTags,a=e.onHoverRange,i=e.format;return Object(I.jsx)("td",Object(v.a)(Object(v.a)(Object(v.a)({},n),a),{},{children:Vi(t,i)}))}var kp=Object(S.memo)(RangeColumn);function RelativeColumn(e,t){var n=e.rowData,a=e.rowSpanTags,i=e.onHoverRange,r=e.format,o=e.onEditStart,c=e.editStatus,l=useDispatch(),s=Object(S.useMemo)((function(){var e=hr(n),t=Vi(n.integral,r);return e?t:"[ ".concat(t," ]")}),[r,n]),u=Object(S.useCallback)((function(e){l({type:Xn,value:e.target.value,id:n.id})}),[l,n.id]);return Object(I.jsx)("td",Object(v.a)(Object(v.a)(Object(v.a)({},a),i),{},{children:Object(I.jsx)(Wu,{ref:t,onEditStart:o,value:s,onSave:u,type:"number",style:{padding:"0.1rem 0.4rem"},editStatus:c})}))}var Cp=Object(S.forwardRef)(RelativeColumn);function SignalAssignmentsColumn(e){var t=e.rowData,n=e.onHover,a=e.assignment,i=e.highlight,r=e.onUnlinkVisibilityChange,o=e.unlinkVisibility,c=e.onLink,l=e.onUnlink,s=Object(S.useMemo)((function(){return C()(t,"tableMetaInfo.signal.diaID",[])}),[t]),u=Object(S.useMemo)((function(){return a.isActive||i.isActive?{color:"red",fontWeight:"bold"}:null}),[a.isActive,i.isActive]),d=Object(S.useCallback)((function(e){r(e)}),[r]),b=Object(S.useCallback)((function(e){c(e,a)}),[a,c]);return Object(I.jsx)("td",Object(v.a)(Object(v.a)({},n),{},{onClick:b,style:u,children:s&&s.length>0?Object(I.jsxs)("div",{onMouseEnter:function onMouseEnter(){return d(!0)},onMouseLeave:function onMouseLeave(){return d(!1)},children:[s.length," ",Object(I.jsx)("sup",{children:Object(I.jsx)("button",{type:"button",style:{visibility:o?"visible":"hidden",padding:0,margin:0},onClick:function onClick(e){return l(e,!1)},children:Object(I.jsx)(Xe.w,{color:"red"})})})]}):a.isActive?"0":""}))}SignalAssignmentsColumn.defaultProps={onHover:function onHover(){return null},onUnlinkVisibilityChange:function onUnlinkVisibilityChange(){return null},onLink:function onLink(){return null},onUnlink:function onUnlink(){return null}};var Sp=Object(S.memo)(SignalAssignmentsColumn);function useFormat(e){return function(t,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",r=C()(e,n,"0.000");return Vi(t,r,a,i)}}var Dp,wp,Tp=function SignalDeltaColumn(e){var t=e.rowData,n=e.onHoverSignal,a=e.preferences,i=e.onEditStart,r=e.editStatus,o=useDispatch(),c=t.tableMetaInfo.signal,l=useFormat(a),s=Object(S.useCallback)((function(e){o({type:Yn,payload:{value:e.target.value,rangeID:t.id,signalID:c.id}})}),[o,t,c.id]),u=Object(S.useCallback)((function(){i(c.id)}),[i,c.id]);return c?Object(I.jsx)("td",Object(v.a)(Object(v.a)({},n),{},{children:checkMultiplicity(c.multiplicity,["m"])?Object(I.jsx)(Wu,{onEditStart:u,value:c.delta.toFixed(3),onSave:s,type:"number",style:{padding:"0.1rem 0.4rem"},editStatus:r}):"".concat(l(t.from,"fromFormat")," - ").concat(l(t.to,"toFormat"))})):Object(I.jsx)("td",{children:""})},Mp=Object(y.a)(Dp||(Dp=Object(x.a)(["\n  background-color: #ff6f0057;\n"]))),Ap=Object(y.a)(wp||(wp=Object(x.a)(["\n  background-color: #f5f5dc;\n"])));var Ep=function RangesTableRow(e){var t=e.rowData,n=e.onUnlink,a=e.onContextMenu,i=e.onColumnEditStart,r=e.preferences,o=e.editFlags,c=o.relativeFlags,l=o.signalFlags,s=useAssignment(t.id),u=Object(gi.c)([s.id].concat(s.assigned.x||[])),d=useAssignment(t.tableMetaInfo.id),b=Object(gi.c)([d.id].concat(d.assigned.x||[])),p=Object(gi.d)(),f=Object(S.useState)(!1),h=Object(O.a)(f,2),m=h[0],g=h[1],j=Object(S.useState)(!1),x=Object(O.a)(j,2),y=x[0],k=x[1],D=useFormat(r),w=Object(S.useMemo)((function(){return{rowSpan:t.tableMetaInfo.rowSpan,style:C()(t.tableMetaInfo,"hide",!1)?{display:"none"}:null}}),[t.tableMetaInfo]),T=Object(S.useCallback)((function(e,a){e&&e.stopPropagation(),void 0!==a?a?(n(t),g(!1),s.removeAll("x")):(n(t,C()(t,"tableMetaInfo.signalIndex",void 0)),k(!1),d.removeAll("x")):(g(!1),k(!1))}),[s,d,n,t]),M=Object(S.useCallback)((function(e,t){e.stopPropagation(),t.onClick("x")}),[]),A=Object(S.useMemo)((function(){return{onMouseEnter:function onMouseEnter(){s.onMouseEnter("x"),u.show()},onMouseLeave:function onMouseLeave(){s.onMouseLeave("x"),u.hide()}}}),[s,u]),E=Object(S.useMemo)((function(){return{onMouseEnter:function onMouseEnter(){d.onMouseEnter("x"),b.show()},onMouseLeave:function onMouseLeave(){d.onMouseLeave("x"),b.hide()}}}),[d,b]),P=Object(S.useMemo)((function(){return u.isActive||s.isActive?Mp:C()(t,"tableMetaInfo.isConstantlyHighlighted",!1)?Ap:null}),[s.isActive,u.isActive,t]);return Object(ye.c)("tr",Object(v.a)(Object(v.a)({onContextMenu:function onContextMenu(e){return a(e,t)},css:P},u.onHover),{},{children:[Object(ye.b)("td",Object(v.a)(Object(v.a)(Object(v.a)({},w),A),{},{children:t.tableMetaInfo.rowIndex+1})),isColumnVisible(r,"showFrom")&&Object(ye.b)(kp,{value:t.from,rowSpanTags:w,onHoverRange:A,format:D("showFrom")}),isColumnVisible(r,"showTo")&&Object(ye.b)(kp,{value:t.to,rowSpanTags:w,onHoverRange:A,format:D("toFormat")}),Object(ye.b)(Tp,{rowData:t,onHoverSignal:E,preferences:r,onEditStart:function onEditStart(e){return i("signal","".concat(e))},editStatus:l[t.tableMetaInfo.signal.id]}),isColumnVisible(r,"showRelative")&&Object(ye.b)(Cp,{rowData:t,rowSpanTags:w,onHoverRange:A,format:D("relativeFormat"),onEditStart:function onEditStart(){return i("relative",t.id)},editStatus:c[t.id]}),isColumnVisible(r,"showAbsolute")&&Object(ye.b)(Ub,{value:t.absolute,rowSpanTags:w,onHoverRange:A,format:D("absoluteFormat")}),Object(ye.b)("td",Object(v.a)(Object(v.a)({},E),{},{children:C()(t,"tableMetaInfo.signal.multiplicity","")})),Object(ye.b)(Op,{rowData:t,onHoverSignal:E}),Object(ye.b)(Sp,{rowData:t,assignment:d,highlight:b,onHover:E,unlinkVisibility:y,onUnlinkVisibilityChange:function onUnlinkVisibilityChange(e){return k(e)},onLink:M,onUnlink:T}),Object(ye.b)(yp,{rowData:t,assignment:s,highlight:u,onHover:A,unlinkVisibility:m,onUnlinkVisibilityChange:function onUnlinkVisibilityChange(e){return g(e)},onLink:M,onUnlink:T,rowSpanTags:w,highlightData:p}),Object(ye.b)(vp,{rowData:t,onHoverSignal:E,onHoverRange:A,rowSpanTags:w})]}))};var Pp,Fp=function useMapRanges(e){return Object(S.useMemo)((function(){var t=[];return e.forEach((function(e,n){1===e.signal.length?t.push(Object(v.a)(Object(v.a)({},e),{},{tableMetaInfo:Object(v.a)(Object(v.a)({},e.tableMetaInfo),{},{signal:e.signal[0],rowIndex:n,signalIndex:0,id:e.signal[0].id})})):e.signal.length>1&&e.signal.forEach((function(a,i){var r=!1,o=null;i<e.signal.length-1&&0===i?o=e.signal.length:r=!0,t.push(Object(v.a)(Object(v.a)({},e),{},{tableMetaInfo:Object(v.a)(Object(v.a)({},e.tableMetaInfo),{},{signal:a,rowSpan:o,hide:r,rowIndex:n,signalIndex:i,id:a.id})}))}))})),t}),[e])},_p=Object(y.a)(Pp||(Pp=Object(x.a)(["\n  border-spacing: 0;\n  border: 1px solid #dedede;\n  width: 100%;\n  font-size: 12px;\n  // height: 100%;\n  .react-contextmenu-wrapper {\n    display: contents;\n  }\n  tr {\n    :last-child {\n      td {\n        border-bottom: 0;\n      }\n    }\n  }\n  th {\n    position: sticky;\n    top: 0;\n    background-color: white;\n    z-index: 1;\n  }\n  th,\n  td {\n    white-space: nowrap;\n    text-align: center;\n    margin: 0;\n    padding: 0.1rem 0.4rem;\n    border-bottom: 1px solid #dedede;\n    border-right: 1px solid #dedede;\n\n    :last-child {\n      border-right: 0;\n    }\n    button {\n      background-color: transparent;\n      border: none;\n    }\n  }\n"])));var Ip=function RangesTable(e){var t=e.tableData,n=e.onChangeKind,a=e.onDelete,i=e.onUnlink,r=e.onZoom,o=e.onEdit,c=e.context,l=e.activeTab,s=e.preferences,u=l&&l.replace(/[0-9]/g,""),d=Object(S.useRef)(),b=Fp(t),p=Xb("id",b),f=Object(O.a)(p,2),h=f[0],m=f[1],g=Xb("id",b),j=Object(O.a)(g,2),v=j[0],x=j[1],y=useGlobal().rootRef,k=function isVisible(e){return C()(s,e,!1)},D=Object(S.useCallback)((function(e,t){checkModifierKeyActivated(e)||(e.preventDefault(),d.current.handleContextMenu(e,t))}),[d]),w=Object(S.useCallback)((function(e,t){"relative"===e?m(t):"signal"===e&&x(t)}),[m,x]);return Object(S.useEffect)((function(){var e=function handleEditStart(){w("realtive",null),w("signal",null)};return y&&y.addEventListener("mousedown",e),function(){y&&y.removeEventListener("mousedown",e)}}),[w,y]),Object(ye.c)(S.Fragment,{children:[Object(ye.c)("table",{css:_p,children:[Object(ye.b)("thead",{children:Object(ye.c)("tr",{children:[Object(ye.b)("th",{children:"#"}),k("showFrom")?Object(ye.b)("th",{children:"From"}):null,k("showTo")?Object(ye.b)("th",{children:"To"}):null,Object(ye.b)("th",{children:"\u03b4 (ppm)"}),k("showRelative")?Object(ye.c)("th",{children:["Rel. ",u]}):null,k("showAbsolute")?Object(ye.b)("th",{children:"Absolute"}):null,Object(ye.b)("th",{children:"Mult."}),Object(ye.b)("th",{children:"J (Hz)"}),Object(ye.b)("th",{children:Object(ye.b)(Xe.u,{style:{fontSize:10}})}),Object(ye.b)("th",{children:"\u03a3"}),Object(ye.b)("th",{children:"Kind"}),Object(ye.b)("th",{children:""})]})}),Object(ye.b)("tbody",{children:b&&b.map((function(e,t){return Object(ye.b)(Ep,{rowData:b[t],onChangeKind:n,onDelete:a,onUnlink:i,onZoom:r,onEdit:o,onContextMenu:function onContextMenu(e,t){return D(e,t)},preferences:s,onColumnEditStart:w,editFlags:{relativeFlags:h,signalFlags:v}},"rangesTableRow".concat(t))}))})]}),Object(ye.b)(qu,{ref:d,context:c})]})},Np={toolbar:{display:"flex",flexDirection:"row",borderBottom:"0.55px solid rgb(240, 240, 240)"},container:{flexDirection:"column",height:"100%",display:"flex"},sumButton:{borderRadius:"5px",marginTop:"3px",color:"white",backgroundColor:"#6d6d6d",border:"none",height:"16px",width:"18px",fontSize:"12px",padding:0},removeAssignmentsButton:{borderRadius:"5px",marginTop:"3px",marginLeft:"2px",border:"none",height:"16px",width:"18px",fontSize:"12px",padding:0},setShowMultiplicityTreesButton:{borderRadius:"5px",marginTop:"3px",marginLeft:"5px",color:"black",backgroundColor:"transparent",border:"none",height:"16px",width:"18px",fontSize:"12px",padding:0},button:{backgroundColor:"transparent",border:"none"}};function RangesTablePanel(e){var t=e.ranges,n=e.x,a=e.y,i=e.info,r=e.xDomain,o=e.preferences,c=e.activeTab,l=e.molecules,s=e.nucleus,u=Object(S.useState)(!1),d=Object(O.a)(u,2),b=d[0],p=d[1],f=useAssignmentData(),h=useDispatch(),m=Mc(),g=Object(S.useState)(!1),j=Object(O.a)(g,2),x=j[0],y=j[1],k=Object(S.useRef)(),D=Object(S.useMemo)((function(){var e=function isInView(e,t){var n=1e4;return e*=n,(t*=n)>=r[0]*n&&e<=r[1]*n||e<=r[0]*n&&t>=r[1]*n};return t.values?(b?function getFilteredRanges(t){return t.filter((function(t){return e(t.from,t.to)}))}(t.values):t.values).map((function(t){return Object(v.a)(Object(v.a)({},t),{},{tableMetaInfo:{isConstantlyHighlighted:e(t.from,t.to)}})})):[]}),[b,t.values,r]),w=Object(S.useCallback)((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;h({type:Kn,payload:{rangeData:e,assignmentData:f,signalIndex:t}})}),[f,h]),T=Object(S.useCallback)((function(e){if(n&&a){var t=e.from,i=e.to,r=Object(He.j)(n,{from:t,to:i}),o=r.fromIndex,c=r.toIndex,l=Object(v.a)({x:n.slice(o,c),y:a.slice(o,c)},e);Object(el.c)(JSON.stringify(l,void 0,2))?m.show("Data copied to clipboard"):m.error("copy to clipboard failed")}}),[n,a,m]),M=Object(S.useMemo)((function(){return C()(o,"formatting.panels.ranges.[".concat(c,"]"))||Ci}),[c,o]),A=Object(S.useMemo)((function(){return[{label:"Copy to clipboard",onClick:T}]}),[T]),E=Object(S.useCallback)((function(){p(!b)}),[b]),P=Object(S.useCallback)((function(){y(!x)}),[x]),F=Object(S.useCallback)((function(){k.current.saveSetting(),y(!1)}),[]);return Object(I.jsx)(I.Fragment,{children:Object(I.jsxs)("div",{style:Np.container,children:[!x&&Object(I.jsx)(zb,{ranges:t,info:i,activeTab:c,molecules:l,onUnlink:w,onFilterActivated:E,onSettingClick:P,isFilterActive:b,filterCounter:D.length}),x&&Object(I.jsx)(Zu,{onSave:F,onClose:P}),Object(I.jsx)("div",{style:{height:"100%",overflow:"hidden"},children:Object(I.jsxs)(ru.a,{isFlipped:x,infinite:!0,containerStyle:{overflow:"hidden",height:"100%"},children:[Object(I.jsx)("div",{style:{overflow:"auto",height:"100%",display:"block"},children:D&&D.length>0?Object(I.jsx)(Ip,{activeTab:c,tableData:D,onUnlink:w,context:A,preferences:M}):Object(I.jsx)(ed,{})}),Object(I.jsx)(Bb,{ranges:t,ref:k,nucleus:s,preferences:o})]})})]})})}var Rp=or(Object(S.memo)(RangesTablePanel));var Lp=function SpectraWraper(e){var t=function Wrapper(t){var n=useChartData(),a=n.data,i=n.activeSpectrum,r=n.activeTab,o=n.displayerMode,c=t.forwardedRef,l=Object(fe.a)(t,["forwardedRef"]);return Object(I.jsx)(e,Object(v.a)(Object(v.a)({},l),{},{data:a,activeSpectrum:i,activeTab:r,displayerMode:o,ref:c}))};return Object(S.forwardRef)((function(e,n){return Object(I.jsx)(t,Object(v.a)(Object(v.a)({},e),{},{forwardedRef:n}))}))};function SpectraPanelHeader(e){var t=e.data,n=e.activeSpectrum,a=e.activeTab,i=e.displayerMode,r=e.spectrums,o=ie(),c=Mc(),l=useDispatch(),s=Object(S.useCallback)((function(){o.showConfirmDialog({message:"All records will be deleted, Are You sure?",buttons:[{text:"Yes",handler:function handler(){l({type:tn})}},{text:"No"}]})}),[l,o]),u=Object(S.useCallback)((function(){var e=r.map((function(e){return e.id}));l({type:Ht,id:e})}),[l,r]),d=Object(S.useCallback)((function(){l({type:Ht,id:[]})}),[l]),b=Object(S.useCallback)((function(){var e=function getMissingProjection(e){var t=a.split(",");t=t[0]===t[1]?[t[0]]:t;var n,i=[],r=Object(ac.a)(t);try{var o=function _loop(){var t=n.value;e.some((function(e){return e.info.nucleus===t}))||i.push(t)};for(r.s();!(n=r.n()).done;)o()}catch(c){r.e(c)}finally{r.f()}return i}(t);e.length>0?l({type:Bn,nucleus:e}):c.error("Nothing to calculate")}),[a,c,t,l]),p=Object(S.useCallback)((function(){l({type:ca})}),[l]),f=Object(S.useCallback)((function(){l({type:la})}),[l]);return Object(I.jsxs)(Hu,{onDelete:s,counter:r&&r.length,deleteToolTip:"Delete all spectra",children:[Object(I.jsx)(dl,{popupTitle:"Hide all spectra",onClick:d,children:Object(I.jsx)(Xe.m,{})}),Object(I.jsx)(dl,{popupTitle:"Show all spectra",onClick:u,children:Object(I.jsx)(Xe.l,{})}),n&&a&&a.split(",").length>1&&Object(I.jsx)(dl,{popupTitle:"Add missing projection",onClick:b,children:Object(I.jsx)(Xe.f,{})}),i===jo.DM_1D&&Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(dl,{popupTitle:"Reset Scale",onClick:f,children:Object(I.jsx)(ul.u,{})}),Object(I.jsx)(dl,{popupTitle:"Same Top",onClick:p,children:Object(I.jsx)(ul.v,{})})]})]})}var zp=Lp(Object(S.memo)(SpectraPanelHeader));function getNucleusSum(e){var t=e.split(",");return t.reduce((function(e,n){var a=2===t.length?100:0;return e+=Number(n.replace(/\D/g,""))+a}),0)}var Hp=function GroupByInfoKey(e){return function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=t.reduce((function(t,n){var a=n.info[e];return t[a]=(t[a]||[]).concat(n),t}),{});return n?Object.keys(a).sort((function(e,t){return getNucleusSum(e)-getNucleusSum(t)})).reduce((function(e,t){return e[t]=a[t],e}),{}):a}};function ColorIndicator1D(e){var t=e.color,n=e.activated;return Object(I.jsx)("div",{style:{backgroundColor:t,height:"12px",width:"12px",opacity:n?1:.1,display:"inline-block"}})}function ColorIndicator2D(e){var t=e.positiveColor,n=e.negativeColor,a=e.activated;return Object(I.jsx)("svg",{width:"12",height:"12",viewBox:"0 0 12 12",opacity:a?1:.1,children:Object(I.jsxs)("g",{children:[Object(I.jsx)("path",{d:"M0,0H12L0,12Z",fill:t,strokeWidth:"0"}),Object(I.jsx)("path",{d:"M12,12H0L12,0Z",fill:n,strokeWidth:"0"})]})})}function ColorIndicator(e){var t=e.dimension,n=e.color,a=e.activated,i=e.onClick,r=e.style;return Object(I.jsx)("button",{style:r,type:"button",onClick:i,children:2===t?Object(I.jsx)(ColorIndicator2D,Object(v.a)(Object(v.a)({},n),{},{activated:a})):Object(I.jsx)(ColorIndicator1D,Object(v.a)({activated:a},n))})}var Bp=Object(S.memo)(ColorIndicator);var Vp=function ShowHideMarkersButton(e){var t=e.data,n=e.onChangeMarkersVisibility,a=e.markersVisible,i=e.style;return Object(I.jsx)("button",{style:Object(v.a)(Object(v.a)({},i),{},{opacity:function isMarkerVisible(e){return-1!==a.findIndex((function(t){return t.id===e}))}(t.id)&&t.peaks&&t.peaks.values.length>0?1:.1}),type:"button",onClick:function onClick(){return n(t)},disabled:t.peaks&&0===t.peaks.values.length,children:Object(I.jsx)(ul.q,{})})};var Xp=function ShowHideSpectrumButton(e){var t=e.data,n=e.onChangeVisibility,a=e.style,i=function isVisible(e,n){return!t||t.display[n]};return Object(I.jsxs)(I.Fragment,{children:[1===t.info.dimension&&Object(I.jsx)("button",{style:a,type:"button",onClick:function onClick(){return n(t,"isVisible")},children:Object(I.jsx)(Xe.l,{style:Object(v.a)({fill:t.display.color},i(t.id,"isVisible")?{opacity:1,strokeWidth:"1px",fill:t.display.color}:{opacity:.1,fill:t.display.color})})}),2===t.info.dimension&&Object(I.jsxs)("div",{style:{minWidth:"40px"},children:[Object(I.jsx)("button",{style:Object(v.a)(Object(v.a)({},a),{},{width:"20px",minWidth:"20px"}),type:"button",onClick:function onClick(){return n(t,"isPositiveVisible")},children:Object(I.jsx)(Xe.l,{style:Object(v.a)({fill:t.display.positiveColor},i(t.id,"isPositiveVisible")?{opacity:1,strokeWidth:"1px",fill:t.display.positiveColor}:{opacity:.1,fill:t.display.positiveColor})})}),Object(I.jsx)("button",{style:Object(v.a)(Object(v.a)({},a),{},{width:"20px",minWidth:"20px"}),type:"button",onClick:function onClick(){return n(t,"isNegativeVisible")},children:Object(I.jsx)(Xe.l,{style:Object(v.a)({fill:t.display.negativeColor},i(t.id,"isNegativeVisible")?{opacity:1,strokeWidth:"1px",fill:t.display.negativeColor}:{opacity:.1,fill:t.display.negativeColor})})})]})]})},Yp={button:{backgroundColor:"transparent",border:"none",width:"26px",minWidth:"26px"},row:{display:"flex",alignContent:"center",height:"25px",borderBottom:"0.55px solid #f1f1f1"},name:{flex:1,height:"100%",display:"flex"},info:{flex:"1 1 1px",height:"100%",display:"block",alignItems:"center",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",lineHeight:"24px"},icon:{display:"flex",margin:"auto",justifyContent:"center"}};function SpectrumListItem(e){var t=e.activeSpectrum,n=e.markersVisible,a=e.data,i=e.onChangeVisibility,r=e.onChangeMarkersVisibility,o=e.onChangeActiveSpectrum,c=e.onOpenSettingModal,l=e.onContextMenu,s=t&&t.id===a.id,u=a.display,d=u.color,b=u.name,p=u.positiveColor,f=u.negativeColor;return Object(I.jsxs)("div",{style:Object(v.a)(Object(v.a)({},Yp.row),s?{backgroundColor:"#fafafa"}:{opacity:t?.2:1}),onContextMenu:l,children:[Object(I.jsx)(Xp,{data:a,onChangeVisibility:i,style:Yp.button}),Object(I.jsxs)("div",{style:Yp.name,onClick:function onClick(){return o(a)},children:[Object(I.jsx)("div",{style:Object(v.a)(Object(v.a)({},Yp.icon),{},{width:"16px"}),children:a.info.isFid?Object(I.jsx)(ul.h,{}):2===a.info.dimension?Object(I.jsx)(ul.b,{}):Object(I.jsx)(ul.j,{})}),Object(I.jsx)("span",{style:Yp.info,children:b}),Object(I.jsx)("div",{style:Yp.info,dangerouslySetInnerHTML:{__html:a.info&&function formatValueAsHTML(e){return e&&(e=e.replace(/([0-9]+)/g,"<sub>$1</sub>")),e}(a.info.solvent)}}),Object(I.jsxs)("span",{style:Yp.info,children:[Object(I.jsx)("span",{style:{borderLeft:"0.55px solid #e5e5e5",paddingRight:"5px"}}),a.info&&a.info.experiment]}),Object(I.jsx)("span",{style:Yp.info,children:a.info&&a.info.pulse})]}),Object(I.jsx)(Vp,{data:a,style:Object(v.a)(Object(v.a)({},Yp.icon),Yp.button),onChangeMarkersVisibility:r,markersVisible:n}),Object(I.jsx)(Bp,{style:Yp.button,dimension:a.info.dimension,color:{positiveColor:p,color:d,negativeColor:f},activated:s,onClick:function onClick(e){return c(a,e)}})]})}SpectrumListItem.defaultProps={onContextMenu:function onContextMenu(){return null}};var Zp=Object(S.memo)(SpectrumListItem);function FormikColorPicker(e){var t=e.onColorChange,n=e.name,a=Object(fe.a)(e,["onColorChange","name"]),i=Object(Rc.f)(),r=i.values,o=i.setFieldValue,c=Object(S.useCallback)((function(e){t(e),o(n,"".concat(e.hex).concat(Math.round(255*e.rgb.a).toString(16)))}),[n,t,o]);return Object(I.jsx)(id.SketchPicker,Object(v.a)({color:{hex:C()(r,n,"#000")},presetColors:ic,onChangeComplete:function onChangeComplete(e){return c(e)}},a))}FormikColorPicker.defaultProps={onColorChange:function onColorChange(){return null}};var Up=Object(S.memo)(FormikColorPicker),Kp=n(426),Wp=Object(S.memo)((function(e){var t=e.color,n=void 0===t?"red":t,a=e.data,i=Object(S.useMemo)((function(){var e=function prepareData(e){e=Object(He.g)(e);var t=Object(He.l)(e),n=t.min,a=t.max;n<1&&a>1e6&&(n=1);for(var i=0;i<e.length;i++)e[i]+=n;return e}(a.re),t=Object(He.k)(e,{logBaseX:10,logBaseY:2,nbSlots:100});return t.x.reduce((function(e,n,a){return e.push({x:n,y:t.y[a]}),e}),[])}),[a.re]);return Object(I.jsx)("div",{style:{borderTop:"1px solid #ededed",marginTop:"10px",paddingTop:"10px"},children:Object(I.jsxs)(Kp.e,{width:220,height:200,margin:{bottom:50,left:10,top:30,right:10},children:[Object(I.jsx)(Kp.d,{title:"Histogram"}),Object(I.jsx)(Kp.c,{data:i,xAxis:"x",yAxis:"y",lineStyle:{stroke:n},markerStyle:{fill:n,stroke:n}}),Object(I.jsx)(Kp.b,{id:"x",position:"bottom",displayGridLines:!0,tickStyle:{fontSize:"0.7rem"}}),Object(I.jsx)(Kp.b,{id:"y",position:"left",displayGridLines:!0,hidden:!0})]})})}));var Gp=function Spectrum1DSetting(e){var t=e.data,n=e.onSubmit,a=Object(S.useRef)(),i=Object(S.useCallback)((function(){a.current&&a.current.submitForm()}),[]);return Object(I.jsx)(Vc,{ref:a,initialValues:t.display,onSubmit:n,children:Object(I.jsxs)("div",{children:[Object(I.jsx)(Up,{name:"color",onColorChange:i}),Object(I.jsx)(Wp,{color:"red",data:t.data})]})})},qp=n(753);function FormikSlider(e){var t=e.onAfterChange,n=e.name,a=Object(fe.a)(e,["onAfterChange","name"]),i=Object(Rc.f)(),r=i.values,o=i.setFieldValue,c=Object(S.useCallback)((function(e){t(e),o(n,e)}),[n,t,o]);return Object(I.jsx)(qp.a,Object(v.a)({className:"horizontal-slider",thumbClassName:"thumb",trackClassName:"track",defaultValue:C()(r,n,[0,100]),onAfterChange:c,renderThumb:function renderThumb(e,t){return Object(I.jsx)("div",Object(v.a)(Object(v.a)({},e),{},{children:Object(I.jsx)("span",{children:t.valueNow})}))},pearling:!0,minDistance:10},a))}FormikSlider.defaultProps={onColorChange:function onColorChange(){return null}};var Jp,$p=Object(S.memo)(FormikSlider),Qp=Object(S.memo)((function(e){var t=e.color,n=void 0===t?"red":t,a=e.data,i=Object(S.useMemo)((function(){var e=function Spectrum2DHistogram_prepareData(e){var t,n=[],a=Object(ac.a)(e);try{for(a.s();!(t=a.n()).done;){var i=t.value;n.push(Object(He.g)(i))}}catch(b){a.e(b)}finally{a.f()}var r=Object(He.b)(n),o=r.min,c=r.max;o<1&&c>1e6&&(o=1);for(var l=0,s=n;l<s.length;l++)for(var u=s[l],d=0;d<u.length;d++)u[d]+=o;return n}(a.z),t=Object(He.a)(e,{logBaseX:10,logBaseY:2,nbSlots:256});return t.x.reduce((function(e,n,a){return e.push({x:n,y:t.y[a]}),e}),[])}),[a.z]);return Object(I.jsx)("div",{style:{borderTop:"1px solid #ededed",marginTop:"10px",paddingTop:"10px"},children:Object(I.jsxs)(Kp.e,{width:450,height:200,margin:{bottom:50,left:10,top:30,right:10},children:[Object(I.jsx)(Kp.d,{title:"Histogram"}),Object(I.jsx)(Kp.c,{data:i,xAxis:"x",yAxis:"y",lineStyle:{stroke:n},markerStyle:{fill:n,stroke:n}}),Object(I.jsx)(Kp.b,{id:"x",position:"bottom",displayGridLines:!0,tickStyle:{fontSize:"0.7rem"}}),Object(I.jsx)(Kp.b,{id:"y",position:"left",displayGridLines:!0,hidden:!0})]})})}));var ef,tf=function Spectrum2DSetting(e){var t=e.data,n=e.onSubmit,a=Object(S.useRef)(),i=Object(y.a)(Jp||(Jp=Object(x.a)(["\n    .positive {\n      display: inline-block;\n      .track-1 {\n        background-color: "," !important;\n      }\n    }\n    .negative {\n      display: inline-block;\n\n      .track-1 {\n        background-color: "," !important;\n      }\n    }\n  "])),t.display.positiveColor,t.display.negativeColor),r=Object(S.useCallback)((function(){a.current.submitForm()}),[]);return Object(ye.b)(Vc,{ref:a,initialValues:t.display,onSubmit:n,children:Object(ye.c)("div",{css:i,children:[Object(ye.c)("div",{className:"positive",children:[Object(ye.b)("span",{style:{padding:"0 10px"},children:"Positive"}),Object(ye.b)(Up,{name:"positiveColor",onColorChange:r}),Object(ye.c)("div",{style:{padding:"5px"},children:[Object(ye.b)("span",{className:"label",children:"contour Levels [ min - max ]"}),Object(ye.b)($p,{name:"contourOptions.positive.contourLevels",onAfterChange:r}),Object(ye.b)("span",{className:"label",children:"number of Layers "}),Object(ye.b)(Gc,{name:"contourOptions.positive.numberOfLayers",onChange:r,type:"number"})]})]}),Object(ye.c)("div",{className:"negative",children:[Object(ye.b)("span",{style:{padding:"0 10px"},children:"Negative"}),Object(ye.b)(Up,{name:"negativeColor",onColorChange:r}),Object(ye.c)("div",{style:{padding:"5px"},children:[Object(ye.b)("span",{className:"label",children:"contour Levels [ min - max ]"}),Object(ye.b)($p,{name:"contourOptions.negative.contourLevels",onAfterChange:r}),Object(ye.b)("span",{className:"label",children:"number of Layers "}),Object(ye.b)(Gc,{name:"contourOptions.negative.numberOfLayers",onChange:r,type:"number"})]})]}),Object(ye.b)(Qp,{data:t.data})]})})},nf=Object(y.a)(ef||(ef=Object(x.a)(["\n  position: fixed;\n  z-index: 999999999;\n  width:100%;\n  height:100%;\n  left:0;\n  top:0;\n  .ineer-conatiner{\n    position:absolute;\n    display: flex;\n    flex-direction: row-reverse;\n    border-radius: 4px;\n    background-color: white;\n    box-shadow: rgba(0, 0, 0, 0.15) 0px 0px 0px 1px,\n      rgba(0, 0, 0, 0.15) 0px 8px 16px;\n      overflow: auto;\n      height: 350px;\n  }\n\n\n  .sketch-picker {\n    border-radius: none !important;\n    box-shadow: none !important;\n  }\n\n\n  .horizontal-slider {\n    width: 80%;\n    height: 15px;\n  }\n\n  .thumb {\n    height: 15px;\n    line-height: 15px;\n    width: 20px;\n    text-align: center;\n    color: black;\n    border-radius: 5px;\n    cursor: grab;\n    font-size: 10px;\n    background-image: -webkit-linear-gradient(top, #f4f1ee, #fff);\n    background-image: linear-gradient(top, #f4f1ee, #fff);\n  }\n\n  .track {\n    top: 0;\n    bottom: 0;\n    background: #eaeaea;\n    border-radius: 999px;\n    border-radius: 5px;\n  }\n\n  .track-1 {\n    background: red;\n  }\n   \n  .label{\n    font-size: 12px;\n    margin: 8px 0;\n    display: block;\n  }\n \n  }\n"])));function SpectrumSetting(e){var t=e.position,n=e.data,a=e.onClose,i=useDispatch(),r=n.id,o=n.info,c=Object(S.useCallback)((function(e){i({type:Lt,id:r,display:e})}),[i,r]),l=Object(S.useCallback)((function(e){e.target===e.currentTarget&&a()}),[a]),s=t.x,u=t.y;return Object(ye.b)("div",{css:nf,onClick:l,children:Object(ye.b)("div",{className:"ineer-conatiner",style:{left:2===o.dimension?s-450:s-220,padding:2===o.dimension?"10px 0":"",top:u},children:2===o.dimension?Object(ye.b)(tf,{onSubmit:c,data:n}):Object(ye.b)(Gp,{onSubmit:c,data:n})})})}function arePropsEqual(){return!0}var af=Object(S.memo)(SpectrumSetting,arePropsEqual);var rf=Lp((function SpectrumsTabs(e){var t=e.data,n=e.activeSpectrum,a=e.activeTab,i=e.onTabChange,r=Object(S.useRef)(),o=Object(S.useState)([]),c=Object(O.a)(o,2),l=c[0],s=c[1],u=Object(S.useState)(null),d=Object(O.a)(u,2),b=d[0],p=d[1],f=Object(S.useState)(null),h=Object(O.a)(f,2),m=h[0],g=h[1],j=Object(S.useState)(!1),v=Object(O.a)(j,2),x=v[0],y=v[1],k=Mc(),C=useDispatch();Object(S.useEffect)((function(){if(t){var e=t?t.filter((function(e){return!0===e.display.isPeaksMarkersVisible})):[];s(e)}}),[t,C]);var D=Object(S.useMemo)((function(){return t?Hp("nucleus")(t,!0):[]}),[t]);Object(S.useEffect)((function(){i({tab:a,data:D[a]})}),[a,i,D]);var w=Object(S.useCallback)((function(e){var t=l.findIndex((function(t){return t.id===e.id})),n=Object(Li.a)(l);-1===t?n.push({id:e.id}):n.splice(t,1),C({type:Bt,data:n}),s(n)}),[C,l]),T=Object(S.useCallback)((function(e){i({tab:e.tabid,data:D[e.tabid]}),C({type:Tn,tab:e.tabid})}),[C,i,D]),M=Object(S.useMemo)((function(){return[{label:"Copy to Clipboard",onClick:function onClick(e){var t=e.x,n=e.y,a=e.info;Object(el.c)(JSON.stringify({x:t,y:n,info:a},void 0,2))?k.success("Data copied to clipboard"):k.error("Copy to clipboard failed")}},{label:"Delete",onClick:function onClick(e){setTimeout((function(){C({type:tn,id:e.id})}),0)}}]}),[k,C]),A=Object(S.useCallback)((function(e,t){checkModifierKeyActivated(e)||(e.preventDefault(),r.current.handleContextMenu(e,t))}),[r]),E=Object(S.useCallback)((function(e,t){g({x:t.nativeEvent.clientX,y:t.nativeEvent.clientY}),p(e),y(!0)}),[]),P=Object(S.useCallback)((function(e,t){C({type:Ht,id:e.id,key:t,value:!e.display[t]})}),[C]),F=Object(S.useCallback)((function(e){setTimeout((function(){n&&n.id===e.id?C({type:Vt,data:null}):C({type:Vt,data:{id:e.id}})}),0)}),[n,C]),_=Object(S.useCallback)((function(){y(!1)}),[]);return Object(I.jsxs)(S.Fragment,{children:[Object(I.jsx)(El,{defaultTabID:a,onClick:T,children:D&&Object.keys(D).map((function(e){return Object(I.jsx)("div",{tablabel:e,tabid:e,style:{overflow:"auto",height:"100%"},children:D[e]&&D[e].map((function(e){return Object(I.jsx)(Zp,{activeSpectrum:n,markersVisible:l,data:e,onChangeVisibility:P,onChangeMarkersVisibility:w,onChangeActiveSpectrum:F,onOpenSettingModal:E,onContextMenu:function onContextMenu(t){return A(t,e)}},e.id)}))},e)}))}),Object(I.jsx)(qu,{ref:r,context:M}),x?Object(I.jsx)(af,{onClose:_,data:b,position:m}):null]})})),of={overflow:"hidden",height:"100%",display:"flex",flexDirection:"column"};function SpectrumListPanel(e){var t=e.data,n=e.activeSpectrum,a=e.activeTab,i=Object(S.useState)([]),r=Object(O.a)(i,2),o=r[0],c=r[1],l=Object(S.useCallback)((function(e){c(e.data?e.data:[])}),[]);return Object(I.jsxs)("div",{style:of,children:[Object(I.jsx)(zp,{spectrums:o}),Object(I.jsx)(rf,{onTabChange:l,data:t,activeSpectrum:n,activeTab:a})]})}var cf=Object(S.memo)(SpectrumListPanel),lf=[{key:"outOfLimit",color:"red"},{key:"ambiguousAttachment",color:"orange"},{key:"notAttached",color:"blue"},{key:"incomplete",color:"red"}],sf=lf.map((function(e){return e.key})),uf=[{key:"-",label:"",value:""},{key:"sp",label:"sp",value:"SP"},{key:"sp2",label:"sp2",value:"SP2"},{key:"sp3",label:"sp3",value:"SP3"}],df={C:.25,H:.02,N:.25,F:.25,Si:.25,P:.25};function getLabelColor(e,t){var n=C()(e,"state.".concat(t.atomType,".error"),null);if(n)for(var a in sf)if("incomplete"!==lf[a].key&&("notAttached"===lf[a].key||"ambiguousAttachment"===lf[a].key)&&C()(n,"".concat(lf[a].key),[]).some((function(n){return e.values[n].id===t.id})))return lf[a].color;return null}function findSpectrum(e,t){return e.filter((function(e){return e.id===t.experimentID&&!0===e.display.isVisible}))[0]}function findSignal(e,t){for(var n=0;n<e.zones.values.length;n++){var a=e.zones.values[n].signal.findIndex((function(e){return e.id===t.signal.id}));if(a>=0)return e.zones.values[n].signal[a]}}var bf=function findRangeOrZoneID(e,t){var n=findSpectrum(e,t);if(n)if(1===n.info.dimension){var a=function findRange(e,t){for(var n=0;n<e.ranges.values.length;n++)if(e.ranges.values[n].signal.findIndex((function(e){return e.id===t.signal.id}))>=0)return e.ranges.values[n]}(n,t);if(a)return a.id}else if(2===n.info.dimension){var i=function findZone(e,t){for(var n=0;n<e.zones.values.length;n++)if(e.zones.values[n].signal.findIndex((function(e){return e.id===t.signal.id}))>=0)return e.zones.values[n]}(n,t);if(i)return i.id}};function findSignalMatch2D(e,t,n,a,i,r,o){if(e&&2===e.info.dimension){var c=findSignal(e,t);if(c)return c.x.delta*n>=a&&c.x.delta*n<=i&&c.y.delta*n>=r&&c.y.delta*n<=o}return!1}var pf=function AdditionalColumnHeader(e){var t=e.spectraData,n=e.correlationsData,a=e.correlation,i=Object(S.useMemo)((function(){if(!0===a.pseudo)return[];var e=[a.signal.id,Lo(a.signal.id,"Crosshair_X")],n=bf(t,a);return n&&e.push(n),a.link.forEach((function(n){if(!1===n.pseudo){e.push(n.signal.id),e.push(Lo(n.signal.id,"Crosshair_X"));var a=bf(t,n);a&&e.push(a)}})),e}),[a,t]),r=Object(gi.c)(i),o=Object(S.useCallback)((function(e){e.currentTarget.focus(),r.show()}),[r]),c=Object(S.useCallback)((function(e){e.currentTarget.blur(),r.hide()}),[r]),l=Object(S.useMemo)((function(){return{style:Object(v.a)(Object(v.a)({},{color:getLabelColor(n,a)}),{},{backgroundColor:r.isActive?"#ff6f0057":"inherit"}),title:!1===a.pseudo&&[a.experimentType.toUpperCase()].concat(a.link.reduce((function(e,t){return!1!==t.pseudo||t.experimentType===a.experimentType||e.includes(t.experimentType.toUpperCase())||e.push(t.experimentType.toUpperCase()),e}),[])).sort().join("/"),onMouseEnter:o,onMouseLeave:c}}),[a,n,r.isActive,o,c]),s=Object(S.useMemo)((function(){return a.edited.equivalence?{backgroundColor:"#F7F2E0"}:{color:Number.isInteger(a.equivalence)?1===a.equivalence?"#bebebe":"black":"red"}}),[a]);return Object(ye.b)("th",Object(v.a)(Object(v.a)({},l),{},{children:Object(ye.c)("div",{style:{display:"block"},children:[Object(ye.b)("p",{children:a.label.origin}),Object(ye.b)("p",{children:a&&a.signal&&a.signal.delta?a.signal.delta.toFixed(2):""}),Object(ye.b)("p",{style:s,children:Number.isInteger(a.equivalence)?a.equivalence:a.equivalence.toFixed(2)})]})}))},ff=n(222),hf=n(221),mf=n.n(hf);var gf=function AdditionalColumnField(e){var t=e.rowCorrelation,n=e.columnCorrelation,a=e.commonLinks,i=e.correlations,r=e.spectraData,o=e.onEdit,c=Object(S.useRef)(),l=Object(S.useState)(!1),s=Object(O.a)(l,2),u=s[0],d=s[1],b=Object(S.useMemo)((function(){var e=[];return a.forEach((function(t){if(!1===t.pseudo){e.push(t.signal.id),e.push(Lo(t.signal.id,"Crosshair"));var n=bf(r,t);n&&e.push(n)}})),e}),[a,r]),p=Object(gi.c)(b),f=Object(S.useCallback)((function(e){e.currentTarget.focus(),p.show()}),[p]),h=Object(S.useCallback)((function(e){e.currentTarget.blur(),p.hide()}),[p]);Object(S.useEffect)((function(){a.some((function(e){return!0===e.pseudo}))?d(!0):d(!1)}),[a]);var m=Object(S.useCallback)((function(e,t){e.preventDefault(),c.current.handleContextMenu(e,t)}),[c]),g=Object(S.useCallback)((function(e,a,r){var c=mf()(t),l=mf()(n),s=c.link.filter((function(e){return"hsqc"===e.experimentType||"hmqc"===e.experimentType})).length;if("add"===a){var u=generateID(),d=generateID(),b=ff.LinkUtilities.buildLink({experimentType:e,experimentID:d,atomType:[l.atomType,c.atomType],id:u,pseudo:!0,signal:{id:generateID(),sign:0}});ff.CorrelationUtilities.addLink(l,ff.LinkUtilities.buildLink(Object(v.a)(Object(v.a)({},b),{},{axis:"x",match:[ff.GeneralUtilities.getCorrelationIndex(i,c)]}))),ff.CorrelationUtilities.addLink(c,ff.LinkUtilities.buildLink(Object(v.a)(Object(v.a)({},b),{},{axis:"y",match:[ff.GeneralUtilities.getCorrelationIndex(i,l)]}))),c.edited.protonsCount||(c.protonsCount=[s+1])}else"remove"===a&&(ff.CorrelationUtilities.removeLink(c,r.id),ff.CorrelationUtilities.removeLink(l,r.id),c.edited.protonsCount||(c.protonsCount=s-1>0?[s-1]:[]));o(c,l)}),[t,o,n,i]),j=Object(S.useMemo)((function(){var e=a.find((function(e){return"hsqc"===e.experimentType&&!0===e.pseudo}));return!0===t.pseudo?e?[{label:"remove HSQC",onClick:function onClick(){g("hsqc","remove",e)}}]:[{label:"add HSQC",onClick:function onClick(){g("hsqc","add")}}]:[]}),[a,g,t]),x=Object(S.useMemo)((function(){var e=new Set;return a.forEach((function(t){"hsqc"===t.experimentType||"hmqc"===t.experimentType?e.add(t.signal&&0!==t.signal.sign?"S".concat(1===t.signal.sign?"+":"-"):"S"):"hmbc"===t.experimentType||"cosy"===t.experimentType||"tocsy"===t.experimentType?e.add("M"):"noesy"!==t.experimentType&&"roesy"!==t.experimentType||e.add("NOE")})),Object(Li.a)(e)}),[a]),y=Object(S.useMemo)((function(){return a.reduce((function(e,t){return e.includes(t.experimentType.toUpperCase())||e.push(t.experimentType.toUpperCase()),e}),[]).sort().join("/")}),[a]);return Object(I.jsxs)("td",{onContextMenu:function onContextMenu(e){j.length>0&&m(e,t)},style:{backgroundColor:p.isActive?"#ff6f0057":u?"#F7F2E0":"inherit"},title:y,onMouseEnter:f,onMouseLeave:h,children:[x.join("/"),Object(I.jsx)(qu,{ref:c,context:j})]})},jf={marginLeft:2,marginRight:2,border:"none",height:"20px"};var vf,Of=function CorrelationTableRow(e){var t=e.additionalColumnData,n=e.correlations,a=e.correlation,i=e.styleRow,r=e.styleLabel,o=e.onSaveEditEquivalences,c=e.onChangeHybridization,l=e.onSaveEditProtonsCount,s=e.onEditAdditionalColumnField,u=e.spectraData,d=Object(S.useMemo)((function(){if(!0===a.pseudo)return[];var e=[a.signal.id,Lo(a.signal.id,"Crosshair_Y")],t=bf(u,a);return t&&e.push(t),a.link.forEach((function(t){if(!1===t.pseudo){e.push(t.signal.id),e.push(Lo(t.signal.id,"Crosshair_Y"));var n=bf(u,t);n&&e.push(n)}})),e}),[a,u]),b=Object(gi.c)(d),p=Object(S.useCallback)((function(e){o(a,e.target.value)}),[a,o]),f=Object(S.useCallback)((function(e){l(a,e.target.value)}),[a,l]),h=Object(S.useMemo)((function(){return t.map((function(e){var t=[];return a.link.forEach((function(n){e.link.forEach((function(e){if(n.axis!==e.axis&&n.experimentID===e.experimentID&&n.signal.id===e.signal.id){var a=n.experimentType;n.signal&&0!==n.signal.sign&&(a+=" (edited)"),t.push(ff.LinkUtilities.buildLink(Object(v.a)(Object(v.a)({},n),{},{experimentLabel:a,axis:void 0})))}}))})),Object(I.jsx)(gf,{rowCorrelation:a,columnCorrelation:e,commonLinks:t,correlations:n,spectraData:u,onEdit:s},"addColData_".concat(a.id,"_").concat(e.id))}))}),[t,a,n,s,u]),m=Object(S.useCallback)((function(e){c(a,e)}),[a,c]),g=Object(S.useMemo)((function(){return a.edited.equivalence?{backgroundColor:"#F7F2E0"}:{color:1===a.equivalence?"#bebebe":"black"}}),[a]),j=Object(S.useCallback)((function(e){e.currentTarget.focus(),b.show()}),[b]),O=Object(S.useCallback)((function(e){e.currentTarget.blur(),b.hide()}),[b]),x=Object(S.useMemo)((function(){return{style:Object(v.a)(Object(v.a)({},i),{},{backgroundColor:b.isActive?"#ff6f0057":"inherit"}),title:!1===a.pseudo&&[a.experimentType.toUpperCase()].concat(a.link.reduce((function(e,t){return!1!==t.pseudo||t.experimentType===a.experimentType||e.includes(t.experimentType.toUpperCase())||e.push(t.experimentType.toUpperCase()),e}),[])).sort().join("/"),onMouseEnter:j,onMouseLeave:O}}),[a.experimentType,a.link,a.pseudo,b.isActive,j,O,i]);return Object(I.jsxs)("tr",{style:i,children:[Object(I.jsx)("td",Object(v.a)(Object(v.a)({},Object(v.a)(Object(v.a)({},x),{},{style:Object(v.a)(Object(v.a)({},x.style),{},{styleLabel:r})})),{},{children:ff.GeneralUtilities.getLabel(n,a)})),Object(I.jsx)("td",Object(v.a)(Object(v.a)({},x),{},{children:C()(a.signal,"delta",!1)?a.signal.delta.toFixed(2):""})),Object(I.jsx)("td",Object(v.a)(Object(v.a)({},x),{},{children:!1===a.pseudo?"H"!==a.atomType?Object(I.jsx)(Wu,{type:"number",value:a.equivalence,style:g,onSave:p}):Object(I.jsx)("text",{style:g,children:a.equivalence}):""})),Object(I.jsx)("td",Object(v.a)(Object(v.a)({},x),{},{children:"H"!==a.atomType?Object(I.jsx)(Wu,{type:"text",value:a.protonsCount.join(","),style:a.edited.protonsCount?{backgroundColor:"#F7F2E0"}:{},onSave:f}):""})),Object(I.jsx)("td",Object(v.a)(Object(v.a)({},Object(v.a)(Object(v.a)({},x),{},{style:Object(v.a)(Object(v.a)({},x.style),{},{borderRight:"1px solid"})})),{},{children:"H"!==a.atomType?Object(I.jsx)(is,{onChange:m,data:uf,defaultValue:a.hybridization,style:Object(v.a)(Object(v.a)({},jf),{},{backgroundColor:a.edited.hybridization?"#F7F2E0":i.backgroundColor,width:"50px"})}):""})),h]})},xf=Object(y.a)(vf||(vf=Object(x.a)(["\n  overflow: auto;\n  height: 100%;\n  display: block;\n  table {\n    border-spacing: 0;\n    border: 1px solid #dedede;\n    width: 100%;\n    font-size: 12px;\n    height: 100%;\n  }\n  // .react-contextmenu-wrapper {\n  //   display: contents;\n  // }\n  tr {\n    :last-child {\n      td {\n        border-bottom: 0;\n      }\n    }\n  }\n  thead tr {\n    background-color: white !important;\n  }\n  th {\n    position: sticky;\n    background-color: white;\n    top: 0;\n  }\n\n  th,\n  td {\n    white-space: nowrap;\n    text-align: center;\n    margin: 0;\n    padding: 0.4rem;\n    border-bottom: 1px solid #dedede;\n    border-right: 1px solid #dedede;\n\n    :last-child {\n      border-right: 0;\n    }\n    button {\n      background-color: transparent;\n      border: none;\n    }\n  }\n"])));var yf=function CorrelationTable(e){var t=e.correlationsData,n=e.filteredCorrelationsData,a=e.additionalColumnData,i=e.editEquivalencesSaveHandler,r=e.changeHybridizationSaveHandler,o=e.editProtonsCountSaveHandler,c=e.editAdditionalColumnFieldSaveHandler,l=e.showProtonsAsRows,s=e.spectraData,u=Object(S.useMemo)((function(){return n?n.values.filter((function(e){return l?"H"===e.atomType:"H"!==e.atomType})).map((function(e){return Object(ye.b)(Of,{additionalColumnData:a,correlations:t.values,correlation:e,styleRow:{backgroundColor:"mintcream"},styleLabel:"H"===e.atomType?{color:getLabelColor(t,e)}:{},onSaveEditEquivalences:i,onChangeHybridization:r,onSaveEditProtonsCount:o,onEditAdditionalColumnField:c,spectraData:s},"correlation".concat(e.atomType).concat(e.id))})):[]}),[n,l,a,t,i,r,o,c,s]),d=Object(S.useMemo)((function(){return a.map((function(e){return Object(ye.b)(pf,{spectraData:s,correlationsData:t,correlation:e},"additionalCorrelationHeader_".concat(e.id))}))}),[a,t,s]);return Object(ye.b)("div",{css:xf,children:Object(ye.c)("table",{children:[Object(ye.b)("thead",{children:Object(ye.c)("tr",{children:[Object(ye.b)("th",{children:"Atom"}),Object(ye.b)("th",{children:"\u03b4 (ppm)"}),Object(ye.b)("th",{children:"Equiv"}),Object(ye.b)("th",{children:"#H"}),Object(ye.b)("th",{style:{borderRight:"1px solid"},children:"Hybrid"}),d]})}),Object(ye.b)("tbody",{children:u})]})})};function Overview(e){var t=e.correlationsData;if(!t)return null;var n=ff.GeneralUtilities.getAtomCounts(t.options.mf);return Object.keys(n).length>0?Object.keys(n).map((function(e,a){var i=t.state[e],r=i?i.error:void 0,o=r?sf.findIndex((function(e){return void 0!==r[e]})):"black";return Object(I.jsx)("span",{style:{color:i?!0!==i.complete||r&&0!==Object.keys(r).length?o>=0?lf[o].color:"black":"green":"black"},children:"".concat(e,": ").concat(i?i.current:"-","/").concat(n[e],"   ")},"molFormulaView_".concat(a))})):Object(I.jsx)("p",{style:{fontStyle:"italic",color:"orange"},children:"Molecular formula is not set"})}var kf,Cf=Object(S.memo)(Overview),Sf=Object(y.a)(kf||(kf=Object(x.a)(["\n  text-align: center;\n\n  input {\n    height: 100%;\n    width: 200px;\n    border-radius: 5px;\n    border: 0.55px solid #c7c7c7;\n    margin: 0px 5px 0px 5px;\n    text-align: center;\n  }\n\n  button {\n    flex: 2;\n    padding: 5px;\n    border: 1px solid gray;\n    border-radius: 5px;\n    height: 36px;\n    margin: 0 auto;\n    margin-top: 15px;\n    display: block;\n    width: 20%;\n\n    color: white;\n    background-color: gray;\n  }\n"])));function MolecularFormulaInput(e){var t=e.onSave,n=e.previousMF,a=Object(S.useState)(""),i=Object(O.a)(a,2),r=i[0],o=i[1],c=Object(S.useState)(!0),l=Object(O.a)(c,2),s=l[0],u=l[1],d=Object(S.useState)(!1),b=Object(O.a)(d,2),p=b[0],f=b[1],h=Object(S.useCallback)((function(e){try{return new _c.MF(e),!0}catch(t){return!1}}),[]),m=Object(S.useCallback)((function(e){f(!0),h(e.target.value)?(u(!0),o(e.target.value)):(u(!1),o(""))}),[h]),g=Object(S.useCallback)((function(){t(p?r.trim():n)}),[p,r,t,n]);return Object(ye.c)("div",{css:Sf,children:[Object(ye.b)("input",{type:"text",onChange:m,defaultValue:n}),Object(ye.b)("button",{type:"button",onClick:g,disabled:!s,children:"Set"})]})}MolecularFormulaInput.defaultProps={onSave:function onSave(){return null}};var Df,wf=MolecularFormulaInput,Tf=Object(y.a)(Df||(Df=Object(x.a)(["\n  overflow: auto;\n  width: 400px;\n  height: 550px;\n  padding: 5px;\n  button:focus {\n    outline: none;\n  }\n  .header {\n    height: 24px;\n    border-bottom: 1px solid #f0f0f0;\n    display: flex;\n    align-items: center;\n\n    button {\n      height: 36px;\n      margin: 2px;\n      background-color: transparent;\n      border: none;\n      svg {\n        height: 16px;\n      }\n    }\n  }\n\n  button {\n    flex: 2;\n    padding: 5px;\n    border: 1px solid gray;\n    border-radius: 5px;\n    height: 30px;\n    margin: 0 auto;\n    margin-top: 15px;\n    display: block;\n    width: 20%;\n\n    color: white;\n    background-color: gray;\n  }\n\n  .info {\n    margin-top: 0;\n    margin-bottom: 10px;\n    padding: 0px 10px;\n    width: 100%;\n\n    text-align: center;\n  }\n\n  .optional {\n    margin-top: 20px;\n    margin-bottom: 5px;\n    padding: 0px 10px;\n\n    text-align: center;\n    font-size: 18px;\n    font-weight: bold;\n  }\n  .optional2 {\n    margin-top: 5px;\n    margin-bottom: 25px;\n    padding: 0px 10px;\n    width: 100%;\n\n    text-align: center;\n  }\n"])));function SetMolecularFormulaModal(e){var t=e.onClose,n=e.onSave,a=e.molecules,i=e.previousMF,r=Object(S.useState)(),o=Object(O.a)(r,2),c=o[0],l=o[1];Object(S.useEffect)((function(){a&&a.length>0&&l(0)}),[a]);var s=Object(S.useCallback)((function(e){n(e),t()}),[t,n]),u=Object(S.useCallback)((function(){n(a[c].mf),t()}),[c,a,t,n]),d=Object(S.useCallback)((function(e){l(e)}),[]);return Object(ye.c)("div",{css:Tf,children:[Object(ye.b)("div",{className:"header handle",children:Object(ye.b)($e,{onClick:t})}),Object(ye.b)("div",{children:Object(ye.b)("p",{className:"info",children:"Please type in a molecular formula!"})}),Object(ye.b)(wf,{onSave:s,previousMF:i}),Object(ye.c)("div",{children:[Object(ye.b)("p",{className:"optional",children:"OR"}),Object(ye.b)("p",{className:"optional2",children:"Select a molecule as reference!"})]}),Object(ye.b)(Du,{molecules:a,onChange:d}),Object(ye.b)("button",{type:"button",onClick:u,children:"Set"})]})}SetMolecularFormulaModal.defaultProps={onSave:function onSave(){return null},onClose:function onClose(){return null}};var Mf,Af=SetMolecularFormulaModal,Ef=Object(y.a)(Mf||(Mf=Object(x.a)(["\n  overflow: auto;\n  width: 300px;\n  height: 300px;\n  padding: 5px;\n  button:focus {\n    outline: none;\n  }\n  text-align: center;\n\n  .header {\n    height: 24px;\n    border-bottom: 1px solid #f0f0f0;\n    display: flex;\n    align-items: center;\n\n    button {\n      height: 36px;\n      margin: 2px;\n      background-color: transparent;\n      border: none;\n      svg {\n        height: 16px;\n      }\n    }\n  }\n\n  button {\n    flex: 2;\n    padding: 5px;\n    border: 1px solid gray;\n    border-radius: 5px;\n    height: 30px;\n    margin: 0 auto;\n    margin-top: 15px;\n    display: block;\n    width: 20%;\n\n    color: white;\n    background-color: gray;\n  }\n\n  .info {\n    margin-top: 0;\n    margin-bottom: 10px;\n    padding: 0px 10px;\n    width: 100%;\n\n    text-align: center;\n  }\n\n  input {\n    border-radius: 5px;\n    border: 0.55px solid #c7c7c7;\n    margin: 0px 5px 0px 5px;\n    text-align: center;\n  }\n"])));function SetShiftToleranceModal(e){var t=e.onClose,n=e.onSave,a=e.previousTolerance,i=Object(S.useState)(),r=Object(O.a)(i,2),o=r[0],c=r[1];Object(S.useEffect)((function(){c(a||void 0)}),[a]);var l=Object(S.useCallback)((function(){n(o),t()}),[t,n,o]),s=Object(S.useCallback)((function(e,t){return c(Object(v.a)(Object(v.a)({},o),{},Object(ue.a)({},t,Number(e.target.value))))}),[o]),u=Object(S.useMemo)((function(){return o?Object.keys(o).map((function(e){return Object(ye.c)("div",{className:"input-field",children:[Object(ye.c)("span",{children:[e,": "]}),Object(ye.b)("input",{type:"number",onChange:function onChange(t){return s(t,e)},defaultValue:o[e]})]},"toleranceInputField_".concat(e))})):void 0}),[s,o]);return Object(ye.c)("div",{css:Ef,children:[Object(ye.b)("div",{className:"header handle",children:Object(ye.b)($e,{onClick:t})}),Object(ye.b)("div",{children:Object(ye.b)("p",{className:"info",children:"Shift tolerances: "})}),u,Object(ye.b)("button",{type:"button",onClick:l,children:"Set"})]})}SetShiftToleranceModal.defaultProps={onSave:function onSave(){return null},onClose:function onClose(){return null}};var Pf,Ff=SetShiftToleranceModal,_f=Object(y.a)(Pf||(Pf=Object(x.a)(["\n  display: flex;\n  flex-direction: column;\n  text-align: center;\n  height: 100%;\n  width: 100%;\n  justify-content: center,\n  align-items: 'center',\n\n  button {\n    border-radius: 5px;\n    margin-top: 3px;\n    margin-left: 2px;\n    border: none;\n    height: 16px;\n    width: 18px;\n    font-size: 12px;\n    padding: 0;\n    background-color: transparent;\n  }\n\n  .overview-container {\n    width: 100%;\n    margin-left: 15px;\n    white-space: nowrap;\n    span {\n      margin-left: 8px;\n    }\n  }\n\n  .homoHeteroKinds-container {\n    width: 100%;\n    margin-left: 15px;\n    span {\n      margin-left: 7px;\n    }\n  }\n\n\n"])));function SummaryPanel(){var e=useChartData(),t=e.molecules,n=e.correlations,a=e.data,i=e.xDomain,r=e.yDomain,o=e.displayerMode,c=e.activeTab,l=useDispatch(),s=ie(),u=Object(S.useState)([]),d=Object(O.a)(u,2),b=d[0],p=d[1],f=Object(S.useState)("-"),h=Object(O.a)(f,2),m=h[0],g=h[1],j=Object(S.useState)(!1),x=Object(O.a)(j,2),y=x[0],k=x[1],C=Object(S.useState)(!1),D=Object(O.a)(C,2),w=D[0],T=D[1],M=Object(S.useMemo)((function(){var e=function isInView(e){if(!0===e.pseudo)return!1;var t=c.split(",").map((function(e){return function getAtomType(e){return e.split(/\d+/)[1]}(e)})),n=1e4,l=i[0]*n,s=i[1]*n,u=r[0]*n,d=r[1]*n;if(o===jo.DM_1D){var b=e.signal.delta*n;if(findSpectrum(a,e)&&t[0]===e.atomType&&b>=l&&b<=s)return!0;if(e.link.some((function(e){return function findSignalMatch1D(e,t,n,a,i){if(e&&2===e.info.dimension){var r=findSignal(e,t);if(r){var o="x"===t.axis?"y":"x";return r[o].delta*n>=a&&r[o].delta*n<=i}}return!1}(findSpectrum(a,e),e,n,l,s)})))return!0}else if(o===jo.DM_2D){if(!t.includes(e.atomType))return!1;if(findSignalMatch2D(findSpectrum(a,e),e,n,l,s,u,d))return!0;if(e.link.some((function(e){return findSignalMatch2D(findSpectrum(a,e),e,n,l,s,u,d)})))return!0}return!1};if(n){var t=w?n.values.filter((function(t){return e(t)})):n.values;return Object(v.a)(Object(v.a)({},n),{},{values:t})}}),[c,n,o,w,a,i,r]),A=Object(S.useCallback)((function(e){l({type:Qt,payload:{mf:e}})}),[l]),E=Object(S.useCallback)((function(e){l({type:en,payload:{tolerance:e}})}),[l]),P=Object(S.useCallback)((function(){s.show(Object(ye.b)(Af,{onClose:function onClose(){return s.close()},onSave:A,molecules:t,previousMF:n.options.mf}))}),[n,A,s,t]),F=Object(S.useCallback)((function(){s.show(Object(ye.b)(Ff,{onClose:function onClose(){return s.close()},onSave:E,previousTolerance:n.options.tolerance}))}),[n,E,s]),_=Object(S.useMemo)((function(){var e=["-"].concat(n?n.values.map((function(e){return e.atomType})).filter((function(e,t,n){return n.indexOf(e)===t})):[]);return e.includes("H")&&e.push("H-H"),e.includes("H")?g("H"):g("-"),e.map((function(e){return{key:e,label:e,value:e}}))}),[n]);Object(S.useEffect)((function(){var e=m.split("-")[0];p(M?M.values.filter((function(t){return t.atomType===e})).reverse():[])}),[M,m]);var I=Object(S.useCallback)((function(e,t){l({type:Jt,payload:{id:e.id,correlation:Object(v.a)(Object(v.a)({},e),{},{equivalence:t,edited:Object(v.a)(Object(v.a)({},e.edited),{},{equivalence:!0})})}})}),[l]),N=Object(S.useCallback)((function(e,t){var n;t.match(/^([0-9],{0,1})+$/g)?n=t.split(",").filter((function(e){return e.length>0})).map((function(e){return Number(e)})):0===t.trim().length&&(n=[]),n&&l({type:Jt,payload:{id:e.id,correlation:Object(v.a)(Object(v.a)({},e),{},{protonsCount:n,edited:Object(v.a)(Object(v.a)({},e.edited),{},{protonsCount:!0})})}})}),[l]),R=Object(S.useCallback)((function(e,t){l({type:Jt,payload:{id:e.id,correlation:Object(v.a)(Object(v.a)({},e),{},{hybridization:t,edited:Object(v.a)(Object(v.a)({},e.edited),{},{hybridization:!0})})}})}),[l]),L=Object(S.useCallback)((function(e,t){l({type:$t,payload:{ids:[e.id,t.id],correlations:[Object(v.a)(Object(v.a)({},e),{},{edited:Object(v.a)(Object(v.a)({},e.edited),{},{additionalColumnField:!0})}),Object(v.a)(Object(v.a)({},t),{},{edited:Object(v.a)(Object(v.a)({},t.edited),{},{additionalColumnField:!0})})]}})}),[l]),z=Object(S.useCallback)((function(){T(!w)}),[w]);return Object(ye.c)("div",{css:_f,children:[Object(ye.c)(Hu,{canDelete:!1,counter:n?n.values.length:0,onFilter:z,filterToolTip:w?"Show all correlations":"Hide correlations out of view",filterIsActive:w,counterFiltered:M&&M.values.length,children:[Object(ye.b)(We,{title:"Set molecular formula (".concat(n.options.mf,")"),popupPlacement:"right",children:Object(ye.b)("button",{type:"button",onClick:P,children:Object(ye.b)(Xe.t,{})})}),Object(ye.b)(We,{title:"Set shift tolerance",popupPlacement:"right",children:Object(ye.b)("button",{type:"button",onClick:F,children:Object(ye.b)(Xe.F,{})})}),Object(ye.b)("div",{className:"overview-container",children:Object(ye.b)(Cf,{correlationsData:n})}),Object(ye.b)("div",{className:"homoHeteroKinds-container",children:Object(ye.b)(is,{onChange:function onChange(e){g(e),k("H-H"===e)},data:_,defaultValue:m,style:{width:"65px",height:"20px",border:"1px solid grey"}})})]}),Object(ye.b)(yf,{correlationsData:n,filteredCorrelationsData:M,additionalColumnData:b,editEquivalencesSaveHandler:I,changeHybridizationSaveHandler:R,editProtonsCountSaveHandler:N,editAdditionalColumnFieldSaveHandler:L,showProtonsAsRows:y,spectraData:a})]})}var If=Object(S.memo)(SummaryPanel),Nf={container:{padding:10,backgroundColor:"#f1f1f1",height:"100%",flex:1},groupContainer:{padding:"5px",borderRadius:"5px",margin:"10px 0px",backgroundColor:"white"},row:{display:"flex",margin:"5px 0px"},header:{borderBottom:"1px solid #e8e8e8",paddingBottom:"5px",fontWeight:"bold",color:"#4a4a4a"},inputLabel:{flex:2,fontSize:"11px",fontWeight:"bold",color:"#232323"},input:{width:"30%",textAlign:"center"}},Rf=[{id:1,label:"From :",checkController:"showFrom",formatController:"fromFormat",defaultFormat:"0.00"},{id:2,label:"To :",checkController:"showTo",formatController:"toFormat",defaultFormat:"0.00"},{id:3,label:"Absolute :",checkController:"showAbsolute",formatController:"absoluteFormat",defaultFormat:"0.00"},{id:4,label:"Relative :",checkController:"showRelative",formatController:"relativeFormat",defaultFormat:"00.00"}];function ZonesPreferences(e,t){var n=e.nucleus,a=Mc(),i=useStateWithLocalStorage("nmr-general-settings"),r=Object(O.a)(i,2)[1],o=usePreferences(),c=Object(S.useState)(null),l=Object(O.a)(c,2),s=l[0],u=l[1],d=Object(S.useRef)();Object(S.useEffect)((function(){var e=st(o,"formatting.panels.zones");e&&u(e)}),[o]);var b=function saveToLocalStorgate(e){r(e,"formatting.panels.ranges")},p=Object(S.useCallback)((function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];o.dispatch({type:Nl,payload:{key:"zones",value:e}}),t&&a.success("zones preferences saved successfully")}),[a,o]);Object(S.useImperativeHandle)(t,(function(){return{saveSetting:function saveSetting(){"function"===typeof d.current.requestSubmit?d.current.requestSubmit():d.current.dispatchEvent(new Event("submit",{cancelable:!0}))}}}));var f=function(){var e=Object(Br.a)(Hr.a.mark((function _callee(e){var t,n,a,i,r,o,c,l;return Hr.a.wrap((function _callee$(s){for(;;)switch(s.prev=s.next){case 0:e.preventDefault(),t=e.target,n=new FormData(t),a={},i=Object(ac.a)(n.entries());try{for(i.s();!(r=i.n()).done;)o=r.value,c=o[0].split("-").join("."),l=["true","false"].includes(o[1])?"true"===o[1]:o[1],a=ct()(a,c,l)}catch(u){i.e(u)}finally{i.f()}p(a,!0),b(a);case 8:case"end":return s.stop()}}),_callee)})));return function handleSubmit(t){return e.apply(this,arguments)}}(),h=Object(S.useCallback)((function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var a=t.join(".");if(s){var i=C()(s,a);return i||null}var r=t.length-1;return Ci[t[r]]}),[s]);return Object(I.jsx)("div",{style:Nf.container,children:Object(I.jsx)("form",{onSubmit:f,ref:d,children:n&&n.map((function(e){return Object(I.jsxs)("div",{style:Nf.groupContainer,children:[Object(I.jsx)(kd,{style:Nf.header,value:e}),Rf.map((function(t){return Object(I.jsx)(ld,{label:t.label,checked:h(e,t.checkController),format:h(e,t.formatController),checkControllerName:t.checkController,formatControllerName:t.formatController,groupID:e},t.id)}))]},e)}))})})}var Lf=Po(Object(S.memo)(Object(S.forwardRef)(ZonesPreferences))),zf={marginLeft:2,marginRight:2,border:"none",height:"20px"};var Hf=function ActionsColumn_ActionsColumn(e){var t=e.rowData,n=e.rowSpanTags,a=useDispatch(),i=useAssignmentData(),r=Object(S.useCallback)((function(e){a({type:aa,payload:{rowData:t,value:e}})}),[a,t]),o=Object(S.useCallback)((function(){a({type:Hn,payload:{id:t.id,assignmentData:i}})}),[i,a,t]),c=Object(S.useCallback)((function(){var e=10*Math.abs(t.x.from-t.x.to);a({type:Et,xDomain:t.x.from<=t.x.to?[t.x.from-e,t.x.to+e]:[t.x.to-e,t.x.from+e]});var n=10*Math.abs(t.y.from-t.y.to);a({type:Pt,yDomain:t.y.from<=t.y.to?[t.y.from-n,t.y.to+n]:[t.y.to-n,t.y.from+n]})}),[a,t.x.from,t.x.to,t.y.from,t.y.to]);return Object(I.jsxs)(S.Fragment,{children:[Object(I.jsx)("td",{children:Object(I.jsx)(is,{onChange:function onChange(e){r(e)},data:cr,defaultValue:t.tableMetaInfo.signal.kind,style:zf})}),Object(I.jsxs)("td",Object(v.a)(Object(v.a)({},n),{},{children:[Object(I.jsx)("button",{type:"button",className:"delete-button",onClick:o,children:Object(I.jsx)(Xe.B,{})}),Object(I.jsx)("button",{type:"button",className:"zoom-button",onClick:c,children:Object(I.jsx)(Xe.D,{title:"Zoom to zone in spectrum"})})]}))]})};var Bf=function SignalAssignmentsColumn_SignalAssignmentsColumn(e){var t=e.rowData,n=e.assignment,a=e.highlight,i=e.onHover,r=e.onClick,o=e.onUnlink,c=e.axis,l=e.showUnlinkButton,s=e.setShowUnlinkButton;return Object(I.jsx)("td",Object(v.a)(Object(v.a)({},i),{},{onClick:function onClick(e){return r(e,n,c)},style:a.isActive||n.isActive&&n.activeAxis===c?{color:"red",fontWeight:"bold"}:null,children:C()(t,"tableMetaInfo.signal.".concat(c,".diaID"),[]).length>0?Object(I.jsxs)("div",{onMouseEnter:function onMouseEnter(){return s(!0)},onMouseLeave:function onMouseLeave(){return s(!1)},children:[t.tableMetaInfo.signal[c].diaID.length," ",Object(I.jsx)("sup",{children:Object(I.jsx)("button",{type:"button",style:{visibility:l?"visible":"hidden",padding:0,margin:0},onClick:function onClick(e){return o(e,!1,c)},children:Object(I.jsx)(Xe.w,{color:"red"})})})]}):n.isActive&&n.activeAxis===c?"0":""}))};var Vf=function SignalAssignmentsColumns(e){var t=e.rowData,n=e.assignmentSignal,a=e.onHoverSignalX,i=e.onHoverSignalY,r=e.showUnlinkButtonSignalX,o=e.showUnlinkButtonSignalY,c=e.setShowUnlinkButtonSignalX,l=e.setShowUnlinkButtonSignalY,s=e.onClick,u=e.onUnlink,d=e.highlightSignalX,b=e.highlightSignalY;return Object(I.jsxs)(S.Fragment,{children:[Object(I.jsx)(Bf,{rowData:t,assignment:n,highlight:d,onHover:a,onClick:s,onUnlink:u,axis:"x",showUnlinkButton:r,setShowUnlinkButton:c}),Object(I.jsx)(Bf,{rowData:t,assignment:n,highlight:b,onHover:i,onClick:s,onUnlink:u,axis:"y",showUnlinkButton:o,setShowUnlinkButton:l})]})};var Xf=function SignalDeltaColumn_SignalDeltaColumn(e){var t=e.rowData,n=e.onHoverSignalX,a=e.onHoverSignalY,i=useDispatch(),r=C()(t,"tableMetaInfo.signal.x.delta",null),o=C()(t,"tableMetaInfo.signal.y.delta",null),c=C()(t,"tableMetaInfo.signal.id",void 0),l=Object(S.useCallback)((function(e){var n=e.target.value;i({type:na,payload:{zoneID:t.id,signal:{id:c,x:n}}})}),[i,c,t.id]),s=Object(S.useCallback)((function(e){var n=e.target.value;i({type:na,payload:{zoneID:t.id,signal:{id:c,y:n}}})}),[i,c,t.id]);return Object(I.jsxs)(S.Fragment,{children:[Object(I.jsx)("td",Object(v.a)(Object(v.a)({},n),{},{children:null!==r?Object(I.jsx)(Wu,{value:r.toFixed(2),onSave:l,type:"number",style:{padding:"0.1rem 0.4rem"}}):""})),Object(I.jsx)("td",Object(v.a)(Object(v.a)({},a),{},{children:null!==o?Object(I.jsx)(Wu,{value:o.toFixed(2),onSave:s,type:"number",style:{padding:"0.1rem 0.4rem"}}):""}))]})};var Yf=function ZoneAssignmentColumn(e){var t=e.rowData,n=e.assignment,a=e.highlight,i=e.onHover,r=e.onClick,o=e.onUnlink,c=e.axis,l=e.showUnlinkButton,s=e.setShowUnlinkButton,u=e.rowSpanTags;return Object(I.jsx)("td",Object(v.a)(Object(v.a)(Object(v.a)({},u),i),{},{onClick:function onClick(e){return r(e,n,c)},children:C()(t,"".concat(c,".pubIntegral"),0)>0?C()(t,"".concat(c,".diaID"),[]).length>0?Object(I.jsxs)("div",{onMouseEnter:function onMouseEnter(){return s(!0)},onMouseLeave:function onMouseLeave(){return s(!1)},children:[t[c].pubIntegral," ","(",Object(I.jsx)("span",{style:n.isActive&n.activeAxis===c||n.isOnHover&n.onHoverAxis===c||a.isActive?{color:"red",fontWeight:"bold"}:{color:"black",fontWeight:"normal"},children:C()(t,"".concat(c,".diaID"),[]).length}),")"," ",Object(I.jsx)("sup",{children:Object(I.jsx)("button",{type:"button",style:{visibility:l?"visible":"hidden",padding:0,margin:0},onClick:function onClick(e){return o(e,!0,c)},children:Object(I.jsx)(Xe.w,{color:"red"})})})]}):n.isActive&&n.activeAxis===c?Object(I.jsxs)("div",{children:["".concat(C()(t,"".concat(c,".pubIntegral"),"")," ("),Object(I.jsx)("span",{style:{color:"red",fontWeight:"bold"},children:"0"}),")"]}):t[c].pubIntegral:n.isActive&&n.activeAxis===c?Object(I.jsxs)("div",{children:["0 (",Object(I.jsx)("span",{style:{color:"red",fontWeight:"bold"},children:"0"}),")"]}):""}))};var Zf=function ZoneAssignmentsColumns(e){var t=e.rowData,n=e.assignmentZone,a=e.onHoverZoneX,i=e.onHoverZoneY,r=e.showUnlinkButtonZoneX,o=e.showUnlinkButtonZoneY,c=e.setShowUnlinkButtonZoneX,l=e.setShowUnlinkButtonZoneY,s=e.rowSpanTags,u=e.onClick,d=e.onUnlink,b=e.highlightZoneX,p=e.highlightZoneY;return Object(I.jsxs)(S.Fragment,{children:[Object(I.jsx)(Yf,{rowData:t,assignment:n,highlight:b,onHover:a,onClick:u,onUnlink:d,axis:"x",showUnlinkButton:r,setShowUnlinkButton:c,rowSpanTags:s}),Object(I.jsx)(Yf,{rowData:t,assignment:n,highlight:p,onHover:i,onClick:u,onUnlink:d,axis:"y",showUnlinkButton:o,setShowUnlinkButton:l,rowSpanTags:s})]})},Uf={backgroundColor:"#ff6f0057"},Kf={backgroundColor:"#f5f5dc"};var Wf,Gf=function ZonesTableRow(e){var t=e.rowData,n=e.onUnlink,a=e.onContextMenu,i=useAssignment(t.id),r=Object(gi.c)([i.id]),o=Object(gi.c)([Lo(i.id,"X")].concat(i.assigned.x||[])),c=Object(gi.c)([Lo(i.id,"Y")].concat(i.assigned.y||[])),l=useAssignment(t.tableMetaInfo.id),s=Object(gi.c)([Lo(l.id,"X")].concat(l.assigned.x||[],Lo(l.id,"Crosshair"))),u=Object(gi.c)([Lo(l.id,"Y")].concat(l.assigned.y||[],Lo(l.id,"Crosshair"))),d=Object(S.useState)(!1),b=Object(O.a)(d,2),p=b[0],f=b[1],h=Object(S.useState)(!1),m=Object(O.a)(h,2),g=m[0],j=m[1],x=Object(S.useState)(!1),y=Object(O.a)(x,2),k=y[0],D=y[1],w=Object(S.useState)(!1),T=Object(O.a)(w,2),M=T[0],A=T[1],E=Object(S.useMemo)((function(){return{rowSpan:t.tableMetaInfo.rowSpan,style:!0===C()(t,"tableMetaInfo.hide",!1)?{display:"none"}:null}}),[t]),P=Object(S.useCallback)((function(e,a,r){e&&e.stopPropagation(),n(t,a,t.tableMetaInfo.signalIndex,r),"x"===r?void 0!==a?a?(f(!1),i.removeAll("x")):(D(!1),l.removeAll("x")):(f(!1),D(!1)):"y"===r?void 0!==a?a?(j(!1),i.removeAll("y")):(A(!1),l.removeAll("y")):(j(!1),A(!1)):(f(!1),i.removeAll("x"),D(!1),l.removeAll("x"),j(!1),i.removeAll("y"),A(!1),l.removeAll("y"))}),[l,i,n,t]),F=Object(S.useCallback)((function(e,t,n){e.stopPropagation(),t.onClick(n)}),[]),_=Object(S.useMemo)((function(){return{onMouseEnter:function onMouseEnter(){i.onMouseEnter("x"),o.show()},onMouseLeave:function onMouseLeave(){i.onMouseLeave("x"),o.hide()}}}),[i,o]),I=Object(S.useMemo)((function(){return{onMouseEnter:function onMouseEnter(){i.onMouseEnter("y"),c.show()},onMouseLeave:function onMouseLeave(){i.onMouseLeave("y"),c.hide()}}}),[i,c]),N=Object(S.useMemo)((function(){return{onMouseEnter:function onMouseEnter(){l.onMouseEnter("x"),s.show()},onMouseLeave:function onMouseLeave(){l.onMouseLeave("x"),s.hide()}}}),[l,s]),R=Object(S.useMemo)((function(){return{onMouseEnter:function onMouseEnter(){l.onMouseEnter("y"),u.show()},onMouseLeave:function onMouseLeave(){l.onMouseLeave("y"),u.hide()}}}),[l,u]);return Object(ye.c)("tr",Object(v.a)(Object(v.a)({onContextMenu:function onContextMenu(e){return a(e,t)},style:r.isActive||i.isActive?Uf:!0===C()(t,"tableMetaInfo.isConstantlyHighlighted",!1)?Kf:null},r.onHover),{},{children:[Object(ye.b)("td",Object(v.a)(Object(v.a)({},E),{},{children:t.tableMetaInfo.rowIndex+1})),Object(ye.b)(Xf,{rowData:t,onHoverSignalX:N,onHoverSignalY:R}),Object(ye.b)(Vf,{rowData:t,assignmentSignal:l,onHoverSignalX:N,onHoverSignalY:R,showUnlinkButtonSignalX:k,showUnlinkButtonSignalY:M,setShowUnlinkButtonSignalX:function setShowUnlinkButtonSignalX(e){return D(e)},setShowUnlinkButtonSignalY:function setShowUnlinkButtonSignalY(e){return A(e)},onClick:F,onUnlink:P,highlightSignalX:s,highlightSignalY:u}),Object(ye.b)(Zf,{rowData:t,assignmentZone:i,onHoverZoneX:_,onHoverZoneY:I,showUnlinkButtonZoneX:p,showUnlinkButtonZoneY:g,setShowUnlinkButtonZoneX:function setShowUnlinkButtonZoneX(e){return f(e)},setShowUnlinkButtonZoneY:function setShowUnlinkButtonZoneY(e){return j(e)},rowSpanTags:E,onClick:F,onUnlink:P,highlightZoneX:o,highlightZoneY:c}),Object(ye.b)(Hf,{rowData:t,rowSpanTags:E})]}))},qf=Object(y.a)(Wf||(Wf=Object(x.a)(["\n  border-spacing: 0;\n  border: 1px solid #dedede;\n  width: 100%;\n  font-size: 12px;\n  // height: 100%;\n  .react-contextmenu-wrapper {\n    display: contents;\n  }\n  tr {\n    :last-child {\n      td {\n        border-bottom: 0;\n      }\n    }\n  }\n  thead tr:nth-of-type(1) th {\n    top: 0;\n  }\n  thead tr:nth-of-type(2) th {\n    top: 21px;\n  }\n  th {\n    position: sticky;\n    background-color: white;\n    z-index: 2;\n  }\n  th,\n  td {\n    white-space: nowrap;\n    text-align: center;\n    margin: 0;\n    padding: 0.1rem 0.4rem;\n    border-bottom: 1px solid #dedede;\n    border-right: 1px solid #dedede;\n\n    :last-child {\n      border-right: 0;\n    }\n    button {\n      background-color: transparent;\n      border: none;\n      padding: 0 5px;\n    }\n  }\n"])));var Jf=function ZonesTable(e){var t=e.tableData,n=e.onUnlink,a=e.context,i=e.nuclei,r=e.preferences,o=Object(S.useRef)(),c=Object(S.useCallback)((function(e,t){checkModifierKeyActivated(e)||(e.preventDefault(),o.current.handleContextMenu(e,t))}),[o]),l=Object(S.useMemo)((function(){var e=[];return t.forEach((function(t,n){1===t.signal.length?e.push(Object(v.a)(Object(v.a)({},t),{},{tableMetaInfo:Object(v.a)(Object(v.a)({},t.tableMetaInfo),{},{signal:t.signal[0],rowIndex:n,signalIndex:0,id:t.signal[0].id})})):t.signal.length>1&&t.signal.forEach((function(a,i){var r=!1,o=null;i<t.signal.length-1&&0===i?o=t.signal.length:r=!0,e.push(Object(v.a)(Object(v.a)({},t),{},{tableMetaInfo:Object(v.a)(Object(v.a)({},t.tableMetaInfo),{},{signal:a,rowSpan:o,hide:r,rowIndex:n,signalIndex:i,id:a.id})}))}))})),e}),[t]),s=Object(S.useMemo)((function(){return l.map((function(e){return Object(ye.b)(Gf,{rowData:e,onUnlink:n,onContextMenu:function onContextMenu(e,t){return c(e,t)},preferences:r},"zonesTableRow_".concat(e.tableMetaInfo.id))}))}),[c,l,n,r]);return Object(ye.c)("div",{children:[Object(ye.c)("table",{css:qf,children:[Object(ye.c)("thead",{children:[Object(ye.c)("tr",{children:[Object(ye.b)("th",{rowSpan:2,children:"#"}),Object(ye.b)("th",{colSpan:2,children:"\u03b4 (ppm)"}),Object(ye.b)("th",{colSpan:2,children:Object(ye.b)(Xe.u,{})}),Object(ye.b)("th",{colSpan:2,children:"\u03a3"}),Object(ye.b)("th",{rowSpan:2,children:"Kind"}),Object(ye.b)("th",{rowSpan:2,children:""})]}),Object(ye.c)("tr",{children:[Object(ye.b)("th",{children:i[0]}),Object(ye.b)("th",{children:i[1]}),Object(ye.b)("th",{children:i[0]}),Object(ye.b)("th",{children:i[1]}),Object(ye.b)("th",{children:i[0]}),Object(ye.b)("th",{children:i[1]})]})]}),Object(ye.b)("tbody",{children:s})]}),Object(ye.b)(qu,{ref:o,context:a})]})},$f={container:{flexDirection:"column",height:"100%",display:"flex"},removeAssignmentsButton:{borderRadius:"5px",marginTop:"3px",marginLeft:"2px",border:"none",height:"16px",width:"18px",fontSize:"12px",padding:0,backgroundColor:"transparent"},button:{backgroundColor:"transparent",border:"none"},toggle:{width:"22px",height:"22px",marginLeft:"2px",display:"flex",justifyContent:"center",alignItems:"center"}};function ZonesPanel(e){var t=e.zones,n=e.activeTab,a=e.preferences,i=e.xDomain,r=e.yDomain,o=Object(S.useState)(!1),c=Object(O.a)(o,2),l=c[0],s=c[1],u=useAssignmentData(),d=useDispatch(),b=ie(),p=Object(S.useState)(!1),f=Object(O.a)(p,2),h=f[0],m=f[1],g=Object(S.useRef)(),j=Object(S.useMemo)((function(){var e=function isInView(e,t,n,a){var o=1e4;return e*=o,n*=o,a*=o,((t*=o)>=i[0]*o&&e<=i[1]*o||e<=i[0]*o&&t>=i[1]*o)&&(a>=r[0]*o&&n<=r[1]*o||n<=r[0]*o&&a>=r[1]*o)};if(t.values)return(l?function getFilteredZones(t){return t.filter((function(t){return e(t.x.from,t.x.to,t.y.from,t.y.to)}))}(t.values):t.values).map((function(t){return Object(v.a)(Object(v.a)({},t),{},{tableMetaInfo:{isConstantlyHighlighted:e(t.x.from,t.x.to,t.y.from,t.y.to)}})}))}),[t,l,i,r]),x=Object(S.useCallback)((function(){s(!l)}),[l]),y=Object(S.useCallback)((function(e,t,n,a){d({type:ia,payload:{zoneData:e,assignmentData:u,isOnZoneLevel:t,signalIndex:n,axis:a}})}),[u,d]),k=Object(S.useCallback)((function(){t.values.forEach((function(e){return y(e)}))}),[t.values,y]),D=Object(S.useCallback)((function(){b.showConfirmDialog({message:"All assignments will be removed. Are you sure?",buttons:[{text:"Yes",handler:k},{text:"No"}]})}),[k,b]),w=Object(S.useCallback)((function(){b.showConfirmDialog({message:"All zones will be deleted. Are You sure?",buttons:[{text:"Yes",handler:function handler(){d({type:Hn,payload:{assignmentData:u}})}},{text:"No"}]})}),[u,d,b]),T=Object(S.useMemo)((function(){return C()(a,"panels.zones.[".concat(n,"]"))}),[n,a]),M=Object(S.useCallback)((function(){m(!h)}),[h]),A=Object(S.useCallback)((function(){g.current.saveSetting(),m(!1)}),[]),E=Object(S.useCallback)((function(e){bi.emit("onZonesVisibilityChange",{key:e})}),[]);return Object(I.jsx)(I.Fragment,{children:Object(I.jsxs)("div",{style:$f.container,children:[!h&&Object(I.jsxs)(Hu,{counter:t.values?t.values.length:0,onDelete:w,deleteToolTip:"Delete All Zones",onFilter:x,filterToolTip:l?"Show all zones":"Hide zones out of view",filterIsActive:l,counterFiltered:j&&j.length,showSettingButton:"true",onSettingClick:M,children:[Object(I.jsx)(We,{title:"Remove all Assignments",popupPlacement:"right",children:Object(I.jsx)("button",{style:$f.removeAssignmentsButton,type:"button",onClick:D,disabled:!t.values||0===t.values.length,children:Object(I.jsx)(Xe.H,{})})}),Object(I.jsx)(Ru,{popupTitle:"show/hide zones",popupPlacement:"right",style:$f.toggle,defaultValue:!0,onClick:function onClick(){return E("zones")},children:Object(I.jsx)("span",{style:{fontSize:"12px",pointerEvents:"none"},children:"z"})}),Object(I.jsx)(Ru,{popupTitle:"show/hide signals",popupPlacement:"right",style:$f.toggle,defaultValue:!0,onClick:function onClick(){return E("signals")},children:Object(I.jsx)("span",{style:{fontSize:"12px",pointerEvents:"none"},children:"s"})}),Object(I.jsx)(Ru,{popupTitle:"show/hide peaks",popupPlacement:"right",style:$f.toggle,defaultValue:!0,onClick:function onClick(){return E("peaks")},children:Object(I.jsx)("span",{style:{fontSize:"12px",pointerEvents:"none"},children:"p"})})]}),h&&Object(I.jsx)(Zu,{onSave:A,onClose:M}),Object(I.jsx)("div",{style:{height:"100%",overflow:"hidden"},children:Object(I.jsxs)(ru.a,{isFlipped:h,infinite:!0,containerStyle:{overflow:"hidden",height:"100%"},children:[Object(I.jsx)("div",{style:{overflow:"auto",height:"100%",display:"block"},children:j&&j.length>0?Object(I.jsx)(Jf,{tableData:j,onUnlink:y,preferences:T,nuclei:n&&2===n.split(",").length?n.split(","):["?","?"]}):Object(I.jsx)(ed,{})}),Object(I.jsx)(Lf,{ref:g})]})})]})})}var Qf=Po(Object(S.memo)(ZonesPanel)),eh={width:"100%",height:"100%",padding:"0px",display:"flex",flexDirection:"column"};function Table(e){var t=e.children,n=e.className,a=e.style;return Object(I.jsx)("div",{className:n,style:Object(v.a)(Object(v.a)({},eh),a),children:t})}var th=Object(S.memo)(Table),nh={width:"100%",overflowY:"auto",display:"flex",flexDirection:"column",padding:"5px 0px",color:"gray"};function TableBody(e){var t=e.children,n=e.className,a=e.style,i=Object(S.useMemo)((function(){return S.Children.map(t,(function(e){return Object(S.cloneElement)(e,{style:Object(v.a)({borderBottom:"0.55px solid #d8d8d8"},e.props.style)})}))}),[t]);return Object(I.jsx)("div",{className:n,style:Object(v.a)(Object(v.a)({},nh),{},{style:a}),children:i})}var ah=Object(S.memo)(TableBody),ih={width:"100%",display:"flex",alignItems:"flex-start"};function getVAlign(e){return"top"===e.toLowerCase()?"flex-start":"bottom"===e.toLowerCase()?"flex-end":"center"}function TableHeader(e){var t=e.children,n=e.className,a=e.style,i=e.align,r=void 0===i?"center":i,o=e.vAlign,c=void 0===o?"center":o,l=e.size,s=void 0===l?1:l,u=e.onClick;return Object(I.jsx)("div",{className:n,style:Object(v.a)(Object(v.a)({},ih),{},{alignItems:getVAlign(c),textAlign:r,flex:s},a),onClick:u,children:t})}TableHeader.defaultProps={onClick:function onClick(){return null}};var rh=Object(S.memo)(TableHeader),oh={width:"100%",display:"flex",padding:"0px 5px",color:"#424242",backgroundColor:"#d8d8d8",borderBottom:"0.55px solid #d8d8d8",fontSize:11,fontWeight:"bold"};function TableHead(e){var t=e.children,n=e.className,a=e.style;return Object(I.jsx)("div",{className:n,style:Object(v.a)(Object(v.a)({},oh),a),children:t})}var ch=Object(S.memo)(TableHead),lh={width:"100%",display:"flex",padding:"5px 0px"};function TableRow_TableHeader(e){var t=e.children,n=e.className,a=e.style,i=e.onClick;return Object(I.jsx)("div",{className:n,style:Object(v.a)(Object(v.a)({},lh),a),onClick:i,children:t})}TableRow_TableHeader.defaultProps={onClick:function onClick(){return null}};var sh=Object(S.memo)(TableRow_TableHeader);var uh=function FiltersWrapper(e){var t=function Wrapper(t){var n=useChartData(),a=n.data,i=n.activeSpectrum,r=Object(S.useMemo)((function(){return a&&i&&i.id?a.find((function(e){return e.id===i.id}))||{filters:[]}:{}}),[i,a]).filters,o=void 0===r?[]:r,c=t.forwardedRef,l=Object(fe.a)(t,["forwardedRef"]);return Object(I.jsx)(e,Object(v.a)(Object(v.a)({},l),{},{filters:o,ref:c}))};return Object(S.forwardRef)((function(e,n){return Object(I.jsx)(t,Object(v.a)(Object(v.a)({},e),{},{forwardedRef:n}))}))},dh=n(425),bh={button:{backgroundColor:"transparent",border:"none",height:25,width:25,padding:"5px"},active:{backgroundColor:"#fbfbfb",borderTop:"1px solid #817066",borderBottom:"1px solid #817066"}};function FiltersTableRow(e){var t=e.filters,n=useDispatch(),a=ie(),i=Mc(),r=Object(S.useState)(),o=Object(O.a)(r,2),c=o[0],l=o[1],s=Object(S.useCallback)(function(){var e=Object(Br.a)(Hr.a.mark((function _callee(e,t){var a;return Hr.a.wrap((function _callee$(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,i.showLoading("".concat(t?"Enable":"Disable"," filter in progress"));case 2:a=r.sent,setTimeout((function(){n({type:sn,id:e,checked:t}),a()}),0);case 4:case"end":return r.stop()}}),_callee)})));return function(t,n){return e.apply(this,arguments)}}(),[i,n]),u=Object(S.useCallback)((function(e){var t=e.id,r=e.name;a.showConfirmDialog({message:"Filter/s will be deleted, Are You sure?",buttons:[{text:"Yes,All spectra",handler:function(){var e=Object(Br.a)(Hr.a.mark((function _callee2(){var e;return Hr.a.wrap((function _callee2$(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.showLoading("Delete all spectra filter processs in progress");case 2:e=t.sent,n({type:dn,payload:{filterType:r}}),e();case 5:case"end":return t.stop()}}),_callee2)})));return function handler(){return e.apply(this,arguments)}}()},{text:"Yes ",handler:function(){var e=Object(Br.a)(Hr.a.mark((function _callee3(){var e;return Hr.a.wrap((function _callee3$(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,i.showLoading("Delete filter processs in progress");case 2:e=a.sent,n({type:un,payload:{id:t}}),e();case 5:case"end":return a.stop()}}),_callee3)})));return function handler(){return e.apply(this,arguments)}}()},{text:"No"}]})}),[i,n,a]),d=Object(S.useCallback)(function(){var e=Object(Br.a)(Hr.a.mark((function _callee4(e){var t;return Hr.a.wrap((function _callee4$(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,i.showLoading("Filter snapshot processs in progress");case 2:t=a.sent,setTimeout((function(){l((function(t){var a=t===e?null:e;return n({type:Vn,id:a}),a})),t()}),0);case 4:case"end":return a.stop()}}),_callee4)})));return function(t){return e.apply(this,arguments)}}(),[i,n]);return Object(S.useMemo)((function(){return t&&t.map((function(e){return Object(I.jsxs)(sh,{style:e.id===c?Object(v.a)({},bh.active):{},children:[Object(I.jsx)(rh,{align:"center",size:"2",onClick:function onClick(){return d(e.id)},children:e.label}),Object(I.jsx)(rh,{align:"left",size:"3",children:Object(I.jsx)("div",{onClick:function onClick(e){return e.stopPropagation()},children:Object(I.jsx)(dh.a,{data:e.error?e.error:e.value})})}),Object(I.jsxs)(rh,{align:"center",vAlign:"center",size:"1",children:[Object(I.jsx)(zc,{checked:e.flag,onChange:function onChange(t){return s(e.id,t.target.checked)}}),e.isDeleteAllow&&Object(I.jsx)("button",{style:bh.button,type:"button",onClick:function onClick(){return u(e)},children:Object(I.jsx)(Xe.B,{})})]})]},e.id)}))}),[d,t,u,s,c])}var ph=Object(S.memo)(FiltersTableRow);function FilterPanel(e){var t=e.filters;return Object(S.useMemo)((function(){return t?Object(I.jsxs)(th,{children:[Object(I.jsx)(ch,{children:Object(I.jsxs)(sh,{children:[Object(I.jsx)(rh,{align:"center",size:"1",children:"Label"}),Object(I.jsx)(rh,{align:"center",size:"2",children:"Properties"})]})}),Object(I.jsx)(ah,{children:Object(I.jsx)(ph,{filters:t})})]}):Object(I.jsx)(ed,{})}),[t])}var fh=uh(Object(S.memo)(FilterPanel)),hh=[{title:"Spectra",component:Object(I.jsx)(cf,{}),openWhen:null,style:"",hidePreferenceKey:"hideSpectraPanel",mode:null},{title:"Information",component:Object(I.jsx)(au,{}),openWhen:null,style:{overflow:"hidden"},hidePreferenceKey:"hideInformationPanel",mode:null},{title:"Peaks",component:Object(I.jsx)(Ib,{}),openWhen:[Qa.peakPicking.id],style:"",hidePreferenceKey:"hidePeaksPanel",mode:null},{title:"Filters",component:Object(I.jsx)(fh,{}),openWhen:null,style:"",hidePreferenceKey:"hideFiltersPanel",mode:null},{title:"Integrals",component:Object(I.jsx)(hd,{}),openWhen:[Qa.integral.id],style:"",hidePreferenceKey:"hideIntegralsPanel",mode:null},{title:"Ranges",component:Object(I.jsx)(Rp,{}),openWhen:[Qa.rangesPicking.id],style:"",hidePreferenceKey:"hideRangesPanel",mode:jo.DM_1D},{title:"Multiple Spectra Analysis",component:Object(I.jsx)(wb,{}),openWhen:[Qa.multipleSpectraAnalysis.id],style:"",hidePreferenceKey:"hideMultipleSpectraAnalysisPanel",mode:null},{title:"Zones",component:Object(I.jsx)(Qf,{}),openWhen:[Qa.zone2D.id],style:"",hidePreferenceKey:"hideZonesPanel",mode:jo.DM_2D},{title:"Summary",component:Object(I.jsx)(If,{}),openWhen:[],style:"",hidePreferenceKey:"hideSummaryPanel",mode:null},{title:"Structures",component:Object(I.jsx)(Hd,{}),openWhen:[Qa.rangesPicking.id],style:"",hidePreferenceKey:"hideStructuresPanel",mode:null}];function Panels(e){var t=e.selectedTool,n=e.displayerMode,a=Object(S.useState)(0),i=Object(O.a)(a,2),r=i[0],o=i[1],c=usePreferences();Object(S.useEffect)((function(){var e=function getDefaultIndex(){var e=hh.findIndex((function(e){return e.openWhen&&e.openWhen.includes(t)}));return-1!==e?e:null}();t&&o(e)}),[t]);var l=Object(S.useCallback)((function(e){return!C()(c,"display.panels.".concat(e.hidePreferenceKey))&&(null==e.mode||e.mode===n)}),[n,c]);return Object(I.jsx)(qs,{defaultOpenIndex:r,children:hh.map((function(e){return l(e)&&Object(I.jsx)(Xs,{title:e.title,style:e.style,children:e.component},e.title)}))})}var mh=Object(S.memo)(Panels),gh=[_n,rn,cn,Sn,Fn,Cn,Ft,Rt,kn,Nt,Dn,jn,_t,It,Et,Pt,Kt,Ut,fn,nn,zt,"SAVE_AS_SVG","SAVE_DATA_AS_JSON",Tn,Ht,Bt,Vt,ln,Xt];var jh=function checkActionType(e){return!gh.includes(e)},vh=n(762);function addRanges(e,t){var n,a=[],i=t.baseFrequency,r=void 0===i?500:i,o=Object(ac.a)(e);try{for(o.s();!(n=o.n()).done;){var c=n.value,l=c.jCoupling,s=c.delta,u=c.diaID,d=void 0===u?[]:u,b=c.multiplicity,p=c.integral,f=computeFromTo({delta:s,j:l,frequency:r});a.push(Object(v.a)(Object(v.a)({},f),{},{integral:p,signal:[{j:l,delta:s,diaID:d,multiplicity:b}]}))}}catch(h){o.e(h)}finally{o.f()}t.ranges.values=mapRanges(function joinRanges(e){e.sort((function(e,t){return e.from-t.from}));for(var t=0;t<e.length-1;t++)e[t].to>e[t+1].from&&(e[t].to=Math.max(e[t+1].to,e[t].to),e[t].signal=e[t].signal.concat(e[t+1].signal),e[t].integral+=e[t+1].integral,e.splice(t+1,1),t--);return e}(a),t)}function computeFromTo(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.delta,a=t.j,i=void 0===a?[]:a,r=t.frequency,o=.5,c=Object(ac.a)(i);try{for(c.s();!(e=c.n()).done;){var l=e.value;o+=l.coupling}}catch(s){c.e(s)}finally{c.f()}return{from:n-(o/=r),to:n+o}}var Oh=["x","y"];function addZones(e,t){var n,a=[],i=getShift(t),r=t.info.baseFrequency,o={x:r[0],y:r[1]},c=Object(ac.a)(e);try{for(c.s();!(n=c.n()).done;){var l,s=n.value,u={x:{},y:{},id:generateID(),kind:"signal"},d={id:generateID(),kind:"signal",peak:[]},b={x:10,y:10},p=Object(ac.a)(Oh);try{for(p.s();!(l=p.n()).done;){var f,h=l.value,m=s[h],g=m.coupling,j=void 0===g?[]:g,O=m.delta,x=m.diaID,y=void 0===x?[]:x,k=Object(ac.a)(j);try{for(k.s();!(f=k.n()).done;){var C=f.value;b[h]+=C.coupling}}catch(A){k.e(A)}finally{k.f()}if(s.activeCoupling){var S,D=s.activeCoupling,w=void 0===D?[]:D,T=Object(ac.a)(w);try{for(T.s();!(S=T.n()).done;){var M=S.value;b[h]+=M.coupling}}catch(A){T.e(A)}finally{T.f()}}b[h]/=o[h],u[h]={from:O-b[h],to:O+b[h]},d[h]={delta:O,diaID:y,originDelta:O-i["".concat(h,"Shift")]}}}catch(A){p.e(A)}finally{p.f()}a.push(Object(v.a)(Object(v.a)({},u),{},{signal:[d]}))}}catch(A){c.e(A)}finally{c.f()}t.zones.values=a}function _nmredataToNmrium(){return(_nmredataToNmrium=Object(Br.a)(Hr.a.mark((function _callee(e){var t,n,a,i,r,o,c,l,s,u,d,b,p,f,h,m,g;return Hr.a.wrap((function _callee$(j){for(;;)switch(j.prev=j.next){case 0:return t=new nl.a,j.next=3,t.loadAsync(e.binary);case 3:return n=j.sent,j.next=6,getSDF(n.files);case 6:return a=j.sent,j.next=9,vh.a.toJSON({sdf:a[0],zipFiles:n.files});case 9:i=j.sent,r=i.spectra,o=i.molecules,c={spectra:[],molecules:void 0===o?[]:o},l=Object(ac.a)(r),j.prev=13,l.s();case 15:if((s=l.n()).done){j.next=33;break}return d=s.value,b=d.source,p=b.file,f=b.jcampURL,j.next=20,getSpectra(p,{jcampURL:f});case 20:h=j.sent,m=0;case 22:if(!(m<h.length)){j.next=30;break}if(!(g=h[m].info).isFid){j.next=26;break}return j.abrupt("continue",27);case 26:g.dimension>1?addZones(d.signals,h[m]):addRanges(d.signals,h[m]);case 27:m++,j.next=22;break;case 30:(u=c.spectra).push.apply(u,Object(Li.a)(h));case 31:j.next=15;break;case 33:j.next=38;break;case 35:j.prev=35,j.t0=j.catch(13),l.e(j.t0);case 38:return j.prev=38,l.f(),j.finish(38);case 41:return j.abrupt("return",c);case 42:case"end":return j.stop()}}),_callee,null,[[13,35,38,41]])})))).apply(this,arguments)}function getSpectra(e){return _getSpectra.apply(this,arguments)}function _getSpectra(){return(_getSpectra=Object(Br.a)(Hr.a.mark((function _callee2(e){var t,n,a,i,r,o,c,l,s=arguments;return Hr.a.wrap((function _callee2$(u){for(;;)switch(u.prev=u.next){case 0:t=s.length>1&&void 0!==s[1]?s[1]:{},n=t.xy,a=void 0===n||n,i=t.noContours,r=void 0===i||i,o=t.keepOriginal,c=void 0===o||o,l=t.jcampURL,u.t0=e.extension,u.next="jdx"===u.t0||"dx"===u.t0?5:"zip"===u.t0?6:7;break;case 5:return u.abrupt("return",addJcamps([e]));case 6:return u.abrupt("return",addBruker({xy:a,noContours:r,keepOriginal:c},e.binary));case 7:if(l){u.next=10;break}return new Error("file extension is not supported"),u.abrupt("return");case 10:case"end":return u.stop()}}),_callee2)})))).apply(this,arguments)}function getSDF(e){return _getSDF.apply(this,arguments)}function _getSDF(){return(_getSDF=Object(Br.a)(Hr.a.mark((function _callee3(e){var t,n,a,i,r,o,c;return Hr.a.wrap((function _callee3$(l){for(;;)switch(l.prev=l.next){case 0:t=[],l.t0=Hr.a.keys(e);case 2:if((l.t1=l.t0()).done){l.next=17;break}if(n=l.t1.value,!(a=n.split("/"))[a.length-1].match(/^[^.].+sdf$/)){l.next=15;break}return i=a[a.length-1].replace(/\.sdf/,""),r=a.slice(0,a.length-1).join("/"),l.next=10,e[n].async("string");case 10:o=l.sent,(c=Object(vh.b)("".concat(o),{mixedEOL:!0})).filename=i,c.root=""!==r?"".concat(r,"/"):"",t.push(c);case 15:l.next=2;break;case 17:return l.abrupt("return",t);case 18:case"end":return l.stop()}}),_callee3)})))).apply(this,arguments)}function handleUpdateCorrelations(e){var t=e.data,n=e.correlations;e.correlations=ff.Build.build(t,n.options,mf()(n.values))}function getActiveData(e){if(e.activeTab){var t=Hp("nucleus")(e.data)[e.activeTab];if(e.displayerMode===jo.DM_2D)return t;if(e.activeSpectrum&&t){var n=t.findIndex((function(t){return t.id===e.activeSpectrum.id}));if(-1!==n){var a=t[n].info.isFid||!1;t=t.filter((function(e){return e.info.isFid===a}))}}else t=t?t.filter((function(e){return!1===e.info.isFid})):[];var i,r=Object(ac.a)(e.data);try{var o=function _loop(){var e=i.value;t.some((function(t){return t.id===e.id}))?e.display.isVisibleInDomain=!0:e.display.isVisibleInDomain=!1};for(r.s();!(i=r.n()).done;)o()}catch(c){r.e(c)}finally{r.f()}return e.data}return e.data}function getDomain(e){var t=[],n=[],a={},i={},r={};try{t=e.reduce((function(e,t){var n=t.display,a=t.data;if(n.isVisibleInDomain){var r=[a.x[0],a.x[a.x.length-1]];return i[t.id]=r,n.isVisible&&(e=e.concat(r)),e}return e.concat([])}),[]),n=e.reduce((function(e,t){var n=t.display,i=t.data,o=t.integrals;if(n.isVisibleInDomain){var c=Object(nt.c)(i.y);if(a[t.id]=c,o.values&&o.values.length>0){var l=o.values[0],s=l.from,u=void 0===s?0:s,d=l.to,b=void 0===d?0:d,p=i.x,f=i.y,h=Object(He.o)({x:p,y:f},{from:u,to:b,reverse:!0});r[t.id]=Object(nt.c)(h.y)}return n.isVisible&&(e=e.concat(c)),e}return e.concat([])}),[])}catch(o){console.log(o)}return{xDomain:Object(nt.c)(t),yDomain:Object(nt.c)(n),yDomains:a,xDomains:i,integralYDomain:r}}function get2DDomain(e){var t=[],n=[],a={},i={},r=e.activeTab,o=e.tabActiveSpectrum,c=e.data,l=r.split(",");try{t=c.reduce((function(e,t){var n;return 2===t.info.dimension&&(null===(n=t.info.nucleus)||void 0===n?void 0:n.join(","))===r&&t.info.isFt&&(e=e.concat([t.data.minX,t.data.maxX])),e}),[]),n=c.reduce((function(e,t){var n;return 2===t.info.dimension&&(null===(n=t.info.nucleus)||void 0===n?void 0:n.join(","))===r&&t.info.isFt&&(e=e.concat([t.data.minY,t.data.maxY])),e}),[])}catch(d){console.log(d)}var s=l.map((function(e){var t;return null===(t=o[e])||void 0===t?void 0:t.id})),u=c.reduce((function(e,t){return s.includes(t.id)&&1===t.info.dimension?e.concat(t):e.concat([])}),[]);try{i=u.reduce((function(e,t){var n=t.data.x,a=[n[0],n[n.length-1]];return e[t.id]=a,e}),{}),a=u.reduce((function(e,t){var n=Object(nt.c)(t.data.y);return e[t.id]=n,e}),{})}catch(d){console.log(d)}return{xDomain:Object(nt.c)(t),yDomain:Object(nt.c)(n),yDomains:a,xDomains:i}}function setDomain(e){var t,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=getActiveData(e);e.activeTab&&[jo.DM_1D,jo.DM_2D].includes(e.displayerMode)&&(t=e.displayerMode===jo.DM_1D?getDomain(a):get2DDomain(e),e.xDomain=t.xDomain,e.xDomains=t.xDomains,n?(e.yDomain=t.yDomain,e.displayerMode===jo.DM_1D?(e.yDomains=Object.keys(t.yDomains).reduce((function(e,n){return e[n]=t.yDomain,e}),{}),e.originDomain=Object(v.a)(Object(v.a)({},t),{},{yDomains:e.yDomains,originYDomains:t.yDomains})):(e.yDomains=t.yDomains,e.originDomain=t),e.integralsYDomains=t.integralYDomain&&t.integralYDomain,e.originIntegralYDomain=t.integralYDomain&&t.integralYDomain):e.originDomain=Object(v.a)(Object(v.a)({},e.originDomain),{},{xDomain:t.xDomain,xDomains:t.xDomains}))}function setMode(e){var t,n=getActiveData(e).filter((function(e){return!0===e.display.isVisibleInDomain}));e.mode=(null===(t=n[0])||void 0===t?void 0:t.info.isFid)?"LTR":"RTL"}function nucluesToString(e){return"string"===typeof e?e:e.join(",")}var xh=function getClosestNumber(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=e.reduce((function(e,n){return Math.abs(n-t)<Math.abs(e-t)?n:e}));return n},yh=function(){function ZoomHistory(){Object(at.a)(this,ZoomHistory),this.stack=[]}return Object(it.a)(ZoomHistory,[{key:"push",value:function push(e){this.stack.push(e)}},{key:"pop",value:function pop(){return this.stack.pop()?this.stack[this.stack.length-1]:null}},{key:"getLast",value:function getLast(){return 0===this.stack.length?null:this.stack[this.stack.length-1]}}],[{key:"getInstance",value:function getInstance(e,t){return e[t]&&e[t]instanceof ZoomHistory||(e[t]=new ZoomHistory),e[t]}}]),ZoomHistory}();function changeSpectrumVerticalAlignment(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e.data&&e.data.length>0)if(t||n&&e.data[0].info.isFid&&!e.data.some((function(e){return!1===e.info.isFid}))){var a=e.height/2;e.verticalAlign.flag=!0,e.verticalAlign.value=a,e.verticalAlign.stacked=!1}else e.verticalAlign.flag=!1,e.verticalAlign.value=20,e.verticalAlign.stacked=!1}function setFilterChanges(e,t){var n=e.activeSpectrum.id;if(t===$a.phaseCorrection.id){e.tempData=e.data;var a=function getStrongestPeak(e){var t=e.activeSpectrum,n=e.data[t.index].data,a=Object(nt.e)(n.y),i=n.y.findIndex((function(e){return e===a}));return{xValue:n.x[i],yValue:a,index:i}}(e).xValue;e.pivot=a}else if(e.selectedTool===Qa.phaseCorrection.id){var i=e.data.findIndex((function(e){return e.id===n}));e.data[i].data=e.tempData[i].data}}function resetTool(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e.selectedOptionPanel=null,t&&(e.selectedTool=Qa.zoom.id),e.baseLineZones=[],e.tempData&&(e.tempData=null,setDomain(e))}function resetSelectedTool(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];(e.selectedTool&&Qa[e.selectedTool].isFilter||!t)&&resetTool(e)}function getSpectrumID(e,t){return e.tabActiveSpectrum[e.activeTab.split(",")[t]].id}function hasAcceptedSpectrum(e,t){var n=e.activeTab.split(",");return e.tabActiveSpectrum[n[t]]&&!e.data[e.tabActiveSpectrum[n[t]].index].info.isFid}function setMargin(e){if(e.displayerMode===jo.DM_2D&&e.selectedTool!==Qa.slicingTool.id){var t=hasAcceptedSpectrum(e,0)?vo.top:Oo.top,n=hasAcceptedSpectrum(e,1)?vo.left:Oo.left;e.margin=Object(v.a)(Object(v.a)({},vo),{},{top:t,left:n})}else e.selectedTool===Qa.slicingTool.id?e.margin=vo:e.displayerMode===jo.DM_1D&&(e.margin=Oo)}function Processing2DData(e,t){if(e.displayerMode===jo.DM_2D){var n,a={},i=Object(ac.a)(t[e.activeTab]);try{for(i.s();!(n=i.n()).done;){var r=n.value;a[r.id]=r.processingController.drawContours()}}catch(o){i.e(o)}finally{i.f()}e.contours=a}}function setDisplayerMode(e,t){e.displayerMode=t&&t.some((function(e){return 2===e.info.dimension}))?jo.DM_2D:jo.DM_1D}function setTabActiveSpectrum(e,t){var n,a=[],i={},r=Object.keys(t).sort((function(e,t){return e.split(",").length>t.split(",").length?-1:1})),o=Object(ac.a)(r);try{var c=function _loop(){var r=n.value,o=t[r],c=r.split(",").length;if(2===c&&a.push(r),1===o.length){var l=e.data.findIndex((function(e){return e.id===o[0].id}));i[r]={id:o[0].id,index:l}}else{var s=t[r],u=s.length;if(u>=2){var d=s.filter((function(e){return!e.info.isFid}));if(d.length>0&&(2===c||1===c&&u!==d.length)){var b=e.data.findIndex((function(e){return e.id===d[0].id}));i[r]={id:d[0].id,index:b}}else i[r]=null}else i[r]=null}};for(o.s();!(n=o.n()).done;)c()}catch(l){o.e(l)}finally{o.f()}return e.tabActiveSpectrum=i,a}function setTab(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=Object.keys(t).sort((function(e,t){return e.split(",").length>t.split(",").length?-1:1}));if(JSON.stringify(i)!==JSON.stringify(Object.keys(e.tabActiveSpectrum))||a){var r=setTabActiveSpectrum(e,t);r.length>0&&null==n?(e.activeSpectrum=e.tabActiveSpectrum[r[0]],e.activeTab=r[0]):(e.activeSpectrum=n?e.tabActiveSpectrum[n]:n,e.activeTab=n)}else e.activeTab=n,e.activeSpectrum=e.tabActiveSpectrum[n];setDisplayerMode(e,t[e.activeTab]),setMargin(e)}function ToolsActions_setActiveTab(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=Hp("nucleus"),i=a(e.data),r=Object.keys(i),o=t&&r.includes(null!==t&&void 0!==t?t:"")?t:r[0];setTab(e,i,o,n),resetTool(e),Processing2DData(e,i),setDomain(e);var c=yh.getInstance(e.ZoomHistory,e.activeTab),l=c.getLast();l&&(e.xDomain=l.xDomain,e.yDomain=l.yDomain),setMode(e)}function setDataBy1DFilter(e){e.data.y=e.data.re}function getRange_getRange(e,t){var n=t.startX,a=t.endX,i=getXScale(e),r=i.invert(n),o=i.invert(a),c=[];return r>o?(c[0]=o,c[1]=r):(c[0]=r,c[1]=o),c}function changeIntegral(e,t){var n,a=Object(gt.a)(e),i=t.data;if(null===(n=e.activeSpectrum)||void 0===n?void 0:n.id){var r=e.activeSpectrum.index,o=a.data[r],c=e.data[r],l=o.data,s=l.x,u=l.re,d=o.integrals.values.findIndex((function(e){return e.id===i.id}));-1!==d&&(c.integrals.values[d]=Object(v.a)(Object(v.a)({originFrom:i.from,originTo:i.to},i),{},{absolute:Object(He.p)({x:s,y:u},{from:i.from,to:i.to,reverse:!0})}),updateIntegralIntegrals(c.integrals))}}function handleChangeIntegralsRaltiveValue(e,t){var n,a=t.id,i=t.value;if(null===(n=e.activeSpectrum)||void 0===n?void 0:n.id){var r=e.activeSpectrum.index;!function changeIntegralsRealtive(e,t,n){var a=e.values.find((function(e){return e.id===t}));if(a){var i=a.absolute/n,r=e.values.reduce((function(e,t,n){var a=t.absolute/i;return e.sum+=a,e.values[n]=Object(v.a)(Object(v.a)({},t),{},{integral:a}),e}),{values:[],sum:0}),o=r.values,c=r.sum;e.values=o,e.options.sum=c}}(e.data[r].integrals,a,i)}}function addMolfile(e,t){var n,a=Ic.Molecule.fromMolfile(t).getFragments(),i=Object(ac.a)(a);try{for(i.s();!(n=i.n()).done;){var r=n.value,o=r.getMolecularFormula(),c=o.formula,l=o.absoluteWeight,s=o.relativeWeight;e.push(initMolecule({molfile:r.toMolfileV3(),svg:r.toSVG(150,150),mf:c,em:l,mw:s}))}}catch(u){i.e(u)}finally{i.f()}}function LoadActions_setData(e,t){var n=t||{spectra:[],molecules:[],preferences:{},correlations:{},multipleAnalysis:{},exclusionZones:{}},a=n.spectra,i=n.molecules,r=n.preferences,o=n.correlations,c=n.exclusionZones,l=void 0===c?{}:c;e.data=a,e.molecules=function MoleculeManager_fromJSON(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=[],n=0;n<e.length;n++){var a,i=Ic.Molecule.fromMolfile(e[n].molfile).getFragments(),r=Object(ac.a)(i);try{for(r.s();!(a=r.n()).done;){var o=a.value;t.push(initMolecule({molfile:o.toMolfileV3()}))}}catch(c){r.e(c)}finally{r.f()}}return t}(i),e.preferences=r,e.exclusionZones=l,o&&0!==Object.keys(o).length?e.correlations=ff.Build.init(o):e.correlations=ff.Build.init({values:[],options:{tolerance:df,mf:""},state:{}})}function loadJDFFile(e,t){var n,a=function addJDFs(e){var t,n=[],a=Object(ac.a)(e);try{for(a.s();!(t=a.n()).done;){var i=t.value;addJDF(n,i.binary,{display:{name:i.name},source:{jcampURL:i.jcampURL?i.jcampURL:null,file:i}})}}catch(r){a.e(r)}finally{a.f()}return n}(t),i=Object(ac.a)(a);try{for(i.s();!(n=i.n()).done;){var r=n.value;e.data.push(r)}}catch(o){i.e(o)}finally{i.f()}ToolsActions_setActiveTab(e),initZoom1DHandler(e.data),e.isLoading=!1}function getRangeIndex(e,t,n){return e.data[t].ranges.values.findIndex((function(e){return e.id===n}))}function handleUnlinkRange(e,t){var n;if(null===(n=e.activeSpectrum)||void 0===n?void 0:n.id){var a=e.activeSpectrum.index,i=t.payload,r=i.assignmentData,o=i.rangeData,c=void 0===o?null:o,l=i.signalIndex,s=void 0===l?-1:l;if(c){var u=getRangeIndex(e,a,c.id),d=mf()(e.data[a].ranges.values[u]),b={},p=c.id;c&&-1===s?b=fr(d,"range"):(b=fr(d,"signal",{signalIndex:s}),p=c.signal[s].id),mr(r,[{id:p}]),e.data[a].ranges.values[u]=b}else{var f=e.data[a].ranges.values.map((function(e){return fr(e)}));e.data[a].ranges.values=f,mr(r,f)}}}function handleResizeRange(e,t){var n;if(null===(n=e.activeSpectrum)||void 0===n?void 0:n.id){var a=e.activeSpectrum.index;!function changeRange(e,t){var n=t.from,a=t.to,i=e.data,r=i.x,o=i.re,c=e.ranges.values.findIndex((function(e){return e.id===t.id})),l=Object(He.p)({x:r,y:o},{from:n,to:a,reverse:!0});-1!==c&&(e.ranges.values[c]=Object(v.a)(Object(v.a)(Object(v.a)({},e.ranges.values[c]),{},{originFrom:n,originTo:a},t),{},{absolute:l}),updateIntegralRanges(e))}(e.data[a],t.data)}}function handleAddRange(e,t){var n,a=getRange_getRange(e,{startX:t.startX,endX:t.endX});if(null===(n=e.activeSpectrum)||void 0===n?void 0:n.id){var i=e.activeSpectrum.index,r=Object(O.a)(a,2),o=r[0],c=r[1];!function addRange(e,t){var n=t.from,a=t.to,i=e.data,r=i.x,o=i.re,c=Object(He.p)({x:r,y:o},{from:n,to:a,reverse:!0}),l=bc(r,o,n,a,e.info.originFrequency);try{var s={id:generateID(),from:n,to:a,absolute:c,signal:[Object(v.a)({id:generateID()},l)],kind:sr};e.ranges.values=e.ranges.values.concat(mapRanges([s],e)),updateIntegralRanges(e)}catch(u){throw new Error("Could not calculate the multiplicity")}}(e.data[i],{from:o,to:c}),handleOnChangeRangesData(e)}}function handleChangeRangeRaltiveValue(e,t){var n,a=t.id,i=t.value;if(null===(n=e.activeSpectrum)||void 0===n?void 0:n.id){var r=e.activeSpectrum.index;!function changeRangesRealtive(e,t,n){var a=e.ranges.values.find((function(e){return e.id===t}));if(a){var i=a.absolute/n;e.ranges.options.sum=n/a.integral*e.ranges.options.sum,e.ranges.values=e.ranges.values.map((function(e){return Object(v.a)(Object(v.a)({},e),{},{integral:e.absolute/i})}))}}(e.data[r],a,i)}}function handleOnChangeRangesData(e){handleUpdateCorrelations(e)}var kh=1;function add2dZoneHandler(e,t){var n;if(null===(n=e.activeSpectrum)||void 0===n?void 0:n.id){var a=e.activeSpectrum.index,i=function get2DRange(e,t){var n=t.startX,a=t.startY,i=t.endX,r=t.endY,o=get2DXScale(e),c=get2DYScale(e),l=1e6*n>1e6*i?i:n,s=1e6*n>1e6*i?n:i,u=1e6*a>1e6*r?r:a,d=1e6*a>1e6*r?a:r,b=c.invert(u),p=o.invert(l),f=c.invert(d);return{fromX:p,fromY:b,toX:o.invert(s),toY:f}}(e,t);!function detectZonesManual(e,t){var n,a=getDetectionZones(e,t),i=getShift(e),r=i.xShift,o=i.yShift,c=Object(ac.a)(a);try{for(c.s();!(n=c.n()).done;){var l=n.value,s=l.fromTo;e.zones.values.push({id:generateID(),x:s[0],y:s[1],signal:[{id:generateID(),peak:l.peaks,x:{originDelta:l.shiftX-r,delta:l.shiftX,diaID:[]},y:{originDelta:l.shiftY-o,delta:l.shiftY,diaID:[]},kind:"signal"}],kind:sr})}}catch(u){c.e(u)}finally{c.f()}}(e.data[a],{selectedZone:i,thresholdFactor:kh,convolutionByFFT:!1}),handleOnChangeZonesData(e)}}function handleAutoZonesDetection(e,t){var n;if(null===(n=e.activeSpectrum)||void 0===n?void 0:n.id){var a=e.activeSpectrum.index,i=Object(O.a)(e.xDomain,2),r=i[0],o=i[1],c=Object(O.a)(e.yDomain,2),l=c[0],s=c[1];t.selectedZone={fromX:r,toX:o,fromY:l,toY:s},function detectZones(e,t){var n=getDetectionZones(e,t),a=getShift(e),i=a.xShift,r=a.yShift,o=e.data,c=o.minX,l=o.maxX,s=o.minY,u=o.maxY,d=Math.abs(l-c)/1e4,b=Math.abs(u-s)/1e4,p=n.reduce((function(t,n){var a,o=Object(O.a)(n.fromTo,2),c=o[0],l=o[1],s=Object(ac.a)(e.zones.values);try{for(s.s();!(a=s.n()).done;){var u=a.value,p=u.x,f=u.y;if(Math.abs(c.from-p.from)<d&&Math.abs(c.to-p.to)<d&&Math.abs(l.from-f.from)<b&&Math.abs(l.to-f.to)<b)return t}}catch(h){s.e(h)}finally{s.f()}return t.push({id:generateID(),x:{from:c.from,to:c.to},y:{from:l.from,to:l.to},signal:[{id:generateID(),peak:n.peaks,x:{originDelta:n.shiftX-i,delta:n.shiftX,diaID:[]},y:{originDelta:n.shiftY-r,delta:n.shiftY,diaID:[]},kind:"signal"}],kind:sr}),t}),[]);e.zones.values=e.zones.values.concat(p)}(e.data[a],t),handleOnChangeZonesData(e)}}function getZoneIndex(e,t,n){return e.data[t].zones.values.findIndex((function(e){return e.id===n}))}function handleUnlinkZone(e,t){var n,a=Object(gt.a)(e);if(null===(n=a.activeSpectrum)||void 0===n?void 0:n.id){var i,r=a.activeSpectrum.index,o=t.payload,c=o.zoneData,l=o.assignmentData,s=o.isOnZoneLevel,u=o.signalIndex,d=o.axis,b=Object(ac.a)(c?[c]:a.data[r].zones.values);try{for(b.s();!(i=b.n()).done;){var p=i.value,f=No(mf()(p),s,u,d);Ro(l,s?[{id:f.id}]:[{id:f.signal[u].id}],d);var h=getZoneIndex(a,r,f.id);e.data[r].zones.values[h]=f}}catch(m){b.e(m)}finally{b.f()}}}function handleOnChangeZonesData(e){handleUpdateCorrelations(e)}function setMoleculeHandler(e,t,n){!function MoleculeManager_setMolfile(e,t,n){var a=Ic.Molecule.fromMolfile(t).getFragments();if(a.length>1){e=this.molecules.filter((function(e){return e.key!==n}));var i,r=Object(ac.a)(a);try{for(r.s();!(i=r.n()).done;){var o=i.value,c=o.getMolecularFormula(),l=c.formula,s=c.absoluteWeight,u=c.relativeWeight;e.push(new initMolecule({molfile:o.toMolfileV3(),svg:o.toSVG(150,150),mf:l,em:s,mw:u}))}}catch(j){r.e(j)}finally{r.f()}}else if(1===a.length){var d=a[0],b=d.getMolecularFormula(),p=b.formula,f=b.absoluteWeight,h=b.relativeWeight,m=initMolecule({molfile:d.toMolfileV3(),svg:d.toSVG(150,150),mf:p,em:f,mw:h,key:n}),g=e.findIndex((function(e){return e.key===n}));e.splice(g,1,m)}}(e.molecules,t,n)}bi.on("noiseFactorChanged",(function(e){kh=e}));var Ch=n(198);function handleAutoPeakPicking(e,t){var n;if(null===(n=e.activeSpectrum)||void 0===n?void 0:n.id){e.selectedTool=Qa.zoom.id,e.selectedOptionPanel=null;var a=e.activeSpectrum.index,i=e.data[a],r=Object(O.a)(e.xDomain,2),o=r[0],c=r[1],l=Object(He.i)(i.data.x,o),s=Object(He.i)(i.data.x,c),u=function autoPeakPicking(e,t){var n=t.minMaxRatio,a=t.maxNumberOfPeaks,i=t.noiseFactor,r=t.lookNegative,o=t.windowFromIndex,c=t.windowToIndex,l=Object(Ch.a)(e.data.re.map((function(e){return Math.abs(e)}))),s=e.data,u=s.re,d=s.x;void 0!==o&&void 0!==c&&(d=d.slice(o,c),u=u.slice(o,c));var b=Object(uc.e)({x:d,y:u},{lookNegative:r,noiseLevel:l*i,minMaxRatio:n,realTopDetection:!0,maxCriteria:!0,smoothY:!1,sgOptions:{windowSize:15,polynomial:3}});b.sort((function(e,t){return t.y-e.y})),a<b.length&&(b=b.slice(0,a));var p=getShiftX(e),f=(d[d.length-1]-d[0])/1e4;return b.reduce((function(t,n){var a,i=Object(ac.a)(e.peaks.values);try{for(i.s();!(a=i.n()).done;){var r=a.value.delta;if(Math.abs(n.x-r)<f)return t}}catch(o){i.e(o)}finally{i.f()}return t.push({id:generateID(),originDelta:n.x-p,delta:n.x,intensity:n.y,width:n.width}),t}),[])}(e.data[a],Object(v.a)(Object(v.a)({},t),{},{windowFromIndex:l,windowToIndex:s}));i.peaks.values=i.peaks.values.concat(u)}}function handleDeleteSpectraRanges(e,t){var n=t.colKey;!function deleteSpectraAnalysis(e,t,n){var a=Object.entries(e[n].values).reduce((function(e,n){return delete n[1][t],n[1]&&Object.keys(n[1]).length>0?(e[n[0]]=n[1],e):e}),{});delete e[n].options.columns[t],e[n].values=a,e[n].values=refreshCalculation(e,n),Xd()(e[n].values)&&(Ud[n]=[])}(e.spectraAnalysis,n,e.activeTab)}function handleSetcolumns(e,t){var n=t.payload;!function setColumn(e,t,n){var a=n.columns,i=n.code;init(e,t),e[t].options.code=i,e[t].options.columns=Object.values(a).reduce((function(e,t){var n=Object(v.a)({},t);return delete n.tempKey,e[t.tempKey]=n,e}),{});var r=e[t].options.columns,o=Object.entries(e[t].values).reduce((function(e,t){var n=Object(O.a)(t,2),i=n[0],r=n[1];return e[i]=Object.keys(a).reduce((function(e,t){var n=a[t].tempKey;return r[t]&&(e[n]=r[t]),e}),{}),e}),{});o=Object.entries(o).reduce((function(e,t){return e[t[0]]=Object.keys(r).reduce((function(e,n){var a=r[n].type===Zd;return e[n]=a?{colKey:n,value:calculate(r,o[t[0]],r[n].formula)}:Object(v.a)(Object(v.a)({},t[1][n]),{},{colKey:n}),e}),{}),e}),{}),e[t].values=o}(e.spectraAnalysis,e.activeTab,n)}function handleFiltercolumn(e,t){var n=t.payload,a=n.columnKey,i=n.valueKey;!function changeColumnValueKey(e,t,n,a){e[t].options.columns[n].valueKey=a,e[t].values=refreshCalculation(e,t)}(e.spectraAnalysis,e.activeTab,a,i)}function getReferenceShift(e,t){var n=t.from,a=t.to,i=t.nbPeaks,r=t.targetX,o=t.reference;if(o){var c=function References_getRange(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.nucleus,n=void 0===t?"1H":t,a=e.reference,i=void 0===a?"tms":a;if(!Kd[n])throw new Error("Nucleus not found: ",n);var r=Kd[n][i.toLowerCase()];if(!r)throw new Error("Reference not found: ",i);return{from:r.delta-.05,to:r.delta+.05,delta:r.delta,nbPeaks:r.nbPeaks}}({reference:o,nucleus:e.nucleus});n=c.from,a=c.to,i=c.nbPeaks,r=c.delta}var l=e.data,s=l.re,u=l.x;return Object(He.n)({x:u,y:s},{from:n,to:a},{nbPeaks:i,targetX:r})}function checkIsVisible2D(e){return!1!==e.display.isPositiveVisible||!1!==e.display.isNegativeVisible}function setVisible(e,t){2===e.info.dimension?(e.display.isPositiveVisible=t,e.display.isNegativeVisible=t,e.display.isVisible=checkIsVisible2D(e)):e.display.isVisible=t}var Sh={data:null,contours:null,tempData:null,xDomain:[],yDomain:[],yDomains:{},xDomains:{},originDomain:{},integralsYDomains:{},originIntegralYDomain:{},selectedTool:Qa.zoom.id,selectedFilter:null,selectedOptionPanel:null,activeTab:null,width:0,height:0,margin:{top:10,right:20,bottom:70,left:0},activeSpectrum:null,mode:"RTL",zoomFactor:{scale:1},integralZoomFactor:{scale:.5},molecules:[],verticalAlign:{flag:!1,stacked:!1,value:20},history:{past:[],present:null,future:[],hasUndo:!1,hasRedo:!1},pivot:0,isLoading:!1,preferences:{},baseLineZones:[],keysPreferences:{},displayerMode:jo.DM_1D,tabActiveSpectrum:{},spectraAnalysis:{},correlations:ff.Build.init({values:[],options:{tolerance:df,mf:""},state:{}}),displayerKey:"",ZoomHistory:{},overDisplayer:!1,exclusionZones:{}};function dispatchMiddleware(e){return function(t){switch(t.type){case Ot:if(t.payload){var n=t.payload,a=n.spectra,i=Object(fe.a)(n,["spectra"]);fromJSON(a).then((function(n){t.payload=Object(v.a)({spectra:n},i),e(t)}))}else e(t);break;case xt:var r=JSON.parse(t.files[0].binary.toString());fromJSON(r.spectra).then((function(n){t.payload=Object.assign(r,{spectra:n}),e(t)}));break;case St:var o,c=Object(ac.a)(t.files);try{for(c.s();!(o=c.n()).done;){var l=o.value;addBruker({display:{name:l.name}},l.binary).then((function(n){t.payload=n,e(t)}))}}catch(u){c.e(u)}finally{c.f()}break;case kt:(function nmredataToNmrium(e){return _nmredataToNmrium.apply(this,arguments)})(t.file).then((function(n){t.payload=n,e(t)}));break;case oa:var s=Nc.a.Molecule.fromMolfile(t.payload.mol.molfile);Object(uc.b)(s,{}).then((function(n){t.payload.fromMolfile=n,e(t)}));break;default:e(t)}}}var Dh=Object(gt.b)((function innerSpectrumReducer(e,t){switch(e.actionType=t.type,t.type){case Ot:return function initiate(e,t){e.displayerKey=generateID(),LoadActions_setData(e,t.payload),initZoom1DHandler(e.data),changeSpectrumVerticalAlignment(e,C()(e.preferences,"display.center",null),!0),ToolsActions_setActiveTab(e),e.isLoading=!1}(e,t);case Cn:return function setIsLoading(e,t){e.isLoading=t}(e,t.isLoading);case xt:return function handleLoadJsonFile(e,t){LoadActions_setData(e,t.payload),changeSpectrumVerticalAlignment(e,C()(e.preferences,"display.center",null),!0),ToolsActions_setActiveTab(e),initZoom1DHandler(e.data),e.isLoading=!1}(e,t);case yt:return function loadJcampFile(e,t){var n,a=addJcamps(t),i=Object(ac.a)(a);try{for(i.s();!(n=i.n()).done;){var r=n.value;e.data.push(r)}}catch(o){i.e(o)}finally{i.f()}changeSpectrumVerticalAlignment(e,!1,!0),ToolsActions_setActiveTab(e),initZoom1DHandler(e.data),e.isLoading=!1}(e,t.files);case Dt:return loadJDFFile(e,t.files);case Ct:return function handleLoadMOLFile(e,t){var n,a=Object(ac.a)(t);try{for(a.s();!(n=a.n()).done;){var i=n.value;addMolfile(e.molecules,i.binary.toString())}}catch(r){a.e(r)}finally{a.f()}e.isLoading=!1}(e,t.files);case St:return function handleLoadZIPFile(e,t){e.data=t.payload,ToolsActions_setActiveTab(e),initZoom1DHandler(e.data),e.isLoading=!1}(e,t);case kt:return function handleLoadNmredata(e,t){LoadActions_setData(e,t.payload),changeSpectrumVerticalAlignment(e,!1,!0),ToolsActions_setActiveTab(e),initZoom1DHandler(e.data),e.isLoading=!1}(e,t);case wt:return function addPeak(e,t){var n,a=Object(gt.a)(e);if((null===(n=e.activeSpectrum)||void 0===n?void 0:n.id)&&a){var i=e.activeSpectrum.index,r=getRange_getRange(e,{startX:t.x-10,endX:t.x+10}),o=Object(O.a)(r,2),c=o[0],l=o[1],s=lookupPeak(a.data[i].data,{from:c,to:l}),u=getShiftX(e.data[i]);if(s){var d={id:generateID(),originDelta:s.x-u,delta:s.x,intensity:s.y};e.data[i].peaks.values.push(d)}}}(e,t.mouseCoordinates);case Tt:return function addPeaks(e,t){var n=Object(gt.a)(e);if(e.activeSpectrum){var a=e.activeSpectrum.index,i=n.data[a],r=getRange_getRange(e,{startX:t.startX,endX:t.endX}),o=Object(O.a)(r,2),c=o[0],l=o[1];if(c!==l){var s=lookupPeak(i.data,{from:c,to:l}),u=getShiftX(e.data[a]);if(s&&!i.peaks.values.some((function(e){return e.delta===s.x}))){var d={id:generateID(),originDelta:s.x-u,delta:s.x,intensity:s.y};e.data[a].peaks.values.push(d)}}}}(e,t);case Mt:return function deletePeak(e,t){var n=e.activeSpectrum.index,a=Object(gt.a)(e);if(null==t)e.data[n].peaks.values=[];else{var i=a.data[n].peaks.values.findIndex((function(e){return e.id===t.id}));e.data[n].peaks.values.splice(i,1)}}(e,t.data);case Yt:return function addIntegral(e,t){var n,a=Object(gt.a)(e),i=getRange_getRange(e,{startX:t.startX,endX:t.endX}),r=Object(O.a)(i,2),o=r[0],c=r[1];if((null===(n=e.activeSpectrum)||void 0===n?void 0:n.id)&&a){var l=e.activeSpectrum,s=l.id,u=l.index,d=e.data[u],b=d.data,p=b.x,f=b.re,h=getShiftX(d),m={id:generateID(),originFrom:o-h,originTo:c-h,from:o,to:c,absolute:Object(He.p)({x:p,y:f},{from:o,to:c,reverse:!0}),kind:"signal"};if(d.integrals.values.push(m),updateIntegralIntegrals(d.integrals),1===d.integrals.values.length){var g=d.integrals.values[0],j=g.from,v=void 0===j?0:j,x=g.to,y=void 0===x?0:x,k=d.data,C=k.x,S=k.y,D=Object(He.o)({x:C,y:S},{from:v,to:y,reverse:!0}),w=Object(nt.c)(D.y);e.integralsYDomains[s]=w,e.originIntegralYDomain[s]=w,setIntegralZoom(e.integralZoomFactor.scale,e)}}}(e,t);case Zt:return function deleteIntegral(e,t){var n=Object(gt.a)(e),a=e.activeSpectrum.index,i=t.integralID,r=e.data[a];if(null==i)r.integrals.values=[];else{var o=n.data[a].integrals.values.findIndex((function(e){return e.id===i}));r.integrals.values.splice(o,1),updateIntegralIntegrals(r.integrals)}}(e,t);case wn:case an:return changeIntegral(e,t);case ln:return function handleChangeIntegralZoom(e,t){var n=t.deltaY,a=t.deltaMode;pt.wheel(n,a),setIntegralZoom(pt.getScale(),e)}(e,t);case Mn:return function handleChangeIntegralSum(e,t){var n;if(null===(n=e.activeSpectrum)||void 0===n?void 0:n.id){var a=e.activeSpectrum,i=a.index,r=a.id;e.data[i].integrals.options.sum=t,updateIntegralIntegrals(e.data[i].integrals),e.integralsYDomains||(e.integralsYDomains[r]=e.yDomains[r])}}(e,t.value);case Gn:return handleChangeIntegralsRaltiveValue(e,t);case Ft:return function setOriginalDomain(e,t){e.originDomain=t}(e,t.domain);case Et:return function setXDomain(e,t){e.xDomain=t}(e,t.xDomain);case Pt:return function setYDomain(e,t){e.yDomain=t}(e,t.yDomain);case _t:return function setWidth(e,t){e.width=t}(e,t.width);case It:return function handleSetDimensions(e,t,n){e.width=t,e.height=n}(e,t.width,t.height);case Nt:return function setSelectedTool(e,t){(null===e||void 0===e?void 0:e.data.length)>0&&(t?(t!==e.selectedTool&&resetTool(e,!1),e.selectedTool=t,Qa[t].hasOptionPanel&&(e.selectedOptionPanel=t),Qa[t].isFilter&&setFilterChanges(e,t)):resetTool(e,!1),setMargin(e))}(e,t.selectedTool);case Sn:return resetSelectedTool(e);case kn:return function setSelectedOptionPanel(e,t){e.selectedOptionPanel=t}(e,t.selectedOptionPanel);case zt:return function zoomOut(e,t){if((null===e||void 0===e?void 0:e.data.length)>0){var n=t.zoomType,a=t.trackID,i=yh.getInstance(e.ZoomHistory,e.activeTab);if(e.displayerMode===jo.DM_1D)switch(n){case ft:e.xDomain=e.originDomain.xDomain;break;case ht:setZoom(e,.8);break;case mt:var r=i.pop();e.xDomain=r?r.xDomain:e.originDomain.xDomain,setZoom(e,.8);break;default:e.xDomain=e.originDomain.xDomain,setZoom(e,.8)}else{var o=e.originDomain,c=o.xDomain,l=o.yDomain,s=o.yDomains;switch(a){case ho.TOP_1D:var u=e.tabActiveSpectrum[e.activeTab.split(",")[0]].id;e.xDomain=c,e.yDomains[u]=s[u];break;case ho.LEFT_1D:var d=e.tabActiveSpectrum[e.activeTab.split(",")[1]].id;e.yDomain=l,e.yDomains[d]=s[d];break;case ho.CENTER_2D:var b=i.pop();e.xDomain=b?b.xDomain:c,e.yDomain=b?b.yDomain:l;break;default:e.xDomain=c,e.yDomain=l,e.yDomains=s}}}}(e,t);case At:return function shiftSpectrumAlongXAxis(e,t){var n;if(null===(n=e.activeSpectrum)||void 0===n?void 0:n.id){var a=e.activeSpectrum.index;applyFilter(e.data[a],[{name:$a.shiftX.id,options:t}]),updateXShift(e.data[a]),resetSelectedTool(e),setDataBy1DFilter(e.data[a]),setDomain(e)}}(e,t.shiftValue);case bn:return function applyZeroFillingFilter(e,t){var n;if(null===(n=e.activeSpectrum)||void 0===n?void 0:n.id){var a=e.activeSpectrum.index,i=[{name:$a.zeroFilling.id,options:t.zeroFillingSize},{name:$a.lineBroadening.id,options:t.lineBroadeningValue}];applyFilter(e.data[a],i),resetSelectedTool(e),setDataBy1DFilter(e.data[a]),setDomain(e),setMode(e)}}(e,t.value);case pn:return function applyFFTFilter(e){var t;if(null===(t=e.activeSpectrum)||void 0===t?void 0:t.id){var n=e.activeSpectrum.index;applyFilter(e.data[n],[{name:$a.fft.id,options:{}}]),resetSelectedTool(e),setDataBy1DFilter(e.data[n]),changeSpectrumVerticalAlignment(e,!1,!0),setDomain(e),setMode(e)}}(e);case hn:return function applyManualPhaseCorrectionFilter(e,t){var n;if(null===(n=e.activeSpectrum)||void 0===n?void 0:n.id){var a=e.activeSpectrum.index,i=t.ph0,r=t.ph1,o=e.data[a],c=xh(o.data.x,e.pivot);i-=r*o.data.x.indexOf(c)/o.data.y.length,applyFilter(e.data[a],[{name:$a.phaseCorrection.id,options:{ph0:i,ph1:r}}]),resetSelectedTool(e),setDataBy1DFilter(e.data[a]),e.tempData=null,setDomain(e)}}(e,t.value);case mn:return function applyAutoPhaseCorrectionFilter(e){var t;if(null===(t=e.activeSpectrum)||void 0===t?void 0:t.id){var n=e.activeSpectrum.index,a=e.tempData[n],i=a.data,r=autoPhaseCorrection_apply({data:{x:i.x,re:i.y,im:i.im},info:a.info}),o=r.data,c=r.ph0,l=r.ph1,s=o.im,u=o.re;e.tempData[n].data.im=s,e.tempData[n].data.y=u,applyFilter(e.data[n],[{name:$a.phaseCorrection.id,options:{ph0:c,ph1:l}}]),resetSelectedTool(e),setDataBy1DFilter(e.data[n]),e.tempData=null,setDomain(e)}}(e);case gn:return function applyAbsoluteFilter(e){var t;if(null===(t=e.activeSpectrum)||void 0===t?void 0:t.id){var n=e.activeSpectrum.index;applyFilter(e.data[n],[{name:$a.absolute.id,options:{}}]),resetSelectedTool(e),setDataBy1DFilter(e.data[n]),e.tempData=null,setDomain(e)}}(e);case fn:return function calculateManualPhaseCorrection(e,t){var n=e.tempData,a=e.activeSpectrum.index,i=n[a],r=i.data,o=r.x,c=r.y,l=r.im,s=i.info,u=t.ph0,d=t.ph1,b=xh(n[a].data.x,e.pivot),p={data:{x:o,re:c,im:l},info:s};phaseCorrection_apply(p,{ph0:u-=d*n[a].data.x.indexOf(b)/c.length,ph1:d});var f=p.data,h=f.im,m=f.re;e.tempData[a].data.im=h,e.tempData[a].data.y=m}(e,t.value);case sn:return function FiltersActions_enableFilter(e,t,n){var a;if(null===(a=e.activeSpectrum)||void 0===a?void 0:a.id){var i,r,o=e.activeSpectrum.index;FiltersManager_enableFilter(e.data[o],t,n),1===(null===(i=e.data[o].info)||void 0===i?void 0:i.dimension)?(updateXShift(e.data[o]),setDataBy1DFilter(e.data[o])):2===(null===(r=e.data[o].info)||void 0===r?void 0:r.dimension)&&updateShift(e.data[o]),resetSelectedTool(e),setDomain(e),setMode(e);var c=yh.getInstance(e.ZoomHistory,e.activeTab).getLast();c&&(e.xDomain=c.xDomain,e.yDomain=c.yDomain)}}(e,t.id,t.checked);case un:return function FiltersActions_deleteFilter(e,t){var n,a=t.payload.id;if(null===(n=e.activeSpectrum)||void 0===n?void 0:n.id){var i,r,o=e.activeSpectrum.index;deleteFilter(e.data[o],a),1===(null===(i=e.data[o].info)||void 0===i?void 0:i.dimension)?(updateXShift(e.data[o]),setDataBy1DFilter(e.data[o])):2===(null===(r=e.data[o].info)||void 0===r?void 0:r.dimension)&&updateShift(e.data[o]),resetSelectedTool(e),setDomain(e),setMode(e)}}(e,t);case dn:return function deleteSpectraFilter(e,t){var n=t.payload.filterType;if(e.activeTab){var a,i=Object(ac.a)(e.data);try{var r=function _loop(){var t,i,r=a.value;nucluesToString(null===r||void 0===r||null===(t=r.info)||void 0===t?void 0:t.nucleus)===e.activeTab&&((null===(i=r.filters)||void 0===i?void 0:i.filter((function(e){return e.name===n})))||[]).forEach((function(e){var t,n;deleteFilter(r,e.id),1===(null===(t=r.info)||void 0===t?void 0:t.dimension)?(updateXShift(r),setDataBy1DFilter(r)):2===(null===(n=r.info)||void 0===n?void 0:n.dimension)&&updateShift(r)}))};for(i.s();!(a=i.n()).done;)r()}catch(o){i.e(o)}finally{i.f()}resetSelectedTool(e),setDomain(e),setMode(e)}}(e,t);case Vn:return function filterSnapshotHandler(e,t){var n;if(null===(n=e.activeSpectrum)||void 0===n?void 0:n.id){var a,i,r=e.activeSpectrum.index,o=e.data[r];if(t.id){var c=o.filters.findIndex((function(e){return e.id===t.id})),l=o.filters.slice(0,c+1);reapplyFilters(o,l)}else reapplyFilters(o);1===(null===(a=o.info)||void 0===a?void 0:a.dimension)?(updateXShift(o),setDataBy1DFilter(o)):2===(null===(i=o.info)||void 0===i?void 0:i.dimension)&&updateShift(o),resetSelectedTool(e),setDomain(e),setMode(e)}}(e,t);case ua:return function handleMultipleSpectraFilter(e,t){if(e.data&&e.data.length>0){var n,a=Object(ac.a)(e.data);try{for(a.s();!(n=a.n()).done;){var i,r=n.value;1===(null===(i=r.info)||void 0===i?void 0:i.dimension)&&r.info.nucleus===e.activeTab&&Array.isArray(t.payload)&&(applyFilter(r,t.payload.map((function(t){if(t.name===$a.equallySpaced.id){var n=e.exclusionZones[e.activeTab]||[];return Object(v.a)(Object(v.a)({},t),{},{options:Object(v.a)(Object(v.a)({},t.options),{},{exclusions:n})})}return t}))),r.data.y=r.data.re)}}catch(o){a.e(o)}finally{a.f()}}setDomain(e)}(e,t);case Ht:return function handleSpectrumVisibility(e,t){if(Array.isArray(t.id)){var n=t.id;if(0===n.length){var a,i=Object(ac.a)(e.data);try{for(i.s();!(a=i.n()).done;)setVisible(a.value,!1)}catch(s){i.e(s)}finally{i.f()}}else{var r,o=Object(ac.a)(e.data);try{for(o.s();!(r=o.n()).done;){var c=r.value;n.includes(c.id)?setVisible(c,!0):setVisible(c,!1)}}catch(s){o.e(s)}finally{o.f()}}}else{var l=e.data.findIndex((function(e){return e.id===t.id}));e.data[l].display[t.key]=t.value,2===e.data[l].info.dimension&&(e.data[l].display.isVisible=checkIsVisible2D(e.data[l]))}}(e,t);case Bt:return function handleChangePeaksMarkersVisibility(e,t){var n,a=Object(ac.a)(e.data);try{var i=function _loop(){var e,a=n.value;1===(null===(e=a.info)||void 0===e?void 0:e.dimension)&&t.some((function(e){return e.id===a.id}))?a.display.isPeaksMarkersVisible=!0:a.display.isPeaksMarkersVisible=!1};for(a.s();!(n=a.n()).done;)i()}catch(r){a.e(r)}finally{a.f()}}(e,t.data);case Vt:return function SpectrumsActions_handleChangeActiveSpectrum(e,t){var n=!1;if(t){var a=e.data.findIndex((function(e){return e.id===t.id})),i=e.data.findIndex((function(t){var n;return t.id===(null===(n=e.activeSpectrum)||void 0===n?void 0:n.id)}));if(-1!==a){var r=e.data[a];r.display.isVisible=!0,n=-1!==i?e.data[i].info.isFid!==r.info.isFid:r.info.isFid||!1}t=Object(v.a)(Object(v.a)({},t),{},{index:a}),e.activeSpectrum=t,e.tabActiveSpectrum[e.activeTab]=t}else e.activeSpectrum=null,e.tabActiveSpectrum[e.activeTab]=null,n=!1;n&&(setDomain(e),setMode(e))}(e,t.data);case Xt:return function handleChangeSpectrumColor(e,t){var n=t.id,a=t.color,i=t.key,r=Object(gt.a)(e).data.findIndex((function(e){return e.id===n}));-1!==r&&(e.data[r].display[i]=a)}(e,t.data);case Lt:return function changeSpectrumSetting(e,t){var n=t.id,a=t.display,i=Object(gt.a)(e).data.findIndex((function(e){return e.id===n}));-1!==i&&(e.data[i].display=a)}(e,t);case ta:return function alignSpectraHandler(e,t){if(e.data&&e.data.length>0){var n,a=Object(ac.a)(e.data);try{for(a.s();!(n=a.n()).done;){var i,r,o=n.value;if(1===(null===(i=o.info)||void 0===i?void 0:i.dimension)&&o.info.nucleus===e.activeTab&&!(null===(r=o.info)||void 0===r?void 0:r.isFid)){var c=getReferenceShift(o,Object(v.a)({},t.payload));applyFilter(o,[{name:$a.shiftX.id,options:c}])}}}catch(l){a.e(l)}finally{a.f()}}setDomain(e),setMode(e)}(e,t);case Ut:return function handleToggleRealImaginaryVisibility(e){if(null!=e.activeSpectrum){var t=e.activeSpectrum.index;if(e.data[t].display.isRealSpectrumVisible=!e.data[t].display.isRealSpectrumVisible,e.data[t].display.isRealSpectrumVisible){var n=e.data[t].data.re;null!==n&&void 0!==n&&(e.data[t].data.y=n)}else{var a=e.data[t].data.im;null!==a&&void 0!==a&&(e.data[t].data.y=a)}setDomain(e)}}(e);case Kt:return function ToolsActions_handleZoom(e,t){var n=t.deltaY,a=t.deltaMode,i=t.trackID;if(i)switch(i){case ho.TOP_1D:Zoom_wheel(n,a,e,getSpectrumID(e,0)),setZoom1D(e,e.margin.top,10,0);break;case ho.LEFT_1D:Zoom_wheel(n,a,e,getSpectrumID(e,1)),setZoom1D(e,e.margin.left,10,1)}else Zoom_wheel(n,a,e),setZoom(e)}(e,t);case ca:return function setSpectraSameTopHandler(e){e.displayerMode===jo.DM_1D&&(e.originDomain.yDomains=e.originDomain.originYDomains,setZoom(e,.8))}(e);case la:return function resetSpectraScale(e){e.displayerMode===jo.DM_1D&&(e.yDomains=Object.keys(e.yDomains).reduce((function(t,n){return t[n]=e.originDomain.yDomain,t}),{}),e.originDomain.yDomains=e.yDomains,e.yDomain=e.originDomain.yDomain)}(e);case nn:return function handleChangeSpectrumDisplayMode(e){var t=Object(gt.a)(e),n=e.activeSpectrum,a=e.height,i=e.activeTab,r=20;if(n){var o=n.index;t.data[o].info.isFid&&(r=a/2)}if(e.verticalAlign.flag=!e.verticalAlign.stacked,e.verticalAlign.stacked=!e.verticalAlign.stacked,e.verticalAlign.stacked){var c=t.data.filter((function(e){return e.info.nucleus===i})).length;e.verticalAlign.value=Math.floor(a/(c+2))}else e.verticalAlign.value=r}(e);case Wt:return function addMoleculeHandler(e,t){addMolfile(e.molecules,t)}(e,t.molfile);case Gt:return setMoleculeHandler(e,t.molfile,t.key);case qt:return function deleteMoleculeHandler(e,t){var n=t.payload,a=n.key,i=n.assignmentData;e.displayerMode===jo.DM_1D&&handleUnlinkRange(e,{payload:{assignmentData:i,rangeData:null}}),e.displayerMode===jo.DM_2D&&handleUnlinkZone(e,{payload:{assignmentData:i,zoneData:null}});var r=e.molecules.findIndex((function(e){return e.key===a}));e.molecules.splice(r,1)}(e,t);case oa:return function predictSpectraFromMolculeHandler(e,t){var n=t.payload,a=n.fromMolfile,i=n.options,r=Object(uc.d)(a.signals,{}),o=r.x,c=r.y,l=null;if(i.spectra["1h"]){var s=initiateDatum1D({data:{x:o,im:null,re:c},info:{nucleus:"1H"}});l=s.id,s.ranges.values=mapRanges(a.ranges,s),updateIntegralRanges(s),e.data.push(s);var u={id:l,index:e.data.length-1};e.tabActiveSpectrum["1H"]=u,e.activeSpectrum=u}ToolsActions_setActiveTab(e),initZoom1DHandler(e.data),setZoom(e,.9,l),e.isLoading=!1}(e,t);case Qt:return function handleSetMF(e,t){var n=Object(gt.a)(e),a=n.data,i=n.correlations,r=t.mf;""!==i.options.mf&&i.options.mf===r||(e.correlations=ff.Build.build(a,Object(v.a)(Object(v.a)({},i.options),{},{mf:r}),mf()(i.values)))}(e,t.payload);case en:return function handleSetTolerance(e,t){var n=Object(gt.a)(e),a=n.data,i=n.correlations,r=t.tolerance;e.correlations=ff.Build.build(a,Object(v.a)(Object(v.a)({},i.options),{},{tolerance:r}),mf()(i.values))}(e,t.payload);case Jt:return function handleSetCorrelation(e,t){var n=Object(gt.a)(e).correlations,a=t.id,i=t.correlation;e.correlations=ff.CorrelationUtilities.setCorrelation(n,a,i),handleUpdateCorrelations(e)}(e,t.payload);case $t:return function handleSetCorrelations(e,t){var n=t.ids,a=t.correlations;n.forEach((function(t,n){var i=e.correlations;e.correlations=ff.CorrelationUtilities.setCorrelation(i,t,a[n])})),handleUpdateCorrelations(e)}(e,t.payload);case tn:return function handleDeleteSpectra(e,t){var n=e.activeTab,a=Object(gt.a)(e);if(t.id){var i=a.data.findIndex((function(e){return e.id===t.id}));e.data.splice(i,1)}else e.data.forEach((function(t,n){e.data.splice(n,1)}));e.activeSpectrum=null,ToolsActions_setActiveTab(e,n,!0)}(e,t);case"SET_INTEGRAL_Y_DOMAIN":return function handleChangeIntegralYDomain(e,t){var n=e.activeSpectrum;n&&(e.integralsYDomains[n.id]=t)}(e,t.yDomain);case rn:return function handleBrushEnd(e,t){var n=e.displayerMode===jo.DM_2D,a=getXScale(e),i=n?get2DYScale(e):getYScale(e),r=a.invert(t.startX),o=a.invert(t.endX),c=i.invert(t.startY),l=i.invert(t.endY),s=r>o?[o,r]:[r,o],u=c>l?[l,c]:[c,l],d=yh.getInstance(e.ZoomHistory,e.activeTab);if(e.displayerMode===jo.DM_2D){switch(t.trackID){case ho.CENTER_2D:e.xDomain=s,e.yDomain=u;break;case ho.TOP_1D:e.xDomain=s;break;case ho.LEFT_1D:e.yDomain=u}d&&d.push({xDomain:s,yDomain:u})}else e.xDomain=s,d&&d.push({xDomain:s,yDomain:u})}(e,t);case jn:return function setVerticalIndicatorXPosition(e,t){var n=getXScale(e);e.pivot=n.invert(t)}(e,t.position);case Dn:return function setSpectrumsVerticalAlign(e){changeSpectrumVerticalAlignment(e,!e.verticalAlign.flag)}(e);case vn:return handleAutoPeakPicking(e,t.options);case xn:return handleAutoZonesDetection(e,t.options);case On:return function handleAutoRangesDetection(e,t){var n;if(null===(n=e.activeSpectrum)||void 0===n?void 0:n.id){var a=e.activeSpectrum.index,i=e.data[a],r=Object(O.a)(e.xDomain,2),o=r[0],c=r[1],l=Object(He.i)(i.data.x,o),s=Object(He.i)(i.data.x,c);detectRanges(i,Object(v.a)(Object(v.a)({},t),{},{windowFromIndex:l,windowToIndex:s})),handleOnChangeRangesData(e)}}(e,t.options);case Rn:return handleAddRange(e,t);case yn:return function handleDeleteRange(e,t){var n,a=Object(gt.a)(e);if(null===(n=a.activeSpectrum)||void 0===n?void 0:n.id){var i=a.activeSpectrum.index,r=t.payload,o=r.id,c=r.assignmentData,l=e.data[i];if(o){var s=l.ranges.values.find((function(e){return e.id===o}));mr(c,[s]);var u=getRangeIndex(a,i,o);l.ranges.values.splice(u,1)}else mr(c,l.ranges.values),l.ranges.values=[];updateIntegralRanges(e.data[i]),handleOnChangeRangesData(e)}}(e,t);case In:return handleResizeRange(e,t);case Nn:return function handleChangeRangeSum(e,t){var n;if(null===(n=e.activeSpectrum)||void 0===n?void 0:n.id){var a=e.activeSpectrum.index;e.data[a].ranges.options.sum=t,updateIntegralRanges(e.data[a])}}(e,t.value);case Xn:return handleChangeRangeRaltiveValue(e,t);case Yn:return function handleChangeRangeSignalValue(e,t){var n,a=t.payload,i=a.rangeID,r=a.signalID,o=a.value;if(null===(n=e.activeSpectrum)||void 0===n?void 0:n.id){var c=e.activeSpectrum.index,l=function changeRangeSignal(e,t,n,a){var i=0,r=e.ranges.values.findIndex((function(e){return e.id===t}));if(-1!==r){var o=e.ranges.values[r].signal.findIndex((function(e){return e.id===n}));i=a-e.ranges.values[r].signal[o].delta,e.ranges.values[r].signal[o].delta=a}return i}(e.data[c],i,r,o);applyFilter(e.data[c],[{name:$a.shiftX.id,options:l}]),updateXShift(e.data[c]),handleOnChangeRangesData(e),setDomain(e)}}(e,t);case Zn:return function handleChangeRangeSignalKind(e,t){var n,a=Object(gt.a)(e);if(null===(n=a.activeSpectrum)||void 0===n?void 0:n.id){var i=a.activeSpectrum.index,r=t.payload,o=r.rowData,c=r.value,l=getRangeIndex(a,i,o.id),s=e.data[i].ranges.values[l];(null===s||void 0===s?void 0:s.signal)&&(s.signal[o.tableMetaInfo.signalIndex].kind=c,s.kind=lr.includes(c)?sr:ur,updateIntegralRanges(e.data[i]),handleOnChangeRangesData(e))}}(e,t);case Un:return function handleSaveEditedRange(e,t){var n,a=Object(gt.a)(e);if(null===(n=a.activeSpectrum)||void 0===n?void 0:n.id){var i=a.activeSpectrum.index,r=t.payload,o=r.editedRowData,c=r.assignmentData,l=fr(o);delete l.tableMetaInfo,mr(c,l);var s=getRangeIndex(a,i,l.id);e.data[i].ranges.values[s]=l,updateIntegralRanges(e.data[i]),handleOnChangeRangesData(e)}}(e,t);case Kn:return handleUnlinkRange(e,t);case Wn:return function handleSetDiaIDRange(e,t){var n;if(null===(n=e.activeSpectrum)||void 0===n?void 0:n.id){var a=e.activeSpectrum.index,i=t.payload,r=i.rangeData,o=i.diaID,c=i.signalIndex,l=getRangeIndex(e,a,r.id),s=e.data[a].ranges.values[l];void 0===c?s.diaID=o:s.signal[c].diaID=o,s.pubIntegral=dr(s)}}(e,t);case"SET_PREFERENCES":return function handelSetPreferences(e,t){var n=t.type,a=t.values,i=C()(e.preferences,"panels",{});e.preferences.panels=Object(v.a)(Object(v.a)({},i),{},Object(ue.a)({},n,a))}(e,t.data);case Tn:return function handelSetActiveTab(e,t){t&&ToolsActions_setActiveTab(e,t)}(e,t.tab);case An:return function handleAddBaseLineZone(e,t){var n=t.from,a=t.to,i=getXScale(e),r=i.invert(n),o=i.invert(a),c=[];c=r>o?[o,r]:[r,o];var l=e.baseLineZones.slice();l.push({id:generateID(),from:c[0],to:c[1]}),e.baseLineZones=l}(e,t.zone);case En:return function handleDeleteBaseLineZone(e,t){var n=Object(gt.a)(e);e.baseLineZones=n.baseLineZones.filter((function(e){return e.id!==t}))}(e,t.id);case da:return function handleAddExclusionZone(e,t){var n=t.payload,a=n.from,i=n.to,r=getXScale(e),o=r.invert(a),c=r.invert(i),l=[];l=o>c?[c,o]:[o,c];var s={id:generateID(),from:l[0],to:l[1]};e.exclusionZones[e.activeTab]?e.exclusionZones[e.activeTab].push(s):e.exclusionZones[e.activeTab]=[s]}(e,t);case ba:return function handleDeleteExclusionZone(e,t){var n=t.payload.id,a=e.exclusionZones[e.activeTab].findIndex((function(e){return e.id===n}));e.exclusionZones[e.activeTab].splice(a,1)}(e,t);case Pn:return function handleBaseLineCorrectionFilter(e,t){var n;if(null===(n=e.activeSpectrum)||void 0===n?void 0:n.id){var a=e.activeSpectrum.index;applyFilter(e.data[a],[{name:$a.baselineCorrection.id,options:Object(v.a)({zones:e.baseLineZones},t.options)}]),e.baseLineZones=[];var i=e.xDomain.slice();resetSelectedTool(e),setDataBy1DFilter(e.data[a]),setDomain(e),e.xDomain=i}}(e,t);case Fn:return function setKeyPreferencesHandler(e,t){var n=Object(gt.a)(e),a=n.activeTab,i=n.data,r=n.activeSpectrum,o=n.zoomFactor,c=n.xDomain,l=n.xDomains,s=n.yDomain,u=n.yDomains,d=n.originDomain,b=n.margin,p=n.displayerMode,f=n.tabActiveSpectrum;if(a){var h=Hp("nucleus")(i),m=p===jo.DM_2D?h[a].reduce((function(e,t){return e[t.id]=t.processingController.getLevel(),e}),{}):null;e.keysPreferences[t]={activeTab:a,activeSpectrum:r,displayerMode:p,tabActiveSpectrum:f,zoomFactor:o,xDomain:c,xDomains:l,yDomain:s,yDomains:u,originDomain:d,level:m,margin:b,data:h[a].reduce((function(e,t){return e[t.id]={display:{color:t.display.color,isVisible:t.display.isVisible,isPeaksMarkersVisible:t.display.isPeaksMarkersVisible}},e}),{})}}}(e,t.keyCode);case _n:return function applyKeyPreferencesHandler(e,t){var n=Object(gt.a)(e),a=n.keysPreferences[t];if(a)if(e.activeTab=a.activeTab,n.data.forEach((function(t,n){nucluesToString(t.info.nucleus)===a.activeTab&&(e.data[n].display=Object.assign(mf()(t.display),a.data[t.id].display))})),e.displayerMode=a.displayerMode,e.tabActiveSpectrum=a.tabActiveSpectrum,e.activeSpectrum=a.activeSpectrum,e.margin=a.margin,setDomain(e),e.xDomain=a.xDomain,e.xDomains=a.xDomains,e.yDomain=a.yDomain,e.originDomain=a.originDomain,e.yDomains=a.yDomains,e.displayerMode===jo.DM_2D)for(var i=function _loop(){var t=o[r],i=a.level[t],c=i.levelPositive,l=i.levelNegative,s=n.data.findIndex((function(e){return e.id===t})),u=e.data[s].processingController;u.setLevel(c,l),e.contours[t]=u.drawContours()},r=0,o=Object.keys(a.level);r<o.length;r++)i();else setZoom(e,a.zoomFactor.scale)}(e,t.keyCode);case Ln:return function levelChangeHandler(e,t){var n=t.deltaY,a=t.shiftKey;try{var i;if(null===(i=e.activeSpectrum)||void 0===i?void 0:i.id){var r=e.activeSpectrum,o=r.index,c=r.id,l=e.data[o].processingController;a?l.shiftWheel(n):l.wheel(n);var s=Object.freeze(l.drawContours());e.contours[c]=s}}catch(u){console.log(u)}}(e,t);case zn:return add2dZoneHandler(e,t);case Hn:return function handleDeleteZone(e,t){var n,a=Object(gt.a)(e);if(null===(n=a.activeSpectrum)||void 0===n?void 0:n.id){var i=a.activeSpectrum.index,r=t.payload,o=r.id,c=r.assignmentData;if(o){var l=e.data[i].zones.values.find((function(e){return e.id===o}));Ro(c,[l]);var s=getZoneIndex(a,i,o);e.data[i].zones.values.splice(s,1)}else Ro(c,e.data[i].zones.values),e.data[i].zones.values=[];handleOnChangeZonesData(e)}}(e,t);case Bn:return function addMissingProjectionHander(e,t){var n,a=Object(gt.a)(e),i=t.nucleus;if(null===(n=e.activeSpectrum)||void 0===n?void 0:n.id){var r,o=e.activeSpectrum.index,c=Object(ac.a)(i);try{for(c.s();!(r=c.n()).done;){var l=r.value,s=Datum2D_getMissingProjection(a.data[o],l);e.data.push(s)}}catch(u){c.e(u)}finally{c.f()}setTab(e,Hp("nucleus")(e.data),e.activeTab,!0),setDomain(e),setMode(e)}}(e,t);case cn:return function handelResetDomain(e){var t=e.originDomain,n=t.xDomain,a=t.yDomain,i=t.xDomains,r=t.yDomains;e.xDomain=n,e.yDomain=a,e.xDomains=i,e.yDomains=r}(e);case na:return function changeZoneSignalDelta(e,t){var n,a=t.payload,i=a.zoneID,r=a.signal;if(null===(n=e.activeSpectrum)||void 0===n?void 0:n.id){var o=e.activeSpectrum.index,c=function changeZoneSignal(e,t,n){var a=e.zones.values.findIndex((function(e){return e.id===t}));if(-1!==a){var i=e.zones.values[a].signal.findIndex((function(e){return e.id===n.id}));if(-1!==i){var r=e.zones.values[a].signal[i];return{xShift:(null===n||void 0===n?void 0:n.x)||0===(null===n||void 0===n?void 0:n.x)?n.x-r.x.delta:0,yShift:(null===n||void 0===n?void 0:n.y)||0===(null===n||void 0===n?void 0:n.y)?n.y-r.y.delta:0}}}return{xShift:0,yShift:0}}(e.data[o],i,r),l=c.xShift,s=c.yShift,u=[];0!==l&&u.push({name:$a.shift2DX.id,options:l}),0!==s&&u.push({name:$a.shift2DY.id,options:s}),applyFilter(e.data[o],u),updateShift(e.data[o]),setDomain(e),handleOnChangeZonesData(e)}}(e,t);case aa:return function handleChangeZoneSignalKind(e,t){var n,a=Object(gt.a)(e);if(null===(n=a.activeSpectrum)||void 0===n?void 0:n.id){var i=a.activeSpectrum.index,r=t.payload,o=r.rowData,c=r.value,l=getZoneIndex(a,i,o.id),s=e.data[i].zones.values[l];s.signal[o.tableMetaInfo.signalIndex].kind=c,s.kind=lr.includes(c)?sr:ur,handleOnChangeZonesData(e)}}(e,t);case ia:return handleUnlinkZone(e,t);case ra:return function handleSetDiaIDZone(e,t){var n,a=Object(gt.a)(e);if(null===(n=a.activeSpectrum)||void 0===n?void 0:n.id){var i=a.activeSpectrum.index,r=t.payload,o=r.zoneData,c=r.diaID,l=r.axis,s=r.signalIndex,u=getZoneIndex(a,i,o.id),d=e.data[i].zones.values[u];void 0===s?d[l].diaID=c:d.signal[s][l].diaID=c,d[l].pubIntegral=Fo(d,l)}}(e,t);case qn:return function SpectraAanalysisAction_analyzeSpectra(e,t){var n=getRange_getRange(e,t),a=Object(O.a)(n,2),i=a[0],r=a[1];analyzeSpectra(e.data,e.spectraAnalysis,{from:i,to:r,nucleus:e.activeTab})}(e,t);case Jn:return handleDeleteSpectraRanges(e,t);case $n:return function handleResizeSpectraRange(e,t){var n=t.payload,a=n.columnKey,i=n.from,r=n.to;analyzeSpectra(e.data,e.spectraAnalysis,{from:i,to:r,nucleus:e.activeTab,columnKey:a})}(e,t);case Qn:return handleSetcolumns(e,t);case ea:return handleFiltercolumn(e,t);case"undo":return function handleHistoryUndo(e){var t=e.history,n=t.past,a=t.present,i=t.future,r=n[n.length-1],o=n.slice(0,n.length-1),c=[a].concat(Object(Li.a)(i)),l=0!==c.length,s=0!==n.length,u=getDomain(e.data),d={past:o,present:r,future:c,hasRedo:l,hasUndo:s};e.xDomain=u.xDomain,e.yDomain=u.yDomain,e.originDomain=u,e.history=d}(e);case"redo":return function handleHistoryRedo(e){var t=e.history,n=(t.future[0],t.future.shift());t.past.push(t.present),t.present=n,t.hasUndo=!0,t.hasRedo=t.future.length>0,setDomain(e.data)}(e);case"reset":return function handleHistoryReset(e,t){e.history={past:[],present:t,future:[],hasRedo:!1,hasUndo:!1}}(e,t);case sa:return function setIsOverDisplayer(e,t){e.overDisplayer=t.payload}(e,t);default:return}}));var wh,Th=function ToolBarWrapper(e){var t=function Wrapper(t){var n=useChartData(),a=n.data,i=n.activeSpectrum,r=n.verticalAlign,o=n.displayerMode,c=Object(S.useMemo)((function(){if(a&&i&&i.id){var e=a.find((function(e){return e.id===i.id}));return null!==e&&void 0!==e?{info:e.info,spectrumsCount:e.length}:{}}return{}}),[i,a]).info,l=void 0===c?{}:c,s=t.forwardedRef,u=Object(fe.a)(t,["forwardedRef"]);return Object(I.jsx)(e,Object(v.a)(Object(v.a)({},u),{},{info:l,activeSpectrum:i,verticalAlign:r,displayerMode:o,ref:s}))};return Object(S.memo)(Object(S.forwardRef)((function(e,n){return Object(I.jsx)(t,Object(v.a)(Object(v.a)({},e),{},{forwardedRef:n}))})))},Mh=Object(y.a)(wh||(wh=Object(x.a)(["\n  display: flex;\n  flex-direction: column;\n  width: 450px;\n  padding: 5px;\n  button:focus {\n    outline: none;\n  }\n  .header {\n    height: 24px;\n    border-bottom: 1px solid #f0f0f0;\n    display: flex;\n    span {\n      color: #464646;\n      font-size: 15px;\n      flex: 1;\n    }\n\n    button {\n      background-color: transparent;\n      border: none;\n      svg {\n        height: 16px;\n      }\n    }\n  }\n  .container {\n    display: flex;\n    margin: 30px 5px;\n    input,\n    button {\n      padding: 5px;\n      border: 1px solid gray;\n      border-radius: 5px;\n      height: 36px;\n      margin: 2px;\n    }\n    input {\n      flex: 10;\n    }\n    button {\n      flex: 2;\n      color: white;\n      background-color: gray;\n    }\n  }\n"]))),Ah=["dx","jdx"];function LoadJCAMPModal(e){var t=e.onLoadClick,n=e.onClose,a=e.startLoading,i=Object(S.useRef)(),r=Object(S.useCallback)((function(){var e=i.current.value,n=function extractFileMetaFromPath(e){var t=e.replace(/^.*[\\\/]/,"").split(".");return{name:t[0].toLowerCase(),extension:t[1].toLowerCase()}}(e),r=n.name,o=n.extension;Ah.includes(o)?(a(),function loadFile(e){return _loadFile.apply(this,arguments)}(e,{asBuffer:!0}).then((function(n){t({binary:n,name:r,extension:o,jcampURL:e})}))):t(null)}),[t,a]);return Object(ye.c)("div",{css:Mh,children:[Object(ye.c)("div",{className:"header handle",children:[Object(ye.b)("span",{children:"Load JCAMP Dialog"}),Object(ye.b)($e,{onClick:n})]}),Object(ye.c)("div",{className:"container",children:[Object(ye.b)("input",{ref:i,type:"text",placeholder:"Enter URL to JCAMP-DX file"}),Object(ye.b)("button",{type:"button",onClick:r,children:"Load"})]})]})}LoadJCAMPModal.defaultProps={onLoadButtonClick:function onLoadButtonClick(){return null},onClose:function onClose(){return null},startLoading:function startLoading(){return null}};var Eh,Ph=LoadJCAMPModal,Fh=Object(y.a)(Eh||(Eh=Object(x.a)(["\n  background-color: transparent;\n  border: none;\n  width: 35px;\n  height: 35px;\n  min-height: 35px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  outline: outline;\n  :focus {\n    outline: none !important;\n  }\n\n  &.fa {\n    svg {\n      font-size: 14px;\n    }\n  }\n  &.cheminfo {\n    svg {\n      font-size: 24px;\n    }\n  }\n"]))),_h=[{id:"importFile",icon:Object(ye.b)(Xe.n,{}),label:"Import from file system (Press Ctrl + O)"},{id:"importJDX",icon:Object(ye.b)(Xe.n,{}),label:"Add JCAMP-DX from URL"}],Ih=[{id:"svg",icon:Object(ye.b)(Xe.h,{}),label:"Export as SVG"},{id:"png",icon:Object(ye.b)(Xe.q,{}),label:"Export as PNG"},{id:"json",icon:Object(ye.b)(Xe.o,{}),label:"Save data ( Press Ctrl + S )"},{id:"advance_save",icon:Object(ye.b)(Xe.o,{}),label:"Save data as  ( Press Ctrl + Shift + S )"},{id:"nmre",icon:Object(ye.b)(Xe.o,{}),label:"Save NMRE data"},{id:"copy",icon:Object(ye.b)(Xe.e,{}),label:"Copy image to Clipboard ( Press Ctrl + C )"}];function BasicToolBar(e){var t=e.info,n=e.verticalAlign,a=e.displayerMode,i=useDispatch(),r=usePreferences(),o=Mc(),c=ie(),l=useLoader(),s=useToolsFunctions(),u=s.isRealSpectrumShown,d=s.changeSpectrumViewHandler,b=s.changeDisplayViewModeHandler,p=s.alignSpectrumsVerticallyHandler,f=useExport(),h=f.saveAsSVGHandler,m=f.saveAsPNGHandler,g=f.saveAsJSONHandler,j=f.saveAsNMREHandler,O=f.saveToClipboardHandler,x=f.saveAsHandler,y=Object(v.a)({isComplex:!1,isFid:!1},t),k=Object(S.useCallback)((function(e){e?(i({type:yt,files:[e]}),c.close()):o.error("you file must be one of those extensions [ .jdx, dx ] ")}),[o,i,c]),D=Object(S.useCallback)((function(){c.close(),i({type:Cn,isLoading:!0})}),[i,c]),w=Object(S.useCallback)((function(){c.show(Object(ye.b)(Ph,{onLoadClick:k,onClose:function onClose(){return c.close()},startLoading:D}),{})}),[k,c,D]),T=Object(S.useCallback)((function(e){return!C()(r,"display.toolBarButtons.".concat(e))}),[r]),M=Object(S.useCallback)((function(){l.open()}),[l]),A=Object(S.useCallback)((function(e){switch(e.id){case"importFile":M();break;case"importJDX":w();break;default:return}}),[M,w]),E=Object(S.useCallback)((function(e){switch(e.id){case"svg":h();break;case"png":m();break;case"json":g();break;case"advance_save":x();break;case"nmre":j();break;case"copy":O()}}),[h,m,g,x,j,O]);return Object(ye.c)(S.Fragment,{children:[T("hideImport")&&Object(ye.b)(jd,{style:Fh,className:"fa",component:Object(ye.b)(Xe.r,{}),toolTip:"Import",onClick:A,items:_h}),T("hideExportAs")&&Object(ye.b)(jd,{style:Fh,className:"fa",component:Object(ye.b)(Xe.p,{}),toolTip:"Export As",onClick:E,items:Ih}),a===jo.DM_1D&&T("hideSpectraStackAlignments")&&Object(ye.b)("button",{type:"button",css:Fh,className:"cheminfo",onClick:b,children:Object(ye.b)(We,{title:"Spectra alignment ( Press s )",popupPlacement:"right",children:n.stacked?Object(ye.b)(ul.o,{}):Object(ye.b)(ul.n,{})})}),a===jo.DM_1D&&T("hideRealImaginary")&&y&&y.isComplex&&Object(ye.b)("button",{css:Fh,className:"cheminfo",type:"button",onClick:d,children:Object(ye.b)(We,{title:u?"Display Real ":"Display Imaginary ",popupPlacement:"right",children:Object(ye.b)(ul.t,{})})}),a===jo.DM_1D&&T("hideSpectraCenterAlignments")&&Object(ye.b)("button",{css:Fh,className:"cheminfo",type:"button",onClick:p,children:Object(ye.b)(We,{title:n.flag?"Baseline  Bottom ( Press c )":"Baseline  Center ( Press c )",popupPlacement:"right",children:n.flag?Object(ye.b)(ul.d,{}):Object(ye.b)(ul.e,{})})})]})}var Nh,Rh,Lh=Th(Object(S.memo)(BasicToolBar)),zh=Object(y.a)(Nh||(Nh=Object(x.a)(["\n  width: 35px;\n  height: 35px;\n  background-color: white;\n  padding: 5px;\n  margin: 0px;\n  border: none;\n  outline: none;\n\n  :focus {\n    outline: none !important;\n  }\n"]))),Hh=Object(y.a)(Rh||(Rh=Object(x.a)(["\n  color: black;\n  background-color: #f3f3f3 !important;\n"])));function ToggleButton_ToggleButton(e){var t=e.children,n=e.value,a=e.disabled,i=e.isActive,r=e.onChange,o=e.className,c=e.style,l=e.isVisible,s=e.onMouseEnter,u=e.onMouseLeave,d=e.helpID,b=Object(S.useState)(i),p=Object(O.a)(b,2),f=p[0],h=p[1],m=Object(S.useCallback)((function(){var e=!f;h(e),r(e?n:null)}),[f,r,n]);return Object(S.useEffect)((function(){h(i)}),[i]),l?Object(ye.b)("button",{type:"button",onClick:m,css:[zh,f&&Hh],style:c,className:" ".concat(o,f?"  active":" "),disabled:a,onMouseEnter:s,onMouseLeave:u,"data-helpid":d,children:Object(S.cloneElement)(t,{style:{fontSize:"10px"}})}):null}ToggleButton_ToggleButton.displayName="ToggleButton",ToggleButton_ToggleButton.defaultProps={isActive:!1,disabled:!1,isVisible:!0,value:null,className:"",onChange:function onChange(){return null},onValueReady:function onValueReady(){return null}};var Bh=ToggleButton_ToggleButton,Vh={display:"flex",flexDirection:"column"};function ToggleButtonGroup(e){var t=e.children,n=e.value,a=e.onChange,i=Object(S.useState)([]),r=Object(O.a)(i,2),o=r[0],c=r[1],l=Object(S.useCallback)((function(e){var t=Object(Li.a)(o).map((function(t){return{value:t.value,isActive:t.value===e}}));c(t),a(e)}),[a,o]),s=Object(S.useMemo)((function(){var e=0;return S.Children.map(t,(function(t){if(t){if("ToggleButton"===t.type.displayName){var n=Object(S.cloneElement)(t,{onChange:l,isActive:o[e]&&o[e].isActive&&o[e].isActive,index:e});return e++,n}return Object(S.cloneElement)(t)}}))}),[t,l,o]);return Object(S.useEffect)((function(){var e=S.Children.map(t,(function(e){if(e&&"ToggleButton"===e.type.displayName)return{value:e.props.value,isActive:e.props.value===n}}));c(e)}),[t,n]),Object(I.jsxs)("div",{style:Vh,children:[" ",s," "]})}ToggleButtonGroup.defaultProps={onChange:function onChange(){return null}};var Xh,Yh=ToggleButtonGroup,Zh=Object(y.a)(Xh||(Xh=Object(x.a)(["\n  button {\n    background-color: transparent;\n    border: none;\n    width: 35px;\n    height: 35px;\n    min-height: 35px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    outline: outline;\n    :focus {\n      outline: none !important;\n    }\n\n    &.fa {\n      svg {\n        font-size: 14px;\n      }\n    }\n    &.cheminfo {\n      svg {\n        font-size: 18px;\n      }\n    }\n  }\n"])));function FunctionToolBar(e){var t=e.defaultValue,n=e.activeSpectrum,a=e.info,i=e.displayerMode,r=Object(S.useState)(),o=Object(O.a)(r,2),c=o[0],l=o[1],s=useHelp(),u=usePreferences(),d=useDispatch(),b={info:Object(v.a)({isComplex:!1,isFid:!1},a)},p=useToolsFunctions(),f=p.handleChangeOption,h=p.handleFullZoomOut,m=Object(S.useCallback)((function(e){l(e),f(e)}),[f]);Object(S.useEffect)((function(){l(t)}),[t]);var g=Object(S.useCallback)((function(){d({type:pn,value:""}),d({type:Rt,selectedFilter:null})}),[d]),j=Object(S.useCallback)((function(e){return!C()(u,"display.toolBarButtons.".concat(e))}),[u]);return Object(ye.c)("div",{css:Zh,children:[Object(ye.c)(Yh,{value:c,onChange:m,children:[j("hideZoomTool")&&Object(ye.b)(Bh,Object(v.a)(Object(v.a)({value:Qa.zoom.id},s.onHover),{},{helpID:"zoomIn",className:"fa",children:Object(ye.b)(We,{title:"".concat(Qa.zoom.label," ( Press z )"),popupPlacement:"right",offset:{x:10,y:0},style:{display:"flex"},children:Object(ye.b)(Xe.D,{})})}),Qa.zoom.id),j("hideZoomOutTool")&&Object(ye.b)("button",{className:"fa",type:"button",onClick:h,children:Object(ye.b)(We,{title:"Horizontal zoom out ( Press f ), Horizontal and Vertical zoom out, double click ( Press ff )",popupPlacement:"right",children:Object(ye.b)(Xe.k,{})})}),i===jo.DM_1D&&j("hidePeakTool")&&Object(ye.b)(Bh,Object(v.a)(Object(v.a)({value:Qa.peakPicking.id,className:"cheminfo",isVisible:n&&b&&!b.info.isFid},s.onHover),{},{helpID:"peakPicking",children:Object(ye.b)(We,{title:"".concat(Qa.peakPicking.label," ( Press p )"),popupPlacement:"right",offset:{x:10,y:0},children:Object(ye.b)(ul.p,{})})}),Qa.peakPicking.id),i===jo.DM_1D&&j("hideIntegralTool")&&Object(ye.b)(Bh,Object(v.a)(Object(v.a)({value:Qa.integral.id,className:"cheminfo",isVisible:n&&b&&!b.info.isFid},s.onHover),{},{helpID:"integralPicking",children:Object(ye.b)(We,{title:"".concat(Qa.integral.label," ( Press i )"),popupPlacement:"right",offset:{x:10,y:0},children:Object(ye.b)(ul.k,{})})}),Qa.integral.id),i===jo.DM_2D&&j("hideIntegralTool")&&Object(ye.b)(Bh,{value:Qa.zone2D.id,className:"fa",isVisible:n,children:Object(ye.b)(We,{title:"".concat(Qa.zone2D.label," ( Press i  )"),popupPlacement:"right",offset:{x:10,y:0},children:Object(ye.b)(Xe.g,{})})},Qa.zone2D.id),i===jo.DM_2D&&Object(ye.b)(Bh,{value:Qa.slicingTool.id,style:Zh.icon,isVisible:n,children:Object(ye.b)(We,{title:"".concat(Qa.slicingTool.label),popupPlacement:"right",offset:{x:10,y:0},children:"Slic"})},Qa.slicingTool.id),i===jo.DM_1D&&j("hideAutoRangesTool")&&Object(ye.b)(Bh,{value:Qa.rangesPicking.id,className:"cheminfo",isVisible:n&&b&&!b.info.isFid,children:Object(ye.b)(We,{title:Qa.rangesPicking.label,popupPlacement:"right",offset:{x:10,y:0},children:Object(ye.b)(ul.s,{})})},Qa.rangesPicking.id),i===jo.DM_1D&&j("hideMultipleSpectraAnalysisTool")&&Object(ye.b)(Bh,{value:Qa.multipleSpectraAnalysis.id,className:"cheminfo",children:Object(ye.b)(We,{title:Qa.multipleSpectraAnalysis.label,popupPlacement:"right",offset:{x:10,y:0},children:Object(ye.b)(ul.l,{})})},Qa.multipleSpectraAnalysis.id),i===jo.DM_1D&&j("hideZeroFillingTool")&&Object(ye.b)(Bh,{value:Qa.zeroFilling.id,className:"cheminfo",isVisible:b&&$a.zeroFilling.isApplicable(b),children:Object(ye.b)(We,{title:Qa.zeroFilling.label,popupPlacement:"right",offset:{x:10,y:0},children:Object(ye.b)(ul.x,{})})},Qa.zeroFilling.id),i===jo.DM_1D&&j("hidePhaseCorrectionTool")&&Object(ye.b)(Bh,{value:Qa.phaseCorrection.id,className:"cheminfo",style:Zh.icon,isVisible:n&&b&&$a.phaseCorrection.isApplicable(b),children:Object(ye.b)(We,{title:Qa.phaseCorrection.label,popupPlacement:"right",offset:{x:10,y:0},children:Object(ye.b)(ul.r,{})})},Qa.phaseCorrection.id),i===jo.DM_1D&&j("hideBaseLineCorrectionTool")&&Object(ye.b)(Bh,{value:Qa.baseLineCorrection.id,className:"cheminfo",isVisible:n&&b&&$a.baselineCorrection.isApplicable(b),children:Object(ye.b)(We,{title:Qa.baseLineCorrection.label,popupPlacement:"right",offset:{x:10,y:0},children:Object(ye.b)(ul.f,{})})},Qa.baseLineCorrection.id),i===jo.DM_1D&&j("hideExclusionZonesTool")&&Object(ye.b)(Bh,{value:Qa.exclusionZones.id,className:"cheminfo",children:Object(ye.b)(We,{title:Qa.exclusionZones.label,popupPlacement:"right",offset:{x:10,y:0},children:Object(ye.b)(ul.l,{})})},Qa.exclusionZones.id)]}),i===jo.DM_1D&&j("hideFFTTool")&&b&&$a.fft.isApplicable(b)&&Object(ye.b)("button",{className:"cheminfo",type:"button",onClick:g,children:Object(ye.b)(We,{title:"FFT Filter",popupPlacement:"right",offset:{x:10,y:0},children:Object(ye.b)(ul.i,{})})})]})}var Uh=Th(Object(S.memo)(FunctionToolBar));FunctionToolBar.defaultProps={defaultValue:Qa.zoom.id};var Kh={display:"flex",flexDirection:"column",alignItems:"start",borderRight:"0.55px solid #f7f7f7",paddingRight:"1px",overflowY:"auto",height:"100%"};function ToolBar(e){var t=e.selectedTool;return Object(I.jsxs)("div",{style:Object(v.a)({},Kh),children:[Object(I.jsx)(Uh,{defaultValue:t}),Object(I.jsx)(Lh,{})]})}var Wh,Gh=Object(S.memo)(ToolBar),qh={container:{position:"relative",height:"none"},resizer:{width:10,backgroundColor:"#f7f7f7",cursor:"ew-resize"},pane:{overflow:"hidden"}},Jh=Object(y.a)(Wh||(Wh=Object(x.a)(["\n  background-color: white;\n  width: 100%;\n  display: block;\n  height: 100%;\n  font-size: 14px;\n\n  div:focus {\n    outline: none !important;\n  }\n\n  button {\n    cursor: pointer;\n    color: black;\n    &:disabled {\n      cursor: default;\n    }\n  }\n\n  button:active,\n  button:hover,\n  button:focus,\n  [type='button']:focus,\n  button {\n    outline: none !important;\n  }\n  * {\n    -webkit-user-drag: none;\n    -moz-user-drag: none;\n    -o-user-drag: none;\n    user-drag: none;\n    -moz-user-select: none;\n    -webkit-user-select: none;\n    -ms-user-select: none;\n    user-select: none;\n  }\n\n  .SplitPane {\n    height: 100%;\n  }\n\n  .Resizer.vertical:after {\n    content: '\\22EE';\n    top: 50%;\n    color: black;\n    position: absolute;\n    font-size: 14px;\n  }\n\n  .Resizer.vertical {\n    padding: 2px;\n  }\n\n  .Resizer.vertical:hover {\n    background-color: #dfdfdf !important;\n    border-left: 0.55px #bbbbbb solid;\n    border-right: 0.55px #bbbbbb solid;\n  }\n"],["\n  background-color: white;\n  width: 100%;\n  display: block;\n  height: 100%;\n  font-size: 14px;\n\n  div:focus {\n    outline: none !important;\n  }\n\n  button {\n    cursor: pointer;\n    color: black;\n    &:disabled {\n      cursor: default;\n    }\n  }\n\n  button:active,\n  button:hover,\n  button:focus,\n  [type='button']:focus,\n  button {\n    outline: none !important;\n  }\n  * {\n    -webkit-user-drag: none;\n    -moz-user-drag: none;\n    -o-user-drag: none;\n    user-drag: none;\n    -moz-user-select: none;\n    -webkit-user-select: none;\n    -ms-user-select: none;\n    user-select: none;\n  }\n\n  .SplitPane {\n    height: 100%;\n  }\n\n  .Resizer.vertical:after {\n    content: '\\\\22EE';\n    top: 50%;\n    color: black;\n    position: absolute;\n    font-size: 14px;\n  }\n\n  .Resizer.vertical {\n    padding: 2px;\n  }\n\n  .Resizer.vertical:hover {\n    background-color: #dfdfdf !important;\n    border-left: 0.55px #bbbbbb solid;\n    border-right: 0.55px #bbbbbb solid;\n  }\n"])));function NMRium(e){var t=e.data,n=e.onDataChange,a=e.docsBaseUrl,i=e.preferences,r=e.getSpinner,o=void 0===r?defaultGetSpinner:r,c=e.emptyText,l=void 0===c?void 0:c,s=Object(S.useRef)(null),u=Object(S.useRef)(null),d=Object(w.a)(!1),b=Object(O.a)(d,2),p=b[0],f=b[1],h=Object(T.a)(s,p,{onClose:function onClose(){f(!1)}}),m=Object(S.useState)(!1),g=Object(O.a)(m,2),j=g[0],x=g[1],y=Object(S.useState)(!1),k=Object(O.a)(y,2),M=k[0],A=k[1],E=Object(S.useState)(sl),P=Object(O.a)(E,2),F=P[0],_=P[1],I=Object(S.useReducer)(Dh,Sh),N=Object(O.a)(I,2),R=N[0],L=N[1],z=Object(S.useReducer)(preferencesReducer,Rl),H=Object(O.a)(z,2),B=H[0],X=H[1],Z=R.selectedTool,K=R.displayerMode,W=R.data;Object(S.useEffect)((function(){jh(R.actionType)&&(null===n||void 0===n||n(R))}),[n,R]);var G=Object(S.useMemo)((function(){return dispatchMiddleware(L)}),[]);Object(S.useEffect)((function(){var e;null===(e=s.current)||void 0===e||e.focus()}),[h]),Object(S.useEffect)((function(){X({type:_l,payload:{display:i,dispatch:X}})}),[i]),Object(S.useEffect)((function(){G({type:Cn,isLoading:!0}),G({type:Ot,payload:t})}),[t,G]),Object(S.useEffect)((function(){!function setBaseUrl(e){ll=e}(a),_(sl())}),[a]);var q=Object(S.useCallback)((function(e){e&&!j&&(A(!1),L({type:_t,width:e}))}),[j]),J=Object(S.useMemo)((function(){return C()(B,"controllers.help.preventAutoHelp",!1)}),[B]),$=Object(S.useCallback)((function(e){e.stopPropagation(),x((function(e){return!e}))}),[]),Q=Object(S.useCallback)((function(e){checkModifierKeyActivated(e)||e.preventDefault()}),[]),ee=Object(S.useCallback)((function(){G({type:sa,payload:!0})}),[G]),te=Object(S.useCallback)((function(){G({type:sa,payload:!1})}),[G]);return Object(ye.b)(Dc,{children:Object(ye.b)(Ze,{value:{rootRef:s.current,elementsWraperRef:u.current},children:Object(ye.b)(U,{value:B,children:Object(ye.b)("div",{onMouseEnter:ee,onMouseLeave:te,style:{height:"100%",position:"relative"},children:Object(ye.b)(Kr,{data:F,wrapperRef:u.current,preventAutoHelp:J,children:Object(ye.b)(Pc,{wrapperRef:u.current,children:Object(ye.b)(Y,{value:G,children:Object(ye.b)(V,{value:Object(v.a)(Object(v.a)({},R),{},{isResizeEventStart:M}),children:Object(ye.b)(Ae,{wrapperRef:u.current,children:Object(ye.b)(gi.a,{children:Object(ye.b)(AssignmentProvider,{spectraData:W,children:Object(ye.b)(Le,{value:o,children:Object(ye.c)("div",{ref:s,css:Jh,onContextMenu:Q,children:[Object(ye.b)(Es,{isFullscreen:h,onMaximize:f}),Object(ye.b)("div",{style:{height:"calc(100% - 36px)",width:"100%",backgroundColor:"white"},children:Object(ye.c)(Rs,{children:[Object(ye.b)(cl,{}),Object(ye.b)(Gh,{selectedTool:Z}),Object(ye.c)(D.a,{style:qh.container,resizerStyle:qh.resizer,paneStyle:qh.pane,pane1Style:j?{maxWidth:"100%",width:"calc(100% - 10px)"}:{maxWidth:"80%"},split:"vertical",defaultSize:j?"99%":"calc(100% - 600px)",minSize:"80%",onDragFinished:q,onResizerDoubleClick:$,onDragStarted:function onDragStarted(){A(!0)},children:[K===jo.DM_1D?Object(ye.b)(fo,{emptyText:l}):Object(ye.b)(yc,{emptyText:l}),j?null:Object(ye.b)(mh,{selectedTool:Z,displayerMode:K})]})]})}),Object(ye.b)("div",{ref:u,id:"main-wrapper",style:{position:"absolute",pointerEvents:"none",zIndex:0,left:0,right:0,top:0,bottom:0}},String(h))]})})})})})})})})})})})})})}NMRium.defaultProps={docsBaseUrl:"https://docs.nmrium.org",onDataChange:function onDataChange(){return null},preferences:{general:{disableMultipletAnalysis:!1,hideSetSumFromMolecule:!1},panels:{hideSpectraPanel:!1,hideInformationPanel:!1,hidePeaksPanel:!1,hideIntegralsPanel:!1,hideRangesPanel:!1,hideStructuresPanel:!1,hideFiltersPanel:!1,hideZonesPanel:!1,hideSummaryPanel:!1,hideMultipleSpectraAnalysisPanel:!1},toolBarButtons:{hideZoomTool:!1,hideZoomOutTool:!1,hideImport:!1,hideExportAs:!1,hideSpectraStackAlignments:!1,hideSpectraCenterAlignments:!1,hideRealImaginary:!1,hidePeakTool:!1,hideIntegralTool:!1,hideAutoRangesTool:!1,hideZeroFillingTool:!1,hidePhaseCorrectionTool:!1,hideBaseLineCorrectionTool:!1,hideFFTTool:!1,hideMultipleSpectraAnalysisTool:!1,hideExclusionZonesTool:!1}}};t.a=Object(S.memo)(NMRium)}}]);
//# sourceMappingURL=1.c260fd35.chunk.js.map