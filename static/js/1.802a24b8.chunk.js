(this.webpackJsonpnmrium=this.webpackJsonpnmrium||[]).push([[1],{188:function(e,t,n){"use strict";n.d(t,"b",(function(){return l})),n.d(t,"a",(function(){return HighlightProvider})),n.d(t,"d",(function(){return useHighlightData})),n.d(t,"c",(function(){return useHighlight}));var a=n(42),i=n(46),o=n(6),r=n(1),c=n(3),l={PEAK:"PEAK",INTEGRAL:"INTEGRAL",RANGE:"RANGE",ZONE:"ZONE",EXCLUSION_ZONE:"EXCLUSION_ZONE"},s=Object(r.createContext)();function highlightReducer(e,t){switch(t.type){case"SHOW":var n,a=t.payload,r=a.convertedHighlights,c=a.type,l=Object(o.a)(Object(o.a)({},e),{},{highlights:Object(o.a)({},e.highlights),type:c}),s=Object(i.a)(r);try{for(s.s();!(n=s.n()).done;){var u=n.value;u in l.highlights||(l.highlights[u]=1)}}catch(g){s.e(g)}finally{s.f()}return l.highlighted=Object.keys(l.highlights),l;case"HIDE":var d,b=t.payload.convertedHighlights,p=Object(o.a)(Object(o.a)({},e),{},{highlights:Object(o.a)({},e.highlights),type:null}),f=Object(i.a)(b);try{for(f.s();!(d=f.n()).done;){var h=d.value;h in p.highlights&&delete p.highlights[h]}}catch(g){f.e(g)}finally{f.f()}return p.highlighted=Object.keys(p.highlights),p;case"SET_PERMANENT":return Object(o.a)(Object(o.a)({},e),{},{highlightedPermanently:t.payload});case"UNSET_PERMANENT":return Object(o.a)(Object(o.a)({},e),{},{highlightedPermanently:[]});default:throw new Error("unknown action type: ".concat(t.type))}}var u={highlights:{},highlighted:[],highlightedPermanently:[],type:null};function HighlightProvider(e){var t=Object(r.useReducer)(highlightReducer,u),n=Object(a.a)(t,2),i=n[0],o=n[1],l=Object(r.useMemo)((function(){return{highlight:i,dispatch:o}}),[i]);return Object(c.jsx)(s.Provider,{value:l,children:e.children})}function useHighlightData(){return Object(r.useContext)(s)}function useHighlight(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!Array.isArray(e))throw new Error("highlights must be an array");var n=useHighlightData(),a=Object(r.useMemo)((function(){var t,n=[],a=Object(i.a)(e);try{for(a.s();!(t=a.n()).done;){var o=t.value;if("string"!==typeof o&&"number"!==typeof o)throw new Error("highlight key must be a string or number");""!==o&&n.push(String(o))}}catch(r){a.e(r)}finally{a.f()}return n}),[e]);Object(r.useEffect)((function(){return function(){n.dispatch({type:"HIDE",payload:{convertedHighlights:a}}),n.dispatch({type:"UNSET_PERMANENT"})}}),[]);var o=Object(r.useMemo)((function(){return n.highlight.highlighted.some((function(e){return a.includes(e)}))}),[n.highlight.highlighted,a]),c=Object(r.useMemo)((function(){return n.highlight.highlightedPermanently.some((function(e){return a.includes(e)}))}),[n.highlight.highlightedPermanently,a]),l=Object(r.useCallback)((function(){n.dispatch({type:"SHOW",payload:{convertedHighlights:a,type:t}})}),[n,a,t]),s=Object(r.useCallback)((function(){n.dispatch({type:"HIDE",payload:{convertedHighlights:a}})}),[n,a]),u=Object(r.useCallback)((function(e){n.dispatch({type:"SHOW",payload:{convertedHighlights:[],id:e}})}),[n]),d=Object(r.useCallback)((function(e){n.dispatch({type:"HIDE",payload:{convertedHighlights:[],id:e}})}),[n]),b=Object(r.useCallback)((function(e){e&&(e.preventDefault(),e.stopPropagation()),c?n.dispatch({type:"UNSET_PERMANENT"}):n.dispatch({type:"SET_PERMANENT",payload:a})}),[n,a,c]),p={onMouseEnter:l,onMouseLeave:s},f={onClick:b};return{isActive:o,show:l,hide:s,onHover:p,onClick:f,isActivePermanently:c,click:b,add:u,remove:d}}},207:function(e,t,n){"use strict";n.d(t,"h",(function(){return exportAsSVG})),n.d(t,"d",(function(){return exportAsJSON})),n.d(t,"f",(function(){return exportAsNMRE})),n.d(t,"g",(function(){return exportAsPng})),n.d(t,"b",(function(){return copyPNGToClipboard})),n.d(t,"c",(function(){return copyTextToClipboard})),n.d(t,"a",(function(){return copyHTMLToClipboard})),n.d(t,"e",(function(){return exportAsMatrix}));var a=n(91),i=n(62),o=n.n(i),r=n(89),c=n(585),l=n(298),s=n.n(l);function copyFormattedHtml(e){var t=document.createElement("div");t.innerHTML=e,t.style.position="fixed",t.style.pointerEvents="none",t.style.opacity=0;var n=Array.prototype.slice.call(document.styleSheets).filter((function(e){return!e.disabled}));document.body.appendChild(t),window.getSelection().removeAllRanges();var a=document.createRange();a.selectNode(t),window.getSelection().addRange(a),document.execCommand("copy");for(var i=0;i<n.length;i++)n[i].disabled=!0;document.execCommand("copy");for(var o=0;o<n.length;o++)n[o].disabled=!1;document.body.removeChild(t)}function copyHTMLToClipboard(e){return _copyHTMLToClipboard.apply(this,arguments)}function _copyHTMLToClipboard(){return(_copyHTMLToClipboard=Object(r.a)(o.a.mark((function _callee3(e){return o.a.wrap((function _callee3$(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,copyFormattedHtml(e),t.abrupt("return",!0);case 5:return t.prev=5,t.t0=t.catch(0),t.abrupt("return",!1);case 8:case"end":return t.stop()}}),_callee3,null,[[0,5]])})))).apply(this,arguments)}function copyTextToClipboard(e){return _copyTextToClipboard.apply(this,arguments)}function _copyTextToClipboard(){return(_copyTextToClipboard=Object(r.a)(o.a.mark((function _callee4(e){return o.a.wrap((function _callee4$(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,navigator.clipboard.writeText(e);case 3:return t.abrupt("return",!0);case 6:return t.prev=6,t.t0=t.catch(0),t.abrupt("return",!1);case 9:case"end":return t.stop()}}),_callee4,null,[[0,6]])})))).apply(this,arguments)}function exportAsJSON(e){return _exportAsJSON.apply(this,arguments)}function _exportAsJSON(){return(_exportAsJSON=Object(r.a)(o.a.mark((function _callee5(e){var t,n,a,i,r,l,u,d=arguments;return o.a.wrap((function _callee5$(o){for(;;)switch(o.prev=o.next){case 0:if(t=d.length>1&&void 0!==d[1]?d[1]:"experiment",n=d.length>2&&void 0!==d[2]?d[2]:0,a=d.length>3&&void 0!==d[3]&&d[3],i=JSON.stringify(e,(function(e,t){return ArrayBuffer.isView(t)?Array.from(t):t}),n),a){o.next=9;break}r=new Blob([i],{type:"text/plain"}),Object(c.saveAs)(r,"".concat(t,".nmrium")),o.next=21;break;case 9:return o.prev=9,(l=new s.a).file("".concat(t,".nmrium"),i),o.next=14,l.generateAsync({type:"blob"});case 14:u=o.sent,Object(c.saveAs)(u,"".concat(t,".zip")),o.next=21;break;case 18:o.prev=18,o.t0=o.catch(9),console.log(o.t0);case 21:case"end":return o.stop()}}),_callee5,null,[[9,18]])})))).apply(this,arguments)}function exportAsMatrix(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"experiment",a=(t.from,t.to,t.nbPoints,JSON.stringify(e,(function(e,t){return ArrayBuffer.isView(t)?Array.from(t):t}),2)),i=new Blob([a],{type:"text/plain"});Object(c.saveAs)(i,"".concat(n,".tsv"))}function exportAsNMRE(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"experiment";e.generateAsync({type:"blob"}).then((function(e){Object(c.saveAs)(e,"".concat(t,".zip"))}))}function exportAsSVG(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"experiment",t=arguments.length>1?arguments[1]:void 0,n=getBlob(t),a=n.blob;Object(c.saveAs)(a,"".concat(e,".svg"))}function exportAsPng(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"experiment",t=arguments.length>1?arguments[1]:void 0,n=getBlob(t),a=n.blob,i=n.width,l=n.height;try{var s=document.createElement("canvas");s.width=i,s.height=l;var u=s.getContext("2d");u.fillStyle="white",u.fillRect(0,0,s.width,s.height);var d=new Image,b=URL.createObjectURL(a);d.onload=Object(r.a)(o.a.mark((function _callee(){var t;return o.a.wrap((function _callee$(n){for(;;)switch(n.prev=n.next){case 0:u.drawImage(d,0,0),t=s.toDataURL("image/png",1),Object(c.saveAs)(t,"".concat(e,".png")),URL.revokeObjectURL(t);case 4:case"end":return n.stop()}}),_callee)}))),d.src=b}catch(p){console.log(p)}}function copyDataURLCliboard(e){var t=document.createElement("img");t.src=e,t.style.position="fixed",t.style.pointerEvents="none",t.style.opacity=0,document.body.appendChild(t);var n=document.createRange();n.selectNode(t),window.getSelection().addRange(n),document.execCommand("Copy"),document.body.removeChild(t)}function copyBlobToCliboard(e){e.toBlob((function(e){var t=new ClipboardItem(Object(a.a)({},e.type,e));navigator.clipboard.write([t]).then((function(){console.log("experiment copied.")}),(function(e){console.log(e)}))}))}function copyPNGToClipboard(e){var t=getBlob(e),n=t.blob,a=t.width,i=t.height;try{var c=document.createElement("canvas");c.width=a,c.height=i;var l=c.getContext("2d");l.fillStyle="white",l.fillRect(0,0,c.width,c.height);var s=new Image,u=URL.createObjectURL(n);s.onload=Object(r.a)(o.a.mark((function _callee2(){var e;return o.a.wrap((function _callee2$(t){for(;;)switch(t.prev=t.next){case 0:l.drawImage(s,0,0),e=c.toDataURL("image/png",1),navigator.clipboard.write?copyBlobToCliboard(c):copyDataURLCliboard(e),URL.revokeObjectURL(e);case 4:case"end":return t.stop()}}),_callee2)}))),s.src=u}catch(d){d instanceof ReferenceError&&alert("Your browser does not support this feature, please use Google Chrome"),console.log(d)}}function getBlob(e){var t=document.getElementById(e).cloneNode(!0),n=t.getAttribute("width").replace("px",""),a=t.getAttribute("height").replace("px","");t.querySelectorAll('[data-no-export="true"]').forEach((function(e){return e.remove()}));var i='<svg class="nmr-svg"  viewBox=\'0 0 '.concat(n," ").concat(a,"' width=\"").concat(n,'"  height="').concat(a,'"  version="1.1" xmlns="http://www.w3.org/2000/svg">'),o="".concat(i+"<style>.grid line,.grid path{stroke:none;} .peaks-text{fill:#730000} .x path{stroke-width:1px} .x text{\n    font-size: 12px;\n    font-weight: bold;\n  } \n \n  .nmr-svg,.contours{\n    background-color:white;\n    fill:white;\n  }\n  \n\n  \n  </style>"+t.innerHTML,"</svg>");return{blob:new Blob([o],{type:"image/svg+xml"}),width:n,height:a}}},216:function(e,t,n){"use strict";var a={};n.r(a),n.d(a,"id",(function(){return sa})),n.d(a,"name",(function(){return ua})),n.d(a,"apply",(function(){return apply})),n.d(a,"isApplicable",(function(){return isApplicable})),n.d(a,"reduce",(function(){return reduce}));var i={};n.r(i),n.d(i,"id",(function(){return da})),n.d(i,"name",(function(){return ba})),n.d(i,"apply",(function(){return autoPhaseCorrection_apply})),n.d(i,"isApplicable",(function(){return autoPhaseCorrection_isApplicable})),n.d(i,"reduce",(function(){return autoPhaseCorrection_reduce}));var o={};n.r(o),n.d(o,"id",(function(){return ja})),n.d(o,"name",(function(){return va})),n.d(o,"baselineAlgorithms",(function(){return Oa})),n.d(o,"apply",(function(){return baselineCorrection_apply})),n.d(o,"isApplicable",(function(){return baselineCorrection_isApplicable})),n.d(o,"reduce",(function(){return baselineCorrection_reduce}));var r={};n.r(r),n.d(r,"id",(function(){return xa})),n.d(r,"name",(function(){return ya})),n.d(r,"apply",(function(){return digitalFilter_apply})),n.d(r,"isApplicable",(function(){return digitalFilter_isApplicable})),n.d(r,"reduce",(function(){return digitalFilter_reduce}));var c={};n.r(c),n.d(c,"id",(function(){return Ca})),n.d(c,"name",(function(){return ka})),n.d(c,"apply",(function(){return equallySpaced_apply})),n.d(c,"isApplicable",(function(){return equallySpaced_isApplicable})),n.d(c,"reduce",(function(){return equallySpaced_reduce}));var l={};n.r(l),n.d(l,"id",(function(){return Sa})),n.d(l,"name",(function(){return Da})),n.d(l,"apply",(function(){return fft_apply})),n.d(l,"isApplicable",(function(){return fft_isApplicable})),n.d(l,"reduce",(function(){return fft_reduce}));var s={};n.r(s),n.d(s,"id",(function(){return wa})),n.d(s,"name",(function(){return Ta})),n.d(s,"apply",(function(){return fromTo_apply})),n.d(s,"isApplicable",(function(){return fromTo_isApplicable})),n.d(s,"reduce",(function(){return fromTo_reduce}));var u={};n.r(u),n.d(u,"id",(function(){return Ma})),n.d(u,"name",(function(){return Aa})),n.d(u,"apply",(function(){return lineBroadening_apply})),n.d(u,"isApplicable",(function(){return lineBroadening_isApplicable})),n.d(u,"reduce",(function(){return lineBroadening_reduce}));var d={};n.r(d),n.d(d,"id",(function(){return Ea})),n.d(d,"name",(function(){return Pa})),n.d(d,"apply",(function(){return phaseCorrection_apply})),n.d(d,"isApplicable",(function(){return phaseCorrection_isApplicable})),n.d(d,"reduce",(function(){return phaseCorrection_reduce}));var b={};n.r(b),n.d(b,"id",(function(){return Ia})),n.d(b,"name",(function(){return Fa})),n.d(b,"apply",(function(){return shiftX_apply})),n.d(b,"isApplicable",(function(){return shiftX_isApplicable})),n.d(b,"reduce",(function(){return shiftX_reduce}));var p={};n.r(p),n.d(p,"id",(function(){return Ra})),n.d(p,"name",(function(){return Na})),n.d(p,"apply",(function(){return zeroFilling_apply})),n.d(p,"isApplicable",(function(){return zeroFilling_isApplicable})),n.d(p,"reduce",(function(){return zeroFilling_reduce}));var f={};n.r(f),n.d(f,"id",(function(){return _a})),n.d(f,"name",(function(){return La})),n.d(f,"apply",(function(){return filter2d_shiftX_apply})),n.d(f,"isApplicable",(function(){return filter2d_shiftX_isApplicable})),n.d(f,"reduce",(function(){return filter2d_shiftX_reduce}));var h={};n.r(h),n.d(h,"id",(function(){return za})),n.d(h,"name",(function(){return Ha})),n.d(h,"apply",(function(){return shiftY_apply})),n.d(h,"isApplicable",(function(){return shiftY_isApplicable})),n.d(h,"reduce",(function(){return shiftY_reduce}));var g=n(6),m=n(42),j=n(15),v=n(12),O=n(183),x=n.n(O),y=n(1),C=n(506),k=n(743),S=n(744);function checkModifierKeyActivated(e){for(var t=0,n=["Alt","AltGraph","CapsLock","Control","Meta","NumLocK","ScrollLock","Shift","OS"];t<n.length;t++){var a=n[t];if(e.getModifierState(a))return!0}return!1}var D=n(753),w=n(754),T=n(249),M=n.n(T),A=n(201),E=n.n(A),P=n(3),I=Object(y.createContext)(),F={step:"initial",brush:{start:null,end:null}},R=[];function BrushTracker(e){var t=e.children,n=e.className,a=e.style,i=e.onBrush,o=e.onZoom,r=e.onDoubleClick,c=e.onClick,l=e.noPropagation,s=Object(y.useReducer)(reducer,F),u=Object(m.a)(s,2),d=u[0],b=u[1],p=Object(y.useState)(),f=Object(m.a)(p,2),h=f[0],j=f[1],v=Object(y.useCallback)((function(e){return 0===e.button&&(l&&e.stopPropagation(),b({type:"DOWN",shiftKey:e.shiftKey,altKey:e.altKey,screenX:e.screenX,screenY:e.screenY,clientX:e.clientX,clientY:e.clientY,boundingRect:e.currentTarget.getBoundingClientRect()}),j(e.timeStamp)),!1}),[l]),O=Object(y.useCallback)((function(e){e.persist();var t=e.timeStamp,n=e.currentTarget.getBoundingClientRect(),a=e.clientX-n.x,i=e.clientY-n.y,o=M()((function(){t-h<=150&&1===R.length&&c(Object(g.a)(Object(g.a)({},e),{},{x:a,y:i})),R=[]}),200);R.push(o),o(),R.length>1&&(E()(R,(function(e){return e.cancel()})),R=[],r(Object(g.a)(Object(g.a)({},e),{},{x:a,y:i})))}),[h,c,r]),x=Object(y.useCallback)((function(e){var t=e.currentTarget.getBoundingClientRect(),n=e.clientX-t.x,a=e.clientY-t.y,i=e.deltaY,r=e.deltaX,c=e.shiftKey,l=e.deltaMode;o({deltaY:i||r,shiftKey:c,deltaMode:l,x:n,y:a})}),[o]);Object(y.useEffect)((function(){var e=d.step,t=d.startX,n=d.endX;"end"===e&&Math.abs(t-n)>5&&(i(d),b({type:"DONE"}))}),[i,d]);var C=Object(y.useCallback)((function(e){b({type:"MOVE",screenX:e.screenX,screenY:e.screenY,clientX:e.clientX,clientY:e.clientY})}),[]),k=Object(y.useCallback)((function(e){return b({type:"UP",clientX:e.clientX,clientY:e.clientY}),!1}),[]);return Object(P.jsx)(I.Provider,{value:d,children:Object(P.jsx)("div",{className:n,style:a,onMouseDown:v,onMouseUp:k,onMouseMove:C,onClick:O,onWheel:x,children:t})})}function reducer(e,t){switch(t.type){case"UP":if("brushing"===e.step||"start"===e.step){var n=t.clientX,a=t.clientY;return Object(g.a)(Object(g.a)({},e),{},{endX:n-e.boundingRect.x,endY:a-e.boundingRect.y,step:"start"===e.step?"initial":"end"})}return e;case"DOWN":if("initial"===e.step||"end"===e.step){var i=t.screenX,o=t.screenY,r=t.clientX,c=t.clientY,l=t.boundingRect,s=t.shiftKey,u=t.altKey,d=r-l.x,b=c-l.y;return Object(g.a)(Object(g.a)({},e),{},{shiftKey:s,altKey:u,startX:d,startY:b,startScreenX:i,startScreenY:o,startClientX:r,startClientY:c,boundingRect:l,step:"start"})}return e;case"MOVE":if("start"===e.step||"brushing"===e.step){var p=t.clientX,f=t.clientY;return Object(g.a)(Object(g.a)({},e),{},{step:"brushing",endX:p-e.boundingRect.x,endY:f-e.boundingRect.y})}return e;case"DONE":if("end"===e.step)return Object(g.a)(Object(g.a)({},e),{},{step:"initial"});break;default:return e}}BrushTracker.defaultProps={onBrush:function onBrush(){return null},onZoom:function onZoom(){return null},onDoubleClick:function onDoubleClick(){return null},onClick:function onClick(){return null}};var N=Object(y.createContext)(),_=N.Provider;function MouseTracker(e){var t=e.children,n=e.className,a=e.style,i=e.noPropagation,o=Object(y.useState)(null),r=Object(m.a)(o,2),c=r[0],l=r[1],s=Object(y.useCallback)((function(e){var t=e.currentTarget.getBoundingClientRect(),n=e.clientX-t.x,a=e.clientY-t.y;l({x:n,y:a}),i&&e.stopPropagation()}),[i]),u=Object(y.useCallback)((function(e){l(null),i&&e.stopPropagation()}),[i]);return Object(P.jsx)(_,{value:c,children:Object(P.jsx)("div",{className:n,style:a,onMouseMove:s,onMouseLeave:u,children:t})})}var L=Object(y.createContext)(),z=L.Provider;function useChartData(){return Object(y.useContext)(L)}var H=Object(y.createContext)(),B=H.Provider;function useDispatch(){return Object(y.useContext)(H)}var X=Object(y.createContext)(),V=X.Provider;function usePreferences(){return Object(y.useContext)(X)}var Y=Object(y.createContext)(),Z=Y.Provider;function useScale(){return Object(y.useContext)(Y)}var U={TOP_LEFT:"top left",TOP_CENTER:"top center",TOP_RIGHT:"top right",MIDDLE_LEFT:"middle left",MIDDLE:"middle",MIDDLE_RIGHT:"middle right",BOTTOM_LEFT:"bottom left",BOTTOM_CENTER:"bottom center",BOTTOM_RIGHT:"bottom right"},K="info",W="success",G="error",q="progress_indicator",J="fade",$="scale",Q=Object(y.createContext)(),ee=Q.Provider,te=function useModal(){return Object(y.useContext)(Q)},ne={outerContainer:{position:"fixed",top:0,right:0,bottom:0,left:0,backgroundColor:"rgba(255,255,255,0.8)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1},innerContainer:{boxSizing:"initial",backgroundColor:"#fff",boxShadow:"0 0 0 0, 0 8px 16px rgba(0,0,0,.30)",display:"flex",flexDirection:"column",minWidth:"300px",minHeight:"140px",justifyContent:"space-between",borderRadius:"5px"}},ae=function Modal(e){var t=e.children,n=e.open,a=e.onClose,i=e.style,o=Object(y.useCallback)((function(e){a(e)}),[a]);return Object(y.useEffect)((function(){!1===n&&o()}),[o,n]),n&&Object(P.jsx)("div",{style:ne.outerContainer,onClick:o,children:Object(P.jsx)("div",{style:Object(g.a)(Object(g.a)({},ne.innerContainer),i),onClick:function onClick(e){e.preventDefault(),e.stopPropagation()},children:t})})};ae.defaultProps={onClose:function onClose(){return null},open:!1};var ie,oe,re=ae,ce=n(91),le=n(4),se=n(398),ue=n(752),de=n(182),be=n(755),pe=(ie={},Object(ce.a)(ie,J,{transition:"opacity ".concat(250,"ms ease"),opacity:0}),Object(ce.a)(ie,$,{transform:"scale(1)",transition:"all ".concat(250,"ms ease-in-out")}),ie),fe=(oe={},Object(ce.a)(oe,J,{entering:{opacity:0},entered:{opacity:1}}),Object(ce.a)(oe,$,{entering:{transform:"scale(0)"},entered:{transform:"scale(1)"},exiting:{transform:"scale(0)"},exited:{transform:"scale(1)"}}),oe),he=function Transtion(e){var t=e.children,n=e.type,a=e.transitionStyles,i=Object(de.a)(e,["children","type","transitionStyles"]),o=Object(y.useRef)(null);return Object(P.jsx)(be.a,Object(g.a)(Object(g.a)({nodeRef:o},i),{},{timeout:250,children:function children(e){return Object(P.jsx)("div",{ref:o,style:Object(g.a)(Object(g.a)(Object(g.a)({},pe[n]),a[n][e]),a.default),children:t})}}))};he.defaultProps={transitionStyles:fe};var ge=he;var me,je=function Wrapper_Wrapper(e){var t=e.children,n=e.options.position,a=Object(de.a)(e,["children","options"]),i=Object(y.useMemo)((function(){return function getStyles(e,t){var n=Object(g.a)({position:"fixed",display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",pointerEvents:"none",overflow:"visible"},t.containerStyle?{top:"".concat(t.containerStyle.top,"px"),left:"".concat(t.containerStyle.left,"px"),height:"".concat(t.containerStyle.height,"px"),width:"".concat(t.containerStyle.width,"px")}:{width:"100%",height:"100%"});switch(e){case U.TOP_LEFT:return Object(g.a)(Object(g.a)({},n),{},{justifyContent:"flex-start",alignItems:"flex-start"});case U.TOP_CENTER:return Object(g.a)(Object(g.a)({},n),{},{justifyContent:"flex-start"});case U.TOP_RIGHT:return Object(g.a)(Object(g.a)({},n),{},{justifyContent:"flex-start",alignItems:"flex-end"});case U.MIDDLE_LEFT:return Object(g.a)(Object(g.a)({},n),{},{justifyContent:"center",alignItems:"flex-start"});case U.MIDDLE:return Object(g.a)(Object(g.a)({},n),{},{justifyContent:"center"});case U.MIDDLE_RIGHT:return Object(g.a)(Object(g.a)({},n),{},{justifyContent:"center",alignItems:"flex-end"});case U.BOTTOM_LEFT:return Object(g.a)(Object(g.a)({},n),{},{justifyContent:"flex-end",alignItems:"flex-start"});case U.BOTTOM_CENTER:return Object(g.a)(Object(g.a)({},n),{},{justifyContent:"flex-end"});case U.BOTTOM_RIGHT:return Object(g.a)(Object(g.a)({},n),{},{justifyContent:"flex-end",alignItems:"flex-end"});default:return n}}(n,a)}),[n,a]);return t.length>0&&Object(P.jsx)("div",Object(g.a)(Object(g.a)({style:i},a),{},{children:t}))},ve=n(5),Oe=Object(v.b)(me||(me=Object(j.a)(["\n  display: flex;\n  flex-direction: column;\n  border-top: 10px solid #ed0000;\n  flex: 1;\n  border-radius: 5px;\n\n  .message {\n    font-weight: bold;\n    font-size: 14px;\n    text-align: center;\n    color: #af0000;\n    text-align: center;\n    padding: 35px;\n    flex: 1;\n  }\n  .buttons-container {\n    display: flex;\n    align-items: flex-end;\n    justify-content: flex-end;\n    padding: 5px;\n    border-top: 1px solid #efefef;\n\n    button:first-of-type {\n      border-radius: 5px 0 0 5px;\n      border-weight: 0 1px 0 0;\n    }\n    button:last-child {\n      border-radius: 0px 5px 5px 0px;\n      border-weight: 0 0 0 1px;\n    }\n    button {\n      border: 1px solid #dcdcdc;\n      background-color: white;\n      display: inline-block;\n      cursor: pointer;\n      color: #363636;\n      font-weight: bold;\n      padding: 6px 24px;\n      text-decoration: none;\n    }\n    button:hover {\n      background: -webkit-gradient(\n        linear,\n        left top,\n        left bottom,\n        color-stop(0.05, #f6f6f6),\n        color-stop(1, #ffffff)\n      );\n      background: -moz-linear-gradient(top, #f6f6f6 5%, #ffffff 100%);\n      background: -webkit-linear-gradient(top, #f6f6f6 5%, #ffffff 100%);\n      background: -o-linear-gradient(top, #f6f6f6 5%, #ffffff 100%);\n      background: -ms-linear-gradient(top, #f6f6f6 5%, #ffffff 100%);\n      background: linear-gradient(to bottom, #f6f6f6 5%, #ffffff 100%);\n      filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#f6f6f6', endColorstr='#ffffff',GradientType=0);\n      background-color: #f6f6f6;\n    }\n  }\n"]))),xe=function ConfirmationDialog(e){var t=e.style,n=e.buttons,a=e.onClose,i=e.message,o=Object(y.useCallback)((function(e,t){var n=t.handler;(void 0===n?function(){return null}:n)(e),a()}),[a]);return Object(ve.c)("div",{style:t,css:Oe,children:[Object(ve.b)("p",{className:"message",children:i}),Object(ve.b)("div",{className:"buttons-container",children:n.map((function(e){return Object(ve.b)("button",{type:"button",onClick:function onClick(t){return o(t,e)},style:e.style&&e.style,children:e.text},e.text)}))})]})};xe.defaultProps={buttons:[],style:{}};var ye,Ce,ke=xe,Se=(ye={},Object(ce.a)(ye,J,{entering:{opacity:0},entered:{opacity:1}}),Object(ce.a)(ye,$,{entering:{transform:"scale(0)"},entered:{transform:"scale(1)"},exiting:{transform:"scale(0)"},exited:{transform:"scale(0)"}}),ye);function Provider(e){var t=e.children,n=e.style,a=e.offset,i=e.position,o=e.transition,r=e.wrapperRef,c=Object(y.useRef)(),l=Object(y.useState)(),s=Object(m.a)(l,2),u=s[0],d=s[1];Object(y.useEffect)((function(){c.current=document.createElement("div");var e=c.current;return r&&r.appendChild(e),function(){e&&r&&r.removeChild(e)}}),[r]);var b=function remove(){d(null)},p=Object(y.useMemo)((function(){return r?r.getBoundingClientRect():{top:0,left:0,width:window.innerWidth,height:window.innerHeight}}),[r]),f=Object(y.useCallback)((function(){b()}),[]),h=Object(y.useCallback)((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={component:e,options:Object(g.a)({isBackgroundBlur:!0,enableResizing:!1},t),close:function(){return b()}};return d(n),n.options.onOpen&&n.options.onOpen(),n}),[]),O=Object(y.useCallback)((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{enableResizing:!1},n={component:Object(ve.b)(ke,Object(g.a)({},e)),options:Object(g.a)({isBackgroundBlur:!0},t),close:function(){return b()}};return d(n),n.options.onOpen&&n.options.onOpen(),n}),[]);Object(y.useEffect)((function(){var e=function keyHandler(e){["Escape","Esc"].includes(e.key)&&f()};return document.addEventListener("keydown",e,!1),function(){return document.removeEventListener("keydown",e,!1)}}),[f]);var x=Object(v.b)(Ce||(Ce=Object(j.a)(["\n    position: absolute;\n    left: 0;\n    top: 0;\n    bottom: 0;\n    right: 0;\n    z-index: 0;\n\n    .handle {\n      cursor: move;\n    }\n\n    .rnd-container {\n      box-sizing: initial;\n      background-color: #fff;\n      box-shadow: 0 0 0 0, 0 8px 16px rgba(0, 0, 0, 0.3);\n      borderradius: 5px;\n    }\n  "]))),C=u&&u.options.isBackgroundBlur?{backgroundColor:"rgba(255,255,255,0.8)"}:{pointerEvents:"none"};return Object(ve.c)(ee,{value:{show:h,close:function close(){f()},modal:u,showConfirmDialog:O},children:[t,c.current&&Object(le.createPortal)(Object(ve.b)(y.Fragment,{children:u?Object(ve.b)("div",{css:x,style:Object(g.a)({},C),children:Object(ve.b)(ue.a,{appear:!0,options:{position:u.options.position?u.options.position:i},containerStyle:p,component:je,children:Object(ve.b)(ge,{type:u.options.transition?u.options.transition:o,transitionStyles:Object(g.a)(Object(g.a)({},Se),{},{default:{width:u.options.width?"".concat(u.options.width,"px"):"auto"},height:u.options.height?"".concat(u.options.height,"px"):"auto"}),children:Object(ve.b)(se.a,{default:{width:u.options.width?u.options.width:"auto",height:u.options.height?u.options.height:"auto",x:0,y:0},className:"rnd-container",style:Object(g.a)(Object(g.a)({},n),{},{margin:a,pointerEvents:"all",position:"none",userSelect:"none"}),enableResizing:u.options.enableResizing,dragHandleClassName:"handle",enableUserSelectHack:!1,children:u.options&&Object(y.cloneElement)(u.component,Object(g.a)(Object(g.a)({},u.options),{},{onClose:f,style:{cursor:"default"}}))})},u.id)},U[u.options.transition?u.options.transition:o])}):null}),c.current)]})}Provider.defaultProps={offset:"10px",position:U.CENTER,transition:$,wrapperRef:null,style:{}};var De,we=Provider,Te=Object(y.createContext)({open:function open(){return null}}),Me=Te.Provider;function useLoader(){return Object(y.useContext)(Te)}var Ae=Object(v.b)(De||(De=Object(j.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background-color: rgba(255, 255, 255, 0.25);\n  height: 100%;\n  flex-direction: column;\n  user-select: none;\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  outline: 10px dashed rgba(0, 0, 0, 0.3);\n  outline-offset: -10px;\n  padding-left: 20px;\n  padding-right: 20px;\n\n  p {\n    padding: 15px 30px;\n    background-color:rgba(0, 0, 0, 0.5);\n    border-radius: 39px;\n    color: white;\n    font-size: x-large;\n    font-weight: bold;\n\n  }\n}\n"])));var Ee,Pe=function NoData(e){var t=e.isEmpty,n=void 0===t||t,a=e.emptyText,i=void 0===a?"Drag and drop here a JCAMP-DX, zipped Bruker folder, Jeol jdf or NMRium file":a,o=useLoader(),r=Object(y.useCallback)((function(){o.open()}),[o]);return n?Object(ve.b)("div",{css:Ae,onClick:r,children:Object(ve.b)("p",{children:i})}):null},Ie=Object(v.b)(Ee||(Ee=Object(j.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background-color: rgba(255, 255, 255, 0.25);\n  height: 100%;\n  flex-direction: column;\n  user-select: none;\n  position: absolute;\n  width: 100%;\n\n  svg {\n    animation-duration: 0.5s;\n    animation-name: spinAnimation;\n    animation-iteration-count: infinite;\n    animation-fill-mode: forwards;\n    animation-direction: inherit;\n    animation-timing-function: linear;\n    animation-duration: 1s;\n    width: 100px;\n    height: 100px;\n  }\n\n  @keyframes spinAnimation {\n    from {\n      transform: rotate(0deg);\n    }\n\n    to {\n      transform: rotate(360deg);\n    }\n  }\n"])));function DefaultSpinnerComponent(){return Object(ve.c)("div",{css:Ie,children:[Object(ve.b)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 841.9 595.3",children:Object(ve.c)("g",{fill:"#61DAFB",children:[Object(ve.b)("path",{d:"M666.3 296.5c0-32.5-40.7-63.3-103.1-82.4 14.4-63.6 8-114.2-20.2-130.4-6.5-3.8-14.1-5.6-22.4-5.6v22.3c4.6 0 8.3.9 11.4 2.6 13.6 7.8 19.5 37.5 14.9 75.7-1.1 9.4-2.9 19.3-5.1 29.4-19.6-4.8-41-8.5-63.5-10.9-13.5-18.5-27.5-35.3-41.6-50 32.6-30.3 63.2-46.9 84-46.9V78c-27.5 0-63.5 19.6-99.9 53.6-36.4-33.8-72.4-53.2-99.9-53.2v22.3c20.7 0 51.4 16.5 84 46.6-14 14.7-28 31.4-41.3 49.9-22.6 2.4-44 6.1-63.6 11-2.3-10-4-19.7-5.2-29-4.7-38.2 1.1-67.9 14.6-75.8 3-1.8 6.9-2.6 11.5-2.6V78.5c-8.4 0-16 1.8-22.6 5.6-28.1 16.2-34.4 66.7-19.9 130.1-62.2 19.2-102.7 49.9-102.7 82.3 0 32.5 40.7 63.3 103.1 82.4-14.4 63.6-8 114.2 20.2 130.4 6.5 3.8 14.1 5.6 22.5 5.6 27.5 0 63.5-19.6 99.9-53.6 36.4 33.8 72.4 53.2 99.9 53.2 8.4 0 16-1.8 22.6-5.6 28.1-16.2 34.4-66.7 19.9-130.1 62-19.1 102.5-49.9 102.5-82.3zm-130.2-66.7c-3.7 12.9-8.3 26.2-13.5 39.5-4.1-8-8.4-16-13.1-24-4.6-8-9.5-15.8-14.4-23.4 14.2 2.1 27.9 4.7 41 7.9zm-45.8 106.5c-7.8 13.5-15.8 26.3-24.1 38.2-14.9 1.3-30 2-45.2 2-15.1 0-30.2-.7-45-1.9-8.3-11.9-16.4-24.6-24.2-38-7.6-13.1-14.5-26.4-20.8-39.8 6.2-13.4 13.2-26.8 20.7-39.9 7.8-13.5 15.8-26.3 24.1-38.2 14.9-1.3 30-2 45.2-2 15.1 0 30.2.7 45 1.9 8.3 11.9 16.4 24.6 24.2 38 7.6 13.1 14.5 26.4 20.8 39.8-6.3 13.4-13.2 26.8-20.7 39.9zm32.3-13c5.4 13.4 10 26.8 13.8 39.8-13.1 3.2-26.9 5.9-41.2 8 4.9-7.7 9.8-15.6 14.4-23.7 4.6-8 8.9-16.1 13-24.1zM421.2 430c-9.3-9.6-18.6-20.3-27.8-32 9 .4 18.2.7 27.5.7 9.4 0 18.7-.2 27.8-.7-9 11.7-18.3 22.4-27.5 32zm-74.4-58.9c-14.2-2.1-27.9-4.7-41-7.9 3.7-12.9 8.3-26.2 13.5-39.5 4.1 8 8.4 16 13.1 24 4.7 8 9.5 15.8 14.4 23.4zM420.7 163c9.3 9.6 18.6 20.3 27.8 32-9-.4-18.2-.7-27.5-.7-9.4 0-18.7.2-27.8.7 9-11.7 18.3-22.4 27.5-32zm-74 58.9c-4.9 7.7-9.8 15.6-14.4 23.7-4.6 8-8.9 16-13 24-5.4-13.4-10-26.8-13.8-39.8 13.1-3.1 26.9-5.8 41.2-7.9zm-90.5 125.2c-35.4-15.1-58.3-34.9-58.3-50.6 0-15.7 22.9-35.6 58.3-50.6 8.6-3.7 18-7 27.7-10.1 5.7 19.6 13.2 40 22.5 60.9-9.2 20.8-16.6 41.1-22.2 60.6-9.9-3.1-19.3-6.5-28-10.2zM310 490c-13.6-7.8-19.5-37.5-14.9-75.7 1.1-9.4 2.9-19.3 5.1-29.4 19.6 4.8 41 8.5 63.5 10.9 13.5 18.5 27.5 35.3 41.6 50-32.6 30.3-63.2 46.9-84 46.9-4.5-.1-8.3-1-11.3-2.7zm237.2-76.2c4.7 38.2-1.1 67.9-14.6 75.8-3 1.8-6.9 2.6-11.5 2.6-20.7 0-51.4-16.5-84-46.6 14-14.7 28-31.4 41.3-49.9 22.6-2.4 44-6.1 63.6-11 2.3 10.1 4.1 19.8 5.2 29.1zm38.5-66.7c-8.6 3.7-18 7-27.7 10.1-5.7-19.6-13.2-40-22.5-60.9 9.2-20.8 16.6-41.1 22.2-60.6 9.9 3.1 19.3 6.5 28.1 10.2 35.4 15.1 58.3 34.9 58.3 50.6-.1 15.7-23 35.6-58.4 50.6zM320.8 78.4z"}),Object(ve.b)("path",{d:"M520.5 78.1z"})]})}),Object(ve.b)("p",{children:"Loading ..."})]})}function defaultGetSpinner(){return Object(P.jsx)(DefaultSpinnerComponent,{})}var Fe=Object(y.createContext)(defaultGetSpinner),Re=Fe.Provider;var Ne=function Spinner(e){var t=e.isLoading,n=void 0===t||t,a=e.emptyText,i=void 0===a?void 0:a,o=useChartData().data,r=Object(y.useState)(!1),c=Object(m.a)(r,2),l=c[0],s=c[1];Object(y.useEffect)((function(){var e=null;return n||(e=setTimeout((function(){s(!0)}),500)),function(){clearTimeout(e)}}),[n]);var u=Object(y.useContext)(Fe);return Object(P.jsxs)(y.Fragment,{children:[n&&u(),l&&!n&&Object(P.jsx)(Pe,{isEmpty:o&&0===o.length,emptyText:i})]})},_e=n(185),Le=n(394),ze=n(734),He=n(88),Be=Object(y.createContext)(),Xe=Be.Provider;function useGlobal(){return Object(y.useContext)(Be)}var Ve={position:"fixed",top:0,left:0,pointerEvents:"none",backgroundColor:"gray",padding:"3px",borderRadius:"2px",color:"white",whiteSpace:"nowrap",fontSize:"10px",fontFamily:"tahoma",textShadow:"none"};function ToolTip(e){var t=e.style,n=e.className,a=e.popupPlacement,i=void 0===a?"right":a,o=e.children,r=e.title,c=e.offset,l=void 0===c?{x:0,y:0}:c,s=Object(y.useRef)(),u=Object(y.useRef)(),d=Object(y.useState)({x:0,y:0}),b=Object(m.a)(d,2),p=b[0],f=b[1],h=Object(y.useState)(!1),j=Object(m.a)(h,2),v=j[0],O=j[1],x=useGlobal().elementsWraperRef;Object(y.useLayoutEffect)((function(){if(v){var e=function getPopupPlacement(){var e,t,n=s.current.getBoundingClientRect(),a=u.current.getBoundingClientRect();switch(i){case"left":e=-a.width,t=n.height/2-n.height/2*a.height/n.height;break;case"right":e=n.width,t=n.height/2-n.height/2*a.height/n.height;break;case"top":e=n.width/2-n.width/2*a.width/n.width,t=-n.height;break;case"bottom":e=n.width/2-n.width/2*a.width/n.width,t=n.height;break;default:e=0,t=0}return{x:e+n.x,y:t+n.y}}();f(e)}}),[i,v]);var C=Object(y.useCallback)((function(){O(!0)}),[]),k=Object(y.useCallback)((function(){O(!1)}),[]);return Object(P.jsxs)(y.Fragment,{children:[Object(P.jsx)("div",{style:Object(g.a)({position:"relative",height:"100%",display:"flex",justifyContent:"center",alignItems:"center"},t.mainContainer),ref:s,onMouseOver:C,onMouseOut:k,children:o}),v&&Object(le.createPortal)(Object(P.jsx)("div",{ref:u,style:Object(g.a)(Object(g.a)({},Ve),{},{transform:"translate(".concat(p.x+l.x,"px,").concat(p.y+l.y,"px)"),zIndex:999999999},t.popup),className:n,children:Object(P.jsx)("span",{style:{pointerEvents:"none"},children:r})}),x)]})}ToolTip.defaultProps={style:{popup:{},mainContainer:{}}};var Ye,Ze=Object(y.memo)(ToolTip),Ue=Object(v.b)(Ye||(Ye=Object(j.a)(["\n  background-color: transparent;\n  border: none;\n  height: 100%;\n  display:flex,\n  justify-content:center;\n  align-items:center;\n\n  svg {\n    fill: #ca0000;\n    font-size: 16px;\n  }\n"])));function CloseButton(e){var t=e.onClick,n=e.popupTitle,a=e.popupPlacement,i=e.className;return Object(ve.b)("div",{className:i,children:Object(ve.b)(Ze,{title:n,popupPlacement:a,children:Object(ve.b)("button",{css:Ue,type:"button",onClick:t,children:Object(ve.b)(He.G,{})})})})}CloseButton.defaultProps={onClick:function onClick(){return null},popupTitle:"Close",popupPlacement:"left",className:""};var Ke,We,Ge=Object(y.memo)(CloseButton),qe=Object(v.b)(Ke||(Ke=Object(j.a)(["\n  display: flex;\n  flex-direction: column;\n  width: 900px;\n  height: 400px;\n  padding: 5px;\n  button:focus {\n    outline: none;\n  }\n  .header {\n    height: 24px;\n    border-bottom: 1px solid #f0f0f0;\n    display: flex;\n    span {\n      color: #464646;\n      font-size: 15px;\n      flex: 1;\n    }\n\n    button {\n      background-color: transparent;\n      border: none;\n      svg {\n        height: 16px;\n      }\n    }\n  }\n  .container {\n    overflow-y: auto;\n    background-color: white;\n    padding-top: 10px;\n\n    .row {\n      outline: none;\n      display: flex !important;\n      flex-direction: row;\n      margin: 0;\n      div {\n        flex: 4;\n      }\n      .multiplicity {\n        flex: 2;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n      }\n    }\n\n    .row:nth-child(odd) {\n      background: #fafafa;\n    }\n  }\n"]))),Je=Object(v.b)(We||(We=Object(j.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-direction: column;\n  user-select: none;\n  width: 900px;\n  height: 400px;\n\n  svg {\n    animation-duration: 0.5s;\n    animation-name: spinAnimation;\n    animation-iteration-count: infinite;\n    animation-fill-mode: forwards;\n    animation-direction: inherit;\n    animation-timing-function: linear;\n    animation-duration: 1s;\n    width: 100px;\n    height: 100px;\n  }\n\n  @keyframes spinAnimation {\n    from {\n      transform: rotate(0deg);\n    }\n\n    to {\n      transform: rotate(360deg);\n    }\n  }\n"])));function MultipletAnalysisModal(e){var t=e.data,n=e.activeSpectrum,a=e.scaleX,i=e.startX,o=e.endX,r=e.onClose,c=Object(y.useState)(),l=Object(m.a)(c,2),s=l[0],u=l[1],d=Object(y.useState)(!1),b=Object(m.a)(d,2),p=b[0],f=b[1],h=Object(y.useState)(!1),g=Object(m.a)(h,2),j=g[0],v=g[1];return Object(y.useEffect)((function(){setTimeout((function(){f(!0)}),400)}),[]),Object(y.useEffect)((function(){if(n&&i&&o&&p){var e=t[n.index],r=e.data,c=r.x,l=r.y,s=e.info,d=a().invert(i),b=a().invert(o),f=Object(_e.g)(c,{from:d,to:b}),h=f.fromIndex,g=f.toIndex,m={x:c.slice(h,g),y:l.slice(h,g)};try{var j=Object(Le.a)(m,{frequency:s.originFrequency,takeBestPartMultiplet:!0,symmetrizeEachStep:!0,debug:!0});v(!0),u(j)}catch(O){console.log(O)}}}),[i,o,t,a,n,p]),j?Object(ve.c)("div",{css:qe,children:[Object(ve.c)("div",{className:"header handle",children:[Object(ve.b)("span",{children:"Analyse Multiplet"}),Object(ve.b)(Ge,{onClick:r})]}),Object(ve.b)("div",{className:"container",children:s&&s.debug&&s.debug.steps.map((function(e,t){var n,a;return Object(ve.c)("div",{className:"row",children:[Object(ve.b)(ze.a,{chart:{series:{type:"line",data:e.multiplet}},style:{height:200,width:400,overflow:"auto"}}),Object(ve.b)("div",{className:"multiplicity",children:Object(ve.b)("p",{children:s.j[t]?"".concat(null===(n=s.j[t])||void 0===n?void 0:n.multiplicity,": ").concat(null===(a=s.j[t])||void 0===a?void 0:a.coupling.toFixed(3)," Hz"):""})}),Object(ve.b)(ze.a,{chart:{series:{type:"line",data:e.errorFunction}},style:{height:200,width:400,overflow:"auto"}})]},t)}))})]}):Object(ve.c)("div",{css:Je,children:[Object(ve.b)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 841.9 595.3",children:Object(ve.c)("g",{fill:"#61DAFB",children:[Object(ve.b)("path",{d:"M666.3 296.5c0-32.5-40.7-63.3-103.1-82.4 14.4-63.6 8-114.2-20.2-130.4-6.5-3.8-14.1-5.6-22.4-5.6v22.3c4.6 0 8.3.9 11.4 2.6 13.6 7.8 19.5 37.5 14.9 75.7-1.1 9.4-2.9 19.3-5.1 29.4-19.6-4.8-41-8.5-63.5-10.9-13.5-18.5-27.5-35.3-41.6-50 32.6-30.3 63.2-46.9 84-46.9V78c-27.5 0-63.5 19.6-99.9 53.6-36.4-33.8-72.4-53.2-99.9-53.2v22.3c20.7 0 51.4 16.5 84 46.6-14 14.7-28 31.4-41.3 49.9-22.6 2.4-44 6.1-63.6 11-2.3-10-4-19.7-5.2-29-4.7-38.2 1.1-67.9 14.6-75.8 3-1.8 6.9-2.6 11.5-2.6V78.5c-8.4 0-16 1.8-22.6 5.6-28.1 16.2-34.4 66.7-19.9 130.1-62.2 19.2-102.7 49.9-102.7 82.3 0 32.5 40.7 63.3 103.1 82.4-14.4 63.6-8 114.2 20.2 130.4 6.5 3.8 14.1 5.6 22.5 5.6 27.5 0 63.5-19.6 99.9-53.6 36.4 33.8 72.4 53.2 99.9 53.2 8.4 0 16-1.8 22.6-5.6 28.1-16.2 34.4-66.7 19.9-130.1 62-19.1 102.5-49.9 102.5-82.3zm-130.2-66.7c-3.7 12.9-8.3 26.2-13.5 39.5-4.1-8-8.4-16-13.1-24-4.6-8-9.5-15.8-14.4-23.4 14.2 2.1 27.9 4.7 41 7.9zm-45.8 106.5c-7.8 13.5-15.8 26.3-24.1 38.2-14.9 1.3-30 2-45.2 2-15.1 0-30.2-.7-45-1.9-8.3-11.9-16.4-24.6-24.2-38-7.6-13.1-14.5-26.4-20.8-39.8 6.2-13.4 13.2-26.8 20.7-39.9 7.8-13.5 15.8-26.3 24.1-38.2 14.9-1.3 30-2 45.2-2 15.1 0 30.2.7 45 1.9 8.3 11.9 16.4 24.6 24.2 38 7.6 13.1 14.5 26.4 20.8 39.8-6.3 13.4-13.2 26.8-20.7 39.9zm32.3-13c5.4 13.4 10 26.8 13.8 39.8-13.1 3.2-26.9 5.9-41.2 8 4.9-7.7 9.8-15.6 14.4-23.7 4.6-8 8.9-16.1 13-24.1zM421.2 430c-9.3-9.6-18.6-20.3-27.8-32 9 .4 18.2.7 27.5.7 9.4 0 18.7-.2 27.8-.7-9 11.7-18.3 22.4-27.5 32zm-74.4-58.9c-14.2-2.1-27.9-4.7-41-7.9 3.7-12.9 8.3-26.2 13.5-39.5 4.1 8 8.4 16 13.1 24 4.7 8 9.5 15.8 14.4 23.4zM420.7 163c9.3 9.6 18.6 20.3 27.8 32-9-.4-18.2-.7-27.5-.7-9.4 0-18.7.2-27.8.7 9-11.7 18.3-22.4 27.5-32zm-74 58.9c-4.9 7.7-9.8 15.6-14.4 23.7-4.6 8-8.9 16-13 24-5.4-13.4-10-26.8-13.8-39.8 13.1-3.1 26.9-5.8 41.2-7.9zm-90.5 125.2c-35.4-15.1-58.3-34.9-58.3-50.6 0-15.7 22.9-35.6 58.3-50.6 8.6-3.7 18-7 27.7-10.1 5.7 19.6 13.2 40 22.5 60.9-9.2 20.8-16.6 41.1-22.2 60.6-9.9-3.1-19.3-6.5-28-10.2zM310 490c-13.6-7.8-19.5-37.5-14.9-75.7 1.1-9.4 2.9-19.3 5.1-29.4 19.6 4.8 41 8.5 63.5 10.9 13.5 18.5 27.5 35.3 41.6 50-32.6 30.3-63.2 46.9-84 46.9-4.5-.1-8.3-1-11.3-2.7zm237.2-76.2c4.7 38.2-1.1 67.9-14.6 75.8-3 1.8-6.9 2.6-11.5 2.6-20.7 0-51.4-16.5-84-46.6 14-14.7 28-31.4 41.3-49.9 22.6-2.4 44-6.1 63.6-11 2.3 10.1 4.1 19.8 5.2 29.1zm38.5-66.7c-8.6 3.7-18 7-27.7 10.1-5.7-19.6-13.2-40-22.5-60.9 9.2-20.8 16.6-41.1 22.2-60.6 9.9 3.1 19.3 6.5 28.1 10.2 35.4 15.1 58.3 34.9 58.3 50.6-.1 15.7-23 35.6-58.4 50.6zM320.8 78.4z"}),Object(ve.b)("path",{d:"M520.5 78.1z"})]})}),Object(ve.b)("p",{children:"Analyse Multiplet in progress. Please wait ..."})]})}MultipletAnalysisModal.defaultProps={onClose:function onClose(){return null}};var $e=MultipletAnalysisModal,Qe=n(203),et=n(86),tt=n(87),nt={controllers:{mws:{low:2,high:20}},formatting:{nucleus:[{key:"1H",name:"1H",value:"0.00"},{key:"13C",name:"13C",value:"0.00"},{key:"15N",name:"15N",value:"0.00"},{key:"19F",name:"19F",value:"0.00"},{key:"29Si",name:"29Si",value:"0.00"},{key:"31P",name:"31P",value:"0.00"}]}},at=n(235),it=n.n(at);function useStateWithLocalStorage(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=Object(y.useState)(localStorage.getItem(e)||"{}"),a=Object(m.a)(n,2),i=a[0],o=a[1];Object(y.useEffect)((function(){localStorage.setItem(e,i)}),[e,i]);var r=Object(y.useCallback)((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=JSON.parse(i);t?it()(n,t,e):n=Object(g.a)(Object(g.a)({},n),e),o(JSON.stringify(n))}),[i]);return[t?x()(JSON.parse(i),t,{}):JSON.parse(i),r]}var ot=function getLocalStorage(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=localStorage.getItem(e);return n&&t?JSON.parse(n):n},rt=function getValue(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return x()(e,t,n)},ct={lowStep:nt.controllers.mws.low,highStep:nt.controllers.mws.high,speedThreshold:3},lt=function(){function Spectrum1DZoomHelper(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(et.a)(this,Spectrum1DZoomHelper),this.scale=e,this.speedThreshold=t.speedThreshold||ct.speedThreshold,this.slowZoomStep=t.slowZoomStep||ct.lowStep,this.fastZoomStep=t.fastZoomStep||ct.highStep}return Object(tt.a)(Spectrum1DZoomHelper,[{key:"wheel",value:function wheel(e,t){var n=1===Math.abs(e).toString().length?Math.abs(e):Math.abs(e)/100,a=ot("nmr-general-settings"),i=rt(a,"general.controllers.mws.low"),o=rt(a,"general.controllers.mws.high"),r=i?.01*i:.01*this.slowZoomStep,c=o?.05*o:.05*this.fastZoomStep,l=n<=this.speedThreshold?r:c,s=-1===Math.sign(e)?this.scale+l:this.scale-l;this.scale=s>=0||0===s?s:0}},{key:"getScale",value:function getScale(){return this.scale}},{key:"setScale",value:function setScale(e){this.scale=e}}]),Spectrum1DZoomHelper}(),st={},ut=new lt(.5),dt="HORIZONTAL",bt="VERTICAL",pt="STEP_HROZENTAL";function initZoom1DHandler(e){e.forEach((function(e){st[e.id]||1!==e.info.dimension||(st[e.id]=new lt)}))}function Zoom_wheel(e,t,n){var a=n.data,i=n.activeSpectrum,o=n.activeTab,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;i||r?st[r||i.id].wheel(e,t):a.forEach((function(n){1===n.info.dimension&&o===n.info.nucleus&&st[n.id].wheel(e,t)}))}function getScaleByID(e){return Object(ce.a)({},e,st[e].getScale(e))}function getScale(e){var t=e.data,n=e.activeTab;return t.reduce((function(e,t){return 1===t.info.dimension&&n===t.info.nucleus&&(e[t.id]=st[t.id].getScale()),e}),{})}function setScale(e){if("number"===typeof e)Object.keys(st).forEach((function(t){st[t].setScale(e)}));else{if("object"!==typeof e)throw Error("scale must be number or Object");Object.keys(e).forEach((function(t){st[t].setScale(e[t])}))}}function setZoom(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=e.height,i=e.margin,o=e.activeSpectrum;t&&setScale(t);var r=getScale(e);if(e.zoomFactor={scale:r},null===o&&null===n)e.yDomains=Object.keys(e.yDomains).reduce((function(t,n){var o=Object(Qe.f)(e.originDomain.yDomains[n],[a-i.bottom,i.top]),c=Object(m.a)(e.originDomain.yDomains[n],2),l=c[0],s=c[1],u=Math.max(Math.abs(s),Math.abs(l))===s?0:l,d=Qe.h.translate(0,(Math.sign(u),o(u))).scale(r[n]).translate(0,-o(0)).rescaleY(o).domain();return t[n]=d,t}),{});else{var c=n||o.id,l=Object(Qe.f)(e.originDomain.yDomains[c],[a-i.bottom,i.top]),s=Qe.h.translate(0,l(0)).scale(r[c]).translate(0,-l(0)),u=s.rescaleY(l).domain();e.yDomains=Object(g.a)(Object(g.a)({},e.yDomains),{},Object(ce.a)({},c,u))}}function setZoom1D(e,t,n,a){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=e.originDomain,r=e.tabActiveSpectrum,c=e.activeTab,l=r[c.split(",")[a]].id;i&&setScale(i);var s=getScaleByID(l);e.zoomFactor={scale:s};var u=Object(Qe.f)(o.yDomains[l],[t-n,n]),d=Qe.h.translate(0,u(0)).scale(s[l]).translate(0,-u(0)),b=d.rescaleY(u).domain();e.yDomains[l]=b}function setIntegralZoom(e,t){if(t.activeSpectrum){var n=t.height,a=t.margin;if(t.originIntegralYDomain[t.activeSpectrum.id]){var i=Object(Qe.f)(t.originIntegralYDomain[t.activeSpectrum.id],[n-a.bottom,a.top]),o=e<.1?.05:e,r=Qe.h.translate(0,i(0)).scale(o).translate(0,-i(0)).rescaleY(i).domain();t.integralZoomFactor={scale:e};var c=t.activeSpectrum;t.integralsYDomains[c.id]=r}}}var ft=n(196);function getXScale(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=e.width,a=e.margin,i=e.xDomains,o=e.xDomain,r=e.mode,c="RTL"===r?[n-a.right,a.left]:[a.left,n-a.right];return Object(Qe.f)(t?i[t]:o,c)}function getYScale(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=e.height,a=e.margin,i=e.verticalAlign,o=e.yDomain,r=e.yDomains,c=i.flag&&!i.stacked?(n-30)/2:n-a.bottom-30,l=[];return l=null===t||void 0===r[t]?[0,o[1]]:[0,r[t][1]],Object(Qe.f)(l,[c,a.top])}var ht="SET_SCALE",gt={scaleX:null,scaleY:null};function scaleReducer(e,t){switch(t.type){case"SET_X_SCALE":return Object(ft.b)(e,(function(e){e.scaleX=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return getXScale(t,e)}}));case"SET_Y_SCALE":return Object(ft.b)(e,(function(e){e.scaleY=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return getYScale(t,e)}}));case ht:return Object(ft.b)(e,(function(e){e.scaleX=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return getXScale(t.payload,e)},e.scaleY=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return getYScale(t.payload,e)}}));default:return e}}var mt="INITIATE",jt="LOAD_JSON_FILE",vt="LOAD_JCAMP_FILE",Ot="LOAD_MOL_FILE",xt="LOAD_ZIP_FILE",yt="LOAD_JDF_FILE",Ct="ADD_PEAK",kt="ADD_PEAKS",St="DELETE_PEAK_NOTATION",Dt="SHIFT_SPECTRUM",wt="SET_X_DOMAIN",Tt="SET_Y_DOMAIN",Mt="SET_ORIGINAL_DOMAIN",At="SET_WIDTH",Et="SET_DIMENSIONS",Pt="SET_SELECTED_TOOL",It="SET_SELECTED_FILTER",Ft="CHANGE_SPECTRUM_SETTING",Rt="FULL_ZOOM_OUT",Nt="CHANGE_VISIBILITY",_t="CHANGE_PEAKS_MARKERS_VISIBILITY",Lt="CHANGE_ACTIVE_SPECTRUM",zt="CHANGE_SPECTRUM_COLOR",Ht="ADD_INTEGRAL",Bt="DELETE_INTEGRAL",Xt="TOGGLE_REAL_IMAGINARY_VISIBILITY",Vt="SET_ZOOM_FACTOR",Yt="ADD_MOLECULE",Zt="SET_MOLECULE",Ut="DELETE_MOLECULE",Kt="SET_CORRELATION",Wt="SET_CORRELATIONS",Gt="SET_CORRELATIONS_MF",qt="SET_CORRELATIONS_TOLERANCE",Jt="DELETE_SPECTRA",$t="CHANGE_SPECTRUM_DISPLAY_VIEW_MODE",Qt="RESIZE_INTEGRAL",en="BRUSH_END",tn="RESET_X_DOMAIN",nn="CHANGE_INTEGRAL_ZOOM",an="ENABLE_FILTER",rn="DELETE_FILTER",cn="DELETE_SPECTRA_FILTER",ln="APPLY_ZERO_FILLING_FILTER",sn="APPLY_FFT_FILTER",un="CALCULATE_MANUAL_PHASE_CORRECTION_FILTER",dn="APPLY_MANUAL_PHASE_CORRECTION_FILTER",bn="APPLY_AUTO_PHASE_CORRECTION_FILTER",pn="APPLY_ABSOLUTE_FILTER",fn="SET_VERTICAL_INDICATOR_X_POSITION",hn="AUTO_PEAK_PICKING",gn="AUTO_RANGES_DETECTION",mn="AUTO_ZONES_DETECTION",jn="DELETE_RANGE",vn="SET_SELECTED_OPTIONS_PANEL",On="SET_LOADING_FLAG",xn="RESET_SELECTED_TOOL",yn="SET_SPECTRUMS_VERTICAL_AlIGN",Cn="CHANGE_INTEGRAL_DATA",kn="SET_ACTIVE_TAB",Sn="CHANGE_INTEGRAL_SUM",Dn="ADD_BASE_LINE_ZONE",wn="DELETE_BASE_LINE_ZONE",Tn="APPLY_BASE_LINE_CORRECTION_FILTER",Mn="SET_KEY_PREFERENCES",An="APPLY_KEY_PREFERENCES",En="RESIZE_RANGE",Pn="CHANGE_RANGE_SUM",In="ADD_RANGE",Fn="SET_2D_LEVEL",Rn="ADD_2D_ZONE",Nn="DELETE_2D_ZONE",_n="ADD_MISSING_PROJECTION",Ln="SET_FILTER_SNAPSHOT",zn="CHANGE_RANGE_RELATIVE",Hn="CHANGE_RANGE_SIGNAL_VALUE",Bn="CHANGE_RANGE_SIGNAL_KIND",Xn="SAVE_EDITED_RANGE",Vn="UNLINK_RANGE",Yn="SET_DIAID_RANGE",Zn="CHANGE_INTEGRAL_RELATIVE",Un="ANALYZE_SPECTRA",Kn="DELETE_ANALYZE_SPECTRA_RANGE",Wn="RESIZE_ANALYZE_SPECTRA_RANGE",Gn="SET_ANALYZE_SPECTRA_COLUMNS",qn="FILTER_SPECTRA_COLUMN",Jn="ALIGN_SPECTRA",$n="CHANGE_ZONE_SIGNAL_VALUE",Qn="CHANGE_ZONE_SIGNAL_KIND",ea="UNLINK_ZONE",ta="SET_DIAID_ZONE",na="PREDICT_SPECTRA",aa="SET_SPECTRA_SAME_TOP",ia="RESET_SPECTRA_SCALE",oa="SET_MOUSE_OVER_DISPLAYER",ra="APPLY_MULTIPLE_SPECTRA_FILTER",ca="ADD_EXCLUSION_ZONE",la="DELETE_EXCLUSION_ZONE",sa="absolute",ua="Absolute";function apply(e){if(!isApplicable(e))throw new Error("absolute not applicable on this data");e.data.re=Object(_e.a)(e.data),e.data.im=new Float64Array(0),e.info=Object(g.a)(Object(g.a)({},e.info),{},{isComplex:!1})}function isApplicable(e){return!(!e.info.isComplex||e.info.isFid)}function reduce(){return{once:!1,reduce:null}}var da="autoPhaseCorrection",ba="Automatic phase correction",pa={magnitudeMode:!1,minRegSize:30,maxDistanceToJoin:256};function autoPhaseCorrection_apply(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!autoPhaseCorrection_isApplicable(e))throw new Error("phaseCorrection not applicable on this data");return t=Object.assign({},pa,t),Object(_e.b)(e.data,t)}function autoPhaseCorrection_isApplicable(e){return!(!e.info.isComplex||e.info.isFid)}function autoPhaseCorrection_reduce(e,t){var n=Object.assign({},e);for(var a in n)n[a]+=t[a];return{once:!0,reduce:n}}var fa=n(736),ha=n(395),ga=n(569),ma=n(396),ja="baselineCorrection",va="Baseline correction",Oa={airpls:"airPLS",polynomial:"Polynomial"};function baselineCorrection_apply(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!baselineCorrection_isApplicable(e))throw new Error("baselineCorrection not applicable on this data");var n,a=t.algorithm,i=t.zones,o=e.data,r=o.x,c=o.re;switch(a){case"airpls":n=Object(fa.a)(r,c,t).corrected;break;case"polynomial":var l=Object(ha.a)({x:r,y:c},{numberOfPoints:4096,zones:i});if(0===i.length){var s=Object(ga.a)(l.x,l.y,t),u=s.regression;n=new Float64Array(r.length);for(var d=0;d<c.length;d++)n[d]=c[d]-u.predict(r[d])}else{var b=new ma.a(r,c,t.degree);n=new Float64Array(r.length);for(var p=0;p<c.length;p++)n[p]=c[p]-b.predict(r[p])}break;default:throw new Error("baselineCorrection: algorithm unknown: ".concat(a))}Object.assign(e.data,{re:n})}function baselineCorrection_isApplicable(e){return!e.info.isFid}function baselineCorrection_reduce(){return{once:!1,reduce:null}}var xa="digitalFilter",ya="Digital Filter";function digitalFilter_apply(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!digitalFilter_isApplicable(e))throw new Error("Digital Filter is not applicable on this data");var n=t.digitalFilterValue,a=void 0===n?0:n,i=new Float64Array(e.data.re),o=new Float64Array(e.data.im),r=Math.floor(a),c=0;r+=0;var l=new Float64Array(i.length),s=new Float64Array(o.length);l.set(i.slice(r)),l.set(i.slice(c,r),i.length-r),s.set(o.slice(r)),s.set(o.slice(c,r),o.length-r),e.data.re=l,e.data.im=s}function digitalFilter_isApplicable(e){return!(!e.info.isComplex||!e.info.isFid)}function digitalFilter_reduce(){return{once:!0,reduce:void 0}}var Ca="equallySpaced",ka="Equally Spaced";function equallySpaced_apply(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!equallySpaced_isApplicable(e))throw new Error("Equally Spaced is not applicable on this data");var n=t.from,a=t.to,i=t.numberOfPoints,o=t.exclusions,r=e.data,c=r.x,l=r.re,s=r.im,u=Object(ha.a)({x:c,y:l},{from:n,to:a,numberOfPoints:i,exclusions:o});if(e.data.x=u.x,e.data.re=u.y,s){var d=Object(ha.a)({x:c,y:l},{from:n,to:a,numberOfPoints:i,exclusions:o});e.data.im=d.y}}function equallySpaced_isApplicable(e){return!(!e.info.isComplex||e.info.isFid)}function equallySpaced_reduce(){return{once:!1,reduce:null}}var Sa="fft",Da="FFT";function fft_apply(e){if(!fft_isApplicable(e))throw new Error("fft not applicable on this data");var t=e.filters.some((function(e){return"digitalFilter"===e.name&&e.flag}));if(Object.assign(e.data,Object(_e.c)(e.data,{applyZeroShift:!0})),t){var n=e.info.digitalFilter,a=(n-Math.floor(n))*Math.PI*2;Object.assign(e.data,Object(_e.d)(e.data,0,a))}e.data.x=function generateXAxis(e){for(var t=e.info,n=parseFloat(t.baseFrequency),a=parseFloat(t.frequencyOffset),i=parseFloat(t.spectralWidth),o=a/n,r=.5*i,c=e.data.x.length,l=o-r,s=i/(c-1),u=new Array(c),d=0;d<c;d++)u[d]=l,l+=s;return u}(e),e.info=Object(g.a)(Object(g.a)({},e.info),{},{isFid:!1})}function fft_isApplicable(e){return!(!e.info.isComplex||!e.info.isFid)}function fft_reduce(){return{once:!0,reduce:void 0}}var wa="fromTo",Ta="From/To";function fromTo_apply(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!fromTo_isApplicable(e))throw new Error("From/To filter not applicable on this data");var n=e.data,a=n.x,i=n.re,o=n.im,r=t.from,c=t.to,l=Object(_e.g)(a,{from:r,to:c}),s=l.fromIndex,u=l.toIndex;e.data.x=a.slice(s,u),e.data.re=i.slice(s,u),o&&(e.data.im=o.slice(s,u))}function fromTo_isApplicable(e){return!(!e.info.isComplex||e.info.isFid)}function fromTo_reduce(e,t){return{once:!0,reduce:t}}var Ma="lineBroadening",Aa="Line broadening";function lineBroadening_apply(e,t){if(!lineBroadening_isApplicable(e))throw new Error("lineBroadening not applicable on this data");var n,a=e.info.digitalFilter;n=a>0?Math.floor(a):0;for(var i=e.data.re,o=e.data.im,r=e.data.x,c=i.length,l=new Float64Array(c),s=new Float64Array(c),u=(r[c-1]-r[0])/(c-1),d=-t*Math.exp(1),b=Math.exp(d*u),p=Math.exp(d*r[0]),f=0;f<c-n;f++)l[f]=i[f]*p,s[f]=o[f]*p,p*=b;p=Math.exp(d*r[0]);for(var h=c;h>c-n;h--)l[h]=i[h]*p,s[h]=o[h]*p,p*=b;e.data=Object(g.a)(Object(g.a)({},e.data),{re:l,im:s})}function lineBroadening_isApplicable(e){return!(!e.info.isComplex||!e.info.isFid)}function lineBroadening_reduce(e,t){return{once:!0,reduce:e+t}}var Ea="phaseCorrection",Pa="Phase correction";function phaseCorrection_apply(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!phaseCorrection_isApplicable(e))throw new Error("phaseCorrection not applicable on this data");var n=t.ph0,a=t.ph1;n*=Math.PI/180,a*=Math.PI/180,Object.assign(e.data,Object(_e.d)(e.data,n,a))}function phaseCorrection_isApplicable(e){return!(!e.info.isComplex||e.info.isFid)}function phaseCorrection_reduce(e,t){var n=Object.assign({},e);for(var a in n)n[a]+=t[a];return{once:!0,reduce:n}}var Ia="shiftX",Fa="Shift X";function shiftX_apply(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;e.data.x=e.data.x.map((function(e){return e+t}))}function shiftX_isApplicable(){return!0}function shiftX_reduce(e,t){return{once:!0,reduce:e+t}}var Ra="zeroFilling",Na="Zero Filling";function zeroFilling_apply(e,t){if(!zeroFilling_isApplicable(e))throw new Error("zeroFilling not applicable on this data");var n,a=e.filters.some((function(e){return"digitalFilter"===e.name&&e.flag})),i=e.info.digitalFilter;n=i>0&&a?Math.floor(i):0;var o=e.data,r=o.re,c=o.im,l=o.x,s=new Float64Array(t),u=new Float64Array(t),d=new Float64Array(t),b=Math.min(t,r.length);s.set(r.slice(0,b-n)),u.set(c.slice(0,b-n)),d.set(l.slice(0,b-n));for(var p=l[1]-l[0],f=l[b-n-1],h=b-n;h<t;h++)f+=p,d[h]=f;n>0&&n<t&&(s.set(r.slice(r.length-n),t-n),u.set(c.slice(r.length-n),t-n)),e.data=Object(g.a)(Object(g.a)({},e.data),{re:s,im:u,x:d})}function zeroFilling_isApplicable(e){return!(!e.info.isComplex||!e.info.isFid)}function zeroFilling_reduce(e,t){return{once:!0,reduce:t}}var _a="shift2DX",La="Shift 2D X";function filter2d_shiftX_apply(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;e.data.minX+=t,e.data.maxX+=t}function filter2d_shiftX_isApplicable(){return!0}function filter2d_shiftX_reduce(e,t){return{once:!0,reduce:e+t}}var za="shift2DY",Ha="Shift 2D Y";function shiftY_apply(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;e.data.minY+=t,e.data.maxY+=t}function shiftY_isApplicable(){return!0}function shiftY_reduce(e,t){return{once:!0,reduce:e+t}}var Ba={absolute:a,baselineCorrection:o,lineBroadening:u,fft:l,phaseCorrection:d,autoPhaseCorrection:i,shiftX:b,zeroFilling:p,digitalFilter:r,fromTo:s,equallySpaced:c,shift2DX:f,shift2DY:h},Xa={zoom:{id:"zoom",label:"Zoom",hasOptionPanel:!1,isFilter:!1},peakPicking:{id:"peakPicking",label:"Peaks Picking",hasOptionPanel:!0,isFilter:!1},integral:{id:"integral",label:"integral Tool",hasOptionPanel:!1,isFilter:!1},zone2D:{id:"zone2D",label:"Zone Tool",hasOptionPanel:!0,isFilter:!1},slicingTool:{id:"slicingTool",label:"Slicing Tool",hasOptionPanel:!1,isFilter:!1},HMove:{id:"HMove",label:"Move spectrum horizontally",hasOptionPanel:!1,isFilter:!1},equalizerTool:{id:"equalizerTool",label:"Equalizer Tool",hasOptionPanel:!1,isFilter:!1},rangesPicking:{id:"rangesPicking",label:"Ranges Picking ( Press r )",hasOptionPanel:!0,isFilter:!1},zeroFilling:{id:Ba.zeroFilling.id,label:Ba.zeroFilling.name,hasOptionPanel:!0,isFilter:!0},phaseCorrection:{id:Ba.phaseCorrection.id,label:"".concat(Ba.phaseCorrection.name," ( Press a )"),hasOptionPanel:!0,isFilter:!0},baseLineCorrection:{id:"baseLineCorrection",label:"baseline correction ( Press b )",hasOptionPanel:!0,isFilter:!0},generalSelector:{id:"generalSelector",label:"range general selecttor",hasOptionPanel:!1,isFilter:!1},editRange:{id:"editRange",label:"edit range",hasOptionPanel:!1,isFilter:!1},multipleSpectraAnalysis:{id:"multipleSpectraAnalysis",label:"Multiple Spectra Analysis",hasOptionPanel:!1,isFilter:!1},exclusionZones:{id:"exclusionZones",label:"Exclusion Zones",hasOptionPanel:!1,isFilter:!1}},Va={transformOrigin:"top left",position:"absolute",top:"0px",left:"0px",zoom:"100%"},Ya=[Xa.zoom.id,Xa.zeroFilling.id,Xa.peakPicking.id,Xa.integral.id,Xa.phaseCorrection.id,Xa.baseLineCorrection.id,Xa.rangesPicking.id,Xa.zone2D.id,Xa.slicingTool.id,Xa.editRange.id,Xa.multipleSpectraAnalysis.id,Xa.exclusionZones.id],Za=1,Ua=2,Ka=3;function BrushXY(e){var t=e.brushType,n=e.dimensionBorder,a=e.width,i=e.height,o=useChartData(),r=o.width,c=o.height,l=o.selectedTool,s=Object(y.useContext)(I),u=s.startX,d=s.endX,b=s.startY,p=s.endY,f=s.step;if(!Ya.includes(l)||"brushing"!==f||!n||n.startX&&u<n.startX||n.startY&&b<n.startY||(n.endX&&1===Math.sign(d-u)?d>n.endX:d<n.startX)&&(n.endX&&1===Math.sign(p-b)?p>n.endY:p<n.startY))return null;r=a||r,c=i||c,d=n.endX&&d>n.endX?n.endX:n.startX&&d<n.startX?n.startX:d,p=n.endY&&p>n.endY?n.endY:n.startY&&p<n.startY?n.startY:p;var h=t===Za||t===Ka?(d-u)/r:1;u=t===Za||t===Ka?u:0;var m=t===Ua||t===Ka?(p-b)/c:1;return b=t===Ua||t===Ka?b:0,Object(P.jsx)("div",{style:Object(g.a)(Object(g.a)({},Va),{},{transform:"translate(".concat(u,"px, ").concat(b,"px) scale(").concat(h,",").concat(m,")"),willChange:"transform"}),children:Object(P.jsx)("svg",{width:r,height:c,children:Object(P.jsx)("rect",{x:"0",y:"0",width:r,height:c,fill:"gray",opacity:"0.2"})})})}BrushXY.defaultProps={brushType:Ka,dimensionBorder:{startX:0,startY:0},width:null,height:null};var Wa=BrushXY,Ga={line:{stroke:"black",strokeOpacity:"1",shapeRendering:"crispEdges",strokeWidth:"1",willChange:"transform"}},qa=[Xa.zoom.id,Xa.equalizerTool.id,Xa.baseLineCorrection.id,Xa.zone2D.id,Xa.slicingTool.id,Xa.integral.id,Xa.rangesPicking.id,Xa.editRange.id,Xa.multipleSpectraAnalysis.id,Xa.exclusionZones.id];var Ja=function CrossLinePointer(){var e=useChartData(),t=e.height,n=e.width,a=e.margin,i=e.selectedTool,o=Object(y.useContext)(N),r=Object(y.useContext)(I);return!qa.includes(i)||"brushing"===r.step||!o||o.x>n-a.right||o.y>t-a.bottom||!n||!t?null:Object(P.jsx)("div",{style:{willChange:"transform",cursor:"crosshair",transform:"translate(".concat(-n+o.x,"px, ").concat(-t+o.y,"px)"),position:"absolute",top:0,left:0,pointerEvents:"none",overflow:"visible",width:2*n,height:2*t},children:Object(P.jsxs)("svg",{width:2*n,height:2*t,children:[Object(P.jsx)("line",{style:Ga.line,x1:n,y1:"0",x2:n,y2:2*t},"vertical_line"),Object(P.jsx)("line",{style:Ga.line,x1:"0",y1:t,x2:2*n,y2:t},"horizontal_line")]})},"crossLine")},$a=n(570),Qa=new(n.n($a).a),ei={on:function on(e,t){return Qa.on(e,t)},once:function once(e,t){return Qa.once(e,t)},off:function off(e,t){return Qa.off(e,t)},emit:function emit(e,t){return Qa.emit(e,t)}};Object.freeze(ei);var ti=ei;function DeleteButton(e){var t=e.x,n=e.y,a=e.onDelete,i=e.fill;return Object(P.jsxs)("svg",{className:"delete-button",x:t,y:n,onClick:a,"data-no-export":"true",children:[Object(P.jsx)("rect",{rx:"5",width:"16",height:"16",fill:i}),Object(P.jsx)("line",{x1:"5",x2:"10",y1:"8",y2:"8",stroke:"white",strokeWidth:"2"})]})}DeleteButton.defaultProps={onDelete:function onDelete(){return null},fill:"#c81121",x:"initial",y:"initial"};var ni,ai=DeleteButton,ii=Object(v.b)(ni||(ni=Object(j.a)(["\n  pointer-events: bounding-box;\n  user-select: 'none';\n  -webkit-user-select: none; /* Chrome all / Safari all */\n  -moz-user-select: none; /* Firefox all */\n\n  .zone-area {\n    height: 100%;\n    fill: #b8b8b857;\n    cursor: pointer;\n  }\n  .delete-button {\n    display: none;\n    cursor: pointer;\n  }\n  :hover .delete-button {\n    display: block;\n  }\n"])));var oi=function BaseLineZones(){var e=useChartData().baseLineZones,t=useScale().scaleX,n=useDispatch(),a=Object(y.useCallback)((function(e){n({type:wn,id:e})}),[n]);return e&&Array.isArray(e)&&e.length>0&&Object(ve.b)("g",{children:e.map((function(e){return Object(ve.c)("g",{transform:"translate(".concat(t()(e.to),",0)"),css:ii,children:[Object(ve.b)(ai,{x:-20,y:10,onDelete:function onDelete(){return a(e.id)}}),Object(ve.b)("rect",{x:"0",width:"".concat(t()(e.from)-t()(e.to)),className:"zone-area"})]},e.id)}))})},ri=n(188);var ci,li=function ExclusionZonesWrapper(e){var t=function Wrapper(t){var n=useChartData(),a=n.exclusionZones,i=n.activeTab;return Object(P.jsx)(e,Object(g.a)(Object(g.a)({},t),{},{exclusionZones:a[i]?a[i]:null}))};return function(e){return Object(P.jsx)(t,Object(g.a)({},e))}},si=Object(v.b)(ci||(ci=Object(j.a)(["\n  pointer-events: bounding-box;\n  user-select: 'none';\n  -webkit-user-select: none; /* Chrome all / Safari all */\n  -moz-user-select: none; /* Firefox all */\n\n  .zone-area {\n    height: 100%;\n    fill: #dddddd;\n    cursor: pointer;\n  }\n  .zone-area.active {\n    fill: #ff6f0057;\n  }\n"]))),ui=function ExclusionZone(e){var t=e.zone,n=useScale().scaleX,a=Object(ri.c)([t.id],ri.b.EXCLUSION_ZONE);return Object(ve.b)("g",Object(g.a)(Object(g.a)({transform:"translate(".concat(n()(t.to),",0)"),css:si},a.onHover),{},{children:Object(ve.b)("rect",{x:"0",width:"".concat(n()(t.from)-n()(t.to)),className:"zone-area ".concat(a.isActive&&"active")})}),t.id)};var di=li((function ExclusionZones(e){var t=e.exclusionZones;return t?Object(ve.b)("g",{className:"exclusionZones",children:t.map((function(e){return Object(ve.b)(ui,{zone:e},e.id)}))}):null})),bi={showAbsolute:!1,absoluteFormat:"0.00",showRelative:!0,relativeFormat:"0.00",color:"#000000",strokeWidth:1},pi={showFrom:!1,fromFormat:"0.00",showTo:!1,toFormat:"0.00",showAbsolute:!1,absoluteFormat:"0.00",showRelative:!0,relativeFormat:"0.00"},fi={showPeakNumber:!0,peakNumberFormat:"0",showPeakIndex:!1,peakIndexFormat:"0.00",showDeltaPPM:!0,deltaPPMFormat:"0.00",showDeltaHz:!1,deltaHzFormat:"0.00",showPeakWidth:!1,peakWidthFormat:"00.0000",showIntensity:!0,intensityFormat:"0.00"},hi=n(343),gi=n.n(hi);var mi,ji,vi=function Resizable(e){var t=e.from,n=e.to,a=e.onDrag,i=void 0===a?function(){return null}:a,o=e.onDrop,r=useChartData(),c=r.height,l=r.margin,s=r.mode,u=Object(y.useState)(!1),d=Object(m.a)(u,2),b=d[0],p=d[1],f=Object(y.useState)(!1),h=Object(m.a)(f,2),g=h[0],j=h[1],v=Object(y.useState)(!0),O=Object(m.a)(v,2),x=O[0],C=O[1],k=Object(y.useRef)(null),S=Object(y.useRef)(null),D=useScale().scaleX,w=Object(y.useCallback)((function(e){e.preventDefault(),e.stopPropagation(),p(!0)}),[]),T=Object(y.useCallback)((function(e){i({from:D().invert(e.layerX)})}),[i,D]),M=Object(y.useCallback)((function(e){e.preventDefault(),e.stopPropagation(),p(!1);var a="RTL"===s?[D().invert(e.layerX),n]:[n,D().invert(e.layerX)];o(a[1]>a[0]?{from:a[0],to:a[1]}:{from:t,to:n})}),[t,s,o,D,n]),A=Object(y.useCallback)((function(e){e.preventDefault(),e.stopPropagation(),j(!0)}),[]),E=Object(y.useCallback)((function(e){i({to:D().invert(e.layerX)})}),[i,D]),P=Object(y.useCallback)((function(e){e.preventDefault(),e.stopPropagation(),j(!1);var a="RTL"===s?[t,D().invert(e.layerX)]:[D().invert(e.layerX),t];o(a[1]>a[0]?{from:a[0],to:a[1]}:{from:t,to:n})}),[t,s,o,D,n]),I=Object(y.useCallback)((function(e){e.shiftKey&&C(!1)}),[]),F=Object(y.useCallback)((function(){C(!0)}),[]),R=Object(y.useCallback)((function(e){var t=e.target,n=e.shiftKey;t.style.cursor=n?"crosshair":"ew-resize"}),[]);return Object(ve.c)(y.Fragment,{children:[Object(ve.b)(gi.a,{axis:"x",defaultPosition:{x:D()(t),y:0},position:{x:D()(t),y:0},scale:1,handle:".handle",onStart:w,onDrag:T,onStop:M,nodeRef:k,children:Object(ve.b)("rect",{ref:k,className:x?"handle":"",width:b?1:6,fill:"red",height:c+l.top,style:{fillOpacity:b?1:0},onMouseDownCapture:I,onMouseUpCapture:F,onMouseEnter:R})}),Object(ve.b)(gi.a,{axis:"x",defaultPosition:{x:D()(n),y:0},position:{x:D()(n),y:0},handle:".handle",scale:1,onStart:A,onDrag:E,onStop:P,nodeRef:S,children:Object(ve.b)("rect",{ref:S,className:x?"handle":"",width:g?1:6,fill:"red",height:c+l.top,style:{fillOpacity:g?1:0},onMouseDownCapture:I,onMouseUpCapture:F,onMouseEnter:R})})]})},Oi=Object(v.b)(mi||(mi=Object(j.a)(["\n  pointer-events: bounding-box;\n  @-moz-document url-prefix() {\n    pointer-events: fill;\n  }\n  // // disabled because Resizable component appears now when hovering over it\n  // :hover .target {\n  //   visibility: visible !important;\n  //   cursor: pointer;\n  // }\n  .highlight {\n    fill: transparent;\n  }\n  .target {\n    visibility: hidden;\n  }\n"]))),xi=Object(v.b)(ji||(ji=Object(j.a)(["\n  pointer-events: bounding-box;\n\n  @-moz-document url-prefix() {\n    pointer-events: fill;\n  }\n  fill: #ff6f0057;\n\n  .target {\n    visibility: visible;\n  }\n"])));var yi=function IntegralResizable(e){var t=e.integralData,n=useChartData(),a=n.height,i=n.margin,o=useScale().scaleX,r=Object(y.useState)(t),c=Object(m.a)(r,2),l=c[0],s=l.id,u=l.integral,d=l.from,b=l.to,p=c[1],f=Object(ri.c)([s],ri.b.INTEGRAL),h=useDispatch(),j=Object(y.useCallback)((function(e){h({type:Qt,data:Object(g.a)(Object(g.a)({},t),e)})}),[h,t]),v=Object(y.useCallback)((function(){f.show()}),[f]),O=Object(y.useCallback)((function(){f.hide()}),[f]),x=Object(y.useCallback)((function(e){p((function(t){return Object(g.a)(Object(g.a)({},t),e)}))}),[]),C=d?o()(d):0,k=b?o()(b):0;return Object(ve.b)(y.Fragment,{children:Object(ve.c)("g",{css:f.isActive?xi:Oi,onMouseEnter:v,onMouseLeave:O,children:[Object(ve.b)("rect",{"data-no-export":"true",x:"".concat(k),y:"0",width:"".concat(C-k),height:a-i.bottom,className:"highlight"}),Object(ve.b)("text",{x:k,y:a-i.bottom+30,fill:"black",style:{fontSize:"12px",fontWeight:"bold"},children:void 0!==u?u.toFixed(2):""}),Object(ve.b)(vi,{from:t.from,to:t.to,onDrag:x,onDrop:j,"data-no-export":"true"})]})})};var Ci=function Integral(e){var t=e.integralData,n=e.x,a=e.y,i=e.xDomain,o=e.isActive,r=e.spectrumID,c=e.scaleY,l=e.scaleX,s=t.from,u=t.to,d=usePreferences(),b=Object(y.useMemo)((function(){var e=rt(d,"formatting.panels.integrals")||{},t=e.color,n=void 0===t?bi.color:t,a=e.strokeWidth;return{color:n,strokeWidth:void 0===a?bi.strokeWidth:a}}),[d]),p=Object(y.useMemo)((function(){return Object(_e.j)({x:n,y:a},{from:s,to:u,reverse:!0})}),[s,u,n,a]),f=Object(y.useCallback)((function(){if(p&&c){var e=Object(_e.n)(p,{from:i[0],to:i[1],nbPoints:200,optimize:!0}),t="M ".concat(l()(e.x[0])," ").concat(c(e.y[0]));return t+=e.x.slice(1).reduce((function(t,n,a){return t+=" L ".concat(l()(n)," ").concat(c(e.y[a+1]))}),"")}return""}),[p,l,c,i]);return Object(P.jsxs)(y.Fragment,{children:[Object(P.jsx)("path",{className:"line",stroke:b.color,strokeWidth:b.strokeWidth,fill:"none",style:{transformOrigin:"center top",opacity:o?1:.2},d:f()}),Object(P.jsx)(yi,{spectrumID:r,integralData:t,scaleY:c})]})};var ki=function IntegralsSeries(){var e=useChartData(),t=e.xDomain,n=e.activeSpectrum,a=e.data,i=e.height,o=e.margin,r=e.verticalAlign,c=e.integralsYDomains,l=e.displayerKey,s=useScale().scaleX,u=Object(y.useMemo)((function(){return n&&c[n.id]?function getIntegralYScale(e,t){var n=e.height,a=e.margin,i=e.verticalAlign,o=e.integralsYDomains,r=i.flag&&!i.stacked?n/2:n;return Object(Qe.f)(o[t],[r-(a.bottom+.3*r),a.top])}({height:i,margin:o,verticalAlign:r,integralsYDomains:c},n.id):null}),[n,i,c,o,r]),d=Object(y.useMemo)((function(){var e=function IsActive(e){return null===n||e===n.id};return a&&a[0]&&a.filter((function(e){return!0===e.display.isVisible&&!0===e.display.isVisibleInDomain})).map((function(n){return n.integrals&&n.integrals.values&&n.integrals.values.map((function(a){return Object(P.jsx)(Ci,{spectrumID:n.id,integralData:a,x:n.data.x,y:n.data.y,isActive:e(n.id),xDomain:t,scaleY:u,scaleX:s},a.id)}))}))}),[n,a,s,u,t]);return Object(P.jsx)("g",{clipPath:"url(#".concat(l,"clip-chart-1d)"),children:d})};var Si=function Line(e){var t=e.data,n=e.id,a=e.display,i=e.index,o=useChartData(),r=o.xDomain,c=o.activeSpectrum,l=o.verticalAlign,s=usePreferences(),u=useScale(),d=u.scaleX,b=u.scaleY,p=Object(y.useMemo)((function(){return null===c||n===c.id}),[c,n]),f=Object(y.useMemo)((function(){return l.flag&&l.stacked?i*l.value:0}),[i,l.flag,l.stacked,l.value]),h=Object(y.useMemo)((function(){var e=d(),a=b(n);if((null===t||void 0===t?void 0:t.x)&&(null===t||void 0===t?void 0:t.y)&&e(0)){var i=Object(_e.n)({x:t.x,y:t.y},{from:r[0],to:r[1]}),o="M ".concat(e(i.x[0])," ").concat(a(i.y[0])," ");return o+=i.x.slice(1).reduce((function(t,n,o){return t+=" L ".concat(e(n)," ").concat(a(i.y[o+1]))}),"")}return""}),[n,d,b,t,r]);return Object(P.jsx)("path",{className:"line",stroke:a.color,fill:"none",style:{opacity:p?1:x()(s,"controllers.dimmedSpectraTransparency",.1)},d:h,transform:"translate(0,-".concat(f,")")},n)};var Di=function LinesSeries(){var e=useChartData(),t=e.data,n=e.tempData,a=e.displayerKey,i=n||t;return Object(P.jsx)("g",{clipPath:"url(#".concat(a,"clip-chart-1d)"),children:i&&i.filter((function(e){return!0===e.display.isVisible&&!0===e.display.isVisibleInDomain})).map((function(e,t){return Object(P.jsx)(Si,Object(g.a)(Object(g.a)({},e),{},{index:t}),e.id)}))})},wi=n(187),Ti=n(571),Mi=n.n(Ti);function useFormatNumberByNucleus(e){var t=usePreferences(),n=x()(t,"formatting.nucleusByKey",{ppm:"0.0",hz:"0.0"}),a=function formatFun(e){return function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"ppm",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return i+Mi()(Number(t)).format(x()(n,"".concat(e.toLowerCase(),".").concat(a),"0.0"))+o}};if(e){if("string"===typeof e)return a(e);if(Array.isArray(e))return e.map((function(e){return a(e)}));throw Error("nuclus must be string or array of string")}}function getNumberOfDecimals(e){var t=(e=String(e).trim()).lastIndexOf(".");return t>0?e.substr(t).split("").length-1:0}var Ai,Ei=function FormatNumber(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return n+Mi()(e).format(t)+a},Pi=Object(v.b)(Ai||(Ai=Object(j.a)(["\n  user-select: 'none';\n  -webkit-user-select: none; /* Chrome all / Safari all */\n  -moz-user-select: none; /* Firefox all */\n\n  text,\n  input {\n    -webkit-user-select: none; /* Safari 3.1+ */\n    -moz-user-select: none; /* Firefox 2+ */\n    -ms-user-select: none; /* IE 10+ */\n    user-select: none; /* Standard syntax */\n  }\n\n  input[type='number']::-webkit-outer-spin-button,\n  input[type='number']::-webkit-inner-spin-button {\n    -webkit-appearance: none;\n    margin: 0;\n  }\n\n  input[type='number'] {\n    -moz-appearance: textfield;\n  }\n\n  .notification-input {\n    width: calc(100% - 10px) !important;\n    user-select: 'none';\n    -webkit-user-select: none; /* Chrome all / Safari all */\n    -moz-user-select: none; /* Firefox all */\n  }\n\n  .notification-input-normal {\n    opacity: 1;\n    left: 4px;\n    position: absolute;\n    font-size: 10px;\n    outline: none;\n    user-select: 'none';\n    -webkit-user-select: none; /* Chrome all / Safari all */\n    -moz-user-select: none; /* Firefox all */\n    background-color: transparent;\n  }\n\n  .notification-input-normal input:focus {\n    outline: none;\n    background-color: white;\n  }\n\n  .input-over {\n    background-color: white;\n    outline: none;\n  }\n\n  .notification-label {\n    display: none;\n  }\n\n  .notification-group-over {\n    z-index: 9999999999;\n  }\n\n  .notification-group {\n    z-index: 1;\n  }\n\n  .notifcate-selected {\n    opacity: 0;\n  }\n\n  input[type='number']::-webkit-inner-spin-button,\n  input[type='number']::-webkit-outer-spin-button {\n    -webkit-appearance: none;\n    margin: 0;\n  }\n"])));var Ii=function PeakNotation(e){var t=e.id,n=e.x,a=e.y,i=e.sign,o=e.value,r=e.color,c=e.isActive,l=e.nucleus,s=Object(y.useRef)(),u=Object(y.useState)(!1),d=Object(m.a)(u,2),b=d[0],p=d[1],f=Object(y.useState)(o),h=Object(m.a)(f,2),g=h[0],j=h[1],O=Object(y.useState)({width:0,height:0}),x=Object(m.a)(O,2),C=x[0],k=x[1],S=useFormatNumberByNucleus(l),D=Object(ri.c)([t],ri.b.PEAK),w=useDispatch(),T=Object(y.useCallback)((function(e){return w({type:Dt,shiftValue:e.shiftValue})}),[w]);Object(y.useLayoutEffect)((function(){var e=s.current.getBBox();k({width:e.width,height:e.height})}),[b]),Object(y.useEffect)((function(){j(o)}),[o]);var M=Object(y.useCallback)((function(e){if("Enter"===e.key){var n=parseFloat(e.target.value),a=parseFloat(o),i=parseFloat(e.target.value)-parseFloat(o);T({id:t,value:n,oldValue:a,shiftValue:i}),e.target.blur(),p(!1)}else 27===e.keyCode&&(j(o),e.target.blur(),p(!1))}),[o,T,t]),A=Object(y.useCallback)((function(e){j(e.target.value)}),[]),E=Object(y.useCallback)((function(e){return e.preventDefault(),e.stopPropagation(),p(!0),!1}),[]),P=Object(y.useCallback)((function(){D.show()}),[D]),I=Object(y.useCallback)((function(){D.hide()}),[D]),F=Object(y.useMemo)((function(){return b?o:S(o)}),[S,b,o]),R=Object(y.useMemo)((function(){return b?g:S(g)}),[g,S,b]);return Object(ve.c)(y.Fragment,{children:[Object(ve.b)(v.a,{styles:Pi}),Object(ve.c)("g",{id:t,style:{outline:"none"},transform:"translate(".concat(n,", ").concat(a,")"),onMouseEnter:P,onMouseLeave:I,children:[Object(ve.b)("line",{x1:"0",x2:"0",y1:-1===i?10:0,y2:-1===i?28:-18,stroke:r,strokeWidth:D.isActive?"7px":"1px"}),Object(ve.b)("text",{ref:s,className:"peaks-text",x:"0",y:-1===i?28:-12,dy:"0",dx:"0.35em",fill:"transparent",fontSize:"10px",fontWeight:"100",style:{position:"absolute"},children:F}),Object(ve.b)("foreignObject",{x:"0",y:-1===i?16:-22,dy:"0.1em",dx:"0.35em",width:C.width+20,height:"40px","data-no-export":"true",children:Object(ve.b)("div",{style:{width:C.width+20,height:"100%",paddingRight:5},xmlns:"http://www.w3.org/1999/xhtml",children:Object(ve.b)("input",{onClick:E,className:b?"notification-input input-over":"notification-input-normal",style:{width:"inherit",border:b?"1px solid ".concat(r):"0",opacity:c?1:.2,userSelect:"none",color:r},value:R,onKeyDown:M,onChange:A,type:"number",disabled:!c})})})]})]})};var Fi,Ri,Ni=function PeaksNotations(){var e=useChartData(),t=e.data,n=e.activeSpectrum,a=e.verticalAlign,i=e.displayerKey,o=useScale(),r=o.scaleX,c=o.scaleY,l=Object(y.useMemo)((function(){var e=function getVerticalAlign(e){var n=t.findIndex((function(t){return t.id===e}));return a.flag&&a.stacked?(n+1)*a.value:0};return t&&function reSortData(){var e=Object(wi.a)(t);return n?e.sort((function(e,t){return e.id===n.id?1:t.id===n.id?-1:0})):e}().filter((function(e){return!0===e.display.isVisible&&!0===e.display.isVisibleInDomain})).map((function(t){return t.peaks&&t.peaks.values&&t.display.isPeaksMarkersVisible&&Object(P.jsx)("g",{transform:"translate(0,-".concat(e(t.id),")"),children:t.peaks.values.map((function(e){var a=e.delta,i=e.intensity,o=e.id;return Object(P.jsx)(Ii,{x:r()(a),y:c(t.id)(i)-5,sign:Math.sign(i),id:o,spectrumID:t.id,value:a,color:"#730000",nucleus:t.info.nucleus,isActive:null!=n&&n.id===t.id},o)}))},t.id)}))}),[t,a.flag,a.stacked,a.value,n,r,c]);return Object(P.jsx)("g",{className:"peaks",clipPath:"url(#".concat(i,"clip-chart-1d)"),children:l})},_i=n(2),Li=n.n(_i),zi=Object(v.b)(Fi||(Fi=Object(j.a)(["\n  user-select: none;\n\n  path,\n  line {\n    fill: none;\n    stroke: black;\n    stroke-width: 1;\n    shape-rendering: crispEdges;\n    user-select: none;\n  }\n"]))),Hi=Object(v.b)(Ri||(Ri=Object(j.a)(["\n  user-select: none;\n\n  line {\n    stroke: rgb(104, 104, 104);\n    stroke-opacity: 0.2;\n    shape-rendering: crispEdges;\n    stroke-dasharray: 3;\n    stroke-width: 1;\n    user-select: none;\n  }\n\n  path {\n    stroke-width: 0;\n  }\n"])));function XAxis(e){var t=e.label,n=e.show,a=e.showGrid,i=e.mode,o=useChartData(),r=o.xDomain,c=o.height,l=o.width,s=o.margin,u=useScale().scaleX,d=Object(y.useRef)(),b=Object(y.useRef)();t=t||("RTL"===i?"\u03b4 [ppm]":"time [s]"),Object(y.useEffect)((function(){var e=Qe.a().ticks(8).tickFormat(Qe.d("0")),t=Qe.a().ticks(50).tickSize(-(c-s.top-s.bottom)).tickFormat("");n&&u&&(Qe.g(d.current).call(e.scale(u().domain(r))),Qe.g(b.current).call(t.scale(u().domain(r))))}),[c,s.bottom,s.top,u,n,r]);var p=Object(y.useMemo)((function(){return n&&!0===n&&Object(ve.b)("g",{className:"x",css:zi,transform:"translate(0,".concat(c-s.bottom,")"),ref:d,children:Object(ve.b)("text",{fill:"#000",x:l-10,y:"30",dy:"0.70em",textAnchor:"end",children:t})})}),[c,t,s.bottom,n,l]),f=Object(y.useMemo)((function(){return a&&!0===a&&Object(ve.b)("g",{css:Hi,className:"grid",ref:b,transform:"translate(0,".concat(c-s.bottom,")")})}),[a,c,s.bottom]);return l&&c&&u?Object(ve.c)(ve.a,{children:[p,f]}):null}XAxis.propTypes={showGrid:Li.a.bool,show:Li.a.bool,label:Li.a.string},XAxis.defaultProps={showGrid:!1,show:!0,label:""};var Bi=XAxis;var Xi,Vi,Yi=function MultiAnalysisWrapper(e){var t=function Wrapper(t){var n=useChartData(),a=n.activeTab,i=n.spectraAnalysis,o=n.displayerKey,r=t.forwardedRef,c=Object(de.a)(t,["forwardedRef"]);return Object(P.jsx)(e,Object(g.a)(Object(g.a)({},c),{},{activeTab:a,spectraAnalysis:i,displayerKey:o,ref:r}))};return Object(y.forwardRef)((function(e,n){return Object(P.jsx)(t,Object(g.a)(Object(g.a)({},e),{},{forwardedRef:n}))}))},Zi=Object(v.b)(Xi||(Xi=Object(j.a)(["\n  pointer-events: bounding-box;\n  @-moz-document url-prefix() {\n    pointer-events: fill;\n  }\n  user-select: 'none';\n  -webkit-user-select: none; /* Chrome all / Safari all */\n  -moz-user-select: none; /* Firefox all */\n\n  .delete-button {\n    visibility: hidden;\n  }\n"]))),Ui=Object(v.b)(Vi||(Vi=Object(j.a)(["\n  pointer-events: bounding-box;\n\n  @-moz-document url-prefix() {\n    pointer-events: fill;\n  }\n  .range-area {\n    height: 100%;\n    fill: #ff6f0057;\n  }\n  .delete-button {\n    visibility: visible;\n    cursor: pointer;\n  }\n"])));var Ki=function AnalysisRange(e){var t=e.rangeData,n=e.columnKey,a=t.from,i=t.to,o=Object(ri.c)([n]),r=useScale().scaleX,c=useDispatch(),l=Object(y.useCallback)((function(){c({type:Kn,colKey:n})}),[n,c]),s=Object(y.useCallback)((function(e){c({type:Wn,payload:Object(g.a)(Object(g.a)(Object(g.a)({},t),e),{},{columnKey:n})})}),[n,c,t]);return Object(ve.c)("g",Object(g.a)(Object(g.a)({},o.onHover),{},{css:o.isActive?Ui:Zi,children:[Object(ve.c)("g",{transform:"translate(".concat(r()(i),",25)"),children:[Object(ve.b)("rect",{x:"0",width:r()(a)-r()(i),height:"6",className:"range-area",fill:"green"}),Object(ve.b)("text",{textAnchor:"middle",x:(r()(a)-r()(i))/2,y:"-5",fontSize:"12",fill:"red",fontWeight:"bolder",fillOpacity:o.isActive?1:.6,children:n})]}),Object(ve.b)(vi,{from:t.from,to:t.to,onDrop:s}),Object(ve.b)(ai,{x:r()(i)-20,y:10,onDelete:l})]}))};function MultiAnalysisRanges(e){var t=e.activeTab,n=e.spectraAnalysis,a=e.displayerKey,i=Object(y.useMemo)((function(){return(n[t]||{options:{columns:{}}}).options.columns}),[t,n]),o=Object(y.useMemo)((function(){return Object.keys(i).map((function(e){return e}),[])}),[i]);return o&&0!==o.length?Object(P.jsx)("g",{clipPath:"url(#".concat(a,"clip-chart-1d)"),children:o.map((function(e){return Object(P.jsx)(Ki,{columnKey:e,rangeData:i[e]},e)}))}):null}var Wi=Yi(Object(y.memo)(MultiAnalysisRanges));var Gi=function RangesWrapper(e){var t=function Wrapper(t){var n=useChartData(),a=n.data,i=n.activeSpectrum,o=n.xDomain,r=n.activeTab,c=n.molecules,l=n.tabActiveSpectrum,s=n.displayerKey,u=n.selectedTool,d=usePreferences(),b=Object(y.useMemo)((function(){return a&&i&&i.id?a.find((function(e){return e.id===i.id}))||{ranges:{},x:[],y:[],info:{}}:{}}),[i,a]),p=b.ranges,f=void 0===p?{}:p,h=b.x,m=void 0===h?[]:h,j=b.y,v=void 0===j?[]:j,O=b.info,x=void 0===O?{}:O,C=Object(y.useMemo)((function(){return l&&Object.keys(l).length>0?Object.keys(l):null}),[l]),k=t.forwardedRef,S=Object(de.a)(t,["forwardedRef"]);return Object(P.jsx)(e,Object(g.a)(Object(g.a)({},S),{},{ranges:f,x:m,y:v,info:x,xDomain:o,preferences:d,activeTab:r,molecules:c,nucleus:C,displayerKey:s,selectedTool:u,ref:k}))};return Object(y.memo)(Object(y.forwardRef)((function(e,n){return Object(P.jsx)(t,Object(g.a)(Object(g.a)({},e),{},{forwardedRef:n}))})))},qi=[{key:"signal",label:"Signal",value:"signal"},{key:"reference",label:"Reference",value:"reference"},{key:"solvent",label:"Solvent",value:"solvent"},{key:"impurity",label:"Impurity",value:"impurity"},{key:"standard",label:"Standard",value:"standard"},{key:"p1",label:"P1",value:"p1"},{key:"p2",label:"P2",value:"p2"},{key:"p3",label:"P3",value:"p3"}],Ji=["signal"],$i="signal",Qi="mixed",eo=function getPubIntegral(e){return function getDiaIDs(e){return[].concat(e.diaID||[],e.signal?e.signal.map((function(e){return e.diaID||[]})).flat():[])}(e).length},to=function unlink(e,t,n){return void 0!==t?!0===t?delete e.diaID:void 0!==n&&delete e.signal[n].diaID:function resetDiaIDs(e){delete e.diaID,e.signal.forEach((function(e){delete e.diaID})),delete e.pubIntegral}(e),function setPubIntegral(e){e.pubIntegral=eo(e),0===e.pubIntegral&&delete e.pubIntegral}(e),e},no=function checkRangeKind(e){return e.kind===$i},ao=function unlinkInAssignmentData(e,t){var n=t.reduce((function(e,t){return e.push(t.id),t.signal&&e.concat(t.signal.map((function(e){return e.id}),[])),e}),[]);e.dispatch({type:"REMOVE_ALL",payload:{id:n,axis:"x"}})},io=Object(y.createContext)();function assignmentReducer(e,t){switch(t.type){case"ADD":var n=Object(g.a)(Object(g.a)({},e),{},{assignment:Object(g.a)({},e.assignment)});return void 0===n.assignment[t.payload.id[0]]&&(n.assignment[t.payload.id[0]]={}),void 0===n.assignment[t.payload.id[0]][t.payload.axis]&&(n.assignment[t.payload.id[0]][t.payload.axis]=[]),n.assignment[t.payload.id[0]][t.payload.axis].includes(t.payload.id[1])||n.assignment[t.payload.id[0]][t.payload.axis].push(t.payload.id[1]),n;case"REMOVE":var a=Object(g.a)(Object(g.a)({},e),{},{assignment:Object(g.a)({},e.assignment)});return void 0!==a.assignment[t.payload.id[0]]&&void 0!==a.assignment[t.payload.id[0]][t.payload.axis]&&(a.assignment[t.payload.id[0]][t.payload.axis]=a.assignment[t.payload.id[0]][t.payload.axis].filter((function(e){return e!==t.payload.id[1]})),0===a.assignment[t.payload.id[0]][t.payload.axis].length&&delete a.assignment[t.payload.id[0]][t.payload.axis],0===Object.keys(a.assignment[t.payload.id[0]]).length&&delete a.assignment[t.payload.id[0]]),a;case"REMOVE_ALL":var i=Object(g.a)(Object(g.a)({},e),{},{assignment:Object(g.a)({},e.assignment)});return t.payload.id.forEach((function(e){void 0!==i.assignment[e]&&void 0!==i.assignment[e][t.payload.axis]&&(delete i.assignment[e][t.payload.axis],0===Object.keys(i.assignment[e]).length&&delete i.assignment[e])})),i;case"SET_IS_ACTIVE":return Object(g.a)(Object(g.a)({},e),{},{isActive:void 0!==t.payload.id&&void 0!==t.payload.axis,activeID:t.payload.id,activeAxis:t.payload.axis});case"SET_IS_ON_HOVER":return Object(g.a)(Object(g.a)({},e),{},{isOnHover:void 0!==t.payload.id,onHoverID:t.payload.id,onHoverAxis:t.payload.axis});case"DELETE_RECORD":var o=Object(g.a)(Object(g.a)({},e),{},{assignment:Object(g.a)({},e.assignment)});return delete o.assignment[t.payload.id],o.isActive&&o.activeID===t.payload.id&&(o.isActive=!1,o.activeID=void 0,o.activeAxis=void 0),o.isOnHover&&o.onHoverID===t.payload.id&&(o.isOnHover=!1,o.onHoverID=void 0,o.onHoverAxis=void 0),o;default:throw new Error("unknown action type: ".concat(t.type))}}var oo={assignment:{},isActive:!1,activeID:void 0,activeAxis:void 0,isOnHover:!1,onHoverID:void 0,onHoverAxis:void 0};function AssignmentProvider(e){var t=e.spectraData,n=Object(y.useReducer)(assignmentReducer,oo),a=Object(m.a)(n,2),i=a[0],o=a[1],r=Object(y.useMemo)((function(){return{assignment:i,dispatch:o}}),[i]);return Object(y.useEffect)((function(){t&&t.forEach((function(e){1===e.info.dimension?e.ranges.values.forEach((function(e){return function initAssignmentDataRanges(e,t){t.dispatch({type:"DELETE_RECORD",payload:{id:e.id}}),(e.diaID||[]).forEach((function(n){return t.dispatch({type:"ADD",payload:{id:[e.id,n],axis:"x"}})})),e.signal.forEach((function(e){return(e.diaID||[]).forEach((function(n){return t.dispatch({type:"ADD",payload:{id:[e.id,n],axis:"x"}})}))}))}(e,r)})):2===e.info.dimension&&e.zones.values.forEach((function(e){return function initAssignmentDataZones(e,t){t.dispatch({type:"DELETE_RECORD",payload:{id:e.id}}),(e.y.diaID||[]).forEach((function(n){return t.dispatch({type:"ADD",payload:{id:[e.id,n],axis:"y"}})})),(e.x.diaID||[]).forEach((function(n){return t.dispatch({type:"ADD",payload:{id:[e.id,n],axis:"x"}})})),e.signal.forEach((function(e){(e.x.diaID||[]).forEach((function(n){return t.dispatch({type:"ADD",payload:{id:[e.id,n],axis:"x"}})})),(e.y.diaID||[]).forEach((function(n){return t.dispatch({type:"ADD",payload:{id:[e.id,n],axis:"y"}})}))}))}(e,r)}))}))}),[t]),Object(P.jsx)(io.Provider,{value:r,children:e.children})}function useAssignmentData(){return Object(y.useContext)(io)}function useAssignment(e){var t=useAssignmentData();if("string"!==typeof e&&"number"!==typeof e||""===e)throw new Error("assignment key must be a non-empty string or number");var n=String(e),a=Object(y.useMemo)((function(){return t.assignment.isActive&&t.assignment.activeID===n}),[t.assignment.activeID,t.assignment.isActive,n]),i=Object(y.useMemo)((function(){return a?t.assignment.activeAxis:void 0}),[t.assignment.activeAxis,a]),o=Object(y.useMemo)((function(){return t.assignment.assignment[n]?t.assignment.assignment[n]:[]}),[t.assignment.assignment,n]),r=Object(y.useMemo)((function(){return t.assignment.isOnHover&&t.assignment.onHoverID===n}),[t.assignment.isOnHover,t.assignment.onHoverID,n]),c=Object(y.useMemo)((function(){return r?t.assignment.onHoverAxis:void 0}),[t.assignment.onHoverAxis,r]),l=Object(y.useCallback)((function(e){t.dispatch({type:"ADD",payload:{id:[n,e],axis:i}})}),[i,t,n]),s=Object(y.useCallback)((function(e){t.dispatch({type:"REMOVE",payload:{id:[n,e],axis:i}})}),[i,t,n]),u=Object(y.useCallback)((function(e){t.dispatch({type:"REMOVE_ALL",payload:{id:[n],axis:e}})}),[t,n]),d=Object(y.useCallback)((function(e){void 0!==o[i]&&o[i].includes(e)?s(e):l(e)}),[i,l,o,s]),b=Object(y.useCallback)((function(){t.dispatch({type:"DELETE_RECORD",payload:{id:n}})}),[t,n]),p=Object(y.useCallback)((function(e){t.dispatch({type:"SET_IS_ACTIVE",payload:{id:a?void 0:n,axis:a||void 0===n?void 0:e}})}),[t,n,a]),f=Object(y.useCallback)((function(e,a){"enter"===e?t.dispatch({type:"SET_IS_ON_HOVER",payload:{id:n,axis:void 0!==n?a:void 0}}):"leave"===e&&t.dispatch({type:"SET_IS_ON_HOVER",payload:{}})}),[t,n]),h=Object(y.useCallback)((function(e){return f("enter",e)}),[f]),g=Object(y.useCallback)((function(e){return f("leave",e)}),[f]);return{id:n,isActive:a,activeAxis:i,assigned:o,add:l,remove:s,removeAll:u,toggle:d,deleteRecord:b,onClick:p,isOnHover:r,onHoverAxis:c,onMouseEnter:h,onMouseLeave:g}}var ro=[{label:"massive (m)",value:"m",multiplicity:null},{label:"singlet (s)",value:"s",multiplicity:1},{label:"doublet (d)",value:"d",multiplicity:2},{label:"triplet (t)",value:"t",multiplicity:3},{label:"quartet (q)",value:"q",multiplicity:4},{label:"quintet (i)",value:"i",multiplicity:5},{label:"sextet (x)",value:"x",multiplicity:6},{label:"septet (p)",value:"p",multiplicity:7},{label:"octet (o)",value:"o",multiplicity:8},{label:"nonet (n)",value:"n",multiplicity:9}];function checkMultiplet(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(void 0===e||0===e.length)return!1;var n=ro.find((function(t){return t.value===e||t.label===e}));return n&&!t.includes(n.value)&&!t.includes(n.label)}function checkMultiplicity(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return void 0!==e&&0!==e.length&&!e.split("").find((function(e){return!checkMultiplet(e,t)}))}function translateMultiplet(e){return 1===e.length?ro.find((function(t){return t.value===e})).label:ro.find((function(t){return t.label===e})).value}function hasCouplingConstant(e){return e.length>1&&(e=translateMultiplet(e)),checkMultiplicity(e,["m","s"])}var co=["red","green","blue","magenta"];var lo=function LevelNode(e){var t=e.signal,n=e.startY,a=e.levelHeight,i=useScale().scaleX;return Object(P.jsx)("line",{x1:i()(t.delta),y1:n,x2:i()(t.delta),y2:n+a,stroke:co[0]},"startLevelNode_".concat(t.id))};var so=function StringNode(e){var t=e.signal,n=e.startY,a=e.levelHeight,i=e.fontSize,o=e.showLabels,r=useScale().scaleX;return Object(P.jsx)("text",{textAnchor:"middle",x:r()(t.delta),y:n+a/2,fontSize:i,lengthAdjust:"spacing",fill:"black",visibility:o?"visible":"hidden",children:t.multiplicity},"multiplicityString_".concat(t.id))};var uo=function TreeNodes(e){var t=e.nodesData,n=e.levelHeight,a=e.startY,i=e.signalID,o=e.labelOptions,r=e.showLabels,c=useScale().scaleX,l=Object(y.useCallback)((function(e){var t=e.startX,l=e._startX,s=e.ratio,u=e.multiplicityIndex,d=e.color,b=2*u+2,p=a+b*n,f=a+(b+1)*n;return Object(P.jsxs)("g",{children:[Object(P.jsx)("text",{textAnchor:"middle",x:c()(l)+o.distance,y:f+n/3*2,fontSize:o.fontSize,fill:d,visibility:r?"visible":"hidden",children:s}),Object(P.jsx)("line",{x1:c()(t),y1:p,x2:c()(l),y2:f,stroke:d}),Object(P.jsx)("line",{x1:c()(l),y1:f,x2:c()(l),y2:f+n,stroke:d})]},"treeNode_".concat(i,"_").concat(t,"_").concat(l,"_").concat(s))}),[i,o.distance,o.fontSize,c,r,a,n]);return t&&t.map((function(e){return l(e)}))},bo=function createTreeNodes(e,t){return function buildTreeNodesData(n,a,i,o){if(n>=e.multiplicity.length)return i;var r=co[n%co.length],c=a.findIndex((function(e){return e===n})),l=x()(t,"info.originFrequency",0),s=c>=0&&l>0?e.j[c].coupling/l:null;if(s){var u=function getPascal(e,t){if(void 0===e||0===e||void 0===t)return[1];for(var n=2*t+1,a=[],i=0;i<n-1;i++)a.push(1);for(var o=0;o<e-1;o++){for(var r=a.slice(),c=1;c<n;c++){for(var l=0;l<a.length-1;l++)r[l+c]+=a[l];r.push(1)}a=r.slice()}return a}(function getMultiplicityNumber(e){var t=ro.find((function(t){return e===t.label||e===t.value}));return t?t.multiplicity:null}(e.multiplicity.charAt(n)),.5),d=u.length%2===0?o-u.length/2*s+s/2:o-(u.length/2-.5)*s;u.forEach((function(e,t){t>0&&(d+=s),i.push({startX:o,_startX:d,ratio:e,multiplicityIndex:n,color:r}),buildTreeNodesData(n+1,a,i,d)}))}else i.push({startX:o,_startX:o,ratio:1,multiplicityIndex:n,color:r}),buildTreeNodesData(n+1,a,i,o);return i}},po={cursor:"default",opacity:.6,strokeWidth:1};var fo,ho,go=function MultiplicityTree(e){var t=e.rangeFrom,n=e.rangeTo,a=e.signal,i=e.labelOptions,o=void 0===i?{distance:10,fontSize:11}:i,r=useScale(),c=r.scaleX,l=r.scaleY,s=useChartData(),u=s.data,d=s.activeSpectrum,b=s.selectedTool,p=s.width,f=useAssignment(a.id),h=Object(ri.c)([f.id].concat(f.assigned.x||[])),j=Object(y.useMemo)((function(){return x()(u,"".concat(d.index),null)}),[d,u]),v=Object(y.useState)({x1:a.delta,x2:a.delta}),O=Object(m.a)(v,2),C=O[0],k=O[1],S=Object(y.useState)({width:0,height:0,levelHeight:0}),D=Object(m.a)(S,2),w=D[0],T=D[1],M=Object(y.useState)(!1),A=Object(m.a)(M,2),E=A[0],P=A[1],I=Object(y.useState)(!1),F=Object(m.a)(I,2),R=F[0],N=F[1];Object(y.useEffect)((function(){var e=!checkMultiplicity(a.multiplicity,["m"]),t=e?Math.abs(c()(C.x1)-c()(C.x2)):Math.abs(c()(C.x1)-c()(C.x2))+o.distance,n=e?t/3:t/2,i=e?n/(a.multiplicity.length+2):n/(2*a.multiplicity.length+2);T({width:t,height:n,levelHeight:i}),P(e)}),[o.distance,c,a.multiplicity,C.x1,C.x2]),Object(y.useEffect)((function(){w.width/p>=.1?N(!0):N(!1)}),[w.width,p]);var _=Object(y.useMemo)((function(){var e;return j.data.x.forEach((function(a,i){a>=t&&a<=n&&(!e||j.data.y[i]>e)&&(e=j.data.y[i])})),l(j.id)(e)-w.height-30}),[j.data.x,j.data.y,j.id,l,w.height,t,n]),L=Object(y.useMemo)((function(){return bo(a,j)(0,a.multiplicity.split("").map((function(e,t){return hasCouplingConstant(e)?t:void 0})).filter((function(e){return void 0!==e})),[],a.delta)}),[a,j]);Object(y.useEffect)((function(){if(E)k({x1:t,x2:n});else{var e={x1:a.delta,x2:a.delta};L.forEach((function(t){t.startX<e.x1&&(e.x1=t.startX),t.startX>e.x2&&(e.x2=t.startX),t._startX<e.x1&&(e.x1=t._startX),t._startX>e.x2&&(e.x2=t._startX)})),k(e)}}),[E,t,n,a.delta,a.multiplicity,L]);var z=Object(y.useMemo)((function(){var e=w.levelHeight,i=_,r=i,l=_+e;if(r=l,r+=e,E){var s=c()(t),u=c()(n),d="M ".concat(s," ").concat(r+e," ").concat(s," ").concat(r," ").concat(c()(a.delta)," ").concat(r," ").concat(u," ").concat(r," ").concat(u," ").concat(r+e);return Object(ve.c)("g",{children:[Object(ve.b)(so,{signal:a,startY:i,levelHeight:e,fontSize:o.fontSize,showLabels:R}),Object(ve.b)(lo,{signal:a,startY:l,levelHeight:e}),Object(ve.b)("path",{d:d,stroke:"blue",fill:"none"})]})}return Object(ve.c)("g",{children:[Object(ve.b)(so,{signal:a,startY:i,levelHeight:e,fontSize:o.fontSize,showLabels:R}),Object(ve.b)(lo,{signal:a,startY:l,levelHeight:e}),Object(ve.b)(uo,{nodesData:L,signalID:L,showLabels:R,startY:_,labelOptions:o,levelHeight:e})]})}),[w,_,E,a,o,R,L,c,t,n]);return Object(ve.b)("g",{css:h.isActive||f.isActive?Object(g.a)(Object(g.a)({},po),{},{opacity:1,strokeWidth:1.5}):po,onMouseEnter:function onMouseEnter(){f.onMouseEnter("x"),h.show()},onMouseLeave:function onMouseLeave(){f.onMouseLeave("x"),h.hide()},onClick:b&&b===Xa.editRange.id?null:function(e){e.shiftKey&&(e.stopPropagation(),f.onClick("x"))},children:z})},mo=Object(v.b)(fo||(fo=Object(j.a)(["\n  pointer-events: bounding-box;\n  @-moz-document url-prefix() {\n    pointer-events: fill;\n  }\n  user-select: 'none';\n  -webkit-user-select: none; /* Chrome all / Safari all */\n  -moz-user-select: none; /* Firefox all */\n\n  // // disabled because Resizable component appears now when hovering over it\n  // :hover .range-area {\n  //   height: 100%;\n  //   fill: #ff6f0057;\n  //   cursor: pointer;\n  // }\n\n  .delete-button {\n    visibility: hidden;\n  }\n"]))),jo=Object(v.b)(ho||(ho=Object(j.a)(["\n  pointer-events: bounding-box;\n\n  @-moz-document url-prefix() {\n    pointer-events: fill;\n  }\n  .range-area {\n    height: 100%;\n    fill: #ff6f0057;\n  }\n  .delete-button {\n    visibility: visible;\n    cursor: pointer;\n  }\n"])));var vo=function Range(e){var t=e.rangeData,n=e.showMultiplicityTrees,a=e.selectedTool,i=t.id,o=t.from,r=t.to,c=t.integral,l=t.signal,s=useAssignment(i),u=Object(ri.c)([s.id].concat(s.assigned.x||[]),ri.b.RANGE),d=Object(y.useState)({from:o,to:r}),b=Object(m.a)(d,2),p=b[0],f=b[1],h=useScale().scaleX,j=useDispatch(),v=Object(y.useState)(!1),O=Object(m.a)(v,2),x=O[0],C=O[1],k=Object(y.useState)(!1),S=Object(m.a)(k,2),D=S[0],w=S[1];Object(y.useEffect)((function(){a&&a===Xa.editRange.id?w(!0):w(!1)}),[a]),Object(y.useEffect)((function(){C(!no(t))}),[t]);var T=Object(y.useCallback)((function(e){j({type:En,data:Object(g.a)(Object(g.a)({},t),e)})}),[j,t]),M=Object(y.useCallback)((function(){s.onMouseEnter("x"),u.show()}),[s,u]),A=Object(y.useCallback)((function(){s.onMouseLeave("x"),u.hide()}),[s,u]),E=Object(y.useCallback)((function(e){a===Xa.rangesPicking.id&&e.shiftKey&&!D&&s.onClick("x")}),[s,D,a]),P=Object(y.useCallback)((function(e){f((function(t){return Object(g.a)(Object(g.a)({},t),e)}))}),[]),I=p.from,F=p.to;return Object(ve.c)("g",{style:{outline:"none"},css:D||u.isActive||s.isActive?jo:mo,onMouseEnter:M,onMouseLeave:A,onClick:E,children:[Object(ve.c)("g",{transform:"translate(".concat(h()(F),",10)"),children:[Object(ve.b)("rect",{x:"0",width:Math.abs(h()(I)-h()(F)),height:"6",className:"range-area",fill:"green",fillOpacity:!x||u.isActive||s.isActive?1:.4}),Object(ve.b)("text",{textAnchor:"middle",x:Math.abs(h()(I)-h()(F))/2,y:"20",fontSize:"10",fill:"red",fillOpacity:!x||u.isActive||s.isActive?1:.6,children:void 0!==c?c.toFixed(2):""})]}),Object(ve.b)(vi,{from:t.from,to:t.to,onDrop:T,onDrag:P}),n&&l&&l.length>0?l.map((function(e){return Object(ve.b)(go,{rangeFrom:I,rangeTo:F,signal:e},l.id)})):null]},i)};function Ranges(e){var t=e.ranges,n=e.displayerKey,a=e.selectedTool,i=Object(y.useState)(!1),o=Object(m.a)(i,2),r=o[0],c=o[1];return Object(y.useEffect)((function(){ti.on("showMultiplicityTrees",(function(e){c(e)}))}),[]),Object(P.jsx)("g",{clipPath:"url(#".concat(n,"clip-chart-1d)"),children:t&&t.values&&t.values.map((function(e){return Object(P.jsx)(vo,{rangeData:e,selectedTool:a,showMultiplicityTrees:r},e.id)}))})}var Oo=Gi(Object(y.memo)(Ranges));var xo=function Chart1D(e){var t=e.mode,n=e.width,a=e.height,i=e.margin,o=e.displayerKey;return Object(P.jsxs)("svg",{viewBox:"0 0 ".concat(n," ").concat(a),width:n,height:a,id:"nmrSVG",children:[Object(P.jsx)("defs",{children:Object(P.jsx)("clipPath",{id:"".concat(o,"clip-chart-1d"),children:Object(P.jsx)("rect",{width:"".concat(n-i.left-i.right),height:"".concat(a),x:"".concat(i.left),y:"".concat(0)})})}),Object(P.jsx)(Di,{}),Object(P.jsx)(ki,{}),Object(P.jsx)(Ni,{}),Object(P.jsx)(Oo,{}),Object(P.jsx)(Wi,{}),Object(P.jsx)(oi,{}),Object(P.jsx)(di,{}),Object(P.jsx)("g",{className:"container",style:{pointerEvents:"none"},children:Object(P.jsx)(Bi,{showGrid:!0,mode:t})})]})},yo=n(572),Co=n(353),ko=Object(y.createContext)(),So=ko.Provider;function useHelp(){var e=Object(y.useContext)(ko),t=Object(y.useCallback)((function(t){var n=t.target.getAttribute("data-helpid");n&&(t.target.style.cursor="help",e.dispatch({type:"SHOW",id:n}),e.show(n,{delay:t.ctrlKey?0:null}))}),[e]),n=Object(y.useCallback)((function(){e.dispatch({type:"HIDE"}),e.clear()}),[e]);return{show:t,hide:n,onHover:{onMouseEnter:t,onMouseLeave:n}}}var Do,wo=n(62),To=n.n(wo),Mo=n(89),Ao=function groupBy(e,t){return e.reduce((function(e,n){var a=t(n);return e[a]||(e[a]=[]),e[a].push(n),e}),{})},Eo={helpText:null,helpObject:null};function helpReducer(e,t){switch(t.type){case"SHOW":var n=e.data[t.id].text;return Object(g.a)(Object(g.a)({},e),{},{helpText:n});case"HIDE":return Object(g.a)(Object(g.a)({},e),{},{helpText:null});default:throw new Error("unknown action type: ".concat(t.type))}}var Po=(Do={},Object(ce.a)(Do,J,{entering:{opacity:0},entered:{opacity:1}}),Object(ce.a)(Do,$,{entering:{transform:"scale(0)"},entered:{transform:"scale(1)"},exiting:{transform:"scale(0)"},exited:{transform:"scale(0)"}}),Do),Io={innerContainer:{display:"flex",flexDirection:"column",width:"100%",height:"100%",borderRadius:"5px",padding:"10px"},outerContainer:{boxSizing:"initial",backgroundColor:"rgba(255, 255, 255, 1)",boxShadow:"0px 0px 0px 0px, rgba(0, 0, 0, 0.1) 0px 3px 5px",pointerEvents:"all"},closeButton:{border:"none",color:"red",backgroundColor:"transparent",outline:"none"}},Fo=null;function Provider_Provider(e){var t=e.children,n=e.data,a=e.offset,i=e.position,o=e.timeout,r=e.delay,c=e.type,l=e.transition,s=e.containerStyle,u=e.wrapperRef,d=e.multiple,b=e.preventAutoHelp,p=Object(y.useRef)(),f=Object(y.useRef)([]),h=Object(y.useState)([]),j=Object(m.a)(h,2),v=j[0],O=j[1];Object(y.useEffect)((function(){p.current=document.createElement("div");var e=p.current;u&&u.appendChild(e);var t=f.current;return function(){t.forEach(clearTimeout),u&&u.removeChild(e)}}),[u]);var x=Object(y.useCallback)((function(e){O((function(t){var n=t.length,a=t.filter((function(t){return t.id!==e.id}));return n>a.length&&e.options.onClose&&e.options.onClose(),a}))}),[]),C=Object(y.useCallback)(function(){var e=Object(Mo.a)(To.a.mark((function _callee(e){var t,n,a,l,s,u=arguments;return To.a.wrap((function _callee$(p){for(;;)switch(p.prev=p.next){case 0:if(t=u.length>1&&void 0!==u[1]?u[1]:{delay:null},v.some((function(t){return t.helpid===e}))){p.next=15;break}return p.prev=2,n=Math.random().toString(36).substr(2,9),a=Object(g.a)({position:t.position||i,timeout:o,type:c},t),(l={helpid:e,id:n,options:a}).close=function(){return x(l)},s=function startModal(){if(l.options.timeout){var e=setTimeout((function(){x(l),f.current.splice(f.current.indexOf(e),1)}),l.options.timeout);f.current.push(e)}O((function(e){return d?e.concat(l):[l]})),l.options.onOpen&&l.options.onOpen()},0===t.delay?s():b||(Fo=setTimeout((function(){s()}),t.delay>0?t.delay:r)),p.abrupt("return",l);case 12:p.prev=12,p.t0=p.catch(2),console.log(p.t0);case 15:case"end":return p.stop()}}),_callee,null,[[2,12]])})));return function(t){return e.apply(this,arguments)}}(),[r,v,d,i,b,x,o,c]),k=Object(y.useCallback)((function(){clearTimeout(Fo)}),[]),S=Object(y.useMemo)((function(){return u?u.getBoundingClientRect():{top:0,left:0,width:window.innerWidth,height:window.innerHeight}}),[u]),D=Object(y.useReducer)(helpReducer,Object(g.a)(Object(g.a)({},Eo),{},{data:n})),w=Object(m.a)(D,2),T=w[0],M=w[1],A=Ao(v,(function(e){return e.options&&e.options.position}));return Object(P.jsxs)(So,{value:{helpState:T,dispatch:M,show:C,clear:k},children:[t,p.current&&Object(le.createPortal)(Object(P.jsx)(y.Fragment,{children:Object.keys(U).map((function(e){var t=U[e];return Object(P.jsx)(ue.a,{appear:!0,options:{position:i,containerStyle:s},containerStyle:S,component:je,children:A[t]?A[t].map((function(e){return Object(P.jsx)(ge,{type:l,transitionStyles:Object(g.a)(Object(g.a)({},Po),{},{default:{width:"400px",height:"400px"}}),children:Object(P.jsx)(se.a,{style:Object(g.a)({margin:a},Io.outerContainer),default:{x:0,y:0,width:400,height:400},children:Object(P.jsxs)("div",{style:Io.innerContainer,children:[Object(P.jsx)("div",{children:Object(P.jsx)("button",{type:"button",onClick:function onClick(){return x(e)},style:Io.closeButton,children:Object(P.jsx)(He.G,{})})}),n[e.helpid].filePath&&Object(P.jsx)("div",{style:{cursor:"default",width:"100%",height:"100%"},children:Object(P.jsx)("iframe",{title:"Tool User Manual",src:n[e.helpid].filePath,frameBorder:"0",scrolling:"auto",style:{width:"100%",height:"100%"}})})]})})},e.id)})):null},t)}))}),p.current)]})}Provider_Provider.defaultProps={offset:"10px",position:U.TOP_RIGHT,timeout:0,delay:2e3,transition:$,containerStyle:{zIndex:100},wrapperRef:null,multiple:!1,preventAutoHelp:!1};var Ro=Object(y.memo)(Provider_Provider);var No,_o,Lo=function FooterWarpper(e){var t=function Wrapper(t){var n=useChartData(),a=n.margin,i=n.width,o=n.height,r=n.activeSpectrum,c=n.data,l=n.activeTab,s=t.forwardedRef,u=Object(de.a)(t,["forwardedRef"]);return Object(P.jsx)(e,Object(g.a)(Object(g.a)({},u),{},{data:c,activeSpectrum:r,activeTab:l,margin:a,width:i,height:o,ref:s}))};return Object(y.forwardRef)((function(e,n){return Object(P.jsx)(t,Object(g.a)(Object(g.a)({},e),{},{forwardedRef:n}))}))},zo=Object(v.b)(No||(No=Object(j.a)(["\n  display: flex;\n  flex-firection: row;\n  align-items: center;\n  pointer-events: bounding-box;\n  user-select: 'none';\n  -webkit-user-select: none; /* Chrome all / Safari all */\n  -moz-user-select: none; /* Firefox all */\n  background-color: #f7f7f7;\n  height: 30px;\n  padding: 6px;\n  color: #8d0018;\n  position: absolute;\n  width: 100%;\n  bottom: 0;\n\n  .help {\n    font-size: 6px;\n    color: black;\n  }\n\n  div {\n    margin: 0px 10px;\n    display: inline-block;\n\n    .label {\n      font-size: 12px;\n      color: #4d4d4d;\n      font-weight: bold;\n    }\n    .value {\n      font-weight: bold;\n      font-size: 14px;\n      display: inline-block;\n    }\n    .unit {\n      font-weight: bold;\n      font-size: 10px;\n    }\n    .xvalue {\n      min-width: 50px;\n    }\n    .yvalue {\n      min-width: 80px;\n    }\n  }\n\n  .separator {\n    border-left: 2px solid gray;\n    margin: 0 20px;\n    width: 1px;\n    height: 100%;\n  }\n"]))),Ho=Object(v.b)(_o||(_o=Object(j.a)(["\n  pointer-events: bounding-box;\n  user-select: 'none';\n  -webkit-user-select: none; /* Chrome all / Safari all */\n  -moz-user-select: none; /* Firefox all */\n  background-color: #f7f7f7;\n  height: 30px;\n  padding: 6px;\n  color: #8d0018;\n  position: absolute;\n  width: 100%;\n  bottom: 0;\n  span {\n    font-size: 10px;\n    color: black;\n    display: inline-block;\n    text-overflow: ellipsis;\n    width: 100%;\n    white-space: nowrap;\n    overflow: hidden;\n  }\n"])));function FooterBanner(e){var t=e.margin,n=e.width,a=e.height,i=e.activeSpectrum,o=e.data,r=e.activeTab,c=Object(y.useContext)(N),l=Object(y.useContext)(I),s=l.startX,u=l.endX,d=l.step,b=useScale().scaleX,p=function useHelptData(){return Object(y.useContext)(ko).helpState}().helpText,f=(i?o[i.index].info:{}).originFrequency,h=useFormatNumberByNucleus(r),g=Object(y.useCallback)((function(e){if(i){var t=Object(_e.f)(o[i.index].data.x,b().invert(e));return o[i.index].data.y[t]}return 1}),[i,o,b]);return p?Object(ve.b)("div",{css:Ho,children:Object(ve.b)("span",{className:"help",children:p})}):!c||c.y<t.top||c.x<t.left||c.x>n-t.right||c.y>a-t.bottom?Object(ve.b)("div",{css:zo}):Object(ve.c)("div",{css:zo,children:[Object(ve.b)(yo.a,{}),Object(ve.c)("div",{children:[Object(ve.b)("span",{className:"label",children:" X :"}),Object(ve.b)("span",{className:"value",children:h(b().invert(c.x))}),Object(ve.b)("span",{className:"unit",children:"ppm"})]}),i&&f&&Object(ve.c)("div",{children:[Object(ve.b)("span",{className:"label",children:" X :"}),Object(ve.b)("span",{className:"value xvalue",children:h(b().invert(c.x)*f,"hz")}),Object(ve.b)("span",{className:"unit",children:"Hz"})]}),"brushing"===d&&Object(ve.c)("div",{children:[Object(ve.b)("span",{className:"label",children:" \u0394ppm :"}),Object(ve.b)("span",{className:"value",children:(b().invert(s)-b().invert(u)).toPrecision(6)})]}),i&&Object(ve.c)(y.Fragment,{children:[f&&"brushing"===d&&Object(ve.c)("div",{children:[Object(ve.b)("span",{className:"label",children:" \u0394Hz :"}),Object(ve.b)("span",{className:"value",children:((b().invert(s)-b().invert(u))*f).toPrecision(5)})]}),"brushing"===d&&Object(ve.c)("div",{children:[Object(ve.b)("span",{className:"label",children:" ratio :"}),Object(ve.c)("span",{className:"value",children:[(g(s)/(g(u)||Number.MIN_VALUE)*100).toFixed(2),"%"]})]})]}),i&&Object(ve.c)(y.Fragment,{children:[Object(ve.b)("div",{className:"separator"}),Object(ve.b)(Co.b,{}),Object(ve.c)("div",{children:[Object(ve.b)("span",{className:"label",children:" Y :"}),Object(ve.b)("span",{className:"value yvalue",children:h(g(c.x))})]})]})]})}var Bo=Lo(Object(y.memo)(FooterBanner)),Xo={container:{position:"absolute",left:"10px",top:"10px"},value:{width:"67px",display:"inline-block",margin:"0 5px",fontSize:"12px"},colorIndicator:{width:"10px",height:"1px",borderBottom:"2px solid",display:"inline-block",marginBottom:"3px"},name:{fontSize:"12px"}};function YTracker(e){var t=e.datum,n=useScale().scaleX,a=Object(y.useContext)(N);if(!n||!a)return null;var i=Object(_e.f)(t.x,n().invert(a.x));return Object(P.jsx)("span",{style:Xo.value,children:t.y[i]})}var Vo=function SpectraTracker(){var e=useChartData(),t=e.data,n=e.activeTab,a=Object(y.useState)(!1),i=Object(m.a)(a,2),o=i[0],r=i[1];Object(y.useEffect)((function(){return ti.on("showYSpectraTrackers",(function(e){r(e)})),function(){return ti.off("showYSpectraTrackers")}}),[]);var c=Object(y.useMemo)((function(){return o&&t.map((function(e){return e.display.isVisible&&e.display.isVisibleInDomain&&e.info.nucleus===n&&Object(P.jsxs)("div",{style:{display:"block"},children:[Object(P.jsx)("span",{style:Object(g.a)(Object(g.a)({},Xo.colorIndicator),{},{borderColor:e.display.color})}),Object(P.jsx)(YTracker,{datum:e.data}),Object(P.jsx)("span",{style:Xo.value,children:e.display.name})]},e.id)}),[])}),[n,t,o]);return o?Object(P.jsx)("div",{style:Xo.container,children:c}):null},Yo=n(233),Zo=10,Uo="#1f1f1f",Ko=1,Wo=0,Go=1;var qo=function PeakPointer(){var e=useChartData(),t=e.height,n=e.width,a=e.margin,i=e.activeSpectrum,o=e.data,r=e.mode,c=e.selectedTool,l=e.verticalAlign,s=useScale(),u=s.scaleX,d=s.scaleY,b=Object(y.useContext)(N),p=Object(y.useContext)(I),f=Object(y.useState)(),h=Object(m.a)(f,2),g=h[0],j=h[1];return Object(y.useEffect)((function(){var e=function getClosePeak(e,t){if(i&&b&&c===Xa.peakPicking.id){var n=[u().invert(t.x-e),u().invert(t.x+e)].sort((function(e,t){return e-t})),a=o.find((function(e){return e.id===i.id})),r=a.data.x.findIndex((function(e){return e>=n[1]}))-1,s=a.data.x.findIndex((function(e){return e>=n[0]})),p=a.data.y.slice(s,r);if(p&&p.length>0){var f=Object(Yo.a)(p),h=p.findIndex((function(e){return e===f})),g=a.data.x[s+h];return{x:u()(g),y:d(i.id)(f)-(i&&l.flag&&l.stacked?(i.index+1)*l.value:0),xIndex:s+h}}}return null}(10,b);j(e)}),[i,o,r,b,u,d,c,l]),c!==Xa.peakPicking.id||!g||!i||"brushing"===p.step||!b||b.y<a.top||b.left<a.left||b.x>n-a.right||b.y>t-a.bottom?null:Object(P.jsx)("div",{style:{cursor:"crosshair",transform:"translate(".concat(g.x,"px, ").concat(g.y,"px)"),transformOrigin:"top left",position:"absolute",top:-(Zo+Go),left:-(Zo+Go),pointerEvents:"none",overflow:"visible"},children:Object(P.jsxs)("svg",{width:2*Zo+2*Go,height:2*Zo+2*Go,children:[Object(P.jsx)("circle",{cx:Zo+Go,cy:Zo+Go,r:Zo,stroke:Uo,strokeWidth:Ko,fillOpacity:Wo}),Object(P.jsx)("line",{x1:Zo+Go,y1:Go,x2:Zo+Go,y2:2*Zo+Go,stroke:Uo,strokeWidth:Ko}),Object(P.jsx)("line",{x1:Go,y1:Zo+Go,x2:2*Zo+Go,y2:Zo+Go,stroke:Uo,strokeWidth:Ko})]})},"peakPointer")},Jo={transformOrigin:"top left",position:"absolute",top:"0px",left:"0px",width:1,backgroundColor:"red"};var $o=function VerticalIndicator(){var e=useChartData(),t=e.height,n=e.selectedTool,a=e.pivot,i=useScale().scaleX;return Xa.phaseCorrection.id!==n?null:Object(P.jsx)("div",{style:Object(g.a)(Object(g.a)({},Jo),{},{transform:"translate(".concat(i()(a),"px, 0px)"),height:t})})},Qo={cursor:"crosshair",transformOrigin:"bottom right",position:"absolute",top:"-18px",left:"-30px",pointerEvents:"none",overflow:"visible",userSelect:"none"};var er=function XLabelPointer(){var e=useChartData(),t=e.height,n=e.width,a=e.margin,i=e.data,o=e.activeSpectrum,r=useScale().scaleX,c=Object(y.useContext)(N),l=Object(y.useContext)(I),s=Object(y.useMemo)((function(){return o?i.find((function(e){return e.id===o.id})):null}),[o,i]),u=useFormatNumberByNucleus(s&&s.info.nucleus),d=Object(y.useCallback)((function(e){if(s){var t=r().invert(e);return u(t)}}),[s,u,r]);return!o||"brushing"===l.step||!c||c.y<a.top||c.x<a.left||c.x>n-a.right||c.y>t-a.bottom?null:Object(P.jsx)("div",{style:Object(g.a)(Object(g.a)({},Qo),{},{transform:"translate(".concat(c.x,"px, ").concat(c.y,"px)")}),children:Object(P.jsx)("span",{children:d(c.x)})},"xLabelPointer")};var tr=function Viewer1D(e){var t=e.emptyText,n=void 0===t?void 0:t,a=usePreferences().display.general,i=useChartData(),o=i.selectedTool,r=i.isLoading,c=i.data,l=i.mode,s=i.width,u=i.height,d=i.margin,b=i.activeSpectrum,p=i.xDomain,f=i.xDomains,h=i.yDomain,j=i.yDomains,v=i.verticalAlign,O=i.displayerKey,x=useDispatch(),C=te(),k=Object(y.useReducer)(scaleReducer,gt),S=Object(m.a)(k,2),T=S[0],M=S[1];Object(y.useEffect)((function(){p.length>0&&h.length>0&&s&&u&&M({type:ht,payload:{yDomain:h,yDomains:j,xDomain:p,xDomains:f,margin:d,height:u,width:s,verticalAlign:v,mode:l}})}),[u,d,l,v,s,p,f,h,j]);var A=Object(y.useCallback)((function(e){if(e.altKey)switch(o){case Xa.rangesPicking.id:a.disableMultipletAnalysis||C.show(Object(P.jsx)($e,Object(g.a)({data:c,activeSpectrum:b,scaleX:T.scaleX},e)),{onClose:function onClose(){C.close()}})}else if(e.shiftKey)switch(o){case Xa.integral.id:x(Object(g.a)({type:Ht},e));break;case Xa.rangesPicking.id:x(Object(g.a)({type:In},e));break;case Xa.multipleSpectraAnalysis.id:x(Object(g.a)({type:Un},e));break;case Xa.peakPicking.id:x(Object(g.a)({type:kt},e));break;case Xa.baseLineCorrection.id:x({type:Dn,zone:{from:e.startX,to:e.endX}});break;case Xa.exclusionZones.id:x({type:ca,payload:{from:e.startX,to:e.endX}});break;default:!function propagateEvent(){var t=e.startX,n=e.endX,a=T.scaleX().invert(t),i=T.scaleX().invert(n);ti.emit("brushEnd",Object(g.a)(Object(g.a)({},e),{},{range:[a,i].sort()}))}()}else null!=o&&x(Object(g.a)({type:en},e))}),[T,o,a,C,c,b,x]),E=Object(y.useCallback)((function(){x({type:Rt,zoomType:pt})}),[x]),I=Object(y.useCallback)((function(e){switch(o){case Xa.integral.id:x(Object(g.a)({type:nn},e));break;default:return void x(Object(g.a)({type:Vt},e))}}),[x,o]),F=Object(y.useCallback)((function(e){if(e.shiftKey)switch(o){case Xa.peakPicking.id:x({type:Ct,mouseCoordinates:e})}else switch(o){case Xa.phaseCorrection.id:x({type:fn,position:e.x});break;case"editRange":e.shiftKey&&function propagateEvent(){var t=T.scaleX().invert(e.x);ti.emit("mouseClick",Object(g.a)(Object(g.a)({},e),{},{xPPM:t}))}()}}),[x,T,o]),R=Object(D.a)((function(){return Object(P.jsxs)(y.Fragment,{children:[Object(P.jsx)(Ne,{isLoading:r,emptyText:n}),T.scaleX&&T.scaleY&&c&&c.length>0&&Object(P.jsx)(BrushTracker,{onBrush:A,onDoubleClick:E,onClick:F,onZoom:I,style:{width:"100%",height:"100%",margin:"auto",position:"relative",overflow:"hidden"},children:Object(P.jsxs)(MouseTracker,{style:{width:"100%",height:"100%",position:"absolute"},children:[Object(P.jsx)(Vo,{}),Object(P.jsx)(Ja,{}),Object(P.jsx)(Wa,{brushType:Za}),Object(P.jsx)(er,{}),Object(P.jsx)(qo,{}),Object(P.jsx)($o,{}),Object(P.jsx)(Bo,{}),Object(P.jsx)(xo,{width:s,height:u,margin:d,mode:l,displayerKey:O})]})})]})}),[]),N=Object(m.a)(R,2),_=N[0],L=N[1],z=L.width,H=L.height,B=Object(y.useState)(),X=Object(m.a)(B,2),V=X[0],Y=X[1];return Object(w.a)((function(){return Y({width:z,height:H})}),400,[z,H]),Object(y.useEffect)((function(){V&&isFinite(V.width)&&isFinite(V.height)&&x(Object(g.a)({type:Et},V))}),[x,V]),Object(P.jsx)(Z,{value:T,children:_})};var nr={TOP_1D:"TOP_1D",LEFT_1D:"LEFT_1D",CENTER_2D:"CENTER_2D"};function getLayoutID(e,t){for(var n=0,a=Object.keys(e);n<a.length;n++){var i=a[n];if(t.startX>=e[i].startX&&t.startX<=e[i].endX&&t.startY>=e[i].startY&&t.startY<=e[i].endY)return i}return null}function get2DXScale(e){var t=e.width,n=e.margin,a=e.xDomain;return Object(Qe.f)(a,[t-n.right,n.left])}function get2DYScale(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.height,a=e.margin,i=e.yDomain;return Object(Qe.f)(i,t?[n-a.bottom,a.top]:[a.top,n-a.bottom])}function get1DYScale(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10;return Object(Qe.f)(e,[t-n,n])}function ContoursPaths(e){var t=e.id,n=e.sign,a=e.color,i=useChartData(),o=i.margin,r=i.width,c=i.height,l=i.xDomain,s=i.yDomain,u=i.contours,d=i.activeSpectrum,b=usePreferences(),p=Object(y.useMemo)((function(){return null===d||t===d.id}),[d,t]);var f=Object(y.useMemo)((function(){return x()(u,"".concat(t,".").concat(n),[])}),[u,n,t]);return Object(P.jsx)("path",{fill:"none",stroke:a,strokeWidth:"1",style:{opacity:p?1:x()(b,"controllers.dimmedSpectraTransparency",.1)},d:function buildContourPath(e){for(var t=get2DXScale({margin:o,width:r,xDomain:l}),n=get2DYScale({margin:o,height:c,yDomain:s}),a="",i=0;i<e.length;i++)if(e[i].lines){var u=e[i].lines;if(u.length<1e6)for(var d=0;d<u.length;d+=4)a+="M".concat(t(u[d])," ").concat(n(u[d+1])," "),a+="L".concat(t(u[d+2])," ").concat(n(u[d+3])," ")}else{a+="M".concat(t(e[i][0].x)," ").concat(n(e[i][0].y)," ");for(var b=1;b<e[i].length;b++)a+="L".concat(t(e[i][b].x)," ").concat(n(e[i][b].y)," ")}return a||(a="M0 0 "),a+="Z"}(f)})}function Contours(e){var t=e.data,n=e.displayerKey;return Object(P.jsx)("g",{clipPath:"url(#".concat(n,"clip-chart-2d)"),className:"contours",children:t.filter((function(e){return 2===e.info.dimension})).map((function(e,t){return Object(P.jsxs)("g",{children:[e.display.isPositiveVisible&&Object(P.jsx)(ContoursPaths,{id:e.id,sign:"positive",color:e.display.positiveColor}),e.display.isNegativeVisible&&Object(P.jsx)(ContoursPaths,{id:e.id,sign:"negative",color:e.display.negativeColor})]},"".concat(e.id+t))}))})}var ar,ir=function ContoursWrapper(e){var t=function Wrapper(t){var n=useChartData(),a=n.data,i=n.displayerKey,o=t.forwardedRef,r=Object(de.a)(t,["forwardedRef"]);return Object(P.jsx)(e,Object(g.a)(Object(g.a)({},r),{},{data:a,displayerKey:i,ref:o}))};return function(e){return Object(P.jsx)(t,Object(g.a)({},e))}}(Object(y.memo)(Contours)),or={DM_1D:"1D",DM_2D:"2D"},rr={top:100,right:50,bottom:70,left:100},cr={top:10,right:10,bottom:70,left:10},lr=Object(v.b)(ar||(ar=Object(j.a)(["\n  stroke: lightgrey;\n  opacity: 0.7;\n"])));var sr=function IndicationLines(e){var t=e.axis,n=e.show,a=useChartData(),i=a.data,o=a.activeTab,r=a.margin,c=a.width,l=a.height,s=a.xDomain,u=a.yDomain,d=a.displayerMode,b=Object(y.useState)([]),p=Object(m.a)(b,2),f=p[0],h=p[1],g=get2DXScale({margin:r,width:c,xDomain:s}),j=get2DYScale({margin:r,height:l,yDomain:u});Object(y.useEffect)((function(){var e=o.split(",");if(d===or.DM_2D&&2===e.length){var n="X"===t?e[0]:"Y"===t?e[1]:null;if(null!==n){var a=i.filter((function(e){return 1===e.info.dimension&&!0===e.display.isVisible&&e.info.nucleus===n&&"1d"===e.info.experiment})).map((function(e){return e.ranges.values})).flat().map((function(e){return e.signal.filter((function(e){return Ji.some((function(t){return e.kind===t}))})).map((function(e){return e.delta}))})).flat();h(a)}else h([])}else h([])}),[o,t,i,d]);var v=Object(y.useMemo)((function(){if(!0===n&&f.length>0)return f.map((function(e,n){return"X"===t?Object(ve.b)("line",{css:lr,x1:g(e),x2:g(e),y1:j(u[0]),y2:j(u[1])},"indicationLine".concat(t).concat(n)):"Y"===t?Object(ve.b)("line",{css:lr,x1:g(s[0]),x2:g(s[1]),y1:j(e),y2:j(e)},"indicationLine".concat(t).concat(n)):null}))}),[t,f,g,j,n,s,u]);return Object(ve.b)("g",{children:v})};function Left1DChart(e){var t=e.margin,n=e.data,a=useChartData(),i=a.height,o=a.margin,r=a.yDomain,c=a.yDomains,l=a.displayerKey,s=o.left,u=Object(y.useMemo)((function(){if(n){var e=get2DYScale({height:i,yDomain:[r[0],r[1]],margin:o}),a=get1DYScale(c[n.id],s,t),l=n.data,u=l.x,d=l.y,b=Object(_e.n)({x:u,y:d},{from:r[0],to:r[1]}),p=b.x.length-1,f=b.y.length-1,h="M  ".concat(a(b.y[f])," ").concat(e(p)," ");return h+=b.x.slice(0,p).reduceRight((function(t,n,i){return t+=" L  ".concat(a(b.y[i])," ").concat(e(n))}),"")}return null}),[s,o,t,i,n,r,c]),d=i-o.bottom-o.top;return d&&s?Object(P.jsxs)("svg",{viewBox:"0 0 ".concat(s," ").concat(d+o.top),width:s,height:d+o.top,children:[Object(P.jsx)("defs",{children:Object(P.jsx)("clipPath",{id:"".concat(l,"clip-left"),children:Object(P.jsx)("rect",{width:s,height:d,x:"0",y:o.top})})}),Object(P.jsx)("g",{clipPath:"url(#".concat(l,"clip-left)"),children:Object(P.jsx)("path",{className:"line",stroke:"black",fill:"none",d:u})})]}):null}Left1DChart.defaultProps={margin:10};var ur=Object(y.memo)(Left1DChart);function Top1DChart(e){var t=e.margin,n=e.data,a=useChartData(),i=a.width,o=a.margin,r=a.xDomain,c=a.yDomains,l=a.displayerKey,s=o.top,u=Object(y.useMemo)((function(){if(n){var e=get2DXScale({width:i,xDomain:r,margin:o}),a=get1DYScale(c[n.id],s,t),l=n.data,u=l.x,d=l.y,b=Object(_e.n)({x:u,y:d},{from:r[0],to:r[1]}),p="M ".concat(e(b.x[0])," ").concat(a(b.y[0])," ");return p+=b.x.slice(1).reduce((function(t,n,i){return t+=" L ".concat(e(n)," ").concat(a(b.y[i+1]))}),"")}return null}),[s,t,o,n,i,r,c]);return i&&s?Object(P.jsxs)("svg",{viewBox:"0 0 ".concat(i," ").concat(s),width:i,height:s,children:[Object(P.jsx)("defs",{children:Object(P.jsx)("clipPath",{id:"".concat(l,"clip-top"),children:Object(P.jsx)("rect",{width:i-o.left-o.right,height:s,x:o.left,y:"".concat(0)})})}),Object(P.jsx)("g",{clipPath:"url(#".concat(l,"clip-top)"),children:Object(P.jsx)("path",{className:"line",stroke:"red",fill:"none",strokeWidth:"1px",d:u})})]}):null}Top1DChart.defaultProps={margin:10};var dr,br=Object(y.memo)(Top1DChart),pr=Object(v.b)(dr||(dr=Object(j.a)(["\n  user-select: none;\n\n  path,\n  line {\n    fill: none;\n    stroke: black;\n    stroke-width: 1;\n    shape-rendering: crispEdges;\n    user-select: none;\n  }\n"])));function XAxis_XAxis(e){var t=e.show,n=e.label,a=e.margin,i=useChartData(),o=i.xDomain,r=i.height,c=i.width,l=i.margin,s=i.tabActiveSpectrum,u=i.activeTab,d=Object(y.useRef)();Object(y.useEffect)((function(){var e=Qe.a().ticks(8).tickFormat(Qe.d("0"));if(t){var n=get2DXScale({width:c,margin:l,xDomain:o});Qe.g(d.current).call(e.scale(n))}}),[u,r,l,l.bottom,l.left,l.right,l.top,t,s,c,o]);var b=Object(y.useMemo)((function(){return t&&!0===t&&Object(ve.b)("g",{className:"x",css:pr,transform:"translate(0,".concat(r-(l.bottom+a.bottom),")"),ref:d,children:Object(ve.b)("text",{fill:"#000",x:c-60,y:"20",dy:"0.71em",textAnchor:"end",children:n})})}),[r,n,l.bottom,a.bottom,t,c]);return c&&r?b:null}XAxis_XAxis.propTypes={margin:Li.a.shape({top:Li.a.number.isRequired,right:Li.a.number.isRequired,bottom:Li.a.number.isRequired,left:Li.a.number.isRequired}),show:Li.a.bool,label:Li.a.string},XAxis_XAxis.defaultProps={show:!0,label:"\u03b4 [ppm]",margin:{right:100,top:0,left:0,bottom:0}};var fr,hr=Object(y.memo)(XAxis_XAxis),gr=Object(v.b)(fr||(fr=Object(j.a)(["\n  user-select: 'none';\n  -webkit-user-select: none; /* Chrome all / Safari all */\n  -moz-user-select: none; /* Firefox all */\n\n  path,\n  line {\n    fill: none;\n    stroke: black;\n    stroke-width: 1;\n    shape-rendering: crispEdges;\n    user-select: 'none';\n    -webkit-user-select: none; /* Chrome all / Safari all */\n    -moz-user-select: none; /* Firefox all */\n  }\n"])));function YAxis(e){var t=e.show,n=e.label,a=e.margin,i=Object(y.useRef)(),o=useChartData(),r=o.yDomain,c=o.width,l=o.height,s=o.activeTab,u=o.tabActiveSpectrum,d=o.margin;Object(y.useEffect)((function(){var e=Qe.b().ticks(8).tickFormat(Qe.d("0"));if(t&&r){var n=get2DYScale({height:l,yDomain:r,margin:d});Qe.g(i.current).call(e.scale(n))}}),[t,r,s,u,l,d]);var b=Object(y.useMemo)((function(){return t&&!0===t&&Object(ve.b)(y.Fragment,{children:Object(ve.b)("g",{className:"y",css:gr,transform:"translate(".concat(c-a.right,")"),ref:i,children:Object(ve.b)("text",{fill:"#000",x:-a.top,y:-(a.right-5),dy:"0.71em",transform:"rotate(-90)",textAnchor:"end",children:n})})})}),[n,a.right,a.top,t,c]);return c&&l?b:null}YAxis.defaultProps={show:!0,label:"",margin:{right:50,top:0,bottom:0,left:0}};var mr=Object(y.memo)(YAxis);var jr,vr=function ZonesWrapper(e){var t=function Wrapper(t){var n=useChartData(),a=n.data,i=n.activeSpectrum,o=n.xDomain,r=n.yDomain,c=n.activeTab,l=n.tabActiveSpectrum,s=n.displayerKey,u=usePreferences(),d=Object(y.useMemo)((function(){return a&&i&&i.id?a.find((function(e){return e.id===i.id}))||{zones:{},info:{},display:{}}:{}}),[i,a]),b=d.zones,p=void 0===b?{}:b,f=d.info,h=void 0===f?{}:f,m=d.display,j=void 0===m?{}:m,v=Object(y.useMemo)((function(){return l&&Object.keys(l).length>0?Object.keys(l):null}),[l]),O=t.forwardedRef,x=Object(de.a)(t,["forwardedRef"]);return Object(P.jsx)(e,Object(g.a)(Object(g.a)({},x),{},{zones:p,display:j,info:h,xDomain:o,yDomain:r,preferences:u,activeTab:c,nucleus:v,displayerKey:s,ref:O}))};return Object(y.memo)(Object(y.forwardRef)((function(e,n){return Object(P.jsx)(t,Object(g.a)(Object(g.a)({},e),{},{forwardedRef:n}))})))},Or=function getPubIntegral(e,t){return function getDiaIDs(e,t){return[].concat(e[t].diaID||[],e.signal?e.signal.map((function(e){return e[t].diaID||[]})).flat():[])}(e,t).length},xr=function setPubIntegral(e,t){e[t].pubIntegral=Or(e,t),0===e[t].pubIntegral&&delete e[t].pubIntegral},yr=function resetDiaIDs(e,t){return delete e[t].diaID,delete e.pubIntegral,e.signal.forEach((function(e){delete e[t].diaID})),e},Cr=function unlink(e,t,n,a){return void 0!==t&&void 0!==a?(!0===t?delete e[a].diaID:void 0!==n&&delete e.signal[n][a].diaID,xr(e,a)):void 0!==a?(yr(e,a),xr(e,a)):["x","y"].forEach((function(t){yr(e,t),xr(e,t)})),e},kr=function unlinkInAssignmentData(e,t,n){var a=t.reduce((function(e,t){return e.push(t.id),t.signal&&e.concat(t.signal.map((function(e){return e.id}),[])),e}),[]);n?e.dispatch({type:"REMOVE_ALL",payload:{id:a,axis:n}}):(e.dispatch({type:"REMOVE_ALL",payload:{id:a,axis:"x"}}),e.dispatch({type:"REMOVE_ALL",payload:{id:a,axis:"y"}}))},Sr=function buildID(e,t){return"".concat(e).concat("___").concat(t)},Dr=Object(v.b)(jr||(jr=Object(j.a)(["\n  stroke: green;\n  stroke-width: 2;\n  opacity: 0.5;\n"])));var wr=function SignalDeltaLine(e){var t=e.delta,n=e.axis,a=e.show,i=useChartData(),o=i.margin,r=i.width,c=i.height,l=i.xDomain,s=i.yDomain,u=get2DXScale({margin:o,width:r,xDomain:l}),d=get2DYScale({margin:o,height:c,yDomain:s}),b=Object(y.useMemo)((function(){return!0===a?"X"===n?Object(ve.b)("line",{css:Dr,x1:u(t),x2:u(t),y1:d(s[0]),y2:d(s[1])},"signalLine_".concat(t,"_X")):"Y"===n?Object(ve.b)("line",{css:Dr,x1:u(l[0]),x2:u(l[1]),y1:d(t),y2:d(t)},"signalLine_".concat(t,"_Y")):null:null}),[n,t,u,d,a,l,s]);return Object(ve.b)("g",{children:b})};var Tr,Mr,Ar=function SignalCrosshair(e){var t=e.signal,n=Object(y.useMemo)((function(){return[Sr(t.id,"Crosshair"),Sr(t.id,"Crosshair_X")]}),[t.id]),a=Object(y.useMemo)((function(){return[Sr(t.id,"Crosshair"),Sr(t.id,"Crosshair_Y")]}),[t.id]),i=Object(ri.c)(n),o=Object(ri.c)(a);return Object(ve.c)("g",{children:[Object(ve.b)(wr,{delta:t.x.delta,axis:"X",show:i.isActive}),Object(ve.b)(wr,{delta:t.y.delta,axis:"Y",show:o.isActive})]})},Er=Object(y.memo)((function(e){var t=e.signal,n=e.isVisible,a=useChartData(),i=a.margin,o=a.width,r=a.height,c=a.xDomain,l=a.yDomain,s=get2DXScale({margin:i,width:o,xDomain:c}),u=get2DYScale({margin:i,height:r,yDomain:l}),d=Object(y.useCallback)((function(e){return[e].concat(Sr(e,"X"),Sr(e,"Y"))}),[]),b=useAssignment(t.id),p=Object(ri.c)(d(b.id)),f=Object(ri.d)(),h=Object(y.useState)(!1),g=Object(m.a)(h,2),j=g[0],v=g[1];return Object(y.useEffect)((function(){f.highlight.highlighted.some((function(e){return d(t.id).includes(e)}))||b.isActive?v(!0):v(!1)}),[b.isActive,d,f.highlight.highlighted,t.id]),t?Object(ve.c)("g",{className:"zone-signal",onMouseEnter:function onMouseEnter(){b.onMouseEnter(),p.show()},onMouseLeave:function onMouseLeave(){b.onMouseLeave(),p.hide()},children:[n.signals&&Object(ve.c)("g",{children:[Object(ve.b)("circle",{cx:s(t.x.delta),cy:u(t.y.delta),r:j?6:4,fill:j?"green":"darkgreen"},t.id),Object(ve.b)(Ar,{signal:t})]}),Object(ve.b)("g",{className:"zone-signal-peak",children:n.peaks&&t.peak.map((function(e,n){return Object(ve.b)("circle",{cx:s(e.x),cy:u(e.y),r:2,fill:"black"},"".concat(t.id+n))}))})]}):null})),Pr=Object(v.b)(Tr||(Tr=Object(j.a)(["\n  pointer-events: bounding-box;\n  @-moz-document url-prefix() {\n    pointer-events: fill;\n  }\n  user-select: 'none';\n  -webkit-user-select: none; /* Chrome all / Safari all */\n  -moz-user-select: none; /* Firefox all */\n\n  // // disabled because Resizable component appears now when hovering over it\n  // :hover .range-area {\n  //   height: 100%;\n  //   fill: #ff6f0057;\n  //   cursor: pointer;\n  // }\n\n  .delete-button {\n    visibility: hidden;\n  }\n"]))),Ir=Object(v.b)(Mr||(Mr=Object(j.a)(["\n  pointer-events: bounding-box;\n\n  @-moz-document url-prefix() {\n    pointer-events: fill;\n  }\n  .Integral-area {\n    // height: 100%;\n    fill: #ff6f0057;\n  }\n  .delete-button {\n    visibility: visible;\n    cursor: pointer;\n  }\n"]))),Fr=function Zone(e){var t=e.zoneData,n=e.isVisible,a=t.x,i=t.y,o=t.id,r=t.signal,c=useAssignment(o),l=Object(ri.c)([c.id],ri.b.ZONE),s=useChartData(),u=s.margin,d=s.width,b=s.height,p=s.xDomain,f=s.yDomain,h=get2DXScale({margin:u,width:d,xDomain:p}),g=get2DYScale({margin:u,height:b,yDomain:f}),j=a.from,v=a.to,O=i.from,x=i.to,C=Object(y.useState)(!1),k=Object(m.a)(C,2),S=k[0],D=k[1];return Object(y.useEffect)((function(){D(!function checkZoneKind(e){return e.kind===$i}(t))}),[t]),Object(ve.c)("g",{css:l.isActive||c.isActive?Ir:Pr,onMouseEnter:function onMouseEnter(){c.onMouseEnter(),l.show()},onMouseLeave:function onMouseLeave(){c.onMouseLeave(),l.hide()},children:[n.zones&&Object(ve.b)("g",{transform:"translate(".concat(h(v),",").concat(g(O),")"),children:Object(ve.b)("rect",{x:"0",width:h(j)-h(v),height:g(x)-g(O),className:"Integral-area",fill:"#0000000f",stroke:S?"#343a40":"darkgreen",strokeWidth:S?"0":"1"})}),r.map((function(e,t){return Object(ve.b)(Er,{signal:e,isVisible:n},"".concat(o+t))}))]},o)};Fr.defaultProps={onDelete:function onDelete(){return null}};var Rr=Fr,Nr=vr((function Zones(e){var t=e.zones,n=e.display,a=e.displayerKey,i=Object(y.useState)({zones:!0,signals:!0,peaks:!0}),o=Object(m.a)(i,2),r=o[0],c=o[1];return Object(y.useEffect)((function(){ti.on("onZonesVisibilityChange",(function(e){var t=e.key;c((function(e){return Object(g.a)(Object(g.a)({},e),{},Object(ce.a)({},t,!e[t]))}))}))}),[]),Object(P.jsx)("g",{clipPath:"url(#".concat(a,"clip-chart-2d)"),className:"2D-Zones",children:n.isVisible&&t.values.map((function(e){return Object(P.jsx)("g",{className:"zone",children:Object(P.jsx)(Rr,{zoneData:e,isVisible:r})},e.id)}))})}));function Chart2D(e){var t=e.data,n=useChartData(),a=n.width,i=n.height,o=n.margin,r=n.displayerKey;return Object(y.useMemo)((function(){return Object(P.jsxs)("svg",{viewBox:"0 0 ".concat(a," ").concat(i),width:a,height:i,id:"nmrSVG",children:[Object(P.jsx)("defs",{children:Object(P.jsx)("clipPath",{id:"".concat(r,"clip-chart-2d"),children:Object(P.jsx)("rect",{width:a-o.left-o.right,height:i-o.top-o.bottom,x:o.left,y:o.top})})}),Object(P.jsx)("rect",{width:a-o.left-o.right,height:i-o.top-o.bottom,x:o.left,y:o.top,stroke:"black",strokeWidth:"1",fill:"transparent"}),t&&t[0]&&Object(P.jsx)(br,{data:t[0]}),t&&t[1]&&Object(P.jsx)(ur,{data:t[1]}),Object(P.jsx)(ir,{}),Object(P.jsx)(Nr,{}),Object(P.jsx)(sr,{axis:"X",show:!0}),Object(P.jsx)(sr,{axis:"Y",show:!0}),Object(P.jsxs)("g",{className:"container",style:{pointerEvents:"none"},children:[Object(P.jsx)(hr,{}),Object(P.jsx)(mr,{})]})]})}),[a,i,r,o.left,o.right,o.top,o.bottom,t])}Chart2D.defaultProps={onDimensionChange:function onDimensionChange(){return null}},Chart2D.propsTypes={onDimensionChange:Li.a.func.isRequired};var _r,Lr=Chart2D,zr=n(240),Hr=Object(v.b)(_r||(_r=Object(j.a)(["\n  display: flex;\n  flex-firection: row;\n  align-items: center;\n  pointer-events: bounding-box;\n  user-select: 'none';\n  -webkit-user-select: none; /* Chrome all / Safari all */\n  -moz-user-select: none; /* Firefox all */\n  background-color: #f7f7f7;\n  height: 30px;\n  padding: 6px;\n  color: #8d0018;\n  position: absolute;\n  width: 100%;\n  bottom: 0;\n  div {\n    margin: 0px 10px;\n    display: inline-block;\n\n    .label {\n      font-size: 12px;\n      color: #4d4d4d;\n      font-weight: bold;\n    }\n    .value {\n      font-weight: bold;\n      font-size: 14px;\n    }\n    .unit {\n      font-weight: bold;\n      font-size: 10px;\n    }\n  }\n"])));var Br=function FooterBanner_FooterBanner(e){var t=e.layout,n=e.data1D,a=Object(y.useContext)(N),i=Object(y.useContext)(I),o=i.startX,r=i.endX,c=i.startY,l=i.endY,s=i.step,u=useChartData(),d=u.margin,b=u.width,p=u.height,f=u.activeSpectrum,h=u.xDomain,g=u.yDomain,j=u.yDomains,v=u.activeTab,O=u.data,x=u.selectedTool,C=a&&getLayoutID(t,{startX:a.x,startY:a.y}),k=v.split(","),S=useFormatNumberByNucleus(k),D=Object(m.a)(S,2),w=D[0],T=D[1],M=Object(y.useMemo)((function(){if(!n||0===n.length)return get2DXScale({width:b,margin:d,xDomain:h});if(x!==Xa.slicingTool.id)switch(C){case nr.TOP_1D:case nr.CENTER_2D:return get2DXScale({width:b,margin:d,xDomain:h});case nr.LEFT_1D:return get2DYScale({height:p,margin:d,yDomain:g});default:return null}return null}),[n,p,d,x,C,b,h,g]),A=Object(y.useMemo)((function(){if(!n||0===n.length)return get2DYScale({height:p,margin:d,yDomain:g});if(x!==Xa.slicingTool.id)switch(C){case nr.CENTER_2D:return get2DYScale({height:p,margin:d,yDomain:g});case nr.TOP_1D:return n[0]?get1DYScale(j[n[0].id],d.top):null;case nr.LEFT_1D:return n[1]?get1DYScale(j[n[1].id],d.left):null;default:return null}return null}),[n,p,d,x,C,g,j]);if(!f||!a||a.y<10||a.x<10||a.x>b-d.right||a.y>p-d.bottom)return Object(ve.b)("div",{css:Hr});var E=function getRealYValue(e){var t=null;if(C===nr.TOP_1D?t=0:C===nr.LEFT_1D&&(t=1),null!=t&&null!=M){var a=Object(_e.f)(n[t].data.x,M.invert(e));return n[t].data.y[a]}return 1},P=function getXValue(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(null!=M)switch(C){case nr.CENTER_2D:case nr.TOP_1D:return M.invert(e||a.x);case nr.LEFT_1D:return M.invert(e||a.y);default:return 0}return 0},F=function getYValue(){if(null!=A)switch(C){case nr.CENTER_2D:case nr.TOP_1D:return A.invert(a.y);case nr.LEFT_1D:return A.invert(a.x);default:return 0}return 0},R=function getLabel(e,t,n){return C===nr.CENTER_2D?Object(ve.c)(y.Fragment,{children:[e," ( ",Object(ve.b)(zr.a,{mf:n})," )"]}):t};return Object(ve.c)("div",{css:Hr,children:[Object(ve.c)("div",{children:[Object(ve.c)("span",{className:"label",children:[R("F2","X",k[0])," :"]}),Object(ve.b)("span",{className:"value",children:w(P())}),Object(ve.b)("span",{className:"unit",children:"ppm"})]}),Object(ve.c)("div",{children:[Object(ve.c)("span",{className:"label",children:[R("F1","Y",k[1])," :"]}),Object(ve.b)("span",{className:"value",children:T(F())}),Object(ve.b)("span",{className:"unit",children:"ppm"})]}),Object(ve.c)("div",{children:[Object(ve.b)("span",{className:"label",children:"Intensity :"}),Object(ve.b)("span",{className:"value",children:function getZValue(){if(C===nr.CENTER_2D){var e=O[f.index].data,t=e.maxX,n=e.maxY,a=e.minX,i=e.minY,o=e.z,r=(t-a)/(o[0].length-1),c=(n-i)/(o.length-1),l=Math.floor((P()-a)/r),s=Math.floor((F()-i)/c);return l<0||l>=o[0].length||(s<0||s>=o.length)?0:o[s][l]}return 0}()})]}),"brushing"===s&&Object(ve.c)("div",{children:[Object(ve.b)("span",{className:"label",children:" \u0394ppm :"}),Object(ve.b)("span",{className:"value",children:function getDeltaX(){switch(C){case nr.TOP_1D:return(P(o)-P(r)).toPrecision(6);case nr.LEFT_1D:return(P(c)-P(l)).toPrecision(6);default:return 0}}()})]}),"brushing"===s&&Object(ve.c)("div",{children:[Object(ve.b)("span",{className:"label",children:" ratio :"}),Object(ve.c)("span",{className:"value",children:[function getRation(){switch(C){case nr.TOP_1D:return(E(o)/(E(r)||Number.MIN_VALUE)*100).toFixed(2);case nr.LEFT_1D:return(E(c)/(E(l)||Number.MIN_VALUE)*100).toFixed(2);default:return 0}}(),"%"]})]})]})},Xr={cursor:"crosshair",transformOrigin:"bottom right",position:"absolute",top:"-18px",left:"-88px",fontWeight:"bold",pointerEvents:"none",overflow:"visible",userSelect:"none",width:"85px",textAlign:"right"};var Vr=function XYLabelPointer(e){var t=e.layout,n=e.data1D,a=Object(y.useContext)(N),i=Object(y.useContext)(I).step,o=useChartData(),r=o.margin,c=o.width,l=o.height,s=o.activeSpectrum,u=o.xDomain,d=o.yDomain,b=o.yDomains,p=o.activeTab,f=a&&getLayoutID(t,{startX:a.x,startY:a.y}),h=useFormatNumberByNucleus(p.split(",")),j=Object(m.a)(h,2),v=j[0],O=j[1],x=Object(y.useMemo)((function(){if(!n||0===n.length)return get2DXScale({width:c,margin:r,xDomain:u});switch(f){case nr.TOP_1D:case nr.CENTER_2D:return get2DXScale({width:c,margin:r,xDomain:u});case nr.LEFT_1D:return get2DYScale({height:l,margin:r,yDomain:d});default:return null}}),[n,l,r,f,c,u,d]),C=Object(y.useMemo)((function(){if(!n||0===n.length)return get2DYScale({height:l,margin:r,yDomain:d});switch(f){case nr.CENTER_2D:return get2DYScale({height:l,margin:r,yDomain:d});case nr.TOP_1D:return n[0]?get1DYScale(b[n[0].id],r.top):null;case nr.LEFT_1D:return n[1]?get1DYScale(b[n[1].id],r.left):null;default:return null}}),[n,l,r,f,d,b]);return!s||"brushing"===i||!a||a.y<r.top||a.x<r.left||a.x>c-r.right||a.y>l-r.bottom?null:Object(P.jsxs)("div",{style:Object(g.a)(Object(g.a)({},Xr),{},{transform:"translate(".concat(a.x,"px, ").concat(a.y,"px)")}),children:[Object(P.jsx)("span",{children:O(function getYValue(){switch(f){case nr.CENTER_2D:case nr.TOP_1D:return C.invert(a.y);case nr.LEFT_1D:return C.invert(a.x);default:return 0}}())}),Object(P.jsx)("span",{style:{color:"gray"},children:","}),Object(P.jsx)("span",{style:{color:"red"},children:v(function getXValue(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;switch(f){case nr.CENTER_2D:case nr.TOP_1D:return x.invert(e||a.x);case nr.LEFT_1D:return x.invert(e||a.y);default:return 0}}())})]},"xLabelPointer")},Yr=n(46);function generateID(){for(var e="",t=0;t<8;t++)e+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()));return e}function applyFilter(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=!1,i=Object(Yr.a)(n);try{for(i.s();!(t=i.n()).done;){var o=t.value,r={name:o.name,label:Ba[o.name].name,value:o.options},c=lookupForFilter(e,o.name);if(c){var l=Ba[o.name].reduce(c.value,r.value);l.once?(a||(a=!0),null!=l.reduce&&void 0!==l.reduce&&replaceFilter(e,c.id,l.reduce)):addFilter(e,r,!Object.prototype.hasOwnProperty.call(o,"isDeleteAllow")||o.isDeleteAllow)}else addFilter(e,r,!Object.prototype.hasOwnProperty.call(o,"isDeleteAllow")||o.isDeleteAllow)}}catch(b){i.e(b)}finally{i.f()}if(a)1===n.length&&isLastFilter(e,n[0].name)?Ba[n[0].name].apply(e,n[0].options):reapplyFilters(e);else{var s,u=Object(Yr.a)(n);try{for(u.s();!(s=u.n()).done;){var d=s.value;Ba[d.name].apply(e,d.options)}}catch(b){u.e(b)}finally{u.f()}}}function isLastFilter(e,t){var n=e.filters.findIndex((function(e){return e.name===t}));return e.filters.length===n+1}function lookupForFilter(e,t){return e.filters.find((function(e){return e.name===t}))}function reapplyFilters(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=t||e.filters;FiltersManager_enableFilter(e,null,null,n)}function FiltersManager_enableFilter(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;e.filters=e.filters.slice(0),t&&(e.filters=e.filters.map((function(e){return Object(g.a)(Object(g.a)({},e),{},{flag:e.id===t?n:e.flag})}),[])),e.data=Object(g.a)(Object(g.a)({},e.data),e.originalData),e.info=Object(g.a)(Object(g.a)({},e.info),e.originalInfo);var i=a||e.filters;for(var o in i){var r=e.filters[o];if(e.filters[o]=Object(g.a)(Object(g.a)({},e.filters[o]),{},{error:null}),r.flag)try{Ba[r.name].apply(e,r.value)}catch(c){e.filters[o]=Object(g.a)(Object(g.a)({},e.filters[o]),{},{error:c.message})}}}function deleteFilter(e,t){for(var n in e.filters=e.filters.slice(0),e.filters=e.filters.filter((function(e){return e.id!==t})),e.data=Object(g.a)(Object(g.a)({},e.data),e.originalData),e.info=Object(g.a)(Object(g.a)({},e.info),e.originalInfo),e.filters){var a=e.filters[n];if(e.filters[n]=Object(g.a)(Object(g.a)({},e.filters[n]),{},{error:null}),a.flag)try{Ba[a.name].apply(e,a.value)}catch(i){e.filters[n]=Object(g.a)(Object(g.a)({},e.filters[n]),{},{error:i.message})}}}function addFilter(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=generateID();e.filters=e.filters.slice(0),delete t.isSnapshot,e.filters.push(Object(g.a)(Object(g.a)({},t),{},{id:a,flag:!0,isDeleteAllow:n}))}function replaceFilter(e,t,n){e.filters=e.filters.slice(0);var a=e.filters.findIndex((function(e){return e.id===t}));delete e.filters[a].isSnapshot,e.filters[a]=Object(g.a)(Object(g.a)({},e.filters[a]),{},{value:n})}var Zr=["#C10020","#007D34","#803E75","#FF6800","#B32851","#7F180D","#232C16","#A6BDD7","#CEA262","#817066","#FF8E00","#F6768E","#00538A","#FF7A5C","#53377A","#FFB300","#F4C800","#93AA00","#593315","#F13A13"],Ur={cosy:{positiveColor:"darkblue",negativeColor:"blue"},roesy:{positiveColor:"pink",negativeColor:"yellow"},noesy:{positiveColor:"pink",negativeColor:"yellow"},tocsy:{positiveColor:"green",negativeColor:"yellow"},hsqc:{positiveColor:"black",negativeColor:"yellow"},hmbc:{positiveColor:"darkviolet",negativeColor:"yellow"}},Kr=function percentToHex(e){var t=Math.max(0,Math.min(100,e)),n=Math.round(t/100*255).toString(16);return 100===t?"":n.padStart(2,"0")},Wr=function adjustAlpha(e,t){return e+Kr(t)},Gr=function getColor(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100,a=Zr.filter((function(e){return!t.includes(e)}));if(a.length>0&&!e)return a[0]+Kr(n);var i=-.25,o=String("#".concat(Math.random().toString(16).slice(2,8).toUpperCase())).replace(/[^0-9a-f]/gi,"");o.length<6&&(o=o[0]+o[0]+o[1]+o[1]+o[2]+o[2]);var r,c,l="#";for(c=0;c<3;c++)r=parseInt(o.substr(2*c,2),16),r=Math.round(Math.min(Math.max(0,r+r*i),255)).toString(16),l+="00".concat(r).substr(r.length);return l+Kr(n)},qr=Gr,Jr=n(206),$r={minMaxRatio:.05,realTopDetection:!0,maxCriteria:!0,smoothY:!1,nH:100,compile:!0,frequencyCluster:16,clean:!0,keepPeaks:!0,sgOptions:{windowSize:7,polynomial:3}};var Qr=function detectSignal(e,t,n,a,i){var o=Object(_e.g)(e,{from:n,to:a}),r=o.fromIndex,c=o.toIndex,l={x:e.slice(r,c),y:t.slice(r,c)},s=Object(Le.a)(l,{frequency:i,takeBestPartMultiplet:!0,symmetrizeEachStep:!0});return{multiplicity:s.j.map((function(e){return e.multiplicity})).join(""),kind:"signal",delta:s.chemShift,j:s.j}},ec=[];function initiateDatum1D(e){var t,n={};return n.shiftX=e.shiftX||0,n.id=e.id||generateID(),n.source=Object.assign({jcamp:null,jcampURL:null,original:[]},e.source),n.display=Object.assign(Object(g.a)(Object(g.a)({name:(null===(t=e.display)||void 0===t?void 0:t.name)?e.display.name:generateID(),color:"black"},function Datum1D_getColor(e){if(void 0===e.display||void 0===e.display.color){var t=qr(!1,ec);return ec.push(t),{color:t}}return{}}(e)),{},{isVisible:!0,isPeaksMarkersVisible:!0,isRealSpectrumVisible:!0,isVisibleInDomain:!0}),e.display),n.info=Object.assign({nucleus:"1H",isFid:!1,isComplex:!1,dimension:1},e.info),n.originalInfo=n.info,n.meta=Object.assign({},e.meta),n.data=Object.assign({x:[],re:[],im:[],y:[]},e.data),n.originalData=n.data,n.peaks=Object.assign({values:[],options:{}},e.peaks),n.integrals=Object.assign({values:[],options:{sum:100}},e.integrals),n.filters=Object.assign([],e.filters),n.ranges=Object.assign({values:[],options:{sum:100}},e.ranges),reapplyFilters(n),function preprocessing(e){e.info.isFid&&-1===e.filters.findIndex((function(e){return e.name===Ba.digitalFilter.id}))&&applyFilter(e,[{name:Ba.digitalFilter.id,options:{digitalFilterValue:e.info.digitalFilter},isDeleteAllow:!1}])}(n),n.data.y=n.data.re,n}function lookupPeak(e,t){var n=t.from,a=t.to,i=e.x.findIndex((function(e){return e>=n})),o=e.x.findIndex((function(e){return e>=a}))-1;i>o&&(o=i=o);var r=e.re.slice(i,o);if(r&&r.length>0){var c=Object(Yo.a)(r),l=r.findIndex((function(e){return e===c}));return{x:e.x[i+l],y:c,xIndex:i+l}}return null}function updateIntegralIntegrals(e){void 0===e.options.sum&&(e.options=Object(g.a)(Object(g.a)({},e.options),{},{sum:100}));e.values=updateRelatives(e.values,e.options.sum,"integral",(function countingCondition(e){return e.kind&&Ji.includes(e.kind)}))}function updateRelatives(e,t,n,a){var i=e.reduce((function(e,t){return a&&!0===a(t)?e+=Math.abs(t.absolute):e}),0),o=i>0?t/i:0;return e.map((function(e){return Object(g.a)(Object(g.a)({},e),{},Object(ce.a)({},n,e.absolute*o))}))}function updateIntegralRanges(e){void 0===e.ranges.options.sum&&(e.ranges.options.sum=100);e.ranges.values=updateRelatives(e.ranges.values,e.ranges.options.sum,"integral",(function countingCondition(e){return e.signal&&function checkSignalKinds(e,t){return!e.signal.some((function(e){return void 0===e.kind||!t.includes(e.kind)}))}(e,Ji)}))}function mapRanges(e,t){var n=t.data,a=n.x,i=n.re,o=getShiftX(t),r=(a[a.length-1]-a[0])/1e4;return e.reduce((function(e,n){var c,l=Object(Yr.a)(t.ranges.values);try{for(l.s();!(c=l.n()).done;){var s=c.value,u=s.from,d=s.to;if(Math.abs(n.from-u)<r&&Math.abs(n.to-d)<r)return e}}catch(f){l.e(f)}finally{l.f()}var b=Object(_e.k)({x:a,y:i},{from:n.from,to:n.to,reverse:!0}),p=n.signal.map((function(e){return Object(g.a)({kind:"signal",id:generateID(),originDelta:e.delta-o},e)}));return e.push(Object(g.a)(Object(g.a)({kind:n.signal[0].kind||$i,originFrom:n.from-o,originTo:n.to-o},n),{},{id:generateID(),absolute:b,signal:p})),e}),[])}function detectRanges(e,t){t.impurities={solvent:e.info.solvent};var n=function autoRangesDetection(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Object(_e.e)(e.data.re),a=e.data,i=a.re,o=a.x,r=e.info,c=r.originFrequency,l=r.nucleus,s=t.windowFromIndex,u=t.windowToIndex,d=t.peakPicking,b=Object(g.a)(Object(g.a)({},$r),d),p={frequency:c,nucleus:l,noiseLevel:3*n};return void 0!==s&&void 0!==u&&(o=o.slice(s,u),i=i.slice(s,u)),Object(Jr.f)({x:o,y:i},{peakPicking:b,ranges:p})}(e,t);e.ranges.values=e.ranges.values.concat(mapRanges(n,e)),updateIntegralRanges(e)}function updateXShift(e){var t=getShiftX(e);!function updatePeaksXShift(e,t){e.peaks.values=e.peaks.values.map((function(e){return Object(g.a)(Object(g.a)({},e),{},{delta:e.originDelta+t})}))}(e,t),function updateRangesXShift(e,t){e.ranges.values=e.ranges.values.map((function(e){return Object(g.a)(Object(g.a)({},e),{},{from:e.originFrom+t,to:e.originTo+t,signal:(null===e||void 0===e?void 0:e.signal)&&e.signal.map((function(e){return Object(g.a)(Object(g.a)({},e),{},{delta:e.originDelta+t})}))})}))}(e,t),function updateIntegralXShift(e,t){e.integrals.values=e.integrals.values.map((function(e){return Object(g.a)(Object(g.a)({},e),{},{from:e.originFrom+t,to:e.originTo+t})}))}(e,t)}function getShiftX(e){var t=(null===e||void 0===e?void 0:e.filters)&&(null===e||void 0===e?void 0:e.filters.find((function(e){return e.name===Ba.shiftX.id})));return(null===t||void 0===t?void 0:t.flag)?t.value:0}var tc=n(735),nc={positive:{contourLevels:[0,21],numberOfLayers:10},negative:{contourLevels:[0,21],numberOfLayers:10}},ac=function(){function Processing2D(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:nc,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{positive:10,negative:10};Object(et.a)(this,Processing2D),this.options=t;var a=n.positive,i=n.negative;this.currentLevelPositive=a,this.currentLevelNegative=i;var o=getRange(e.minX,e.maxX,e.z[0].length),r=getRange(e.minY,e.maxY,e.z.length);this.conrec=new tc.a(e.z,{xs:o,ys:r,swapAxes:!1}),this.median=e.noise,this.minMax=e}return Object(tt.a)(Processing2D,[{key:"getLevel",value:function getLevel(){return{levelPositive:this.currentLevelPositive,levelNegative:this.currentLevelNegative}}},{key:"setLevel",value:function setLevel(e,t){this.currentLevelPositive=e,this.currentLevelNegative=t}},{key:"setOptions",value:function setOptions(e){var t=e.positive.contourLevels,n=e.negative.contourLevels;this.currentLevelPositive>=t[1]?this.currentLevelPositive=t[1]:this.currentLevelPositive<=t[0]&&(this.currentLevelPositive=t[0]),this.currentLevelNegative>=n[1]?this.currentLevelNegative=n[1]:this.currentLevelNegative<=n[0]&&(this.currentLevelNegative=n[0]),this.options=e}},{key:"wheel",value:function wheel(e){var t=Math.sign(e),n=this.options.positive.contourLevels,a=this.options.negative.contourLevels;(this.currentLevelPositive>n[0]&&-1===t||this.currentLevelPositive<n[1]&&1===t)&&(this.currentLevelPositive+=t),(this.currentLevelNegative>a[0]&&-1===t||this.currentLevelNegative<a[1]&&1===t)&&(this.currentLevelNegative+=t)}},{key:"shiftWheel",value:function shiftWheel(e){var t=Math.sign(e),n=Object(m.a)(this.options.positive.contourLevels,2),a=n[0],i=n[1];if(!(this.currentLevelPositive===a&&-1===t||this.currentLevelPositive>=i&&1===t))return this.currentLevelPositive+=t,[]}},{key:"drawContours",value:function drawContours(){var e=this.currentLevelPositive/2+1,t=this.currentLevelNegative/2+1,n=this.options,a=n.positive.numberOfLayers,i=n.negative.numberOfLayers;return{positive:this.getContours(e,{nbLevels:a}),negative:this.getContours(t,{negative:!0,nbLevels:i})}}},{key:"getContours",value:function getContours(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.negative,a=void 0!==n&&n,i=t.timeout,o=void 0===i?2e3:i,r=t.nbLevels,c=void 0===r?10:r,l=Math.max(Math.abs(this.minMax.maxZ),Math.abs(this.minMax.minZ)),s=getRange(1*this.median*Math.pow(2,e),l,c,2);a&&(s=s.map((function(e){return-e})));var u=[];try{u=this.conrec.drawContour({contourDrawer:"basic",levels:s,timeout:o})}catch(d){throw console.log(d),d}return u}}]),Processing2D}();function getRange(e,t,n,a){if(a){var i=[];i[0]=0;for(var o=1;o<=n;o++)i[o]=i[o-1]+(a-1)/Math.pow(a,o);for(var r=i[n],c=new Array(n),l=0;l<n;l++)c[l]=(t-e)*(1-i[l+1]/r)+e;return c}var s=(t-e)/(n-1);return function Processing2D_range(e,t,n){for(var a=[],i=e;i<t;i+=n)a.push(i);return a}(e,t+s/2,s)}var ic=[];function initiateDatum2D(e){var t={};return t.id=e.id||generateID(),t.source=Object.assign({jcamp:null,jcampURL:null,original:[]},e.source),t.display=Object.assign(Object(g.a)(Object(g.a)({name:e.display.name||generateID(),positiveColor:"red",negativeColor:"blue"},function Datum2D_getColor(e){if(void 0===e.display||void 0===e.display.negativeColor||void 0===e.display.positiveColor){var t=function get2DColor(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(!Ur[e]){var n=Gr(!1,t);return{positiveColor:n,negativeColor:Wr(n,50)}}return Ur[e]}(e.info.experiment,ic);return ic.push(t.positiveColor),t}return{}}(e)),{},{isPositiveVisible:!0,isNegativeVisible:!0,isVisible:!0,contourOptions:nc,dimension:2}),e.display),t.info=Object.assign({nucleus:["1H","1H"],isFid:!1,isComplex:!1},e.info),t.originalInfo=t.info,t.meta=Object.assign({},e.meta),t.data=Object.assign({z:[],minX:0,minY:0,maxX:0,maxY:0},e.data),t.originalData=t.data,t.filters=Object.assign([],e.filters),t.zones=Object.assign({values:[],options:{}},e.zones),t.processingController=new ac(t.data,t.display.contourOptions),reapplyFilters(t),t}function getShift(e){var t={xShift:0,yShift:0};return(null===e||void 0===e?void 0:e.filters)&&(t=e.filters.reduce((function(e,t){return t.name===Ba.shift2DX.id&&(e.xShift=(null===t||void 0===t?void 0:t.flag)?t.value:0),t.name===Ba.shift2DY.id&&(e.yShift=(null===t||void 0===t?void 0:t.flag)?t.value:0),e}),{xShift:0,yShift:0})),t}function updateShift(e){var t=getShift(e);!function updateZonesShift(e,t){var n=t.xShift,a=t.yShift;e.zones.values=e.zones.values.map((function(e){var t;return Object(g.a)(Object(g.a)({},e),{},{signal:null===(t=e.signal)||void 0===t?void 0:t.map((function(e){return Object(g.a)(Object(g.a)({},e),{},{x:Object(g.a)(Object(g.a)({},e.x),{},{delta:e.x.originDelta+n}),y:Object(g.a)(Object(g.a)({},e.y),{},{delta:e.y.originDelta+a})})}))})}))}(e,{xShift:t.xShift,yShift:t.yShift})}function Datum2D_getMissingProjection(e,t){var n=e.info.nucleus.indexOf(t);-1===n&&(n=0);var a={nucleus:e.info.nucleus[n],isFid:!1,isComplex:!1,dimension:1},i=0===n?e.data.minX:e.data.minY,o=0===n?e.data.maxX:e.data.maxY,r=0===n?e.data.z.length:e.data.z[0].length,c=new Float64Array(r);if(1===n)for(var l=0;l<e.data.z.length;l++)for(var s=0;s<e.data.z[0].length;s++)c[l]+=e.data.z[l][s];else for(var u=0;u<e.data.z[0].length;u++)for(var d=0;d<e.data.z.length;d++)c[u]+=e.data.z[d][u];return initiateDatum1D({info:a,data:{x:Object(_e.o)({from:i,to:o},r),re:c}})}function getDetectionZones(e,t){var n={};return n=t.selectedZone?function getSubMatrix(e,t){var n=t.fromX,a=t.toX,i=t.fromY,o=t.toY,r=e.data,c=(r.maxX-r.minX)/(r.z[0].length-1),l=(r.maxY-r.minY)/(r.z.length-1),s=Math.floor((n-r.minX)/c),u=Math.floor((i-r.minY)/l),d=Math.floor((a-r.minX)/c),b=Math.floor((o-r.minY)/l);if(s>d){var p=[d,s];s=p[0],d=p[1]}if(u>b){var f=[b,u];u=f[0],b=f[1]}for(var h={z:[],maxX:r.minX+d*c,minX:r.minX+s*c,maxY:r.minY+b*l,minY:r.minY+u*l},g=Number.MIN_SAFE_INTEGER,m=Number.MAX_SAFE_INTEGER,j=d-s+1,v=u;v<b;v++){for(var O=new Float32Array(j),x=s,y=0;y<j;y++)O[y]=r.z[v][x++];var C,k=Object(Yr.a)(O);try{for(k.s();!(C=k.n()).done;){var S=C.value;g<S&&(g=S),m>S&&(m=S)}}catch(D){k.e(D)}finally{k.f()}h.z.push(Array.from(O))}return h.minZ=m,h.maxZ=g,h}(e,t.selectedZone):e.data,t.info=e.info,function autoZonesDetection(e,t){var n=t.thresholdFactor,a=t.clean,i=t.maxPercentCutOff,o=t.enhanceSymmetry,r=t.convolutionByFFT,c=t.info,l=c.nucleus,s=c.originFrequency,u=l[0]===l[1];return Object(Jr.g)(e,{isHomoNuclear:u,nucleus:l,observeFrequencies:s,thresholdFactor:n,clean:a,maxPercentCutOff:i,enhanceSymmetry:o,convolutionByFFT:r})}(n,t)}function SliceScale_getYScale(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10;return Object(Qe.f)(Object(Qe.c)(t),[e-n,n])}function HorizontalSliceChart(e){var t=e.margin,n=e.data,a=useChartData(),i=a.width,o=a.margin,r=a.xDomain,c=a.displayerKey,l=o.top,s=Object(y.useMemo)((function(){if(n){var e=n.x,a=n.re,c=get2DXScale({margin:o,width:i,xDomain:r}),s=SliceScale_getYScale(l,a,t),u=Object(_e.n)({x:e,y:a},{from:r[0],to:r[1]}),d="M ".concat(c(u.x[0])," ").concat(s(u.y[0])," ");return d+=u.x.slice(1).reduce((function(e,t,n){return e+=" L ".concat(c(t)," ").concat(s(u.y[n+1]))}),"")}return null}),[n,l,t,o,i,r]);return i&&l?Object(P.jsxs)("svg",{viewBox:"0 0 ".concat(i," ").concat(l),width:i,height:l,children:[Object(P.jsx)("defs",{children:Object(P.jsx)("clipPath",{id:"".concat(c,"clip-top"),children:Object(P.jsx)("rect",{width:i-o.left-o.right,height:l,x:o.left,y:"".concat(0)})})}),Object(P.jsxs)("g",{clipPath:"url(#".concat(c,"clip-top)"),children:[Object(P.jsx)("rect",{width:i-o.left-o.right,height:l,x:o.left,y:"".concat(0),fillOpacity:"0"}),Object(P.jsx)("path",{className:"line",stroke:"red",fill:"none",d:s})]})]}):null}HorizontalSliceChart.defaultProps={margin:10};var oc=Object(y.memo)(HorizontalSliceChart);function VerticalSliceChart(e){var t=e.margin,n=e.data,a=useChartData(),i=a.height,o=a.margin,r=a.yDomain,c=a.displayerKey,l=o.left,s=Object(y.useMemo)((function(){if(n){var e=n.x,a=n.re,c=get2DYScale({height:i,margin:o,yDomain:r}),s=SliceScale_getYScale(l,a,t),u=Object(_e.n)({x:e,y:a},{from:r[0],to:r[1]}),d=u.x.length-1,b=u.y.length-1,p="M  ".concat(s(u.y[b])," ").concat(c(d)," ");return p+=u.x.slice(0,d).reduceRight((function(e,t,n){return e+=" L  ".concat(s(u.y[n])," ").concat(c(t))}),"")}return null}),[n,l,o,t,i,r]),u=i-o.bottom-o.top;return u&&l?Object(P.jsxs)("svg",{viewBox:"0 0 ".concat(l," ").concat(u+o.top),width:l,height:u+o.top,children:[Object(P.jsx)("defs",{children:Object(P.jsx)("clipPath",{id:"".concat(c,"clip-left"),children:Object(P.jsx)("rect",{width:l,height:u,x:"0",y:o.top})})}),Object(P.jsx)("g",{clipPath:"url(#".concat(c,"clip-left)"),children:Object(P.jsx)("path",{className:"line",stroke:"red",fill:"none",d:s})})]}):null}VerticalSliceChart.defaultProps={margin:10};var rc=Object(y.memo)(VerticalSliceChart);function SlicingView(){var e=useChartData(),t=e.width,n=e.height,a=e.margin,i=e.activeSpectrum,o=e.data,r=e.xDomain,c=e.yDomain,l=function useMouseTracker(){return Object(y.useContext)(N)}(),s=Object(y.useMemo)((function(){if(l&&i.id){var e=l.x,s=l.y,u=get2DXScale({margin:a,width:t,xDomain:r}),d=get2DYScale({margin:a,height:n,yDomain:c}),b=function getSlice(e,t){var n=e.data,a=(n.maxX-n.minX)/(n.z[0].length-1),i=(n.maxY-n.minY)/(n.z.length-1),o=Math.floor((t.x-n.minX)/a),r=Math.floor((t.y-n.minY)/i);if(!(o<0||o>=n.z[0].length)&&!(r<0||r>=n.z.length)){for(var c={nucleus:e.info.nucleus[0],isFid:!1,isComplex:!1,dimension:1},l={x:Object(_e.o)({from:e.data.minX,to:e.data.maxX},e.data.z[0].length),re:new Float64Array(e.data.z[0].length)},s=0;s<e.data.z[0].length;s++)l.re[s]+=e.data.z[r][s];for(var u={nucleus:e.info.nucleus[1],isFid:!1,isComplex:!1,dimension:1},d={x:Object(_e.o)({from:e.data.minY,to:e.data.maxY},e.data.z.length),re:new Float64Array(e.data.z.length)},b=e.data.z.length-1,p=0;p<e.data.z.length;p++)d.re[p]+=e.data.z[b--][o];return{horizontal:initiateDatum1D({info:c,data:l}),vertical:initiateDatum1D({info:u,data:d})}}}(o[i.index],{x:u.invert(e),y:d.invert(s)});return Object(P.jsxs)("svg",{viewBox:"0 0 ".concat(t," ").concat(n),width:t,height:n,style:{position:"absolute",backgroundColor:"rgba(255,255,255,0.8)"},children:[b&&b.horizontal&&Object(P.jsx)(oc,{data:b.horizontal.data}),b&&b.vertical&&Object(P.jsx)(rc,{data:b.vertical.data})]})}return null}),[l,i.id,i.index,a,t,r,n,c,o]);return l?s:null}SlicingView.defaultProps={onDimensionChange:function onDimensionChange(){return null}},SlicingView.propsTypes={onDimensionChange:Li.a.func.isRequired};var cc=SlicingView;var lc,sc=function Viewer2D(e){var t=e.emptyText,n=void 0===t?void 0:t,a=useChartData(),i=a.selectedTool,o=a.isLoading,r=a.data,c=a.margin,l=a.tabActiveSpectrum,s=a.activeTab,u=useDispatch(),d=Object(y.useMemo)((function(){return s.split(",").reduce((function(e,t){if(l[t]&&l[t].id){var n=l[t].id,a=r.find((function(e){return e.id===n&&!e.info.isFid}));a&&e.push(a)}else e.push(null);return e}),[])}),[s,r,l]),b=function get2DDimensionLayout(e){var t=e.width,n=e.height,a=e.margin;return{CENTER_2D:{startX:a.left,startY:a.top,endX:t-a.right,endY:n-a.bottom},TOP_1D:{startX:a.left,startY:0,endX:t-a.right,endY:a.top},LEFT_1D:{startX:0,startY:a.top,endX:a.left,endY:n-a.bottom}}}(a),p=Object(y.useCallback)((function(e){if(getLayoutID(b,e))if(e.altKey)i;else if(e.shiftKey)switch(i){case Xa.zone2D.id:u(Object(g.a)({type:Rn},e))}else if(null!=i)return u(Object(g.a)(Object(g.a)({type:en},e),{},{trackID:getLayoutID(b,e)}))}),[i,u,b]),f=Object(y.useCallback)((function(e){var t=e.x,n=e.y,a=getLayoutID(b,{startX:t,startY:n});a&&u({type:Rt,trackID:a})}),[b,u]),h=function handleZoom(e){var t=e.x,n=e.y,a=getLayoutID(b,{startX:t,startY:n});a&&u("CENTER_2D"===a?Object(g.a)({type:Fn},e):Object(g.a)(Object(g.a)({type:Vt},e),{},{trackID:a}))},j=Object(y.useCallback)((function(e){e.x,e.y}),[i]),v=Object(D.a)((function(){return Object(P.jsxs)(y.Fragment,{children:[Object(P.jsx)(Ne,{isLoading:o,emptyText:n}),r&&r.length>0&&Object(P.jsx)(BrushTracker,{onBrush:p,onDoubleClick:f,onClick:j,onZoom:h,style:{width:"100%",height:"100%",margin:"auto",position:"relative",overflow:"hidden"},children:Object(P.jsxs)(MouseTracker,{style:{width:"100%",height:"100%",position:"absolute"},children:[i&&i===Xa.slicingTool.id&&Object(P.jsx)(cc,{}),Object(P.jsx)(Ja,{}),d&&Object(P.jsx)(Vr,{data1D:d,layout:b}),Object(P.jsx)(Wa,{brushType:Ka,dimensionBorder:b.CENTER_2D}),Object(P.jsxs)(P.Fragment,{children:[d&&d[0]&&Object(P.jsx)(Wa,{brushType:Za,dimensionBorder:b.TOP_1D,height:c.top}),d&&d[1]&&Object(P.jsx)(Wa,{brushType:Ua,dimensionBorder:b.LEFT_1D,width:c.left})]}),d&&Object(P.jsx)(Br,{data1D:d,layout:b}),Object(P.jsx)(Lr,{data:d})]})})]})}),[]),O=Object(m.a)(v,2),x=O[0],C=O[1],k=C.width,S=C.height,T=Object(y.useState)(),M=Object(m.a)(T,2),A=M[0],E=M[1];return Object(w.a)((function(){return E({width:k,height:S})}),400,[k,S]),Object(y.useEffect)((function(){A&&isFinite(A.width)&&isFinite(A.height)&&u(Object(g.a)({type:Et},A))}),[u,A]),x},uc=n(47),dc=n(90),bc={container:{margin:"25px"},header:{backgroundColor:"#ffffff",padding:"20px",borderRadius:"10px",fontSize:"30px",textAlign:"center"},body:{whiteSpace:"pre-wrap",backgroundColor:"white",padding:"20px",borderRadius:"10px",color:"red"}},pc=function(e){Object(uc.a)(ErrorBoundary,e);var t=Object(dc.a)(ErrorBoundary);function ErrorBoundary(e){var n;return Object(et.a)(this,ErrorBoundary),(n=t.call(this,e)).state={error:null,errorInfo:null},n}return Object(tt.a)(ErrorBoundary,[{key:"componentDidCatch",value:function componentDidCatch(e,t){this.setState({error:e,errorInfo:t})}},{key:"render",value:function render(){return this.state.errorInfo?Object(P.jsxs)("div",{style:bc.container,children:[Object(P.jsx)("p",{style:bc.header,children:"Something went wrong."}),Object(P.jsxs)("details",{style:bc.body,children:[this.state.error,Object(P.jsx)("br",{}),this.state.errorInfo.componentStack]})]}):this.props.children}}]),ErrorBoundary}(y.Component),fc=Object(y.createContext)(),hc=fc.Provider,gc=function useAlert(){return Object(y.useContext)(fc)},mc=Object(v.b)(lc||(lc=Object(j.a)(["\n  width: 40px;\n  height: 40px;\n  margin: 0 auto;\n  :after {\n    content: ' ';\n    display: block;\n    width: 30px;\n    height: 30px;\n    margin-top: 10px;\n    border-radius: 50%;\n    border: 4px solid;\n    border-color: #fff transparent #fff transparent;\n    animation: ring-animation 1s linear infinite;\n  }\n  @keyframes ring-animation {\n    0% {\n      transform: rotate(0deg);\n    }\n    100% {\n      transform: rotate(360deg);\n    }\n  }\n"]))),jc=function ProgressIndicator(){return Object(ve.b)("div",{css:mc})};function Alert_Provider_Provider(e){var t=e.children,n=e.wrapperRef,a=e.offset,i=e.position,o=e.timeout,r=e.type,c=e.transition,l=Object(de.a)(e,["children","wrapperRef","offset","position","timeout","type","transition"]),s=Object(y.useRef)(null),u=Object(y.useRef)(null),d=Object(y.useRef)([]),b=Object(y.useState)([]),p=Object(m.a)(b,2),f=p[0],h=p[1];Object(y.useEffect)((function(){s.current=document.createElement("div");var e=s.current,t=d.current;return n&&n.appendChild(e),function(){e&&n&&(t.forEach(clearTimeout),n.removeChild(e))}}),[n]);var j=Object(y.useCallback)((function(e){h((function(t){var n=t.length,a=t.filter((function(t){return t.id!==e.id}));return n>a.length&&e.options.onClose&&e.options.onClose(),a}))}),[]),v=Object(y.useCallback)((function(){u.current.alerts.forEach(j)}),[j]),O=Object(y.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Math.random().toString(36).substr(2,9),a=Object(g.a)({position:t.position||i,timeout:o,type:r,backgroundColor:"black",color:"white"},t),c={id:n,message:e,options:a,close:function(){return j(c)}};if(c.options.timeout){var l=setTimeout((function(){j(c),d.current.splice(d.current.indexOf(l),1)}),c.options.timeout);d.current.push(l)}return h((function(e){return e.concat(c)})),c.options.onOpen&&c.options.onOpen(),c}),[i,j,o,r]),x=Object(y.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.type=W,t=Object(g.a)({backgroundColor:"#28ba62",color:"white"},t),O(e,t)}),[O]),C=Object(y.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.type=G,t=Object(g.a)({backgroundColor:"#cf3c4f",color:"white"},t),O(e,t)}),[O]),k=Object(y.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.type=K,t.color="#28ba62",O(e,t)}),[O]),S=Object(y.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Process in progress",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.type=q,t.timeout=0,t.backgroundColor="#232323",new Promise((function(n){var a=O(e,t);setTimeout((function(){n((function(){return j(a)}))}),500)}))}),[j,O]),D=Object(y.useCallback)((function(e){j(e)}),[j]),w=Ao(f,(function(e){return e.options.position})),T=Object(y.useMemo)((function(){return n?n.getBoundingClientRect():{top:0,left:0,width:window.innerWidth,height:window.innerHeight}}),[n]);return Object(P.jsxs)(hc,{value:{alerts:f,show:O,remove:j,removeAll:v,success:x,error:C,info:k,showLoading:S},children:[t,s.current&&Object(le.createPortal)(Object(P.jsx)(y.Fragment,{children:Object.keys(U).map((function(e){var t=U[e];return Object(P.jsx)(ue.a,Object(g.a)(Object(g.a)({appear:!0,options:{position:t,zIndex:999999},component:je,containerStyle:T},l),{},{children:w[t]?w[t].map((function(e){return Object(P.jsx)(ge,{type:c,children:Object(P.jsxs)("div",{style:{margin:a,padding:"25px",borderRadius:"10px",pointerEvents:"all",backgroundColor:e.options.backgroundColor,color:e.options.color,minHeight:"60px",position:"relative"},children:[Object(P.jsx)("button",{style:{position:"absolute",right:"5px",top:"5px",border:"none",backgroundColor:"transparent",color:"white"},type:"button",onClick:function onClick(){return D(e)},children:Object(P.jsx)(He.G,{})}),Object(P.jsx)("span",{children:e.message}),e.options.type===q&&Object(P.jsx)(jc,{})]},e.id)},e.id)})):null}),t)}))}),s.current)]})}Alert_Provider_Provider.defaultProps={offset:"5px",position:U.BOTTOM_CENTER,transition:J,wrapperRef:null,timeout:3e3};var vc=Alert_Provider_Provider,Oc=n(731);function fromBruker(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.dependentVariables,a=e.info,i=e.meta,o=getData(n[0].components);o.im&&(a.isComplex=!0),Array.isArray(a.nucleus)&&(a.nucleus=a.nucleus[0]);var r=initiateDatum1D(Object(g.a)(Object(g.a)({},t),{},{info:a,meta:i,data:o,source:{jcamp:null,jcampURL:null,original:o}}));return r}function fromCSD(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.dimensions[0],a=e.dependentVariables,i=n.quantityName,o=n.count,r=n.increment.magnitude,c=n.originOffset.magnitude,l=n.coordinatesOffset.magnitude,s=a[0].components[0],u=[],d=[],b=s.length-1;b>0;b-=2)u.push(s[b-1]),d.push(s[b]);var p,f,h={};switch(i){case"frequency":f=0+l/c*1e6,p=r/c*1e6,h.re=u,h.im=d;break;case"time":f=c,p=r,h.re=u.reverse(),h.im=d.reverse().map((function(e){return-e}))}for(var m=[],j=0;j<o;j++)m.push(f+j*p);h.x=m;var v=initiateDatum1D(Object(g.a)(Object(g.a)({},t),{},{meta:t.meta,data:h,source:{jcamp:null,jcampURL:null,original:h}}));return v}function getData(e){var t=e[0]&&e[0].data&&e[0].data.x?e[0].data.x:[],n=e[0]&&e[0].data&&e[0].data.y?e[0].data.y:[],a=e[1]&&e[1].data&&e[1].data.y?e[1].data.y:null;return t[0]>t[1]&&(t.reverse(),n.reverse(),a&&a.reverse()),{x:t,re:n,im:a}}function Data2DManager_fromBruker(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.dependentVariables,a=e.meta,i=n[0].components,o=initiateDatum2D(Object(g.a)(Object(g.a)({},t),{},{meta:a,data:i,source:{jcamp:null,jcampURL:null,original:i}}));return o}function Data2DManager_fromCSD(e){var t=initiateDatum2D({});return t}function addJcampFromURL(e,t,n){return fetch(t).then((function(e){return e.text()})).then((function(t){addJcamp(e,t,n)}))}function addJcamp(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=Object(Oc.b)(t,{noContour:!0,xy:!0,keepRecordsRegExp:/.*/,profiling:!0});if(0!==a.length){var i,o=Object(Yr.a)(a);try{for(o.s();!(i=o.n()).done;){var r=i.value,c=r.dependentVariables;c[0].components&&(c[0].components.length>0||c[0].components.z.length)&&addJcampSS(e,r,n)}}catch(l){o.e(l)}finally{o.f()}}}function addJcampSS(e,t,n){var a=t.info.dimension;1===a&&e.push(function fromParsedJcamp(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.dependentVariables,a=e.info,i=e.meta,o=getData(n[0].components);return Array.isArray(a.nucleus)&&(a.nucleus=a.nucleus[0]),initiateDatum1D(Object(g.a)(Object(g.a)({},t),{},{info:a,meta:i,data:o,source:{jcamp:null,jcampURL:t.source&&t.source.jcampURL?t.source.jcampURL:null,original:o}}))}(t,n)),2===a&&e.push(function Data2DManager_fromParsedJcamp(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.dependentVariables,a=e.info,i=e.meta,o=n[0].components;return initiateDatum2D(Object(g.a)(Object(g.a)({},t),{},{info:a,meta:i,data:o,source:{jcamp:null,jcampURL:t.source&&t.source.jcampURL?t.source.jcampURL:null,original:o}}))}(t,n))}function addData(e,t){var n=t.info.dimension;1===n&&e.push(initiateDatum1D(Object(g.a)(Object(g.a)({},t),{},{data:t.source.original}))),2===n&&e.push(initiateDatum2D(Object(g.a)(Object(g.a)({},t),{},{data:t.source.original})))}function addJDF(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=Object(Oc.c)(t,{}),i=a.description,o=i.metadata;delete i.metadata,i.acquisitionMode=0,i.experiment=1===i.dimension?"1d":"2d",i.type="NMR SPECTRUM",i.nucleus=i.nucleus[0],i.numberOfPoints=i.numberOfPoints[0],i.acquisitionTime=i.acquisitionTime[0],i.baseFrequency=i.baseFrequency[0],i.frequencyOffset=i.frequencyOffset[0],i.spectralWidthClipped=a.application.spectralWidthClipped,1===i.dimension&&a.dependentVariables&&e.push(fromCSD(a,Object(g.a)(Object(g.a)({},n),{},{display:Object(g.a)({},n.display),info:i,meta:o}))),2===i.dimension&&i.isFt&&e.push(Data2DManager_fromCSD(a,Object(g.a)(Object(g.a)({},n),{},{display:Object(g.a)({},n.display),info:i})))}function _fromJSON(){return(_fromJSON=Object(Mo.a)(To.a.mark((function _callee(){var e,t,n,a,i,o,r=arguments;return To.a.wrap((function _callee$(c){for(;;)switch(c.prev=c.next){case 0:e=r.length>0&&void 0!==r[0]?r[0]:[],t=[],n=[],a=Object(Yr.a)(e);try{for(a.s();!(i=a.n()).done;)null!=(o=i.value).source.jcamp?addJcamp(t,o.source.jcamp,o):null!=o.source.jcampURL?n.push(addJcampFromURL(t,o.source.jcampURL,o)):addData(t,o)}catch(l){a.e(l)}finally{a.f()}return c.next=7,Promise.all(n);case 7:return c.abrupt("return",t);case 8:case"end":return c.stop()}}),_callee)})))).apply(this,arguments)}function addBruker(e,t){return _addBruker.apply(this,arguments)}function _addBruker(){return(_addBruker=Object(Mo.a)(To.a.mark((function _callee2(e,t){var n,a,i,o,r,c,l,s;return To.a.wrap((function _callee2$(u){for(;;)switch(u.prev=u.next){case 0:return n=[],u.next=3,Object(Oc.a)(t,{xy:!0,noContours:!0});case 3:a=u.sent,i=a,o=Object(Yr.a)(i);try{for(o.s();!(r=o.n()).done;)c=r.value,l=c.info,s=c.dependentVariables,1===l.dimension?s[0].components&&n.push(fromBruker(c,Object(g.a)(Object(g.a)({},e),{},{display:Object(g.a)({},e.display)}))):2===l.dimension&&l.isFt&&n.push(Data2DManager_fromBruker(c,Object(g.a)(Object(g.a)({},e),{},{info:l,display:Object(g.a)({},e.display)})))}catch(d){o.e(d)}finally{o.f()}return u.abrupt("return",n);case 8:case"end":return u.stop()}}),_callee2)})))).apply(this,arguments)}function SpectraManager_toJSON(e){var t=e||{data:[],molecules:[],preferences:{},correlations:{},multipleAnalysis:{},exclusionZones:{}},n=t.data,a=t.molecules,i=t.preferences,o=t.correlations,r=t.multipleAnalysis,c=t.exclusionZones;return{spectra:n.map((function(e){return 1===e.info.dimension?function toJSON(e){return{data:e.originalData,id:e.id,source:{jcamp:e.source.jcamp,jcampURL:e.source.jcampURL,original:e.source.jcampURL||e.source.jcamp?[]:e.source.original},display:e.display,info:e.originalInfo,meta:e.meta,peaks:e.peaks,integrals:e.integrals,ranges:e.ranges,filters:e.filters}}(e):function Datum2D_toJSON(e){return{data:e.originalData,id:e.id,source:{jcamp:e.source.jcamp,jcampURL:e.source.jcampURL,original:e.source.jcampURL?[]:e.source.original},zones:e.zones,filters:e.filters,display:e.display,info:e.originalInfo,meta:e.meta}}(e)})),molecules:a,preferences:i,correlations:o,multipleAnalysis:r,exclusionZones:c}}var xc=n(207),yc=n(298),Cc=n.n(yc),kc=n(263),Sc=n(204),Dc=n.n(Sc);function getToFix(e){Array.isArray(e)||(e=[e]);var t,n=[],a=Object(Yr.a)(e);try{for(a.s();!(t=a.n()).done;){var i=t.value;n.push(chooseDecimal(i))}}catch(o){a.e(o)}finally{a.f()}return n}function chooseDecimal(e){switch(e.toUpperCase()){case"1H":return 2;case"13C":default:return 1}}function get1DSignals(e,t){var n,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=a.prefix,o=a.nmrRecord,r="",c=[],l=0,s=Object(Yr.a)(e);try{var u=function _loop(){var e=n.value;if(e.info.dimension>1)return"continue";var a=e.ranges.values||[],s=e.info.nucleus,u=1,d="";c.forEach((function(e){e===s&&u++})),c.push(s),u>1&&(d="#".concat(u)),r+="".concat(i,"1D_").concat(s.toUpperCase()).concat(d,">"),e.info.frequency&&(r+="\nLarmor=".concat(Number(e.info.frequency).toFixed(2),"\\")),r+="\nSpectrum_Jcamp=file:./jcamp_folder/1d/".concat(e.display.name,"\\"),e.source.jcamp&&o.file("jcamp_folder/1d/".concat(e.display.name),e.source.jcamp);var b,p=getToFix(s)[0],f=Object(Yr.a)(a);try{for(f.s();!(b=f.n()).done;){var h,g=b.value,m=g.signal,j=Object(Yr.a)(m);try{for(j.s();!(h=j.n()).done;){var v=h.value,O=v.multiplicity;if(O&&"m"!==O||"1H"!==s){if(!v.delta)continue;r+="\n".concat(Number(v.delta).toFixed(p))}else r+="\n".concat(Number(g.from).toFixed(p),"-").concat(Number(g.to).toFixed(p));var x="";if(v.diaID&&v.diaID.length>0&&(v.diaID.forEach((function(e,n,a){var i=", ";n===a.length-1&&(i="");var o=t.byDiaID[e].label||e;x+="(".concat(o,")").concat(i)})),r+=", L=".concat(x)),"1H"===s){v.multiplicity&&(r+=", S=".concat(v.multiplicity));var y=v.j;if(Array.isArray(y)&&y.length)for(var C=", J=",k=0;k<y.length;k++){if(r+="".concat(C).concat(Number(y[k].coupling).toFixed(3)),y[k].diaID){var S=y[k].diaID;if(Array.isArray(S)||(S=[S]),!S.length)continue;var D=t[S[0]].label||String(S[0]);r+="(".concat(D,")")}C=", "}g.integral?r+=", E=".concat(Number(g.integral).toFixed(p)):g.pubIntegral?r+=", E=".concat(g.putIntegral.toFixed(p)):void 0!==g.signal[0].nbAtoms&&(r+=", E=".concat(g.signal[0].nbAtoms))}}}catch(w){j.e(w)}finally{j.f()}m.length&&(r+="\\")}}catch(w){f.e(w)}finally{f.f()}r+="\n",l++};for(s.s();!(n=s.n()).done;)u()}catch(d){s.e(d)}finally{s.f()}return l>0&&o.folder("jcamp_folder/1d"),r}function getCouplingObserved(e){switch(e.toLowerCase()){case"hsqc":case"cosy":return"1J";case"hmbc":default:return"NJ"}}var wc=Array.isArray;function get2DSignals(e,t){var n,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=a.prefix,o=a.nmrRecord,r=t.byDiaID,c="",l=[],s=0,u=Object(Yr.a)(e);try{for(u.s();!(n=u.n()).done;){var d=n.value;if(!(d.info.dimension<2)){var b=d.info,p=b.nucleus,f=b.experiment,h=b.pulseSequence;f&&(i="\n> 2D ".concat(f," <NMREDATA_2D_")),l.push(p);var g=getCouplingObserved(f);p&&(c+="".concat(i).concat(p[1],"_").concat(g,"_").concat(p[0],">"));var m=getToFix(p);c+="\nLarmor=".concat(Number(d.info.baseFrequency[0]).toFixed(2),"\\"),c+="\nSpectrum_Jcamp=file:./jcamp_folder/2d/".concat(d.display.name,"\\"),d.source.jcamp&&o.file("jcamp_folder/2d/".concat(d.display.name),d.source.jcamp),f&&(c+="\nCorType=".concat(f," \\")),h&&(c+="\nPulseProgram=".concat(h," \\"));var j,v=d.zones.values||[],O=Object(Yr.a)(v);try{for(O.s();!(j=O.n()).done;){var x,y=j.value,C=y.signal,k=Object(Yr.a)(C);try{for(k.s();!(x=k.n()).done;){var S=x.value,D=S.x,w=S.y,T=S.peak,M=getAssignment(D,r,m[0]),A=getAssignment(w,r,m[1]),E=Math.max.apply(Math,Object(wi.a)(T.map((function(e){return e.z}))));c+="\n".concat(M,"/").concat(A,", I=").concat(E.toFixed(2),"\\")}}catch(P){k.e(P)}finally{k.f()}}}catch(P){O.e(P)}finally{O.f()}s++}}}catch(P){u.e(P)}finally{u.f()}return s>0&&o.folder("jcamp_folder/2d"),c}function getAssignment(e,t,n){var a=e.diaID,i=e.delta;if(a){wc(a)||(a=[a]),a.length<1&&Number(i).toFixed(n);var o=a.map((function(e){return t[e].label})).join(",");return a.length>1?"(".concat(o,")"):o}return Number(i).toFixed(n)}function flat2DSignals(e){for(var t=[],n=0;n<e.length;n++){var a=e[n],i=a.x,o=a.y;t.push(i,o)}return t}function getLabels(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=n.groupedDiaIDs,i=n.molecule,o=Object(kc.g)(i,{toLabel:"H",maxLength:1}),r={},c={},l=Object(Yr.a)(e);try{for(l.s();!(t=l.n()).done;){var s,u=t.value,d=u.info,b=d.dimension,p=d.nucleus,f=getToFix(p),h=b>1?["zones",flat2DSignals]:["ranges",function(e){return e||[]}],g=Object(m.a)(h,2),j=g[0],v=g[1],O=u[j].values||[],x=Object(Yr.a)(O);try{for(x.s();!(s=x.n()).done;)for(var y=s.value,C=v(y.signal),k=0;k<C.length;k++){var S,D=C[k].diaID||[],w=Object(Yr.a)(D);try{var T=function _loop(){var e=S.value,t=Number(C[k].delta).toFixed(f[k%b]),n=a.find((function(t){return t.oclID===e})),l={atom:n.atoms[0],molecule:i,connections:o,atomLabel:n.atomLabel};r[e]={atoms:n.atoms.map((function(e){return e+1})),shift:t,label:createLabel(l)};var s,u=Object(Yr.a)(n.atoms);try{for(u.s();!(s=u.n()).done;){var d=s.value;l.atom=d,c[d]={shift:t,diaID:e,label:createLabel(l)}}}catch(p){u.e(p)}finally{u.f()}};for(w.s();!(S=w.n()).done;)T()}catch(M){w.e(M)}finally{w.f()}}}catch(M){x.e(M)}finally{x.f()}}}catch(M){l.e(M)}finally{l.f()}return{byAssignNumber:c,byDiaID:r}}function createLabel(e){var t=e.atom,n=e.molecule,a=e.atomLabel,i=e.connections,o="";if("C"!==a){var r=i[t].find((function(e){return e&&e.length>1})),c="".concat(a).concat(r[0]+1),l="".concat(n.getAtomLabel(r[1])).concat(r[1]+1);o="".concat(c).concat(l)}else o="".concat(a).concat(t+1);return o}var Tc={solvent:"SOLVENT",temperature:"TEMPERATURE",assignment:"ASSIGNMENT",j:"J",signals:"SIGNALS",id:"ID"};function formatAssignments(e,t){var n=t.prefix,a="".concat(n+Tc.assignment,">\n");for(var i in e){var o=e[i].atoms;a+="".concat(e[i].label,", ").concat(e[i].shift);var r,c=Object(Yr.a)(o);try{for(c.s();!(r=c.n()).done;){var l=r.value;a+=", ".concat(l)}}catch(s){c.e(s)}finally{c.f()}a+="\\\n"}return a}function putTag(e,t){var n,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=a.prefix,o="",r=Object(Yr.a)(e);try{for(r.s();!(n=r.n()).done;){var c=n.value;if(c.info[t]){o+="".concat(i+Tc[t],">\n").concat(String(c.info[t]),"\\\n");break}}}catch(l){r.e(l)}finally{r.f()}return o}function useExport(){var e=useDispatch(),t=gc(),n=useChartData();return{saveToClipboardHandler:Object(y.useCallback)((function(){n.data.length>0&&(e({type:On,isLoading:!0}),setTimeout((function(){copyPNGToClipboard("nmrSVG"),e({type:On,isLoading:!1}),t.show("Spectrum copied to clipboard")}),0))}),[t,e,n]),saveAsJSONHandler:Object(y.useCallback)((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];n.data.length>0&&(e({type:On,isLoading:!0}),setTimeout(Object(Mo.a)(To.a.mark((function _callee(){var i,o,r,c;return To.a.wrap((function _callee$(l){for(;;)switch(l.prev=l.next){case 0:return r=null===(i=n.data[0])||void 0===i||null===(o=i.display)||void 0===o?void 0:o.name,c=SpectraManager_toJSON(n),l.next=4,Object(xc.d)(c,r,t,a);case 4:e({type:On,isLoading:!1});case 5:case"end":return l.stop()}}),_callee)}))),0))}),[e,n]),saveAsNMREHandler:Object(y.useCallback)((function(){n.data.length>0&&(e({type:On,isLoading:!0}),setTimeout((function(){var t,a,i=null===(t=n.data[0])||void 0===t||null===(a=t.display)||void 0===a?void 0:a.name,o=function toNmredata(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e||{data:[],molecules:[]},a=n.data,i=n.molecules,o=t.id,r=t.prefix,c=void 0===r?"\n> <NMREDATA_":r,l=t.filename,s=void 0===l?"nmredata":l,u="",d=new Cc.a,b=Sc.Molecule.fromMolfile(i[0].molfile);b.addImplicitHydrogens();var p=Object(kc.f)(b),f={prefix:c,molecule:b,groupedDiaIDs:p,nmrRecord:d};u+=b.toMolfile();var h=getLabels(a,f);return u+="".concat(c,"VERSION>\n1.1\\\n"),u+=putTag(a,"temperature",{prefix:c}),u+=putTag(a,"solvent",{prefix:c}),o&&(u+="".concat(c+Tc.id,">\nid\\\n")),u+=formatAssignments(h.byDiaID,f),u+=get1DSignals(a,h,f),u+=get2DSignals(a,h,f),u+="\n$$$$\n",d.file("".concat(s,".sdf"),u),d}(n);Object(xc.f)(o,i),e({type:On,isLoading:!1})}),0))}),[e,n]),saveAsSVGHandler:Object(y.useCallback)((function(){n.data.length>0&&(e({type:On,isLoading:!0}),setTimeout((function(){var t,a,i=null===(t=n.data[0])||void 0===t||null===(a=t.display)||void 0===a?void 0:a.name;Object(xc.h)(i,"nmrSVG"),e({type:On,isLoading:!0})}),0))}),[e,n.data]),saveAsPNGHandler:Object(y.useCallback)((function(){n.data.length>0&&(e({type:On,isLoading:!0}),setTimeout((function(){var e,t,a=null===(e=n.data[0])||void 0===e||null===(t=e.display)||void 0===t?void 0:t.name;Object(xc.g)(a,"nmrSVG")}),0))}),[e,n.data])}}function useToolsFunctions(){var e=useDispatch(),t=gc(),n=Object(y.useState)(!1),a=Object(m.a)(n,2),i=a[0],o=a[1],r=Object(y.useRef)({clicks:[]});return{handleChangeOption:Object(y.useCallback)((function(n){[Xa.peakPicking.id,Xa.integral.id,Xa.zone2D.id].includes(n)&&t.show("Press Shift + Left Mouse button to select zone for integral and peak picking"),e({type:Pt,selectedTool:n})}),[t,e]),handleFullZoomOut:Object(y.useCallback)((function(){0===r.current.clicks.length&&e({type:Rt,zoomType:dt});var t=M()((function(){r.current.clicks=[]}),500);r.current.clicks.push(t),t(),r.current.clicks.length>1&&(E()(r.current.clicks,(function(e){return e.cancel()})),r.current.clicks=[],e({type:Rt}))}),[e,r]),changeDisplayViewModeHandler:Object(y.useCallback)((function(){e({type:$t})}),[e]),changeSpectrumViewHandler:Object(y.useCallback)((function(){e({type:Xt,isRealSpectrumVisible:!i}),o(!i)}),[e,i]),alignSpectrumsVerticallyHandler:Object(y.useCallback)((function(){e({type:yn})}),[e]),isRealSpectrumShown:i}}var Mc=function KeysListenerTracker(){var e=useChartData(),t=e.keysPreferences,n=e.displayerMode,a=e.overDisplayer,i=e.data,o=useDispatch(),r=gc(),c=useLoader(),l=useToolsFunctions(),s=l.handleChangeOption,u=l.handleFullZoomOut,d=l.alignSpectrumsVerticallyHandler,b=l.changeDisplayViewModeHandler,p=useExport(),f=p.saveToClipboardHandler,h=p.saveAsJSONHandler,g=Object(ri.d)().highlight,j=useAssignmentData(),v=Object(y.useMemo)((function(){return n===or.DM_1D&&i&&i.length>0}),[i,n]),O=Object(y.useMemo)((function(){return n===or.DM_2D&&i&&i.length>0}),[i,n]),x=Object(y.useCallback)((function(e,t){switch(e){case ri.b.INTEGRAL:o({type:Bt,integralID:t.activeKey});break;case ri.b.PEAK:o({type:St,data:{id:t.activeKey}});break;case ri.b.RANGE:o({type:jn,payload:{id:t.activeKey,assignmentData:j}});break;case ri.b.ZONE:o({type:Nn,payload:{id:t.activeKey,assignmentData:j}});break;case ri.b.EXCLUSION_ZONE:o({type:la,payload:{id:t.activeKey}})}}),[j,o]),C=Object(y.useCallback)((function(e,n){i&&i.length>0&&n>=1&&n<=9&&(e.shiftKey?(o({type:Mn,keyCode:n}),r.show("Configuration Reset, press '".concat(n,"' again to reload it."))):checkModifierKeyActivated(e)||(t&&t[n]?o({type:An,keyCode:n}):(o({type:Mn,keyCode:n}),r.show("Configuration saved, press '".concat(n,"' again to reload it.")))))}),[r,i,o,t]),k=Object(y.useCallback)((function(e){if(!e.shiftKey&&!e.metaKey)switch(e.key){case"f":u();break;case"z":case"Escape":s(Xa.zoom.id);break;case"r":v&&s(Xa.rangesPicking.id);break;case"b":v&&s(Xa.baseLineCorrection.id);break;case"p":v&&s(Xa.peakPicking.id);break;case"i":var t=O?Xa.zone2D.id:v?Xa.integral.id:"";s(t);break;case"a":v&&s(Xa.phaseCorrection.id)}if(!e.shiftKey&&!e.metaKey&&!e.ctrlKey)switch(e.key){case"c":v&&d();break;case"s":v&&b()}if(!e.shiftKey&&(e.metaKey||e.ctrlKey))switch(e.key){case"c":f(),e.preventDefault();break;case"s":h(),e.preventDefault();break;case"o":c.open(),e.preventDefault()}if(e.shiftKey&&(e.metaKey||e.ctrlKey))switch(e.key){case"S":h(2,!1),e.preventDefault()}}),[d,v,O,b,s,u,c,h,f]),S=Object(y.useCallback)((function(e){var t=Object(m.a)(g.highlighted,1)[0],n=g.type;if(!["input","textarea"].includes(e.target.localName)&&a){var i=Number(e.code.substr(e.code.length-1))||0;i>0?C(e,i):["Backspace"].includes(e.key)&&n?x(n,{activeKey:t}):k(e)}}),[x,g,C,a,k]);return Object(y.useEffect)((function(){return document.addEventListener("keydown",S,!0),function(){return document.removeEventListener("keydown",S,!0)}}),[S]),null},Ac="";var Ec,Pc=function getHelpList(){return{zoomIn:{text:"Zoom Tool",filePath:"".concat(Ac,"/help/zoom-and-scale")},peakPicking:{text:"peak picking tool",filePath:"".concat(Ac,"/help/peaks")},integralPicking:{text:"integral tool",filePath:"".concat(Ac,"/help/integrations")},fullScreen:{text:"Full Screen mode",filePath:"".concat(Ac,"/help/general")},loadSpectrum:{text:"load spectrums",filePath:"".concat(Ac,"/help/loading-a-spectrum")}}},Ic=Object(v.b)(Ec||(Ec=Object(j.a)(["\n  width: 100%;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  .manual-header {\n    .title {\n      text-align: center;\n      padding: 10px 0 10px 0px;\n      margin: 0px;\n      color: #000000;\n      place-items: normal;\n      text-transform: none;\n      background-color: #fafafa;\n    }\n\n    .close-bt {\n      border: none;\n      color: red;\n      background-color: transparent;\n      outline: none;\n      position: absolute;\n      right: 15px;\n      top: 10px;\n    }\n  }\n  .main-content {\n    width: 100%;\n    height: 100%;\n    border: none;\n    padding-left: 5px;\n  }\n\n  .inner-container {\n    padding: 5px;\n    width: 100%;\n    height: 100%;\n  }\n\n  .tab-content {\n    width: 100%;\n  }\n"])));var Fc,Rc=function UserManualModal(e){var t=e.onClose,n=Pc().loadSpectrum.filePath;return Object(ve.c)("div",{css:Ic,children:[Object(ve.c)("div",{className:"manual-header handle",children:[Object(ve.b)("h6",{className:"title",children:"User Manual"}),Object(ve.b)(Ge,{onClick:t,className:"close-bt"})]}),Object(ve.b)("div",{className:"main-content",children:Object(ve.b)("div",{className:"inner-container",children:Object(ve.b)("iframe",{title:"General User Manual ",src:n,frameBorder:"0",scrolling:"auto",style:{width:"100%",height:"100%"}})})})]})},Nc=Object(v.b)(Fc||(Fc=Object(j.a)(["\n  border-radius: 50%;\n  width: 16px;\n  height: 16px;\n  background-color: transparent;\n  border: none;\n  padding: 0;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n\n  :hover {\n    background-color: red;\n    border-radius: 50%;\n\n    .icon {\n      color: white;\n    }\n  }\n\n  .icon {\n    color: #252525;\n    width: 8px;\n  }\n"])));var _c,Lc=function DeleteButton_DeleteButton(e){var t=e.onDelete,n=e.className,a=void 0===n?"delete":n;return Object(ve.b)("button",{css:Nc,className:a,type:"button",onClick:t,children:Object(ve.b)(He.G,{className:"icon"})})},zc=function styles(e){return Object(v.b)(_c||(_c=Object(j.a)(["\n  position: relative;\n\n  .delete {\n    position: absolute;\n    top: 2px;\n    left: 2px;\n  }\n\n  ","\n"])),e)};function Tab(e){var t=e.tabid,n=e.tablabel,a=e.activeTab,i=e.onClick,o=e.canDelete,r=e.onDelete,c=e.tabstyles,l="tab-list-item";a===t&&(l+=" tab-list-active");var s=Object(y.useCallback)((function(e){i(Object(g.a)(Object(g.a)({},e),{},{tablabel:n,tabid:t}))}),[i,n,t]),u=Object(y.useCallback)((function(e){e.stopPropagation(),r(Object(g.a)(Object(g.a)({},e),{},{tablabel:n,tabid:t}))}),[r,n,t]);return Object(ve.c)("li",{className:l,onClick:s,css:zc(c),children:[o&&Object(ve.b)(Lc,{onDelete:u}),n]})}var Hc,Bc,Xc=Object(y.memo)(Tab),Vc="TOP",Yc="LEFT",Zc=Object(v.b)(Hc||(Hc=Object(j.a)(["\n  height: 100%;\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n\n  .tab-list {\n    border-bottom: 1px solid #ccc;\n    padding-left: 0;\n    margin: 0;\n  }\n\n  .tab-list li:first-of-type {\n    margin-left: 5px;\n  }\n\n  .tab-list li:hover {\n    background-color: #f7f7f7;\n  }\n\n  .tab-list-item {\n    display: inline-block;\n    list-style: none;\n    margin-bottom: -1px;\n    padding: 0.5rem 2rem;\n  }\n\n  .tab-list-active {\n    background-color: white;\n    border: solid #ccc;\n    border-width: 1px 1px 0 1px;\n  }\n\n  .tab-content {\n    height: 100%;\n    overflow: auto;\n  }\n"]))),Uc=Object(v.b)(Bc||(Bc=Object(j.a)(["\n  display: flex;\n  height: 100%;\n  width: 100%;\n  .tab-list {\n    border-right: 1px solid #ccc;\n    padding-left: 0;\n    margin: 0;\n  }\n\n  .tab-list li:hover {\n    background-color: #f7f7f7;\n  }\n\n  .tab-list li:first-of-type {\n    margin-top: 10px;\n  }\n\n  .tab-list-item {\n    display: block;\n    list-style: none;\n    margin-right: -1px;\n    padding: 0.5rem 0.75rem;\n  }\n\n  .tab-list-active {\n    background-color: white;\n    border: solid #ccc;\n    border-width: 1px 0px 1px 1px;\n  }\n\n  .tab-content {\n    height: 100%;\n    overflow: auto;\n  }\n"])));function Tabs(e){var t=e.children,n=e.onClick,a=e.defaultTabID,i=e.position,o=e.canDelete,r=e.onDelete,c=Object(y.useState)(),l=Object(m.a)(c,2),s=l[0],u=l[1];Object(y.useEffect)((function(){u(a)}),[a]);var d=Object(y.useCallback)((function(e){var t=e.tablabel,a=e.tabid;n({tablabel:t,tabid:a}),u(a)}),[n]),b=Object(y.useMemo)((function(){return y.Children.map(t,(function(e){var t=e.props,n=t.tablabel,a=t.tabid,i=t.candelete,c=t.tabstyles,l=i?"true"===i.toLowerCase():o;return Object(ve.b)(Xc,{activeTab:s,tablabel:n,onClick:d,tabid:a,canDelete:l,onDelete:r,tabstyles:c},a)}))}),[s,o,t,d,r]),p=Object(y.useMemo)((function(){return y.Children.map(t,(function(e){var t=e.props,n=t.tabid,a=t.style;return n!==s?Object(y.cloneElement)(e,{style:{display:"none"}}):Object(y.cloneElement)(e,{style:Object(g.a)({display:"block"},a)})}))}),[s,t]),f=Object(y.useMemo)((function(){switch(i){case Vc:return Zc;case Yc:return Uc;default:return Zc}}),[i]);return Object(ve.c)("div",{className:"tabs",css:f,children:[Object(ve.b)("ol",{className:"tab-list",children:b}),Object(ve.b)("div",{className:"tab-content",children:p})]})}Tabs.defaultProps={onClick:function onClick(){return null},onDelete:function onDelete(){return null},position:"TOP",canDelete:!1};var Kc=Object(y.memo)(Tabs),Wc=n(190),Gc=Object(y.forwardRef)((function FormikForm(e,t){var n=e.initialValues,a=e.onSubmit,i=e.validationSchema,o=e.children;return Object(P.jsx)(Wc.d,{innerRef:t,initialValues:n,onSubmit:a,validationSchema:i,children:function children(){return Object(P.jsx)(P.Fragment,{children:o})}})}));Gc.defaultProps={initialValues:{},onSubmit:function onSubmit(){return null},validationSchema:null};var qc=Gc,Jc=n(192),$c=n.n(Jc),Qc="INIT_PREFERENCES",el="SET_PREFERENCES",tl="SET_PANELS_PREFERENCES",nl={basePreferences:{},display:{general:{disableMultipletAnalysis:!1,hideSetSumFromMolecule:!1},panels:{hideSpectraPanel:!1,hideInformationPanel:!1,hidePeaksPanel:!1,hideIntegralsPanel:!1,hideRangesPanel:!1,hideStructuresPanel:!1,hideFiltersPanel:!1,hideZonesPanel:!1,hideSummaryPanel:!1,hideMultipleSpectraAnalysisPanel:!1},toolBarButtons:{hideZoomTool:!1,hideZoomOutTool:!1,hideImport:!1,hideExportAs:!1,hideSpectraStackAlignments:!1,hideSpectraCenterAlignments:!1,hideRealImaginary:!1,hidePeakTool:!1,hideIntegralTool:!1,hideAutoRangesTool:!1,hideZeroFillingTool:!1,hidePhaseCorrectionTool:!1,hideBaseLineCorrectionTool:!1,hideFFTTool:!1,hideMultipleSpectraAnalysisTool:!1}},controllers:{mws:{low:2,high:20},help:{preventAutoHelp:!0},dimmedSpectraTransparency:.1},formatting:{nucleus:[{key:"1H",name:"1H",ppm:"0.00",hz:"0.00"},{key:"13C",name:"13C",ppm:"0.00",hz:"0.00"},{key:"15N",name:"15N",ppm:"0.00",hz:"0.00"},{key:"19F",name:"19F",ppm:"0.00",hz:"0.00"},{key:"29Si",name:"29Si",ppm:"0.00",hz:"0.00"},{key:"31P",name:"31P",ppm:"0.00",hz:"0.00"}],nucleusByKey:{},panels:{}},dispatch:null},al=function mapNucleus(e){e.formatting.nucleus&&Array.isArray(e.formatting.nucleus)&&(e.formatting.nucleusByKey=e.formatting.nucleus.reduce((function(e,t){return e[t.name.toLowerCase()]=t,Object(g.a)({},e)}),{}))};function preferencesReducer(e,t){switch(t.type){case Qc:var n=ot("nmr-local-storage-version",!1);n&&"1"===n||(function removeData(e){localStorage.removeItem(e)}("nmr-general-settings"),function storeData(e,t){localStorage.setItem(e,t)}("nmr-local-storage-version","1"));var a=ot("nmr-general-settings");return Object(ft.b)(e,(function(e){if(t.payload){var n=t.payload,i=n.dispatch,o=Object(de.a)(n,["dispatch"]);e.basePreferences=o,e.display=o.display,e.dispatch=i,a&&(Object.entries(a).forEach((function(t){var n=Object(m.a)(t,2),a=n[0],i=n[1];e[a]=$c()(i,o[a]?o[a]:{})})),al(e))}}));case el:return Object(ft.b)(e,(function(e){if(t.payload){var n=t.payload;e.controllers=n.controllers,e.formatting=n.formatting,e.display.panels=n.display.panels,al(e)}}));case tl:return Object(ft.b)(e,(function(e){if(t.payload){var n=t.payload,a=n.key,i=n.value;e.formatting.panels[a]=i}}));default:return e}}var il,ol=function Logo(e){var t=e.size,n=void 0===t?100:t;return Object(P.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 841.9 595.3",style:{width:n,height:n},children:Object(P.jsxs)("g",{fill:"#61DAFB",children:[Object(P.jsx)("path",{d:"M666.3 296.5c0-32.5-40.7-63.3-103.1-82.4 14.4-63.6 8-114.2-20.2-130.4-6.5-3.8-14.1-5.6-22.4-5.6v22.3c4.6 0 8.3.9 11.4 2.6 13.6 7.8 19.5 37.5 14.9 75.7-1.1 9.4-2.9 19.3-5.1 29.4-19.6-4.8-41-8.5-63.5-10.9-13.5-18.5-27.5-35.3-41.6-50 32.6-30.3 63.2-46.9 84-46.9V78c-27.5 0-63.5 19.6-99.9 53.6-36.4-33.8-72.4-53.2-99.9-53.2v22.3c20.7 0 51.4 16.5 84 46.6-14 14.7-28 31.4-41.3 49.9-22.6 2.4-44 6.1-63.6 11-2.3-10-4-19.7-5.2-29-4.7-38.2 1.1-67.9 14.6-75.8 3-1.8 6.9-2.6 11.5-2.6V78.5c-8.4 0-16 1.8-22.6 5.6-28.1 16.2-34.4 66.7-19.9 130.1-62.2 19.2-102.7 49.9-102.7 82.3 0 32.5 40.7 63.3 103.1 82.4-14.4 63.6-8 114.2 20.2 130.4 6.5 3.8 14.1 5.6 22.5 5.6 27.5 0 63.5-19.6 99.9-53.6 36.4 33.8 72.4 53.2 99.9 53.2 8.4 0 16-1.8 22.6-5.6 28.1-16.2 34.4-66.7 19.9-130.1 62-19.1 102.5-49.9 102.5-82.3zm-130.2-66.7c-3.7 12.9-8.3 26.2-13.5 39.5-4.1-8-8.4-16-13.1-24-4.6-8-9.5-15.8-14.4-23.4 14.2 2.1 27.9 4.7 41 7.9zm-45.8 106.5c-7.8 13.5-15.8 26.3-24.1 38.2-14.9 1.3-30 2-45.2 2-15.1 0-30.2-.7-45-1.9-8.3-11.9-16.4-24.6-24.2-38-7.6-13.1-14.5-26.4-20.8-39.8 6.2-13.4 13.2-26.8 20.7-39.9 7.8-13.5 15.8-26.3 24.1-38.2 14.9-1.3 30-2 45.2-2 15.1 0 30.2.7 45 1.9 8.3 11.9 16.4 24.6 24.2 38 7.6 13.1 14.5 26.4 20.8 39.8-6.3 13.4-13.2 26.8-20.7 39.9zm32.3-13c5.4 13.4 10 26.8 13.8 39.8-13.1 3.2-26.9 5.9-41.2 8 4.9-7.7 9.8-15.6 14.4-23.7 4.6-8 8.9-16.1 13-24.1zM421.2 430c-9.3-9.6-18.6-20.3-27.8-32 9 .4 18.2.7 27.5.7 9.4 0 18.7-.2 27.8-.7-9 11.7-18.3 22.4-27.5 32zm-74.4-58.9c-14.2-2.1-27.9-4.7-41-7.9 3.7-12.9 8.3-26.2 13.5-39.5 4.1 8 8.4 16 13.1 24 4.7 8 9.5 15.8 14.4 23.4zM420.7 163c9.3 9.6 18.6 20.3 27.8 32-9-.4-18.2-.7-27.5-.7-9.4 0-18.7.2-27.8.7 9-11.7 18.3-22.4 27.5-32zm-74 58.9c-4.9 7.7-9.8 15.6-14.4 23.7-4.6 8-8.9 16-13 24-5.4-13.4-10-26.8-13.8-39.8 13.1-3.1 26.9-5.8 41.2-7.9zm-90.5 125.2c-35.4-15.1-58.3-34.9-58.3-50.6 0-15.7 22.9-35.6 58.3-50.6 8.6-3.7 18-7 27.7-10.1 5.7 19.6 13.2 40 22.5 60.9-9.2 20.8-16.6 41.1-22.2 60.6-9.9-3.1-19.3-6.5-28-10.2zM310 490c-13.6-7.8-19.5-37.5-14.9-75.7 1.1-9.4 2.9-19.3 5.1-29.4 19.6 4.8 41 8.5 63.5 10.9 13.5 18.5 27.5 35.3 41.6 50-32.6 30.3-63.2 46.9-84 46.9-4.5-.1-8.3-1-11.3-2.7zm237.2-76.2c4.7 38.2-1.1 67.9-14.6 75.8-3 1.8-6.9 2.6-11.5 2.6-20.7 0-51.4-16.5-84-46.6 14-14.7 28-31.4 41.3-49.9 22.6-2.4 44-6.1 63.6-11 2.3 10.1 4.1 19.8 5.2 29.1zm38.5-66.7c-8.6 3.7-18 7-27.7 10.1-5.7-19.6-13.2-40-22.5-60.9 9.2-20.8 16.6-41.1 22.2-60.6 9.9 3.1 19.3 6.5 28.1 10.2 35.4 15.1 58.3 34.9 58.3 50.6-.1 15.7-23 35.6-58.4 50.6zM320.8 78.4z"}),Object(P.jsx)("path",{d:"M520.5 78.1z"})]})})};function AboutTabContent_getData(e){return _getData.apply(this,arguments)}function _getData(){return(_getData=Object(Mo.a)(To.a.mark((function _callee(e){var t;return To.a.wrap((function _callee$(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,fetch(e);case 3:return t=n.sent,n.abrupt("return",t.json());case 7:return n.prev=7,n.t0=n.catch(0),n.abrupt("return",null);case 10:case"end":return n.stop()}}),_callee,null,[[0,7]])})))).apply(this,arguments)}var rl="https://api.github.com/repos/cheminfo/nmrium",cl=Object(v.b)(il||(il=Object(j.a)(["\n  width: 100%;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  padding-top: 20px;\n\n  span {\n    font-weight: bold;\n    color: #636363;\n  }\n\n  img {\n    width: 100px;\n  }\n\n  a {\n    color: #969696;\n  }\n\n  a:hover,\n  a:focus {\n    color: #00bcd4;\n  }\n\n  .separator {\n    border-bottom: 1px solid gray;\n    width: 15px;\n    height: 1px;\n    margin: 10px 0px;\n  }\n"])));var ll=function AboutTabContent(){var e=Object(y.useState)(),t=Object(m.a)(e,2),n=t[0],a=t[1];return Object(y.useEffect)((function(){Promise.all([AboutTabContent_getData("".concat(rl,"/commits")),AboutTabContent_getData("".concat(rl,"/tags"))]).then((function(e){a(e)}))}),[]),n?Object(ve.c)("div",{css:cl,children:[Object(ve.b)(ol,{}),Object(ve.b)("span",{children:"NMRium"}),Object(ve.c)("span",{children:[" ",n[1][0].name]}),Object(ve.b)("span",{className:"separator"}),Object(ve.c)("a",{href:n[1][0].zipball_url,target:"_blank",rel:"noreferrer",children:["Download Last Version ",n[1][0].name]}),Object(ve.b)("span",{className:"separator"}),Object(ve.c)("a",{href:n[0][0].html_url,target:"_blank",rel:"noreferrer",children:["Last Commit ",new Date(n[0][0].commit.author.date).toUTCString()," [",n[0][0].sha.substr(0,12)," ]"]})]}):null},sl=Object(y.forwardRef)((function CheckBox(e,t){var n=e.name,a=void 0===n?"":n,i=e.checked,o=e.onChange,r=void 0===o?function(){return null}:o,c=e.disabled,l=Object(y.useState)(i),s=Object(m.a)(l,2),u=s[0],d=s[1],b=Object(y.useCallback)((function(e){d(!u),r(e)}),[u,r]);return Object(P.jsx)("input",{ref:t,type:"checkbox",name:a,id:a,onChange:b,defaultChecked:i,disabled:c})}));sl.defaultProps={onChange:function onChange(){return null},name:"",disabled:!1};var ul=sl;function FormikCheckBox(e){var t=e.label,n=e.name,a=e.onChange,i=e.className,o=e.reverse,r=Object(de.a)(e,["label","name","onChange","className","reverse"]),c=Object(Wc.f)(),l=c.values,s=c.setFieldValue,u=o?!x()(l,n):x()(l,n),d=Object(y.useCallback)((function(e){e.persist(),a(e),s(n,o?u:!u)}),[n,a,o,s,u]);return Object(P.jsxs)("div",{className:"".concat(i," check-").concat(u),children:[Object(P.jsx)("label",{htmlFor:n,className:"checkbox-lable",children:t}),Object(P.jsx)(ul,Object(g.a)({id:n,name:n,checked:u,onChange:d,className:"checkbox"},r))]})}FormikCheckBox.defaultProps={className:"",onChange:function onChange(){return null},reverse:!1};var dl=FormikCheckBox,bl={lineHeight:2,userSelect:"none"},pl={height:"100%",width:"100px",borderRadius:"5px",border:"0.55px solid #c7c7c7",margin:"0px 5px 0px 5px",textAlign:"center"},fl=Object(y.forwardRef)((function Input(e,t){var n=e.label,a=e.value,i=e.name,o=e.style,r=e.onChange,c=e.onKeyDown,l=e.checkValue,s=e.type,u=e.enableAutoSelect,d=e.className,b=e.format,p=Object(de.a)(e,["label","value","name","style","onChange","onKeyDown","checkValue","type","enableAutoSelect","className","format"]),f=Object(y.useState)(a),h=Object(m.a)(f,2),j=h[0],v=h[1];Object(y.useEffect)((function(){v(a)}),[a]),Object(y.useEffect)((function(){u&&t.current.select()}),[u,t]);var O=Object(y.useCallback)((function(e){return b()("number"===s?"-"===String(e).trim()?Number(0):Number(e):e)}),[b,s]),x=Object(y.useCallback)((function(e){e.persist(),e.stopPropagation(),e.preventDefault();var t=e.target.value;if(function check(e){if("number"===s){return!(""!==e.trim()&&!/^(?:-?[0-9]*|[0-9]\d*)(?:\.\d{0,20})?$/.test(e))}return!0}(t)&&l(t)){var n=b();v(n(t)),r(Object(g.a)(Object(g.a)({},e),{},{target:{name:e.target.name,value:O(t)}}))}}),[l,b,O,r,s]),C=Object(y.useCallback)((function(e){e.persist(),c(Object(g.a)(Object(g.a)({},e),{},{target:{name:e.target.name,value:O(j)}}))}),[O,c,j]),k=Object(y.useCallback)((function(e){e.stopPropagation()}),[]);return Object(P.jsxs)("div",{style:Object(g.a)({display:"flex",flexDirection:"row",alignItems:"center"},o&&o.container?o.container:{}),children:[n&&Object(P.jsx)("span",{style:Object(g.a)(Object(g.a)({},bl),o&&o.label?o.label:{}),className:"label",children:n}),Object(P.jsx)("input",Object(g.a)(Object(g.a)({},p),{},{ref:t,name:i,style:Object(g.a)(Object(g.a)({},pl),o&&o.input?o.input:{}),type:"text",value:j,onChange:x,onKeyDown:C,onKeyPress:k,onDoubleClick:function onDoubleClick(e){return e.stopPropagation()},className:"input ".concat(d)}))]})}));fl.defaultProps={style:{label:{},input:{},container:{}},value:"",onChange:function onChange(){return null},checkValue:function checkValue(){return!0},onKeyDown:function onKeyDown(){return null},type:"text",className:"",enableAutoSelect:!1,format:function format(){return function(e){return e}}};var hl=fl;function FormikInput(e){var t=e.label,n=e.name,a=e.style,i=e.onChange,o=e.checkValue,r=e.type,c=e.className,l=e.value,s=e.format,u=Object(de.a)(e,["label","name","style","onChange","checkValue","type","className","value","format"]),d=Object(Wc.f)(),b=d.values,p=d.handleChange,f=d.setFieldValue,h=d.errors,m=d.touched,j=Object(y.useCallback)((function(e){i(e),p(e)}),[p,i]);Object(y.useEffect)((function(){l&&f(n,l)}),[n,f,l]);var v=Object(y.useMemo)((function(){return x()(h,n)&&x()(m,n)}),[h,n,m]);return Object(P.jsx)(hl,Object(g.a)({label:t,name:n,value:l||x()(b,n),onChange:j,type:r,style:{input:Object(g.a)(Object(g.a)({},a),v&&{borderColor:"red"})},checkValue:o,className:c,format:s},u))}FormikInput.defaultProps={style:{label:{},input:{}},onChange:function onChange(){return null},checkValue:function checkValue(){return!0},type:"text",className:"",value:null,format:function format(){return function(e){return e}}};var gl=FormikInput;var ml=function ControllersTabContent(){return Object(P.jsxs)(P.Fragment,{children:[Object(P.jsx)("p",{className:"section-header",children:"Mouse Scroll Wheel Sensitivity"}),Object(P.jsx)(gl,{type:"number",label:"Low",name:"controllers.mws.low"}),Object(P.jsx)(gl,{type:"number",label:"high",name:"controllers.mws.high"}),Object(P.jsx)("p",{className:"section-header",style:{marginTop:"40px"},children:"Show / Hide Panels"}),Object(P.jsx)(dl,{className:"help-checkbox-element",label:"Prevent automatic show help ",name:"controllers.help.preventAutoHelp"}),Object(P.jsx)("p",{className:"section-header",style:{marginTop:"40px"},children:"Spectra"}),Object(P.jsx)(gl,{type:"number",label:"Transparency of Dimmed Spectra [ 0 - 1 ]",name:"controllers.dimmedSpectraTransparency",checkValue:function checkValue(e){return e>=0&&e<=1}})]})},jl=[{label:"Spectra Panel",name:"display.panels.hideSpectraPanel"},{label:"Information Panel",name:"display.panels.hideInformationPanel"},{label:"Peaks Panel",name:"display.panels.hidePeaksPanel"},{label:"Integrals Panel",name:"display.panels.hideIntegralsPanel"},{label:"Ranges Panel",name:"display.panels.hideRangesPanel"},{label:"Structures Panel",name:"display.panels.hideStructuresPanel"},{label:"Filters Panel",name:"display.panels.hideFiltersPanel"},{label:"Zones Panel",name:"display.panels.hideZonesPanel"},{label:"Summary Panel",name:"display.panels.hideSummaryPanel"},{label:"Multiple Spectra Analysis Panel",name:"display.panels.hideMultipleSpectraAnalysisPanel"}];var vl,Ol=function DisplayTabContent(e){var t=e.preferences;return Object(P.jsxs)(P.Fragment,{children:[Object(P.jsx)("p",{className:"section-header",children:"Show / Hide Panels"}),jl.map((function(e){return!x()(t,"basePreferences.".concat(e.name),!1)&&Object(P.jsx)(dl,{className:"checkbox-element",label:e.label,name:e.name,reverse:!0},e.name)}))]})},xl=Object(v.b)(vl||(vl=Object(j.a)(["\n  .counter-col {\n    width: 30px;\n  }\n  .nucleus-label-col {\n    display: flex;\n    justify-content: center;\n    width: 80px;\n  }\n\n  .width-100 {\n    width: 100% !important;\n    margin: 0px !important;\n  }\n\n  .nucleus-format-input-col {\n    text-align: center;\n    width: 100px;\n  }\n\n  th {\n    font-size: 11px;\n    font-weight: 600;\n  }\n  .operation-container {\n    display: flex;\n  }\n  .add {\n    background-color: transparent;\n    border: 0;\n    outline: none;\n    svg {\n      font-szie: 14px;\n      fill: green;\n    }\n  }\n"])));var yl,Cl=function FormattingTabContent(){var e=Object(Wc.f)(),t=e.values,n=e.setFieldValue,a=Object(y.useMemo)((function(){return x()(t,"formatting.nucleus",[])}),[t]),i=Object(y.useCallback)((function(e){var t=a.splice(0,e);n("formatting.nucleus",t)}),[a,n]),o=Object(y.useCallback)((function(){var e={key:generateID(),name:"",ppm:"0.00",hz:"0.00"},t=[].concat(Object(wi.a)(a),[e]);n("formatting.nucleus",t)}),[a,n]);return Object(ve.c)(y.Fragment,{children:[Object(ve.b)("p",{className:"section-header",children:"Formating according to Nucleus"}),Object(ve.b)("div",{css:xl,children:Object(ve.c)("table",{children:[Object(ve.b)("thead",{children:Object(ve.c)("tr",{children:[Object(ve.b)("th",{className:"counter-col",children:"#"}),Object(ve.b)("th",{className:"nucleus-label-col",children:"Nucleus "}),Object(ve.b)("th",{className:"nucleus-format-input-col",children:"\u03b4 (ppm)"}),Object(ve.b)("th",{className:"nucleus-format-input-col",children:"Coupling (Hz)"}),Object(ve.b)("th",{className:"nucleus-format-input-col"})]})}),Object(ve.b)("tbody",{children:a&&a.map((function(e,t){var n=t+1;return Object(ve.c)("tr",{children:[Object(ve.c)("td",{className:"counter-col",children:[Object(ve.c)("span",{children:[n," - "]})," "]}),Object(ve.b)("td",{className:"nucleus-label-col",children:Object(ve.b)(gl,{name:"formatting.nucleus.".concat(t,".name"),className:"width-100"})}),Object(ve.b)("td",{className:"nucleus-format-input-col",children:Object(ve.b)(gl,{name:"formatting.nucleus.".concat(t,".ppm"),className:"width-100"})}),Object(ve.b)("td",{className:"nucleus-format-input-col",children:Object(ve.b)(gl,{name:"formatting.nucleus.".concat(t,".hz"),className:"width-100"})}),Object(ve.c)("td",{className:"operation-container",children:[Object(ve.b)(Ge,{onClick:function onClick(){return i(t)},popupTitle:"remove ".concat(e.name),popupPlacement:"right"}),a.length===t+1&&Object(ve.b)("button",{className:"add",type:"button",onClick:o,children:Object(ve.b)(He.y,{})})]})]},"".concat(e.key))}))})]})})]})},kl=Object(v.b)(yl||(yl=Object(j.a)(['\n  overflow: auto;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n\n  .header {\n    text-align: center;\n    padding: 10px 0 10px 0px;\n    margin: 0px;\n    color: #005d9e;\n    place-items: normal;\n    text-transform: none;\n    background-color: #fcfcfc;\n  }\n  .main-content {\n    width: 100%;\n    flex: 1;\n    overflow: auto;\n    border: none;\n  }\n\n  .tab-content {\n    width: 100%;\n  }\n\n  .inner-content {\n    padding: 15px 30px;\n    width: 100%;\n    overflow: auto;\n  }\n\n  button:focus {\n    outline: none;\n  }\n  button:hover {\n    color: #007bff;\n  }\n  .save-button:hover {\n    background-color: #ffffff;\n  }\n  .save-button {\n    border: none;\n    padding: 0 15px;\n    background-color: #ffffff5e;\n    border-radius: 5px;\n    height: 25px;\n  }\n\n  .footer-container {\n    display: flex;\n    align-items: flex-end;\n    justify-content: flex-end;\n    background: rgb(242, 242, 242);\n    background: -moz-linear-gradient(\n      0deg,\n      rgba(242, 242, 242, 1) 0%,\n      rgba(245, 245, 245, 1) 37%,\n      rgba(255, 255, 255, 1) 90%\n    );\n    background: -webkit-linear-gradient(\n      0deg,\n      rgba(242, 242, 242, 1) 0%,\n      rgba(245, 245, 245, 1) 37%,\n      rgba(255, 255, 255, 1) 90%\n    );\n    background: linear-gradient(\n      0deg,\n      rgba(242, 242, 242, 1) 0%,\n      rgba(245, 245, 245, 1) 37%,\n      rgba(255, 255, 255, 1) 90%\n    );\n    filter: progid:DXImageTransform.Microsoft.gradient(startColorstr="#f2f2f2",endColorstr="#ffffff",GradientType=1);\n    padding: 6px 15px;\n    height: 55px;\n  }\n\n  .section-header {\n    font-size: 13px;\n    color: #2ca8ff;\n    margin-bottom: 10px;\n    border-bottom: 0.55px solid #f9f9f9;\n    padding: 6px 2px;\n  }\n\n  .label {\n    font-size: 12px;\n    font-weight: bold;\n    margin-right: 10px;\n  }\n\n  .input {\n    font-size: 14px;\n    border-radius: 5px;\n    border: 1px solid #cccccc;\n    padding: 5px;\n    width: 100px;\n    margin-right: 10px;\n    height: initial !important;\n  }\n\n  .close-bt {\n    border: none;\n    color: red;\n    background-color: transparent;\n    outline: none;\n    position: absolute;\n    right: 10px;\n    top: 2px;\n    width: 30px;\n    height: 30px;\n  }\n\n  .checkbox-lable {\n    min-width: 300px;\n    display: inline-block;\n  }\n\n  .help-checkbox-element {\n    .checkbox-lable {\n      width: 260px;\n    }\n  }\n  .checkbox-element {\n    margin-bottom: 5px;\n  }\n'])));var Sl=function GeneralSettings(e){var t=e.onClose,n=e.onSave,a=Object(y.useState)("controllers"),i=Object(m.a)(a,2),o=i[0],r=i[1],c=usePreferences(),l=useStateWithLocalStorage("nmr-general-settings"),s=Object(m.a)(l,2)[1],u=Object(y.useRef)(),d=Object(y.useCallback)((function(){u.current.submitForm()}),[]),b=Object(y.useCallback)((function(e){e.dispatch,e.basePreferences;var t=Object(de.a)(e,["dispatch","basePreferences"]);s(t),c.dispatch({type:el,payload:e}),n()}),[n,c,s]),p=Object(y.useCallback)((function(e){r(e.tabid)}),[]);return Object(ve.c)("div",{css:kl,children:[Object(ve.c)("div",{className:"header handle",children:[Object(ve.b)("span",{children:"General Settings"}),Object(ve.b)(Ge,{onClick:t,className:"close-bt"})]}),Object(ve.b)("div",{className:"main-content",children:Object(ve.b)(qc,{ref:u,initialValues:c,onSubmit:b,children:Object(ve.c)(Kc,{position:"LEFT",defaultTabID:o,onClick:p,children:[Object(ve.b)("div",{className:"inner-content",tablabel:"Controllers",tabid:"controllers",children:Object(ve.b)(ml,{})}),Object(ve.b)("div",{className:"inner-content",tablabel:"Formatting",tabid:"formatting",children:Object(ve.b)(Cl,{})}),Object(ve.b)("div",{className:"inner-content",tablabel:"Display",tabid:"display",children:Object(ve.b)(Ol,{preferences:c})}),Object(ve.b)("div",{className:"inner-content",tablabel:"About",tabid:"about",children:Object(ve.b)(ll,{})})]})})}),Object(ve.b)("div",{className:"footer-container",children:Object(ve.b)("button",{type:"button",onClick:d,className:"save-button",children:"Save"})})]})},Dl={display:"flex"},wl={lineHeight:2,userSelect:"none",flex:"2"},Tl={flex:"4",display:"flex",justifyContent:"flex-start"},Ml={height:"100%",width:"100px",borderRadius:"5px",border:"0.55px solid #c7c7c7",margin:"0px 5px 0px 5px",textAlign:"center"},Al=Object(y.forwardRef)((function NumberInput(e,t){var n=e.label,a=e.name,i=e.defaultValue,o=e.style,r=e.onChange,c=e.onInput,l=e.pattern,s=e.step,u=e.min,d=Object(y.useRef)(),b=Object(y.useCallback)((function(e){e.target.checkValidity()?""===e.target.value?r(Object(g.a)(Object(g.a)({},e),{},{target:Object(g.a)(Object(g.a)({},e.target),{},{value:i})})):r(e):(t||d).current.value=i}),[i,r,t]);return Object(P.jsxs)("div",{style:Object(g.a)(Object(g.a)({},Dl),o.container),children:[Object(P.jsx)("span",{style:Object(g.a)(Object(g.a)({},wl),o.label),children:n}),Object(P.jsx)("div",{style:Object(g.a)(Object(g.a)({},Tl),o.inputContainer),children:Object(P.jsx)("input",{ref:t||d,name:a,style:Object(g.a)(Object(g.a)({},Ml),o.input),type:"number",pattern:l,defaultValue:i,step:s,onChange:b,onInput:c,min:u},i)})]})}));Al.defaultProps={pattern:"^d*(.d{0,2})?$",step:"any",min:"any",style:{label:{},input:{},container:{},inputContainer:{}},defaultValue:0,onChange:function onChange(){return null},onInput:function onInput(){return null}};var El=Al,Pl={container:{padding:"5px",height:"100%",display:"flex",fontSize:"12px"},input:{width:"50px"},inputContainer:{flex:"2"},label:{flex:"5"},actionButton:{height:"100%",width:"60px",borderRadius:"5px",border:"0.55px solid #c7c7c7",margin:"0px 5px",userSelect:"none"}};var Il,Fl=function AutoPeakPickingOptionPanel(){var e=useDispatch(),t=Object(y.useRef)(),n=Object(y.useRef)(),a=Object(y.useRef)(),i=Object(y.useRef)(),o=Object(y.useCallback)((function(){e({type:hn,options:{maxNumberOfPeaks:n.current.value,minMaxRatio:t.current.value,noiseFactor:a.current.value,lookNegative:i.current.checked}})}),[e]),r=Object(y.useCallback)((function(){e({type:xn})}),[e]);return Object(P.jsxs)("div",{style:Pl.container,children:[Object(P.jsx)(El,{ref:n,label:"Max Number Of Peaks:",name:"maxNumberOfPeaks",style:{input:Pl.input,inputContainer:Pl.inputContainer,label:Pl.label},defaultValue:50}),Object(P.jsx)(El,{ref:a,label:"Noise factor",name:"noiseFactor",style:{input:Pl.input,inputContainer:Pl.inputContainer,label:Pl.label},defaultValue:3}),Object(P.jsx)(El,{ref:t,label:"Min Max Ratio:",name:"minMaxRatio",style:{input:Pl.input,inputContainer:Pl.inputContainer,label:Pl.label},defaultValue:.1,step:"0.01"}),Object(P.jsxs)("div",{style:{justifyItems:"baseline",marginRight:"3px"},children:[Object(P.jsx)("label",{style:{marginRight:"2px",lineHeight:2,userSelect:"none"},htmlFor:"lookNegative",children:"Detect Negative:"}),Object(P.jsx)(ul,{name:"lookNegative",ref:i})]}),Object(P.jsx)("button",{type:"button",style:Pl.actionButton,onClick:o,children:"Apply"}),Object(P.jsx)("button",{type:"button",style:Pl.actionButton,onClick:r,children:"Cancel"})]})},Rl=Object(y.forwardRef)((function Select(e,t){var n=e.data,a=e.style,i=e.onChange,o=e.defaultValue,r=e.name,c=Object(y.useCallback)((function(e){var t=e.target.value;isNaN(t)||(t=Number(t)),i(t)}),[i]),l=Object(v.b)(Il||(Il=Object(j.a)(["\n    position: relative;\n    padding: 0px 5px;\n    border: 0.55px solid #cacaca;\n    font-size: 14px;\n    width: ","px;\n    margin: 0;\n    height: 100%;\n    background: "," no-repeat right white;\n    -webkit-appearance: none;\n    background-position-x: ","px;\n    background-size: 15px 15px;\n    border-radius: 5px;\n    margin: 0px 5px;\n    :focus,\n    input:focus {\n      outline: none;\n    }\n  "])),a.width?a.width-5:115,'url(\'data:image/svg+xml;utf8,<svg  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="960px" height="560px" viewBox="0 0 960 560" enable-background="new 0 0 960 560" xml:space="preserve"><g id="Rounded_Rectangle_33_copy_4_1_"><path d="M480,344.181L268.869,131.889c-15.756-15.859-41.3-15.859-57.054,0c-15.754,15.857-15.754,41.57,0,57.431l237.632,238.937c8.395,8.451,19.562,12.254,30.553,11.698c10.993,0.556,22.159-3.247,30.555-11.698l237.631-238.937c15.756-15.86,15.756-41.571,0-57.431s-41.299-15.859-57.051,0L480,344.181z"/></g></svg>\')',a.width?a.width-18:97);return Object(ve.b)("select",{css:[l,a],ref:t,name:r,onChange:c,defaultValue:o,children:n.map((function(e){return Object(ve.b)("option",{value:e.value,children:e.label},"".concat(e.key))}))})}));Rl.defaultProps={onChange:function onChange(){return null},style:{width:100},name:""};var Nl=Rl,_l={container:{padding:"5px",height:"100%",display:"flex"},label:{lineHeight:2,userSelect:"none"},actionButton:{height:"100%",width:"60px",borderRadius:"5px",border:"0.55px solid #c7c7c7",margin:"0px 5px",userSelect:"none"}};var Ll=function BaseLineCorrectionPanel(){var e=useDispatch(),t=Object(y.useRef)(),n=Object(y.useRef)(),a=Object(y.useRef)(),i=Object(y.useRef)(),o=Object(y.useState)("polynomial"),r=Object(m.a)(o,2),c=r[0],l=r[1],s=Object(y.useCallback)((function(){var o={};switch(c){case"airpls":o={algorithm:t.current.value,maxIterations:n.current.value,tolerance:a.current.value};break;case"polynomial":o={algorithm:t.current.value,degree:i.current.value}}e({type:Tn,options:o})}),[c,e]),u=Object(y.useCallback)((function(){e({type:xn})}),[e]),d=Object(y.useCallback)((function(){return Object.keys(Oa).map((function(e){return{key:e,label:Oa[e],value:e}}))}),[]),b=Object(y.useCallback)((function(e){l(e)}),[]);return Object(P.jsxs)("div",{style:_l.container,children:[Object(P.jsx)("span",{style:_l.label,children:"Algorithm: "}),Object(P.jsx)(Nl,{ref:t,data:d(),style:{marginLeft:10,marginRight:10},onChange:b,defaultValue:"polynomial"}),c&&"airpls"===c&&Object(P.jsxs)(y.Fragment,{children:[Object(P.jsx)(El,{label:"maxIterations:",ref:n,name:"maxIterations",defaultValue:100}),Object(P.jsx)(El,{label:"tolerance:",ref:a,name:"tolerance",defaultValue:.001})]}),c&&"autoPolynomial"===c&&Object(P.jsx)(El,{label:"degree:",ref:i,name:"degree",defaultValue:3}),c&&"polynomial"===c&&Object(P.jsx)(El,{label:"degree:",ref:i,name:"degree",defaultValue:3}),Object(P.jsx)("button",{type:"button",style:_l.actionButton,onClick:s,children:"Apply"}),Object(P.jsx)("button",{type:"button",style:_l.actionButton,onClick:u,children:"Cancel"})]})},zl={container:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",border:"0.55px solid #c7c7c7",borderRadius:"5px",userSelect:"none",backgroundColor:"#18ce0f14",fontSize:"10px",color:"#00801d",margin:"0px 5px",cursor:"ew-resize"},label:{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",maxWidth:"100%"}},Hl={step:"initial"},Bl=null,Xl=1,Vl=0,Yl=!0;function calcSpeed(e){Yl?(Vl=e.clientX,Yl=!1):(Xl=e.clientX-Vl,Vl=e.clientX,function setToZero(){clearTimeout(Bl),Bl=setTimeout((function(){Xl=0}),50)}())}function InputRange(e){var t=e.name,n=e.minValue,a=e.maxValue,i=e.value,o=e.onChange,r=e.label,c=e.style,l=e.className,s=e.noPropagation,u=Object(y.useCallback)((function(){"moving"!==Hl.step&&"start"!==Hl.step||(Hl=Object(g.a)(Object(g.a)({},Hl),{},{step:"start"===Hl.step?"initial":"end"}))}),[]),d=Object(y.useCallback)((function(e){s&&e.stopPropagation();var t=e.currentTarget.getBoundingClientRect(),n=e.clientX-t.x,a=e.clientY-t.y;return"initial"!==Hl.step&&"end"!==Hl.step||(Hl={startX:n,startY:a,startScreenX:e.screenX,startScreenY:e.screenY,boundingRect:e.currentTarget.getBoundingClientRect(),step:"start",clientX:e.clientX,clientY:e.clientY}),!1}),[s]);return Object(P.jsx)("div",{style:Object(g.a)(Object(g.a)({},zl.container),c),className:l,onMouseMove:function mouseMoveCallback(e){if("start"===Hl.step||"moving"===Hl.step){var r=e.screenX,c=e.screenY;Hl=Object(g.a)(Object(g.a)({},Hl),{},{step:"moving",endX:Hl.startX+r-Hl.startScreenX,endY:Hl.startY+c-Hl.startScreenY}),calcSpeed(e);var l=a-n,s=Hl.endX-Hl.startX,u=Math.abs(s)*(Math.abs(Xl)>3?l:5)/Hl.boundingRect.width;o({value:Xl>=0?i+Math.abs(u):i-u,name:t})}},onMouseUp:function mouseUpCallback(){"moving"!==Hl.step&&"start"!==Hl.step||(Hl=Object(g.a)(Object(g.a)({},Hl),{},{step:"start"===Hl.step?"initial":"end"}))},onMouseDown:d,onMouseEnter:u,children:Object(P.jsx)("span",{style:zl.label,children:r})})}InputRange.defaultProps={name:"",minValue:0,maxValue:50,value:0,onChange:function onChange(){return null},label:"Drag to Change the value",noPropagation:!0};var Zl=InputRange,Ul={container:{padding:"5px",height:"100%",display:"flex"},input:{width:"100px"},actionButton:{height:"100%",width:"60px",borderRadius:"5px",border:"0.55px solid #c7c7c7",margin:"0px 5px",userSelect:"none"},select:{marginLeft:"5px",marginRight:"10px",border:"none",height:"20px"}},Kl="manual",Wl="automatic",Gl="absolute",ql=[{key:Kl,label:"Manual",value:Kl},{key:Wl,label:"Automatic",value:Wl},{key:Gl,label:"Absolute",value:Gl}];var Jl=function ManualPhaseCorrectionPanel(){var e=useDispatch(),t=Object(y.useState)({ph0:0,ph1:0,pivotIndex:1}),n=Object(m.a)(t,2),a=n[0],i=n[1],o=Object(y.useState)(Kl),r=Object(m.a)(o,2),c=r[0],l=r[1],s=Object(y.useCallback)((function(){switch(c){case Wl:e({type:bn});break;case Kl:e({type:dn,value:a});break;case Gl:e({type:pn})}}),[e,c,a]),u=Object(y.useCallback)((function(t){var n=t.target.name;if(t.target){var o=t.target.value;i((function(t){var i=Object(g.a)(Object(g.a)({},t),{},Object(ce.a)({},n,o));if("-"!==o){var r=Object(g.a)(Object(g.a)({},a),{},Object(ce.a)({},n,o-t[n]));for(var c in t)t[c]===r[c]&&(r[c]-=t[c]);e({type:un,value:r})}return i}))}}),[e,a]),d=Object(y.useCallback)((function(t){var n=Object(g.a)(Object(g.a)({},a),{},Object(ce.a)({},t.name,t.value)),o={};for(var r in a)o[r]=n[r]-a[r];e({type:un,value:o}),i(n)}),[e,a]),b=Object(y.useCallback)((function(){e({type:xn})}),[e]),p=Object(y.useCallback)((function(e){l(e)}),[]);return Object(P.jsxs)("div",{style:Ul.container,children:[Object(P.jsx)(Nl,{onChange:p,data:ql,value:Kl,style:Ul.select}),c===Kl&&Object(P.jsxs)(P.Fragment,{children:[Object(P.jsx)(hl,{label:"PH0:",name:"ph0",style:{input:Ul.input},onChange:u,value:a.ph0,type:"number"}),Object(P.jsx)(hl,{label:"PH1:",name:"ph1",style:{input:Ul.input},onChange:u,value:a.ph1,type:"number"}),Object(P.jsx)(Zl,{name:"ph0",value:a.ph0,label:"Change Ph0 By mouse click and drag",style:{width:"20%"},onChange:d}),Object(P.jsx)(Zl,{name:"ph1",value:a.ph1,label:"Change Ph1 By mouse click and drag",style:{width:"20%"},onChange:d})]}),Object(P.jsx)("button",{type:"button",style:Ul.actionButton,onClick:s,children:"Apply"}),Object(P.jsx)("button",{type:"button",style:Ul.actionButton,onClick:b,children:"Cancel"})]})},$l={container:{padding:"5px",height:"100%",display:"flex",fontSize:"12px",alignItems:"baseline"},input:{height:"100%",width:"50px",borderRadius:"5px",border:"0.55px solid #c7c7c7",margin:"0px 5px 0px 5px",textAlign:"center"},actionButton:{height:"100%",minWidth:"60px",borderRadius:"5px",border:"0.55px solid #c7c7c7",margin:"0px 5px",userSelect:"none"},hint:{lineHeight:2,userSelect:"none",fontSize:"11px"}};var Ql=function RangesPickingOptionPanel(){var e=useDispatch(),t=Object(y.useRef)(),n=Object(y.useCallback)((function(){e({type:gn,options:{peakPicking:{minMaxRatio:.05,nH:100,compile:!0,frequencyCluster:16,clean:!0,keepPeaks:!0,lookNegative:t.current.checked}}})}),[e]),a=Object(y.useCallback)((function(){e({type:xn})}),[e]);return Object(P.jsxs)("div",{style:$l.container,children:[Object(P.jsxs)("div",{style:{justifyItems:"baseline",margin:"0 10px"},children:[Object(P.jsx)("label",{style:{marginRight:"2px",lineHeight:2,userSelect:"none"},htmlFor:"lookNegative",children:"Detect negative:"}),Object(P.jsx)(ul,{name:"lookNegative",ref:t})]}),Object(P.jsx)("button",{type:"button",style:$l.actionButton,onClick:n,children:"Auto ranges picking"}),Object(P.jsx)("button",{type:"button",style:$l.actionButton,onClick:a,children:"Cancel"}),Object(P.jsx)("span",{style:$l.hint,children:"Manual selection using SHIFT + select zone or click on Auto peak picking"})]})},es={container:{padding:"5px",height:"100%",display:"flex"},input:{height:"100%",width:"50px",borderRadius:"5px",border:"0.55px solid #c7c7c7",margin:"0px 5px 0px 5px",textAlign:"center"},actionButton:{height:"100%",width:"60px",borderRadius:"5px",border:"0.55px solid #c7c7c7",margin:"0px 5px",userSelect:"none"},label:{lineHeight:2,userSelect:"none"}};function formatNumber(e){return e>=1048576?"".concat(e/1048576,"M"):e>=1024?"".concat(e/1024,"K"):e}var ts=function generateSizes(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:21,n=[],a=e;a<=t;a++){var i=Math.pow(2,a);n.push({key:i,label:formatNumber(i),value:i})}return n}();var ns=function ZeroFillingOptionsPanel(){var e=useDispatch(),t=useChartData(),n=t.data,a=t.activeSpectrum,i=Object(y.useRef)(),o=Object(y.useState)(1),r=Object(m.a)(o,2),c=r[0],l=r[1],s=Object(y.useCallback)((function(){e({type:ln,value:{zeroFillingSize:Number(i.current.value),lineBroadeningValue:c}})}),[e,c]),u=Object(y.useCallback)((function(){return n&&(null===a||void 0===a?void 0:a.id)?Math.pow(2,Math.round(Math.log2(n[a.index].data.x.length))):""}),[a,n]),d=Object(y.useCallback)((function(e){if(e.target){var t=e.target.validity.valid?Number(e.target.value):c;l(t)}}),[c]),b=Object(y.useCallback)((function(){e({type:xn})}),[e]);return Object(P.jsxs)("div",{style:es.container,children:[Object(P.jsx)("span",{style:es.label,children:"Size: "}),Object(P.jsx)(Nl,{ref:i,data:ts,style:{marginLeft:10,marginRight:10},defaultValue:u()}),Object(P.jsx)("span",{style:es.label,children:"Line Broadening: "}),Object(P.jsx)("input",{name:"line-broadening",style:es.input,type:"number",defaultValue:c,onInput:d,pattern:"^\\d*(\\.\\d{0,2})?$",step:"any"}),Object(P.jsx)("button",{type:"button",style:es.actionButton,onClick:s,children:"Apply"}),Object(P.jsx)("button",{type:"button",style:es.actionButton,onClick:b,children:"Cancel"})]})},as={container:{padding:"5px",height:"100%",display:"flex",fontSize:"12px"},input:{width:"50px"},inputContainer:{flex:"2"},label:{flex:"5"},actionButton:{height:"100%",borderRadius:"5px",border:"0.55px solid #c7c7c7",margin:"0px 5px",userSelect:"none"}};var is,os=function Zones2DOptionPanel(){var e=useDispatch(),t=Object(y.useRef)(),n=Object(y.useCallback)((function(){e({type:mn,options:{thresholdFactor:t.current.value}})}),[e]),a=Object(y.useCallback)((function(){e({type:xn})}),[e]),i=Object(y.useCallback)((function(e){if(e.target){var t=e.target.value;ti.emit("noiseFactorChanged",t)}}),[]);return Object(P.jsxs)("div",{style:as.container,children:[Object(P.jsx)(El,{ref:t,label:"NoiseFactor",name:"noiseFactor",style:{input:as.input,inputContainer:as.inputContainer,label:as.label},defaultValue:1,onChange:i}),Object(P.jsx)("button",{type:"button",style:as.actionButton,onClick:n,children:"Auto Zones Picking"}),Object(P.jsx)("button",{type:"button",style:as.actionButton,onClick:a,children:"Cancel"})]})},rs=Object(v.b)(is||(is=Object(j.a)(["\n  display: flex;\n  align-items: flex-start;\n  justify-content: flex-start;\n  height: 36px;\n  min-height: 36px;\n  border-width: 1px 1px 0px 1px;\n  border-style: solid;\n  border-color: rgb(213, 213, 213);\n  outline: none;\n  transition: background-color 0.2s ease-in 0s;\n  box-shadow: rgb(255, 255, 255) 0px 1px 0px 0px inset;\n  background: linear-gradient(rgb(255, 255, 255) 5%, rgb(246, 246, 246) 100%)\n    rgb(255, 255, 255);\n  color: rgb(102, 102, 102);\n  font-family: Arial;\n  font-weight: bold;\n  text-decoration: none;\n  text-shadow: rgb(255, 255, 255) 0px 1px 0px;\n\n  .toolOptionsPanel {\n    flex: 10;\n    padding: 0px;\n    margin: 0px;\n    height: 100%;\n  }\n\n  .windowButtonsContainer {\n    flex: 0.5;\n    display: flex;\n    align-items: center;\n    justify-content: flex-end;\n    height: 100%;\n  }\n\n  .windowButton {\n    width: 40px !important;\n    min-width: 40px !important;\n    background-color: transparent;\n    border: none;\n  }\n  button:focus {\n    outline: 0;\n  }\n"])));function Button(e){var t=e.title,n=e.popupPlacement,a=e.style,i=e.className,o=e.onClick,r=e.children,c=e.helpID,l=void 0===c?"":c,s=useHelp();return Object(ve.b)(Ze,{title:t,popupPlacement:n,style:a,children:Object(ve.b)("button",Object(g.a)(Object(g.a)({type:"button",onClick:o,className:i},s.onHover),{},{"data-helpid":l,children:r}))})}function Header_Header(e){var t=e.isFullscreen,n=e.onMaximize,a=useChartData().selectedOptionPanel,i=te(),o=gc(),r=Object(y.useMemo)((function(){switch(a){case Xa.zeroFilling.id:return Object(ve.b)(ns,{});case Xa.phaseCorrection.id:return Object(ve.b)(Jl,{});case Xa.peakPicking.id:return Object(ve.b)(Fl,{});case Xa.rangesPicking.id:return Object(ve.b)(Ql,{});case Xa.baseLineCorrection.id:return Object(ve.b)(Ll,{});case Xa.zone2D.id:return Object(ve.b)(os,{})}}),[a]),c=Object(y.useCallback)((function(){i.show(Object(ve.b)(Sl,{onSave:function onSave(){o.success("Settings saved successfully"),i.close()}}),{position:U.TOP_CENTER,enableResizing:!0,width:600,height:400})}),[o,i]),l=Object(y.useCallback)((function(){i.show(Object(ve.b)(Rc,{}),{isBackgroundBlur:!1,position:U.TOP_CENTER,enableResizing:!0,width:800,height:600})}),[i]);return Object(ve.c)("div",{css:rs,children:[Object(ve.b)("div",{className:"toolOptionsPanel",children:r}),Object(ve.c)("div",{className:"windowButtonsContainer",children:[Object(ve.b)(Button,{title:"User Manual",popupPlacement:"left",style:{mainContainer:{height:"auto"}},onClick:l,className:"windowButton",children:Object(ve.b)(He.z,{})}),Object(ve.b)(Button,{title:"General Settings",popupPlacement:"left",style:{mainContainer:{height:"auto"}},onClick:c,className:"windowButton",children:Object(ve.b)(He.J,{})}),t?"":Object(ve.b)(Button,{title:"Full Screen",popupPlacement:"left",style:{mainContainer:{height:"auto"}},onClick:n,className:"windowButton",helpID:"fullScreen",children:Object(ve.b)(He.C,{})})]})]})}Header_Header.defaultProps={onMaximize:function onMaximize(){return null}};var cs,ls,ss=Header_Header,us=n(733),ds={MOL:"mol",NMRIUM:"nmrium",JSON:"json",DX:"dx",JDX:"jdx",JDF:"jdf",ZIP:"zip"};function _loadFile(){return(_loadFile=Object(Mo.a)(To.a.mark((function _callee(e){var t,n;return To.a.wrap((function _callee$(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,fetch(e);case 2:return checkStatus(t=a.sent),a.next=6,t.text();case 6:return n=a.sent,a.abrupt("return",n);case 8:case"end":return a.stop()}}),_callee)})))).apply(this,arguments)}function checkStatus(e){if(!e.ok)throw new Error("HTTP ".concat(e.status," - ").concat(e.statusText));return e}function getFileExtension(e){return e.replace(/^.*\./,"").toLowerCase()}function getFileName(e){return e.substr(0,e.lastIndexOf("."))}function loadFiles(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Promise.all([].map.call(e,(function(e){return new Promise((function(n,a){var i=new FileReader;i.onabort=function(e){return a(e)},i.onerror=function(e){return a(e)},i.onload=function(){if(i.result){var t=i.result,a=getFileName(e.name),o=getFileExtension(e.name);n({binary:t,name:a,extension:o})}},t.asBuffer?i.readAsArrayBuffer(e):i.readAsBinaryString(e)}))})))}function loadFilesFromZip(e){return _loadFilesFromZip.apply(this,arguments)}function _loadFilesFromZip(){return(_loadFilesFromZip=Object(Mo.a)(To.a.mark((function _callee2(e){var t,n,a,i,o,r,c,l,s=arguments;return To.a.wrap((function _callee2$(u){for(;;)switch(u.prev=u.next){case 0:t=s.length>1&&void 0!==s[1]?s[1]:{},n=[],a=Object(Yr.a)(e),u.prev=3,a.s();case 5:if((i=a.n()).done){u.next=21;break}return o=i.value,u.prev=7,u.next=10,o.async(t.asBuffer?"uint8array":"text");case 10:r=u.sent,c=getFileName(o.name),l=getFileExtension(o.name),n.push({binary:r,name:c,extension:l}),u.next=19;break;case 16:u.prev=16,u.t0=u.catch(7),console.log(u.t0);case 19:u.next=5;break;case 21:u.next=26;break;case 23:u.prev=23,u.t1=u.catch(3),a.e(u.t1);case 26:return u.prev=26,a.f(),u.finish(26);case 29:return u.abrupt("return",n);case 30:case"end":return u.stop()}}),_callee2,null,[[3,23,26,29],[7,16]])})))).apply(this,arguments)}var bs=Object(v.b)(cs||(cs=Object(j.a)(["\n  height: 100%;\n  background-color: #b5b5b599;\n  position: absolute;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex-flow: column;\n  z-index: 99999;\n\n  p {\n    color: white;\n    background-color: rgb(104, 104, 104);\n    padding: 1.5%;\n    border-radius: 30px;\n    margin: 0px;\n  }\n\n  svg {\n    stroke-width: 0;\n    font-size: 3rem !important;\n    fill: white;\n  }\n"]))),ps=Object(v.b)(ls||(ls=Object(j.a)(["\n  border: 0.55px #e6e6e6 solid;\n  display: flex;\n  flex: 1;\n  flex-direction: 'column';\n  height: 100%;\n"])));var fs=function DropZone(e){var t=useChartData(),n=t.width,a=t.height,i=useDispatch(),o=Object(y.useCallback)((function(e,t){var n,a=Object(Yr.a)(t);try{var o=function _loop(){var t=n.value,a=e.filter((function(e){return getFileExtension(e.name)===t}));switch(t){case ds.MOL:loadFilesFromZip(a).then((function(e){return i({type:Ot,files:e})}));break;case ds.NMRIUM:case ds.JSON:loadFilesFromZip(a).then((function(e){1===a.length?i({type:jt,files:e}):(i({type:On,isLoading:!1}),alert("You can add only one json file"))}));break;case ds.JDX:case ds.DX:loadFilesFromZip(a).then((function(e){return i({type:vt,files:e})}));break;case ds.JDF:loadFilesFromZip(a,{asBuffer:!0}).then((function(e){return i({type:yt,files:e})}))}};for(a.s();!(n=a.n()).done;)o()}catch(r){a.e(r)}finally{a.f()}}),[i]),r=Object(y.useCallback)((function(e){var t,n=Object(wi.a)(new Set(e.map((function(e){return getFileExtension(e.name)})))),a=Object(Yr.a)(n);try{var r=function _loop2(){var n=t.value,a=e.filter((function(e){return getFileExtension(e.name)===n}));switch(n){case ds.MOL:loadFiles(a).then((function(e){i({type:Ot,files:e})}),(function(e){alert(e)}));break;case ds.NMRIUM:case ds.JSON:1===a.length?loadFiles(a).then((function(e){i({type:jt,files:e})}),(function(e){alert(e)})):alert("You can add only one json file");break;case ds.JDX:case ds.DX:loadFiles(a).then((function(e){i({type:vt,files:e})}),(function(e){alert(e)}));break;case ds.JDF:loadFiles(a,{asBuffer:!0}).then((function(e){i({type:yt,files:e})}),(function(e){alert(e)}));break;case ds.ZIP:loadFiles(a).then(function(){var e=Object(Mo.a)(To.a.mark((function _callee(e){var t,n,a,r,c;return To.a.wrap((function _callee$(l){for(;;)switch(l.prev=l.next){case 0:t=Object(Yr.a)(e),l.prev=1,t.s();case 3:if((n=t.n()).done){l.next=13;break}return a=n.value,l.next=7,Cc.a.loadAsync(a.binary);case 7:r=l.sent,c=Object(wi.a)(new Set(Object.values(r.files).map((function(e){return getFileExtension(e.name)})))),c.some((function(e){return ds[e.toUpperCase()]&&e!==ds.ZIP}))?o(Object.values(r.files),c):i({type:xt,files:e});case 11:l.next=3;break;case 13:l.next=18;break;case 15:l.prev=15,l.t0=l.catch(1),t.e(l.t0);case 18:return l.prev=18,t.f(),l.finish(18);case 21:case"end":return l.stop()}}),_callee,null,[[1,15,18,21]])})));return function(t){return e.apply(this,arguments)}}(),(function(e){alert(e)}));break;default:i({type:On,isLoading:!1}),alert("The file extension must be zip, dx, jdx, json, mol or nmrium.")}};for(a.s();!(t=a.n()).done;)r()}catch(c){a.e(c)}finally{a.f()}}),[i,o]),c=Object(y.useCallback)((function(e){i({type:On,isLoading:!0}),r(e)}),[i,r]),l=Object(us.a)({onDrop:c,noClick:!0}),s=l.getRootProps,u=l.getInputProps,d=l.isDragActive,b=l.open,p=Object(y.useCallback)((function(){b()}),[b]);return Object(ve.b)(Me,{value:{open:p},children:Object(ve.c)("div",Object(g.a)(Object(g.a)({},s()),{},{css:ps,children:[Object(ve.b)("input",Object(g.a)({},u())),d&&Object(ve.c)("div",{css:bs,style:{width:"".concat(n+41,"px"),height:"".concat(a,"px")},children:[Object(ve.b)(He.I,{}),Object(ve.b)("p",{children:"Drop your files here"})]}),e.children]}))})},hs=0,gs=!1,ms={container:{display:"flex",flexDirection:"column",margin:"0px",userSelect:"none"},button:{cursor:"pointer",padding:"5px 12px",display:"flex",alignItems:"center",fontSize:"11px",border:"none",outline:"none",transition:"background-color 0.2s ease-in",boxShadow:"inset 0px 1px 0px 0px #ffffff",background:"linear-gradient(to bottom, #f0f0f0 5%, #e1e1e1 100%)",filter:'progid:DXImageTransform.Microsoft.gradient(startColorstr="#f0f0f0", endColorstr="#e1e1e1",GradientType=0)',backgroundColor:"#ffffff",color:"#2d2d2d",fontFamily:"Arial",fontWeight:"bold",textDecoration:"none",textShadow:"0px 1px 0px #ffffff",borderTop:"0.55px  solid #d5d5d5"},buttonTitle:{padding:0,margin:0},content:{backgroundColor:"white",maxHeight:"0",overflow:"hidden",flex:"1 1 1px"}},js=1,vs=2;function AccordionItem(e){var t=e.title,n=e.children,a=e.index,i=e.isOpen,o=e.onOpen,r=e.style,c=Object(y.useState)(null),l=Object(m.a)(c,2),s=l[0],u=l[1],d=Object(y.useRef)(),b=Object(y.useRef)(),p=Object(y.useCallback)((function(e){hs=setTimeout((function(){gs||o(a,{source:js,shiftKey:e.shiftKey}),gs=!1}),200)}),[a,o]),f=Object(y.useCallback)((function(e){e.persist(),clearTimeout(hs),gs=!0,o(a,{source:vs,shiftKey:e.shiftKey})}),[a,o]);return Object(y.useEffect)((function(){u(i?{backgroundColor:"#ccc"}:null)}),[i]),Object(P.jsxs)("div",{ref:b,style:Object(g.a)(Object(g.a)({},ms.container),{},{flex:null==s?0:"1 1 1px",transition:i?"flex 0.2s ease":""}),className:"custom-accordion",children:[Object(P.jsx)("button",{type:"button",style:ms.button,onClick:p,onDoubleClick:f,children:Object(P.jsx)("p",{style:ms.buttonTitle,children:t})}),Object(P.jsx)("div",{ref:d,style:Object(g.a)(Object(g.a)({},ms.content),{},{maxHeight:null==s?0:"100%"},r),children:n})]})}AccordionItem.defaultProps={onOpen:function onOpen(){return null}};var Os=AccordionItem,xs={container:{height:"100%",width:"100%",display:"flex",flexDirection:"column"}},ys=[],Cs=null;var ks,Ss,Ds,ws=function Accordion(e){var t=e.children,n=e.defaultOpenIndex,a=void 0===n?0:n,i=Object(y.useState)([]),o=Object(m.a)(i,2),r=o[0],c=o[1],l=Object(y.useRef)(),s=Object(y.useCallback)((function(e,t){var n=r.slice();t.source===js?n=n.map((function(t,n){return n===e&&Cs!==e?!t:t})):(n=n.map((function(t,n){return n===e})),Cs=t.shiftKey?Cs===e?null:e:null),ys=n,c(n)}),[r]),u=Object(y.useMemo)((function(){return y.Children.map(t,(function(e,t){return e&&Object(y.cloneElement)(e,{onOpen:s,index:t,isOpen:r&&r[t]})}))}),[t,r,s]);return Object(y.useEffect)((function(){null!=a&&c((function(e){return e.length>0?e.map((function(e,t){return ys[t]?e:t===a})):(ys=Array(t.length).fill(!1).map((function(e){return e})),Array(t.length).fill(!1).map((function(e,t){return t===a||e})))}))}),[t.length,a]),Object(P.jsx)("div",{ref:l,style:xs.container,children:u})},Ts=n(369),Ms=Object(v.b)(ks||(ks=Object(j.a)(["\n  background-color: #ff6f0057;\n"]))),As=Object(v.b)(Ss||(Ss=Object(j.a)(["\n  background-color: #f5f5dc;\n"]))),Es=Object(v.b)(Ds||(Ds=Object(j.a)(["\n  border-spacing: 0;\n  border: 1px solid #dedede;\n  width: 100%;\n  // height: 100%;\n  font-size: 12px;\n\n  .react-contextmenu-wrapper {\n    display: contents;\n  }\n\n  tr {\n    :last-child {\n      td {\n        border-bottom: 0;\n      }\n    }\n  }\n\n  th {\n    position: sticky;\n    background-color: white;\n    z-index: 2;\n    top: 0;\n  }\n  th,\n  td {\n    margin: 0;\n    padding: 0.15rem 0.4rem;\n    border-bottom: 1px solid #dedede;\n    border-right: 1px solid #dedede;\n\n    :last-child {\n      border-right: 0;\n    }\n    button {\n      background-color: transparent;\n      border: none;\n    }\n  }\n"])));function ReactTableFlexLayout(e){var t=e.data,n=e.columns,a=e.onMouseDown,i=Object(Ts.useTable)({columns:n,data:t},Ts.useSortBy,Ts.useFlexLayout),o=i.getTableProps,r=i.getTableBodyProps,c=i.headerGroups,l=i.rows,s=i.prepareRow;return Object(ve.c)("table",Object(g.a)(Object(g.a)({},o()),{},{css:Es,children:[Object(ve.b)("thead",{children:c.map((function(e){return Object(ve.b)("tr",Object(g.a)(Object(g.a)({},e.getHeaderGroupProps()),{},{children:e.headers.map((function(e){return Object(ve.c)("th",Object(g.a)(Object(g.a)({},e.getHeaderProps(e.getSortByToggleProps())),{},{children:[e.render("Header"),Object(ve.b)("span",{children:e.isSorted?e.isSortedDesc?" \u25bc":" \u25b2":""})]}),e.getHeaderProps().key)}))}),e.getHeaderGroupProps().key)}))}),Object(ve.b)("tbody",Object(g.a)(Object(g.a)({},r()),{},{style:{display:"block",height:"100%",overflowY:"auto"},children:l.map((function(e){return s(e),Object(ve.b)("tr",Object(g.a)(Object(g.a)({},e.getRowProps()),{},{onMouseDown:a,children:e.cells.map((function(e){return Object(ve.b)("td",Object(g.a)(Object(g.a)({},e.getCellProps()),{},{style:Object(g.a)(Object(g.a)({},e.getCellProps().style),{},{padding:"0px"}),children:e.render("Cell")}),e.getCellProps().key)}))}),e.getRowProps().key)}))}))]}))}ReactTableFlexLayout.defaultProps={onMouseDown:function onMouseDown(){return null}};var Ps=Object(y.memo)(ReactTableFlexLayout);var Is={container:{height:"100%"},tableContainer:{height:"calc(100% - 30px)",overflow:"auto",display:"block"},searchInput:{width:"100%",borderRadius:"5px",border:"0.55px solid gray",padding:"5px",marginBottom:"2px"}};function InformationPanel(e){var t=e.info,n=e.meta,a=Object(y.useState)({}),i=Object(m.a)(a,2),o=i[0],r=i[1],c=Object(y.useState)([]),l=Object(m.a)(c,2),s=l[0],u=l[1],d=Object(y.useRef)(),b=Object(y.useCallback)((function(e){var t=Object.keys(o).filter((function(t){return t.toLowerCase().includes(e.target?e.target.value.toLowerCase():e.toLowerCase())}));u(t)}),[o]);Object(y.useEffect)((function(){d.current&&b(d.current.value)}),[b,d]),Object(y.useEffect)((function(){if(t&&n){var e=Object.keys(t).concat(Object.keys(n));u(e),r(Object(g.a)(Object(g.a)({},t),n))}}),[t,n]);var p=Object(y.useMemo)((function(){return[{Header:"Parameter",sortType:"basic",minWidth:100,width:20,maxWidth:20,Cell:function Cell(e){var t=e.row;return Object(P.jsx)("p",{style:{padding:"5px",backgroundColor:"white"},children:t.original})}},{Header:"Value",sortType:"basic",resizable:!0,Cell:function Cell(e){var t=e.row;return Object(P.jsx)("p",{style:{backgroundColor:"#efefef",height:"100%",padding:"5px",fontFamily:"monospace",whiteSpace:"pre",overflow:"hidden"},children:o[t.original].toString()})}}]}),[o]);return Object(P.jsxs)("div",{style:Is.container,children:[Object(P.jsx)("div",{children:Object(P.jsx)("input",{type:"text",style:Is.searchInput,placeholder:"Search for parameter...",onChange:b,ref:d})}),Object(P.jsx)("div",{style:Is.tableContainer,children:Object(P.jsx)(Ps,{data:s,columns:p})})]})}var Fs=function InfoWrapper(e){var t=function Wrapper(t){var n=useChartData(),a=n.data,i=n.activeSpectrum,o=Object(y.useMemo)((function(){return a&&i&&i.id?a.find((function(e){return e.id===i.id}))||{info:{},meta:{}}:{}}),[i,a]),r=o.info,c=void 0===r?{}:r,l=o.meta,s=void 0===l?{}:l,u=t.forwardedRef,d=Object(de.a)(t,["forwardedRef"]);return Object(P.jsx)(e,Object(g.a)(Object(g.a)({},d),{},{info:c,meta:s,ref:u}))};return Object(y.forwardRef)((function(e,n){return Object(P.jsx)(t,Object(g.a)(Object(g.a)({},e),{},{forwardedRef:n}))}))}(Object(y.memo)(InformationPanel)),Rs=n(205),Ns=n(239),_s=n.n(Ns);var Ls,zs=function IntegralsWrapper(e){var t=function Wrapper(t){var n=useChartData(),a=n.data,i=n.activeSpectrum,o=n.xDomain,r=n.activeTab,c=n.tabActiveSpectrum,l=n.molecules,s=usePreferences(),u=Object(y.useMemo)((function(){return a&&i&&i.id?a.find((function(e){return e.id===i.id}))||{integrals:{},info:{}}:{}}),[i,a]),d=u.integrals,b=void 0===d?{}:d,p=u.info,f=void 0===p?{}:p,h=Object(y.useMemo)((function(){return c&&Object.keys(c).length>0?Object.keys(c):null}),[c]),m=t.forwardedRef,j=Object(de.a)(t,["forwardedRef"]);return Object(P.jsx)(e,Object(g.a)(Object(g.a)({},j),{},{integrals:b,info:f,xDomain:o,preferences:s,activeTab:r,nucleus:h,molecules:l,ref:m}))};return Object(y.forwardRef)((function(e,n){return Object(P.jsx)(t,Object(g.a)(Object(g.a)({},e),{},{forwardedRef:n}))}))},Hs=Object(v.b)(Ls||(Ls=Object(j.a)(["\n  display: flex;\n  flex-direction: column;\n  width: 450px;\n  padding: 5px;\n  button:focus {\n    outline: none;\n  }\n  .header {\n    height: 24px;\n    border-bottom: 1px solid #f0f0f0;\n    display: flex;\n    span {\n      color: #464646;\n      font-size: 15px;\n      flex: 1;\n    }\n\n    button {\n      background-color: transparent;\n      border: none;\n      svg {\n        height: 16px;\n      }\n    }\n  }\n  .container {\n    display: flex;\n    margin: 30px 5px;\n    input,\n    button {\n      padding: 5px;\n      border: 1px solid gray;\n      border-radius: 5px;\n      height: 36px;\n      margin: 2px;\n    }\n    input {\n      flex: 10;\n    }\n    button {\n      flex: 2;\n      color: white;\n      background-color: gray;\n    }\n  }\n"])));function changeSum_NumberInput_NumberInput(e){var t=e.onSave,n=e.onClose,a=e.header,i=Object(y.useRef)(),o=Object(y.useCallback)((function(){t(i.current.value)}),[t]),r=Object(y.useCallback)((function(e){"Enter"===e.key&&t(i.current.value)}),[t]);return Object(ve.c)("div",{css:Hs,children:[Object(ve.c)("div",{className:"header handle",children:[Object(ve.b)("span",{children:a}),Object(ve.b)(Ge,{onClick:n})]}),Object(ve.c)("div",{className:"container",children:[Object(ve.b)("input",{ref:i,type:"number",placeholder:"Enter the new value",onKeyDown:r}),Object(ve.b)("button",{type:"button",onClick:o,children:"Set"})]})]})}changeSum_NumberInput_NumberInput.defaultProps={onSave:function onSave(){return null},onClose:function onClose(){return null}};var Bs,Xs,Vs,Ys,Zs=changeSum_NumberInput_NumberInput,Us=n(607),Ks=n.n(Us),Ws=n(264),Gs=n(742);function Arrow(e){var t=e.direction,n=e.onClick;return Object(ve.b)("div",{onClick:n,css:Object(v.b)(Bs||(Bs=Object(j.a)(["\n        display: flex;\n        position: absolute;\n        top: calc(50% - 18px);\n        ",";\n        height: 36px;\n        width: 36px;\n        justify-content: center;\n        background: white;\n        border-radius: 50%;\n        cursor: pointer;\n        align-items: center;\n        border: none;\n        transition: transform ease-in 0.1s;\n        &:hover {\n          transform: scale(1.2);\n          background-color: #607d8b;\n          color: white;\n        }\n        img {\n          transform: translateX(","px);\n          &:focus {\n            outline: 0;\n          }\n        }\n      "])),"right"===t?"right: 25px":"left: 25px","left"===t?"-2":"2"),children:Object(ve.b)(He.a,{style:{transform:"scaleX(".concat("right"===t?"-1":"1",")")}})})}function NextPrev(e){var t=e.children,n=e.loop,a=e.defaultIndex,i=e.onChange,o=Object(Gs.a)(),r=Object(m.a)(o,2),c=r[0],l=r[1].width,s=Object(y.useState)(0),u=Object(m.a)(s,2),d=u[0],b=u[1];Object(y.useEffect)((function(){b(a)}),[a]);var p=Object(y.useMemo)((function(){return y.Children.map(t,(function(e){return Object(ve.b)("div",{css:Object(v.b)(Xs||(Xs=Object(j.a)(["\n              width: ","px;\n              height: 100%;\n            "])),l),children:e},e.key)}))}),[t,l]),f=Object(y.useCallback)((function(){b((function(e){if(e===p.length-1)return i(e),n?0:e;var t=e+1;return i(t),t}))}),[p.length,n,i]),h=Object(y.useCallback)((function(){b((function(e){if(0===e)return i(e),n?0:e;var t=e-1;return i(t),t}))}),[n,i]);return l||p?Object(ve.c)("div",{css:Object(v.b)(Vs||(Vs=Object(j.a)(["\n        position: relative;\n        height: 100%;\n        width: 100%;\n        margin: 0 auto;\n        overflow: hidden;\n      "]))),ref:c,children:[Object(ve.b)("div",{css:Object(v.b)(Ys||(Ys=Object(j.a)(["\n          transform: translateX(-","px);\n          transition: transform ease-out ","s;\n          height: 100%;\n          width: ","px;\n          display: flex;\n        "])),l*d,.45,l*p.length),children:p}),0!==d&&Object(ve.b)(Arrow,{direction:"left",onClick:h}),d!==p.length-1&&Object(ve.b)(Arrow,{direction:"right",onClick:f})]}):null}NextPrev.defaultProps={loop:!1,defaultIndex:0,onChange:function onChange(){return null}};var qs,Js,$s=Object(y.memo)(NextPrev),Qs=Object(v.b)(qs||(qs=Object(j.a)(["\n  display: flex;\n  flex-direction: row;\n  border-top: 0.55px solid rgb(240, 240, 240);\n  border-bottom: 0.55px solid rgb(240, 240, 240);\n  padding: 0px 5px;\n\n  p {\n    margin: 0;\n    text-align: right;\n    width: 100%;\n    line-height: 22px;\n    padding: 0px 10px;\n  }\n"]))),eu=Object(v.b)(Js||(Js=Object(j.a)(["\n  width: 450px;\n\n  .slider {\n    height: 180px;\n    width: 100%;\n    padding: 0px;\n    height: 180px;\n    width: 100%;\n    padding: 0px;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    flex-direction: column;\n  }\n  .slider p {\n    width: 100%;\n    margin: 0 auto;\n    display: block;\n    position: relative;\n    text-align: center;\n  }\n  .slider svg polygon {\n    fill: gray !important;\n  }\n  button {\n    flex: 2;\n    padding: 5px;\n    border: 1px solid gray;\n    border-radius: 5px;\n    height: 36px;\n    margin: 0 auto;\n    margin-top: 15px;\n    display: block;\n    width: 20%;\n\n    color: white;\n    background-color: gray;\n  }\n"])));function MoleculeSelection(e){var t=e.molecules,n=e.onChange,a=Object(y.useState)(),i=Object(m.a)(a,2),o=i[0],r=i[1];Object(y.useEffect)((function(){t&&t.length>0&&r(0)}),[t]);var c=Object(y.useCallback)((function(e){r(e),n(e)}),[n]);return Object(ve.c)("div",{children:[Object(ve.b)("div",{css:Qs,children:Object(ve.c)("p",{children:[t&&t.length>0&&"".concat(+(o+1)," / ").concat(t.length)," "]})}),Object(ve.b)("div",{css:eu,children:Object(ve.b)($s,{onChange:c,children:t&&t.map((function(e,t){return Object(ve.c)("div",{className:"slider",children:[Object(ve.b)("div",{children:Object(ve.b)(Ws.a,{id:"molSVG".concat(t),width:120,molfile:e.molfile})}),Object(ve.c)("p",{children:[Object(ve.b)(Ks.a,{mf:e.mf})," - ",e.mw.toFixed(2)]})]},e.key)}))})})]})}MoleculeSelection.defaultProps={onChange:function onChange(){return null}};var tu,nu,au,iu=MoleculeSelection,ou=Object(v.b)(tu||(tu=Object(j.a)(["\n  display: flex;\n  flex-direction: column;\n  flex-grow: 1;\n"]))),ru=Object(v.b)(nu||(nu=Object(j.a)(["\n  display: flex;\n  flex-direction: column;\n  padding: 5px;\n\n  .optional {\n    margin-top: 5px;\n    margin-bottom: 5px;\n    padding: 0px 10px;\n\n    text-align: center;\n    font-size: 18px;\n    font-weight: bold;\n  }\n  .optional2 {\n    margin-top: 5px;\n    margin-bottom: 25px;\n    padding: 0px 10px;\n    width: 100%;\n\n    text-align: center;\n  }\n"]))),cu=Object(v.b)(au||(au=Object(j.a)(["\n  button {\n    flex: 2;\n    padding: 5px;\n    border: 1px solid gray;\n    border-radius: 5px;\n    height: 36px;\n    margin: 0 auto;\n    margin-top: 15px;\n    display: block;\n    width: 20%;\n\n    color: white;\n    background-color: gray;\n  }\n\n  .newSumText {\n    margin-top: 15px;\n    padding: 0px 10px;\n    width: 100%;\n\n    text-align: center;\n  }\n"])));function SelectMolecule(e){var t=e.onSave,n=e.molecules,a=e.element,i=Object(y.useState)(),o=Object(m.a)(i,2),r=o[0],c=o[1],l=usePreferences().display,s=l.general,u=l.panels,d=Object(y.useMemo)((function(){return a&&n&&n.length>0&&void 0!==r&&n[r].atoms[a]?n[r].atoms[a]:0}),[r,a,n]);Object(y.useEffect)((function(){n&&n.length>0&&c(0)}),[n]);var b=Object(y.useCallback)((function(e){e.preventDefault(),t(d)}),[d,t]),p=Object(y.useCallback)((function(e){c(e)}),[]);return!s.hideSetSumFromMolecule&&!u.hideStructuresPanel&&a&&n&&n.length>0?Object(ve.c)("div",{css:ou,children:[Object(ve.c)("div",{css:ru,children:[Object(ve.b)("p",{className:"optional",children:"OR"}),Object(ve.b)("p",{className:"optional2",children:"Select a molecule as reference!"})]}),Object(ve.c)("div",{css:cu,children:[Object(ve.b)(iu,{molecules:n,onChange:p}),Object(ve.b)("button",{type:"button",onClick:b,children:"Set"}),Object(ve.c)("p",{className:"newSumText",children:["New sum for ",a," will be ",d,"!"]})]})]}):null}SelectMolecule.defaultProps={onSave:function onSave(){return null}};var lu,su=SelectMolecule,uu=Object(v.b)(lu||(lu=Object(j.a)(["\n  display: flex;\n  flex-direction: column;\n  padding: 5px;\n"])));function ChangeSumModal(e){var t=e.onSave,n=e.onClose,a=e.header,i=e.molecules,o=e.element,r=Object(y.useCallback)((function(e){t(e)}),[t]),c=Object(y.useCallback)((function(e){t(e)}),[t]);return Object(ve.c)("div",{css:uu,children:[Object(ve.b)(Zs,{onSave:r,onClose:n,header:a}),Object(ve.b)(su,{onSave:c,molecules:i,element:o})]})}ChangeSumModal.defaultProps={onSave:function onSave(){return null},onClose:function onClose(){return null}};var du,bu=ChangeSumModal,pu=Object(v.b)(du||(du=Object(j.a)(["\n  background-color: transparent;\n  border: none;\n  border-radius: 5px;\n\n  &:hover {\n    background-color: lightgray;\n  }\n\n  &.toggle-active {\n    background-color: gray;\n    color: white;\n  }\n"])));function ToggleButton(e){var t=e.children,n=e.style,a=e.onClick,i=e.popupTitle,o=e.popupPlacement,r=e.defaultValue,c=e.disabled,l=Object(y.useState)(r),s=Object(m.a)(l,2),u=s[0],d=s[1],b=Object(y.useCallback)((function(){a(!u),d(!u)}),[a,u]);return Object(ve.b)(Ze,{title:i,popupPlacement:o,children:Object(ve.b)("button",{disabled:c,css:pu,style:n,className:u?"toogle toggle-active":"toggle",type:"button",onClick:b,children:t})})}ToggleButton.defaultProps={popupTitle:"",popupPlacement:"right",style:{},defaultValue:!1,onClick:function onClick(){return null},disabled:!1};var fu,hu=Object(y.memo)(ToggleButton),gu=Object(v.b)(fu||(fu=Object(j.a)(["\n  \n  display: flex;\n  flex-direction: row;\n  border-bottom: 0.55px solid rgb(240, 240, 240);\n  padding: 0px 5px;\n\n  button {\n    background-color: transparent;\n    border: none;\n    padding: 5px;\n  }\n\n  button:disabled{\n    opacity:0.6;\n  }\n  \n  .counter-label {\n    margin: 0;\n    text-align: right;\n    width: 100%;\n    line-height: 22px;\n    padding: 0px 10px;\n  }\n\n  filter-button{\n    borderRadius: 5px;\n    marginTop: 3px;\n    marginLeft: 5px;\n    color: black;\n    backgroundColor: transparent;\n    border: none;\n    height: 16px;\n    width: 18px;\n    fontSize: 12px;\n    padding: 0;\n  },\n\n"])));function DefaultPanelHeader(e){var t=e.counter,n=e.onDelete,a=e.deleteToolTip,i=e.onFilter,o=e.filterToolTip,r=e.filterIsActive,c=e.counterFiltered,l=e.children,s=e.onSettingClick,u=e.showSettingButton,d=e.canDelete;return Object(ve.c)("div",{css:gu,children:[d&&Object(ve.b)(Ze,{title:a,popupPlacement:"right",children:Object(ve.b)("button",{type:"button",onClick:n,disabled:0===t,children:Object(ve.b)(He.B,{})})}),i&&o?Object(ve.b)(hu,{popupTitle:o,popupPlacement:"right",onClick:i,children:Object(ve.b)(He.s,{style:{pointerEvents:"none",fontSize:"12px"}})}):null,l,t?Object(ve.c)("p",{className:"counter-label",children:["["," ",r&&!0===r&&void 0!==c?"".concat(c,"/").concat(t):t," ","]"]}):Object(ve.b)("p",{style:{flex:1}}),u&&Object(ve.b)(Ze,{title:"preferences",popupPlacement:"left",children:Object(ve.b)("button",{type:"button",onClick:s,children:Object(ve.b)(He.d,{})})})]})}DefaultPanelHeader.defaultProps={counter:0,onDelete:function onDelete(){return null},deleteToolTip:"Delete",onFilter:function onFilter(){return null},filterToolTip:"",filterIsActive:!1,counterFiltered:0,onSettingClick:function onSettingClick(){return null},showSettingButton:!1,canDelete:!0};var mu,ju=Object(y.memo)(DefaultPanelHeader),vu=Object(v.b)(mu||(mu=Object(j.a)(["\n  background-color: transparent;\n  border: none;\n  height: 100%;\n  svg {\n    fill: green;\n    font-size: 16px;\n  }\n"])));function SaveButton(e){var t=e.onClick,n=e.popupTitle,a=e.popupPlacement,i=e.disabled,o=e.className;return Object(ve.b)("div",{className:o,children:Object(ve.b)(Ze,{title:n,popupPlacement:a,children:Object(ve.b)("button",{css:vu,type:"button",onClick:t,disabled:i,className:o,children:Object(ve.b)(He.c,{})})})})}SaveButton.defaultProps={onClick:function onClick(){return null},popupTitle:"Save",popupPlacement:"left",disabled:!1,className:""};var Ou,xu=Object(y.memo)(SaveButton),yu=Object(v.b)(Ou||(Ou=Object(j.a)(["\n  display: flex;\n  flex-direction: row-reverse;\n  border-bottom: 0.55px solid rgb(240, 240, 240);\n\n  button {\n    background-color: transparent;\n    border: none;\n    padding: 5px;\n  }\n  button:disabled {\n    opacity: 0.6;\n  }\n"])));function PreferencesHeader(e){var t=e.onClose,n=e.onSave;return Object(ve.c)("div",{css:yu,children:[Object(ve.b)(Ge,{onClick:t,popupTitle:"close Preferences"}),Object(ve.b)(xu,{onClick:n,popupTitle:"save Preferences"})]})}var Cu=Object(y.memo)(PreferencesHeader),ku=Object(y.forwardRef)((function EditableColumn(e,t){var n=e.onSave,a=e.value,i=e.type,o=e.style,r=e.onEditStart,c=e.editStatus,l=Object(y.useState)(),s=Object(m.a)(l,2),u=s[0],d=s[1],b=Object(y.useRef)();Object(y.useEffect)((function(){d(c)}),[c]),Object(y.useImperativeHandle)(t,(function(){return{startEdit:function startEdit(){d(!0)},closeEdit:function closeEdit(){d(!1)}}}));var p=Object(y.useCallback)((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;e?(r(t),d(e)):13===t.keyCode?(n(t),d(e)):27===t.keyCode&&d(e)}),[r,n]);return Object(P.jsxs)("div",{style:Object(g.a)({display:"table",width:"100%",height:"100%"},o),onDoubleClick:function onDoubleClick(e){return p(!0,e)},children:[!u&&Object(P.jsx)("span",{style:{display:"table-cell",verticalAlign:"middle"},children:a}),u&&Object(P.jsx)("div",{style:{display:"table-cell",verticalAlign:"middle"},children:Object(P.jsx)(hl,{enableAutoSelect:!0,ref:b,value:a,type:i,onKeyDown:function onKeyDown(e){return p(!1,e)}})})]})}));ku.defaultProps={onSave:function onSave(){return null},onEditStart:function onEditStart(){return null},type:"text",editStatus:!1};var Su,Du=ku,wu=Object(v.b)(Su||(Su=Object(j.a)(["\n  box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.25);\n  padding: 0px;\n  margin: 0px;\n  border-radius: 2px;\n  display: flex;\n  flex-direction: column;\n  position: fixed;\n  z-index: 99999;\n  padding: 2px;\n  background-color: white;\n  width: 150px;\n  button {\n    background-color: transparent;\n    border: none;\n    border-bottom: 0.55px solid #f0f0f0;\n    font-size: 11px;\n    padding: 5px;\n    text-align: left;\n    outline: none;\n  }\n  button:hover {\n    background-color: #fafafa;\n    outline: none;\n  }\n\n  button:active {\n    background-color: #eaeaea;\n    outline: none;\n  }\n\n  button:last-of-type {\n    border: none;\n  }\n"])));function ContextMenu(e,t){var n=e.context,a=Object(y.useState)({lef:0,top:0}),i=Object(m.a)(a,2),o=i[0],r=i[1],c=useGlobal(),l=c.rootRef,s=c.elementsWraperRef,u=Object(y.useState)(),d=Object(m.a)(u,2),b=d[0],p=d[1],f=Object(y.useState)(),h=Object(m.a)(f,2),g=h[0],j=h[1],v=Object(y.useState)(null),O=Object(m.a)(v,2),x=O[0],C=O[1],k=Object(y.useRef)();Object(y.useEffect)((function(){return k.current=document.createElement("div"),s&&s.appendChild(k.current),function(){k.current&&s&&s.removeChild(k.current)}}),[s]);Object(y.useImperativeHandle)(t,(function(){return{handleContextMenu:function handleContextMenu(e,t){p(t),function contextMenuHandler(e){e.preventDefault(),C(e.target.parentElement),j(!0);var t=e.clientX,n=e.clientY,a=window.innerWidth-t>150,i=!a,o=window.innerHeight-n>0,c=!o;a&&(i="".concat(t+5,"px")),i&&(i="".concat(t-150-5,"px")),o&&(o="".concat(n+5,"px")),c&&(o="".concat(n-0-5,"px")),r({left:i,top:o})}(e)}}}));var S=Object(y.useCallback)((function(e,t){e.preventDefault(),t(b),j(!1)}),[b]);return Object(y.useEffect)((function(){var e=function _handleGlobalClick(e){x&&e.target.parentElement&&!e.target.parentElement.isSameNode(x)&&g&&j(!1)};return l&&l.addEventListener("click",e),function(){l&&l.removeEventListener("click",e)}}),[g,t,l,x]),g?k.current&&Object(le.createPortal)(n&&Object(ve.b)("div",{ref:t,css:[wu,o],children:n.map((function(e,t){return Object(ve.b)("button",{type:"button",onClick:function onClick(t){return S(t,e.onClick)},children:e.label},t)}))}),k.current):null}var Tu=Object(y.forwardRef)(ContextMenu),Mu=function ReactTableHeader(e){var t=e.headerGroups;return Object(P.jsx)("thead",{children:t.map((function(e){return Object(P.jsx)("tr",Object(g.a)(Object(g.a)({},e.getHeaderGroupProps()),{},{children:e.headers.map((function(e){return Object(P.jsxs)("th",Object(g.a)(Object(g.a)({},e.getHeaderProps(e.getSortByToggleProps())),{},{children:[e.render("Header"),Object(P.jsx)("span",{children:e.isSorted?e.isSortedDesc?" \u25bc":" \u25b2":""})]}),e.getHeaderProps().key)}))}),e.getHeaderGroupProps().key)}))})},Au=function ReactTableRow(e){var t=e.row,n=e.onContextMenu,a=Object(ri.c)([Object.prototype.hasOwnProperty.call(t.original,"id")?t.original.id:""]);return Object(ve.b)("tr",Object(g.a)(Object(g.a)(Object(g.a)({onContextMenu:n,css:a.isActive?Ms:Object.prototype.hasOwnProperty.call(t.original,"isConstantlyHighlighted")&&!0===t.original.isConstantlyHighlighted?As:null},t.getRowProps()),a.onHover),{},{children:t.cells.map((function(e){var t=e.column,n=t.minWidth,a=t.maxWidth,i=t.width,o=t.padding;return Object(ve.b)("td",Object(g.a)(Object(g.a)({},e.getCellProps()),{},{onContextMenu:function onContextMenu(e){return e.preventDefault(),!1},style:{minWidth:n,maxWidth:a,width:i,padding:o},children:e.render("Cell")}),e.key)}))}),t.getRowProps().key)};function ReactTable(e){var t=e.data,n=e.columns,a=e.context,i=Object(y.useRef)(),o=Object(Ts.useTable)({columns:n,data:t},Ts.useSortBy),r=o.getTableProps,c=o.getTableBodyProps,l=o.headerGroups,s=o.rows,u=o.prepareRow,d=Object(y.useCallback)((function(e,t){checkModifierKeyActivated(e)||(e.preventDefault(),i.current.handleContextMenu(e,t.original))}),[i]);return Object(ve.c)(y.Fragment,{children:[Object(ve.c)("table",Object(g.a)(Object(g.a)({},r()),{},{css:Es,children:[Object(ve.b)(Mu,{headerGroups:l}),Object(ve.b)("tbody",Object(g.a)(Object(g.a)({},c()),{},{children:s.map((function(e){return u(e),Object(ve.b)(Au,Object(g.a)(Object(g.a)({row:e},e.getRowProps()),{},{onContextMenu:function onContextMenu(t){return d(t,e)}}),e.key)}))}))]})),Object(ve.b)(Tu,{ref:i,context:a})]})}ReactTable.defaultProps={context:null};var Eu=Object(y.memo)(ReactTable);var Pu=function NoTableData(){return Object(P.jsx)("p",{style:{textAlign:"center",width:"100%",fontSize:"11px",padding:"5px",color:"gray"},children:"No Data"})},Iu={marginLeft:10,marginRight:10,border:"none"};function IntegralTable(e){var t=e.integrals,n=e.info,a=e.activeTab,i=e.xDomain,o=e.enableFilter,r=e.onFilter,c=e.preferences,l=useDispatch(),s=Object(y.useRef)([]),u=useGlobal().rootRef,d=Object(y.useCallback)((function(e,t){e.preventDefault(),e.stopPropagation();var n=t.original;l({type:Bt,integralID:n.id})}),[l]),b=Object(y.useCallback)((function(e,t){var n=Object(g.a)(Object(g.a)({},t.original),{},{kind:e});l({type:Cn,data:n})}),[l]),p=Object(y.useMemo)((function(){return[{orderIndex:1,Header:"#",Cell:function Cell(e){return e.row.index+1},width:10},{orderIndex:2,Header:"From",accessor:"from",sortType:"basic",resizable:!0,Cell:function Cell(e){return e.row.original.from.toFixed(2)}},{orderIndex:3,Header:"To",accessor:"to",sortType:"basic",resizable:!0,Cell:function Cell(e){return e.row.original.to.toFixed(2)}},{orderIndex:6,Header:"Kind",accessor:"kind",sortType:"basic",resizable:!0,Cell:function Cell(e){var t=e.row;return Object(P.jsx)(Nl,{onChange:function onChange(e){return b(e,t)},data:qi,style:Iu,defaultValue:t.original.kind})}},{orderIndex:7,Header:"",width:"1%",maxWidth:"24px",minWidth:"24px",id:"delete-button",Cell:function Cell(e){var t=e.row;return Object(P.jsx)("button",{type:"button",className:"delete-button",onClick:function onClick(e){return d(e,t)},children:Object(P.jsx)(He.B,{})})}}]}),[b,d]),f=Object(y.useCallback)((function(e,t){l({type:Zn,value:e.target.value,id:t.id})}),[l]),h=Object(y.useCallback)((function(e){s.current.forEach((function(t,n){e!==n&&t&&t.closeEdit()}))}),[]);Object(y.useEffect)((function(){return u&&u.addEventListener("mousedown",h),function(){u&&u.removeEventListener("mousedown",h)}}),[h,u]);var m=Object(y.useMemo)((function(){var e=function setCustomColumn(e,t,n,a){e.push({orderIndex:t,Header:n,sortType:"basic",Cell:function Cell(e){var t=e.row;return a(t)}})},t=rt(c,"formatting.panels.integrals.[".concat(a,"]")),n=Object(wi.a)(p);if(x()(t,"showAbsolute",bi.showAbsolute)&&e(n,4,"Absolute",(function(e){return Ei(e.original.absolute,x()(t,"absoluteFormat",bi.absoluteFormat))})),x()(t,"showRelative",bi.showRelative)){var i=a&&a.replace(/[0-9]/g,"");e(n,5,"Relative ".concat(i),(function(e){var n=Ei(e.original.integral,x()(t,"relativeFormat",bi.relativeFormat));return Object(P.jsx)(Du,{onEditStart:function onEditStart(){return h(e.index)},ref:function ref(t){return s.current[e.index]=t},value:n,onSave:function onSave(t){return f(t,e.original)},type:"number"})}))}return n.sort((function(e,t){return e.orderIndex-t.orderIndex}))}),[a,p,h,c,f]),j=Object(y.useMemo)((function(){function isInRange(e,t){var n=1e4;return e*=n,(t*=n)>=i[0]*n&&e<=i[1]*n||e<=i[0]*n&&t>=i[1]*n}return 1===n.dimension&&t&&t.values?(o?t.values.filter((function(e){return isInRange(e.from,e.to)})):t.values).map((function(e){return Object(g.a)(Object(g.a)({},e),{},{isConstantlyHighlighted:isInRange(e.from,e.to)})})):[]}),[o,n.dimension,t,i]);return Object(y.useEffect)((function(){r(j.length)}),[j,r]),j&&j.length>0?Object(P.jsx)(Eu,{data:j,columns:m}):Object(P.jsx)(Pu,{})}var Fu,Ru=zs(Object(y.memo)(IntegralTable)),Nu=n(371),_u=Object(v.b)(Fu||(Fu=Object(j.a)(["\n  display: flex;\n  margin: 5px 0px;\n\n.inputLabel{\n  flex: 2;\n  font-size: 11px;\n  font-weight: bold;\n  color: #232323;\n}\n\n.input {\n  width: '60%',\n  text-align: 'center',\n}\n\n.color{\n  width: 36px;\n  height: 14px;\n  border-radius: 2px;\n}\n\n.swatch{\n  padding: 5px;\n  background: #fff;\n  border-radius: 1px;\n  box-shadow: 0 0 0 1px rgba(0,0,0,.1);\n  display: inline-block;\n  cursor: pointer;\n}\n.color-popover {\n  position: absolute;\n  z-index: 2;\n}\n\n.cover {\n  position: fixed;\n  top: 0px;\n  right: 0px;\n  bottom: 0px;\n  left: 0px;\n}\n  .chrome-picker {\n    border-radius: none !important;\n    width: 200px !important;\n    height: 60px !important;\n    display: flex;\n\n\n  }\n  .chrome-picker > div:first-of-type {\n    padding: 0px !important;\n\n  }\n  .chrome-picker > div:last-child >  div:first-of-type {\n    width: 120px;\n\n  }\n  .chrome-picker > div:last-child >  div:last-child {\n    display:none !important;\n  }\n"])));function ColorInput(e){var t=e.label,n=e.onColorChange,a=e.name,i=e.value,o=Object(y.useState)(!1),r=Object(m.a)(o,2),c=r[0],l=r[1],s=Object(y.useState)(i),u=Object(m.a)(s,2),d=u[0],b=u[1],p=Object(y.useCallback)((function(){l(!c)}),[c]),f=Object(y.useCallback)((function(){l(!1)}),[]),h=Object(y.useCallback)((function(e){var t="".concat(e.hex).concat(Math.round(255*e.rgb.a).toString(16));b(t),n(Object(g.a)(Object(g.a)({},e),{},{hex:t,name:a}))}),[a,n]);return Object(ve.c)("div",{css:_u,children:[Object(ve.b)("span",{className:"inputLabel",children:t}),Object(ve.c)("div",{style:{flex:4},children:[Object(ve.c)("div",{className:"swatch",onClick:p,children:[Object(ve.b)("div",{className:"color",style:{backgroundColor:d}}),Object(ve.b)("input",{type:"hidden",value:d,name:a})]}),c?Object(ve.c)("div",{className:"color-popover",children:[Object(ve.b)("div",{className:"cover",onClick:f}),Object(ve.b)(Nu.ChromePicker,{color:{hex:d},onChangeComplete:h})]}):null]})]})}ColorInput.defaultProps={value:"#000000",label:"Color: ",onColorChange:function onColorChange(){return null}};var Lu=Object(y.memo)(ColorInput),zu={row:{display:"flex",margin:"5px 0px",alignItems:"center"},inputLabel:{flex:2,fontSize:"11px",fontWeight:"bold",color:"#232323"},input:{width:"60%",textAlign:"center"}};function ColumnFormatField(e){var t=e.label,n=e.checkControllerName,a=e.checked,i=e.format,o=e.formatControllerName,r=e.inputChangeHandler,c=e.groupID,l=Object(y.useState)(Boolean(a)),s=Object(m.a)(l,2),u=s[0],d=s[1];return Object(P.jsxs)("div",{style:zu.row,children:[Object(P.jsx)("span",{style:zu.inputLabel,children:t}),Object(P.jsxs)("div",{style:{flex:4,display:"flex",flexDirection:"row",alignItems:"center"},children:[Object(P.jsx)("input",{type:"checkbox",onChange:function onChange(e){return d(e.target.checked)},style:{margin:"0px 5px"},defaultChecked:u}),Object(P.jsx)("input",{name:"".concat(c,"-").concat(n),type:"hidden",value:u}),Object(P.jsx)(hl,{style:{container:zu.input},name:"".concat(c,"-").concat(o),type:"text",onChange:r,value:i||""})]})]})}var Hu=Object(y.memo)(ColumnFormatField),Bu={container:{padding:10,backgroundColor:"#f1f1f1",height:"100%",flex:1},groupContainer:{padding:"5px",borderRadius:"5px",margin:"10px 0px",backgroundColor:"white"},row:{display:"flex",margin:"5px 0px"},header:{borderBottom:"1px solid #e8e8e8",paddingBottom:"5px",fontWeight:"bold",color:"#4a4a4a"},inputLabel:{flex:2,fontSize:"11px",fontWeight:"bold",color:"#232323"},input:{width:"30%",textAlign:"center"}},Xu=[{id:1,label:"Absolute :",checkController:"showAbsolute",formatController:"absoluteFormat",defaultFormat:"0.00"},{id:2,label:"Relative :",checkController:"showRelative",formatController:"relativeFormat",defaultFormat:"00.00"}];function IntegralsPreferences(e,t){var n=e.nucleus,a=e.preferences,i=gc(),o=useStateWithLocalStorage("nmr-general-settings"),r=Object(m.a)(o,2)[1],c=Object(y.useState)(null),l=Object(m.a)(c,2),s=l[0],u=l[1],d=Object(y.useRef)();Object(y.useEffect)((function(){var e=rt(a,"formatting.panels.integrals");e&&u(e)}),[a]);var b=function saveToLocalStorgate(e){r(e,"formatting.panels.integrals")},p=Object(y.useCallback)((function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];a.dispatch({type:tl,payload:{key:"integrals",value:e}}),t&&i.success("Integrals preferences saved successfully")}),[i,a]);Object(y.useImperativeHandle)(t,(function(){return{saveSetting:function saveSetting(){"function"===typeof d.current.requestSubmit?d.current.requestSubmit():d.current.dispatchEvent(new Event("submit",{cancelable:!0}))}}}));var f=function(){var e=Object(Mo.a)(To.a.mark((function _callee(e){var t,n,a,i,o,r,c,l;return To.a.wrap((function _callee$(s){for(;;)switch(s.prev=s.next){case 0:e.preventDefault(),t=e.target,n=new FormData(t),a={},i=Object(Yr.a)(n.entries());try{for(i.s();!(o=i.n()).done;)r=o.value,c=r[0].split("-").join("."),l=["true","false"].includes(r[1])?"true"===r[1]:r[1],a=it()(a,c,l)}catch(u){i.e(u)}finally{i.f()}p(a,!0),b(a);case 8:case"end":return s.stop()}}),_callee)})));return function handleSubmit(t){return e.apply(this,arguments)}}(),h=Object(y.useCallback)((function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(s){var a=null===t[0]?s[t[1]]:x()(s,t.join("."));return a||null}var i=t.length-1;return bi[t[i]]}),[s]);return Object(P.jsx)("div",{style:Bu.container,children:Object(P.jsxs)("form",{onSubmit:f,ref:d,children:[Object(P.jsxs)("div",{style:Bu.groupContainer,children:[Object(P.jsx)("p",{style:Bu.header,children:"General"}),Object(P.jsx)(Lu,{name:"color",value:"".concat(h(null,"color"))}),Object(P.jsx)(El,{name:"strokeWidth",label:"stroke width :",style:{label:{fontSize:"11px",fontWeight:"bold",color:"#232323"},input:{width:"60%",textAlign:"center",borderRadius:"5px"}},defaultValue:Number(h(null,"strokeWidth")),min:1,pattern:"[1-9]*"})]}),n&&n.map((function(e){return Object(P.jsxs)("div",{style:Bu.groupContainer,children:[Object(P.jsx)("p",{style:Bu.header,children:Object(P.jsx)(zr.a,{mf:e})}),Xu.map((function(t){return Object(P.jsx)(Hu,{label:t.label,checked:h(e,t.checkController),format:h(e,t.formatController),checkControllerName:t.checkController,formatControllerName:t.formatController,groupID:e},t.id)}))]},e)}))]})})}var Vu,Yu=zs(Object(y.forwardRef)(IntegralsPreferences)),Zu=Object(v.b)(Vu||(Vu=Object(j.a)(["\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n\n  .sum-button {\n    width: 22px;\n    height: 22px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n  }\n"])));function IntegralPanel(e){var t=e.integrals,n=e.activeTab,a=e.molecules,i=Object(y.useState)(!1),o=Object(m.a)(i,2),r=o[0],c=o[1],l=Object(y.useState)(0),s=Object(m.a)(l,2),u=s[0],d=s[1],b=useDispatch(),p=te(),f=Object(y.useState)(!1),h=Object(m.a)(f,2),g=h[0],j=h[1],v=Object(y.useRef)(),O=Object(y.useCallback)((function(){b({type:Bt,integralID:null})}),[b]),C=Object(y.useCallback)((function(){p.showConfirmDialog({message:"All records will be deleted, Are You sure?",buttons:[{text:"Yes",handler:O},{text:"No"}]})}),[p,O]),k=Object(y.useCallback)((function(e){void 0!==e&&b({type:Sn,value:e}),p.close()}),[b,p]),S=Object(y.useMemo)((function(){return x()(t,"options.sum",null)}),[t]),D=Object(y.useCallback)((function(){p.show(Object(ve.b)(bu,{onClose:function onClose(){return p.close()},onSave:k,header:S?"Set new Integrals Sum (Current: ".concat(Number(S).toFixed(2),")"):"Set new Integrals Sum",molecules:a,element:n?n.replace(/[0-9]/g,""):null}))}),[n,k,S,p,a]),w=Object(y.useCallback)((function(){j(!g)}),[g]),T=Object(y.useCallback)((function(){v.current.saveSetting(),j(!1)}),[]),M=Object(y.useCallback)((function(){c(!r)}),[r]),A=Object(y.useCallback)((function(e){d(e)}),[]);return Object(ve.b)(y.Fragment,{children:Object(ve.c)("div",{css:Zu,children:[!g&&Object(ve.b)(ju,{counter:u,onDelete:C,deleteToolTip:"Delete All Integrals",onFilter:M,filterToolTip:r?"Show all integrals":"Hide integrals out of view",filterIsActive:r,counterFiltered:u,showSettingButton:"true",onSettingClick:w,children:Object(ve.b)(Ze,{title:S?"Change Integrals Sum (".concat(Number(S).toFixed(2),")"):"Change Integrals Sum",popupPlacement:"right",children:Object(ve.b)("button",{className:"sum-button",type:"button",onClick:D,children:Object(ve.b)(Rs.u,{})})})}),g&&Object(ve.b)(Cu,{onSave:T,onClose:w}),Object(ve.b)("div",{style:{height:"100%",overflow:"hidden"},children:Object(ve.c)(_s.a,{isFlipped:g,infinite:!0,containerStyle:{overflow:"hidden",height:"100%"},children:[Object(ve.b)("div",{style:{overflow:"auto",height:"100%",display:"block"},children:Object(ve.b)(Ru,{enableFilter:r,onFilter:A})}),Object(ve.b)(Yu,{ref:v})]})})]})})}var Uu=zs(Object(y.memo)(IntegralPanel)),Ku=n(737);function ButtonToolTip(e){var t=e.children,n=e.style,a=e.onClick,i=e.popupTitle,o=e.popupPlacement,r=Object(de.a)(e,["children","style","onClick","popupTitle","popupPlacement"]);return Object(P.jsx)(Ze,{title:i,popupPlacement:o,children:Object(P.jsx)("button",Object(g.a)(Object(g.a)({style:n,type:"button",onClick:a},r),{},{children:t}))})}ButtonToolTip.defaultProps={popupTitle:"",popupPlacement:"right",style:{},onClick:function onClick(){return null},disabled:!1};var Wu,Gu=ButtonToolTip,qu=Object(v.b)(Wu||(Wu=Object(j.a)(["\n  .menu {\n    box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.5);\n    padding: 0px;\n    margin: 0px;\n    border-radius: 5px;\n    display: flex;\n    flex-direction: column;\n    position: absolute;\n    z-index: 99999;\n    padding: 2px;\n    background-color: white;\n\n    button:hover {\n      background-color: #fafafa;\n    }\n  }\n\n  .menu-cover {\n    position: fixed;\n    width: 100%;\n    height: 100%;\n    top: 0;\n    left: 0;\n    z-index: 1;\n  }\n\n  .menu-item {\n    background-color: transparent;\n    border: none;\n    border-bottom: 0.55px solid whitesmoke;\n    height: 35px;\n    outline: outline;\n    display: table-cell;\n    vertical-align: middle;\n    text-align: left;\n    padding: 0 10px;\n\n    svg {\n      display: inline-block;\n    }\n\n    :focus {\n      outline: none !important;\n    }\n    span {\n      font-size: 10px;\n      padding: 0px 10px;\n    }\n  }\n"])));function MenuItem(e){var t=e.icon,n=e.label,a=e.onClick;return Object(ve.c)("button",{type:"button",className:"menu-item",onClick:a,children:[t,Object(ve.b)("span",{children:n})]})}function MenuList(e){var t=e.items,n=e.boxBounding,a=e.onClick;return Object(ve.b)("div",{className:"menu",style:{transform:"translate(".concat(n.width,"px, -").concat(n.height,"px) ")},children:t&&t.map((function(e){return Object(ve.b)(MenuItem,Object(g.a)(Object(g.a)({},e),{},{onClick:function onClick(){return a(e)}}),"".concat(e.id))}))})}var Ju=function MenuButton(e){var t=e.style,n=e.component,a=e.toolTip,i=void 0===a?"":a,o=e.className,r=e.items,c=void 0===r?[]:r,l=e.onClick,s=void 0===l?function(){return null}:l,u=Object(y.useRef)(),d=Object(y.useState)(!1),b=Object(m.a)(d,2),p=b[0],f=b[1],h=Object(y.useCallback)((function(){f(!1)}),[]),g=Object(y.useCallback)((function(){f((function(e){return!e}))}),[]),j=Object(y.useCallback)((function(e){f(!1),s(e)}),[s]);return Object(ve.c)("div",{style:{height:"auto"},css:qu,children:[Object(ve.b)("button",{ref:u,type:"button",css:t,onClick:g,className:o,style:{boxSizing:"border-box"},children:Object(ve.b)(Ze,{title:i,popupPlacement:"right",children:n})}),p&&Object(ve.b)(MenuList,{items:c,boxBounding:u.current.getBoundingClientRect(),onClick:j}),p&&Object(ve.b)("div",{className:"menu-cover",onClick:h})]})};var $u,Qu=function MoleculeWrapper(e){var t=function Wrapper(t){var n=useChartData(),a=n.data,i=n.activeSpectrum,o=n.molecules,r=n.displayerMode,c=n.activeTab,l=Object(y.useMemo)((function(){return a&&i&&i.id?a.find((function(e){return e.id===i.id}))||{ranges:{},zones:{}}:{}}),[i,a]),s=l.ranges,u=void 0===s?{}:s,d=l.zones,b=void 0===d?{}:d,p=t.forwardedRef,f=Object(de.a)(t,["forwardedRef"]);return Object(P.jsx)(e,Object(g.a)(Object(g.a)({},f),{},{ranges:u,zones:b,molecules:o,displayerMode:r,activeTab:c,ref:p}))};return Object(y.memo)(Object(y.forwardRef)((function(e,n){return Object(P.jsx)(t,Object(g.a)(Object(g.a)({},e),{},{forwardedRef:n}))})))},ed=Object(v.b)($u||($u=Object(j.a)(["\n  -moz-box-shadow: inset 0px 1px 0px 0px #ffffff;\n  -webkit-box-shadow: inset 0px 1px 0px 0px #ffffff;\n  box-shadow: inset 0px 1px 0px 0px #ffffff;\n  background: -webkit-gradient(\n    linear,\n    left top,\n    left bottom,\n    color-stop(0.05, #ffffff),\n    color-stop(1, #f6f6f6)\n  );\n  background: -moz-linear-gradient(top, #ffffff 5%, #f6f6f6 100%);\n  background: -webkit-linear-gradient(top, #ffffff 5%, #f6f6f6 100%);\n  background: -o-linear-gradient(top, #ffffff 5%, #f6f6f6 100%);\n  background: -ms-linear-gradient(top, #ffffff 5%, #f6f6f6 100%);\n  background: linear-gradient(to bottom, #ffffff 5%, #f6f6f6 100%);\n  filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#ffffff', endColorstr='#f6f6f6',GradientType=0);\n  background-color: #ffffff;\n  border: 0.55px solid #dcdcdc;\n  display: inline-block;\n  cursor: pointer;\n  color: #666666;\n  font-weight: bold;\n  padding: 6px 24px;\n  text-decoration: none;\n  text-shadow: 0px 1px 0px #ffffff;\n\n  :hover {\n    background: -webkit-gradient(\n      linear,\n      left top,\n      left bottom,\n      color-stop(0.05, #f6f6f6),\n      color-stop(1, #ffffff)\n    );\n    background: -moz-linear-gradient(top, #f6f6f6 5%, #ffffff 100%);\n    background: -webkit-linear-gradient(top, #f6f6f6 5%, #ffffff 100%);\n    background: -o-linear-gradient(top, #f6f6f6 5%, #ffffff 100%);\n    background: -ms-linear-gradient(top, #f6f6f6 5%, #ffffff 100%);\n    background: linear-gradient(to bottom, #f6f6f6 5%, #ffffff 100%);\n    filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#f6f6f6', endColorstr='#ffffff',GradientType=0);\n    background-color: #f6f6f6;\n  }\n"])));var td=function MoleculeStructureEditorModal(e){var t=e.onClose,n=e.open,a=e.selectedMolecule,i=Object(y.useState)(null),o=Object(m.a)(i,2),r=o[0],c=o[1],l=useDispatch();Object(y.useEffect)((function(){c(a?a.molfile:null)}),[a,n]);var s=Object(y.useCallback)((function(e){c(e)}),[c]),u=Object(y.useCallback)((function(){t()}),[t]),d=Object(y.useCallback)((function(){a?(l({type:Zt,molfile:r,key:a.key}),t("replace")):(l({type:Yt,molfile:r}),t("new"))}),[l,a,r,t]);return Object(ve.c)(re,{open:n,onClose:u,children:[Object(ve.b)(Ws.b,{initialMolfile:a&&a.molfile,svgMenu:!0,fragment:!1,onChange:s}),Object(ve.c)("div",{style:{display:"flex",alignItems:"flex-end",justifyContent:"flex-end",margin:5},children:[Object(ve.b)("button",{type:"button",css:ed,onClick:u,children:"Close"}),Object(ve.b)("button",{type:"button",css:ed,onClick:d,children:"Save"})]})]})};var nd=function IsotopesViewer(e){var t=e.value,n=void 0===t?"":t,a=Object(de.a)(e,["value"]);return Object(P.jsx)("div",Object(g.a)(Object(g.a)({},a),{},{dangerouslySetInnerHTML:{__html:n.replace(/([0-9]+)/g,"<sup>$1</sup>")}}))},ad=function FormikSelect(e){var t=e.name,n=e.value,a=e.onChange,i=Object(de.a)(e,["name","value","onChange"]),o=Object(Wc.f)(),r=o.values,c=o.setFieldValue,l=Object(y.useCallback)((function(e){a(e),c(t,e)}),[t,a,c]);return Object(y.useEffect)((function(){n&&c(t,n)}),[t,c,n]),Object(P.jsx)(Nl,Object(g.a)({name:t,defaultValue:n||x()(r,t),onChange:l},i))};ad.defaultProps=Nl.defaultProps;var id,od,rd=ad,cd=Object(v.b)(id||(id=Object(j.a)(['\n  overflow: auto;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n\n  .header {\n    text-align: center;\n    padding: 10px 0 10px 0px;\n    margin: 0px;\n    color: #005d9e;\n    place-items: normal;\n    text-transform: none;\n    background-color: #fcfcfc;\n  }\n\n  .tab-content {\n    width: 100%;\n  }\n  .row {\n    display: flex;\n  }\n\n  .inner-content {\n    padding: 15px 30px;\n    width: 100%;\n    overflow: auto;\n  }\n\n  button:focus {\n    outline: none;\n  }\n  button:hover {\n    color: #007bff;\n  }\n  .save-button:hover {\n    background-color: #ffffff;\n  }\n  .save-button {\n    border: none;\n    padding: 0 15px;\n    background-color: #ffffff5e;\n    border-radius: 5px;\n    height: 25px;\n  }\n\n  .footer-container {\n    display: flex;\n    align-items: flex-end;\n    justify-content: flex-end;\n    background: rgb(242, 242, 242);\n    background: -moz-linear-gradient(\n      0deg,\n      rgba(242, 242, 242, 1) 0%,\n      rgba(245, 245, 245, 1) 37%,\n      rgba(255, 255, 255, 1) 90%\n    );\n    background: -webkit-linear-gradient(\n      0deg,\n      rgba(242, 242, 242, 1) 0%,\n      rgba(245, 245, 245, 1) 37%,\n      rgba(255, 255, 255, 1) 90%\n    );\n    background: linear-gradient(\n      0deg,\n      rgba(242, 242, 242, 1) 0%,\n      rgba(245, 245, 245, 1) 37%,\n      rgba(255, 255, 255, 1) 90%\n    );\n    filter: progid:DXImageTransform.Microsoft.gradient(startColorstr="#f2f2f2",endColorstr="#ffffff",GradientType=1);\n    padding: 6px 15px;\n    height: 55px;\n  }\n\n  .section-header {\n    font-size: 13px;\n    color: #2ca8ff;\n    margin-bottom: 10px;\n    border-bottom: 0.55px solid #f9f9f9;\n    padding: 6px 2px;\n  }\n\n  .custom-label {\n    font-size: 12px;\n    font-weight: bold;\n    margin-right: 10px;\n    width: 120px;\n  }\n  .margin-10 {\n    margin: 10px 0;\n  }\n\n  .input {\n    font-size: 14px;\n    border-radius: 5px;\n    border: 1px solid #cccccc;\n    padding: 5px;\n    width: 100px;\n    margin-right: 10px;\n    height: initial !important;\n  }\n\n  .close-bt {\n    border: none;\n    color: red;\n    background-color: transparent;\n    outline: none;\n    position: absolute;\n    right: 10px;\n    top: 2px;\n    width: 30px;\n    height: 30px;\n  }\n']))),ld=Object(v.b)(od||(od=Object(j.a)(["\n  .row {\n    align-items: center;\n  }\n\n  .inner-content {\n    flex: 1;\n  }\n\n  .custom-label {\n    width: 155px;\n  }\n"]))),sd=[{key:1,value:60,label:"60 MHz"},{key:2,value:100,label:"100 MHz"},{key:3,value:200,label:"200 MHz"},{key:4,value:300,label:"300 MHz"},{key:5,value:400,label:"400 MHz"},{key:6,value:500,label:"500 MHz"},{key:7,value:600,label:"600 MHz"},{key:8,value:800,label:"800 MHz"},{key:9,value:1e3,label:"1000 MHz"},{key:10,value:1200,label:"1200 MHz"}],ud={"1h":{from:-1,to:12},"13c":{from:-5,to:220},frequency:400,spectra:{"1h":!0,"13c":!1,cosy:!1,hsqc:!1,hmbc:!1}};var dd,bd,pd,fd=function PredictSpectraModal(e){var t=e.onClose,n=e.molfile,a=Object(y.useRef)(),i=useDispatch(),o=Object(y.useCallback)((function(){a.current.submitForm()}),[]),r=Object(y.useCallback)((function(e){i({type:On,isLoading:!0}),i({type:na,payload:{mol:n,options:e}}),t()}),[i,n,t]);return Object(ve.c)("div",{css:[cd,ld],children:[Object(ve.c)("div",{className:"header handle",children:[Object(ve.b)("span",{children:"Predict Spectra"}),Object(ve.b)(Ge,{onClick:t,className:"close-bt"})]}),Object(ve.b)("div",{className:"inner-content",children:Object(ve.c)(qc,{ref:a,initialValues:ud,onSubmit:r,children:[Object(ve.c)("div",{className:"row margin-10",children:[Object(ve.b)("span",{className:"custom-label",children:"Spectrometer Frequency :"}),Object(ve.b)(rd,{data:sd,style:{width:290,height:30,margin:0},name:"frequency"})]}),Object(ve.c)("div",{className:"row margin-10",children:[Object(ve.b)(nd,{value:"1H",className:"custom-label"}),Object(ve.b)(gl,{label:"From",name:"1h.from",type:"number",style:{label:{padding:"0 10px 0 0"}}}),Object(ve.b)(gl,{label:"To",name:"1h.to",type:"number",style:{label:{padding:"0 10px"}}})]}),Object(ve.c)("div",{className:"row margin-10",children:[Object(ve.b)(nd,{value:"13C",className:"custom-label"}),Object(ve.b)(gl,{label:"From",name:"13c.from",type:"number",style:{label:{padding:"0 10px 0 0"}}}),Object(ve.b)(gl,{label:"To",name:"13c.to",type:"number",style:{label:{padding:"0 10px"}}})]}),Object(ve.b)("div",{className:"row margin-10",children:Object(ve.b)("span",{className:"custom-label",children:"Spectra "})}),Object(ve.c)("div",{className:"row margin-10",style:{justifyContent:"space-between"},children:[Object(ve.c)("div",{className:"row",children:[Object(ve.b)(dl,{name:"spectra.1h"}),Object(ve.b)(nd,{value:"1H",style:{padding:" 0 10px"}})]}),Object(ve.c)("div",{className:"row",children:[Object(ve.b)(dl,{disabled:!0,name:"spectra.13c"}),Object(ve.b)(nd,{value:"13C",style:{padding:" 0 10px"}})]}),Object(ve.c)("div",{className:"row",children:[Object(ve.b)(dl,{disabled:!0,name:"spectra.cosy"}),Object(ve.b)(nd,{value:"cosy",style:{padding:" 0 10px"}})]}),Object(ve.c)("div",{className:"row",children:[Object(ve.b)(dl,{disabled:!0,name:"spectra.hsqc"}),Object(ve.b)(nd,{value:"HSQC",style:{padding:" 0 10px"}})]}),Object(ve.c)("div",{className:"row",children:[Object(ve.b)(dl,{disabled:!0,name:"spectra.hmbc"}),Object(ve.b)(nd,{value:"HMBC",style:{padding:" 0 10px"}})]})]})]})}),Object(ve.b)("div",{className:"footer-container",children:Object(ve.b)("button",{type:"button",onClick:o,className:"save-button",children:"Start Predicting"})})]})},hd=function extractFromAtom(e,t,n){if(t.length>0&&Object.keys(e).length>0){var a="x"===n?0:"y"===n?1:void 0;if(void 0===a)return{oclIDs:[e.oclID].concat(e.hydrogenOCLIDs),nbAtoms:e.nbAtoms+e.nbAtoms*e.nbHydrogens};if(t[a]===e.atomLabel)return{oclIDs:[e.oclID],nbAtoms:e.nbAtoms};if("H"===t[a])return{oclIDs:e.hydrogenOCLIDs,nbAtoms:e.nbAtoms*e.nbHydrogens}}return{oclIDs:[],nbAtoms:0}},gd=function findDatumAndSignalIndex(e,t){var n,a=e.find((function(e){return e.id===t}));if(!a)for(var i=0;i<e.length;i++)if((n=e[i].signal.findIndex((function(e){return e.id===t})))>=0){a=e[i];break}return{datum:a,signalIndex:n}},md=Object(v.b)(dd||(dd=Object(j.a)(["\n  display: flex;\n  flex-direction: column;\n  flex-grow: 1;\n  width: 100%;\n  height: 100%;\n"]))),jd=Object(v.b)(bd||(bd=Object(j.a)(["\n  display: flex;\n  flex-direction: row;\n  border-bottom: 0.55px solid rgb(240, 240, 240);\n  padding: 0px 5px;\n\n  button svg {\n    fill: #4e4e4e;\n  }\n\n  button {\n    background-color: transparent;\n    border: none;\n    padding: 5px;\n  }\n\n  p {\n    margin: 0;\n    text-align: right;\n    width: 100%;\n    line-height: 22px;\n    padding: 0px 10px;\n  }\n"]))),vd=Object(v.b)(pd||(pd=Object(j.a)(["\n  width: 100%;\n  height: 100%;\n\n  .slider {\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n    height: 100%;\n    padding: 0px;\n    .mol-svg-container {\n      height: calc(100% - 25px);\n      width: 100%;\n      div {\n        width: 100%;\n        height: 100%;\n      }\n    }\n\n    p {\n      width: 100%;\n      margin: 0 auto;\n      display: block;\n      position: relative;\n      text-align: center;\n    }\n\n    svg polygon {\n      fill: gray !important;\n    }\n  }\n"]))),Od=[{id:"molfile",icon:Object(ve.b)(He.e,{}),label:"Copy as molfile"},{id:"png",icon:Object(ve.b)(He.q,{}),label:"Copy as PNG"},{id:"svg",icon:Object(ve.b)(He.h,{}),label:"Export as SVG"}];function MoleculePanel(e){var t=e.zones,n=e.ranges,a=e.molecules,i=e.activeTab,o=e.displayerMode,r=Object(Gs.a)(),c=Object(m.a)(r,2),l=c[0],s=c[1],u=s.width,d=s.height,b=Object(y.useState)(!1),p=Object(m.a)(b,2),f=p[0],h=p[1],g=Object(y.useState)(),j=Object(m.a)(g,2),v=j[0],O=j[1],x=Object(y.useState)(0),C=Object(m.a)(x,2),k=C[0],S=C[1],D=Object(y.useState)([]),w=Object(m.a)(D,2),T=w[0],M=w[1],A=Object(y.useState)(null),E=Object(m.a)(A,2),P=E[0],I=E[1],F=useDispatch(),R=gc(),N=te(),_=Object(ri.d)(),L=useAssignmentData(),z=Object(y.useState)([]),H=Object(m.a)(z,2),B=H[0],X=H[1];Object(y.useEffect)((function(){if(i){var e=i.split(",");1===e.length?X([i.replace(/[0-9]/g,"")]):2===e.length&&X(e.map((function(e){return e.replace(/[0-9]/g,"")})))}else X([])}),[i]);var V=useAssignment(void 0!==L.assignment.activeID?L.assignment.activeID:"___"),Y=Object(y.useMemo)((function(){if(t||n){if(o===or.DM_1D&&n&&n.values)return n.values;if(o===or.DM_2D&&t&&t.values)return t.values}return[]}),[o,n,t]),Z=Object(y.useMemo)((function(){var e={x:[],y:[]};for(var t in L.assignment.assignment){var n,a;if(L.assignment.assignment[t].x)(n=e.x).push.apply(n,Object(wi.a)(L.assignment.assignment[t].x));if(L.assignment.assignment[t].y)(a=e.y).push.apply(a,Object(wi.a)(L.assignment.assignment[t].y))}return e}),[L.assignment]),K=Object(y.useMemo)((function(){return Z.x.concat(Z.y)}),[Z.x,Z.y]),W=Object(y.useCallback)((function(e,t){return K.some((function(e){return t.oclIDs.includes(e)}))&&!e.some((function(e){return t.oclIDs.includes(e)}))?(R.info("Atom is already assigned to another signal!"),e):function toggleDiaIDs(e,t){var n=e?e.slice():[];if(1===t.oclIDs.length)if(n.includes(t.oclIDs[0]))n=n.filter((function(e){return e!==t.oclIDs[0]}));else for(var a=0;a<t.nbAtoms;a++)n.push(t.oclIDs[0]);else t.oclIDs.length>1&&t.oclIDs.forEach((function(e){n.includes(e)?n=n.filter((function(t){return t!==e})):n.push(e)}));return n}(e,t)}),[R,K]),G=Object(y.useCallback)((function(e){if(V.isActive){var t=hd(e,B,V.activeAxis);if(t.nbAtoms>0){t.oclIDs.forEach((function(e){V.toggle(e)}));var n=gd(Y,V.id),a=n.datum,i=n.signalIndex;if(a){var r=[];void 0===i?o===or.DM_1D?r=W(a.diaID||[],t):o===or.DM_2D&&(r=W(a[V.activeAxis].diaID||[],t)):a.signal&&a.signal[i]&&(o===or.DM_1D?r=W(a.signal[i].diaID||[],t):o===or.DM_2D&&(r=W(a.signal[i][V.activeAxis].diaID||[],t))),o===or.DM_1D?F({type:Yn,payload:{rangeData:a,diaID:r,signalIndex:i}}):o===or.DM_2D&&F({type:ta,payload:{zoneData:a,diaID:r,axis:V.activeAxis,signalIndex:i}})}}else R.info("Not assigned! Different atom type or no attached hydrogens found!")}}),[V,R,Y,F,o,B,W]),q=Object(y.useMemo)((function(){return function getCurrentDiaIDsToHighlight(e,t){var n=e.assignment.isOnHover?e.assignment.assignment[e.assignment.onHoverID]:null,a=e.assignment.isOnHover?e.assignment.onHoverAxis:null;return n?t===or.DM_1D?n.x||[]:t===or.DM_2D?a?"x"===a?n.x||[]:"y"===a?n.y||[]:(n.x||[]).concat(n.y||[]):(n.x||[]).concat(n.y||[]):[]:[]}(L,o)}),[L,o]);Object(y.useEffect)((function(){P&&("show"===P?_.dispatch({type:"SHOW",payload:{convertedHighlights:T}}):"hide"===P&&(_.dispatch({type:"HIDE",payload:{convertedHighlights:T}}),M([])),I(null))}),[P,T,_]);var J=Object(y.useCallback)((function(e){var t=hd(e,B,V.activeAxis).oclIDs;if(t.length>0){var n=function getHighlightsOnHover(e,t,n){var a=[];for(var i in e.assignment.assignment){var o=void 0,r=void 0,c=!1;if(e.assignment.assignment[i].x&&e.assignment.assignment[i].x.some((function(e){return t.includes(e)}))){a=a.concat(e.assignment.assignment[i].x);var l=gd(n,i);o=l.datum,r=l.signalIndex,c=!0}if(e.assignment.assignment[i].y&&e.assignment.assignment[i].y.some((function(e){return t.includes(e)}))){a=a.concat(e.assignment.assignment[i].y);var s=gd(n,i);o=s.datum,r=s.signalIndex,c=!0}if(o&&(a.push(o.id),void 0!==r&&a.push(o.signal[r].id)),c)break}return a}(L,t,Y);M(n),I("show")}else I("hide")}),[V.activeAxis,L,Y,B]),$=Object(y.useCallback)((function(e){h(!1),"new"===e&&S(a.length)}),[a.length]),Q=Object(y.useCallback)((function(e,t,n){O(n?{molfile:n,key:t}:null),h(!0)}),[]),ee=Object(y.useCallback)((function(){navigator.clipboard.readText().then((function(e){F({type:Yt,molfile:e})}))}),[F]),ne=Object(y.useCallback)((function(){a[k]&&a[k].key&&(S(0),F({type:Ut,payload:{key:a[k].key,assignmentData:L}}))}),[a,k,L,F]),ae=Object(y.useCallback)((function(){Object(xc.h)("molFile","molSVG".concat(k))}),[k]),ie=Object(y.useCallback)((function(){Object(xc.b)("molSVG".concat(k)),R.success("MOL copied as PNG to clipboard")}),[R,k]),oe=Object(y.useCallback)((function(){a[k]&&(Object(xc.c)(a[k].molfile)?R.success("MOLFile copied to clipboard"):R.error("copied not completed"))}),[R,k,a]),re=Object(y.useCallback)((function(e,t){F({type:Zt,molfile:t,key:e})}),[F]),ce=Object(y.useCallback)((function(){N.show(Object(ve.b)(fd,{onSave:function onSave(){N.close()},molfile:a[k]}),{position:U.TOP_CENTER,enableResizing:!0,width:600,height:350})}),[N,a,k]),le=Object(y.useCallback)((function(e){switch(e.id){case"molfile":oe();break;case"png":ie();break;case"svg":ae()}}),[oe,ie,ae]);return Object(ve.c)("div",{css:md,children:[Object(ve.c)("div",{css:jd,children:[Object(ve.b)(Ju,{component:Object(ve.b)(He.p,{}),toolTip:"Export As",items:Od,onClick:le}),Object(ve.b)(Ze,{title:"Paste molfile",popupPlacement:"left",children:Object(ve.b)("button",{className:"bar-button",type:"button",onClick:ee,children:Object(ve.b)(He.x,{})})}),Object(ve.b)(Ze,{title:"Add Molecule",popupPlacement:"left",children:Object(ve.b)("button",{className:"bar-button",type:"button",onClick:Q,children:Object(ve.b)(He.y,{})})}),Object(ve.b)(Ze,{title:"Delete Molecule",popupPlacement:"left",children:Object(ve.b)("button",{className:"bar-button",type:"button",onClick:ne,children:Object(ve.b)(He.B,{})})}),Object(ve.b)(Gu,{popupTitle:"Predict Spectra",popupPlacement:"left",onClick:ce,disabled:!a||0===a.length,children:Object(ve.b)(Rs.h,{})}),Object(ve.c)("p",{children:[a&&a.length>0&&"".concat(+(k+1)," / ").concat(a.length)," "]})]}),Object(ve.c)("div",{css:vd,children:[Object(ve.b)($s,{onChange:function onChange(e){return S(e)},defaultIndex:k,children:a&&a.length>0?a.map((function(e,t){return Object(ve.c)("div",{className:"slider",onDoubleClick:function onDoubleClick(t){return Q(t,e.key,e.molfile)},style:{backgroundColor:(t+1)%2!==0?"#fafafa":"white"},children:[Object(ve.b)("div",{className:"mol-svg-container",ref:l,children:Object(ve.b)(Ku.a,{OCL:Dc.a,id:"molSVG".concat(t),width:u>0?u:100,height:d>0?d:100,molfile:e.molfile,setMolfile:function setMolfile(t){return re(e.key,t)},setSelectedAtom:G,atomHighlightColor:q&&q.length>0?"red":"#FFD700",atomHighlightOpacity:.35,highlights:q&&q.length>0?q:K,setHoverAtom:J})}),Object(ve.c)("p",{children:[Object(ve.b)(zr.a,{mf:e.mf})," - ",e.mw.toFixed(2)]})]},e.key)})):Object(ve.b)("div",{style:{width:"100%",height:"100%"},onClick:Q})}),Object(ve.b)(td,{open:f,onClose:$,selectedMolecule:v})]})]})}var xd=Qu(Object(y.memo)(MoleculePanel)),yd=n(93),Cd=n(684),kd=n.n(Cd);var Sd="NORMAL",Dd="FORMULA",wd={};function addColumnKey(e,t,n,a){var i=Object.keys(e[t].options.columns).length,o=a||function getChar(e){for(var t="a".charCodeAt(0),n="z".charCodeAt(0)-t+1,a="";e>=0;)a=String.fromCharCode(e%n+t)+a,e=Math.floor(e/n)-1;return a}(i).toUpperCase();return e[t].options.columns[o]=n,o}function getSpectraAnalysis(e,t){var n=t.from,a=t.to,i=t.nucleus;return e.reduce((function(e,t){if(1===t.info.dimension&&t.info.nucleus===i&&!t.info.isFid){var o=function detectRange(e,t){var n=t.from,a=t.to,i=e.data,o=i.x,r=i.re,c=Object(_e.k)({x:o,y:r},{from:n,to:a,reverse:!0}),l=Object(_e.m)({x:o,y:r},{from:n,to:a}).y,s=Object(_e.l)({x:o,y:r},{from:n,to:a}).y,u=getShiftX(e);return{id:generateID(),originFrom:n-u,originTo:a-u,from:n,to:a,absolute:c,min:l,max:s}}(t,{from:n,to:a});e.sum+=o.absolute,e.values.push(Object(g.a)({SID:t.id},o))}return e}),{values:[],sum:0})}function init(e,t){void 0===e[t]&&(e[t]={options:{sum:100,code:null,columns:{}},values:{}})}function refreshCalculation(e,t){var n=e[t].options.columns;return Object.entries(e[t].values).reduce((function(e,t){var a=Object(m.a)(t,2),i=a[0],o=a[1];return e[i]=Object(g.a)(Object(g.a)({},o),function refreshByRow(e,t){return Object.keys(t).reduce((function(n,a){return t[a].type===Dd&&(n[a]=Object(g.a)(Object(g.a)({colKey:a},e),{},{value:calculate(t,e,t[a].formula)})),n}),{})}(o,n)),e}),{})}function analyzeSpectra(e,t,n){var a=n.from,i=n.to,o=n.nucleus,r=n.columnKey,c=void 0===r?null:r;init(t,o);var l=addColumnKey(t,o,{type:Sd,valueKey:"relative",from:a,to:i,index:1},c),s=t[o].options.sum,u=getSpectraAnalysis(e,{from:a,to:i,nucleus:o}),d=u.values,b=u.sum,p=x()(t,"".concat(o,".values"),{}),f=d.reduce((function(e,t){var n=b>0?s/b:0;return e[t.SID]=Object(g.a)(Object(g.a)({},p[t.SID]),{},Object(ce.a)({},l,Object(g.a)(Object(g.a)({colKey:l},t),{},{relative:Math.abs(t.absolute)*n}))),e}),{});t[o].values=f,t[o].values=refreshCalculation(t,o)}function calculate(e,t){var n,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"A+B",i=a.split(/\+|-|\*|\/|%|\(|\)/),o=[],r=Object(Yr.a)(i);try{for(r.s();!(n=r.n()).done;){var c=n.value,l=c.trim();e[l]&&o.push(l)}}catch(d){r.e(d)}finally{r.f()}var s,u=o.map((function(n){return t[n]?t[n][e[n].valueKey]:null}));try{s=Object(yd.a)(Function,o.concat(["return ".concat(a)])).apply(void 0,Object(wi.a)(u))}catch(b){console.log(b),s=new Error("Invalid Formula ( ".concat(a," ) "))}return s}var Td={"1H":{tms:{from:-.1,to:.1,nbPeaks:1,delta:0},tsp:{from:-.1,to:.1,nbPeaks:1,delta:0},glucose:{from:5.18,to:5.28,nbPeaks:2,delta:5.23}},"13C":{}};var Md=[{key:1,value:"manual",label:"Manual"}];var Ad=function AlignSpectraModal(e){var t=e.onClose,n=e.nucleus,a=Object(y.useRef)(),i=useDispatch(),o=Object(y.useMemo)((function(){var e=Td[n]?Object.entries(Td[n]).map((function(e){return{key:e[0],value:e[0],label:e[0]}}),[]):[];return Md.concat(e)}),[n]),r=Object(y.useCallback)((function(){a.current.submitForm()}),[]),c=Object(y.useCallback)((function(e){i({type:Jn,payload:e}),t()}),[i,t]);Object(y.useEffect)((function(){return ti.on("brushEnd",(function(e){var t=Object(m.a)(e.range,2),n=t[0],i=t[1];a.current.setValues(Object(g.a)(Object(g.a)({},a.current.values),{},{from:n,to:i}))})),function(){ti.off("brushEnd")}}),[]);var l=Object(y.useCallback)((function(e){var t=Td[n][e]||{delta:0},i=t.delta,o=void 0===i?0:i,r=Object(de.a)(t,["delta"]);a.current.setValues(Object(g.a)(Object(g.a)({},a.current.values),{},{targetX:o},r))}),[n]);return Object(ve.c)("div",{css:cd,children:[Object(ve.c)("div",{className:"header handle",children:[Object(ve.b)("span",{children:"Spectra calibration"}),Object(ve.b)(Ge,{onClick:t,className:"close-bt"})]}),Object(ve.b)("div",{className:"inner-content",children:Object(ve.c)(qc,{ref:a,initialValues:{from:-1,to:1,nbPeaks:1,targetX:0},onSubmit:c,children:[Object(ve.c)("div",{className:"row margin-10",children:[Object(ve.b)("span",{className:"custom-label",children:"Options :"}),Object(ve.b)(Nl,{data:o,style:{width:270,height:30,marginBottom:"20px"},onChange:l})]}),Object(ve.c)("div",{className:"row margin-10",children:[Object(ve.b)("span",{className:"custom-label",children:"Range :"}),Object(ve.b)(gl,{label:"From : ",name:"from",type:"number"}),Object(ve.b)(gl,{label:"To :",name:"to",type:"number"})]}),Object(ve.c)("div",{className:"row margin-10",children:[Object(ve.b)("span",{className:"custom-label",children:"Number of Peaks : "}),Object(ve.b)(gl,{name:"nbPeaks",type:"number"})]}),Object(ve.c)("div",{className:"row margin-10",children:[Object(ve.b)("span",{className:"custom-label",children:"Target PPM :"}),Object(ve.b)(gl,{name:"targetX",type:"number"})]})]})}),Object(ve.b)("div",{className:"footer-container",children:Object(ve.b)("button",{type:"button",onClick:r,className:"save-button",children:"Done"})})]})};function EquallySpacedFilter(e,t){var n=e.onSubmit,a=useChartData().xDomain;return Object(P.jsxs)(qc,{ref:t,initialValues:{from:a[0],to:a[1],numberOfPoints:1024},onSubmit:n,children:[Object(P.jsxs)("div",{className:"row margin-10",children:[Object(P.jsx)("span",{className:"custom-label",children:"Range :"}),Object(P.jsx)(gl,{label:"From : ",name:"from",type:"number"}),Object(P.jsx)(gl,{label:"To :",name:"to",type:"number"})]}),Object(P.jsxs)("div",{className:"row margin-10",children:[Object(P.jsx)("span",{className:"custom-label",children:"Number of points :"}),Object(P.jsx)(gl,{label:"",name:"numberOfPoints",type:"number"})]})]})}var Ed=Object(y.forwardRef)(EquallySpacedFilter);function FromToFilter(e,t){var n=e.onSubmit,a=useChartData().xDomain;return Object(P.jsx)(qc,{ref:t,initialValues:{from:a[0],to:a[1]},onSubmit:n,children:Object(P.jsxs)("div",{className:"row margin-10",children:[Object(P.jsx)("span",{className:"custom-label",children:"Range :"}),Object(P.jsx)(gl,{label:"From : ",name:"from",type:"number"}),Object(P.jsx)(gl,{label:"To :",name:"to",type:"number"})]})})}var Pd,Id=Object(y.forwardRef)(FromToFilter),Fd=[{key:0,value:0,label:"Select Filter"},{key:Ba.fromTo.id,value:Ba.fromTo.id,label:Ba.fromTo.name},{key:Ba.equallySpaced.id,value:Ba.equallySpaced.id,label:Ba.equallySpaced.name}],Rd=Object(v.b)(Pd||(Pd=Object(j.a)(["\n  .row {\n    align-items: center;\n  }\n"])));var Nd,_d=function MultipleSpectraFiltersModal(e){var t=e.onClose,n=e.nucleus,a=Object(y.useRef)(),i=useDispatch(),o=Object(y.useState)(0),r=Object(m.a)(o,2),c=r[0],l=r[1],s=Object(y.useMemo)((function(){var e=Td[n]?Object.entries(Td[n]).map((function(e){return{key:e[0],value:e[0],label:e[0]}}),[]):[];return Fd.concat(e)}),[n]),u=Object(y.useCallback)((function(){a.current&&a.current.submitForm()}),[]),d=Object(y.useCallback)((function(e){i({type:ra,payload:[{name:c,options:e}]}),t()}),[i,c,t]);Object(y.useEffect)((function(){return ti.on("brushEnd",(function(e){var t=Object(m.a)(e.range,2),n=t[0],i=t[1];a.current&&a.current.setValues(Object(g.a)(Object(g.a)({},a.current.values),{},{from:n,to:i}))})),function(){ti.off("brushEnd")}}),[]);var b=Object(y.useCallback)((function(e){l(e)}),[]),p=Object(y.useMemo)((function(){switch(c){case Ba.fromTo.id:return Object(ve.b)(Id,{onSubmit:d,ref:a});case Ba.equallySpaced.id:return Object(ve.b)(Ed,{onSubmit:d,ref:a})}}),[c,d]);return Object(ve.c)("div",{css:[cd,Rd],children:[Object(ve.c)("div",{className:"header handle",children:[Object(ve.b)("span",{children:"Spectra calibration"}),Object(ve.b)(Ge,{onClick:t,className:"close-bt"})]}),Object(ve.c)("div",{className:"inner-content",children:[Object(ve.c)("div",{className:"row margin-10",children:[Object(ve.b)("span",{className:"custom-label",children:"Filter :"}),Object(ve.b)(Nl,{data:s,style:{width:275,height:30,margin:0},onChange:b})]}),p]}),Object(ve.b)("div",{className:"footer-container",children:Object(ve.b)("button",{type:"button",onClick:u,className:"save-button",children:"Done"})})]})},Ld=n(732),zd=n(706),Hd=(n(707),n(708),n(709)),Bd=n.n(Hd),Xd=Object(v.b)(Nd||(Nd=Object(j.a)(["\n  code[class*='language-'],\n  pre[class*='language-'] {\n    color: black;\n    background: none;\n    text-shadow: 0 1px white;\n    font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;\n    font-size: 1em;\n    text-align: left;\n    white-space: pre;\n    word-spacing: normal;\n    word-break: normal;\n    word-wrap: normal;\n    line-height: 1.5;\n\n    -moz-tab-size: 4;\n    -o-tab-size: 4;\n    tab-size: 4;\n\n    -webkit-hyphens: none;\n    -moz-hyphens: none;\n    -ms-hyphens: none;\n    hyphens: none;\n  }\n\n  pre[class*='language-']::-moz-selection,\n  pre[class*='language-'] ::-moz-selection,\n  code[class*='language-']::-moz-selection,\n  code[class*='language-'] ::-moz-selection {\n    text-shadow: none;\n    background: #b3d4fc;\n  }\n\n  pre[class*='language-']::selection,\n  pre[class*='language-'] ::selection,\n  code[class*='language-']::selection,\n  code[class*='language-'] ::selection {\n    text-shadow: none;\n    background: #b3d4fc;\n  }\n\n  @media print {\n    code[class*='language-'],\n    pre[class*='language-'] {\n      text-shadow: none;\n    }\n  }\n\n  /* Code blocks */\n  pre[class*='language-'] {\n    padding: 1em;\n    margin: 0.5em 0;\n    overflow: auto;\n  }\n\n  :not(pre) > code[class*='language-'],\n  pre[class*='language-'] {\n    background: #f5f2f0;\n  }\n\n  /* Inline code */\n  :not(pre) > code[class*='language-'] {\n    padding: 0.1em;\n    border-radius: 0.3em;\n    white-space: normal;\n  }\n\n  .token.comment,\n  .token.prolog,\n  .token.doctype,\n  .token.cdata {\n    color: slategray;\n  }\n\n  .token.punctuation {\n    color: #999;\n  }\n\n  .token.namespace {\n    opacity: 0.7;\n  }\n\n  .token.property,\n  .token.tag,\n  .token.boolean,\n  .token.number,\n  .token.constant,\n  .token.symbol,\n  .token.deleted {\n    color: #905;\n  }\n\n  .token.selector,\n  .token.attr-name,\n  .token.string,\n  .token.char,\n  .token.builtin,\n  .token.inserted {\n    color: #690;\n  }\n\n  .token.operator,\n  .token.entity,\n  .token.url,\n  .language-css .token.string,\n  .style .token.string {\n    color: #9a6e3a;\n    /* This background color was intended by the author of this theme. */\n    background: hsla(0, 0%, 100%, 0.5);\n  }\n\n  .token.atrule,\n  .token.attr-value,\n  .token.keyword {\n    color: #07a;\n  }\n\n  .token.function,\n  .token.class-name {\n    color: #dd4a68;\n  }\n\n  .token.regex,\n  .token.important,\n  .token.variable {\n    color: #e90;\n  }\n\n  .token.important,\n  .token.bold {\n    font-weight: bold;\n  }\n  .token.italic {\n    font-style: italic;\n  }\n\n  .token.entity {\n    cursor: help;\n  }\n"])));function Evaluate_calculate(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;try{return new Function("args","return ".concat(e))(t)}catch(n){return n}}function MulipleAnalysisCodeEditor(e){var t=e.data,n=Object(Wc.f)(),a=n.values,i=n.setFieldValue,o=Object(y.useState)(a.code?a.code:"function run(data) {\n\n  return JSON.stringify(data,undefined, 2);\n  \n}(args);\n"),r=Object(m.a)(o,2),c=r[0],l=r[1],s=Object(y.useState)(""),u=Object(m.a)(s,2),d=u[0],b=u[1];Object(y.useEffect)((function(){var e=Evaluate_calculate(c,t);e instanceof Error?b(e.message):(i("code",c),b(e))}),[c,t,i]);var p=Object(y.useCallback)((function(e){l(e)}),[]),f=Object(y.useCallback)((function(e){try{return Object(zd.highlight)(e,zd.languages.js)}catch(t){return null}}),[]);return Object(ve.c)("div",{style:{marginTop:"20px"},css:Xd,children:[Object(ve.b)(Bd.a,{value:c,onValueChange:p,highlight:f,padding:10,style:{fontFamily:'"Fira code", "Fira Mono", monospace',fontSize:12,backgroundColor:"#fcfcfc",marginBottom:"10px",minHeight:"100px",overflow:"auto",maxHeight:"200px"}}),Object(ve.b)("p",{style:{marginBottom:"5px"},children:"Result:"}),Object(ve.b)(Bd.a,{value:d,onValueChange:function onValueChange(e){return e},highlight:f,padding:10,style:{border:"0.55px solid #f3f3f3",fontFamily:'"Fira code", "Fira Mono", monospace',fontSize:12,marginBottom:"10px",minHeight:"100px",overflow:"auto",maxHeight:"200px"}})]})}var Vd,Yd=Object(y.memo)(MulipleAnalysisCodeEditor),Zd=Object(v.b)(Vd||(Vd=Object(j.a)(["\n  width: 100%;\n  thead {\n    border-bottom: 1px solid lightgray;\n    background-color: #fafafa;\n    font-size: 12px;\n  }\n\n  td,\n  th {\n    padding: 3px 5px;\n    text-align: center;\n  }\n\n  .operation-col {\n    width: 30px;\n  }\n\n  .input {\n    // border: 0.55px solid rgb(237 237 237) !important;\n    height: 25px !important;\n    width: 100% !important;\n    margin: 0 !important;\n    // text-transform: uppercase;\n  }\n\n  .input.disbale {\n    background-color: #e8e8e8;\n    border-radius: 5px;\n  }\n\n  .label,\n  .index {\n    width: 100px;\n  }\n\n  .counter {\n    width: 50px;\n  }\n\n  .add {\n    background-color: transparent;\n    border: 0;\n    outline: none;\n    svg {\n      font-szie: 14px;\n      fill: green;\n    }\n  }\n"]))),Ud=Object(y.forwardRef)((function MultipleSpectraAnalysisPreferences(e,t){var n=e.data,a=e.onAfterSave,i=useDispatch(),o=Object(y.useRef)(),r=Object(y.useState)({}),c=Object(m.a)(r,2),l=c[0],s=c[1];Object(y.useImperativeHandle)(t,(function(){return{saveSetting:function saveSetting(){o.current.submitForm()}}})),Object(y.useEffect)((function(){var e=Object.keys(n.columns).reduce((function(e,t){return e[t]=Object(g.a)(Object(g.a)({},n.columns[t]),{},{tempKey:t}),e}),{});s(e),o.current.setValues({columns:e,code:n.code})}),[n]);var u=Object(y.useMemo)((function(){return Object.keys(l)}),[l]),d=Object(y.useMemo)((function(){return Ld.a().shape({columns:Ld.a().shape(function columnSchema(){return u.reduce((function(e,t){return e[t]=Ld.a().shape(Object(g.a)(Object(g.a)({tempKey:Ld.b().required().test("unique","must be unique column name",(function(e){var t=o.current.values.columns;return 1===Object.keys(t).reduce((function(n,a){return t[a].tempKey===e&&n.push(e),n}),[]).length}))},l[t].type===Dd?{formula:Ld.b().required()}:{}),{},{index:Ld.b().required()})),e}),{})}())})}),[l,u,o]),b=Object(y.useCallback)((function(e){a(!0);var t=Object.entries(e.columns).reduce((function(e,t){var n=Object(m.a)(t,2),a=n[0],i=n[1];return e[a]=Object(g.a)(Object(g.a)({},l[a]),i),e}),{});i({type:Gn,payload:{code:e.code,columns:t}})}),[l,i,a]),p=Object(y.useCallback)((function(e){s((function(t){return Object(g.a)(Object(g.a)({},t),{},Object(ce.a)({},"temp".concat(e),{tempKey:"",type:"FORMULA",valueKey:"value",formula:"",index:e}))}))}),[]);return Object(ve.c)(qc,{ref:o,initialValues:{columns:l,code:null},validationSchema:d,onSubmit:b,children:[u&&Object(ve.c)("table",{css:Zd,children:[Object(ve.b)("thead",{children:Object(ve.c)("tr",{children:[Object(ve.b)("th",{className:"counter",children:"#"}),Object(ve.b)("th",{className:"label",children:"Label"}),Object(ve.b)("th",{children:"value"}),Object(ve.b)("th",{className:"index",children:"index"})]})}),Object(ve.b)("tbody",{children:u.map((function(e,t){return Object(ve.c)("tr",{children:[Object(ve.b)("td",{className:"counter",children:t+1}),Object(ve.b)("td",{className:"label",children:Object(ve.b)(gl,{name:"columns.".concat(e,".tempKey"),value:l[e].tempKey},e)}),Object(ve.b)("td",{children:l[e].type===Dd?Object(ve.b)(gl,{name:"columns.".concat(e,".formula"),value:l[e].formula}):Object(ve.b)("div",{className:"input disbale"})}),Object(ve.b)("td",{className:"index",children:Object(ve.b)(gl,{name:"columns.".concat(e,".index"),value:l[e].index})}),Object(ve.b)("td",{className:"operation-col",children:u.length===t+1&&Object(ve.b)("button",{className:"add",type:"button",onClick:function onClick(){return p(t+1)},children:Object(ve.b)(He.y,{})})})]},e)}))})]}),Object(ve.b)(Yd,{data:n})]})}));Ud.defaultProps={onAfterSave:function onAfterSave(){return!1}};var Kd,Wd=Ud,Gd=Object(v.b)(Kd||(Kd=Object(j.a)(["\n  background-color: white;\n  position: absolute;\n  height: auto;\n  z-index: 99999999999999;\n  box-shadow: 0 19px 38px rgba(0, 0, 0, 0.3), 0 15px 12px rgba(0, 0, 0, 0.22);\n  border-radius: 10px;\n  margin-bottom: 20px;\n\n  ul {\n    list-style-type: none;\n    padding: 0;\n    margin: 0;\n\n    li {\n      padding: 10px 30px;\n      text-align: center;\n      color: black;\n      border-bottom: 0.55px solid lightgoldenrodyellow;\n      min-width: 150px;\n    }\n\n    li:last-of-type {\n      border-bottom: none;\n    }\n\n    li:hover {\n      background-color: gray;\n      color: white;\n    }\n  }\n"])));var qd,Jd=function DropDownList(e){var t=e.data,n=void 0===t?[]:t,a=e.onSelect;return Object(ve.b)("div",{css:Gd,children:Object(ve.b)("ul",{children:n.map((function(e,t){return Object(ve.b)("li",{onClick:function onClick(){return a(t)},children:e.label},e.key)}))})})},$d=Object(v.b)(qd||(qd=Object(j.a)(["\n  // position: absolute;\n  padding: 2px;\n  border-radius: 10px;\n  width: auto;\n  display: inline-block;\n  border: 0.55px solid lightgray;\n  font-size: 10px;\n\n  button {\n    text-transform: Capitalize;\n  }\n"])));function DropDownButton(e){var t=e.data,n=e.selectedKey,a=e.onSelect,i=e.formatSelectedValue,o=Object(y.useState)(!1),r=Object(m.a)(o,2),c=r[0],l=r[1],s=Object(y.useState)(n),u=Object(m.a)(s,2),d=u[0],b=u[1],p=useGlobal().rootRef,f=Object(y.useRef)(null),h=Object(y.useCallback)((function(e){!e.target.closest(".".concat(f.current.className))&&c&&setTimeout((function(){l(!1)}),0)}),[c]);Object(y.useEffect)((function(){return p&&p.addEventListener("click",h),function(){return p.removeEventListener("click",h)}}),[h,c,p]);var g=Object(y.useCallback)((function(e){b(t[e].label),a(t[e].key)}),[t,a]);return Object(ve.c)("div",{className:"dropdown",ref:f,css:$d,children:[Object(ve.b)("button",{type:"button",onClick:function onClick(){return l((function(e){return!e}))},children:d?i(d):Object(ve.b)(He.j,{})}),c&&Object(ve.b)(Jd,{data:t,onSelect:g})]})}DropDownButton.defaultProps={data:null,formatSelectedValue:function formatSelectedValue(e){return e},value:null};var Qd,eb=DropDownButton,tb=function styles(e){return Object(v.b)(Qd||(Qd=Object(j.a)(["\n  position: relative;\n\n  .delete {\n    position: absolute;\n    right: 0px;\n    top: 0px;\n  }\n\n  .container {\n    display: flex;\n    flex-direction: column;\n    padding: 0;\n    margin: 0;\n  }\n  .dropDown-container {\n    justify-content: flex-start;\n    align-items: flex-start;\n  }\n  .label-container {\n    flex: 1;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    flex-direction: column;\n    min-height: 45px;\n  }\n\n  .label {\n    text-align: center;\n  }\n\n  ","\n"])),e)},nb=[{key:"relative",label:"Relative"},{key:"absolute",label:"Absolute"},{key:"min",label:"Min Intensity"},{key:"max",label:"Max Intensity"}];var ab=function ColumnHeader(e){var t=e.charLabel,n=e.rangeLabel,a=e.data,i=e.onColumnFilter,o=useDispatch(),r=Object(y.useCallback)((function(){o({type:Kn,colKey:t})}),[t,o]);return Object(ve.c)("div",{css:tb,children:[Object(ve.c)("div",{className:"container",children:[a.type===Sd&&Object(ve.b)("div",{className:"dropDown-container",children:Object(ve.b)(eb,{data:nb,formatSelectedValue:function formatSelectedValue(e){return e?e.substr(0,3):e},selectedKey:a.valueKey,onSelect:i})}),Object(ve.c)("div",{className:"label-container",children:[Object(ve.c)("span",{className:"label",children:[" ",t]}),Object(ve.b)("span",{className:"label",children:n})]})]}),Object(ve.b)(Lc,{onDelete:r})]})};function MultipleSpectraAnalysisTable(e){var t=e.data,n=useFormatNumberByNucleus(e.activeTab),a=Object(y.useMemo)((function(){return Evaluate_calculate(x()(t,"code",""),t)}),[t]),i=useDispatch(),o=Object(y.useCallback)((function(e,t){i({type:qn,payload:{columnKey:e,valueKey:t}})}),[i]),r=Object(y.useMemo)((function(){var e=[{Header:"#",index:0,Cell:function Cell(e){return e.row.index+1}}],a=e;return t.columns&&Object.keys(t.columns).forEach((function(e){var i=t.columns[e],r=i.valueKey,c=i.index;!function setCustomColumn(e,a,i,r){var c=t.columns[i];e.push({index:a,Header:function Header(){return Object(P.jsx)(ab,{charLabel:i,data:c,onColumnFilter:function onColumnFilter(e){return o(i,e)},rangeLabel:c.from&&c.to?"".concat(n(c.from)," - ").concat(n(c.to)):""})},id:i,sortType:"basic",Cell:function Cell(e){var t=e.row;return r(t)}})}(a,c+1,e,(function(t){var a=t.original[e][r];return a instanceof Error?Object(P.jsx)("span",{style:{color:"red"},children:a.message}):n(a)}))})),(a||e).sort((function(e,t){return e.index-t.index}))}),[o,t.columns,n]);return t.values&&t.values.length>0?Object(P.jsxs)(y.Fragment,{children:[Object(P.jsx)(Eu,{data:t.values,columns:r}),Object(P.jsx)("div",{style:{width:"100%",padding:"10px"},dangerouslySetInnerHTML:{__html:a}})]}):Object(P.jsx)(Pu,{})}var ib=Object(y.memo)(MultipleSpectraAnalysisTable),ob={container:{display:"flex",flexDirection:"column",height:"100%"},button:{backgroundColor:"transparent",border:"none"}};function MultipleSpectraAnalysisPanel(e){var t=e.spectraAnalysis,n=e.activeTab,a=Object(y.useState)(!1),i=Object(m.a)(a,2),o=i[0],r=i[1],c=Object(y.useRef)(),l=gc(),s=te(),u=useDispatch(),d=Object(y.useMemo)((function(){var e=t[n]||{values:{},options:{columns:{},code:null}},a=e.values,i=e.options,o=i.columns,r=i.code;return{values:Object.values(a),columns:o,code:r}}),[n,t]),b=Object(y.useCallback)((function(){r(!o)}),[o]),p=Object(y.useCallback)((function(){c.current.saveSetting()}),[]),f=Object(y.useCallback)((function(){r(!1)}),[]),h=Object(y.useCallback)((function(e){ti.emit("showYSpectraTrackers",e)}),[]),g=Object(y.useCallback)((function(){u({type:xn}),s.show(Object(P.jsx)(Ad,{nucleus:n}),{isBackgroundBlur:!1,position:U.TOP_CENTER,width:500})}),[n,s,u]),j=Object(y.useCallback)((function(){u({type:xn}),s.show(Object(P.jsx)(_d,{}),{isBackgroundBlur:!1,position:U.TOP_CENTER,width:500})}),[s,u]),v=Object(y.useCallback)((function(){var e=function getDataAsString(e,t){if(e&&e[t]){var n=e[t],a=n.values,i=n.options.columns,o="";for(var r in i)o+="".concat(r,"\t");o+="\n";for(var c=0,l=Object.values(a);c<l.length;c++){var s=l[c];for(var u in i)o+="".concat(s[u][i[u].valueKey],"\t");o+="\n"}return o}return null}(t,n);Object(xc.c)(e)?l.success("Data copied to clipboard"):l.error("copy to clipboard failed")}),[n,l,t]);return Object(P.jsxs)("div",{style:ob.container,children:[!o&&Object(P.jsxs)(ju,{deleteToolTip:"Delete All Peaks",showSettingButton:"true",canDelete:!1,onSettingClick:b,children:[Object(P.jsx)(Gu,{popupTitle:"Copy To Clipboard",style:ob.button,onClick:v,children:Object(P.jsx)(He.p,{})}),Object(P.jsx)(Gu,{popupTitle:"Spectra calibration",style:ob.button,onClick:g,children:Object(P.jsx)(Rs.k,{style:{fontSize:"18px"}})}),Object(P.jsx)(hu,{popupTitle:"Y Spectra Tracker",popupPlacement:"right",onClick:h,children:Object(P.jsx)(Co.a,{})}),Object(P.jsx)(Gu,{popupTitle:"Add Filter",style:ob.button,onClick:j,children:Object(P.jsx)(Rs.b,{style:{fontSize:"18px"}})})]}),o&&Object(P.jsx)(Cu,{onSave:p,onClose:b}),Object(P.jsx)("div",{style:{height:"100%",overflow:"auto"},children:Object(P.jsxs)(_s.a,{isFlipped:o,infinite:!0,containerStyle:{overflow:"hidden"},children:[Object(P.jsx)(ib,{data:d,activeTab:n}),Object(P.jsx)(Wd,{data:d,onAfterSave:f,ref:c})]})})]})}var rb=Yi(Object(y.memo)(MultipleSpectraAnalysisPanel));var cb=function PeaksWrapper(e){var t=function Wrapper(t){var n=useChartData(),a=n.data,i=n.activeSpectrum,o=n.xDomain,r=n.activeTab,c=n.tabActiveSpectrum,l=usePreferences(),s=Object(y.useMemo)((function(){return a&&i&&i.id?a.find((function(e){return e.id===i.id}))||{peaks:{},info:{},data:{}}:{}}),[i,a]),u=s.peaks,d=void 0===u?{}:u,b=s.info,p=void 0===b?{}:b,f=s.data,h=void 0===f?{}:f,m=Object(y.useMemo)((function(){return c&&Object.keys(c).length>0?Object.keys(c):null}),[c]),j=t.forwardedRef,v=Object(de.a)(t,["forwardedRef"]);return Object(P.jsx)(e,Object(g.a)(Object(g.a)({},v),{},{peaks:d,info:p,x:h.x,y:h.y,xDomain:o,preferences:l,activeTab:r,nucleus:m,ref:j}))};return Object(y.forwardRef)((function(e,n){return Object(P.jsx)(t,Object(g.a)(Object(g.a)({},e),{},{forwardedRef:n}))}))},lb={container:{padding:10,backgroundColor:"#f1f1f1",height:"100%"},groupContainer:{padding:"5px",borderRadius:"5px",margin:"10px 0px",backgroundColor:"white"},row:{display:"flex",margin:"5px 0px"},header:{borderBottom:"1px solid #e8e8e8",paddingBottom:"5px",fontWeight:"bold",color:"#4a4a4a"},inputLabel:{flex:2,fontSize:"11px",fontWeight:"bold",color:"#232323"},input:{width:"30%",textAlign:"center"}},sb=[{id:1,label:"Peak Number :",checkController:"showPeakNumber",formatController:"peakNumberFormat",defaultFormat:""},{id:2,label:"Peak Index : ",checkController:"showPeakIndex",formatController:"peakIndexFormat",defaultFormat:""},{id:3,label:"\u03b4 (ppm) :",checkController:"showDeltaPPM",formatController:"deltaPPMFormat",defaultFormat:"00.00"},{id:4,label:"\u03b4 (Hz) :",checkController:"showDeltaHz",formatController:"deltaHzFormat",defaultFormat:"00.00"},{id:5,label:"Peak Width",checkController:"showPeakWidth",formatController:"peakWidthFormat",defaultFormat:"00.0000"},{id:6,label:"Intensity :",checkController:"showIntensity",formatController:"intensityFormat",defaultFormat:"00.00"}];function PeaksPreferences(e,t){var n=e.nucleus,a=e.preferences,i=gc(),o=useStateWithLocalStorage("nmr-general-settings"),r=Object(m.a)(o,2)[1],c=Object(y.useState)(null),l=Object(m.a)(c,2),s=l[0],u=l[1],d=Object(y.useRef)();Object(y.useEffect)((function(){var e=rt(a,"formatting.panels.peaks");e&&u(e)}),[a]);var b=Object(y.useCallback)((function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];a.dispatch({type:tl,payload:{key:"peaks",value:e}}),t&&i.success("Peaks preferences saved successfully")}),[i,a]);Object(y.useImperativeHandle)(t,(function(){return{saveSetting:function saveSetting(){"function"===typeof d.current.requestSubmit?d.current.requestSubmit():d.current.dispatchEvent(new Event("submit",{cancelable:!0}))}}}));var p=Object(y.useCallback)((function(e){e.preventDefault();var t,n=e.target,a=new FormData(n),i={},o=Object(Yr.a)(a.entries());try{for(o.s();!(t=o.n()).done;){var c=t.value,l=c[0].split("-").join("."),s=["true","false"].includes(c[1])?"true"===c[1]:c[1];i=it()(i,l,s)}}catch(u){o.e(u)}finally{o.f()}b(i,!0),r(i,"formatting.panels.peaks")}),[b,r]),f=Object(y.useCallback)((function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var a=t.join(".");if(s){var i=x()(s,a);return i||null}var o=t.length-1;return fi[t[o]]}),[s]);return Object(P.jsx)("div",{style:lb.container,children:Object(P.jsx)("form",{onSubmit:p,ref:d,children:n&&n.map((function(e){return Object(P.jsxs)("div",{style:lb.groupContainer,children:[Object(P.jsx)(nd,{style:lb.header,value:e}),sb.map((function(t){return Object(P.jsx)(Hu,{label:t.label,checked:f(e,t.checkController),format:f(e,t.formatController),checkControllerName:t.checkController,formatControllerName:t.formatController,groupID:e},t.id)}))]},e)}))})})}var ub=cb(Object(y.forwardRef)(PeaksPreferences));function PeaksTable(e){var t=e.peaks,n=e.info,a=e.xDomain,i=e.activeTab,o=e.enableFilter,r=e.onFilter,c=e.preferences,l=useDispatch(),s=Object(y.useRef)([]),u=useFormatNumberByNucleus(n.nucleus),d=Object(y.useCallback)((function(e,t){e.preventDefault(),e.stopPropagation();var n=t.original;l({type:St,data:{id:n.id,xIndex:n.xIndex}})}),[l]),b=Object(y.useMemo)((function(){return[{index:20,Header:"",width:"1%",maxWidth:"24px",minWidth:"24px",id:"delete-button",Cell:function Cell(e){var t=e.row;return Object(P.jsx)("button",{type:"button",className:"delete-button",onClick:function onClick(e){return d(e,t)},children:Object(P.jsx)(He.B,{})})}}]}),[d]),p=Object(y.useCallback)((function(e){s.current.forEach((function(t,n){e!==n&&t&&t.closeEdit()}))}),[]),f=Object(y.useCallback)((function(e,t){var n=parseFloat(e.target.value)-parseFloat(t.value);l({type:Dt,shiftValue:n})}),[l]),h=Object(y.useMemo)((function(){var e=function setCustomColumn(e,t,n,a,i){e.push(Object(g.a)(Object(g.a)({},i),{},{index:t,Header:n,sortType:"basic",Cell:function Cell(e){var t=e.row;return a(t)}}))},t=rt(c,"formatting.panels.peaks.[".concat(i,"]"),fi),n=Object(wi.a)(b);return t.showPeakNumber&&e(n,1,"#",(function(e){return Ei(e.index+1,t.peakNumberFormat)}),{width:"1%",maxWidth:"40px",minWidth:"40px"}),t.showPeakIndex&&e(n,2,"index",(function(e){return Ei(e.original.xIndex,t.peakIndexFormat)})),t.showDeltaPPM&&e(n,3,"\u03b4 (ppm)",(function(e){return Object(P.jsx)(Du,{onEditStart:function onEditStart(){return p(e.index)},ref:function ref(t){return s.current[e.index]=t},value:Ei(e.original.value,t.deltaPPMFormat),onSave:function onSave(t){return f(t,e.original)},type:"number"})})),t.showDeltaHz&&e(n,4,"\u03b4 (Hz)",(function(e){return Ei(e.original.valueHz,t.deltaHzFormat)})),t.showIntensity&&e(n,5,"Intensity",(function(e){return Ei(e.original.intensity,t.intensityFormat)})),t.showPeakWidth&&e(n,5,"Peak Width",(function(e){return Ei(e.original.peakWidth,t.peakWidthFormat)})),n.sort((function(e,t){return e.index-t.index}))}),[i,p,b,c,f]),m=Object(y.useMemo)((function(){function isInRange(e){var t=1e5;return e*t>=a[0]*t&&e*t<=a[1]*t}return t&&t.values?(o?t.values.filter((function(e){return isInRange(e.delta)})):t.values).map((function(e){var t=u(e.delta);return{value:t,valueHz:n&&n.originFrequency?t*n.originFrequency:"",id:e.id,intensity:e.intensity,peakWidth:e.width?e.width:"",isConstantlyHighlighted:isInRange(t)}})):[]}),[o,u,n,t,a]);return Object(y.useEffect)((function(){r(m.length)}),[m,r]),m&&m.length>0?Object(P.jsx)(Eu,{data:m,columns:h}):Object(P.jsx)(Pu,{})}var db=cb(Object(y.memo)(PeaksTable)),bb={container:{display:"flex",flexDirection:"column",height:"100%"}};function PeaksPanel(){var e=Object(y.useState)(!1),t=Object(m.a)(e,2),n=t[0],a=t[1],i=Object(y.useState)(0),o=Object(m.a)(i,2),r=o[0],c=o[1],l=useDispatch(),s=te(),u=Object(y.useState)(!1),d=Object(m.a)(u,2),b=d[0],p=d[1],f=Object(y.useRef)(),h=Object(y.useCallback)((function(){l({type:St,data:null})}),[l]),g=Object(y.useCallback)((function(){s.showConfirmDialog({message:"All records will be deleted, Are You sure?",buttons:[{text:"Yes",handler:h},{text:"No"}]})}),[s,h]),j=Object(y.useCallback)((function(){p(!b)}),[b]),v=Object(y.useCallback)((function(){f.current.saveSetting(),p(!1)}),[]),O=Object(y.useCallback)((function(){a(!n)}),[n]),x=Object(y.useCallback)((function(e){c(e)}),[]);return Object(P.jsxs)("div",{style:bb.container,children:[!b&&Object(P.jsx)(ju,{counter:r,onDelete:g,deleteToolTip:"Delete All Peaks",onFilter:O,filterToolTip:n?"Show all peaks":"Hide peaks out of view",filterIsActive:n,counterFiltered:r,showSettingButton:"true",onSettingClick:j}),b&&Object(P.jsx)(Cu,{onSave:v,onClose:j}),Object(P.jsx)("div",{style:{height:"100%",overflow:"hidden"},children:Object(P.jsxs)(_s.a,{isFlipped:b,infinite:!0,containerStyle:{overflow:"hidden",height:"100%"},children:[Object(P.jsx)("div",{style:{overflow:"auto",height:"100%",display:"block"},children:Object(P.jsx)(db,{enableFilter:n,onFilter:x})}),Object(P.jsx)(ub,{ref:f})]})})]})}var pb,fb=Object(y.memo)(PeaksPanel),hb=Object(v.b)(pb||(pb=Object(j.a)(["\n  overflow: auto;\n  width: 400px;\n  .innerContainer {\n    padding: 5px;\n    width: 100%;\n    height: 180px;\n    border: none;\n  }\n\n  .mainButtonsContainer {\n    padding: 5px 0px;\n    border-bottom: 0.55px solid #ebebeb;\n    display: flex;\n    justify-content: space-between;\n  }\n\n  button {\n    background-color: transparent;\n    border: none;\n    padding: 0 5px;\n  }\n\n  button:disabled {\n    opacity: 0.6;\n  }\n"])));var gb=function CopyClipboardModal(e){var t=e.text,n=e.onClose,a=e.onCopyClick;return Object(ve.c)("div",{css:hb,children:[Object(ve.c)("div",{className:"mainButtonsContainer handle",children:[Object(ve.b)("button",{type:"button",onClick:function onClick(){return a(t)},children:Object(ve.b)(He.e,{})}),Object(ve.b)(Ge,{onClick:n})]}),Object(ve.b)("div",{className:"innerContainer",dangerouslySetInnerHTML:{__html:t}})]})},mb={toolbar:{display:"flex",flexDirection:"row",borderBottom:"0.55px solid rgb(240, 240, 240)"},center:{display:"flex",justifyContent:"center",alignItems:"center",padding:"5px"},removeAssignmentsButton:{border:"none",height:"16px",fontSize:"12px",backgroundColor:"transparent"},button:{backgroundColor:"transparent",border:"none"}};var jb=function RangesHeader(e){var t=e.ranges,n=e.info,a=e.activeTab,i=e.molecules,o=e.onUnlink,r=e.onFilterActivated,c=e.onSettingClick,l=e.isFilterActive,s=e.filterCounter,u=useDispatch(),d=te(),b=gc(),p=usePreferences(),f=useAssignmentData(),h=Object(y.useState)(!1),j=Object(m.a)(h,2),v=j[0],O=j[1],C=x()(t,"options.sum",null),k=Object(y.useCallback)((function(e){void 0!==e&&u({type:Pn,value:e}),d.close()}),[u,d]),S=Object(y.useCallback)((function(){d.show(Object(P.jsx)(bu,{onClose:function onClose(){return d.close()},onSave:k,header:C?"Set new Ranges Sum (Current: ".concat(Number(C).toFixed(2),")"):"Set new Ranges Sum",molecules:i,element:a?a.replace(/[0-9]/g,""):null}))}),[a,k,C,d,i]),D=Object(y.useCallback)((function(){var e,n=Object(Yr.a)(t.values);try{for(n.s();!(e=n.n()).done;){var a=e.value;o(a)}}catch(i){n.e(i)}finally{n.f()}}),[t,o]),w=Object(y.useCallback)((function(){d.showConfirmDialog({message:"All assignments will be removed. Are you sure?",buttons:[{text:"Yes",handler:D},{text:"No"}]})}),[D,d]),T=Object(y.useCallback)((function(){d.showConfirmDialog({message:"All ranges will be deleted. Are You sure?",buttons:[{text:"Yes",handler:function handler(){u({type:jn,payload:{assignmentData:f}})}},{text:"No"}]})}),[f,u,d]),M=Object(y.useCallback)((function(e){ti.emit("showMultiplicityTrees",e),O(e)}),[]),A=Object(y.useCallback)((function(e){Object(xc.a)(e)?b.success("Data copied to clipboard"):b.error("copy to clipboard failed")}),[b]),E=Object(y.useCallback)((function(){var e=n.originFrequency,a=n.nucleus,i=x()(p,"formatting.nucleusByKey[".concat(a.toLowerCase(),"]")),o=getNumberOfDecimals(i.ppm),r=getNumberOfDecimals(i.hz),c=Object(Jr.c)(t.values,{nucleus:a,nbDecimalDelta:o,nbDecimalJ:r,observedFrequency:e});d.show(Object(P.jsx)(gb,{text:c,onCopyClick:A,onClose:function onClose(){return d.close()}}),{})}),[n,d,p,t.values,A]);return Object(P.jsxs)(ju,{counter:t&&t.values&&t.values.length,onDelete:T,deleteToolTip:"Delete All Ranges",onFilter:r,filterToolTip:l?"Show all ranges":"Hide ranges out of view",filterIsActive:l,counterFiltered:s,showSettingButton:"true",onSettingClick:c,children:[Object(P.jsx)(Ze,{title:"Preview publication string",popupPlacement:"right",children:Object(P.jsx)("button",{style:mb.button,type:"button",onClick:E,children:Object(P.jsx)(He.p,{})})}),Object(P.jsx)(Ze,{title:C?"Change Ranges Sum (".concat(Number(C).toFixed(2),")"):"Change Ranges Sum",popupPlacement:"right",children:Object(P.jsx)("button",{css:mb.button,type:"button",onClick:S,children:Object(P.jsx)(Rs.u,{})})}),Object(P.jsx)(Ze,{title:"Remove all Assignments",popupPlacement:"right",children:Object(P.jsx)("button",{style:Object(g.a)(Object(g.a)({},mb.center),mb.removeAssignmentsButton),type:"button",onClick:w,disabled:!t||!t.values||0===t.values.length,children:Object(P.jsx)(He.H,{})})}),Object(P.jsx)(hu,{popupTitle:v?"Hide Multiplicity Trees in Spectrum":"Show Multiplicity Trees in Spectrum",popupPlacement:"right",onClick:M,disabled:!t||!t.values||0===t.values.length,children:Object(P.jsx)(He.E,{style:{pointerEvents:"none",fontSize:"12px"}})})]})},vb={container:{padding:10,backgroundColor:"#f1f1f1",height:"100%",flex:1},groupContainer:{padding:"5px",borderRadius:"5px",margin:"10px 0px",backgroundColor:"white"},row:{display:"flex",margin:"5px 0px"},header:{borderBottom:"1px solid #e8e8e8",paddingBottom:"5px",fontWeight:"bold",color:"#4a4a4a"},inputLabel:{flex:2,fontSize:"11px",fontWeight:"bold",color:"#232323"},input:{width:"30%",textAlign:"center"}};function RangesPreferences(e,t){var n=e.nucleus,a=e.preferences,i=gc(),o=useStateWithLocalStorage("nmr-general-settings"),r=Object(m.a)(o,2)[1],c=Object(y.useState)(null),l=Object(m.a)(c,2),s=l[0],u=l[1],d=Object(y.useRef)();Object(y.useEffect)((function(){var e=rt(a,"formatting.panels.ranges");e&&u(e)}),[a]);var b=function saveToLocalStorgate(e){r(e,"formatting.panels.ranges")},p=Object(y.useCallback)((function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];a.dispatch({type:tl,payload:{key:"ranges",value:e}}),t&&i.success("ranges preferences saved successfully")}),[i,a]);Object(y.useImperativeHandle)(t,(function(){return{saveSetting:function saveSetting(){"function"===typeof d.current.requestSubmit?d.current.requestSubmit():d.current.dispatchEvent(new Event("submit",{cancelable:!0}))}}}));var f=[{id:1,label:"From :",checkController:"showFrom",formatController:"fromFormat",defaultFormat:"0.00"},{id:2,label:"To :",checkController:"showTo",formatController:"toFormat",defaultFormat:"0.00"},{id:3,label:"Absolute :",checkController:"showAbsolute",formatController:"absoluteFormat",defaultFormat:"0.00"},{id:4,label:"Relative :",checkController:"showRelative",formatController:"relativeFormat",defaultFormat:"00.00"}],h=function(){var e=Object(Mo.a)(To.a.mark((function _callee(e){var t,n,a,i,o,r,c,l;return To.a.wrap((function _callee$(s){for(;;)switch(s.prev=s.next){case 0:e.preventDefault(),t=e.target,n=new FormData(t),a={},i=Object(Yr.a)(n.entries());try{for(i.s();!(o=i.n()).done;)r=o.value,c=r[0].split("-").join("."),l=["true","false"].includes(r[1])?"true"===r[1]:r[1],a=it()(a,c,l)}catch(u){i.e(u)}finally{i.f()}p(a,!0),b(a);case 8:case"end":return s.stop()}}),_callee)})));return function handleSubmit(t){return e.apply(this,arguments)}}(),g=Object(y.useCallback)((function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var a=t.join(".");if(s){var i=x()(s,a);return i||null}var o=t.length-1;return pi[t[o]]}),[s]);return Object(P.jsx)("div",{style:vb.container,children:Object(P.jsx)("form",{onSubmit:h,ref:d,children:n&&n.map((function(e){return Object(P.jsxs)("div",{style:vb.groupContainer,children:[Object(P.jsx)(nd,{style:vb.header,value:e}),f.map((function(t){return Object(P.jsx)(Hu,{label:t.label,checked:g(e,t.checkController),format:g(e,t.formatController),checkControllerName:t.checkController,formatControllerName:t.formatController,groupID:e},t.id)}))]},e)}))})})}var Ob=Object(y.memo)(Object(y.forwardRef)(RangesPreferences)),xb=null;var yb=function useToggleStatus(e,t){var n=Object(y.useState)({}),a=Object(m.a)(n,2),i=a[0],o=a[1];Object(y.useEffect)((function(){var n={};if(t&&Array.isArray(t)){for(var a=0;a<t.length;a++)n[t[a][e]]=!1;o(n)}}),[t,e]);var r=Object(y.useCallback)((function(e){var t=Object(g.a)({},i);xb&&(t[xb]=!1),null!=e&&(xb=e,t[e]=!0),o(t)}),[i]);return[i,r]},Cb=n(380),kb=n.n(Cb);function isColumnVisible(e,t){return kb.a.get(e,t,!1)}var Sb,Db=function AbsoluteColumn(e){var t=e.rowSpanTags,n=e.value,a=e.onHoverRange,i=e.format;return Object(P.jsx)("td",Object(g.a)(Object(g.a)(Object(g.a)({},t),a),{},{children:Ei(n,i)}))};function SelectUncontrolled(e){var t=e.data,n=e.style,a=e.onChange,i=e.value,o=Object(y.useCallback)((function(e){a(e.target.value)}),[a]),r=Object(v.b)(Sb||(Sb=Object(j.a)(["\n    position: relative;\n    padding: 0px 5px;\n    border: 0.55px solid #cacaca;\n    font-size: 14px;\n    width: ","px;\n    margin: 0;\n    height: 100%;\n    background: "," no-repeat right white;\n    -webkit-appearance: none;\n    background-position-x: ","px;\n    background-size: 15px 15px;\n    border-radius: 5px;\n    margin: 0px 5px;\n    :focus,\n    input:focus {\n      outline: none;\n    }\n  "])),n.width?n.width-5:95,'url(\'data:image/svg+xml;utf8,<svg  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="960px" height="560px" viewBox="0 0 960 560" enable-background="new 0 0 960 560" xml:space="preserve"><g id="Rounded_Rectangle_33_copy_4_1_"><path d="M480,344.181L268.869,131.889c-15.756-15.859-41.3-15.859-57.054,0c-15.754,15.857-15.754,41.57,0,57.431l237.632,238.937c8.395,8.451,19.562,12.254,30.553,11.698c10.993,0.556,22.159-3.247,30.555-11.698l237.631-238.937c15.756-15.86,15.756-41.571,0-57.431s-41.299-15.859-57.051,0L480,344.181z"/></g></svg>\')',n.width?n.width-18:77);return Object(ve.b)("select",{css:[r,n],onChange:o,value:i,children:t.map((function(e){return Object(ve.b)("option",{value:e.value,children:e.label},"".concat(e.key))}))})}SelectUncontrolled.defaultProps={onChange:function onChange(){return null}};var wb=SelectUncontrolled;var Tb=function Button_Button(e){var t=e.onClick,n=Object(de.a)(e,["onClick"]);return Object(ve.b)(y.Fragment,{children:Object(ve.b)("button",Object(g.a)({type:"button",onClick:t},n))})};var Mb=function ErrorMessage(e){var t=e.style,n=Object(de.a)(e,["style"]),a=Object(Wc.e)(n)[1];return Object(ve.b)("div",{children:a.error?Object(ve.b)("p",{style:Object(g.a)({color:"red",margin:"0.5px"},t),children:a.error}):null})};function formik_Input_Input(e){var t=e.onFocus,n=e.onBlur,a=e.enableErrorMessage,i=Object(de.a)(e,["onFocus","onBlur","enableErrorMessage"]),o=Object(Wc.e)(i),r=Object(m.a)(o,1)[0];return Object(P.jsxs)("div",{children:[Object(P.jsx)("input",Object(g.a)(Object(g.a)(Object(g.a)({},r),i),{},{onFocus:function onFocus(){return t(r.name)},onBlur:function onBlur(){return n(r.name)}})),a&&!0===a?Object(P.jsx)(Mb,Object(g.a)({},i)):null]})}formik_Input_Input.defaultProps={onFocus:function onFocus(){return null},onBlur:function onBlur(){return null}};var Ab,Eb=formik_Input_Input,Pb=Object(v.b)(Ab||(Ab=Object(j.a)(["\n  text-align: center;\n  width: 100%;\n  height: 100%;\n\n  .infoText {\n    margin-top: 20px;\n    font-size: 12px;\n  }\n\n  input {\n    background-color: transparent;\n    border: 0.5px solid #dedede;\n    width: 50%;\n    text-align: center;\n  }\n\n  .addSignalButton {\n    margin-top: 15px;\n    margin-top: 20px;\n    background-color: transparent;\n    border: none;\n    padding: 0.3rem;\n    border-radius: 25%;\n  }\n"])));function AddSignalFormTab(e){var t=e.onFocus,n=e.onBlur,a=Object(Wc.f)(),i=a.values,o=a.setFieldValue,r=a.errors,c=Object(y.useState)(!1),l=Object(m.a)(c,2),s=l[0],u=l[1],d=Object(y.useCallback)((function(){var e={multiplicity:"m",kind:"signal",delta:Number(i.newSignalDelta),j:[{multiplicity:translateMultiplet("m"),coupling:""}]},t=i.signals.slice().concat(e);o("signals",t),o("activeTab",String(t.length-1))}),[o,i.newSignalDelta,i.signals]);return Object(y.useEffect)((function(){r.newSignalDelta?u(!0):u(!1)}),[r.newSignalDelta,i.signals]),Object(ve.c)("div",{css:Pb,children:[Object(ve.c)("div",{children:[Object(ve.b)("p",{className:"infoText",children:"Edit or select a delta value of new signal (ppm):"}),Object(ve.b)(Eb,{name:"newSignalDelta",type:"number",placeholder:"\u0394".concat(" (ppm)"),onFocus:t,onBlur:n})]}),Object(ve.b)("div",{children:Object(ve.b)(Tb,{className:"addSignalButton",onClick:d,disabled:s,css:{color:s?"grey":"blue",width:"100%"},children:Object(ve.b)(He.y,{title:"Add new signal"})})})]})}var Ib=Object(y.memo)(AddSignalFormTab);function SelectBox(e){var t=e.values,n=Object(de.a)(e,["values"]),a=Object(Wc.e)(n),i=Object(m.a)(a,1)[0];return t&&t.length>0?Object(ve.c)("div",{children:[Object(ve.b)(Wc.a,Object(g.a)(Object(g.a)(Object(g.a)({as:"select"},i),n),{},{children:t.map((function(e,t){return Object(ve.b)("option",{children:e},t)}))})),Object(ve.b)(Mb,Object(g.a)({},n))]}):null}SelectBox.protoTypes={valuePath:Li.a.instanceOf(Array).isRequired,valueSelectionTemplate:Li.a.func};var Fb,Rb=SelectBox,Nb=Object(v.b)(Fb||(Fb=Object(j.a)(["\n  border-spacing: 0;\n  border: 1px solid #dedede;\n  width: 100%;\n  height: 100%;\n  font-size: 12px;\n\n  th,\n  td {\n    text-align: center;\n    margin: 0;\n    padding: 0.4rem;\n    border-bottom: 1px solid #dedede;\n    border-right: 1px solid #dedede;\n\n    button {\n      background-color: transparent;\n      border: none;\n    }\n\n    .add-button {\n      color: blue;\n    }\n\n    .delete-button {\n      border-radius: 25%;\n      padding: 0;\n      padding-left: 0.3rem;\n      padding-right: 0.3rem;\n    }\n    .delete-button:hover {\n      background-color: red;\n      .icon {\n        color: white;\n      }\n    }\n\n    input {\n      background-color: transparent;\n      border: 0.5px solid #dedede;\n      height: 100%;\n      width: 100%;\n      text-align: center;\n    }\n    .selectBox {\n      background-color: transparent;\n      border: 0.5px solid #dedede;\n      height: 100%;\n      width: 100%;\n      text-align: center;\n    }\n  }\n\n  tr {\n    :last-child {\n      border-top: 3px solid #dedede;\n    }\n  }\n"]))),_b={border:"1px solid red"};function CouplingsTable(e){var t=e.push,n=e.remove,a=e.onFocus,i=e.onBlur,o=Object(Wc.f)(),r=o.values,c=o.setFieldValue,l=o.errors;Object(y.useEffect)((function(){r.signals[r.activeTab]&&r.signals[r.activeTab].j.forEach((function(e,t){hasCouplingConstant(e.multiplicity)||c("signals.".concat(r.activeTab,".j.").concat(t,".coupling"),"")}))}),[c,r.activeTab,r.signals]);var s=Object(y.useCallback)((function(e){return x()(l,"signals[".concat(r.activeTab,"].missingCouplings"),[]).some((function(t){return t.index===e}))}),[l,r.activeTab]);return Object(ve.b)("table",{css:Nb,children:Object(ve.c)("tbody",{children:[Object(ve.c)("tr",{children:[Object(ve.b)("th",{children:"#"}),Object(ve.b)("th",{children:"Multiplicity"}),Object(ve.b)("th",{children:"J (Hz)"}),Object(ve.b)("th",{children:""})]}),x()(r,"signals[".concat(r.activeTab,"].j"),[]).map((function(e,t){return Object(ve.c)("tr",{children:[Object(ve.b)("td",{children:t+1}),Object(ve.b)("td",{children:Object(ve.b)(Rb,{className:"selectBox",name:"signals.".concat(r.activeTab,".j.").concat(t,".multiplicity"),values:ro.map((function(e){return e.label}))})}),Object(ve.b)("td",{children:Object(ve.b)(Eb,{name:"signals.".concat(r.activeTab,".j.").concat(t,".coupling"),type:"number",placeholder:"J (Hz)",disabled:!hasCouplingConstant(e.multiplicity),onFocus:a,onBlur:i,style:s(t)?_b:null})}),Object(ve.b)("td",{children:Object(ve.b)(Tb,{className:"delete-button",onClick:function onClick(){n(t)},children:Object(ve.b)(He.v,{className:"icon",title:"Delete coupling"})})})]},"editCouplings".concat(r.activeTab).concat(t))})),Object(ve.b)("tr",{}),Object(ve.b)("tr",{children:Object(ve.b)("td",{colSpan:4,children:Object(ve.b)(Tb,{className:"add-button",onClick:function onClick(){return t({multiplicity:translateMultiplet("m"),coupling:""})},children:Object(ve.b)(He.y,{title:"Add new coupling"})})})})]})})}var Lb,zb=Object(y.memo)(CouplingsTable),Hb=Object(v.b)(Lb||(Lb=Object(j.a)(["\n  border-spacing: 0;\n  border: 1px solid #dedede;\n  width: 100%;\n  font-size: 12px;\n  height: 100%;\n\n  margin: 0;\n  padding: 0.4rem;\n  text-align: center;\n"])));function SignalFormTab(e){var t=e.onFocus,n=e.onBlur,a=Object(Wc.f)().values;return Object(ve.b)("div",{css:Hb,children:Object(ve.b)(Wc.b,{name:"signals.".concat(a.activeTab,".j"),render:function render(e){var a=e.push,i=e.remove;return Object(ve.b)("div",{children:Object(ve.b)(zb,{push:a,remove:i,onFocus:t,onBlur:n})})}})})}var Bb,Xb,Vb=Object(y.memo)(SignalFormTab),Yb=Object(v.b)(Bb||(Bb=Object(j.a)(["\n  text-align: center;\n  width: 100%;\n\n  .errorText {\n    color: red;\n  }\n\n  .infoText {\n    margin-bottom: 20px;\n    font-size: 11px;\n  }\n"]))),Zb=Object(v.b)(Xb||(Xb=Object(j.a)(["\n  color: red;\n"])));function SignalsForm(){var e=Object(Wc.f)(),t=e.values,n=e.setFieldValue,a=e.errors,i=useChartData(),o=i.data,r=i.activeSpectrum,c=Object(y.useState)(null),l=Object(m.a)(c,2),s=l[0],u=l[1],d=Object(y.useState)(null),b=Object(m.a)(d,2),p=b[0],f=b[1];Object(y.useEffect)((function(){o&&r&&x()(o,"[".concat(r.index,"].info.originFrequency"),void 0)?f(o[r.index].info.originFrequency):f(null)}),[r,o]),Object(y.useEffect)((function(){return ti.on("brushEnd",(function(e){s&&p&&n(s,Math.abs(e.range[0]-e.range[1])*p)})),function(){ti.off("brushEnd")}}),[s,n,p,t.activeTab]),Object(y.useEffect)((function(){return ti.on("mouseClick",(function(e){"addSignalTab"===t.activeTab&&s&&n(s,e.xPPM)})),function(){ti.off("mouseClick")}}),[t.activeTab,s,n]);var h=Object(y.useCallback)((function(e){u(e)}),[u]),g=Object(y.useCallback)((function(e){var t=e.tabid;n("activeTab",t),u(null)}),[n]),j=Object(y.useCallback)((function(e){var a=e.tabid,i=t.signals.filter((function(e,t){return t!==Number(a)}));n("signals",i)}),[n,t.signals]);Object(y.useEffect)((function(){n("activeTab",t.signals.length>0?(t.signals.length-1).toString():"addSignalTab")}),[n,t.signals.length]);var v=Object(y.useCallback)((function(e){return a.signals&&(x()(a,"signals.noCouplings",[]).some((function(t){return t.index===e}))||x()(a,"signals[".concat(e,"].missingCouplings"),[]).length>0)}),[a]),O=Object(y.useMemo)((function(){var e=t.signals.length>0?t.signals.map((function(e,t){return Object(ve.b)("div",{tabid:"".concat(t),tablabel:"\u0394".concat(": ",e.delta.toFixed(5)," (").concat(e.j.map((function(e){return translateMultiplet(e.multiplicity)})).join(""),")"),tabstyles:v(t)?Zb:null,children:Object(ve.b)(Vb,{onFocus:h})},"signalForm".concat(t))})):[],n=Object(ve.b)("div",{tablabel:"+",tabid:"addSignalTab",candelete:"false",children:Object(ve.b)(Ib,{onFocus:h})},"addSignalTab");return e.concat(n)}),[h,v,t.signals]),C=Object(ve.b)("p",{className:"infoText",children:"Focus on an input field and press Shift + Drag & Drop to draw a coupling constant in spectrum view."}),k=Object(ve.b)("p",{className:"infoText",children:"Focus on the input field and press Shift + Left mouse click to select new signal delta value in spectrum view."});return Object(ve.c)("div",{children:[Object(ve.b)("div",{css:Yb,children:a.signals&&(a.signals.noSignals||a.signals.noCouplings)?Object(ve.c)("div",{children:[Object(ve.b)("p",{className:"errorText",children:a.signals.noSignals||a.signals.noCouplings[0].message}),a.signals.noSignals?k:null]}):"addSignalTab"===t.activeTab?k:C}),Object(ve.b)(Kc,{defaultTabID:t.activeTab,onClick:g,canDelete:!0,onDelete:j,children:O})]})}var Ub=Object(y.memo)(SignalsForm);var Kb,Wb=function EditRangeValidation(e,t){var n={};e.newSignalDelta?(e.newSignalDelta<t.from||e.newSignalDelta>t.to)&&(n.newSignalDelta=" ".concat(e.newSignalDelta.toFixed(5)," ppm out of the range")):n.newSignalDelta="required";var a=function createSignalsError(e){n.signals||(n.signals={}),void 0===e||n.signals["".concat(e)]||(n.signals["".concat(e)]={missingCouplings:[]})};return 0===e.signals.length?(a(),n.signals.noSignals="There must be at least one signal in a range!"):e.signals.forEach((function(e,t){0===e.j.length&&(a(t),n.signals.noCouplings||(n.signals.noCouplings=[]),n.signals.noCouplings.push({index:t,message:"There must be at least one coupling in signal ".concat(t+1,"!")})),e.j.forEach((function(e,i){hasCouplingConstant(e.multiplicity)&&""===e.coupling&&(a(t),n.signals["".concat(t)].missingCouplings.push({index:i,message:"There are coupling values missing in signal ".concat(t+1,"!")}))}))})),n},Gb=Object(v.b)(Kb||(Kb=Object(j.a)(["\n  overflow: auto;\n  width: 600px;\n  height: 500px;\n  padding: 5px;\n  button:focus {\n    outline: none;\n  }\n  .header {\n    height: 24px;\n    border-bottom: 1px solid #f0f0f0;\n    display: flex;\n    align-items: center;\n    span {\n      color: #464646;\n      font-size: 15px;\n      flex: 1;\n      border-left: 1px solid #ececec;\n      padding-left: 6px;\n    }\n\n    button {\n      background-color: transparent;\n      border: none;\n      padding: 5px;\n\n      svg {\n        height: 16px;\n      }\n    }\n  }\n  .container {\n    display: flex;\n    margin: 30px 5px;\n    input,\n    button {\n      padding: 5px;\n      border: 1px solid gray;\n      border-radius: 5px;\n      height: 36px;\n      margin: 2px;\n    }\n    input {\n      flex: 10;\n    }\n    button {\n      flex: 2;\n      color: white;\n      background-color: gray;\n    }\n  }\n"])));function EditRangeModal(e){var t=e.onSaveEditRangeModal,n=e.onCloseEditRangeModal,a=e.onZoomEditRangeModal,i=e.rangeData,o=Object(y.useCallback)((function(){a(i)}),[a,i]);Object(y.useEffect)((function(){o()}),[o]);var r=Object(y.useCallback)((function(){n()}),[n]),c=Object(y.useCallback)((function(e){return e.filter((function(e){return""!==e.coupling})).map((function(e){return Object(g.a)(Object(g.a)({},e),{},{multiplicity:translateMultiplet(e.multiplicity)})}))}),[]),l=Object(y.useCallback)((function(e){return e.map((function(e){return Object(g.a)(Object(g.a)({id:generateID()},e),{},{multiplicity:e.j.map((function(e){return translateMultiplet(e.multiplicity)})).join(""),j:c(e.j)})}))}),[c]),s=Object(y.useCallback)(function(){var e=Object(Mo.a)(To.a.mark((function _callee(e){var n;return To.a.wrap((function _callee$(a){for(;;)switch(a.prev=a.next){case 0:return(n=Object(g.a)({},i)).signal=l(e.signals),a.next=4,t(n);case 4:r();case 5:case"end":return a.stop()}}),_callee)})));return function(t){return e.apply(this,arguments)}}(),[l,r,t,i]),u=Object(y.useMemo)((function(){return i.signal.map((function(e){var t,n=0,a=[];return e.multiplicity.split("").forEach((function(i){hasCouplingConstant(i)?(t=Object(g.a)({},e.j[n]),n++):t={multiplicity:i,coupling:""},t.multiplicity=translateMultiplet(t.multiplicity),a.push(t)})),Object(g.a)(Object(g.a)({},e),{},{j:a})}))}),[i.signal]),d=Object(y.useCallback)((function(e){var t=Object.keys(e);return t.length>0&&(1!==t.length||"newSignalDelta"!==t[0])}),[]);return Object(ve.b)("div",{css:Gb,children:i&&Object(ve.b)(Wc.d,{initialValues:{signals:u,newSignalDelta:(i.from+i.to)/2,activeTab:"0"},validate:function validate(e){return Wb(e,i)},onSubmit:function onSubmit(e,t){var n=t.setSubmitting;s(e),n(!1)},children:function children(e){var t=e.values,n=e.errors;return Object(ve.c)(Wc.c,{children:[Object(ve.c)("div",{className:"header handle",children:[Object(ve.b)(Tb,{onClick:o,className:"zoom-button",children:Object(ve.b)(He.D,{title:"Set to default view on range in spectrum"})}),Object(ve.b)("span",{children:"Range Information and Editing"}),Object(ve.b)(xu,{onClick:function onClick(){return s(t)},disabled:d(n),popupTitle:"Save and exit"}),Object(ve.b)(Ge,{onClick:r})]}),Object(ve.b)(Ub,{})]})}})})}EditRangeModal.defaultProps={onSave:function onSave(){return null},onClose:function onClose(){return null},onZoom:function onZoom(){return null}};var qb,Jb=EditRangeModal,$b=Object(v.b)(qb||(qb=Object(j.a)(["\n  width: 66px;\n  padding: 0 !important;\n  button {\n    background-color: transparent;\n    border: none;\n    padding: 5px;\n  }\n\n  button:disabled {\n    opacity: 0.6;\n  }\n"]))),Qb={marginLeft:2,marginRight:2,border:"none",height:"20px"};var ep=function ActionsColumn(e){var t=e.rowData,n=e.onHoverSignal,a=e.rowSpanTags,i=useDispatch(),o=te(),r=useAssignmentData(),c=Object(y.useCallback)((function(){var e=Math.abs(t.from-t.to);i({type:wt,xDomain:[t.from-e,t.to+e]})}),[i,t.from,t.to]),l=Object(y.useCallback)((function(){i({type:jn,payload:{id:t.id,assignmentData:r}})}),[r,i,t]),s=Object(y.useCallback)((function(e){i({type:Bn,payload:{rowData:t,value:e}})}),[i,t]),u=Object(y.useCallback)((function(e){i({type:Xn,payload:{editedRowData:e,assignmentData:r}})}),[r,i]),d=Object(y.useCallback)((function(){i({type:xn}),o.close()}),[i,o]),b=Object(y.useCallback)((function(){i({type:Pt,selectedTool:"editRange"}),o.show(Object(ve.b)(Jb,{onCloseEditRangeModal:d,onSaveEditRangeModal:u,onZoomEditRangeModal:c,rangeData:t}),{position:U.CENTER_RIGHT,transition:$,isBackgroundBlur:!1})}),[d,i,o,t,u,c]);return Object(ve.c)(y.Fragment,{children:[Object(ve.b)("td",Object(g.a)(Object(g.a)({},n),{},{children:Object(ve.b)(wb,{onChange:s,data:qi,value:t.tableMetaInfo.signal.kind,style:Qb})})),Object(ve.c)("td",Object(g.a)(Object(g.a)({},a),{},{css:$b,children:[Object(ve.b)("button",{type:"button",className:"delete-button",onClick:l,children:Object(ve.b)(He.B,{})}),Object(ve.b)("button",{type:"button",className:"zoom-button",onClick:c,children:Object(ve.b)(He.D,{title:"Zoom to range in spectrum"})}),Object(ve.b)("button",{type:"button",className:"edit-button",onClick:b,children:Object(ve.b)(He.i,{color:"blue"})})]}))]})};var tp=function CouplingColumn(e){var t=e.rowData,n=e.onHoverSignal,a=x()(t,"tableMetaInfo.signal.j");return Object(P.jsx)("td",Object(g.a)(Object(g.a)({},n),{},{children:a&&a.map((function(e){return e.coupling.toFixed(1)})).join(",")}))},np={color:"red",fontWeight:"bold"};function RangeAssignmentsColumn(e){var t=e.rowData,n=e.assignment,a=e.highlight,i=e.onUnlinkVisibilityChange,o=e.unlinkVisibility,r=e.onLink,c=e.onUnlink,l=e.rowSpanTags,s=e.onHover,u=e.highlightData,d=Object(y.useMemo)((function(){return x()(t,"diaID",[])}),[t]),b=Object(y.useCallback)((function(e){i(e)}),[i]),p=Object(y.useMemo)((function(){return n.isActive||n.isOnHover||a.isActive&&!u.highlight.highlighted.find((function(e){return e===n.id}))?{color:"red",fontWeight:"bold"}:{color:"black",fontWeight:"normal"}}),[n.id,n.isActive,n.isOnHover,a.isActive,u.highlight.highlighted]);return Object(P.jsx)("td",Object(g.a)(Object(g.a)(Object(g.a)({},l),s),{},{onClick:function onClick(e){return r(e,n)},children:void 0!==t.pubIntegral&&t.pubIntegral>0?t.diaID&&t.diaID.length>0?Object(P.jsxs)("div",{onMouseEnter:function onMouseEnter(){return b(!0)},onMouseLeave:function onMouseLeave(){return b(!1)},children:[t.pubIntegral," "," ( ",Object(P.jsx)("span",{style:p,children:d.length})," ) ",Object(P.jsx)("sup",{children:Object(P.jsx)("button",{type:"button",style:{visibility:o?"visible":"hidden",padding:0,margin:0},onClick:function onClick(e){return c(e,!0)},children:Object(P.jsx)(He.w,{color:"red"})})})]}):n.isActive?Object(P.jsxs)("div",{children:["".concat(t.pubIntegral," ("),Object(P.jsx)("span",{style:np,children:"0"}),")"]}):t.pubIntegral:n.isActive?Object(P.jsxs)("div",{children:["0 (",Object(P.jsx)("span",{style:np,children:"0"}),")"]}):""}))}RangeAssignmentsColumn.defaultProps={onHover:function onHover(){return null},onUnlinkVisibilityChange:function onUnlinkVisibilityChange(){return null},onLink:function onLink(){return null},onUnlink:function onUnlink(){return null}};var ap=Object(y.memo)(RangeAssignmentsColumn);function RangeColumn(e){var t=e.value,n=e.rowSpanTags,a=e.onHoverRange,i=e.format;return Object(P.jsx)("td",Object(g.a)(Object(g.a)(Object(g.a)({},n),a),{},{children:Ei(t,i)}))}var ip=Object(y.memo)(RangeColumn);function RelativeColumn(e,t){var n=e.rowData,a=e.rowSpanTags,i=e.onHoverRange,o=e.format,r=e.onEditStart,c=e.editStatus,l=useDispatch(),s=Object(y.useMemo)((function(){var e=no(n),t=Ei(n.integral,o);return e?t:"[ ".concat(t," ]")}),[o,n]),u=Object(y.useCallback)((function(e){l({type:zn,value:e.target.value,id:n.id})}),[l,n.id]);return Object(P.jsx)("td",Object(g.a)(Object(g.a)(Object(g.a)({},a),i),{},{children:Object(P.jsx)(Du,{ref:t,onEditStart:r,value:s,onSave:u,type:"number",style:{padding:"0.1rem 0.4rem"},editStatus:c})}))}var op=Object(y.forwardRef)(RelativeColumn);function SignalAssignmentsColumn(e){var t=e.rowData,n=e.onHover,a=e.assignment,i=e.highlight,o=e.onUnlinkVisibilityChange,r=e.unlinkVisibility,c=e.onLink,l=e.onUnlink,s=Object(y.useMemo)((function(){return x()(t,"tableMetaInfo.signal.diaID",[])}),[t]),u=Object(y.useMemo)((function(){return a.isActive||i.isActive?{color:"red",fontWeight:"bold"}:null}),[a.isActive,i.isActive]),d=Object(y.useCallback)((function(e){o(e)}),[o]),b=Object(y.useCallback)((function(e){c(e,a)}),[a,c]);return Object(P.jsx)("td",Object(g.a)(Object(g.a)({},n),{},{onClick:b,style:u,children:s&&s.length>0?Object(P.jsxs)("div",{onMouseEnter:function onMouseEnter(){return d(!0)},onMouseLeave:function onMouseLeave(){return d(!1)},children:[s.length," ",Object(P.jsx)("sup",{children:Object(P.jsx)("button",{type:"button",style:{visibility:r?"visible":"hidden",padding:0,margin:0},onClick:function onClick(e){return l(e,!1)},children:Object(P.jsx)(He.w,{color:"red"})})})]}):a.isActive?"0":""}))}SignalAssignmentsColumn.defaultProps={onHover:function onHover(){return null},onUnlinkVisibilityChange:function onUnlinkVisibilityChange(){return null},onLink:function onLink(){return null},onUnlink:function onUnlink(){return null}};var rp=Object(y.memo)(SignalAssignmentsColumn);function useFormat(e){return function(t,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",o=x()(e,n,"0.000");return Ei(t,o,a,i)}}var cp,lp,sp=function SignalDeltaColumn(e){var t=e.rowData,n=e.onHoverSignal,a=e.preferences,i=e.onEditStart,o=e.editStatus,r=useDispatch(),c=t.tableMetaInfo.signal,l=useFormat(a),s=Object(y.useCallback)((function(e){r({type:Hn,payload:{value:e.target.value,rangeID:t.id,signalID:c.id}})}),[r,t,c.id]),u=Object(y.useCallback)((function(){i(c.id)}),[i,c.id]);return c?Object(P.jsx)("td",Object(g.a)(Object(g.a)({},n),{},{children:checkMultiplicity(c.multiplicity,["m"])?Object(P.jsx)(Du,{onEditStart:u,value:c.delta.toFixed(3),onSave:s,type:"number",style:{padding:"0.1rem 0.4rem"},editStatus:o}):"".concat(l(t.from,"fromFormat")," - ").concat(l(t.to,"toFormat"))})):Object(P.jsx)("td",{children:""})},up=Object(v.b)(cp||(cp=Object(j.a)(["\n  background-color: #ff6f0057;\n"]))),dp=Object(v.b)(lp||(lp=Object(j.a)(["\n  background-color: #f5f5dc;\n"])));var bp=function RangesTableRow(e){var t=e.rowData,n=e.onUnlink,a=e.onContextMenu,i=e.onColumnEditStart,o=e.preferences,r=e.editFlags,c=r.relativeFlags,l=r.signalFlags,s=useAssignment(t.id),u=Object(ri.c)([s.id].concat(s.assigned.x||[])),d=useAssignment(t.tableMetaInfo.id),b=Object(ri.c)([d.id].concat(d.assigned.x||[])),p=Object(ri.d)(),f=Object(y.useState)(!1),h=Object(m.a)(f,2),j=h[0],v=h[1],O=Object(y.useState)(!1),C=Object(m.a)(O,2),k=C[0],S=C[1],D=useFormat(o),w=Object(y.useMemo)((function(){return{rowSpan:t.tableMetaInfo.rowSpan,style:x()(t.tableMetaInfo,"hide",!1)?{display:"none"}:null}}),[t.tableMetaInfo]),T=Object(y.useCallback)((function(e,a){e&&e.stopPropagation(),n(t,a,x()(t,"tableMetaInfo.signalIndex",void 0)),void 0!==a?a?(v(!1),s.removeAll("x")):(S(!1),d.removeAll("x")):(v(!1),S(!1))}),[s,d,n,t]),M=Object(y.useCallback)((function(e,t){e.stopPropagation(),t.onClick("x")}),[]),A=Object(y.useMemo)((function(){return{onMouseEnter:function onMouseEnter(){s.onMouseEnter("x"),u.show()},onMouseLeave:function onMouseLeave(){s.onMouseLeave("x"),u.hide()}}}),[s,u]),E=Object(y.useMemo)((function(){return{onMouseEnter:function onMouseEnter(){d.onMouseEnter("x"),b.show()},onMouseLeave:function onMouseLeave(){d.onMouseLeave("x"),b.hide()}}}),[d,b]),P=Object(y.useMemo)((function(){return u.isActive||s.isActive?up:x()(t,"tableMetaInfo.isConstantlyHighlighted",!1)?dp:null}),[s.isActive,u.isActive,t]);return Object(ve.c)("tr",Object(g.a)(Object(g.a)({onContextMenu:function onContextMenu(e){return a(e,t)},css:P},u.onHover),{},{children:[Object(ve.b)("td",Object(g.a)(Object(g.a)(Object(g.a)({},w),A),{},{children:t.tableMetaInfo.rowIndex+1})),isColumnVisible(o,"showFrom")&&Object(ve.b)(ip,{value:t.from,rowSpanTags:w,onHoverRange:A,format:D("showFrom")}),isColumnVisible(o,"showTo")&&Object(ve.b)(ip,{value:t.to,rowSpanTags:w,onHoverRange:A,format:D("toFormat")}),Object(ve.b)(sp,{rowData:t,onHoverSignal:E,preferences:o,onEditStart:function onEditStart(e){return i("signal","".concat(e))},editStatus:l[t.tableMetaInfo.signal.id]}),isColumnVisible(o,"showRelative")&&Object(ve.b)(op,{rowData:t,rowSpanTags:w,onHoverRange:A,format:D("relativeFormat"),onEditStart:function onEditStart(){return i("relative",t.id)},editStatus:c[t.id]}),isColumnVisible(o,"showAbsolute")&&Object(ve.b)(Db,{value:t.absolute,rowSpanTags:w,onHoverRange:A,format:D("absoluteFormat")}),Object(ve.b)("td",Object(g.a)(Object(g.a)({},E),{},{children:x()(t,"tableMetaInfo.signal.multiplicity","")})),Object(ve.b)(tp,{rowData:t,onHoverSignal:E}),Object(ve.b)(rp,{rowData:t,assignment:d,highlight:b,onHover:E,unlinkVisibility:k,onUnlinkVisibilityChange:function onUnlinkVisibilityChange(e){return S(e)},onLink:M,onUnlink:T}),Object(ve.b)(ap,{rowData:t,assignment:s,highlight:u,onHover:A,unlinkVisibility:j,onUnlinkVisibilityChange:function onUnlinkVisibilityChange(e){return v(e)},onLink:M,onUnlink:T,rowSpanTags:w,highlightData:p}),Object(ve.b)(ep,{rowData:t,onHoverSignal:E,onHoverRange:A,rowSpanTags:w})]}))};var pp,fp=function useMapRanges(e){return Object(y.useMemo)((function(){var t=[];return e.forEach((function(e,n){1===e.signal.length?t.push(Object(g.a)(Object(g.a)({},e),{},{tableMetaInfo:Object(g.a)(Object(g.a)({},e.tableMetaInfo),{},{signal:e.signal[0],rowIndex:n,signalIndex:0,id:e.signal[0].id})})):e.signal.length>1&&e.signal.forEach((function(a,i){var o=!1,r=null;i<e.signal.length-1&&0===i?r=e.signal.length:o=!0,t.push(Object(g.a)(Object(g.a)({},e),{},{tableMetaInfo:Object(g.a)(Object(g.a)({},e.tableMetaInfo),{},{signal:a,rowSpan:r,hide:o,rowIndex:n,signalIndex:i,id:a.id})}))}))})),t}),[e])},hp=Object(v.b)(pp||(pp=Object(j.a)(["\n  border-spacing: 0;\n  border: 1px solid #dedede;\n  width: 100%;\n  font-size: 12px;\n  // height: 100%;\n  .react-contextmenu-wrapper {\n    display: contents;\n  }\n  tr {\n    :last-child {\n      td {\n        border-bottom: 0;\n      }\n    }\n  }\n  th {\n    position: sticky;\n    top: 0;\n    background-color: white;\n    z-index: 1;\n  }\n  th,\n  td {\n    white-space: nowrap;\n    text-align: center;\n    margin: 0;\n    padding: 0.1rem 0.4rem;\n    border-bottom: 1px solid #dedede;\n    border-right: 1px solid #dedede;\n\n    :last-child {\n      border-right: 0;\n    }\n    button {\n      background-color: transparent;\n      border: none;\n    }\n  }\n"])));var gp=function RangesTable(e){var t=e.tableData,n=e.onChangeKind,a=e.onDelete,i=e.onUnlink,o=e.onZoom,r=e.onEdit,c=e.context,l=e.activeTab,s=e.preferences,u=l&&l.replace(/[0-9]/g,""),d=Object(y.useRef)(),b=fp(t),p=yb("id",b),f=Object(m.a)(p,2),h=f[0],g=f[1],j=yb("id",b),v=Object(m.a)(j,2),O=v[0],C=v[1],k=useGlobal().rootRef,S=function isVisible(e){return x()(s,e,!1)},D=Object(y.useCallback)((function(e,t){checkModifierKeyActivated(e)||(e.preventDefault(),d.current.handleContextMenu(e,t))}),[d]),w=Object(y.useCallback)((function(e,t){"relative"===e?g(t):"signal"===e&&C(t)}),[g,C]);return Object(y.useEffect)((function(){var e=function handleEditStart(){w("realtive",null),w("signal",null)};return k&&k.addEventListener("mousedown",e),function(){k&&k.removeEventListener("mousedown",e)}}),[w,k]),Object(ve.c)(y.Fragment,{children:[Object(ve.c)("table",{css:hp,children:[Object(ve.b)("thead",{children:Object(ve.c)("tr",{children:[Object(ve.b)("th",{children:"#"}),S("showFrom")?Object(ve.b)("th",{children:"From"}):null,S("showTo")?Object(ve.b)("th",{children:"To"}):null,Object(ve.b)("th",{children:"\u03b4 (ppm)"}),S("showRelative")?Object(ve.c)("th",{children:["Rel. ",u]}):null,S("showAbsolute")?Object(ve.b)("th",{children:"Absolute"}):null,Object(ve.b)("th",{children:"Mult."}),Object(ve.b)("th",{children:"J (Hz)"}),Object(ve.b)("th",{children:Object(ve.b)(He.u,{style:{fontSize:10}})}),Object(ve.b)("th",{children:"\u03a3"}),Object(ve.b)("th",{children:"Kind"}),Object(ve.b)("th",{children:""})]})}),Object(ve.b)("tbody",{children:b&&b.map((function(e,t){return Object(ve.b)(bp,{rowData:b[t],onChangeKind:n,onDelete:a,onUnlink:i,onZoom:o,onEdit:r,onContextMenu:function onContextMenu(e,t){return D(e,t)},preferences:s,onColumnEditStart:w,editFlags:{relativeFlags:h,signalFlags:O}},"rangesTableRow".concat(t))}))})]}),Object(ve.b)(Tu,{ref:d,context:c})]})},mp={toolbar:{display:"flex",flexDirection:"row",borderBottom:"0.55px solid rgb(240, 240, 240)"},container:{flexDirection:"column",height:"100%",display:"flex"},sumButton:{borderRadius:"5px",marginTop:"3px",color:"white",backgroundColor:"#6d6d6d",border:"none",height:"16px",width:"18px",fontSize:"12px",padding:0},removeAssignmentsButton:{borderRadius:"5px",marginTop:"3px",marginLeft:"2px",border:"none",height:"16px",width:"18px",fontSize:"12px",padding:0},setShowMultiplicityTreesButton:{borderRadius:"5px",marginTop:"3px",marginLeft:"5px",color:"black",backgroundColor:"transparent",border:"none",height:"16px",width:"18px",fontSize:"12px",padding:0},button:{backgroundColor:"transparent",border:"none"}};function RangesTablePanel(e){var t=e.ranges,n=e.x,a=e.y,i=e.info,o=e.xDomain,r=e.preferences,c=e.activeTab,l=e.molecules,s=e.nucleus,u=Object(y.useState)(!1),d=Object(m.a)(u,2),b=d[0],p=d[1],f=useAssignmentData(),h=useDispatch(),j=gc(),v=Object(y.useState)(!1),O=Object(m.a)(v,2),C=O[0],k=O[1],S=Object(y.useRef)(),D=Object(y.useMemo)((function(){var e=function isInView(e,t){var n=1e4;return e*=n,(t*=n)>=o[0]*n&&e<=o[1]*n||e<=o[0]*n&&t>=o[1]*n};return t.values?(b?function getFilteredRanges(t){return t.filter((function(t){return e(t.from,t.to)}))}(t.values):t.values).map((function(t){return Object(g.a)(Object(g.a)({},t),{},{tableMetaInfo:{isConstantlyHighlighted:e(t.from,t.to)}})})):[]}),[b,t.values,o]),w=Object(y.useCallback)((function(e,t,n){h({type:Vn,payload:{rangeData:e,assignmentData:f,isOnRangeLevel:t,signalIndex:n}})}),[f,h]),T=Object(y.useCallback)((function(e){if(n&&a){var t=e.from,i=e.to,o=Object(_e.g)(n,{from:t,to:i}),r=o.fromIndex,c=o.toIndex,l=Object(g.a)({x:n.slice(r,c),y:a.slice(r,c)},e);Object(xc.c)(JSON.stringify(l,void 0,2))?j.show("Data copied to clipboard"):j.error("copy to clipboard failed")}}),[n,a,j]),M=Object(y.useMemo)((function(){return x()(r,"formatting.panels.ranges.[".concat(c,"]"))||pi}),[c,r]),A=Object(y.useMemo)((function(){return[{label:"Copy to clipboard",onClick:T}]}),[T]),E=Object(y.useCallback)((function(){p(!b)}),[b]),I=Object(y.useCallback)((function(){k(!C)}),[C]),F=Object(y.useCallback)((function(){S.current.saveSetting(),k(!1)}),[]);return Object(P.jsx)(P.Fragment,{children:Object(P.jsxs)("div",{style:mp.container,children:[!C&&Object(P.jsx)(jb,{ranges:t,info:i,activeTab:c,molecules:l,onUnlink:w,onFilterActivated:E,onSettingClick:I,isFilterActive:b,filterCounter:D.length}),C&&Object(P.jsx)(Cu,{onSave:F,onClose:I}),Object(P.jsx)("div",{style:{height:"100%",overflow:"hidden"},children:Object(P.jsxs)(_s.a,{isFlipped:C,infinite:!0,containerStyle:{overflow:"hidden",height:"100%"},children:[Object(P.jsx)("div",{style:{overflow:"auto",height:"100%",display:"block"},children:D&&D.length>0?Object(P.jsx)(gp,{activeTab:c,tableData:D,onUnlink:w,context:A,preferences:M}):Object(P.jsx)(Pu,{})}),Object(P.jsx)(Ob,{ranges:t,ref:S,nucleus:s,preferences:r})]})})]})})}var jp=Gi(Object(y.memo)(RangesTablePanel));var vp=function SpectraWraper(e){var t=function Wrapper(t){var n=useChartData(),a=n.data,i=n.activeSpectrum,o=n.activeTab,r=n.displayerMode,c=t.forwardedRef,l=Object(de.a)(t,["forwardedRef"]);return Object(P.jsx)(e,Object(g.a)(Object(g.a)({},l),{},{data:a,activeSpectrum:i,activeTab:o,displayerMode:r,ref:c}))};return Object(y.forwardRef)((function(e,n){return Object(P.jsx)(t,Object(g.a)(Object(g.a)({},e),{},{forwardedRef:n}))}))},Op={from:-1,to:1,nbPoints:1024};var xp=function ExportAsMatrixModal(e){var t=e.onClose,n=Object(y.useRef)(),a=useChartData().data,i=Object(y.useCallback)((function(){n.current.submitForm()}),[]),o=Object(y.useCallback)((function(e){Object(xc.e)(a,e,"fileName"),t()}),[a,t]);return Object(y.useEffect)((function(){return ti.on("brushEnd",(function(e){var t=Object(m.a)(e.range,2),a=t[0],i=t[1];n.current.setValues(Object(g.a)(Object(g.a)({},n.current.values),{},{from:a,to:i}))})),function(){ti.off("brushEnd")}}),[]),Object(ve.c)("div",{css:cd,children:[Object(ve.c)("div",{className:"header handle",children:[Object(ve.b)("span",{children:"Export spectra as a Matrix"}),Object(ve.b)(Ge,{onClick:t,className:"close-bt"})]}),Object(ve.b)("div",{className:"inner-content",children:Object(ve.c)(qc,{ref:n,initialValues:Op,onSubmit:o,children:[Object(ve.c)("div",{className:"row margin-10",children:[Object(ve.b)("span",{className:"custom-label",children:"Range :"}),Object(ve.b)(gl,{label:"From : ",name:"from",type:"number"}),Object(ve.b)(gl,{label:"To :",name:"to",type:"number"})]}),Object(ve.c)("div",{className:"row margin-10",children:[Object(ve.b)("span",{className:"custom-label",children:"Number of Points : "}),Object(ve.b)(gl,{name:"nbPoints",type:"number"})]})]})}),Object(ve.b)("div",{className:"footer-container",children:Object(ve.b)("button",{type:"button",onClick:i,className:"save-button",children:"Export Now"})})]})};function SpectraPanelHeader(e){var t=e.data,n=e.activeSpectrum,a=e.activeTab,i=e.displayerMode,o=e.spectrums,r=te(),c=gc(),l=useDispatch(),s=Object(y.useCallback)((function(){r.showConfirmDialog({message:"All records will be deleted, Are You sure?",buttons:[{text:"Yes",handler:function handler(){l({type:Jt})}},{text:"No"}]})}),[l,r]),u=Object(y.useCallback)((function(){var e=o.map((function(e){return e.id}));l({type:Nt,id:e})}),[l,o]),d=Object(y.useCallback)((function(){l({type:Nt,id:[]})}),[l]),b=Object(y.useCallback)((function(){var e=function getMissingProjection(e){var t=a.split(",");t=t[0]===t[1]?[t[0]]:t;var n,i=[],o=Object(Yr.a)(t);try{var r=function _loop(){var t=n.value;e.some((function(e){return e.info.nucleus===t}))||i.push(t)};for(o.s();!(n=o.n()).done;)r()}catch(c){o.e(c)}finally{o.f()}return i}(t);e.length>0?l({type:_n,nucleus:e}):c.error("Nothing to calculate")}),[a,c,t,l]),p=Object(y.useCallback)((function(){l({type:aa})}),[l]),f=Object(y.useCallback)((function(){l({type:ia})}),[l]),h=Object(y.useCallback)((function(){l({type:xn}),r.show(Object(P.jsx)(xp,{}),{isBackgroundBlur:!1,position:U.TOP_CENTER,width:500})}),[r,l]);return Object(P.jsxs)(ju,{onDelete:s,counter:o&&o.length,deleteToolTip:"Delete all spectra",children:[Object(P.jsx)(Gu,{popupTitle:"Hide all spectra",onClick:d,children:Object(P.jsx)(He.m,{})}),Object(P.jsx)(Gu,{popupTitle:"Show all spectra",onClick:u,children:Object(P.jsx)(He.l,{})}),n&&a&&a.split(",").length>1&&Object(P.jsx)(Gu,{popupTitle:"Add missing projection",onClick:b,children:Object(P.jsx)(He.f,{})}),i===or.DM_1D&&Object(P.jsxs)(P.Fragment,{children:[Object(P.jsx)(Gu,{popupTitle:"Reset Scale",onClick:f,children:Object(P.jsx)(Rs.s,{})}),Object(P.jsx)(Gu,{popupTitle:"Same Top",onClick:p,children:Object(P.jsx)(Rs.t,{})}),Object(P.jsx)(Gu,{popupTitle:"Export spectra as a Matrix",onClick:h,children:Object(P.jsx)(He.p,{})})]})]})}var yp=vp(Object(y.memo)(SpectraPanelHeader));function getNucleusSum(e){var t=e.split(",");return t.reduce((function(e,n){var a=2===t.length?100:0;return e+=Number(n.replace(/\D/g,""))+a}),0)}var Cp=function GroupByInfoKey(e){return function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=t.reduce((function(t,n){var a=n.info[e];return t[a]=(t[a]||[]).concat(n),t}),{});return n?Object.keys(a).sort((function(e,t){return getNucleusSum(e)-getNucleusSum(t)})).reduce((function(e,t){return e[t]=a[t],e}),{}):a}};function ColorIndicator1D(e){var t=e.color,n=e.activated;return Object(P.jsx)("div",{style:{backgroundColor:t,height:"12px",width:"12px",opacity:n?1:.1,display:"inline-block"}})}function ColorIndicator2D(e){var t=e.positiveColor,n=e.negativeColor,a=e.activated;return Object(P.jsx)("svg",{width:"12",height:"12",viewBox:"0 0 12 12",opacity:a?1:.1,children:Object(P.jsxs)("g",{children:[Object(P.jsx)("path",{d:"M0,0H12L0,12Z",fill:t,strokeWidth:"0"}),Object(P.jsx)("path",{d:"M12,12H0L12,0Z",fill:n,strokeWidth:"0"})]})})}function ColorIndicator(e){var t=e.dimension,n=e.color,a=e.activated,i=e.onClick,o=e.style;return Object(P.jsx)("button",{style:o,type:"button",onClick:i,children:2===t?Object(P.jsx)(ColorIndicator2D,Object(g.a)(Object(g.a)({},n),{},{activated:a})):Object(P.jsx)(ColorIndicator1D,Object(g.a)({activated:a},n))})}var kp=Object(y.memo)(ColorIndicator);var Sp=function ShowHideMarkersButton(e){var t=e.data,n=e.onChangeMarkersVisibility,a=e.markersVisible,i=e.style;return Object(P.jsx)("button",{style:Object(g.a)(Object(g.a)({},i),{},{opacity:function isMarkerVisible(e){return-1!==a.findIndex((function(t){return t.id===e}))}(t.id)&&t.peaks&&t.peaks.values.length>0?1:.1}),type:"button",onClick:function onClick(){return n(t)},disabled:t.peaks&&0===t.peaks.values.length,children:Object(P.jsx)(Rs.o,{})})};var Dp=function ShowHideSpectrumButton(e){var t=e.data,n=e.onChangeVisibility,a=e.style,i=function isVisible(e,n){return!t||t.display[n]};return Object(P.jsxs)(P.Fragment,{children:[1===t.info.dimension&&Object(P.jsx)("button",{style:a,type:"button",onClick:function onClick(){return n(t,"isVisible")},children:Object(P.jsx)(He.l,{style:Object(g.a)({fill:t.display.color},i(t.id,"isVisible")?{opacity:1,strokeWidth:"1px",fill:t.display.color}:{opacity:.1,fill:t.display.color})})}),2===t.info.dimension&&Object(P.jsxs)("div",{style:{minWidth:"40px"},children:[Object(P.jsx)("button",{style:Object(g.a)(Object(g.a)({},a),{},{width:"20px",minWidth:"20px"}),type:"button",onClick:function onClick(){return n(t,"isPositiveVisible")},children:Object(P.jsx)(He.l,{style:Object(g.a)({fill:t.display.positiveColor},i(t.id,"isPositiveVisible")?{opacity:1,strokeWidth:"1px",fill:t.display.positiveColor}:{opacity:.1,fill:t.display.positiveColor})})}),Object(P.jsx)("button",{style:Object(g.a)(Object(g.a)({},a),{},{width:"20px",minWidth:"20px"}),type:"button",onClick:function onClick(){return n(t,"isNegativeVisible")},children:Object(P.jsx)(He.l,{style:Object(g.a)({fill:t.display.negativeColor},i(t.id,"isNegativeVisible")?{opacity:1,strokeWidth:"1px",fill:t.display.negativeColor}:{opacity:.1,fill:t.display.negativeColor})})})]})]})},wp={button:{backgroundColor:"transparent",border:"none",width:"26px",minWidth:"26px"},row:{display:"flex",alignContent:"center",height:"25px",borderBottom:"0.55px solid #f1f1f1"},name:{flex:1,height:"100%",display:"flex"},info:{flex:"1 1 1px",height:"100%",display:"block",alignItems:"center",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",lineHeight:"24px"},icon:{display:"flex",margin:"auto",justifyContent:"center"}};function SpectrumListItem(e){var t=e.activeSpectrum,n=e.markersVisible,a=e.data,i=e.onChangeVisibility,o=e.onChangeMarkersVisibility,r=e.onChangeActiveSpectrum,c=e.onOpenSettingModal,l=e.onContextMenu,s=t&&t.id===a.id,u=a.display,d=u.color,b=u.name,p=u.positiveColor,f=u.negativeColor;return Object(P.jsxs)("div",{style:Object(g.a)(Object(g.a)({},wp.row),s?{backgroundColor:"#fafafa"}:{opacity:t?.2:1}),onContextMenu:l,children:[Object(P.jsx)(Dp,{data:a,onChangeVisibility:i,style:wp.button}),Object(P.jsxs)("div",{style:wp.name,onClick:function onClick(){return r(a)},children:[Object(P.jsx)("div",{style:Object(g.a)(Object(g.a)({},wp.icon),{},{width:"16px"}),children:a.info.isFid?Object(P.jsx)(Rs.f,{}):2===a.info.dimension?Object(P.jsx)(Rs.a,{}):Object(P.jsx)(Rs.h,{})}),Object(P.jsx)("span",{style:wp.info,children:b}),Object(P.jsx)("div",{style:wp.info,dangerouslySetInnerHTML:{__html:a.info&&function formatValueAsHTML(e){return e&&(e=e.replace(/([0-9]+)/g,"<sub>$1</sub>")),e}(a.info.solvent)}}),Object(P.jsxs)("span",{style:wp.info,children:[Object(P.jsx)("span",{style:{borderLeft:"0.55px solid #e5e5e5",paddingRight:"5px"}}),a.info&&a.info.experiment]}),Object(P.jsx)("span",{style:wp.info,children:a.info&&a.info.pulse})]}),Object(P.jsx)(Sp,{data:a,style:Object(g.a)(Object(g.a)({},wp.icon),wp.button),onChangeMarkersVisibility:o,markersVisible:n}),Object(P.jsx)(kp,{style:wp.button,dimension:a.info.dimension,color:{positiveColor:p,color:d,negativeColor:f},activated:s,onClick:function onClick(e){return c(a,e)}})]})}SpectrumListItem.defaultProps={onContextMenu:function onContextMenu(){return null}};var Tp=Object(y.memo)(SpectrumListItem);function FormikColorPicker(e){var t=e.onColorChange,n=e.name,a=Object(de.a)(e,["onColorChange","name"]),i=Object(Wc.f)(),o=i.values,r=i.setFieldValue,c=Object(y.useCallback)((function(e){t(e),r(n,"".concat(e.hex).concat(Math.round(255*e.rgb.a).toString(16)))}),[n,t,r]);return Object(P.jsx)(Nu.SketchPicker,Object(g.a)({color:{hex:x()(o,n,"#000")},presetColors:Zr,onChangeComplete:function onChangeComplete(e){return c(e)}},a))}FormikColorPicker.defaultProps={onColorChange:function onColorChange(){return null}};var Mp=Object(y.memo)(FormikColorPicker);var Ap=function Spectrum1DSetting(e){var t=e.data,n=e.onSubmit,a=Object(y.useRef)(),i=Object(y.useCallback)((function(){a.current&&a.current.submitForm()}),[]);return Object(P.jsx)(qc,{ref:a,initialValues:t,onSubmit:n,children:Object(P.jsx)("div",{children:Object(P.jsx)(Mp,{name:"color",onColorChange:i})})})},Ep=n(710);function FormikSlider(e){var t=e.onAfterChange,n=e.name,a=Object(de.a)(e,["onAfterChange","name"]),i=Object(Wc.f)(),o=i.values,r=i.setFieldValue,c=Object(y.useCallback)((function(e){t(e),r(n,e)}),[n,t,r]);return Object(P.jsx)(Ep.a,Object(g.a)({className:"horizontal-slider",thumbClassName:"thumb",trackClassName:"track",defaultValue:x()(o,n,[0,100]),onAfterChange:c,renderThumb:function renderThumb(e,t){return Object(P.jsx)("div",Object(g.a)(Object(g.a)({},e),{},{children:Object(P.jsx)("span",{children:t.valueNow})}))},pearling:!0,minDistance:10},a))}FormikSlider.defaultProps={onColorChange:function onColorChange(){return null}};var Pp,Ip=Object(y.memo)(FormikSlider);var Fp,Rp=function Spectrum2DSetting(e){var t=e.data,n=e.onSubmit,a=Object(y.useRef)(),i=Object(v.b)(Pp||(Pp=Object(j.a)(["\n    .positive {\n      display: inline-block;\n      .track-1 {\n        background-color: "," !important;\n      }\n    }\n    .negative {\n      display: inline-block;\n\n      .track-1 {\n        background-color: "," !important;\n      }\n    }\n  "])),t.positiveColor,t.negativeColor),o=Object(y.useCallback)((function(){a.current.submitForm()}),[]);return Object(ve.b)(qc,{ref:a,initialValues:t,onSubmit:n,children:Object(ve.c)("div",{css:i,children:[Object(ve.c)("div",{className:"positive",children:[Object(ve.b)("span",{style:{padding:"0 10px"},children:"Positive"}),Object(ve.b)(Mp,{name:"positiveColor",onColorChange:o}),Object(ve.c)("div",{style:{padding:"5px"},children:[Object(ve.b)("span",{className:"label",children:"contour Levels [ min - max ]"}),Object(ve.b)(Ip,{name:"contourOptions.positive.contourLevels",onAfterChange:o}),Object(ve.b)("span",{className:"label",children:"number of Layers "}),Object(ve.b)(gl,{name:"contourOptions.positive.numberOfLayers",onChange:o,type:"number"})]})]}),Object(ve.c)("div",{className:"negative",children:[Object(ve.b)("span",{style:{padding:"0 10px"},children:"Negative"}),Object(ve.b)(Mp,{name:"negativeColor",onColorChange:o}),Object(ve.c)("div",{style:{padding:"5px"},children:[Object(ve.b)("span",{className:"label",children:"contour Levels [ min - max ]"}),Object(ve.b)(Ip,{name:"contourOptions.negative.contourLevels",onAfterChange:o}),Object(ve.b)("span",{className:"label",children:"number of Layers "}),Object(ve.b)(gl,{name:"contourOptions.negative.numberOfLayers",onChange:o,type:"number"})]})]})]})})},Np=Object(v.b)(Fp||(Fp=Object(j.a)(["\n  position: fixed;\n  z-index: 999999999;\n  width:100%;\n  height:100%;\n  left:0;\n  top:0;\n  .ineer-conatiner{\n    position:absolute;\n    display: flex;\n    flex-direction: row-reverse;\n    border-radius: 4px;\n    background-color: white;\n    box-shadow: rgba(0, 0, 0, 0.15) 0px 0px 0px 1px,\n      rgba(0, 0, 0, 0.15) 0px 8px 16px;\n      overflow: auto;\n      height: 350px;\n  }\n\n\n  .sketch-picker {\n    border-radius: none !important;\n    box-shadow: none !important;\n  }\n\n\n  .horizontal-slider {\n    width: 80%;\n    height: 15px;\n  }\n\n  .thumb {\n    height: 15px;\n    line-height: 15px;\n    width: 20px;\n    text-align: center;\n    color: black;\n    border-radius: 5px;\n    cursor: grab;\n    font-size: 10px;\n    background-image: -webkit-linear-gradient(top, #f4f1ee, #fff);\n    background-image: linear-gradient(top, #f4f1ee, #fff);\n  }\n\n  .track {\n    top: 0;\n    bottom: 0;\n    background: #eaeaea;\n    border-radius: 999px;\n    border-radius: 5px;\n  }\n\n  .track-1 {\n    background: red;\n  }\n   \n  .label{\n    font-size: 12px;\n    margin: 8px 0;\n    display: block;\n  }\n \n  }\n"])));function SpectrumSetting(e){var t=e.position,n=e.data,a=n.id,i=n.info,o=n.display,r=e.onClose,c=useDispatch(),l=Object(y.useCallback)((function(e){c({type:Ft,id:a,display:e})}),[c,a]),s=Object(y.useCallback)((function(e){e.target===e.currentTarget&&r()}),[r]),u=t.x,d=t.y;return Object(ve.b)("div",{css:Np,onClick:s,children:Object(ve.b)("div",{className:"ineer-conatiner",style:{left:2===i.dimension?u-450:u-220,padding:2===i.dimension?"10px 0":"",top:d},children:2===i.dimension?Object(ve.b)(Rp,{onSubmit:l,data:o}):Object(ve.b)(Ap,{onSubmit:l,data:o})})})}function arePropsEqual(){return!0}var _p=Object(y.memo)(SpectrumSetting,arePropsEqual);var Lp=vp((function SpectrumsTabs(e){var t=e.data,n=e.activeSpectrum,a=e.activeTab,i=e.onTabChange,o=Object(y.useRef)(),r=Object(y.useState)([]),c=Object(m.a)(r,2),l=c[0],s=c[1],u=Object(y.useState)(null),d=Object(m.a)(u,2),b=d[0],p=d[1],f=Object(y.useState)(null),h=Object(m.a)(f,2),g=h[0],j=h[1],v=Object(y.useState)(!1),O=Object(m.a)(v,2),x=O[0],C=O[1],k=gc(),S=useDispatch();Object(y.useEffect)((function(){if(t){var e=t?t.filter((function(e){return!0===e.display.isPeaksMarkersVisible})):[];s(e)}}),[t,S]);var D=Object(y.useMemo)((function(){return t?Cp("nucleus")(t,!0):[]}),[t]);Object(y.useEffect)((function(){i({tab:a,data:D[a]})}),[a,i,D]);var w=Object(y.useCallback)((function(e){var t=l.findIndex((function(t){return t.id===e.id})),n=Object(wi.a)(l);-1===t?n.push({id:e.id}):n.splice(t,1),S({type:_t,data:n}),s(n)}),[S,l]),T=Object(y.useCallback)((function(e){i({tab:e.tabid,data:D[e.tabid]}),S({type:kn,tab:e.tabid})}),[S,i,D]),M=Object(y.useMemo)((function(){return[{label:"Copy to Clipboard",onClick:function onClick(e){var t=e.x,n=e.y,a=e.info;Object(xc.c)(JSON.stringify({x:t,y:n,info:a},void 0,2))?k.success("Data copied to clipboard"):k.error("Copy to clipboard failed")}},{label:"Delete",onClick:function onClick(e){setTimeout((function(){S({type:Jt,id:e.id})}),0)}}]}),[k,S]),A=Object(y.useCallback)((function(e,t){checkModifierKeyActivated(e)||(e.preventDefault(),o.current.handleContextMenu(e,t))}),[o]),E=Object(y.useCallback)((function(e,t){j({x:t.nativeEvent.clientX,y:t.nativeEvent.clientY}),p(e),C(!0)}),[]),I=Object(y.useCallback)((function(e,t){S({type:Nt,id:e.id,key:t,value:!e.display[t]})}),[S]),F=Object(y.useCallback)((function(e){setTimeout((function(){n&&n.id===e.id?S({type:Lt,data:null}):S({type:Lt,data:{id:e.id}})}),0)}),[n,S]),R=Object(y.useCallback)((function(){C(!1)}),[]);return Object(P.jsxs)(y.Fragment,{children:[Object(P.jsx)(Kc,{defaultTabID:a,onClick:T,children:D&&Object.keys(D).map((function(e){return Object(P.jsx)("div",{tablabel:e,tabid:e,style:{overflow:"auto",height:"100%"},children:D[e]&&D[e].map((function(e){return Object(P.jsx)(Tp,{activeSpectrum:n,markersVisible:l,data:e,onChangeVisibility:I,onChangeMarkersVisibility:w,onChangeActiveSpectrum:F,onOpenSettingModal:E,onContextMenu:function onContextMenu(t){return A(t,e)}},e.id)}))},e)}))}),Object(P.jsx)(Tu,{ref:o,context:M}),x?Object(P.jsx)(_p,{onClose:R,data:b,position:g}):null]})})),zp={overflow:"hidden",height:"100%",display:"flex",flexDirection:"column"};function SpectrumListPanel(e){var t=e.data,n=e.activeSpectrum,a=e.activeTab,i=Object(y.useState)([]),o=Object(m.a)(i,2),r=o[0],c=o[1],l=Object(y.useCallback)((function(e){c(e.data?e.data:[])}),[]);return Object(P.jsxs)("div",{style:zp,children:[Object(P.jsx)(yp,{spectrums:r}),Object(P.jsx)(Lp,{onTabChange:l,data:t,activeSpectrum:n,activeTab:a})]})}var Hp=Object(y.memo)(SpectrumListPanel),Bp=[{key:"outOfLimit",color:"red"},{key:"ambiguousAttachment",color:"orange"},{key:"notAttached",color:"blue"},{key:"incomplete",color:"red"}],Xp=Bp.map((function(e){return e.key})),Vp=[{key:"-",label:"",value:""},{key:"sp",label:"sp",value:"SP"},{key:"sp2",label:"sp2",value:"SP2"},{key:"sp3",label:"sp3",value:"SP3"}],Yp={C:.25,H:.02,N:.25,F:.25,Si:.25,P:.25};function getLabelColor(e,t){var n=x()(e,"state.".concat(t.atomType,".error"),null);if(n)for(var a in Xp)if("incomplete"!==Bp[a].key&&("notAttached"===Bp[a].key||"ambiguousAttachment"===Bp[a].key)&&x()(n,"".concat(Bp[a].key),[]).some((function(n){return e.values[n].id===t.id})))return Bp[a].color;return null}function findSpectrum(e,t){return e.filter((function(e){return e.id===t.experimentID&&!0===e.display.isVisible}))[0]}function findSignal(e,t){for(var n=0;n<e.zones.values.length;n++){var a=e.zones.values[n].signal.findIndex((function(e){return e.id===t.signal.id}));if(a>=0)return e.zones.values[n].signal[a]}}var Zp=function findRangeOrZoneID(e,t){var n=findSpectrum(e,t);if(n)if(1===n.info.dimension){var a=function findRange(e,t){for(var n=0;n<e.ranges.values.length;n++)if(e.ranges.values[n].signal.findIndex((function(e){return e.id===t.signal.id}))>=0)return e.ranges.values[n]}(n,t);if(a)return a.id}else if(2===n.info.dimension){var i=function findZone(e,t){for(var n=0;n<e.zones.values.length;n++)if(e.zones.values[n].signal.findIndex((function(e){return e.id===t.signal.id}))>=0)return e.zones.values[n]}(n,t);if(i)return i.id}};function findSignalMatch2D(e,t,n,a,i,o,r){if(e&&2===e.info.dimension){var c=findSignal(e,t);if(c)return c.x.delta*n>=a&&c.x.delta*n<=i&&c.y.delta*n>=o&&c.y.delta*n<=r}return!1}var Up=function AdditionalColumnHeader(e){var t=e.spectraData,n=e.correlationsData,a=e.correlation,i=Object(y.useMemo)((function(){if(!0===a.pseudo)return[];var e=[a.signal.id,Sr(a.signal.id,"Crosshair_X")],n=Zp(t,a);return n&&e.push(n),a.link.forEach((function(n){if(!1===n.pseudo){e.push(n.signal.id),e.push(Sr(n.signal.id,"Crosshair_X"));var a=Zp(t,n);a&&e.push(a)}})),e}),[a,t]),o=Object(ri.c)(i),r=Object(y.useCallback)((function(e){e.currentTarget.focus(),o.show()}),[o]),c=Object(y.useCallback)((function(e){e.currentTarget.blur(),o.hide()}),[o]),l=Object(y.useMemo)((function(){return{style:Object(g.a)(Object(g.a)({},{color:getLabelColor(n,a)}),{},{backgroundColor:o.isActive?"#ff6f0057":"inherit"}),title:!1===a.pseudo&&[a.experimentType.toUpperCase()].concat(a.link.reduce((function(e,t){return!1!==t.pseudo||t.experimentType===a.experimentType||e.includes(t.experimentType.toUpperCase())||e.push(t.experimentType.toUpperCase()),e}),[])).sort().join("/"),onMouseEnter:r,onMouseLeave:c}}),[a,n,o.isActive,r,c]),s=Object(y.useMemo)((function(){return a.edited.equivalence?{backgroundColor:"#F7F2E0"}:{color:Number.isInteger(a.equivalence)?1===a.equivalence?"#bebebe":"black":"red"}}),[a]);return Object(ve.b)("th",Object(g.a)(Object(g.a)({},l),{},{children:Object(ve.c)("div",{style:{display:"block"},children:[Object(ve.b)("p",{children:a.label.origin}),Object(ve.b)("p",{children:a&&a.signal&&a.signal.delta?a.signal.delta.toFixed(2):""}),Object(ve.b)("p",{style:s,children:Number.isInteger(a.equivalence)?a.equivalence:a.equivalence.toFixed(2)})]})}))},Kp=n(215),Wp=n(214),Gp=n.n(Wp);var qp=function AdditionalColumnField(e){var t=e.rowCorrelation,n=e.columnCorrelation,a=e.commonLinks,i=e.correlations,o=e.spectraData,r=e.onEdit,c=Object(y.useRef)(),l=Object(y.useState)(!1),s=Object(m.a)(l,2),u=s[0],d=s[1],b=Object(y.useMemo)((function(){var e=[];return a.forEach((function(t){if(!1===t.pseudo){e.push(t.signal.id),e.push(Sr(t.signal.id,"Crosshair"));var n=Zp(o,t);n&&e.push(n)}})),e}),[a,o]),p=Object(ri.c)(b),f=Object(y.useCallback)((function(e){e.currentTarget.focus(),p.show()}),[p]),h=Object(y.useCallback)((function(e){e.currentTarget.blur(),p.hide()}),[p]);Object(y.useEffect)((function(){a.some((function(e){return!0===e.pseudo}))?d(!0):d(!1)}),[a]);var j=Object(y.useCallback)((function(e,t){e.preventDefault(),c.current.handleContextMenu(e,t)}),[c]),v=Object(y.useCallback)((function(e,a,o){var c=Gp()(t),l=Gp()(n),s=c.link.filter((function(e){return"hsqc"===e.experimentType||"hmqc"===e.experimentType})).length;if("add"===a){var u=generateID(),d=generateID(),b=Kp.LinkUtilities.buildLink({experimentType:e,experimentID:d,atomType:[l.atomType,c.atomType],id:u,pseudo:!0,signal:{id:generateID(),sign:0}});Kp.CorrelationUtilities.addLink(l,Kp.LinkUtilities.buildLink(Object(g.a)(Object(g.a)({},b),{},{axis:"x",match:[Kp.GeneralUtilities.getCorrelationIndex(i,c)]}))),Kp.CorrelationUtilities.addLink(c,Kp.LinkUtilities.buildLink(Object(g.a)(Object(g.a)({},b),{},{axis:"y",match:[Kp.GeneralUtilities.getCorrelationIndex(i,l)]}))),c.edited.protonsCount||(c.protonsCount=[s+1])}else"remove"===a&&(Kp.CorrelationUtilities.removeLink(c,o.id),Kp.CorrelationUtilities.removeLink(l,o.id),c.edited.protonsCount||(c.protonsCount=s-1>0?[s-1]:[]));r(c,l)}),[t,r,n,i]),O=Object(y.useMemo)((function(){var e=a.find((function(e){return"hsqc"===e.experimentType&&!0===e.pseudo}));return!0===t.pseudo?e?[{label:"remove HSQC",onClick:function onClick(){v("hsqc","remove",e)}}]:[{label:"add HSQC",onClick:function onClick(){v("hsqc","add")}}]:[]}),[a,v,t]),x=Object(y.useMemo)((function(){var e=new Set;return a.forEach((function(t){"hsqc"===t.experimentType||"hmqc"===t.experimentType?e.add(t.signal&&0!==t.signal.sign?"S".concat(1===t.signal.sign?"+":"-"):"S"):"hmbc"===t.experimentType||"cosy"===t.experimentType||"tocsy"===t.experimentType?e.add("M"):"noesy"!==t.experimentType&&"roesy"!==t.experimentType||e.add("NOE")})),Object(wi.a)(e)}),[a]),C=Object(y.useMemo)((function(){return a.reduce((function(e,t){return e.includes(t.experimentType.toUpperCase())||e.push(t.experimentType.toUpperCase()),e}),[]).sort().join("/")}),[a]);return Object(P.jsxs)("td",{onContextMenu:function onContextMenu(e){O.length>0&&j(e,t)},style:{backgroundColor:p.isActive?"#ff6f0057":u?"#F7F2E0":"inherit"},title:C,onMouseEnter:f,onMouseLeave:h,children:[x.join("/"),Object(P.jsx)(Tu,{ref:c,context:O})]})},Jp={marginLeft:2,marginRight:2,border:"none",height:"20px"};var $p,Qp=function CorrelationTableRow(e){var t=e.additionalColumnData,n=e.correlations,a=e.correlation,i=e.styleRow,o=e.styleLabel,r=e.onSaveEditEquivalences,c=e.onChangeHybridization,l=e.onSaveEditProtonsCount,s=e.onEditAdditionalColumnField,u=e.spectraData,d=Object(y.useMemo)((function(){if(!0===a.pseudo)return[];var e=[a.signal.id,Sr(a.signal.id,"Crosshair_Y")],t=Zp(u,a);return t&&e.push(t),a.link.forEach((function(t){if(!1===t.pseudo){e.push(t.signal.id),e.push(Sr(t.signal.id,"Crosshair_Y"));var n=Zp(u,t);n&&e.push(n)}})),e}),[a,u]),b=Object(ri.c)(d),p=Object(y.useCallback)((function(e){r(a,e.target.value)}),[a,r]),f=Object(y.useCallback)((function(e){l(a,e.target.value)}),[a,l]),h=Object(y.useMemo)((function(){return t.map((function(e){var t=[];return a.link.forEach((function(n){e.link.forEach((function(e){if(n.axis!==e.axis&&n.experimentID===e.experimentID&&n.signal.id===e.signal.id){var a=n.experimentType;n.signal&&0!==n.signal.sign&&(a+=" (edited)"),t.push(Kp.LinkUtilities.buildLink(Object(g.a)(Object(g.a)({},n),{},{experimentLabel:a,axis:void 0})))}}))})),Object(P.jsx)(qp,{rowCorrelation:a,columnCorrelation:e,commonLinks:t,correlations:n,spectraData:u,onEdit:s},"addColData_".concat(a.id,"_").concat(e.id))}))}),[t,a,n,s,u]),m=Object(y.useCallback)((function(e){c(a,e)}),[a,c]),j=Object(y.useMemo)((function(){return a.edited.equivalence?{backgroundColor:"#F7F2E0"}:{color:1===a.equivalence?"#bebebe":"black"}}),[a]),v=Object(y.useCallback)((function(e){e.currentTarget.focus(),b.show()}),[b]),O=Object(y.useCallback)((function(e){e.currentTarget.blur(),b.hide()}),[b]),C=Object(y.useMemo)((function(){return{style:Object(g.a)(Object(g.a)({},i),{},{backgroundColor:b.isActive?"#ff6f0057":"inherit"}),title:!1===a.pseudo&&[a.experimentType.toUpperCase()].concat(a.link.reduce((function(e,t){return!1!==t.pseudo||t.experimentType===a.experimentType||e.includes(t.experimentType.toUpperCase())||e.push(t.experimentType.toUpperCase()),e}),[])).sort().join("/"),onMouseEnter:v,onMouseLeave:O}}),[a.experimentType,a.link,a.pseudo,b.isActive,v,O,i]);return Object(P.jsxs)("tr",{style:i,children:[Object(P.jsx)("td",Object(g.a)(Object(g.a)({},Object(g.a)(Object(g.a)({},C),{},{style:Object(g.a)(Object(g.a)({},C.style),{},{styleLabel:o})})),{},{children:Kp.GeneralUtilities.getLabel(n,a)})),Object(P.jsx)("td",Object(g.a)(Object(g.a)({},C),{},{children:x()(a.signal,"delta",!1)?a.signal.delta.toFixed(2):""})),Object(P.jsx)("td",Object(g.a)(Object(g.a)({},C),{},{children:!1===a.pseudo?"H"!==a.atomType?Object(P.jsx)(Du,{type:"number",value:a.equivalence,style:j,onSave:p}):Object(P.jsx)("text",{style:j,children:a.equivalence}):""})),Object(P.jsx)("td",Object(g.a)(Object(g.a)({},C),{},{children:"H"!==a.atomType?Object(P.jsx)(Du,{type:"text",value:a.protonsCount.join(","),style:a.edited.protonsCount?{backgroundColor:"#F7F2E0"}:{},onSave:f}):""})),Object(P.jsx)("td",Object(g.a)(Object(g.a)({},Object(g.a)(Object(g.a)({},C),{},{style:Object(g.a)(Object(g.a)({},C.style),{},{borderRight:"1px solid"})})),{},{children:"H"!==a.atomType?Object(P.jsx)(wb,{onChange:m,data:Vp,value:a.hybridization,style:Object(g.a)(Object(g.a)({},Jp),{},{backgroundColor:a.edited.hybridization?"#F7F2E0":i.backgroundColor,width:"50px"})}):""})),h]})},ef=Object(v.b)($p||($p=Object(j.a)(["\n  overflow: auto;\n  height: 100%;\n  display: block;\n  table {\n    border-spacing: 0;\n    border: 1px solid #dedede;\n    width: 100%;\n    font-size: 12px;\n    height: 100%;\n  }\n  .react-contextmenu-wrapper {\n    display: contents;\n  }\n  tr {\n    :last-child {\n      td {\n        border-bottom: 0;\n      }\n    }\n  }\n  thead tr {\n    background-color: white !important;\n  }\n  th {\n    position: sticky;\n    background-color: white;\n    z-index: 2;\n    top: 0;\n  }\n\n  th,\n  td {\n    white-space: nowrap;\n    text-align: center;\n    margin: 0;\n    padding: 0.4rem;\n    border-bottom: 1px solid #dedede;\n    border-right: 1px solid #dedede;\n\n    :last-child {\n      border-right: 0;\n    }\n    button {\n      background-color: transparent;\n      border: none;\n    }\n  }\n"])));var tf=function CorrelationTable(e){var t=e.correlationsData,n=e.filteredCorrelationsData,a=e.additionalColumnData,i=e.editEquivalencesSaveHandler,o=e.changeHybridizationSaveHandler,r=e.editProtonsCountSaveHandler,c=e.editAdditionalColumnFieldSaveHandler,l=e.showProtonsAsRows,s=e.spectraData,u=Object(y.useMemo)((function(){return n?n.values.filter((function(e){return l?"H"===e.atomType:"H"!==e.atomType})).map((function(e){return Object(ve.b)(Qp,{additionalColumnData:a,correlations:t.values,correlation:e,styleRow:{backgroundColor:"mintcream"},styleLabel:"H"===e.atomType?{color:getLabelColor(t,e)}:{},onSaveEditEquivalences:i,onChangeHybridization:o,onSaveEditProtonsCount:r,onEditAdditionalColumnField:c,spectraData:s},"correlation".concat(e.atomType).concat(e.id))})):[]}),[n,l,a,t,i,o,r,c,s]),d=Object(y.useMemo)((function(){return a.map((function(e){return Object(ve.b)(Up,{spectraData:s,correlationsData:t,correlation:e},"additionalCorrelationHeader_".concat(e.id))}))}),[a,t,s]);return Object(ve.b)("div",{css:ef,children:Object(ve.c)("table",{children:[Object(ve.b)("thead",{children:Object(ve.c)("tr",{children:[Object(ve.b)("th",{children:"Atom"}),Object(ve.b)("th",{children:"\u03b4 (ppm)"}),Object(ve.b)("th",{children:"Equiv"}),Object(ve.b)("th",{children:"#H"}),Object(ve.b)("th",{style:{borderRight:"1px solid"},children:"Hybrid"}),d]})}),Object(ve.b)("tbody",{children:u})]})})};function Overview(e){var t=e.correlationsData;if(!t)return null;var n=Kp.GeneralUtilities.getAtomCounts(t.options.mf);return Object.keys(n).length>0?Object.keys(n).map((function(e,a){var i=t.state[e],o=i?i.error:void 0,r=o?Xp.findIndex((function(e){return void 0!==o[e]})):"black";return Object(P.jsx)("span",{style:{color:i?!0!==i.complete||o&&0!==Object.keys(o).length?r>=0?Bp[r].color:"black":"green":"black"},children:"".concat(e,": ").concat(i?i.current:"-","/").concat(n[e],"   ")},"molFormulaView_".concat(a))})):Object(P.jsx)("p",{style:{fontStyle:"italic",color:"orange"},children:"Molecular formula is not set"})}var nf,af=Object(y.memo)(Overview),of=n(382),rf=Object(v.b)(nf||(nf=Object(j.a)(["\n  text-align: center;\n\n  input {\n    height: 100%;\n    width: 200px;\n    border-radius: 5px;\n    border: 0.55px solid #c7c7c7;\n    margin: 0px 5px 0px 5px;\n    text-align: center;\n  }\n\n  button {\n    flex: 2;\n    padding: 5px;\n    border: 1px solid gray;\n    border-radius: 5px;\n    height: 36px;\n    margin: 0 auto;\n    margin-top: 15px;\n    display: block;\n    width: 20%;\n\n    color: white;\n    background-color: gray;\n  }\n"])));function MolecularFormulaInput(e){var t=e.onSave,n=e.previousMF,a=Object(y.useState)(""),i=Object(m.a)(a,2),o=i[0],r=i[1],c=Object(y.useState)(!0),l=Object(m.a)(c,2),s=l[0],u=l[1],d=Object(y.useState)(!1),b=Object(m.a)(d,2),p=b[0],f=b[1],h=Object(y.useCallback)((function(e){try{return new of.MF(e),!0}catch(t){return!1}}),[]),g=Object(y.useCallback)((function(e){f(!0),h(e.target.value)?(u(!0),r(e.target.value)):(u(!1),r(""))}),[h]),j=Object(y.useCallback)((function(){t(p?o.trim():n)}),[p,o,t,n]);return Object(ve.c)("div",{css:rf,children:[Object(ve.b)("input",{type:"text",onChange:g,defaultValue:n}),Object(ve.b)("button",{type:"button",onClick:j,disabled:!s,children:"Set"})]})}MolecularFormulaInput.defaultProps={onSave:function onSave(){return null}};var cf,lf=MolecularFormulaInput,sf=Object(v.b)(cf||(cf=Object(j.a)(["\n  overflow: auto;\n  width: 400px;\n  height: 550px;\n  padding: 5px;\n  button:focus {\n    outline: none;\n  }\n  .header {\n    height: 24px;\n    border-bottom: 1px solid #f0f0f0;\n    display: flex;\n    align-items: center;\n\n    button {\n      height: 36px;\n      margin: 2px;\n      background-color: transparent;\n      border: none;\n      svg {\n        height: 16px;\n      }\n    }\n  }\n\n  button {\n    flex: 2;\n    padding: 5px;\n    border: 1px solid gray;\n    border-radius: 5px;\n    height: 30px;\n    margin: 0 auto;\n    margin-top: 15px;\n    display: block;\n    width: 20%;\n\n    color: white;\n    background-color: gray;\n  }\n\n  .info {\n    margin-top: 0;\n    margin-bottom: 10px;\n    padding: 0px 10px;\n    width: 100%;\n\n    text-align: center;\n  }\n\n  .optional {\n    margin-top: 20px;\n    margin-bottom: 5px;\n    padding: 0px 10px;\n\n    text-align: center;\n    font-size: 18px;\n    font-weight: bold;\n  }\n  .optional2 {\n    margin-top: 5px;\n    margin-bottom: 25px;\n    padding: 0px 10px;\n    width: 100%;\n\n    text-align: center;\n  }\n"])));function SetMolecularFormulaModal(e){var t=e.onClose,n=e.onSave,a=e.molecules,i=e.previousMF,o=Object(y.useState)(),r=Object(m.a)(o,2),c=r[0],l=r[1];Object(y.useEffect)((function(){a&&a.length>0&&l(0)}),[a]);var s=Object(y.useCallback)((function(e){n(e),t()}),[t,n]),u=Object(y.useCallback)((function(){n(a[c].mf),t()}),[c,a,t,n]),d=Object(y.useCallback)((function(e){l(e)}),[]);return Object(ve.c)("div",{css:sf,children:[Object(ve.b)("div",{className:"header",children:Object(ve.b)(Ge,{onClick:t})}),Object(ve.b)("div",{children:Object(ve.b)("p",{className:"info",children:"Please type in a molecular formula!"})}),Object(ve.b)(lf,{onSave:s,previousMF:i}),Object(ve.c)("div",{children:[Object(ve.b)("p",{className:"optional",children:"OR"}),Object(ve.b)("p",{className:"optional2",children:"Select a molecule as reference!"})]}),Object(ve.b)(iu,{molecules:a,onChange:d}),Object(ve.b)("button",{type:"button",onClick:u,children:"Set"})]})}SetMolecularFormulaModal.defaultProps={onSave:function onSave(){return null},onClose:function onClose(){return null}};var uf,df=SetMolecularFormulaModal,bf=Object(v.b)(uf||(uf=Object(j.a)(["\n  overflow: auto;\n  width: 300px;\n  height: 300px;\n  padding: 5px;\n  button:focus {\n    outline: none;\n  }\n  text-align: center;\n\n  .header {\n    height: 24px;\n    border-bottom: 1px solid #f0f0f0;\n    display: flex;\n    align-items: center;\n\n    button {\n      height: 36px;\n      margin: 2px;\n      background-color: transparent;\n      border: none;\n      svg {\n        height: 16px;\n      }\n    }\n  }\n\n  button {\n    flex: 2;\n    padding: 5px;\n    border: 1px solid gray;\n    border-radius: 5px;\n    height: 30px;\n    margin: 0 auto;\n    margin-top: 15px;\n    display: block;\n    width: 20%;\n\n    color: white;\n    background-color: gray;\n  }\n\n  .info {\n    margin-top: 0;\n    margin-bottom: 10px;\n    padding: 0px 10px;\n    width: 100%;\n\n    text-align: center;\n  }\n\n  input {\n    border-radius: 5px;\n    border: 0.55px solid #c7c7c7;\n    margin: 0px 5px 0px 5px;\n    text-align: center;\n  }\n"])));function SetShiftToleranceModal(e){var t=e.onClose,n=e.onSave,a=e.previousTolerance,i=Object(y.useState)(),o=Object(m.a)(i,2),r=o[0],c=o[1];Object(y.useEffect)((function(){c(a||void 0)}),[a]);var l=Object(y.useCallback)((function(){n(r),t()}),[t,n,r]),s=Object(y.useCallback)((function(e,t){return c(Object(g.a)(Object(g.a)({},r),{},Object(ce.a)({},t,Number(e.target.value))))}),[r]),u=Object(y.useMemo)((function(){return r?Object.keys(r).map((function(e){return Object(ve.c)("div",{className:"input-field",children:[Object(ve.c)("span",{children:[e,": "]}),Object(ve.b)("input",{type:"number",onChange:function onChange(t){return s(t,e)},defaultValue:r[e]})]},"toleranceInputField_".concat(e))})):void 0}),[s,r]);return Object(ve.c)("div",{css:bf,children:[Object(ve.b)("div",{className:"header",children:Object(ve.b)(Ge,{onClick:t})}),Object(ve.b)("div",{children:Object(ve.b)("p",{className:"info",children:"Shift tolerances: "})}),u,Object(ve.b)("button",{type:"button",onClick:l,children:"Set"})]})}SetShiftToleranceModal.defaultProps={onSave:function onSave(){return null},onClose:function onClose(){return null}};var pf,ff=SetShiftToleranceModal,hf=Object(v.b)(pf||(pf=Object(j.a)(["\n  display: flex;\n  flex-direction: column;\n  text-align: center;\n  height: 100%;\n  width: 100%;\n  justify-content: center,\n  align-items: 'center',\n\n  button {\n    border-radius: 5px;\n    margin-top: 3px;\n    margin-left: 2px;\n    border: none;\n    height: 16px;\n    width: 18px;\n    font-size: 12px;\n    padding: 0;\n    background-color: transparent;\n  }\n\n  .overview-container {\n    width: 100%;\n    margin-left: 15px;\n    white-space: nowrap;\n    span {\n      margin-left: 8px;\n    }\n  }\n\n  .homoHeteroKinds-container {\n    width: 100%;\n    margin-left: 15px;\n    span {\n      margin-left: 7px;\n    }\n  }\n\n\n"])));function SummaryPanel(){var e=useChartData(),t=e.molecules,n=e.correlations,a=e.data,i=e.xDomain,o=e.yDomain,r=e.displayerMode,c=e.activeTab,l=useDispatch(),s=te(),u=Object(y.useState)([]),d=Object(m.a)(u,2),b=d[0],p=d[1],f=Object(y.useState)("-"),h=Object(m.a)(f,2),j=h[0],v=h[1],O=Object(y.useState)(!1),x=Object(m.a)(O,2),C=x[0],k=x[1],S=Object(y.useState)(!1),D=Object(m.a)(S,2),w=D[0],T=D[1],M=Object(y.useMemo)((function(){var e=function isInView(e){if(!0===e.pseudo)return!1;var t=c.split(",").map((function(e){return function getAtomType(e){return e.split(/\d+/)[1]}(e)})),n=1e4,l=i[0]*n,s=i[1]*n,u=o[0]*n,d=o[1]*n;if(r===or.DM_1D){var b=e.signal.delta*n;if(findSpectrum(a,e)&&t[0]===e.atomType&&b>=l&&b<=s)return!0;if(e.link.some((function(e){return function findSignalMatch1D(e,t,n,a,i){if(e&&2===e.info.dimension){var o=findSignal(e,t);if(o){var r="x"===t.axis?"y":"x";return o[r].delta*n>=a&&o[r].delta*n<=i}}return!1}(findSpectrum(a,e),e,n,l,s)})))return!0}else if(r===or.DM_2D){if(!t.includes(e.atomType))return!1;if(findSignalMatch2D(findSpectrum(a,e),e,n,l,s,u,d))return!0;if(e.link.some((function(e){return findSignalMatch2D(findSpectrum(a,e),e,n,l,s,u,d)})))return!0}return!1};if(n){var t=w?n.values.filter((function(t){return e(t)})):n.values;return Object(g.a)(Object(g.a)({},n),{},{values:t})}}),[c,n,r,w,a,i,o]),A=Object(y.useCallback)((function(e){l({type:Gt,payload:{mf:e}})}),[l]),E=Object(y.useCallback)((function(e){l({type:qt,payload:{tolerance:e}})}),[l]),P=Object(y.useCallback)((function(){s.show(Object(ve.b)(df,{onClose:function onClose(){return s.close()},onSave:A,molecules:t,previousMF:n.options.mf}))}),[n,A,s,t]),I=Object(y.useCallback)((function(){s.show(Object(ve.b)(ff,{onClose:function onClose(){return s.close()},onSave:E,previousTolerance:n.options.tolerance}))}),[n,E,s]),F=Object(y.useMemo)((function(){var e=["-"].concat(n?n.values.map((function(e){return e.atomType})).filter((function(e,t,n){return n.indexOf(e)===t})):[]);return e.includes("H")&&e.push("H-H"),e.includes("H")?v("H"):v("-"),e.map((function(e){return{key:e,label:e,value:e}}))}),[n]);Object(y.useEffect)((function(){var e=j.split("-")[0];p(M?M.values.filter((function(t){return t.atomType===e})).reverse():[])}),[M,j]);var R=Object(y.useCallback)((function(e,t){l({type:Kt,payload:{id:e.id,correlation:Object(g.a)(Object(g.a)({},e),{},{equivalence:t,edited:Object(g.a)(Object(g.a)({},e.edited),{},{equivalence:!0})})}})}),[l]),N=Object(y.useCallback)((function(e,t){var n;t.match(/^([0-9],{0,1})+$/g)?n=t.split(",").filter((function(e){return e.length>0})).map((function(e){return Number(e)})):0===t.trim().length&&(n=[]),n&&l({type:Kt,payload:{id:e.id,correlation:Object(g.a)(Object(g.a)({},e),{},{protonsCount:n,edited:Object(g.a)(Object(g.a)({},e.edited),{},{protonsCount:!0})})}})}),[l]),_=Object(y.useCallback)((function(e,t){l({type:Kt,payload:{id:e.id,correlation:Object(g.a)(Object(g.a)({},e),{},{hybridization:t,edited:Object(g.a)(Object(g.a)({},e.edited),{},{hybridization:!0})})}})}),[l]),L=Object(y.useCallback)((function(e,t){l({type:Wt,payload:{ids:[e.id,t.id],correlations:[Object(g.a)(Object(g.a)({},e),{},{edited:Object(g.a)(Object(g.a)({},e.edited),{},{additionalColumnField:!0})}),Object(g.a)(Object(g.a)({},t),{},{edited:Object(g.a)(Object(g.a)({},t.edited),{},{additionalColumnField:!0})})]}})}),[l]),z=Object(y.useCallback)((function(){T(!w)}),[w]);return Object(ve.c)("div",{css:hf,children:[Object(ve.c)(ju,{canDelete:!1,counter:n?n.values.length:0,onFilter:z,filterToolTip:w?"Show all correlations":"Hide correlations out of view",filterIsActive:w,counterFiltered:M&&M.values.length,children:[Object(ve.b)(Ze,{title:"Set molecular formula (".concat(n.options.mf,")"),popupPlacement:"right",children:Object(ve.b)("button",{type:"button",onClick:P,children:Object(ve.b)(He.t,{})})}),Object(ve.b)(Ze,{title:"Set shift tolerance",popupPlacement:"right",children:Object(ve.b)("button",{type:"button",onClick:I,children:Object(ve.b)(He.F,{})})}),Object(ve.b)("div",{className:"overview-container",children:Object(ve.b)(af,{correlationsData:n})}),Object(ve.b)("div",{className:"homoHeteroKinds-container",children:Object(ve.b)(wb,{onChange:function onChange(e){v(e),k("H-H"===e)},data:F,value:j,style:{width:"65px",height:"20px",border:"1px solid grey"}})})]}),Object(ve.b)(tf,{correlationsData:n,filteredCorrelationsData:M,additionalColumnData:b,editEquivalencesSaveHandler:R,changeHybridizationSaveHandler:_,editProtonsCountSaveHandler:N,editAdditionalColumnFieldSaveHandler:L,showProtonsAsRows:C,spectraData:a})]})}var gf=Object(y.memo)(SummaryPanel),mf={container:{padding:10,backgroundColor:"#f1f1f1",height:"100%",flex:1},groupContainer:{padding:"5px",borderRadius:"5px",margin:"10px 0px",backgroundColor:"white"},row:{display:"flex",margin:"5px 0px"},header:{borderBottom:"1px solid #e8e8e8",paddingBottom:"5px",fontWeight:"bold",color:"#4a4a4a"},inputLabel:{flex:2,fontSize:"11px",fontWeight:"bold",color:"#232323"},input:{width:"30%",textAlign:"center"}},jf=[{id:1,label:"From :",checkController:"showFrom",formatController:"fromFormat",defaultFormat:"0.00"},{id:2,label:"To :",checkController:"showTo",formatController:"toFormat",defaultFormat:"0.00"},{id:3,label:"Absolute :",checkController:"showAbsolute",formatController:"absoluteFormat",defaultFormat:"0.00"},{id:4,label:"Relative :",checkController:"showRelative",formatController:"relativeFormat",defaultFormat:"00.00"}];function ZonesPreferences(e,t){var n=e.nucleus,a=gc(),i=useStateWithLocalStorage("nmr-general-settings"),o=Object(m.a)(i,2)[1],r=usePreferences(),c=Object(y.useState)(null),l=Object(m.a)(c,2),s=l[0],u=l[1],d=Object(y.useRef)();Object(y.useEffect)((function(){var e=rt(r,"formatting.panels.zones");e&&u(e)}),[r]);var b=function saveToLocalStorgate(e){o(e,"formatting.panels.ranges")},p=Object(y.useCallback)((function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];r.dispatch({type:tl,payload:{key:"zones",value:e}}),t&&a.success("zones preferences saved successfully")}),[a,r]);Object(y.useImperativeHandle)(t,(function(){return{saveSetting:function saveSetting(){"function"===typeof d.current.requestSubmit?d.current.requestSubmit():d.current.dispatchEvent(new Event("submit",{cancelable:!0}))}}}));var f=function(){var e=Object(Mo.a)(To.a.mark((function _callee(e){var t,n,a,i,o,r,c,l;return To.a.wrap((function _callee$(s){for(;;)switch(s.prev=s.next){case 0:e.preventDefault(),t=e.target,n=new FormData(t),a={},i=Object(Yr.a)(n.entries());try{for(i.s();!(o=i.n()).done;)r=o.value,c=r[0].split("-").join("."),l=["true","false"].includes(r[1])?"true"===r[1]:r[1],a=it()(a,c,l)}catch(u){i.e(u)}finally{i.f()}p(a,!0),b(a);case 8:case"end":return s.stop()}}),_callee)})));return function handleSubmit(t){return e.apply(this,arguments)}}(),h=Object(y.useCallback)((function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var a=t.join(".");if(s){var i=x()(s,a);return i||null}var o=t.length-1;return pi[t[o]]}),[s]);return Object(P.jsx)("div",{style:mf.container,children:Object(P.jsx)("form",{onSubmit:f,ref:d,children:n&&n.map((function(e){return Object(P.jsxs)("div",{style:mf.groupContainer,children:[Object(P.jsx)(nd,{style:mf.header,value:e}),jf.map((function(t){return Object(P.jsx)(Hu,{label:t.label,checked:h(e,t.checkController),format:h(e,t.formatController),checkControllerName:t.checkController,formatControllerName:t.formatController,groupID:e},t.id)}))]},e)}))})})}var vf=vr(Object(y.memo)(Object(y.forwardRef)(ZonesPreferences))),Of={marginLeft:2,marginRight:2,border:"none",height:"20px"};var xf=function ActionsColumn_ActionsColumn(e){var t=e.rowData,n=e.rowSpanTags,a=useDispatch(),i=useAssignmentData(),o=Object(y.useCallback)((function(e){a({type:Qn,payload:{rowData:t,value:e}})}),[a,t]),r=Object(y.useCallback)((function(){a({type:Nn,payload:{id:t.id,assignmentData:i}})}),[i,a,t]),c=Object(y.useCallback)((function(){var e=10*Math.abs(t.x.from-t.x.to);a({type:wt,xDomain:t.x.from<=t.x.to?[t.x.from-e,t.x.to+e]:[t.x.to-e,t.x.from+e]});var n=10*Math.abs(t.y.from-t.y.to);a({type:Tt,yDomain:t.y.from<=t.y.to?[t.y.from-n,t.y.to+n]:[t.y.to-n,t.y.from+n]})}),[a,t.x.from,t.x.to,t.y.from,t.y.to]);return Object(P.jsxs)(y.Fragment,{children:[Object(P.jsx)("td",{children:Object(P.jsx)(wb,{onChange:function onChange(e){o(e)},data:qi,value:t.tableMetaInfo.signal.kind,style:Of})}),Object(P.jsxs)("td",Object(g.a)(Object(g.a)({},n),{},{children:[Object(P.jsx)("button",{type:"button",className:"delete-button",onClick:r,children:Object(P.jsx)(He.B,{})}),Object(P.jsx)("button",{type:"button",className:"zoom-button",onClick:c,children:Object(P.jsx)(He.D,{title:"Zoom to zone in spectrum"})})]}))]})};var yf=function SignalAssignmentsColumn_SignalAssignmentsColumn(e){var t=e.rowData,n=e.assignment,a=e.highlight,i=e.onHover,o=e.onClick,r=e.onUnlink,c=e.axis,l=e.showUnlinkButton,s=e.setShowUnlinkButton;return Object(P.jsx)("td",Object(g.a)(Object(g.a)({},i),{},{onClick:function onClick(e){return o(e,n,c)},style:a.isActive||n.isActive&&n.activeAxis===c?{color:"red",fontWeight:"bold"}:null,children:x()(t,"tableMetaInfo.signal.".concat(c,".diaID"),[]).length>0?Object(P.jsxs)("div",{onMouseEnter:function onMouseEnter(){return s(!0)},onMouseLeave:function onMouseLeave(){return s(!1)},children:[t.tableMetaInfo.signal[c].diaID.length," ",Object(P.jsx)("sup",{children:Object(P.jsx)("button",{type:"button",style:{visibility:l?"visible":"hidden",padding:0,margin:0},onClick:function onClick(e){return r(e,!1,c)},children:Object(P.jsx)(He.w,{color:"red"})})})]}):n.isActive&&n.activeAxis===c?"0":""}))};var Cf=function SignalAssignmentsColumns(e){var t=e.rowData,n=e.assignmentSignal,a=e.onHoverSignalX,i=e.onHoverSignalY,o=e.showUnlinkButtonSignalX,r=e.showUnlinkButtonSignalY,c=e.setShowUnlinkButtonSignalX,l=e.setShowUnlinkButtonSignalY,s=e.onClick,u=e.onUnlink,d=e.highlightSignalX,b=e.highlightSignalY;return Object(P.jsxs)(y.Fragment,{children:[Object(P.jsx)(yf,{rowData:t,assignment:n,highlight:d,onHover:a,onClick:s,onUnlink:u,axis:"x",showUnlinkButton:o,setShowUnlinkButton:c}),Object(P.jsx)(yf,{rowData:t,assignment:n,highlight:b,onHover:i,onClick:s,onUnlink:u,axis:"y",showUnlinkButton:r,setShowUnlinkButton:l})]})};var kf=function SignalDeltaColumn_SignalDeltaColumn(e){var t=e.rowData,n=e.onHoverSignalX,a=e.onHoverSignalY,i=useDispatch(),o=x()(t,"tableMetaInfo.signal.x.delta",null),r=x()(t,"tableMetaInfo.signal.y.delta",null),c=x()(t,"tableMetaInfo.signal.id",void 0),l=Object(y.useCallback)((function(e){var n=e.target.value;i({type:$n,payload:{zoneID:t.id,signal:{id:c,x:n}}})}),[i,c,t.id]),s=Object(y.useCallback)((function(e){var n=e.target.value;i({type:$n,payload:{zoneID:t.id,signal:{id:c,y:n}}})}),[i,c,t.id]);return Object(P.jsxs)(y.Fragment,{children:[Object(P.jsx)("td",Object(g.a)(Object(g.a)({},n),{},{children:null!==o?Object(P.jsx)(Du,{value:o.toFixed(2),onSave:l,type:"number",style:{padding:"0.1rem 0.4rem"}}):""})),Object(P.jsx)("td",Object(g.a)(Object(g.a)({},a),{},{children:null!==r?Object(P.jsx)(Du,{value:r.toFixed(2),onSave:s,type:"number",style:{padding:"0.1rem 0.4rem"}}):""}))]})};var Sf=function ZoneAssignmentColumn(e){var t=e.rowData,n=e.assignment,a=e.highlight,i=e.onHover,o=e.onClick,r=e.onUnlink,c=e.axis,l=e.showUnlinkButton,s=e.setShowUnlinkButton,u=e.rowSpanTags;return Object(P.jsx)("td",Object(g.a)(Object(g.a)(Object(g.a)({},u),i),{},{onClick:function onClick(e){return o(e,n,c)},children:x()(t,"".concat(c,".pubIntegral"),0)>0?x()(t,"".concat(c,".diaID"),[]).length>0?Object(P.jsxs)("div",{onMouseEnter:function onMouseEnter(){return s(!0)},onMouseLeave:function onMouseLeave(){return s(!1)},children:[t[c].pubIntegral," ","(",Object(P.jsx)("span",{style:n.isActive&n.activeAxis===c||n.isOnHover&n.onHoverAxis===c||a.isActive?{color:"red",fontWeight:"bold"}:{color:"black",fontWeight:"normal"},children:x()(t,"".concat(c,".diaID"),[]).length}),")"," ",Object(P.jsx)("sup",{children:Object(P.jsx)("button",{type:"button",style:{visibility:l?"visible":"hidden",padding:0,margin:0},onClick:function onClick(e){return r(e,!0,c)},children:Object(P.jsx)(He.w,{color:"red"})})})]}):n.isActive&&n.activeAxis===c?Object(P.jsxs)("div",{children:["".concat(x()(t,"".concat(c,".pubIntegral"),"")," ("),Object(P.jsx)("span",{style:{color:"red",fontWeight:"bold"},children:"0"}),")"]}):t[c].pubIntegral:n.isActive&&n.activeAxis===c?Object(P.jsxs)("div",{children:["0 (",Object(P.jsx)("span",{style:{color:"red",fontWeight:"bold"},children:"0"}),")"]}):""}))};var Df=function ZoneAssignmentsColumns(e){var t=e.rowData,n=e.assignmentZone,a=e.onHoverZoneX,i=e.onHoverZoneY,o=e.showUnlinkButtonZoneX,r=e.showUnlinkButtonZoneY,c=e.setShowUnlinkButtonZoneX,l=e.setShowUnlinkButtonZoneY,s=e.rowSpanTags,u=e.onClick,d=e.onUnlink,b=e.highlightZoneX,p=e.highlightZoneY;return Object(P.jsxs)(y.Fragment,{children:[Object(P.jsx)(Sf,{rowData:t,assignment:n,highlight:b,onHover:a,onClick:u,onUnlink:d,axis:"x",showUnlinkButton:o,setShowUnlinkButton:c,rowSpanTags:s}),Object(P.jsx)(Sf,{rowData:t,assignment:n,highlight:p,onHover:i,onClick:u,onUnlink:d,axis:"y",showUnlinkButton:r,setShowUnlinkButton:l,rowSpanTags:s})]})},wf={backgroundColor:"#ff6f0057"},Tf={backgroundColor:"#f5f5dc"};var Mf,Af=function ZonesTableRow(e){var t=e.rowData,n=e.onUnlink,a=e.onContextMenu,i=useAssignment(t.id),o=Object(ri.c)([i.id]),r=Object(ri.c)([Sr(i.id,"X")].concat(i.assigned.x||[])),c=Object(ri.c)([Sr(i.id,"Y")].concat(i.assigned.y||[])),l=useAssignment(t.tableMetaInfo.id),s=Object(ri.c)([Sr(l.id,"X")].concat(l.assigned.x||[],Sr(l.id,"Crosshair"))),u=Object(ri.c)([Sr(l.id,"Y")].concat(l.assigned.y||[],Sr(l.id,"Crosshair"))),d=Object(y.useState)(!1),b=Object(m.a)(d,2),p=b[0],f=b[1],h=Object(y.useState)(!1),j=Object(m.a)(h,2),v=j[0],O=j[1],C=Object(y.useState)(!1),k=Object(m.a)(C,2),S=k[0],D=k[1],w=Object(y.useState)(!1),T=Object(m.a)(w,2),M=T[0],A=T[1],E=Object(y.useMemo)((function(){return{rowSpan:t.tableMetaInfo.rowSpan,style:!0===x()(t,"tableMetaInfo.hide",!1)?{display:"none"}:null}}),[t]),P=Object(y.useCallback)((function(e,a,o){e&&e.stopPropagation(),n(t,a,t.tableMetaInfo.signalIndex,o),"x"===o?void 0!==a?a?(f(!1),i.removeAll("x")):(D(!1),l.removeAll("x")):(f(!1),D(!1)):"y"===o?void 0!==a?a?(O(!1),i.removeAll("y")):(A(!1),l.removeAll("y")):(O(!1),A(!1)):(f(!1),i.removeAll("x"),D(!1),l.removeAll("x"),O(!1),i.removeAll("y"),A(!1),l.removeAll("y"))}),[l,i,n,t]),I=Object(y.useCallback)((function(e,t,n){e.stopPropagation(),t.onClick(n)}),[]),F=Object(y.useMemo)((function(){return{onMouseEnter:function onMouseEnter(){i.onMouseEnter("x"),r.show()},onMouseLeave:function onMouseLeave(){i.onMouseLeave("x"),r.hide()}}}),[i,r]),R=Object(y.useMemo)((function(){return{onMouseEnter:function onMouseEnter(){i.onMouseEnter("y"),c.show()},onMouseLeave:function onMouseLeave(){i.onMouseLeave("y"),c.hide()}}}),[i,c]),N=Object(y.useMemo)((function(){return{onMouseEnter:function onMouseEnter(){l.onMouseEnter("x"),s.show()},onMouseLeave:function onMouseLeave(){l.onMouseLeave("x"),s.hide()}}}),[l,s]),_=Object(y.useMemo)((function(){return{onMouseEnter:function onMouseEnter(){l.onMouseEnter("y"),u.show()},onMouseLeave:function onMouseLeave(){l.onMouseLeave("y"),u.hide()}}}),[l,u]);return Object(ve.c)("tr",Object(g.a)(Object(g.a)({onContextMenu:function onContextMenu(e){return a(e,t)},style:o.isActive||i.isActive?wf:!0===x()(t,"tableMetaInfo.isConstantlyHighlighted",!1)?Tf:null},o.onHover),{},{children:[Object(ve.b)("td",Object(g.a)(Object(g.a)({},E),{},{children:t.tableMetaInfo.rowIndex+1})),Object(ve.b)(kf,{rowData:t,onHoverSignalX:N,onHoverSignalY:_}),Object(ve.b)(Cf,{rowData:t,assignmentSignal:l,onHoverSignalX:N,onHoverSignalY:_,showUnlinkButtonSignalX:S,showUnlinkButtonSignalY:M,setShowUnlinkButtonSignalX:function setShowUnlinkButtonSignalX(e){return D(e)},setShowUnlinkButtonSignalY:function setShowUnlinkButtonSignalY(e){return A(e)},onClick:I,onUnlink:P,highlightSignalX:s,highlightSignalY:u}),Object(ve.b)(Df,{rowData:t,assignmentZone:i,onHoverZoneX:F,onHoverZoneY:R,showUnlinkButtonZoneX:p,showUnlinkButtonZoneY:v,setShowUnlinkButtonZoneX:function setShowUnlinkButtonZoneX(e){return f(e)},setShowUnlinkButtonZoneY:function setShowUnlinkButtonZoneY(e){return O(e)},rowSpanTags:E,onClick:I,onUnlink:P,highlightZoneX:r,highlightZoneY:c}),Object(ve.b)(xf,{rowData:t,rowSpanTags:E})]}))},Ef=Object(v.b)(Mf||(Mf=Object(j.a)(["\n  border-spacing: 0;\n  border: 1px solid #dedede;\n  width: 100%;\n  font-size: 12px;\n  // height: 100%;\n  .react-contextmenu-wrapper {\n    display: contents;\n  }\n  tr {\n    :last-child {\n      td {\n        border-bottom: 0;\n      }\n    }\n  }\n  thead tr:nth-of-type(1) th {\n    top: 0;\n  }\n  thead tr:nth-of-type(2) th {\n    top: 21px;\n  }\n  th {\n    position: sticky;\n    background-color: white;\n    z-index: 2;\n  }\n  th,\n  td {\n    white-space: nowrap;\n    text-align: center;\n    margin: 0;\n    padding: 0.1rem 0.4rem;\n    border-bottom: 1px solid #dedede;\n    border-right: 1px solid #dedede;\n\n    :last-child {\n      border-right: 0;\n    }\n    button {\n      background-color: transparent;\n      border: none;\n      padding: 0 5px;\n    }\n  }\n"])));var Pf=function ZonesTable(e){var t=e.tableData,n=e.onUnlink,a=e.context,i=e.nuclei,o=e.preferences,r=Object(y.useRef)(),c=Object(y.useCallback)((function(e,t){checkModifierKeyActivated(e)||(e.preventDefault(),r.current.handleContextMenu(e,t))}),[r]),l=Object(y.useMemo)((function(){var e=[];return t.forEach((function(t,n){1===t.signal.length?e.push(Object(g.a)(Object(g.a)({},t),{},{tableMetaInfo:Object(g.a)(Object(g.a)({},t.tableMetaInfo),{},{signal:t.signal[0],rowIndex:n,signalIndex:0,id:t.signal[0].id})})):t.signal.length>1&&t.signal.forEach((function(a,i){var o=!1,r=null;i<t.signal.length-1&&0===i?r=t.signal.length:o=!0,e.push(Object(g.a)(Object(g.a)({},t),{},{tableMetaInfo:Object(g.a)(Object(g.a)({},t.tableMetaInfo),{},{signal:a,rowSpan:r,hide:o,rowIndex:n,signalIndex:i,id:a.id})}))}))})),e}),[t]),s=Object(y.useMemo)((function(){return l.map((function(e){return Object(ve.b)(Af,{rowData:e,onUnlink:n,onContextMenu:function onContextMenu(e,t){return c(e,t)},preferences:o},"zonesTableRow_".concat(e.tableMetaInfo.id))}))}),[c,l,n,o]);return Object(ve.c)("div",{children:[Object(ve.c)("table",{css:Ef,children:[Object(ve.c)("thead",{children:[Object(ve.c)("tr",{children:[Object(ve.b)("th",{rowSpan:2,children:"#"}),Object(ve.b)("th",{colSpan:2,children:"\u03b4 (ppm)"}),Object(ve.b)("th",{colSpan:2,children:Object(ve.b)(He.u,{})}),Object(ve.b)("th",{colSpan:2,children:"\u03a3"}),Object(ve.b)("th",{rowSpan:2,children:"Kind"}),Object(ve.b)("th",{rowSpan:2,children:""})]}),Object(ve.c)("tr",{children:[Object(ve.b)("th",{children:i[0]}),Object(ve.b)("th",{children:i[1]}),Object(ve.b)("th",{children:i[0]}),Object(ve.b)("th",{children:i[1]}),Object(ve.b)("th",{children:i[0]}),Object(ve.b)("th",{children:i[1]})]})]}),Object(ve.b)("tbody",{children:s})]}),Object(ve.b)(Tu,{ref:r,context:a})]})},If={container:{flexDirection:"column",height:"100%",display:"flex"},removeAssignmentsButton:{borderRadius:"5px",marginTop:"3px",marginLeft:"2px",border:"none",height:"16px",width:"18px",fontSize:"12px",padding:0,backgroundColor:"transparent"},button:{backgroundColor:"transparent",border:"none"},toggle:{width:"22px",height:"22px",marginLeft:"2px",display:"flex",justifyContent:"center",alignItems:"center"}};function ZonesPanel(e){var t=e.zones,n=e.activeTab,a=e.preferences,i=e.xDomain,o=e.yDomain,r=Object(y.useState)(!1),c=Object(m.a)(r,2),l=c[0],s=c[1],u=useAssignmentData(),d=useDispatch(),b=te(),p=Object(y.useState)(!1),f=Object(m.a)(p,2),h=f[0],j=f[1],v=Object(y.useRef)(),O=Object(y.useMemo)((function(){var e=function isInView(e,t,n,a){var r=1e4;return e*=r,n*=r,a*=r,((t*=r)>=i[0]*r&&e<=i[1]*r||e<=i[0]*r&&t>=i[1]*r)&&(a>=o[0]*r&&n<=o[1]*r||n<=o[0]*r&&a>=o[1]*r)};if(t.values)return(l?function getFilteredZones(t){return t.filter((function(t){return e(t.x.from,t.x.to,t.y.from,t.y.to)}))}(t.values):t.values).map((function(t){return Object(g.a)(Object(g.a)({},t),{},{tableMetaInfo:{isConstantlyHighlighted:e(t.x.from,t.x.to,t.y.from,t.y.to)}})}))}),[t,l,i,o]),C=Object(y.useCallback)((function(){s(!l)}),[l]),k=Object(y.useCallback)((function(e,t,n,a){d({type:ea,payload:{zoneData:e,assignmentData:u,isOnZoneLevel:t,signalIndex:n,axis:a}})}),[u,d]),S=Object(y.useCallback)((function(){t.values.forEach((function(e){return k(e)}))}),[t.values,k]),D=Object(y.useCallback)((function(){b.showConfirmDialog({message:"All assignments will be removed. Are you sure?",buttons:[{text:"Yes",handler:S},{text:"No"}]})}),[S,b]),w=Object(y.useCallback)((function(){b.showConfirmDialog({message:"All zones will be deleted. Are You sure?",buttons:[{text:"Yes",handler:function handler(){d({type:Nn,payload:{assignmentData:u}})}},{text:"No"}]})}),[u,d,b]),T=Object(y.useMemo)((function(){return x()(a,"panels.zones.[".concat(n,"]"))}),[n,a]),M=Object(y.useCallback)((function(){j(!h)}),[h]),A=Object(y.useCallback)((function(){v.current.saveSetting(),j(!1)}),[]),E=Object(y.useCallback)((function(e){ti.emit("onZonesVisibilityChange",{key:e})}),[]);return Object(P.jsx)(P.Fragment,{children:Object(P.jsxs)("div",{style:If.container,children:[!h&&Object(P.jsxs)(ju,{counter:t.values?t.values.length:0,onDelete:w,deleteToolTip:"Delete All Zones",onFilter:C,filterToolTip:l?"Show all zones":"Hide zones out of view",filterIsActive:l,counterFiltered:O&&O.length,showSettingButton:"true",onSettingClick:M,children:[Object(P.jsx)(Ze,{title:"Remove all Assignments",popupPlacement:"right",children:Object(P.jsx)("button",{style:If.removeAssignmentsButton,type:"button",onClick:D,disabled:!t.values||0===t.values.length,children:Object(P.jsx)(He.H,{})})}),Object(P.jsx)(hu,{popupTitle:"show/hide zones",popupPlacement:"right",style:If.toggle,defaultValue:!0,onClick:function onClick(){return E("zones")},children:Object(P.jsx)("span",{style:{fontSize:"12px",pointerEvents:"none"},children:"z"})}),Object(P.jsx)(hu,{popupTitle:"show/hide signals",popupPlacement:"right",style:If.toggle,defaultValue:!0,onClick:function onClick(){return E("signals")},children:Object(P.jsx)("span",{style:{fontSize:"12px",pointerEvents:"none"},children:"s"})}),Object(P.jsx)(hu,{popupTitle:"show/hide peaks",popupPlacement:"right",style:If.toggle,defaultValue:!0,onClick:function onClick(){return E("peaks")},children:Object(P.jsx)("span",{style:{fontSize:"12px",pointerEvents:"none"},children:"p"})})]}),h&&Object(P.jsx)(Cu,{onSave:A,onClose:M}),Object(P.jsx)("div",{style:{height:"100%",overflow:"hidden"},children:Object(P.jsxs)(_s.a,{isFlipped:h,infinite:!0,containerStyle:{overflow:"hidden",height:"100%"},children:[Object(P.jsx)("div",{style:{overflow:"auto",height:"100%",display:"block"},children:O&&O.length>0?Object(P.jsx)(Pf,{tableData:O,onUnlink:k,preferences:T,nuclei:n&&2===n.split(",").length?n.split(","):["?","?"]}):Object(P.jsx)(Pu,{})}),Object(P.jsx)(vf,{ref:v})]})})]})})}var Ff=vr(Object(y.memo)(ZonesPanel)),Rf={width:"100%",height:"100%",padding:"0px",display:"flex",flexDirection:"column"};function Table(e){var t=e.children,n=e.className,a=e.style;return Object(P.jsx)("div",{className:n,style:Object(g.a)(Object(g.a)({},Rf),a),children:t})}var Nf=Object(y.memo)(Table),_f={width:"100%",overflowY:"auto",display:"flex",flexDirection:"column",padding:"5px 0px",color:"gray"};function TableBody(e){var t=e.children,n=e.className,a=e.style,i=Object(y.useMemo)((function(){return y.Children.map(t,(function(e){return Object(y.cloneElement)(e,{style:Object(g.a)({borderBottom:"0.55px solid #d8d8d8"},e.props.style)})}))}),[t]);return Object(P.jsx)("div",{className:n,style:Object(g.a)(Object(g.a)({},_f),{},{style:a}),children:i})}var Lf=Object(y.memo)(TableBody),zf={width:"100%",display:"flex",alignItems:"flex-start"};function getVAlign(e){return"top"===e.toLowerCase()?"flex-start":"bottom"===e.toLowerCase()?"flex-end":"center"}function TableHeader(e){var t=e.children,n=e.className,a=e.style,i=e.align,o=void 0===i?"center":i,r=e.vAlign,c=void 0===r?"center":r,l=e.size,s=void 0===l?1:l,u=e.onClick;return Object(P.jsx)("div",{className:n,style:Object(g.a)(Object(g.a)({},zf),{},{alignItems:getVAlign(c),textAlign:o,flex:s},a),onClick:u,children:t})}TableHeader.defaultProps={onClick:function onClick(){return null}};var Hf=Object(y.memo)(TableHeader),Bf={width:"100%",display:"flex",padding:"0px 5px",color:"#424242",backgroundColor:"#d8d8d8",borderBottom:"0.55px solid #d8d8d8",fontSize:11,fontWeight:"bold"};function TableHead(e){var t=e.children,n=e.className,a=e.style;return Object(P.jsx)("div",{className:n,style:Object(g.a)(Object(g.a)({},Bf),a),children:t})}var Xf=Object(y.memo)(TableHead),Vf={width:"100%",display:"flex",padding:"5px 0px"};function TableRow_TableHeader(e){var t=e.children,n=e.className,a=e.style,i=e.onClick;return Object(P.jsx)("div",{className:n,style:Object(g.a)(Object(g.a)({},Vf),a),onClick:i,children:t})}TableRow_TableHeader.defaultProps={onClick:function onClick(){return null}};var Yf=Object(y.memo)(TableRow_TableHeader);var Zf=function FiltersWrapper(e){var t=function Wrapper(t){var n=useChartData(),a=n.data,i=n.activeSpectrum,o=Object(y.useMemo)((function(){return a&&i&&i.id?a.find((function(e){return e.id===i.id}))||{filters:[]}:{}}),[i,a]).filters,r=void 0===o?[]:o,c=t.forwardedRef,l=Object(de.a)(t,["forwardedRef"]);return Object(P.jsx)(e,Object(g.a)(Object(g.a)({},l),{},{filters:r,ref:c}))};return Object(y.forwardRef)((function(e,n){return Object(P.jsx)(t,Object(g.a)(Object(g.a)({},e),{},{forwardedRef:n}))}))},Uf=n(392),Kf={button:{backgroundColor:"transparent",border:"none",height:25,width:25,padding:"5px"},active:{backgroundColor:"#fbfbfb",borderTop:"1px solid #817066",borderBottom:"1px solid #817066"}};function FiltersTableRow(e){var t=e.filters,n=useDispatch(),a=te(),i=gc(),o=Object(y.useState)(),r=Object(m.a)(o,2),c=r[0],l=r[1],s=Object(y.useCallback)((function(e,t){n({type:an,id:e,checked:t})}),[n]),u=Object(y.useCallback)((function(e){var t=e.id,o=e.name;a.showConfirmDialog({message:"Filter/s will be deleted, Are You sure?",buttons:[{text:"Yes,All spectra",handler:function(){var e=Object(Mo.a)(To.a.mark((function _callee(){var e;return To.a.wrap((function _callee$(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.showLoading("Delete all spectra filter processs in progress");case 2:e=t.sent,n({type:cn,payload:{filterType:o}}),e();case 5:case"end":return t.stop()}}),_callee)})));return function handler(){return e.apply(this,arguments)}}()},{text:"Yes ",handler:function(){var e=Object(Mo.a)(To.a.mark((function _callee2(){var e;return To.a.wrap((function _callee2$(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,i.showLoading("Delete filter processs in progress");case 2:e=a.sent,n({type:rn,payload:{id:t}}),e();case 5:case"end":return a.stop()}}),_callee2)})));return function handler(){return e.apply(this,arguments)}}()},{text:"No"}]})}),[i,n,a]),d=Object(y.useCallback)((function(e){l((function(t){var a=t===e?null:e;return n({type:Ln,id:a}),a}))}),[n]);return Object(y.useMemo)((function(){return t&&t.map((function(e){return Object(P.jsxs)(Yf,{style:e.id===c?Object(g.a)({},Kf.active):{},children:[Object(P.jsx)(Hf,{align:"center",size:"2",onClick:function onClick(){return d(e.id)},children:e.label}),Object(P.jsx)(Hf,{align:"left",size:"3",children:Object(P.jsx)("div",{onClick:function onClick(e){return e.stopPropagation()},children:Object(P.jsx)(Uf.a,{data:e.error?e.error:e.value})})}),Object(P.jsxs)(Hf,{align:"center",vAlign:"center",size:"1",children:[Object(P.jsx)(ul,{checked:e.flag,onChange:function onChange(t){return s(e.id,t.target.checked)}}),e.isDeleteAllow&&Object(P.jsx)("button",{style:Kf.button,type:"button",onClick:function onClick(){return u(e)},children:Object(P.jsx)(He.B,{})})]})]},e.id)}))}),[d,t,u,s,c])}var Wf=Object(y.memo)(FiltersTableRow);function FilterPanel(e){var t=e.filters;return Object(y.useMemo)((function(){return t?Object(P.jsxs)(Nf,{children:[Object(P.jsx)(Xf,{children:Object(P.jsxs)(Yf,{children:[Object(P.jsx)(Hf,{align:"center",size:"1",children:"Label"}),Object(P.jsx)(Hf,{align:"center",size:"2",children:"Properties"})]})}),Object(P.jsx)(Lf,{children:Object(P.jsx)(Wf,{filters:t})})]}):Object(P.jsx)(Pu,{})}),[t])}var Gf=Zf(Object(y.memo)(FilterPanel)),qf=[{title:"Spectra",component:Object(P.jsx)(Hp,{}),openWhen:null,style:"",hidePreferenceKey:"hideSpectraPanel",mode:null},{title:"Information",component:Object(P.jsx)(Fs,{}),openWhen:null,style:{overflow:"hidden"},hidePreferenceKey:"hideInformationPanel",mode:null},{title:"Peaks",component:Object(P.jsx)(fb,{}),openWhen:[Xa.peakPicking.id],style:"",hidePreferenceKey:"hidePeaksPanel",mode:null},{title:"Filters",component:Object(P.jsx)(Gf,{}),openWhen:null,style:"",hidePreferenceKey:"hideFiltersPanel",mode:null},{title:"Integrals",component:Object(P.jsx)(Uu,{}),openWhen:[Xa.integral.id],style:"",hidePreferenceKey:"hideIntegralsPanel",mode:null},{title:"Ranges",component:Object(P.jsx)(jp,{}),openWhen:[Xa.rangesPicking.id],style:"",hidePreferenceKey:"hideRangesPanel",mode:or.DM_1D},{title:"Multiple Spectra Analysis",component:Object(P.jsx)(rb,{}),openWhen:[Xa.multipleSpectraAnalysis.id],style:"",hidePreferenceKey:"hideMultipleSpectraAnalysisPanel",mode:null},{title:"Zones",component:Object(P.jsx)(Ff,{}),openWhen:[Xa.zone2D.id],style:"",hidePreferenceKey:"hideZonesPanel",mode:or.DM_2D},{title:"Summary",component:Object(P.jsx)(gf,{}),openWhen:[],style:"",hidePreferenceKey:"hideSummaryPanel",mode:null},{title:"Structures",component:Object(P.jsx)(xd,{}),openWhen:[Xa.rangesPicking.id],style:"",hidePreferenceKey:"hideStructuresPanel",mode:null}];function Panels(e){var t=e.selectedTool,n=e.displayerMode,a=Object(y.useState)(0),i=Object(m.a)(a,2),o=i[0],r=i[1],c=usePreferences();Object(y.useEffect)((function(){var e=function getDefaultIndex(){var e=qf.findIndex((function(e){return e.openWhen&&e.openWhen.includes(t)}));return-1!==e?e:null}();t&&r(e)}),[t]);var l=Object(y.useCallback)((function(e){return!x()(c,"display.panels.".concat(e.hidePreferenceKey))&&(null==e.mode||e.mode===n)}),[n,c]);return Object(P.jsx)(ws,{defaultOpenIndex:o,children:qf.map((function(e){return l(e)&&Object(P.jsx)(Os,{title:e.title,style:e.style,children:e.component},e.title)}))})}var Jf=Object(y.memo)(Panels),$f=[An,en,tn,xn,Mn,On,Mt,It,vn,Pt,yn,fn,At,Et,wt,Tt,Vt,Xt,un,$t,Rt,"SAVE_AS_SVG","SAVE_DATA_AS_JSON",kn,Nt,_t,Lt,nn,zt];var Qf=function checkActionType(e){return!$f.includes(e)};function handleUpdateCorrelations(e){var t=e.data,n=e.correlations;e.correlations=Kp.Build.build(t,n.options,Gp()(n.values))}function getActiveData(e){if(e.activeTab){var t=Cp("nucleus")(e.data)[e.activeTab];if(e.displayerMode===or.DM_2D)return t;if(e.activeSpectrum&&t){var n=t.findIndex((function(t){return t.id===e.activeSpectrum.id}));if(-1!==n){var a=t[n].info.isFid||!1;t=t.filter((function(e){return e.info.isFid===a}))}}else t=t?t.filter((function(e){return!1===e.info.isFid})):[];var i,o=Object(Yr.a)(e.data);try{var r=function _loop(){var e=i.value;t.some((function(t){return t.id===e.id}))?e.display.isVisibleInDomain=!0:e.display.isVisibleInDomain=!1};for(o.s();!(i=o.n()).done;)r()}catch(c){o.e(c)}finally{o.f()}return e.data}return e.data}function getDomain(e){var t=[],n=[],a={},i={},o={};try{t=e.reduce((function(e,t){var n=t.display,a=t.data;if(n.isVisibleInDomain){var o=[a.x[0],a.x[a.x.length-1]];return i[t.id]=o,n.isVisible&&(e=e.concat(o)),e}return e.concat([])}),[]),n=e.reduce((function(e,t){var n=t.display,i=t.data,r=t.integrals;if(n.isVisibleInDomain){var c=Object(Qe.c)(i.y);if(a[t.id]=c,r.values&&r.values.length>0){var l=r.values[0],s=l.from,u=void 0===s?0:s,d=l.to,b=void 0===d?0:d,p=i.x,f=i.y,h=Object(_e.j)({x:p,y:f},{from:u,to:b,reverse:!0});o[t.id]=Object(Qe.c)(h.y)}return n.isVisible&&(e=e.concat(c)),e}return e.concat([])}),[])}catch(r){console.log(r)}return{xDomain:Object(Qe.c)(t),yDomain:Object(Qe.c)(n),yDomains:a,xDomains:i,integralYDomain:o}}function get2DDomain(e){var t=[],n=[],a={},i={},o=e.activeTab,r=e.tabActiveSpectrum,c=e.data,l=o.split(",");try{t=c.reduce((function(e,t){return 2===t.info.dimension&&(e=e.concat([t.data.minX,t.data.maxX])),e}),[]),n=c.reduce((function(e,t){var n;return 2===t.info.dimension&&(null===(n=t.info.nucleus)||void 0===n?void 0:n.join(","))===o&&(e=e.concat([t.data.minY,t.data.maxY])),e}),[])}catch(d){console.log(d)}var s=l.map((function(e){var t;return null===(t=r[e])||void 0===t?void 0:t.id})),u=c.reduce((function(e,t){return s.includes(t.id)&&1===t.info.dimension?e.concat(t):e.concat([])}),[]);try{i=u.reduce((function(e,t){var n=t.data.x,a=[n[0],n[n.length-1]];return e[t.id]=a,e}),{}),a=u.reduce((function(e,t){var n=Object(Qe.c)(t.data.y);return e[t.id]=n,e}),{})}catch(d){console.log(d)}return{xDomain:Object(Qe.c)(t),yDomain:Object(Qe.c)(n),yDomains:a,xDomains:i}}function setDomain(e){var t,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=getActiveData(e);e.activeTab&&[or.DM_1D,or.DM_2D].includes(e.displayerMode)&&(t=e.displayerMode===or.DM_1D?getDomain(a):get2DDomain(e),e.xDomain=t.xDomain,e.xDomains=t.xDomains,n?(e.yDomain=t.yDomain,e.displayerMode===or.DM_1D?(e.yDomains=Object.keys(t.yDomains).reduce((function(e,n){return e[n]=t.yDomain,e}),{}),e.originDomain=Object(g.a)(Object(g.a)({},t),{},{yDomains:e.yDomains,originYDomains:t.yDomains})):(e.yDomains=t.yDomains,e.originDomain=t),e.integralsYDomains=t.integralYDomain&&t.integralYDomain,e.originIntegralYDomain=t.integralYDomain&&t.integralYDomain):e.originDomain=Object(g.a)(Object(g.a)({},e.originDomain),{},{xDomain:t.xDomain,xDomains:t.xDomains}))}function setMode(e){var t,n=getActiveData(e).filter((function(e){return!0===e.display.isVisibleInDomain}));e.mode=(null===(t=n[0])||void 0===t?void 0:t.info.isFid)?"LTR":"RTL"}function nucluesToString(e){return"string"===typeof e?e:e.join(",")}var eh=function getClosestNumber(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=e.reduce((function(e,n){return Math.abs(n-t)<Math.abs(e-t)?n:e}));return n},th=function(){function ZoomHistory(){Object(et.a)(this,ZoomHistory),this.stack=[]}return Object(tt.a)(ZoomHistory,[{key:"push",value:function push(e){this.stack.push(e)}},{key:"pop",value:function pop(){return this.stack.pop()?this.stack[this.stack.length-1]:null}},{key:"getLast",value:function getLast(){return 0===this.stack.length?null:this.stack[this.stack.length-1]}}],[{key:"getInstance",value:function getInstance(e,t){return e[t]&&e[t]instanceof ZoomHistory||(e[t]=new ZoomHistory),e[t]}}]),ZoomHistory}();function changeSpectrumVerticalAlignment(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e.data&&e.data.length>0)if(t||n&&e.data[0].info.isFid&&!e.data.some((function(e){return!1===e.info.isFid}))){var a=e.height/2;e.verticalAlign.flag=!0,e.verticalAlign.value=a,e.verticalAlign.stacked=!1}else e.verticalAlign.flag=!1,e.verticalAlign.value=20,e.verticalAlign.stacked=!1}function setFilterChanges(e,t){var n=e.activeSpectrum.id;if(t===Ba.phaseCorrection.id){e.tempData=e.data;var a=function getStrongestPeak(e){var t=e.activeSpectrum,n=e.data[t.index].data,a=Object(Qe.e)(n.y),i=n.y.findIndex((function(e){return e===a}));return{xValue:n.x[i],yValue:a,index:i}}(e).xValue;e.pivot=a}else if(e.selectedTool===Xa.phaseCorrection.id){var i=e.data.findIndex((function(e){return e.id===n}));e.data[i].data=e.tempData[i].data}}function resetTool(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e.selectedOptionPanel=null,t&&(e.selectedTool=Xa.zoom.id),e.baseLineZones=[],e.tempData&&(e.tempData=null,setDomain(e))}function resetSelectedTool(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];(e.selectedTool&&Xa[e.selectedTool].isFilter||!t)&&resetTool(e)}function getSpectrumID(e,t){return e.tabActiveSpectrum[e.activeTab.split(",")[t]].id}function hasAcceptedSpectrum(e,t){var n=e.activeTab.split(",");return e.tabActiveSpectrum[n[t]]&&!e.data[e.tabActiveSpectrum[n[t]].index].info.isFid}function setMargin(e){if(e.displayerMode===or.DM_2D&&e.selectedTool!==Xa.slicingTool.id){var t=hasAcceptedSpectrum(e,0)?rr.top:cr.top,n=hasAcceptedSpectrum(e,1)?rr.left:cr.left;e.margin=Object(g.a)(Object(g.a)({},rr),{},{top:t,left:n})}else e.selectedTool===Xa.slicingTool.id?e.margin=rr:e.displayerMode===or.DM_1D&&(e.margin=cr)}function Processing2DData(e,t){if(e.displayerMode===or.DM_2D){var n,a={},i=Object(Yr.a)(t[e.activeTab]);try{for(i.s();!(n=i.n()).done;){var o=n.value;a[o.id]=o.processingController.drawContours()}}catch(r){i.e(r)}finally{i.f()}e.contours=a}}function setDisplayerMode(e,t){e.displayerMode=t&&t.some((function(e){return 2===e.info.dimension}))?or.DM_2D:or.DM_1D}function setTabActiveSpectrum(e,t){var n,a=[],i={},o=Object.keys(t).sort((function(e,t){return e.split(",").length>t.split(",").length?-1:1})),r=Object(Yr.a)(o);try{var c=function _loop(){var o=n.value,r=t[o],c=o.split(",").length;if(2===c&&a.push(o),1===r.length){var l=e.data.findIndex((function(e){return e.id===r[0].id}));i[o]={id:r[0].id,index:l}}else{var s=t[o],u=s.length;if(u>=2){var d=s.filter((function(e){return!e.info.isFid}));if(d.length>0&&(2===c||1===c&&u!==d.length)){var b=e.data.findIndex((function(e){return e.id===d[0].id}));i[o]={id:d[0].id,index:b}}else i[o]=null}else i[o]=null}};for(r.s();!(n=r.n()).done;)c()}catch(l){r.e(l)}finally{r.f()}return e.tabActiveSpectrum=i,a}function setTab(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=Object.keys(t).sort((function(e,t){return e.split(",").length>t.split(",").length?-1:1}));if(JSON.stringify(i)!==JSON.stringify(Object.keys(e.tabActiveSpectrum))||a){var o=setTabActiveSpectrum(e,t);o.length>0&&null==n?(e.activeSpectrum=e.tabActiveSpectrum[o[0]],e.activeTab=o[0]):(e.activeSpectrum=n?e.tabActiveSpectrum[n]:n,e.activeTab=n)}else e.activeTab=n,e.activeSpectrum=e.tabActiveSpectrum[n];setDisplayerMode(e,t[e.activeTab]),setMargin(e)}function ToolsActions_setActiveTab(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=Cp("nucleus"),i=a(e.data),o=Object.keys(i),r=t&&o.includes(null!==t&&void 0!==t?t:"")?t:o[0];setTab(e,i,r,n),resetTool(e),Processing2DData(e,i),setDomain(e);var c=th.getInstance(e.ZoomHistory,e.activeTab),l=c.getLast();l&&(e.xDomain=l.xDomain,e.yDomain=l.yDomain),setMode(e)}function setDataBy1DFilter(e){e.data.y=e.data.re}function getRange_getRange(e,t){var n=t.startX,a=t.endX,i=getXScale(e),o=i.invert(n),r=i.invert(a),c=[];return o>r?(c[0]=r,c[1]=o):(c[0]=o,c[1]=r),c}function changeIntegral(e,t){var n,a=Object(ft.a)(e),i=t.data;if(null===(n=e.activeSpectrum)||void 0===n?void 0:n.id){var o=e.activeSpectrum.index,r=a.data[o],c=e.data[o],l=r.data,s=l.x,u=l.re,d=r.integrals.values.findIndex((function(e){return e.id===i.id}));-1!==d&&(c.integrals.values[d]=Object(g.a)(Object(g.a)({originFrom:i.from,originTo:i.to},i),{},{absolute:Object(_e.k)({x:s,y:u},{from:i.from,to:i.to,reverse:!0})}),updateIntegralIntegrals(c.integrals))}}function handleChangeIntegralsRaltiveValue(e,t){var n,a=t.id,i=t.value;if(null===(n=e.activeSpectrum)||void 0===n?void 0:n.id){var o=e.activeSpectrum.index;!function changeIntegralsRealtive(e,t,n){var a=e.values.find((function(e){return e.id===t}));if(a){var i=a.absolute/n,o=e.values.reduce((function(e,t,n){var a=t.absolute/i;return e.sum+=a,e.values[n]=Object(g.a)(Object(g.a)({},t),{},{integral:a}),e}),{values:[],sum:0}),r=o.values,c=o.sum;e.values=r,e.options.sum=c}}(e.data[o].integrals,a,i)}}function initMolecule(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={};t.key=e.key||generateID(),t.molfile=e.molfile||"";var n=new Sc.Molecule.fromMolfile(t.molfile),a=n.getMolecularFormula();t.mf=a.formula,t.em=a.absoluteWeight,t.mw=a.relativeWeight,t.svg=n.toSVG(50,50);var i=new of.MF(t.mf);return t.atoms=i.getInfo().atoms,t}function addMolfile(e,t){var n,a=Sc.Molecule.fromMolfile(t).getFragments(),i=Object(Yr.a)(a);try{for(i.s();!(n=i.n()).done;){var o=n.value,r=o.getMolecularFormula(),c=r.formula,l=r.absoluteWeight,s=r.relativeWeight;e.push(initMolecule({molfile:o.toMolfileV3(),svg:o.toSVG(150,150),mf:c,em:l,mw:s}))}}catch(u){i.e(u)}finally{i.f()}}function LoadActions_setData(e,t){var n=t||{spectra:[],molecules:[],preferences:{},correlations:{},multipleAnalysis:{},exclusionZones:{}},a=n.spectra,i=n.molecules,o=n.preferences,r=n.correlations,c=n.exclusionZones,l=void 0===c?{}:c;e.data=a,e.molecules=function MoleculeManager_fromJSON(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=[],n=0;n<e.length;n++){var a,i=Sc.Molecule.fromMolfile(e[n].molfile).getFragments(),o=Object(Yr.a)(i);try{for(o.s();!(a=o.n()).done;){var r=a.value;t.push(initMolecule({molfile:r.toMolfileV3()}))}}catch(c){o.e(c)}finally{o.f()}}return t}(i),e.preferences=o,e.exclusionZones=l,r&&0!==Object.keys(r).length?e.correlations=Kp.Build.init(r):e.correlations=Kp.Build.init({values:[],options:{tolerance:Yp,mf:""},state:{}})}function loadJDFFile(e,t){var n,a=function addJDFs(e){for(var t=[],n=0;n<e.length;n++)addJDF(t,e[n].binary,{display:{name:e[n].name},source:{jcampURL:e[n].jcampURL?e[n].jcampURL:null}});return t}(t),i=Object(Yr.a)(a);try{for(i.s();!(n=i.n()).done;){var o=n.value;e.data.push(o)}}catch(r){i.e(r)}finally{i.f()}ToolsActions_setActiveTab(e),initZoom1DHandler(e.data),e.isLoading=!1}function loadJcampFile(e,t){var n,a=function addJcamps(e){for(var t=[],n=0;n<e.length;n++)addJcamp(t,e[n].binary.toString(),{display:{name:e[n].name},source:{jcampURL:e[n].jcampURL?e[n].jcampURL:null}});return t}(t),i=Object(Yr.a)(a);try{for(i.s();!(n=i.n()).done;){var o=n.value;e.data.push(o)}}catch(r){i.e(r)}finally{i.f()}changeSpectrumVerticalAlignment(e,!1,!0),ToolsActions_setActiveTab(e),initZoom1DHandler(e.data),e.isLoading=!1}function getRangeIndex(e,t,n){return e.data[t].ranges.values.findIndex((function(e){return e.id===n}))}function handleUnlinkRange(e,t){var n,a=Object(ft.a)(e);if(null===(n=a.activeSpectrum)||void 0===n?void 0:n.id){var i,o=a.activeSpectrum.index,r=t.payload,c=r.rangeData,l=r.assignmentData,s=r.isOnRangeLevel,u=r.signalIndex,d=Object(Yr.a)(c?[c]:a.data[o].ranges.values);try{for(d.s();!(i=d.n()).done;){var b=i.value,p=to(Gp()(b),s,u);ao(l,s?[{id:p.id}]:[{id:p.signal[u].id}]);var f=getRangeIndex(a,o,p.id);e.data[o].ranges.values[f]=p}}catch(h){d.e(h)}finally{d.f()}}}function handleResizeRange(e,t){var n;if(null===(n=e.activeSpectrum)||void 0===n?void 0:n.id){var a=e.activeSpectrum.index;!function changeRange(e,t){var n=t.from,a=t.to,i=e.data,o=i.x,r=i.re,c=e.ranges.values.findIndex((function(e){return e.id===t.id})),l=Object(_e.k)({x:o,y:r},{from:n,to:a,reverse:!0});-1!==c&&(e.ranges.values[c]=Object(g.a)(Object(g.a)(Object(g.a)({},e.ranges.values[c]),{},{originFrom:n,originTo:a},t),{},{absolute:l}),updateIntegralRanges(e))}(e.data[a],t.data)}}function handleAddRange(e,t){var n,a=getRange_getRange(e,{startX:t.startX,endX:t.endX});if(null===(n=e.activeSpectrum)||void 0===n?void 0:n.id){var i=e.activeSpectrum.index,o=Object(m.a)(a,2),r=o[0],c=o[1];!function addRange(e,t){var n=t.from,a=t.to,i=e.data,o=i.x,r=i.re,c=Object(_e.k)({x:o,y:r},{from:n,to:a,reverse:!0}),l=Qr(o,r,n,a,e.info.originFrequency);try{var s={id:generateID(),from:n,to:a,absolute:c,signal:[Object(g.a)({id:generateID()},l)],kind:$i};e.ranges.values=e.ranges.values.concat(mapRanges([s],e)),updateIntegralRanges(e)}catch(u){throw new Error("Could not calculate the multiplicity")}}(e.data[i],{from:r,to:c}),handleOnChangeRangesData(e)}}function handleChangeRangeRaltiveValue(e,t){var n,a=t.id,i=t.value;if(null===(n=e.activeSpectrum)||void 0===n?void 0:n.id){var o=e.activeSpectrum.index;!function changeRangesRealtive(e,t,n){var a=e.ranges.values.find((function(e){return e.id===t}));if(a){var i=a.absolute/n;e.ranges.options.sum=n/a.integral*e.ranges.options.sum,e.ranges.values=e.ranges.values.map((function(e){return Object(g.a)(Object(g.a)({},e),{},{integral:e.absolute/i})}))}}(e.data[o],a,i)}}function handleOnChangeRangesData(e){handleUpdateCorrelations(e)}var nh=1;function add2dZoneHandler(e,t){var n;if(null===(n=e.activeSpectrum)||void 0===n?void 0:n.id){var a=e.activeSpectrum.index,i=function get2DRange(e,t){var n=t.startX,a=t.startY,i=t.endX,o=t.endY,r=get2DXScale(e),c=get2DYScale(e),l=1e6*n>1e6*i?i:n,s=1e6*n>1e6*i?n:i,u=1e6*a>1e6*o?o:a,d=1e6*a>1e6*o?a:o,b=c.invert(u),p=r.invert(l),f=c.invert(d);return{fromX:p,fromY:b,toX:r.invert(s),toY:f}}(e,t);!function detectZonesManual(e,t){var n,a=getDetectionZones(e,t),i=getShift(e),o=i.xShift,r=i.yShift,c=Object(Yr.a)(a);try{for(c.s();!(n=c.n()).done;){var l=n.value,s=l.fromTo;e.zones.values.push({id:generateID(),x:s[0],y:s[1],signal:[{id:generateID(),peak:l.peaks,x:{originDelta:l.shiftX-o,delta:l.shiftX,diaID:[]},y:{originDelta:l.shiftY-r,delta:l.shiftY,diaID:[]},kind:"signal"}],kind:$i})}}catch(u){c.e(u)}finally{c.f()}}(e.data[a],{selectedZone:i,thresholdFactor:nh,convolutionByFFT:!1}),handleOnChangeZonesData(e)}}function handleAutoZonesDetection(e,t){var n;if(null===(n=e.activeSpectrum)||void 0===n?void 0:n.id){var a=e.activeSpectrum.index,i=Object(m.a)(e.xDomain,2),o=i[0],r=i[1],c=Object(m.a)(e.yDomain,2),l=c[0],s=c[1];t.selectedZone={fromX:o,toX:r,fromY:l,toY:s},function detectZones(e,t){var n=getDetectionZones(e,t),a=getShift(e),i=a.xShift,o=a.yShift,r=e.data,c=r.minX,l=r.maxX,s=r.minY,u=r.maxY,d=Math.abs(l-c)/1e4,b=Math.abs(u-s)/1e4,p=n.reduce((function(t,n){var a,r=Object(m.a)(n.fromTo,2),c=r[0],l=r[1],s=Object(Yr.a)(e.zones.values);try{for(s.s();!(a=s.n()).done;){var u=a.value,p=u.x,f=u.y;if(Math.abs(c.from-p.from)<d&&Math.abs(c.to-p.to)<d&&Math.abs(l.from-f.from)<b&&Math.abs(l.to-f.to)<b)return t}}catch(h){s.e(h)}finally{s.f()}return t.push({id:generateID(),x:{from:c.from,to:c.to},y:{from:l.from,to:l.to},signal:[{id:generateID(),peak:n.peaks,x:{originDelta:n.shiftX-i,delta:n.shiftX,diaID:[]},y:{originDelta:n.shiftY-o,delta:n.shiftY,diaID:[]},kind:"signal"}],kind:$i}),t}),[]);e.zones.values=e.zones.values.concat(p)}(e.data[a],t),handleOnChangeZonesData(e)}}function getZoneIndex(e,t,n){return e.data[t].zones.values.findIndex((function(e){return e.id===n}))}function handleUnlinkZone(e,t){var n,a=Object(ft.a)(e);if(null===(n=a.activeSpectrum)||void 0===n?void 0:n.id){var i,o=a.activeSpectrum.index,r=t.payload,c=r.zoneData,l=r.assignmentData,s=r.isOnZoneLevel,u=r.signalIndex,d=r.axis,b=Object(Yr.a)(c?[c]:a.data[o].zones.values);try{for(b.s();!(i=b.n()).done;){var p=i.value,f=Cr(Gp()(p),s,u,d);kr(l,s?[{id:f.id}]:[{id:f.signal[u].id}],d);var h=getZoneIndex(a,o,f.id);e.data[o].zones.values[h]=f}}catch(g){b.e(g)}finally{b.f()}}}function handleOnChangeZonesData(e){handleUpdateCorrelations(e)}function setMoleculeHandler(e,t,n){!function MoleculeManager_setMolfile(e,t,n){var a=Sc.Molecule.fromMolfile(t).getFragments();if(a.length>1){e=this.molecules.filter((function(e){return e.key!==n}));var i,o=Object(Yr.a)(a);try{for(o.s();!(i=o.n()).done;){var r=i.value,c=r.getMolecularFormula(),l=c.formula,s=c.absoluteWeight,u=c.relativeWeight;e.push(new initMolecule({molfile:r.toMolfileV3(),svg:r.toSVG(150,150),mf:l,em:s,mw:u}))}}catch(j){o.e(j)}finally{o.f()}}else if(1===a.length){var d=a[0],b=d.getMolecularFormula(),p=b.formula,f=b.absoluteWeight,h=b.relativeWeight,g=initMolecule({molfile:d.toMolfileV3(),svg:d.toSVG(150,150),mf:p,em:f,mw:h,key:n}),m=e.findIndex((function(e){return e.key===n}));e.splice(m,1,g)}}(e.molecules,t,n)}ti.on("noiseFactorChanged",(function(e){nh=e}));var ah=n(232);function handleAutoPeakPicking(e,t){var n;if(null===(n=e.activeSpectrum)||void 0===n?void 0:n.id){e.selectedTool=Xa.zoom.id,e.selectedOptionPanel=null;var a=e.activeSpectrum.index,i=e.data[a],o=Object(m.a)(e.xDomain,2),r=o[0],c=o[1],l=Object(_e.f)(i.data.x,r),s=Object(_e.f)(i.data.x,c),u=function autoPeakPicking(e,t){var n=t.minMaxRatio,a=t.maxNumberOfPeaks,i=t.noiseFactor,o=t.lookNegative,r=t.windowFromIndex,c=t.windowToIndex,l=Object(ah.a)(e.data.re.map((function(e){return Math.abs(e)}))),s=e.data,u=s.re,d=s.x;void 0!==r&&void 0!==c&&(d=d.slice(r,c),u=u.slice(r,c));var b=Object(Jr.e)({x:d,y:u},{lookNegative:o,noiseLevel:l*i,minMaxRatio:n,realTopDetection:!0,maxCriteria:!0,smoothY:!1,sgOptions:{windowSize:15,polynomial:3}});b.sort((function(e,t){return t.y-e.y})),a<b.length&&(b=b.slice(0,a));var p=getShiftX(e),f=(d[d.length-1]-d[0])/1e4;return b.reduce((function(t,n){var a,i=Object(Yr.a)(e.peaks.values);try{for(i.s();!(a=i.n()).done;){var o=a.value.delta;if(Math.abs(n.x-o)<f)return t}}catch(r){i.e(r)}finally{i.f()}return t.push({id:generateID(),originDelta:n.x-p,delta:n.x,intensity:n.y,width:n.width}),t}),[])}(e.data[a],Object(g.a)(Object(g.a)({},t),{},{windowFromIndex:l,windowToIndex:s}));i.peaks.values=i.peaks.values.concat(u)}}function handleDeleteSpectraRanges(e,t){var n=t.colKey;!function deleteSpectraAnalysis(e,t,n){var a=Object.entries(e[n].values).reduce((function(e,n){return delete n[1][t],n[1]&&Object.keys(n[1]).length>0?(e[n[0]]=n[1],e):e}),{});delete e[n].options.columns[t],e[n].values=a,e[n].values=refreshCalculation(e,n),kd()(e[n].values)&&(wd[n]=[])}(e.spectraAnalysis,n,e.activeTab)}function handleSetcolumns(e,t){var n=t.payload;!function setColumn(e,t,n){var a=n.columns,i=n.code;init(e,t),e[t].options.code=i,e[t].options.columns=Object.values(a).reduce((function(e,t){var n=Object(g.a)({},t);return delete n.tempKey,e[t.tempKey]=n,e}),{});var o=e[t].options.columns,r=Object.entries(e[t].values).reduce((function(e,t){var n=Object(m.a)(t,2),i=n[0],o=n[1];return e[i]=Object.keys(a).reduce((function(e,t){var n=a[t].tempKey;return o[t]&&(e[n]=o[t]),e}),{}),e}),{});r=Object.entries(r).reduce((function(e,t){return e[t[0]]=Object.keys(o).reduce((function(e,n){var a=o[n].type===Dd;return e[n]=a?{colKey:n,value:calculate(o,r[t[0]],o[n].formula)}:Object(g.a)(Object(g.a)({},t[1][n]),{},{colKey:n}),e}),{}),e}),{}),e[t].values=r}(e.spectraAnalysis,e.activeTab,n)}function handleFiltercolumn(e,t){var n=t.payload,a=n.columnKey,i=n.valueKey;!function changeColumnValueKey(e,t,n,a){e[t].options.columns[n].valueKey=a,e[t].values=refreshCalculation(e,t)}(e.spectraAnalysis,e.activeTab,a,i)}function getReferenceShift(e,t){var n=t.from,a=t.to,i=t.nbPeaks,o=t.targetX,r=t.reference;if(r){var c=function References_getRange(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.nucleus,n=void 0===t?"1H":t,a=e.reference,i=void 0===a?"tms":a;if(!Td[n])throw new Error("Nucleus not found: ",n);var o=Td[n][i.toLowerCase()];if(!o)throw new Error("Reference not found: ",i);return{from:o.delta-.05,to:o.delta+.05,delta:o.delta,nbPeaks:o.nbPeaks}}({reference:r,nucleus:e.nucleus});n=c.from,a=c.to,i=c.nbPeaks,o=c.delta}var l=e.data,s=l.re,u=l.x;return Object(_e.h)({x:u,y:s},{from:n,to:a},{nbPeaks:i,targetX:o})}function checkIsVisible2D(e){return!1!==e.display.isPositiveVisible||!1!==e.display.isNegativeVisible}function setVisible(e,t){2===e.info.dimension?(e.display.isPositiveVisible=t,e.display.isNegativeVisible=t,e.display.isVisible=checkIsVisible2D(e)):e.display.isVisible=t}var ih={data:null,contours:null,tempData:null,xDomain:[],yDomain:[],yDomains:{},xDomains:{},originDomain:{},integralsYDomains:{},originIntegralYDomain:{},selectedTool:Xa.zoom.id,selectedFilter:null,selectedOptionPanel:null,activeTab:null,width:0,height:0,margin:{top:10,right:20,bottom:70,left:0},activeSpectrum:null,mode:"RTL",zoomFactor:{scale:1},integralZoomFactor:{scale:.5},molecules:[],verticalAlign:{flag:!1,stacked:!1,value:20},history:{past:[],present:null,future:[],hasUndo:!1,hasRedo:!1},pivot:0,isLoading:!1,preferences:{},baseLineZones:[],keysPreferences:{},displayerMode:or.DM_1D,tabActiveSpectrum:{},spectraAnalysis:{},correlations:Kp.Build.init({values:[],options:{tolerance:Yp,mf:""},state:{}}),displayerKey:"",ZoomHistory:{},overDisplayer:!1,exclusionZones:{}};function dispatchMiddleware(e){return function(t){switch(t.type){case mt:if(t.payload){var n=t.payload,a=n.spectra,i=Object(de.a)(n,["spectra"]);(function fromJSON(){return _fromJSON.apply(this,arguments)})(a).then((function(n){t.payload=Object(g.a)({spectra:n},i),e(t)}))}else e(t);break;case xt:var o,r=Object(Yr.a)(t.files);try{for(r.s();!(o=r.n()).done;){var c=o.value;addBruker({display:{name:c.name}},c.binary).then((function(n){t.payload=n,e(t)}))}}catch(s){r.e(s)}finally{r.f()}break;case na:var l=Dc.a.Molecule.fromMolfile(t.payload.mol.molfile);Object(Jr.b)(l,{}).then((function(n){t.payload.fromMolfile=n,e(t)}));break;default:e(t)}}}var oh=Object(ft.b)((function innerSpectrumReducer(e,t){switch(e.actionType=t.type,t.type){case mt:return function initiate(e,t){e.displayerKey=generateID(),LoadActions_setData(e,t.payload),initZoom1DHandler(e.data),changeSpectrumVerticalAlignment(e,x()(e.preferences,"display.center",null),!0),ToolsActions_setActiveTab(e),e.isLoading=!1}(e,t);case On:return function setIsLoading(e,t){e.isLoading=t}(e,t.isLoading);case jt:return function handleLoadJsonFile(e,t){var n=JSON.parse(t[0].binary.toString());for(var a in n.spectra){var i,o;1===(null===(i=n.spectra[a].info)||void 0===i?void 0:i.dimension)?n.spectra[a]=initiateDatum1D(n.spectra[a]):2===(null===(o=n.spectra[a].info)||void 0===o?void 0:o.dimension)&&(n.spectra[a]=initiateDatum2D(n.spectra[a]))}LoadActions_setData(e,n),changeSpectrumVerticalAlignment(e,x()(e.preferences,"display.center",null),!0),ToolsActions_setActiveTab(e),initZoom1DHandler(e.data),e.isLoading=!1}(e,t.files);case vt:return loadJcampFile(e,t.files);case yt:return loadJDFFile(e,t.files);case Ot:return function handleLoadMOLFile(e,t){var n,a=Object(Yr.a)(t);try{for(a.s();!(n=a.n()).done;){var i=n.value;addMolfile(e.molecules,i.binary.toString())}}catch(o){a.e(o)}finally{a.f()}e.isLoading=!1}(e,t.files);case xt:return function handleLoadZIPFile(e,t){e.data=t.payload,ToolsActions_setActiveTab(e),initZoom1DHandler(e.data),e.isLoading=!1}(e,t);case Ct:return function addPeak(e,t){var n,a=Object(ft.a)(e);if((null===(n=e.activeSpectrum)||void 0===n?void 0:n.id)&&a){var i=e.activeSpectrum.index,o=getRange_getRange(e,{startX:t.x-10,endX:t.x+10}),r=Object(m.a)(o,2),c=r[0],l=r[1],s=lookupPeak(a.data[i].data,{from:c,to:l}),u=getShiftX(e.data[i]);if(s){var d={id:generateID(),originDelta:s.x-u,delta:s.x,intensity:s.y};e.data[i].peaks.values.push(d)}}}(e,t.mouseCoordinates);case kt:return function addPeaks(e,t){var n=Object(ft.a)(e);if(e.activeSpectrum){var a=e.activeSpectrum.index,i=n.data[a],o=getRange_getRange(e,{startX:t.startX,endX:t.endX}),r=Object(m.a)(o,2),c=r[0],l=r[1];if(c!==l){var s=lookupPeak(i.data,{from:c,to:l}),u=getShiftX(e.data[a]);if(s&&!i.peaks.values.some((function(e){return e.delta===s.x}))){var d={id:generateID(),originDelta:s.x-u,delta:s.x,intensity:s.y};e.data[a].peaks.values.push(d)}}}}(e,t);case St:return function deletePeak(e,t){var n=e.activeSpectrum.index,a=Object(ft.a)(e);if(null==t)e.data[n].peaks.values=[];else{var i=a.data[n].peaks.values.findIndex((function(e){return e.id===t.id}));e.data[n].peaks.values.splice(i,1)}}(e,t.data);case Ht:return function addIntegral(e,t){var n,a=Object(ft.a)(e),i=getRange_getRange(e,{startX:t.startX,endX:t.endX}),o=Object(m.a)(i,2),r=o[0],c=o[1];if((null===(n=e.activeSpectrum)||void 0===n?void 0:n.id)&&a){var l=e.activeSpectrum,s=l.id,u=l.index,d=e.data[u],b=d.data,p=b.x,f=b.re,h=getShiftX(d),g={id:generateID(),originFrom:r-h,originTo:c-h,from:r,to:c,absolute:Object(_e.k)({x:p,y:f},{from:r,to:c,reverse:!0}),kind:"signal"};if(d.integrals.values.push(g),updateIntegralIntegrals(d.integrals),1===d.integrals.values.length){var j=d.integrals.values[0],v=j.from,O=void 0===v?0:v,x=j.to,y=void 0===x?0:x,C=d.data,k=C.x,S=C.y,D=Object(_e.j)({x:k,y:S},{from:O,to:y,reverse:!0}),w=Object(Qe.c)(D.y);e.integralsYDomains[s]=w,e.originIntegralYDomain[s]=w,setIntegralZoom(e.integralZoomFactor.scale,e)}}}(e,t);case Bt:return function deleteIntegral(e,t){var n=Object(ft.a)(e),a=e.activeSpectrum.index,i=t.integralID,o=e.data[a];if(null==i)o.integrals.values=[];else{var r=n.data[a].integrals.values.findIndex((function(e){return e.id===i}));o.integrals.values.splice(r,1),updateIntegralIntegrals(o.integrals)}}(e,t);case Cn:case Qt:return changeIntegral(e,t);case nn:return function handleChangeIntegralZoom(e,t){var n=t.deltaY,a=t.deltaMode;ut.wheel(n,a),setIntegralZoom(ut.getScale(),e)}(e,t);case Sn:return function handleChangeIntegralSum(e,t){var n;if(null===(n=e.activeSpectrum)||void 0===n?void 0:n.id){var a=e.activeSpectrum,i=a.index,o=a.id;e.data[i].integrals.options.sum=t,updateIntegralIntegrals(e.data[i].integrals),e.integralsYDomains||(e.integralsYDomains[o]=e.yDomains[o])}}(e,t.value);case Zn:return handleChangeIntegralsRaltiveValue(e,t);case Mt:return function setOriginalDomain(e,t){e.originDomain=t}(e,t.domain);case wt:return function setXDomain(e,t){e.xDomain=t}(e,t.xDomain);case Tt:return function setYDomain(e,t){e.yDomain=t}(e,t.yDomain);case At:return function setWidth(e,t){e.width=t}(e,t.width);case Et:return function handleSetDimensions(e,t,n){e.width=t,e.height=n}(e,t.width,t.height);case Pt:return function setSelectedTool(e,t){(null===e||void 0===e?void 0:e.data.length)>0&&(t?(t!==e.selectedTool&&resetTool(e,!1),e.selectedTool=t,Xa[t].hasOptionPanel&&(e.selectedOptionPanel=t),Xa[t].isFilter&&setFilterChanges(e,t)):resetTool(e,!1),setMargin(e))}(e,t.selectedTool);case xn:return resetSelectedTool(e);case vn:return function setSelectedOptionPanel(e,t){e.selectedOptionPanel=t}(e,t.selectedOptionPanel);case Rt:return function zoomOut(e,t){if((null===e||void 0===e?void 0:e.data.length)>0){var n=t.zoomType,a=t.trackID,i=th.getInstance(e.ZoomHistory,e.activeTab);if(e.displayerMode===or.DM_1D)switch(n){case dt:e.xDomain=e.originDomain.xDomain;break;case bt:setZoom(e,.8);break;case pt:var o=i.pop();e.xDomain=o?o.xDomain:e.originDomain.xDomain,setZoom(e,.8);break;default:e.xDomain=e.originDomain.xDomain,setZoom(e,.8)}else{var r=e.originDomain,c=r.xDomain,l=r.yDomain,s=r.yDomains;switch(a){case nr.TOP_1D:var u=e.tabActiveSpectrum[e.activeTab.split(",")[0]].id;e.xDomain=c,e.yDomains[u]=s[u];break;case nr.LEFT_1D:var d=e.tabActiveSpectrum[e.activeTab.split(",")[1]].id;e.yDomain=l,e.yDomains[d]=s[d];break;case nr.CENTER_2D:var b=i.pop();e.xDomain=b?b.xDomain:c,e.yDomain=b?b.yDomain:l;break;default:e.xDomain=c,e.yDomain=l,e.yDomains=s}}}}(e,t);case Dt:return function shiftSpectrumAlongXAxis(e,t){var n;if(null===(n=e.activeSpectrum)||void 0===n?void 0:n.id){var a=e.activeSpectrum.index;applyFilter(e.data[a],[{name:Ba.shiftX.id,options:t}]),updateXShift(e.data[a]),resetSelectedTool(e),setDataBy1DFilter(e.data[a]),setDomain(e)}}(e,t.shiftValue);case ln:return function applyZeroFillingFilter(e,t){var n;if(null===(n=e.activeSpectrum)||void 0===n?void 0:n.id){var a=e.activeSpectrum.index,i=[{name:Ba.zeroFilling.id,options:t.zeroFillingSize},{name:Ba.lineBroadening.id,options:t.lineBroadeningValue}];applyFilter(e.data[a],i),resetSelectedTool(e),setDataBy1DFilter(e.data[a]),setDomain(e),setMode(e)}}(e,t.value);case sn:return function applyFFTFilter(e){var t;if(null===(t=e.activeSpectrum)||void 0===t?void 0:t.id){var n=e.activeSpectrum.index;applyFilter(e.data[n],[{name:Ba.fft.id,options:{}}]),resetSelectedTool(e),setDataBy1DFilter(e.data[n]),changeSpectrumVerticalAlignment(e,!1,!0),setDomain(e),setMode(e)}}(e);case dn:return function applyManualPhaseCorrectionFilter(e,t){var n;if(null===(n=e.activeSpectrum)||void 0===n?void 0:n.id){var a=e.activeSpectrum.index,i=t.ph0,o=t.ph1,r=e.data[a],c=eh(r.data.x,e.pivot);i-=o*r.data.x.indexOf(c)/r.data.y.length,applyFilter(e.data[a],[{name:Ba.phaseCorrection.id,options:{ph0:i,ph1:o}}]),resetSelectedTool(e),setDataBy1DFilter(e.data[a]),e.tempData=null,setDomain(e)}}(e,t.value);case bn:return function applyAutoPhaseCorrectionFilter(e){var t;if(null===(t=e.activeSpectrum)||void 0===t?void 0:t.id){var n=e.activeSpectrum.index,a=e.tempData[n],i=a.data,o=autoPhaseCorrection_apply({data:{x:i.x,re:i.y,im:i.im},info:a.info}),r=o.data,c=o.ph0,l=o.ph1,s=r.im,u=r.re;e.tempData[n].data.im=s,e.tempData[n].data.y=u,applyFilter(e.data[n],[{name:Ba.phaseCorrection.id,options:{ph0:c,ph1:l}}]),resetSelectedTool(e),setDataBy1DFilter(e.data[n]),e.tempData=null,setDomain(e)}}(e);case pn:return function applyAbsoluteFilter(e){var t;if(null===(t=e.activeSpectrum)||void 0===t?void 0:t.id){var n=e.activeSpectrum.index;applyFilter(e.data[n],[{name:Ba.absolute.id,options:{}}]),resetSelectedTool(e),setDataBy1DFilter(e.data[n]),e.tempData=null,setDomain(e)}}(e);case un:return function calculateManualPhaseCorrection(e,t){var n=e.tempData,a=e.activeSpectrum.index,i=n[a],o=i.data,r=o.x,c=o.y,l=o.im,s=i.info,u=t.ph0,d=t.ph1,b=eh(n[a].data.x,e.pivot),p={data:{x:r,re:c,im:l},info:s};phaseCorrection_apply(p,{ph0:u-=d*n[a].data.x.indexOf(b)/c.length,ph1:d});var f=p.data,h=f.im,g=f.re;e.tempData[a].data.im=h,e.tempData[a].data.y=g}(e,t.value);case an:return function FiltersActions_enableFilter(e,t,n){var a;if(null===(a=e.activeSpectrum)||void 0===a?void 0:a.id){var i,o,r=e.activeSpectrum.index;FiltersManager_enableFilter(e.data[r],t,n),1===(null===(i=e.data[r].info)||void 0===i?void 0:i.dimension)?(updateXShift(e.data[r]),setDataBy1DFilter(e.data[r])):2===(null===(o=e.data[r].info)||void 0===o?void 0:o.dimension)&&updateShift(e.data[r]),resetSelectedTool(e),setDomain(e),setMode(e);var c=th.getInstance(e.ZoomHistory,e.activeTab).getLast();c&&(e.xDomain=c.xDomain,e.yDomain=c.yDomain)}}(e,t.id,t.checked);case rn:return function FiltersActions_deleteFilter(e,t){var n,a=t.payload.id;if(null===(n=e.activeSpectrum)||void 0===n?void 0:n.id){var i,o,r=e.activeSpectrum.index;deleteFilter(e.data[r],a),1===(null===(i=e.data[r].info)||void 0===i?void 0:i.dimension)?(updateXShift(e.data[r]),setDataBy1DFilter(e.data[r])):2===(null===(o=e.data[r].info)||void 0===o?void 0:o.dimension)&&updateShift(e.data[r]),resetSelectedTool(e),setDomain(e),setMode(e)}}(e,t);case cn:return function deleteSpectraFilter(e,t){var n=t.payload.filterType;if(e.activeTab){var a,i=Object(Yr.a)(e.data);try{var o=function _loop(){var t,i,o=a.value;nucluesToString(null===o||void 0===o||null===(t=o.info)||void 0===t?void 0:t.nucleus)===e.activeTab&&((null===(i=o.filters)||void 0===i?void 0:i.filter((function(e){return e.name===n})))||[]).forEach((function(e){var t,n;deleteFilter(o,e.id),1===(null===(t=o.info)||void 0===t?void 0:t.dimension)?(updateXShift(o),setDataBy1DFilter(o)):2===(null===(n=o.info)||void 0===n?void 0:n.dimension)&&updateShift(o)}))};for(i.s();!(a=i.n()).done;)o()}catch(r){i.e(r)}finally{i.f()}resetSelectedTool(e),setDomain(e),setMode(e)}}(e,t);case Ln:return function filterSnapshotHandler(e,t){var n;if(null===(n=e.activeSpectrum)||void 0===n?void 0:n.id){var a=e.activeSpectrum.index;if(t.id){var i=e.data[a].filters.findIndex((function(e){return e.id===t.id})),o=e.data[a].filters.slice(0,i+1);reapplyFilters(e.data[a],o)}else reapplyFilters(e.data[a]);resetSelectedTool(e),setDomain(e),setMode(e)}}(e,t);case ra:return function handleMultipleSpectraFilter(e,t){if(e.data&&e.data.length>0){var n,a=Object(Yr.a)(e.data);try{for(a.s();!(n=a.n()).done;){var i,o=n.value;1===(null===(i=o.info)||void 0===i?void 0:i.dimension)&&o.info.nucleus===e.activeTab&&Array.isArray(t.payload)&&(applyFilter(o,t.payload.map((function(t){if(t.name===Ba.equallySpaced.id){var n=e.exclusionZones[e.activeTab]||[];return Object(g.a)(Object(g.a)({},t),{},{options:Object(g.a)(Object(g.a)({},t.options),{},{exclusions:n})})}return t}))),o.data.y=o.data.re)}}catch(r){a.e(r)}finally{a.f()}}setDomain(e)}(e,t);case Nt:return function handleSpectrumVisibility(e,t){if(Array.isArray(t.id)){var n=t.id;if(0===n.length){var a,i=Object(Yr.a)(e.data);try{for(i.s();!(a=i.n()).done;)setVisible(a.value,!1)}catch(s){i.e(s)}finally{i.f()}}else{var o,r=Object(Yr.a)(e.data);try{for(r.s();!(o=r.n()).done;){var c=o.value;n.includes(c.id)?setVisible(c,!0):setVisible(c,!1)}}catch(s){r.e(s)}finally{r.f()}}}else{var l=e.data.findIndex((function(e){return e.id===t.id}));e.data[l].display[t.key]=t.value,2===e.data[l].info.dimension&&(e.data[l].display.isVisible=checkIsVisible2D(e.data[l]))}}(e,t);case _t:return function handleChangePeaksMarkersVisibility(e,t){var n,a=Object(Yr.a)(e.data);try{var i=function _loop(){var e,a=n.value;1===(null===(e=a.info)||void 0===e?void 0:e.dimension)&&t.some((function(e){return e.id===a.id}))?a.display.isPeaksMarkersVisible=!0:a.display.isPeaksMarkersVisible=!1};for(a.s();!(n=a.n()).done;)i()}catch(o){a.e(o)}finally{a.f()}}(e,t.data);case Lt:return function SpectrumsActions_handleChangeActiveSpectrum(e,t){var n=!1;if(t){var a=e.data.findIndex((function(e){return e.id===t.id})),i=e.data.findIndex((function(t){var n;return t.id===(null===(n=e.activeSpectrum)||void 0===n?void 0:n.id)}));if(-1!==a){var o=e.data[a];o.display.isVisible=!0,n=-1!==i?e.data[i].info.isFid!==o.info.isFid:o.info.isFid||!1}t=Object(g.a)(Object(g.a)({},t),{},{index:a}),e.activeSpectrum=t,e.tabActiveSpectrum[e.activeTab]=t}else e.activeSpectrum=null,e.tabActiveSpectrum[e.activeTab]=null,n=!1;n&&(setDomain(e),setMode(e))}(e,t.data);case zt:return function handleChangeSpectrumColor(e,t){var n=t.id,a=t.color,i=t.key,o=Object(ft.a)(e).data.findIndex((function(e){return e.id===n}));-1!==o&&(e.data[o].display[i]=a)}(e,t.data);case Ft:return function changeSpectrumSetting(e,t){var n=t.id,a=t.display,i=Object(ft.a)(e).data.findIndex((function(e){return e.id===n}));-1!==i&&(e.data[i].display=a)}(e,t);case Jn:return function alignSpectraHandler(e,t){if(e.data&&e.data.length>0){var n,a=Object(Yr.a)(e.data);try{for(a.s();!(n=a.n()).done;){var i,o,r=n.value;if(1===(null===(i=r.info)||void 0===i?void 0:i.dimension)&&r.info.nucleus===e.activeTab&&!(null===(o=r.info)||void 0===o?void 0:o.isFid)){var c=getReferenceShift(r,Object(g.a)({},t.payload));applyFilter(r,[{name:Ba.shiftX.id,options:c}])}}}catch(l){a.e(l)}finally{a.f()}}setDomain(e),setMode(e)}(e,t);case Xt:return function handleToggleRealImaginaryVisibility(e){if(null!=e.activeSpectrum){var t=e.activeSpectrum.index;if(e.data[t].display.isRealSpectrumVisible=!e.data[t].display.isRealSpectrumVisible,e.data[t].display.isRealSpectrumVisible){var n=e.data[t].data.re;null!==n&&void 0!==n&&(e.data[t].data.y=n)}else{var a=e.data[t].data.im;null!==a&&void 0!==a&&(e.data[t].data.y=a)}setDomain(e)}}(e);case Vt:return function ToolsActions_handleZoom(e,t){var n=t.deltaY,a=t.deltaMode,i=t.trackID;if(i)switch(i){case nr.TOP_1D:Zoom_wheel(n,a,e,getSpectrumID(e,0)),setZoom1D(e,e.margin.top,10,0);break;case nr.LEFT_1D:Zoom_wheel(n,a,e,getSpectrumID(e,1)),setZoom1D(e,e.margin.left,10,1)}else Zoom_wheel(n,a,e),setZoom(e)}(e,t);case aa:return function setSpectraSameTopHandler(e){e.displayerMode===or.DM_1D&&(e.originDomain.yDomains=e.originDomain.originYDomains,setZoom(e,.8))}(e);case ia:return function resetSpectraScale(e){e.displayerMode===or.DM_1D&&(e.yDomains=Object.keys(e.yDomains).reduce((function(t,n){return t[n]=e.originDomain.yDomain,t}),{}),e.originDomain.yDomains=e.yDomains,e.yDomain=e.originDomain.yDomain)}(e);case $t:return function handleChangeSpectrumDisplayMode(e){var t=Object(ft.a)(e),n=e.activeSpectrum,a=e.height,i=e.activeTab,o=20;if(n){var r=n.index;t.data[r].info.isFid&&(o=a/2)}if(e.verticalAlign.flag=!e.verticalAlign.stacked,e.verticalAlign.stacked=!e.verticalAlign.stacked,e.verticalAlign.stacked){var c=t.data.filter((function(e){return e.info.nucleus===i})).length;e.verticalAlign.value=Math.floor(a/(c+2))}else e.verticalAlign.value=o}(e);case Yt:return function addMoleculeHandler(e,t){addMolfile(e.molecules,t)}(e,t.molfile);case Zt:return setMoleculeHandler(e,t.molfile,t.key);case Ut:return function deleteMoleculeHandler(e,t){var n=t.payload,a=n.key,i=n.assignmentData;e.displayerMode===or.DM_1D&&handleUnlinkRange(e,{payload:{assignmentData:i,rangeData:null}}),e.displayerMode===or.DM_2D&&handleUnlinkZone(e,{payload:{assignmentData:i,zoneData:null}});var o=e.molecules.findIndex((function(e){return e.key===a}));e.molecules.splice(o,1)}(e,t);case na:return function predictSpectraFromMolculeHandler(e,t){var n=t.payload,a=n.fromMolfile,i=n.options,o=Object(Jr.d)(a.signals,{}),r=o.x,c=o.y,l=null;if(i.spectra["1h"]){var s=initiateDatum1D({data:{x:r,im:null,re:c},info:{nucleus:"1H"}});l=s.id,s.ranges.values=mapRanges(a.ranges,s),updateIntegralRanges(s),e.data.push(s);var u={id:l,index:e.data.length-1};e.tabActiveSpectrum["1H"]=u,e.activeSpectrum=u}ToolsActions_setActiveTab(e),initZoom1DHandler(e.data),setZoom(e,.9,l),e.isLoading=!1}(e,t);case Gt:return function handleSetMF(e,t){var n=Object(ft.a)(e),a=n.data,i=n.correlations,o=t.mf;""!==i.options.mf&&i.options.mf===o||(e.correlations=Kp.Build.build(a,Object(g.a)(Object(g.a)({},i.options),{},{mf:o}),Gp()(i.values)))}(e,t.payload);case qt:return function handleSetTolerance(e,t){var n=Object(ft.a)(e),a=n.data,i=n.correlations,o=t.tolerance;e.correlations=Kp.Build.build(a,Object(g.a)(Object(g.a)({},i.options),{},{tolerance:o}),Gp()(i.values))}(e,t.payload);case Kt:return function handleSetCorrelation(e,t){var n=Object(ft.a)(e).correlations,a=t.id,i=t.correlation;e.correlations=Kp.CorrelationUtilities.setCorrelation(n,a,i),handleUpdateCorrelations(e)}(e,t.payload);case Wt:return function handleSetCorrelations(e,t){var n=t.ids,a=t.correlations;n.forEach((function(t,n){var i=e.correlations;e.correlations=Kp.CorrelationUtilities.setCorrelation(i,t,a[n])})),handleUpdateCorrelations(e)}(e,t.payload);case Jt:return function handleDeleteSpectra(e,t){var n=e.activeTab,a=Object(ft.a)(e);if(t.id){var i=a.data.findIndex((function(e){return e.id===t.id}));e.data.splice(i,1)}else e.data.forEach((function(t,n){e.data.splice(n,1)}));e.activeSpectrum=null,ToolsActions_setActiveTab(e,n,!0)}(e,t);case"SET_INTEGRAL_Y_DOMAIN":return function handleChangeIntegralYDomain(e,t){var n=e.activeSpectrum;n&&(e.integralsYDomains[n.id]=t)}(e,t.yDomain);case en:return function handleBrushEnd(e,t){var n=e.displayerMode===or.DM_2D,a=getXScale(e),i=n?get2DYScale(e):getYScale(e),o=a.invert(t.startX),r=a.invert(t.endX),c=i.invert(t.startY),l=i.invert(t.endY),s=o>r?[r,o]:[o,r],u=c>l?[l,c]:[c,l],d=th.getInstance(e.ZoomHistory,e.activeTab);if(e.displayerMode===or.DM_2D){switch(t.trackID){case nr.CENTER_2D:e.xDomain=s,e.yDomain=u;break;case nr.TOP_1D:e.xDomain=s;break;case nr.LEFT_1D:e.yDomain=u}d&&d.push({xDomain:s,yDomain:u})}else e.xDomain=s,d&&d.push({xDomain:s,yDomain:u})}(e,t);case fn:return function setVerticalIndicatorXPosition(e,t){var n=getXScale(e);e.pivot=n.invert(t)}(e,t.position);case yn:return function setSpectrumsVerticalAlign(e){changeSpectrumVerticalAlignment(e,!e.verticalAlign.flag)}(e);case hn:return handleAutoPeakPicking(e,t.options);case mn:return handleAutoZonesDetection(e,t.options);case gn:return function handleAutoRangesDetection(e,t){var n;if(null===(n=e.activeSpectrum)||void 0===n?void 0:n.id){var a=e.activeSpectrum.index,i=e.data[a],o=Object(m.a)(e.xDomain,2),r=o[0],c=o[1],l=Object(_e.f)(i.data.x,r),s=Object(_e.f)(i.data.x,c);detectRanges(i,Object(g.a)(Object(g.a)({},t),{},{windowFromIndex:l,windowToIndex:s})),handleOnChangeRangesData(e)}}(e,t.options);case In:return handleAddRange(e,t);case jn:return function handleDeleteRange(e,t){var n,a=Object(ft.a)(e);if(null===(n=a.activeSpectrum)||void 0===n?void 0:n.id){var i=a.activeSpectrum.index,o=t.payload,r=o.id,c=o.assignmentData,l=e.data[i];if(r){var s=l.ranges.values.find((function(e){return e.id===r}));ao(c,[s]);var u=getRangeIndex(a,i,r);l.ranges.values.splice(u,1)}else ao(c,l.ranges.values),l.ranges.values=[];updateIntegralRanges(e.data[i]),handleOnChangeRangesData(e)}}(e,t);case En:return handleResizeRange(e,t);case Pn:return function handleChangeRangeSum(e,t){var n;if(null===(n=e.activeSpectrum)||void 0===n?void 0:n.id){var a=e.activeSpectrum.index;e.data[a].ranges.options.sum=t,updateIntegralRanges(e.data[a])}}(e,t.value);case zn:return handleChangeRangeRaltiveValue(e,t);case Hn:return function handleChangeRangeSignalValue(e,t){var n,a=t.payload,i=a.rangeID,o=a.signalID,r=a.value;if(null===(n=e.activeSpectrum)||void 0===n?void 0:n.id){var c=e.activeSpectrum.index,l=function changeRangeSignal(e,t,n,a){var i=0,o=e.ranges.values.findIndex((function(e){return e.id===t}));if(-1!==o){var r=e.ranges.values[o].signal.findIndex((function(e){return e.id===n}));i=a-e.ranges.values[o].signal[r].delta,e.ranges.values[o].signal[r].delta=a}return i}(e.data[c],i,o,r);applyFilter(e.data[c],[{name:Ba.shiftX.id,options:l}]),updateXShift(e.data[c]),handleOnChangeRangesData(e),setDomain(e)}}(e,t);case Bn:return function handleChangeRangeSignalKind(e,t){var n,a=Object(ft.a)(e);if(null===(n=a.activeSpectrum)||void 0===n?void 0:n.id){var i=a.activeSpectrum.index,o=t.payload,r=o.rowData,c=o.value,l=getRangeIndex(a,i,r.id),s=e.data[i].ranges.values[l];(null===s||void 0===s?void 0:s.signal)&&(s.signal[r.tableMetaInfo.signalIndex].kind=c,s.kind=Ji.includes(c)?$i:Qi,updateIntegralRanges(e.data[i]),handleOnChangeRangesData(e))}}(e,t);case Xn:return function handleSaveEditedRange(e,t){var n,a=Object(ft.a)(e);if(null===(n=a.activeSpectrum)||void 0===n?void 0:n.id){var i=a.activeSpectrum.index,o=t.payload,r=o.editedRowData,c=o.assignmentData,l=to(r);delete l.tableMetaInfo,ao(c,l);var s=getRangeIndex(a,i,l.id);e.data[i].ranges.values[s]=l,updateIntegralRanges(e.data[i]),handleOnChangeRangesData(e)}}(e,t);case Vn:return handleUnlinkRange(e,t);case Yn:return function handleSetDiaIDRange(e,t){var n,a=Object(ft.a)(e);if(null===(n=a.activeSpectrum)||void 0===n?void 0:n.id){var i=a.activeSpectrum.index,o=t.payload,r=o.rangeData,c=o.diaID,l=o.signalIndex,s=getRangeIndex(a,i,r.id),u=e.data[i].ranges.values[s];void 0===l?u.diaID=c:u.signal[l].diaID=c,u.pubIntegral=eo(u)}}(e,t);case"SET_PREFERENCES":return function handelSetPreferences(e,t){var n=t.type,a=t.values,i=x()(e.preferences,"panels",{});e.preferences.panels=Object(g.a)(Object(g.a)({},i),{},Object(ce.a)({},n,a))}(e,t.data);case kn:return function handelSetActiveTab(e,t){t&&ToolsActions_setActiveTab(e,t)}(e,t.tab);case Dn:return function handleAddBaseLineZone(e,t){var n=t.from,a=t.to,i=getXScale(e),o=i.invert(n),r=i.invert(a),c=[];c=o>r?[r,o]:[o,r];var l=e.baseLineZones.slice();l.push({id:generateID(),from:c[0],to:c[1]}),e.baseLineZones=l}(e,t.zone);case wn:return function handleDeleteBaseLineZone(e,t){var n=Object(ft.a)(e);e.baseLineZones=n.baseLineZones.filter((function(e){return e.id!==t}))}(e,t.id);case ca:return function handleAddExclusionZone(e,t){var n=t.payload,a=n.from,i=n.to,o=getXScale(e),r=o.invert(a),c=o.invert(i),l=[];l=r>c?[c,r]:[r,c];var s={id:generateID(),from:l[0],to:l[1]};e.exclusionZones[e.activeTab]?e.exclusionZones[e.activeTab].push(s):e.exclusionZones[e.activeTab]=[s]}(e,t);case la:return function handleDeleteExclusionZone(e,t){var n=t.payload.id,a=e.exclusionZones[e.activeTab].findIndex((function(e){return e.id===n}));e.exclusionZones[e.activeTab].splice(a,1)}(e,t);case Tn:return function handleBaseLineCorrectionFilter(e,t){var n;if(null===(n=e.activeSpectrum)||void 0===n?void 0:n.id){var a=e.activeSpectrum.index;applyFilter(e.data[a],[{name:Ba.baselineCorrection.id,options:Object(g.a)({zones:e.baseLineZones},t.options)}]),e.baseLineZones=[];var i=e.xDomain.slice();resetSelectedTool(e),setDataBy1DFilter(e.data[a]),setDomain(e),e.xDomain=i}}(e,t);case Mn:return function setKeyPreferencesHandler(e,t){var n=Object(ft.a)(e),a=n.activeTab,i=n.data,o=n.activeSpectrum,r=n.zoomFactor,c=n.xDomain,l=n.xDomains,s=n.yDomain,u=n.yDomains,d=n.originDomain,b=n.margin,p=n.displayerMode,f=n.tabActiveSpectrum;if(a){var h=Cp("nucleus")(i),g=p===or.DM_2D?h[a].reduce((function(e,t){return e[t.id]=t.processingController.getLevel(),e}),{}):null;e.keysPreferences[t]={activeTab:a,activeSpectrum:o,displayerMode:p,tabActiveSpectrum:f,zoomFactor:r,xDomain:c,xDomains:l,yDomain:s,yDomains:u,originDomain:d,level:g,margin:b,data:h[a].reduce((function(e,t){return e[t.id]={display:{color:t.display.color,isVisible:t.display.isVisible,isPeaksMarkersVisible:t.display.isPeaksMarkersVisible}},e}),{})}}}(e,t.keyCode);case An:return function applyKeyPreferencesHandler(e,t){var n=Object(ft.a)(e),a=n.keysPreferences[t];if(a)if(e.activeTab=a.activeTab,n.data.forEach((function(t,n){nucluesToString(t.info.nucleus)===a.activeTab&&(e.data[n].display=Object.assign(Gp()(t.display),a.data[t.id].display))})),e.displayerMode=a.displayerMode,e.tabActiveSpectrum=a.tabActiveSpectrum,e.activeSpectrum=a.activeSpectrum,e.margin=a.margin,setDomain(e),e.xDomain=a.xDomain,e.xDomains=a.xDomains,e.yDomain=a.yDomain,e.originDomain=a.originDomain,e.yDomains=a.yDomains,e.displayerMode===or.DM_2D)for(var i=function _loop(){var t=r[o],i=a.level[t],c=i.levelPositive,l=i.levelNegative,s=n.data.findIndex((function(e){return e.id===t})),u=e.data[s].processingController;u.setLevel(c,l),e.contours[t]=u.drawContours()},o=0,r=Object.keys(a.level);o<r.length;o++)i();else setZoom(e,a.zoomFactor.scale)}(e,t.keyCode);case Fn:return function levelChangeHandler(e,t){var n=t.deltaY,a=t.shiftKey;try{var i;if(null===(i=e.activeSpectrum)||void 0===i?void 0:i.id){var o=e.activeSpectrum,r=o.index,c=o.id,l=e.data[r].processingController;a?l.shiftWheel(n):l.wheel(n);var s=Object.freeze(l.drawContours());e.contours[c]=s}}catch(u){console.log(u)}}(e,t);case Rn:return add2dZoneHandler(e,t);case Nn:return function handleDeleteZone(e,t){var n,a=Object(ft.a)(e);if(null===(n=a.activeSpectrum)||void 0===n?void 0:n.id){var i=a.activeSpectrum.index,o=t.payload,r=o.id,c=o.assignmentData;if(r){var l=e.data[i].zones.values.find((function(e){return e.id===r}));kr(c,[l]);var s=getZoneIndex(a,i,r);e.data[i].zones.values.splice(s,1)}else kr(c,e.data[i].zones.values),e.data[i].zones.values=[];handleOnChangeZonesData(e)}}(e,t);case _n:return function addMissingProjectionHander(e,t){var n,a=Object(ft.a)(e),i=t.nucleus;if(null===(n=e.activeSpectrum)||void 0===n?void 0:n.id){var o,r=e.activeSpectrum.index,c=Object(Yr.a)(i);try{for(c.s();!(o=c.n()).done;){var l=o.value,s=Datum2D_getMissingProjection(a.data[r],l);e.data.push(s)}}catch(u){c.e(u)}finally{c.f()}setTab(e,Cp("nucleus")(e.data),e.activeTab,!0),setDomain(e),setMode(e)}}(e,t);case tn:return function handelResetDomain(e){var t=e.originDomain,n=t.xDomain,a=t.yDomain,i=t.xDomains,o=t.yDomains;e.xDomain=n,e.yDomain=a,e.xDomains=i,e.yDomains=o}(e);case $n:return function changeZoneSignalDelta(e,t){var n,a=t.payload,i=a.zoneID,o=a.signal;if(null===(n=e.activeSpectrum)||void 0===n?void 0:n.id){var r=e.activeSpectrum.index,c=function changeZoneSignal(e,t,n){var a=e.zones.values.findIndex((function(e){return e.id===t}));if(-1!==a){var i=e.zones.values[a].signal.findIndex((function(e){return e.id===n.id}));if(-1!==i){var o=e.zones.values[a].signal[i];return{xShift:(null===n||void 0===n?void 0:n.x)||0===(null===n||void 0===n?void 0:n.x)?n.x-o.x.delta:0,yShift:(null===n||void 0===n?void 0:n.y)||0===(null===n||void 0===n?void 0:n.y)?n.y-o.y.delta:0}}}return{xShift:0,yShift:0}}(e.data[r],i,o),l=c.xShift,s=c.yShift,u=[];0!==l&&u.push({name:Ba.shift2DX.id,options:l}),0!==s&&u.push({name:Ba.shift2DY.id,options:s}),applyFilter(e.data[r],u),updateShift(e.data[r]),setDomain(e),handleOnChangeZonesData(e)}}(e,t);case Qn:return function handleChangeZoneSignalKind(e,t){var n,a=Object(ft.a)(e);if(null===(n=a.activeSpectrum)||void 0===n?void 0:n.id){var i=a.activeSpectrum.index,o=t.payload,r=o.rowData,c=o.value,l=getZoneIndex(a,i,r.id),s=e.data[i].zones.values[l];s.signal[r.tableMetaInfo.signalIndex].kind=c,s.kind=Ji.includes(c)?$i:Qi,handleOnChangeZonesData(e)}}(e,t);case ea:return handleUnlinkZone(e,t);case ta:return function handleSetDiaIDZone(e,t){var n,a=Object(ft.a)(e);if(null===(n=a.activeSpectrum)||void 0===n?void 0:n.id){var i=a.activeSpectrum.index,o=t.payload,r=o.zoneData,c=o.diaID,l=o.axis,s=o.signalIndex,u=getZoneIndex(a,i,r.id),d=e.data[i].zones.values[u];void 0===s?d[l].diaID=c:d.signal[s][l].diaID=c,d[l].pubIntegral=Or(d,l)}}(e,t);case Un:return function SpectraAanalysisAction_analyzeSpectra(e,t){var n=getRange_getRange(e,t),a=Object(m.a)(n,2),i=a[0],o=a[1];analyzeSpectra(e.data,e.spectraAnalysis,{from:i,to:o,nucleus:e.activeTab})}(e,t);case Kn:return handleDeleteSpectraRanges(e,t);case Wn:return function handleResizeSpectraRange(e,t){var n=t.payload,a=n.columnKey,i=n.from,o=n.to;analyzeSpectra(e.data,e.spectraAnalysis,{from:i,to:o,nucleus:e.activeTab,columnKey:a})}(e,t);case Gn:return handleSetcolumns(e,t);case qn:return handleFiltercolumn(e,t);case"undo":return function handleHistoryUndo(e){var t=e.history,n=t.past,a=t.present,i=t.future,o=n[n.length-1],r=n.slice(0,n.length-1),c=[a].concat(Object(wi.a)(i)),l=0!==c.length,s=0!==n.length,u=getDomain(e.data),d={past:r,present:o,future:c,hasRedo:l,hasUndo:s};e.xDomain=u.xDomain,e.yDomain=u.yDomain,e.originDomain=u,e.history=d}(e);case"redo":return function handleHistoryRedo(e){var t=e.history,n=(t.future[0],t.future.shift());t.past.push(t.present),t.present=n,t.hasUndo=!0,t.hasRedo=t.future.length>0,setDomain(e.data)}(e);case"reset":return function handleHistoryReset(e,t){e.history={past:[],present:t,future:[],hasRedo:!1,hasUndo:!1}}(e,t);case oa:return function setIsOverDisplayer(e,t){e.overDisplayer=t.payload}(e,t);default:return}}));var rh,ch=function ToolBarWrapper(e){var t=function Wrapper(t){var n=useChartData(),a=n.data,i=n.activeSpectrum,o=n.verticalAlign,r=n.displayerMode,c=Object(y.useMemo)((function(){if(a&&i&&i.id){var e=a.find((function(e){return e.id===i.id}));return null!==e&&void 0!==e?{info:e.info,spectrumsCount:e.length}:{}}return{}}),[i,a]).info,l=void 0===c?{}:c,s=t.forwardedRef,u=Object(de.a)(t,["forwardedRef"]);return Object(P.jsx)(e,Object(g.a)(Object(g.a)({},u),{},{info:l,activeSpectrum:i,verticalAlign:o,displayerMode:r,ref:s}))};return Object(y.memo)(Object(y.forwardRef)((function(e,n){return Object(P.jsx)(t,Object(g.a)(Object(g.a)({},e),{},{forwardedRef:n}))})))},lh=Object(v.b)(rh||(rh=Object(j.a)(["\n  display: flex;\n  flex-direction: column;\n  width: 450px;\n  padding: 5px;\n  button:focus {\n    outline: none;\n  }\n  .header {\n    height: 24px;\n    border-bottom: 1px solid #f0f0f0;\n    display: flex;\n    span {\n      color: #464646;\n      font-size: 15px;\n      flex: 1;\n    }\n\n    button {\n      background-color: transparent;\n      border: none;\n      svg {\n        height: 16px;\n      }\n    }\n  }\n  .container {\n    display: flex;\n    margin: 30px 5px;\n    input,\n    button {\n      padding: 5px;\n      border: 1px solid gray;\n      border-radius: 5px;\n      height: 36px;\n      margin: 2px;\n    }\n    input {\n      flex: 10;\n    }\n    button {\n      flex: 2;\n      color: white;\n      background-color: gray;\n    }\n  }\n"]))),sh=["dx","jdx"];function LoadJCAMPModal(e){var t=e.onLoadClick,n=e.onClose,a=e.startLoading,i=Object(y.useRef)(),o=Object(y.useCallback)((function(){var e=i.current.value,n=function extractFileMetaFromPath(e){var t=e.replace(/^.*[\\\/]/,"").split(".");return{name:t[0].toLowerCase(),extension:t[1].toLowerCase()}}(e);sh.includes(n.extension)?(a(),function loadFile(e){return _loadFile.apply(this,arguments)}(e).then((function(a){var i={binary:a,name:n.name,jcampURL:e};t(i)}))):t(null)}),[t,a]);return Object(ve.c)("div",{css:lh,children:[Object(ve.c)("div",{className:"header handle",children:[Object(ve.b)("span",{children:"Load JCAMP Dialog"}),Object(ve.b)(Ge,{onClick:n})]}),Object(ve.c)("div",{className:"container",children:[Object(ve.b)("input",{ref:i,type:"text",placeholder:"Enter URL to JCAMP-DX file"}),Object(ve.b)("button",{type:"button",onClick:o,children:"Load"})]})]})}LoadJCAMPModal.defaultProps={onLoadButtonClick:function onLoadButtonClick(){return null},onClose:function onClose(){return null},startLoading:function startLoading(){return null}};var uh,dh=LoadJCAMPModal,bh=Object(v.b)(uh||(uh=Object(j.a)(["\n  background-color: transparent;\n  border: none;\n  width: 35px;\n  height: 35px;\n  min-height: 35px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  outline: outline;\n  :focus {\n    outline: none !important;\n  }\n\n  &.fa {\n    svg {\n      font-size: 14px;\n    }\n  }\n  &.cheminfo {\n    svg {\n      font-size: 24px;\n    }\n  }\n"]))),ph=[{id:"importFile",icon:Object(ve.b)(He.n,{}),label:"Import from file system (Press Ctrl + O)"},{id:"importJDX",icon:Object(ve.b)(He.n,{}),label:"Add JCAMP-DX from URL"}],fh=[{id:"svg",icon:Object(ve.b)(He.h,{}),label:"Export as SVG"},{id:"png",icon:Object(ve.b)(He.q,{}),label:"Export as PNG"},{id:"json",icon:Object(ve.b)(He.o,{}),label:"Save data ( Press Ctrl + S )"},{id:"nmre",icon:Object(ve.b)(He.o,{}),label:"Save NMRE data"},{id:"copy",icon:Object(ve.b)(He.e,{}),label:"Copy image to Clipboard ( Press Ctrl + C )"}];function BasicToolBar(e){var t=e.info,n=e.verticalAlign,a=e.displayerMode,i=useDispatch(),o=usePreferences(),r=gc(),c=te(),l=useLoader(),s=useToolsFunctions(),u=s.isRealSpectrumShown,d=s.changeSpectrumViewHandler,b=s.changeDisplayViewModeHandler,p=s.alignSpectrumsVerticallyHandler,f=useExport(),h=f.saveAsSVGHandler,m=f.saveAsPNGHandler,j=f.saveAsJSONHandler,v=f.saveAsNMREHandler,O=f.saveToClipboardHandler,C=Object(g.a)({isComplex:!1,isFid:!1},t),k=Object(y.useCallback)((function(e){e?(i({type:vt,files:[e]}),c.close()):r.error("you file must be one of those extensions [ .jdx, dx ] ")}),[r,i,c]),S=Object(y.useCallback)((function(){c.close(),i({type:On,isLoading:!0})}),[i,c]),D=Object(y.useCallback)((function(){c.show(Object(ve.b)(dh,{onLoadClick:k,onClose:function onClose(){return c.close()},startLoading:S}),{})}),[k,c,S]),w=Object(y.useCallback)((function(e){return!x()(o,"display.toolBarButtons.".concat(e))}),[o]),T=Object(y.useCallback)((function(){l.open()}),[l]),M=Object(y.useCallback)((function(e){switch(e.id){case"importFile":T();break;case"importJDX":D();break;default:return}}),[T,D]),A=Object(y.useCallback)((function(e){switch(e.id){case"svg":h();break;case"png":m();break;case"json":j();break;case"nmre":v();break;case"copy":O()}}),[h,m,j,v,O]);return Object(ve.c)(y.Fragment,{children:[w("hideImport")&&Object(ve.b)(Ju,{style:bh,className:"fa",component:Object(ve.b)(He.r,{}),toolTip:"Import",onClick:M,items:ph}),w("hideExportAs")&&Object(ve.b)(Ju,{style:bh,className:"fa",component:Object(ve.b)(He.p,{}),toolTip:"Export As",onClick:A,items:fh}),a===or.DM_1D&&w("hideSpectraStackAlignments")&&Object(ve.b)("button",{type:"button",css:bh,className:"cheminfo",onClick:b,children:Object(ve.b)(Ze,{title:"Spectra alignment ( Press s )",popupPlacement:"right",children:n.stacked?Object(ve.b)(Rs.m,{}):Object(ve.b)(Rs.l,{})})}),a===or.DM_1D&&w("hideRealImaginary")&&C&&C.isComplex&&Object(ve.b)("button",{css:bh,className:"cheminfo",type:"button",onClick:d,children:Object(ve.b)(Ze,{title:u?"Display Real ":"Display Imaginary ",popupPlacement:"right",children:Object(ve.b)(Rs.r,{})})}),a===or.DM_1D&&w("hideSpectraCenterAlignments")&&Object(ve.b)("button",{css:bh,className:"cheminfo",type:"button",onClick:p,children:Object(ve.b)(Ze,{title:n.flag?"Baseline  Bottom ( Press c )":"Baseline  Center ( Press c )",popupPlacement:"right",children:n.flag?Object(ve.b)(Rs.c,{}):Object(ve.b)(Rs.d,{})})})]})}var hh,gh,mh=ch(Object(y.memo)(BasicToolBar)),jh=Object(v.b)(hh||(hh=Object(j.a)(["\n  width: 35px;\n  height: 35px;\n  background-color: white;\n  padding: 5px;\n  margin: 0px;\n  border: none;\n  outline: none;\n\n  :focus {\n    outline: none !important;\n  }\n"]))),vh=Object(v.b)(gh||(gh=Object(j.a)(["\n  color: black;\n  background-color: #f3f3f3 !important;\n"])));function ToggleButton_ToggleButton(e){var t=e.children,n=e.value,a=e.disabled,i=e.isActive,o=e.onChange,r=e.className,c=e.style,l=e.isVisible,s=e.onMouseEnter,u=e.onMouseLeave,d=e.helpID,b=Object(y.useState)(i),p=Object(m.a)(b,2),f=p[0],h=p[1],g=Object(y.useCallback)((function(){var e=!f;h(e),o(e?n:null)}),[f,o,n]);return Object(y.useEffect)((function(){h(i)}),[i]),l?Object(ve.b)("button",{type:"button",onClick:g,css:[jh,f&&vh],style:c,className:" ".concat(r,f?"  active":" "),disabled:a,onMouseEnter:s,onMouseLeave:u,"data-helpid":d,children:Object(y.cloneElement)(t,{style:{fontSize:"10px"}})}):null}ToggleButton_ToggleButton.displayName="ToggleButton",ToggleButton_ToggleButton.defaultProps={isActive:!1,disabled:!1,isVisible:!0,value:null,className:"",onChange:function onChange(){return null},onValueReady:function onValueReady(){return null}};var Oh=ToggleButton_ToggleButton,xh={display:"flex",flexDirection:"column"};function ToggleButtonGroup(e){var t=e.children,n=e.value,a=e.onChange,i=Object(y.useState)([]),o=Object(m.a)(i,2),r=o[0],c=o[1],l=Object(y.useCallback)((function(e){var t=Object(wi.a)(r).map((function(t){return{value:t.value,isActive:t.value===e}}));c(t),a(e)}),[a,r]),s=Object(y.useMemo)((function(){var e=0;return y.Children.map(t,(function(t){if(t){if("ToggleButton"===t.type.displayName){var n=Object(y.cloneElement)(t,{onChange:l,isActive:r[e]&&r[e].isActive&&r[e].isActive,index:e});return e++,n}return Object(y.cloneElement)(t)}}))}),[t,l,r]);return Object(y.useEffect)((function(){var e=y.Children.map(t,(function(e){if(e&&"ToggleButton"===e.type.displayName)return{value:e.props.value,isActive:e.props.value===n}}));c(e)}),[t,n]),Object(P.jsxs)("div",{style:xh,children:[" ",s," "]})}ToggleButtonGroup.defaultProps={onChange:function onChange(){return null}};var yh,Ch=ToggleButtonGroup,kh=Object(v.b)(yh||(yh=Object(j.a)(["\n  button {\n    background-color: transparent;\n    border: none;\n    width: 35px;\n    height: 35px;\n    min-height: 35px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    outline: outline;\n    :focus {\n      outline: none !important;\n    }\n\n    &.fa {\n      svg {\n        font-size: 14px;\n      }\n    }\n    &.cheminfo {\n      svg {\n        font-size: 18px;\n      }\n    }\n  }\n"])));function FunctionToolBar(e){var t=e.defaultValue,n=e.activeSpectrum,a=e.info,i=e.displayerMode,o=Object(y.useState)(),r=Object(m.a)(o,2),c=r[0],l=r[1],s=useHelp(),u=usePreferences(),d=useDispatch(),b={info:Object(g.a)({isComplex:!1,isFid:!1},a)},p=useToolsFunctions(),f=p.handleChangeOption,h=p.handleFullZoomOut,j=Object(y.useCallback)((function(e){l(e),f(e)}),[f]);Object(y.useEffect)((function(){l(t)}),[t]);var v=Object(y.useCallback)((function(){d({type:sn,value:""}),d({type:It,selectedFilter:null})}),[d]),O=Object(y.useCallback)((function(e){return!x()(u,"display.toolBarButtons.".concat(e))}),[u]);return Object(ve.c)("div",{css:kh,children:[Object(ve.c)(Ch,{value:c,onChange:j,children:[O("hideZoomTool")&&Object(ve.b)(Oh,Object(g.a)(Object(g.a)({value:Xa.zoom.id},s.onHover),{},{helpID:"zoomIn",className:"fa",children:Object(ve.b)(Ze,{title:"".concat(Xa.zoom.label," ( Press z )"),popupPlacement:"right",offset:{x:10,y:0},style:{display:"flex"},children:Object(ve.b)(He.D,{})})}),Xa.zoom.id),O("hideZoomOutTool")&&Object(ve.b)("button",{className:"fa",type:"button",onClick:h,children:Object(ve.b)(Ze,{title:"Horizontal zoom out ( Press f ), Horizontal and Vertical zoom out, double click ( Press ff )",popupPlacement:"right",children:Object(ve.b)(He.k,{})})}),i===or.DM_1D&&O("hidePeakTool")&&Object(ve.b)(Oh,Object(g.a)(Object(g.a)({value:Xa.peakPicking.id,className:"cheminfo",isVisible:n&&b&&!b.info.isFid},s.onHover),{},{helpID:"peakPicking",children:Object(ve.b)(Ze,{title:"".concat(Xa.peakPicking.label," ( Press p )"),popupPlacement:"right",offset:{x:10,y:0},children:Object(ve.b)(Rs.n,{})})}),Xa.peakPicking.id),i===or.DM_1D&&O("hideIntegralTool")&&Object(ve.b)(Oh,Object(g.a)(Object(g.a)({value:Xa.integral.id,className:"cheminfo",isVisible:n&&b&&!b.info.isFid},s.onHover),{},{helpID:"integralPicking",children:Object(ve.b)(Ze,{title:"".concat(Xa.integral.label," ( Press i )"),popupPlacement:"right",offset:{x:10,y:0},children:Object(ve.b)(Rs.i,{})})}),Xa.integral.id),i===or.DM_2D&&O("hideIntegralTool")&&Object(ve.b)(Oh,{value:Xa.zone2D.id,className:"fa",isVisible:n,children:Object(ve.b)(Ze,{title:"".concat(Xa.zone2D.label," ( Press i  )"),popupPlacement:"right",offset:{x:10,y:0},children:Object(ve.b)(He.g,{})})},Xa.zone2D.id),i===or.DM_2D&&Object(ve.b)(Oh,{value:Xa.slicingTool.id,style:kh.icon,isVisible:n,children:Object(ve.b)(Ze,{title:"".concat(Xa.slicingTool.label),popupPlacement:"right",offset:{x:10,y:0},children:"Slic"})},Xa.slicingTool.id),i===or.DM_1D&&O("hideAutoRangesTool")&&Object(ve.b)(Oh,{value:Xa.rangesPicking.id,className:"cheminfo",isVisible:n&&b&&!b.info.isFid,children:Object(ve.b)(Ze,{title:Xa.rangesPicking.label,popupPlacement:"right",offset:{x:10,y:0},children:Object(ve.b)(Rs.q,{})})},Xa.rangesPicking.id),i===or.DM_1D&&O("hideMultipleSpectraAnalysisTool")&&Object(ve.b)(Oh,{value:Xa.multipleSpectraAnalysis.id,className:"cheminfo",children:Object(ve.b)(Ze,{title:Xa.multipleSpectraAnalysis.label,popupPlacement:"right",offset:{x:10,y:0},children:Object(ve.b)(Rs.j,{})})},Xa.multipleSpectraAnalysis.id),i===or.DM_1D&&O("hideZeroFillingTool")&&Object(ve.b)(Oh,{value:Xa.zeroFilling.id,className:"cheminfo",isVisible:b&&Ba.zeroFilling.isApplicable(b),children:Object(ve.b)(Ze,{title:Xa.zeroFilling.label,popupPlacement:"right",offset:{x:10,y:0},children:Object(ve.b)(Rs.v,{})})},Xa.zeroFilling.id),i===or.DM_1D&&O("hidePhaseCorrectionTool")&&Object(ve.b)(Oh,{value:Xa.phaseCorrection.id,className:"cheminfo",style:kh.icon,isVisible:n&&b&&Ba.phaseCorrection.isApplicable(b),children:Object(ve.b)(Ze,{title:Xa.phaseCorrection.label,popupPlacement:"right",offset:{x:10,y:0},children:Object(ve.b)(Rs.p,{})})},Xa.phaseCorrection.id),i===or.DM_1D&&O("hideBaseLineCorrectionTool")&&Object(ve.b)(Oh,{value:Xa.baseLineCorrection.id,className:"cheminfo",isVisible:n&&b&&Ba.baselineCorrection.isApplicable(b),children:Object(ve.b)(Ze,{title:Xa.baseLineCorrection.label,popupPlacement:"right",offset:{x:10,y:0},children:Object(ve.b)(Rs.e,{})})},Xa.baseLineCorrection.id),i===or.DM_1D&&O("hideExclusionZonesTool")&&Object(ve.b)(Oh,{value:Xa.exclusionZones.id,className:"cheminfo",children:Object(ve.b)(Ze,{title:Xa.exclusionZones.label,popupPlacement:"right",offset:{x:10,y:0},children:Object(ve.b)(Rs.j,{})})},Xa.exclusionZones.id)]}),i===or.DM_1D&&O("hideFFTTool")&&b&&Ba.fft.isApplicable(b)&&Object(ve.b)("button",{className:"cheminfo",type:"button",onClick:v,children:Object(ve.b)(Ze,{title:"FFT Filter",popupPlacement:"right",offset:{x:10,y:0},children:Object(ve.b)(Rs.g,{})})})]})}var Sh=ch(Object(y.memo)(FunctionToolBar));FunctionToolBar.defaultProps={defaultValue:Xa.zoom.id};var Dh={display:"flex",flexDirection:"column",alignItems:"start",borderRight:"0.55px solid #f7f7f7",paddingRight:"1px",overflowY:"auto",height:"100%"};function ToolBar(e){var t=e.selectedTool;return Object(P.jsxs)("div",{style:Object(g.a)({},Dh),children:[Object(P.jsx)(Sh,{defaultValue:t}),Object(P.jsx)(mh,{})]})}var wh,Th=Object(y.memo)(ToolBar),Mh={container:{position:"relative",height:"none"},resizer:{width:10,backgroundColor:"#f7f7f7",cursor:"ew-resize"},pane:{overflow:"hidden"}},Ah=Object(v.b)(wh||(wh=Object(j.a)(["\n  background-color: white;\n  width: 100%;\n  display: block;\n  height: 100%;\n  font-size: 14px;\n\n  div:focus {\n    outline: none !important;\n  }\n\n  button {\n    cursor: pointer;\n    color: black;\n    &:disabled {\n      cursor: default;\n    }\n  }\n\n  button:active,\n  button:hover,\n  button:focus,\n  [type='button']:focus,\n  button {\n    outline: none !important;\n  }\n  * {\n    -webkit-user-drag: none;\n    -moz-user-drag: none;\n    -o-user-drag: none;\n    user-drag: none;\n    -moz-user-select: none;\n    -webkit-user-select: none;\n    -ms-user-select: none;\n    user-select: none;\n  }\n\n  .SplitPane {\n    height: 100%;\n  }\n\n  .Resizer.vertical:after {\n    content: '\\22EE';\n    top: 50%;\n    color: black;\n    position: absolute;\n    font-size: 14px;\n  }\n\n  .Resizer.vertical {\n    padding: 2px;\n  }\n\n  .Resizer.vertical:hover {\n    background-color: #dfdfdf !important;\n    border-left: 0.55px #bbbbbb solid;\n    border-right: 0.55px #bbbbbb solid;\n  }\n"],["\n  background-color: white;\n  width: 100%;\n  display: block;\n  height: 100%;\n  font-size: 14px;\n\n  div:focus {\n    outline: none !important;\n  }\n\n  button {\n    cursor: pointer;\n    color: black;\n    &:disabled {\n      cursor: default;\n    }\n  }\n\n  button:active,\n  button:hover,\n  button:focus,\n  [type='button']:focus,\n  button {\n    outline: none !important;\n  }\n  * {\n    -webkit-user-drag: none;\n    -moz-user-drag: none;\n    -o-user-drag: none;\n    user-drag: none;\n    -moz-user-select: none;\n    -webkit-user-select: none;\n    -ms-user-select: none;\n    user-select: none;\n  }\n\n  .SplitPane {\n    height: 100%;\n  }\n\n  .Resizer.vertical:after {\n    content: '\\\\22EE';\n    top: 50%;\n    color: black;\n    position: absolute;\n    font-size: 14px;\n  }\n\n  .Resizer.vertical {\n    padding: 2px;\n  }\n\n  .Resizer.vertical:hover {\n    background-color: #dfdfdf !important;\n    border-left: 0.55px #bbbbbb solid;\n    border-right: 0.55px #bbbbbb solid;\n  }\n"])));function NMRium(e){var t=e.data,n=e.onDataChange,a=e.docsBaseUrl,i=e.preferences,o=e.getSpinner,r=void 0===o?defaultGetSpinner:o,c=e.emptyText,l=void 0===c?void 0:c,s=Object(y.useRef)(null),u=Object(y.useRef)(null),d=Object(k.a)(!1),b=Object(m.a)(d,2),p=b[0],f=b[1],h=Object(S.a)(s,p,{onClose:function onClose(){f(!1)}}),j=Object(y.useState)(!1),v=Object(m.a)(j,2),O=v[0],D=v[1],w=Object(y.useState)(!1),T=Object(m.a)(w,2),M=T[0],A=T[1],E=Object(y.useState)(Pc),P=Object(m.a)(E,2),I=P[0],F=P[1],R=Object(y.useReducer)(oh,ih),N=Object(m.a)(R,2),_=N[0],L=N[1],H=Object(y.useReducer)(preferencesReducer,nl),X=Object(m.a)(H,2),Y=X[0],Z=X[1],U=_.selectedTool,K=_.displayerMode,W=_.data;Object(y.useEffect)((function(){Qf(_.actionType)&&(null===n||void 0===n||n(_))}),[n,_]);var G=Object(y.useMemo)((function(){return dispatchMiddleware(L)}),[]);Object(y.useEffect)((function(){var e;null===(e=s.current)||void 0===e||e.focus()}),[h]),Object(y.useEffect)((function(){Z({type:Qc,payload:{display:i,dispatch:Z}})}),[i]),Object(y.useEffect)((function(){G({type:On,isLoading:!0}),G({type:mt,payload:t})}),[t,G]),Object(y.useEffect)((function(){!function setBaseUrl(e){Ac=e}(a),F(Pc())}),[a]);var q=Object(y.useCallback)((function(e){e&&!O&&(A(!1),L({type:At,width:e}))}),[O]),J=Object(y.useMemo)((function(){return x()(Y,"controllers.help.preventAutoHelp",!1)}),[Y]),$=Object(y.useCallback)((function(e){e.stopPropagation(),D((function(e){return!e}))}),[]),Q=Object(y.useCallback)((function(e){checkModifierKeyActivated(e)||e.preventDefault()}),[]),ee=Object(y.useCallback)((function(){G({type:oa,payload:!0})}),[G]),te=Object(y.useCallback)((function(){G({type:oa,payload:!1})}),[G]);return Object(ve.b)(pc,{children:Object(ve.b)(Xe,{value:{rootRef:s.current,elementsWraperRef:u.current},children:Object(ve.b)(V,{value:Y,children:Object(ve.b)("div",{onMouseEnter:ee,onMouseLeave:te,style:{height:"100%",position:"relative"},children:Object(ve.b)(Ro,{data:I,wrapperRef:u.current,preventAutoHelp:J,children:Object(ve.b)(vc,{wrapperRef:u.current,children:Object(ve.b)(B,{value:G,children:Object(ve.b)(z,{value:Object(g.a)(Object(g.a)({},_),{},{isResizeEventStart:M}),children:Object(ve.b)(we,{wrapperRef:u.current,children:Object(ve.b)(ri.a,{children:Object(ve.b)(AssignmentProvider,{spectraData:W,children:Object(ve.b)(Re,{value:r,children:Object(ve.c)("div",{ref:s,css:Ah,onContextMenu:Q,children:[Object(ve.b)(ss,{isFullscreen:h,onMaximize:f}),Object(ve.b)("div",{style:{height:"calc(100% - 36px)",width:"100%",backgroundColor:"white"},children:Object(ve.c)(fs,{children:[Object(ve.b)(Mc,{}),Object(ve.b)(Th,{selectedTool:U}),Object(ve.c)(C.a,{style:Mh.container,resizerStyle:Mh.resizer,paneStyle:Mh.pane,pane1Style:O?{maxWidth:"100%",width:"calc(100% - 10px)"}:{maxWidth:"80%"},split:"vertical",defaultSize:O?"99%":"calc(100% - 600px)",minSize:"80%",onDragFinished:q,onResizerDoubleClick:$,onDragStarted:function onDragStarted(){A(!0)},children:[K===or.DM_1D?Object(ve.b)(tr,{emptyText:l}):Object(ve.b)(sc,{emptyText:l}),O?null:Object(ve.b)(Jf,{selectedTool:U,displayerMode:K})]})]})}),Object(ve.b)("div",{ref:u,id:"main-wrapper",style:{position:"absolute",pointerEvents:"none",zIndex:0,left:0,right:0,top:0,bottom:0}},String(h))]})})})})})})})})})})})})})}NMRium.defaultProps={docsBaseUrl:"https://docs.nmrium.org",onDataChange:function onDataChange(){return null},preferences:{general:{disableMultipletAnalysis:!1,hideSetSumFromMolecule:!1},panels:{hideSpectraPanel:!1,hideInformationPanel:!1,hidePeaksPanel:!1,hideIntegralsPanel:!1,hideRangesPanel:!1,hideStructuresPanel:!1,hideFiltersPanel:!1,hideZonesPanel:!1,hideSummaryPanel:!1,hideMultipleSpectraAnalysisPanel:!1},toolBarButtons:{hideZoomTool:!1,hideZoomOutTool:!1,hideImport:!1,hideExportAs:!1,hideSpectraStackAlignments:!1,hideSpectraCenterAlignments:!1,hideRealImaginary:!1,hidePeakTool:!1,hideIntegralTool:!1,hideAutoRangesTool:!1,hideZeroFillingTool:!1,hidePhaseCorrectionTool:!1,hideBaseLineCorrectionTool:!1,hideFFTTool:!1,hideMultipleSpectraAnalysisTool:!1,hideExclusionZonesTool:!1}}};t.a=Object(y.memo)(NMRium)}}]);
//# sourceMappingURL=1.802a24b8.chunk.js.map